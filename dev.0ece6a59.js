let t,i,n,r,s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v,b;var C=globalThis;function x(t,i,n,r){Object.defineProperty(t,i,{get:n,set:r,enumerable:!0,configurable:!0})}function E(t){return t&&t.__esModule?t.default:t}var B={},S={},I=C.parcelRequire141c;null==I&&((I=function(t){if(t in B)return B[t].exports;if(t in S){var i=S[t];delete S[t];var n={id:t,exports:{}};return B[t]=n,i.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,i){S[t]=i},C.parcelRequire141c=I);var L=I.register;L("f1q41",function(t,i){(function(){var n,r="Expected a function",s="__lodash_hash_undefined__",o="__lodash_placeholder__",a=1/0,l=0/0,A=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],h="[object Arguments]",c="[object Array]",u="[object Boolean]",d="[object Date]",g="[object Error]",f="[object Function]",p="[object GeneratorFunction]",m="[object Map]",_="[object Number]",y="[object Object]",w="[object Promise]",v="[object RegExp]",b="[object Set]",x="[object String]",E="[object Symbol]",B="[object WeakMap]",S="[object ArrayBuffer]",I="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",M="[object Int8Array]",T="[object Int16Array]",R="[object Int32Array]",O="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",k="[object Uint32Array]",N=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,Q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,V=RegExp(H.source),z=RegExp(G.source),K=/<%-([\s\S]+?)%>/g,j=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(X.source),J=/^\s+/,tt=/\s/,te=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ti=/\{\n\/\* \[wrapped with (.+)\] \*/,tn=/,? & /,tr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ts=/[()=,{}\[\]\/\s]/,to=/\\(\\)?/g,ta=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tl=/\w*$/,tA=/^[-+]0x[0-9a-f]+$/i,th=/^0b[01]+$/i,tc=/^\[object .+?Constructor\]$/,tu=/^0o[0-7]+$/i,td=/^(?:0|[1-9]\d*)$/,tg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tf=/($^)/,tp=/['\n\r\u2028\u2029\\]/g,tm="\ud800-\udfff",t_="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ty="\\u2700-\\u27bf",tw="a-z\\xdf-\\xf6\\xf8-\\xff",tv="A-Z\\xc0-\\xd6\\xd8-\\xde",tb="\\ufe0e\\ufe0f",tC="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tx="['’]",tE="["+tC+"]",tB="["+t_+"]",tS="["+tw+"]",tI="[^"+tm+tC+"\\d+"+ty+tw+tv+"]",tL="\ud83c[\udffb-\udfff]",tF="[^"+tm+"]",tM="(?:\ud83c[\udde6-\uddff]){2}",tT="[\ud800-\udbff][\udc00-\udfff]",tR="["+tv+"]",tO="\\u200d",tD="(?:"+tS+"|"+tI+")",tP="(?:"+tR+"|"+tI+")",tk="(?:"+tx+"(?:d|ll|m|re|s|t|ve))?",tN="(?:"+tx+"(?:D|LL|M|RE|S|T|VE))?",tU="(?:"+tB+"|"+tL+")?",tQ="["+tb+"]?",tH="(?:"+tO+"(?:"+[tF,tM,tT].join("|")+")"+tQ+tU+")*",tG=tQ+tU+tH,tV="(?:"+["["+ty+"]",tM,tT].join("|")+")"+tG,tz="(?:"+[tF+tB+"?",tB,tM,tT,"["+tm+"]"].join("|")+")",tK=RegExp(tx,"g"),tj=RegExp(tB,"g"),tW=RegExp(tL+"(?="+tL+")|"+tz+tG,"g"),t$=RegExp([tR+"?"+tS+"+"+tk+"(?="+[tE,tR,"$"].join("|")+")",tP+"+"+tN+"(?="+[tE,tR+tD,"$"].join("|")+")",tR+"?"+tD+"+"+tk,tR+"+"+tN,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tV].join("|"),"g"),tY=RegExp("["+tO+tm+t_+tb+"]"),tq=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tX=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tZ=-1,tJ={};tJ[L]=tJ[F]=tJ[M]=tJ[T]=tJ[R]=tJ[O]=tJ[D]=tJ[P]=tJ[k]=!0,tJ[h]=tJ[c]=tJ[S]=tJ[u]=tJ[I]=tJ[d]=tJ[g]=tJ[f]=tJ[m]=tJ[_]=tJ[y]=tJ[v]=tJ[b]=tJ[x]=tJ[B]=!1;var t0={};t0[h]=t0[c]=t0[S]=t0[I]=t0[u]=t0[d]=t0[L]=t0[F]=t0[M]=t0[T]=t0[R]=t0[m]=t0[_]=t0[y]=t0[v]=t0[b]=t0[x]=t0[E]=t0[O]=t0[D]=t0[P]=t0[k]=!0,t0[g]=t0[f]=t0[B]=!1;var t1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t2=parseFloat,t5=parseInt,t4="object"==typeof C&&C&&C.Object===Object&&C,t3="object"==typeof self&&self&&self.Object===Object&&self,t6=t4||t3||Function("return this")(),t8=i&&!i.nodeType&&i,t7=t8&&t&&!t.nodeType&&t,t9=t7&&t7.exports===t8,et=t9&&t4.process,ee=function(){try{var t=t7&&t7.require&&t7.require("util").types;if(t)return t;return et&&et.binding&&et.binding("util")}catch(t){}}(),ei=ee&&ee.isArrayBuffer,en=ee&&ee.isDate,er=ee&&ee.isMap,es=ee&&ee.isRegExp,eo=ee&&ee.isSet,ea=ee&&ee.isTypedArray;function el(t,i,n){switch(n.length){case 0:return t.call(i);case 1:return t.call(i,n[0]);case 2:return t.call(i,n[0],n[1]);case 3:return t.call(i,n[0],n[1],n[2])}return t.apply(i,n)}function eA(t,i,n,r){for(var s=-1,o=null==t?0:t.length;++s<o;){var a=t[s];i(r,a,n(a),t)}return r}function eh(t,i){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==i(t[n],n,t););return t}function ec(t,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!i(t[n],n,t))return!1;return!0}function eu(t,i){for(var n=-1,r=null==t?0:t.length,s=0,o=[];++n<r;){var a=t[n];i(a,n,t)&&(o[s++]=a)}return o}function ed(t,i){return!!(null==t?0:t.length)&&eC(t,i,0)>-1}function eg(t,i,n){for(var r=-1,s=null==t?0:t.length;++r<s;)if(n(i,t[r]))return!0;return!1}function ef(t,i){for(var n=-1,r=null==t?0:t.length,s=Array(r);++n<r;)s[n]=i(t[n],n,t);return s}function ep(t,i){for(var n=-1,r=i.length,s=t.length;++n<r;)t[s+n]=i[n];return t}function em(t,i,n,r){var s=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++s]);++s<o;)n=i(n,t[s],s,t);return n}function e_(t,i,n,r){var s=null==t?0:t.length;for(r&&s&&(n=t[--s]);s--;)n=i(n,t[s],s,t);return n}function ey(t,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(t[n],n,t))return!0;return!1}var ew=eS("length");function ev(t,i,n){var r;return n(t,function(t,n,s){if(i(t,n,s))return r=n,!1}),r}function eb(t,i,n,r){for(var s=t.length,o=n+(r?1:-1);r?o--:++o<s;)if(i(t[o],o,t))return o;return -1}function eC(t,i,n){return i==i?function(t,i,n){for(var r=n-1,s=t.length;++r<s;)if(t[r]===i)return r;return -1}(t,i,n):eb(t,eE,n)}function ex(t,i,n,r){for(var s=n-1,o=t.length;++s<o;)if(r(t[s],i))return s;return -1}function eE(t){return t!=t}function eB(t,i){var n=null==t?0:t.length;return n?eF(t,i)/n:l}function eS(t){return function(i){return null==i?n:i[t]}}function eI(t){return function(i){return null==t?n:t[i]}}function eL(t,i,n,r,s){return s(t,function(t,s,o){n=r?(r=!1,t):i(n,t,s,o)}),n}function eF(t,i){for(var r,s=-1,o=t.length;++s<o;){var a=i(t[s]);a!==n&&(r=r===n?a:r+a)}return r}function eM(t,i){for(var n=-1,r=Array(t);++n<t;)r[n]=i(n);return r}function eT(t){return t?t.slice(0,e$(t)+1).replace(J,""):t}function eR(t){return function(i){return t(i)}}function eO(t,i){return ef(i,function(i){return t[i]})}function eD(t,i){return t.has(i)}function eP(t,i){for(var n=-1,r=t.length;++n<r&&eC(i,t[n],0)>-1;);return n}function ek(t,i){for(var n=t.length;n--&&eC(i,t[n],0)>-1;);return n}var eN=eI({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),eU=eI({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function eQ(t){return"\\"+t1[t]}function eH(t){return tY.test(t)}function eG(t){var i=-1,n=Array(t.size);return t.forEach(function(t,r){n[++i]=[r,t]}),n}function eV(t,i){return function(n){return t(i(n))}}function ez(t,i){for(var n=-1,r=t.length,s=0,a=[];++n<r;){var l=t[n];(l===i||l===o)&&(t[n]=o,a[s++]=n)}return a}function eK(t){var i=-1,n=Array(t.size);return t.forEach(function(t){n[++i]=t}),n}function ej(t){return eH(t)?function(t){for(var i=tW.lastIndex=0;tW.test(t);)++i;return i}(t):ew(t)}function eW(t){return eH(t)?t.match(tW)||[]:t.split("")}function e$(t){for(var i=t.length;i--&&tt.test(t.charAt(i)););return i}var eY=eI({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eq=function t(i){var C,tt,tm,t_,ty=(i=null==i?t6:eq.defaults(t6.Object(),i,eq.pick(t6,tX))).Array,tw=i.Date,tv=i.Error,tb=i.Function,tC=i.Math,tx=i.Object,tE=i.RegExp,tB=i.String,tS=i.TypeError,tI=ty.prototype,tL=tb.prototype,tF=tx.prototype,tM=i["__core-js_shared__"],tT=tL.toString,tR=tF.hasOwnProperty,tO=0,tD=(C=/[^.]+$/.exec(tM&&tM.keys&&tM.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",tP=tF.toString,tk=tT.call(tx),tN=t6._,tU=tE("^"+tT.call(tR).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tQ=t9?i.Buffer:n,tH=i.Symbol,tG=i.Uint8Array,tV=tQ?tQ.allocUnsafe:n,tz=eV(tx.getPrototypeOf,tx),tW=tx.create,tY=tF.propertyIsEnumerable,t1=tI.splice,t4=tH?tH.isConcatSpreadable:n,t3=tH?tH.iterator:n,t8=tH?tH.toStringTag:n,t7=function(){try{var t=rf(tx,"defineProperty");return t({},"",{}),t}catch(t){}}(),et=i.clearTimeout!==t6.clearTimeout&&i.clearTimeout,ee=tw&&tw.now!==t6.Date.now&&tw.now,ew=i.setTimeout!==t6.setTimeout&&i.setTimeout,eI=tC.ceil,eX=tC.floor,eZ=tx.getOwnPropertySymbols,eJ=tQ?tQ.isBuffer:n,e0=i.isFinite,e1=tI.join,e2=eV(tx.keys,tx),e5=tC.max,e4=tC.min,e3=tw.now,e6=i.parseInt,e8=tC.random,e7=tI.reverse,e9=rf(i,"DataView"),it=rf(i,"Map"),ie=rf(i,"Promise"),ii=rf(i,"Set"),ir=rf(i,"WeakMap"),is=rf(tx,"create"),io=ir&&new ir,ia={},il=rQ(e9),iA=rQ(it),ih=rQ(ie),ic=rQ(ii),iu=rQ(ir),id=tH?tH.prototype:n,ig=id?id.valueOf:n,ip=id?id.toString:n;function im(t){if(sY(t)&&!sN(t)&&!(t instanceof iv)){if(t instanceof iw)return t;if(tR.call(t,"__wrapped__"))return rH(t)}return new iw(t)}var i_=function(){function t(){}return function(i){if(!s$(i))return{};if(tW)return tW(i);t.prototype=i;var r=new t;return t.prototype=n,r}}();function iy(){}function iw(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=n}function iv(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function ib(t){var i=-1,n=null==t?0:t.length;for(this.clear();++i<n;){var r=t[i];this.set(r[0],r[1])}}function iC(t){var i=-1,n=null==t?0:t.length;for(this.clear();++i<n;){var r=t[i];this.set(r[0],r[1])}}function ix(t){var i=-1,n=null==t?0:t.length;for(this.clear();++i<n;){var r=t[i];this.set(r[0],r[1])}}function iE(t){var i=-1,n=null==t?0:t.length;for(this.__data__=new ix;++i<n;)this.add(t[i])}function iB(t){var i=this.__data__=new iC(t);this.size=i.size}function iS(t,i){var n=sN(t),r=!n&&sk(t),s=!n&&!r&&sG(t),o=!n&&!r&&!s&&s5(t),a=n||r||s||o,l=a?eM(t.length,tB):[],A=l.length;for(var h in t)(i||tR.call(t,h))&&!(a&&("length"==h||s&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||rb(h,A)))&&l.push(h);return l}function iI(t){var i=t.length;return i?t[nu(0,i-1)]:n}im.templateSettings={escape:K,evaluate:j,interpolate:W,variable:"",imports:{_:im}},im.prototype=iy.prototype,im.prototype.constructor=im,iw.prototype=i_(iy.prototype),iw.prototype.constructor=iw,iv.prototype=i_(iy.prototype),iv.prototype.constructor=iv,ib.prototype.clear=function(){this.__data__=is?is(null):{},this.size=0},ib.prototype.delete=function(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=!!i,i},ib.prototype.get=function(t){var i=this.__data__;if(is){var r=i[t];return r===s?n:r}return tR.call(i,t)?i[t]:n},ib.prototype.has=function(t){var i=this.__data__;return is?i[t]!==n:tR.call(i,t)},ib.prototype.set=function(t,i){var r=this.__data__;return this.size+=+!this.has(t),r[t]=is&&i===n?s:i,this},iC.prototype.clear=function(){this.__data__=[],this.size=0},iC.prototype.delete=function(t){var i=this.__data__,n=iM(i,t);return!(n<0)&&(n==i.length-1?i.pop():t1.call(i,n,1),--this.size,!0)},iC.prototype.get=function(t){var i=this.__data__,r=iM(i,t);return r<0?n:i[r][1]},iC.prototype.has=function(t){return iM(this.__data__,t)>-1},iC.prototype.set=function(t,i){var n=this.__data__,r=iM(n,t);return r<0?(++this.size,n.push([t,i])):n[r][1]=i,this},ix.prototype.clear=function(){this.size=0,this.__data__={hash:new ib,map:new(it||iC),string:new ib}},ix.prototype.delete=function(t){var i=rd(this,t).delete(t);return this.size-=!!i,i},ix.prototype.get=function(t){return rd(this,t).get(t)},ix.prototype.has=function(t){return rd(this,t).has(t)},ix.prototype.set=function(t,i){var n=rd(this,t),r=n.size;return n.set(t,i),this.size+=+(n.size!=r),this},iE.prototype.add=iE.prototype.push=function(t){return this.__data__.set(t,s),this},iE.prototype.has=function(t){return this.__data__.has(t)};function iL(t,i,r){(r===n||sO(t[i],r))&&(r!==n||i in t)||iO(t,i,r)}function iF(t,i,r){var s=t[i];tR.call(t,i)&&sO(s,r)&&(r!==n||i in t)||iO(t,i,r)}function iM(t,i){for(var n=t.length;n--;)if(sO(t[n][0],i))return n;return -1}function iT(t,i,n,r){return iH(t,function(t,s,o){i(r,t,n(t),o)}),r}function iR(t,i){return t&&nz(i,op(i),t)}function iO(t,i,n){"__proto__"==i&&t7?t7(t,i,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[i]=n}function iD(t,i){for(var r=-1,s=i.length,o=ty(s),a=null==t;++r<s;)o[r]=a?n:oc(t,i[r]);return o}function iP(t,i,r){return t==t&&(r!==n&&(t=t<=r?t:r),i!==n&&(t=t>=i?t:i)),t}function ik(t,i,r,s,o,a){var l,A=1&i,c=2&i,g=4&i;if(r&&(l=o?r(t,s,o,a):r(t)),l!==n)return l;if(!s$(t))return t;var w=sN(t);if(w){if(B=(C=t).length,N=new C.constructor(B),B&&"string"==typeof C[0]&&tR.call(C,"index")&&(N.index=C.index,N.input=C.input),l=N,!A)return nV(t,l)}else{var C,B,N,U,Q,H,G,V,z=r_(t),K=z==f||z==p;if(sG(t))return nk(t,A);if(z==y||z==h||K&&!o){if(l=c||K?{}:rw(t),!A){return c?(U=t,Q=(V=l)&&nz(t,om(t),V),nz(U,rm(U),Q)):(H=t,G=iR(l,t),nz(H,rp(H),G))}}else{if(!t0[z])return o?t:{};l=function(t,i,n){var r,s,o=t.constructor;switch(i){case S:return nN(t);case u:case d:return new o(+t);case I:return r=n?nN(t.buffer):t.buffer,new t.constructor(r,t.byteOffset,t.byteLength);case L:case F:case M:case T:case R:case O:case D:case P:case k:return nU(t,n);case m:return new o;case _:case x:return new o(t);case v:return(s=new t.constructor(t.source,tl.exec(t))).lastIndex=t.lastIndex,s;case b:return new o;case E:return ig?tx(ig.call(t)):{}}}(t,z,A)}}a||(a=new iB);var j=a.get(t);if(j)return j;a.set(t,l),s0(t)?t.forEach(function(n){l.add(ik(n,i,r,n,t,a))}):sq(t)&&t.forEach(function(n,s){l.set(s,ik(n,i,r,s,t,a))});var W=g?c?rl:ra:c?om:op,$=w?n:W(t);return eh($||t,function(n,s){$&&(n=t[s=n]),iF(l,s,ik(n,i,r,s,t,a))}),l}function iN(t,i,r){var s=r.length;if(null==t)return!s;for(t=tx(t);s--;){var o=r[s],a=i[o],l=t[o];if(l===n&&!(o in t)||!a(l))return!1}return!0}function iU(t,i,s){if("function"!=typeof t)throw new tS(r);return rR(function(){t.apply(n,s)},i)}function iQ(t,i,n,r){var s=-1,o=ed,a=!0,l=t.length,A=[],h=i.length;if(!l)return A;n&&(i=ef(i,eR(n))),r?(o=eg,a=!1):i.length>=200&&(o=eD,a=!1,i=new iE(i));t:for(;++s<l;){var c=t[s],u=null==n?c:n(c);if(c=r||0!==c?c:0,a&&u==u){for(var d=h;d--;)if(i[d]===u)continue t;A.push(c)}else o(i,u,r)||A.push(c)}return A}iB.prototype.clear=function(){this.__data__=new iC,this.size=0},iB.prototype.delete=function(t){var i=this.__data__,n=i.delete(t);return this.size=i.size,n},iB.prototype.get=function(t){return this.__data__.get(t)},iB.prototype.has=function(t){return this.__data__.has(t)},iB.prototype.set=function(t,i){var n=this.__data__;if(n instanceof iC){var r=n.__data__;if(!it||r.length<199)return r.push([t,i]),this.size=++n.size,this;n=this.__data__=new ix(r)}return n.set(t,i),this.size=n.size,this};var iH=nW(iY),iG=nW(iq,!0);function iV(t,i){var n=!0;return iH(t,function(t,r,s){return n=!!i(t,r,s)}),n}function iz(t,i,r){for(var s=-1,o=t.length;++s<o;){var a=t[s],l=i(a);if(null!=l&&(A===n?l==l&&!s2(l):r(l,A)))var A=l,h=a}return h}function iK(t,i){var n=[];return iH(t,function(t,r,s){i(t,r,s)&&n.push(t)}),n}function ij(t,i,n,r,s){var o=-1,a=t.length;for(n||(n=rv),s||(s=[]);++o<a;){var l=t[o];i>0&&n(l)?i>1?ij(l,i-1,n,r,s):ep(s,l):r||(s[s.length]=l)}return s}var iW=n$(),i$=n$(!0);function iY(t,i){return t&&iW(t,i,op)}function iq(t,i){return t&&i$(t,i,op)}function iX(t,i){return eu(i,function(i){return sK(t[i])})}function iZ(t,i){i=nO(i,t);for(var r=0,s=i.length;null!=t&&r<s;)t=t[rU(i[r++])];return r&&r==s?t:n}function iJ(t,i,n){var r=i(t);return sN(t)?r:ep(r,n(t))}function i0(t){var i;return null==t?t===n?"[object Undefined]":"[object Null]":t8&&t8 in tx(t)?function(t){var i=tR.call(t,t8),r=t[t8];try{t[t8]=n;var s=!0}catch(t){}var o=tP.call(t);return s&&(i?t[t8]=r:delete t[t8]),o}(t):(i=t,tP.call(i))}function i1(t,i){return t>i}function i2(t,i){return null!=t&&tR.call(t,i)}function i5(t,i){return null!=t&&i in tx(t)}function i4(t,i,r){for(var s=r?eg:ed,o=t[0].length,a=t.length,l=a,A=ty(a),h=1/0,c=[];l--;){var u=t[l];l&&i&&(u=ef(u,eR(i))),h=e4(u.length,h),A[l]=!r&&(i||o>=120&&u.length>=120)?new iE(l&&u):n}u=t[0];var d=-1,g=A[0];t:for(;++d<o&&c.length<h;){var f=u[d],p=i?i(f):f;if(f=r||0!==f?f:0,!(g?eD(g,p):s(c,p,r))){for(l=a;--l;){var m=A[l];if(!(m?eD(m,p):s(t[l],p,r)))continue t}g&&g.push(p),c.push(f)}}return c}function i3(t,i,r){i=nO(i,t);var s=null==(t=rF(t,i))?t:t[rU(rZ(i))];return null==s?n:el(s,t,r)}function i6(t){return sY(t)&&i0(t)==h}function i8(t,i,r,s,o){return t===i||(null!=t&&null!=i&&(sY(t)||sY(i))?function(t,i,r,s,o,a){var l=sN(t),A=sN(i),f=l?c:r_(t),p=A?c:r_(i);f=f==h?y:f,p=p==h?y:p;var w=f==y,C=p==y,B=f==p;if(B&&sG(t)){if(!sG(i))return!1;l=!0,w=!1}if(B&&!w)return a||(a=new iB),l||s5(t)?rs(t,i,r,s,o,a):function(t,i,n,r,s,o,a){switch(n){case I:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)break;t=t.buffer,i=i.buffer;case S:if(t.byteLength!=i.byteLength||!o(new tG(t),new tG(i)))break;return!0;case u:case d:case _:return sO(+t,+i);case g:return t.name==i.name&&t.message==i.message;case v:case x:return t==i+"";case m:var l=eG;case b:var A=1&r;if(l||(l=eK),t.size!=i.size&&!A)break;var h=a.get(t);if(h)return h==i;r|=2,a.set(t,i);var c=rs(l(t),l(i),r,s,o,a);return a.delete(t),c;case E:if(ig)return ig.call(t)==ig.call(i)}return!1}(t,i,f,r,s,o,a);if(!(1&r)){var L=w&&tR.call(t,"__wrapped__"),F=C&&tR.call(i,"__wrapped__");if(L||F){var M=L?t.value():t,T=F?i.value():i;return a||(a=new iB),o(M,T,r,s,a)}}return!!B&&(a||(a=new iB),function(t,i,r,s,o,a){var l=1&r,A=ra(t),h=A.length;if(h!=ra(i).length&&!l)return!1;for(var c=h;c--;){var u=A[c];if(!(l?u in i:tR.call(i,u)))return!1}var d=a.get(t),g=a.get(i);if(d&&g)return d==i&&g==t;var f=!0;a.set(t,i),a.set(i,t);for(var p=l;++c<h;){var m=t[u=A[c]],_=i[u];if(s)var y=l?s(_,m,u,i,t,a):s(m,_,u,t,i,a);if(!(y===n?m===_||o(m,_,r,s,a):y)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var w=t.constructor,v=i.constructor;w!=v&&"constructor"in t&&"constructor"in i&&!("function"==typeof w&&w instanceof w&&"function"==typeof v&&v instanceof v)&&(f=!1)}return a.delete(t),a.delete(i),f}(t,i,r,s,o,a))}(t,i,r,s,i8,o):t!=t&&i!=i)}function i7(t,i,r,s){var o=r.length,a=o,l=!s;if(null==t)return!a;for(t=tx(t);o--;){var A=r[o];if(l&&A[2]?A[1]!==t[A[0]]:!(A[0]in t))return!1}for(;++o<a;){var h=(A=r[o])[0],c=t[h],u=A[1];if(l&&A[2]){if(c===n&&!(h in t))return!1}else{var d=new iB;if(s)var g=s(c,u,h,t,i,d);if(!(g===n?i8(u,c,3,s,d):g))return!1}}return!0}function i9(t){var i;return!(!s$(t)||(i=t,tD&&tD in i))&&(sK(t)?tU:tc).test(rQ(t))}function nt(t){return"function"==typeof t?t:null==t?oG:"object"==typeof t?sN(t)?ns(t[0],t[1]):nr(t):oX(t)}function ne(t){if(!rS(t))return e2(t);var i=[];for(var n in tx(t))tR.call(t,n)&&"constructor"!=n&&i.push(n);return i}function ni(t,i){return t<i}function nn(t,i){var n=-1,r=sQ(t)?ty(t.length):[];return iH(t,function(t,s,o){r[++n]=i(t,s,o)}),r}function nr(t){var i=rg(t);return 1==i.length&&i[0][2]?rI(i[0][0],i[0][1]):function(n){return n===t||i7(n,t,i)}}function ns(t,i){var r;return rx(t)&&(r=i)==r&&!s$(r)?rI(rU(t),i):function(r){var s=oc(r,t);return s===n&&s===i?ou(r,t):i8(i,s,3)}}function no(t,i,r,s,o){t!==i&&iW(i,function(a,l){if(o||(o=new iB),s$(a))!function(t,i,r,s,o,a,l){var A=rM(t,r),h=rM(i,r),c=l.get(h);if(c)return iL(t,r,c);var u=a?a(A,h,r+"",t,i,l):n,d=u===n;if(d){var g=sN(h),f=!g&&sG(h),p=!g&&!f&&s5(h);u=h,g||f||p?sN(A)?u=A:sH(A)?u=nV(A):f?(d=!1,u=nk(h,!0)):p?(d=!1,u=nU(h,!0)):u=[]:sZ(h)||sk(h)?(u=A,sk(A)?u=oe(A):(!s$(A)||sK(A))&&(u=rw(h))):d=!1}d&&(l.set(h,u),o(u,h,s,a,l),l.delete(h)),iL(t,r,u)}(t,i,l,r,no,s,o);else{var A=s?s(rM(t,l),a,l+"",t,i,o):n;A===n&&(A=a),iL(t,l,A)}},om)}function na(t,i){var r=t.length;if(r)return rb(i+=i<0?r:0,r)?t[i]:n}function nl(t,i,n){i=i.length?ef(i,function(t){return sN(t)?function(i){return iZ(i,1===t.length?t[0]:t)}:t}):[oG];var r=-1;i=ef(i,eR(ru()));var s=nn(t,function(t,n,s){return{criteria:ef(i,function(i){return i(t)}),index:++r,value:t}}),o=s.length;for(s.sort(function(t,i){return function(t,i,n){for(var r=-1,s=t.criteria,o=i.criteria,a=s.length,l=n.length;++r<a;){var A=nQ(s[r],o[r]);if(A){if(r>=l)return A;return A*("desc"==n[r]?-1:1)}}return t.index-i.index}(t,i,n)});o--;)s[o]=s[o].value;return s}function nA(t,i,n){for(var r=-1,s=i.length,o={};++r<s;){var a=i[r],l=iZ(t,a);n(l,a)&&nf(o,nO(a,t),l)}return o}function nh(t,i,n,r){var s=r?ex:eC,o=-1,a=i.length,l=t;for(t===i&&(i=nV(i)),n&&(l=ef(t,eR(n)));++o<a;)for(var A=0,h=i[o],c=n?n(h):h;(A=s(l,c,A,r))>-1;)l!==t&&t1.call(l,A,1),t1.call(t,A,1);return t}function nc(t,i){for(var n=t?i.length:0,r=n-1;n--;){var s=i[n];if(n==r||s!==o){var o=s;rb(s)?t1.call(t,s,1):nB(t,s)}}return t}function nu(t,i){return t+eX(e8()*(i-t+1))}function nd(t,i){var n="";if(!t||i<1||i>0x1fffffffffffff)return n;do i%2&&(n+=t),(i=eX(i/2))&&(t+=t);while(i)return n}function ng(t,i){return rO(rL(t,i,oG),t+"")}function nf(t,i,r,s){if(!s$(t))return t;i=nO(i,t);for(var o=-1,a=i.length,l=a-1,A=t;null!=A&&++o<a;){var h=rU(i[o]),c=r;if("__proto__"===h||"constructor"===h||"prototype"===h)break;if(o!=l){var u=A[h];(c=s?s(u,h,A):n)===n&&(c=s$(u)?u:rb(i[o+1])?[]:{})}iF(A,h,c),A=A[h]}return t}var np=io?function(t,i){return io.set(t,i),t}:oG,nm=t7?function(t,i){return t7(t,"toString",{configurable:!0,enumerable:!1,value:oU(i),writable:!0})}:oG;function n_(t,i,n){var r=-1,s=t.length;i<0&&(i=-i>s?0:s+i),(n=n>s?s:n)<0&&(n+=s),s=i>n?0:n-i>>>0,i>>>=0;for(var o=ty(s);++r<s;)o[r]=t[r+i];return o}function ny(t,i){var n;return iH(t,function(t,r,s){return!(n=i(t,r,s))}),!!n}function nw(t,i,n){var r=0,s=null==t?r:t.length;if("number"==typeof i&&i==i&&s<=0x7fffffff){for(;r<s;){var o=r+s>>>1,a=t[o];null!==a&&!s2(a)&&(n?a<=i:a<i)?r=o+1:s=o}return s}return nv(t,i,oG,n)}function nv(t,i,r,s){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var l=(i=r(i))!=i,A=null===i,h=s2(i),c=i===n;o<a;){var u=eX((o+a)/2),d=r(t[u]),g=d!==n,f=null===d,p=d==d,m=s2(d);if(l)var _=s||p;else _=c?p&&(s||g):A?p&&g&&(s||!f):h?p&&g&&!f&&(s||!m):!f&&!m&&(s?d<=i:d<i);_?o=u+1:a=u}return e4(a,0xfffffffe)}function nb(t,i){for(var n=-1,r=t.length,s=0,o=[];++n<r;){var a=t[n],l=i?i(a):a;if(!n||!sO(l,A)){var A=l;o[s++]=0===a?0:a}}return o}function nC(t){return"number"==typeof t?t:s2(t)?l:+t}function nx(t){if("string"==typeof t)return t;if(sN(t))return ef(t,nx)+"";if(s2(t))return ip?ip.call(t):"";var i=t+"";return"0"==i&&1/t==-a?"-0":i}function nE(t,i,n){var r=-1,s=ed,o=t.length,a=!0,l=[],A=l;if(n)a=!1,s=eg;else if(o>=200){var h=i?null:n9(t);if(h)return eK(h);a=!1,s=eD,A=new iE}else A=i?[]:l;t:for(;++r<o;){var c=t[r],u=i?i(c):c;if(c=n||0!==c?c:0,a&&u==u){for(var d=A.length;d--;)if(A[d]===u)continue t;i&&A.push(u),l.push(c)}else s(A,u,n)||(A!==l&&A.push(u),l.push(c))}return l}function nB(t,i){return i=nO(i,t),null==(t=rF(t,i))||delete t[rU(rZ(i))]}function nS(t,i,n,r){return nf(t,i,n(iZ(t,i)),r)}function nI(t,i,n,r){for(var s=t.length,o=r?s:-1;(r?o--:++o<s)&&i(t[o],o,t););return n?n_(t,r?0:o,r?o+1:s):n_(t,r?o+1:0,r?s:o)}function nL(t,i){var n=t;return n instanceof iv&&(n=n.value()),em(i,function(t,i){return i.func.apply(i.thisArg,ep([t],i.args))},n)}function nF(t,i,n){var r=t.length;if(r<2)return r?nE(t[0]):[];for(var s=-1,o=ty(r);++s<r;)for(var a=t[s],l=-1;++l<r;)l!=s&&(o[s]=iQ(o[s]||a,t[l],i,n));return nE(ij(o,1),i,n)}function nM(t,i,r){for(var s=-1,o=t.length,a=i.length,l={};++s<o;){var A=s<a?i[s]:n;r(l,t[s],A)}return l}function nT(t){return sH(t)?t:[]}function nR(t){return"function"==typeof t?t:oG}function nO(t,i){return sN(t)?t:rx(t,i)?[t]:rN(oi(t))}function nD(t,i,r){var s=t.length;return r=r===n?s:r,!i&&r>=s?t:n_(t,i,r)}var nP=et||function(t){return t6.clearTimeout(t)};function nk(t,i){if(i)return t.slice();var n=t.length,r=tV?tV(n):new t.constructor(n);return t.copy(r),r}function nN(t){var i=new t.constructor(t.byteLength);return new tG(i).set(new tG(t)),i}function nU(t,i){var n=i?nN(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function nQ(t,i){if(t!==i){var r=t!==n,s=null===t,o=t==t,a=s2(t),l=i!==n,A=null===i,h=i==i,c=s2(i);if(!A&&!c&&!a&&t>i||a&&l&&h&&!A&&!c||s&&l&&h||!r&&h||!o)return 1;if(!s&&!a&&!c&&t<i||c&&r&&o&&!s&&!a||A&&r&&o||!l&&o||!h)return -1}return 0}function nH(t,i,n,r){for(var s=-1,o=t.length,a=n.length,l=-1,A=i.length,h=e5(o-a,0),c=ty(A+h),u=!r;++l<A;)c[l]=i[l];for(;++s<a;)(u||s<o)&&(c[n[s]]=t[s]);for(;h--;)c[l++]=t[s++];return c}function nG(t,i,n,r){for(var s=-1,o=t.length,a=-1,l=n.length,A=-1,h=i.length,c=e5(o-l,0),u=ty(c+h),d=!r;++s<c;)u[s]=t[s];for(var g=s;++A<h;)u[g+A]=i[A];for(;++a<l;)(d||s<o)&&(u[g+n[a]]=t[s++]);return u}function nV(t,i){var n=-1,r=t.length;for(i||(i=ty(r));++n<r;)i[n]=t[n];return i}function nz(t,i,r,s){var o=!r;r||(r={});for(var a=-1,l=i.length;++a<l;){var A=i[a],h=s?s(r[A],t[A],A,r,t):n;h===n&&(h=t[A]),o?iO(r,A,h):iF(r,A,h)}return r}function nK(t,i){return function(n,r){var s=sN(n)?eA:iT,o=i?i():{};return s(n,t,ru(r,2),o)}}function nj(t){return ng(function(i,r){var s=-1,o=r.length,a=o>1?r[o-1]:n,l=o>2?r[2]:n;for(a=t.length>3&&"function"==typeof a?(o--,a):n,l&&rC(r[0],r[1],l)&&(a=o<3?n:a,o=1),i=tx(i);++s<o;){var A=r[s];A&&t(i,A,s,a)}return i})}function nW(t,i){return function(n,r){if(null==n)return n;if(!sQ(n))return t(n,r);for(var s=n.length,o=i?s:-1,a=tx(n);(i?o--:++o<s)&&!1!==r(a[o],o,a););return n}}function n$(t){return function(i,n,r){for(var s=-1,o=tx(i),a=r(i),l=a.length;l--;){var A=a[t?l:++s];if(!1===n(o[A],A,o))break}return i}}function nY(t){return function(i){var r=eH(i=oi(i))?eW(i):n,s=r?r[0]:i.charAt(0),o=r?nD(r,1).join(""):i.slice(1);return s[t]()+o}}function nq(t){return function(i){return em(oP(oI(i).replace(tK,"")),t,"")}}function nX(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var n=i_(t.prototype),r=t.apply(n,i);return s$(r)?r:n}}function nZ(t){return function(i,r,s){var o=tx(i);if(!sQ(i)){var a=ru(r,3);i=op(i),r=function(t){return a(o[t],t,o)}}var l=t(i,r,s);return l>-1?o[a?i[l]:l]:n}}function nJ(t){return ro(function(i){var s=i.length,o=s,a=iw.prototype.thru;for(t&&i.reverse();o--;){var l=i[o];if("function"!=typeof l)throw new tS(r);if(a&&!A&&"wrapper"==rh(l))var A=new iw([],!0)}for(o=A?o:s;++o<s;){var h=rh(l=i[o]),c="wrapper"==h?rA(l):n;A=c&&rE(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?A[rh(c[0])].apply(A,c[3]):1==l.length&&rE(l)?A[h]():A.thru(l)}return function(){var t=arguments,n=t[0];if(A&&1==t.length&&sN(n))return A.plant(n).value();for(var r=0,o=s?i[r].apply(this,t):n;++r<s;)o=i[r].call(this,o);return o}})}function n0(t,i,r,s,o,a,l,A,h,c){var u=128&i,d=1&i,g=2&i,f=24&i,p=512&i,m=g?n:nX(t);function _(){for(var y=arguments.length,w=ty(y),v=y;v--;)w[v]=arguments[v];if(f)var b=rc(_),C=function(t,i){for(var n=t.length,r=0;n--;)t[n]===i&&++r;return r}(w,b);if(s&&(w=nH(w,s,o,f)),a&&(w=nG(w,a,l,f)),y-=C,f&&y<c){var x=ez(w,b);return n8(t,i,n0,_.placeholder,r,w,x,A,h,c-y)}var E=d?r:this,B=g?E[t]:t;return y=w.length,A?w=function(t,i){for(var r=t.length,s=e4(i.length,r),o=nV(t);s--;){var a=i[s];t[s]=rb(a,r)?o[a]:n}return t}(w,A):p&&y>1&&w.reverse(),u&&h<y&&(w.length=h),this&&this!==t6&&this instanceof _&&(B=m||nX(B)),B.apply(E,w)}return _}function n1(t,i){return function(n,r){var s,o;return s=i(r),o={},iY(n,function(i,n,r){t(o,s(i),n,r)}),o}}function n2(t,i){return function(r,s){var o;if(r===n&&s===n)return i;if(r!==n&&(o=r),s!==n){if(o===n)return s;"string"==typeof r||"string"==typeof s?(r=nx(r),s=nx(s)):(r=nC(r),s=nC(s)),o=t(r,s)}return o}}function n5(t){return ro(function(i){return i=ef(i,eR(ru())),ng(function(n){var r=this;return t(i,function(t){return el(t,r,n)})})})}function n4(t,i){var r=(i=i===n?" ":nx(i)).length;if(r<2)return r?nd(i,t):i;var s=nd(i,eI(t/ej(i)));return eH(i)?nD(eW(s),0,t).join(""):s.slice(0,t)}function n3(t){return function(i,r,s){s&&"number"!=typeof s&&rC(i,r,s)&&(r=s=n),i=s8(i),r===n?(r=i,i=0):r=s8(r),s=s===n?i<r?1:-1:s8(s);for(var o=i,a=r,l=s,A=-1,h=e5(eI((a-o)/(l||1)),0),c=ty(h);h--;)c[t?h:++A]=o,o+=l;return c}}function n6(t){return function(i,n){return("string"!=typeof i||"string"!=typeof n)&&(i=ot(i),n=ot(n)),t(i,n)}}function n8(t,i,r,s,o,a,l,A,h,c){var u=8&i,d=u?l:n,g=u?n:l,f=u?a:n,p=u?n:a;i|=u?32:64,4&(i&=~(u?64:32))||(i&=-4);var m=[t,i,o,f,d,p,g,A,h,c],_=r.apply(n,m);return rE(t)&&rT(_,m),_.placeholder=s,rD(_,t,i)}function n7(t){var i=tC[t];return function(t,n){if(t=ot(t),(n=null==n?0:e4(s7(n),292))&&e0(t)){var r=(oi(t)+"e").split("e");return+((r=(oi(i(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(r[1]-n))}return i(t)}}var n9=ii&&1/eK(new ii([,-0]))[1]==a?function(t){return new ii(t)}:oW;function rt(t){return function(i){var n,r,s=r_(i);return s==m?eG(i):s==b?(n=-1,r=Array(i.size),i.forEach(function(t){r[++n]=[t,t]}),r):ef(t(i),function(t){return[t,i[t]]})}}function re(t,i,s,a,l,A,h,c){var u=2&i;if(!u&&"function"!=typeof t)throw new tS(r);var d=a?a.length:0;if(d||(i&=-97,a=l=n),h=h===n?h:e5(s7(h),0),c=c===n?c:s7(c),d-=l?l.length:0,64&i){var g=a,f=l;a=l=n}var p=u?n:rA(t),m=[t,i,s,a,l,g,f,A,h,c];if(p&&function(t,i){var n=t[1],r=i[1],s=n|r,a=s<131,l=128==r&&8==n||128==r&&256==n&&t[7].length<=i[8]||384==r&&i[7].length<=i[8]&&8==n;if(a||l){1&r&&(t[2]=i[2],s|=1&n?0:4);var A=i[3];if(A){var h=t[3];t[3]=h?nH(h,A,i[4]):A,t[4]=h?ez(t[3],o):i[4]}(A=i[5])&&(h=t[5],t[5]=h?nG(h,A,i[6]):A,t[6]=h?ez(t[5],o):i[6]),(A=i[7])&&(t[7]=A),128&r&&(t[8]=null==t[8]?i[8]:e4(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=s}}(m,p),t=m[0],i=m[1],s=m[2],a=m[3],l=m[4],(c=m[9]=m[9]===n?u?0:t.length:e5(m[9]-d,0))||!(24&i)||(i&=-25),i&&1!=i)8==i||16==i?L=function(t,i,r){var s=nX(t);function o(){for(var a=arguments.length,l=ty(a),A=a,h=rc(o);A--;)l[A]=arguments[A];var c=a<3&&l[0]!==h&&l[a-1]!==h?[]:ez(l,h);return(a-=c.length)<r?n8(t,i,n0,o.placeholder,n,l,c,n,n,r-a):el(this&&this!==t6&&this instanceof o?s:t,this,l)}return o}(t,i,c):32!=i&&33!=i||l.length?L=n0.apply(n,m):(_=t,y=i,w=s,v=a,b=1&y,C=nX(_),L=function t(){for(var i=-1,n=arguments.length,r=-1,s=v.length,o=ty(s+n),a=this&&this!==t6&&this instanceof t?C:_;++r<s;)o[r]=v[r];for(;n--;)o[r++]=arguments[++i];return el(a,b?w:this,o)});else var _,y,w,v,b,C,x,E,B,S,I,L=(x=t,E=i,B=s,S=1&E,I=nX(x),function t(){return(this&&this!==t6&&this instanceof t?I:x).apply(S?B:this,arguments)});return rD((p?np:rT)(L,m),t,i)}function ri(t,i,r,s){return t===n||sO(t,tF[r])&&!tR.call(s,r)?i:t}function rn(t,i,r,s,o,a){return s$(t)&&s$(i)&&(a.set(i,t),no(t,i,n,rn,a),a.delete(i)),t}function rr(t){return sZ(t)?n:t}function rs(t,i,r,s,o,a){var l=1&r,A=t.length,h=i.length;if(A!=h&&!(l&&h>A))return!1;var c=a.get(t),u=a.get(i);if(c&&u)return c==i&&u==t;var d=-1,g=!0,f=2&r?new iE:n;for(a.set(t,i),a.set(i,t);++d<A;){var p=t[d],m=i[d];if(s)var _=l?s(m,p,d,i,t,a):s(p,m,d,t,i,a);if(_!==n){if(_)continue;g=!1;break}if(f){if(!ey(i,function(t,i){if(!eD(f,i)&&(p===t||o(p,t,r,s,a)))return f.push(i)})){g=!1;break}}else if(!(p===m||o(p,m,r,s,a))){g=!1;break}}return a.delete(t),a.delete(i),g}function ro(t){return rO(rL(t,n,rW),t+"")}function ra(t){return iJ(t,op,rp)}function rl(t){return iJ(t,om,rm)}var rA=io?function(t){return io.get(t)}:oW;function rh(t){for(var i=t.name+"",n=ia[i],r=tR.call(ia,i)?n.length:0;r--;){var s=n[r],o=s.func;if(null==o||o==t)return s.name}return i}function rc(t){return(tR.call(im,"placeholder")?im:t).placeholder}function ru(){var t=im.iteratee||oV;return t=t===oV?nt:t,arguments.length?t(arguments[0],arguments[1]):t}function rd(t,i){var n,r,s=t.__data__;return("string"==(r=typeof(n=i))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?s["string"==typeof i?"string":"hash"]:s.map}function rg(t){for(var i=op(t),n=i.length;n--;){var r,s=i[n],o=t[s];i[n]=[s,o,(r=o)==r&&!s$(r)]}return i}function rf(t,i){var r=null==t?n:t[i];return i9(r)?r:n}var rp=eZ?function(t){return null==t?[]:eu(eZ(t=tx(t)),function(i){return tY.call(t,i)})}:o0,rm=eZ?function(t){for(var i=[];t;)ep(i,rp(t)),t=tz(t);return i}:o0,r_=i0;function ry(t,i,n){i=nO(i,t);for(var r=-1,s=i.length,o=!1;++r<s;){var a=rU(i[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=s?o:!!(s=null==t?0:t.length)&&sW(s)&&rb(a,s)&&(sN(t)||sk(t))}function rw(t){return"function"!=typeof t.constructor||rS(t)?{}:i_(tz(t))}function rv(t){return sN(t)||sk(t)||!!(t4&&t&&t[t4])}function rb(t,i){var n=typeof t;return!!(i=null==i?0x1fffffffffffff:i)&&("number"==n||"symbol"!=n&&td.test(t))&&t>-1&&t%1==0&&t<i}function rC(t,i,n){if(!s$(n))return!1;var r=typeof i;return("number"==r?!!(sQ(n)&&rb(i,n.length)):"string"==r&&i in n)&&sO(n[i],t)}function rx(t,i){if(sN(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||s2(t))||Y.test(t)||!$.test(t)||null!=i&&t in tx(i)}function rE(t){var i=rh(t),n=im[i];if("function"!=typeof n||!(i in iv.prototype))return!1;if(t===n)return!0;var r=rA(n);return!!r&&t===r[0]}(e9&&r_(new e9(new ArrayBuffer(1)))!=I||it&&r_(new it)!=m||ie&&r_(ie.resolve())!=w||ii&&r_(new ii)!=b||ir&&r_(new ir)!=B)&&(r_=function(t){var i=i0(t),r=i==y?t.constructor:n,s=r?rQ(r):"";if(s)switch(s){case il:return I;case iA:return m;case ih:return w;case ic:return b;case iu:return B}return i});var rB=tM?sK:o1;function rS(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||tF)}function rI(t,i){return function(r){return null!=r&&r[t]===i&&(i!==n||t in tx(r))}}function rL(t,i,r){return i=e5(i===n?t.length-1:i,0),function(){for(var n=arguments,s=-1,o=e5(n.length-i,0),a=ty(o);++s<o;)a[s]=n[i+s];s=-1;for(var l=ty(i+1);++s<i;)l[s]=n[s];return l[i]=r(a),el(t,this,l)}}function rF(t,i){return i.length<2?t:iZ(t,n_(i,0,-1))}function rM(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var rT=rP(np),rR=ew||function(t,i){return t6.setTimeout(t,i)},rO=rP(nm);function rD(t,i,n){var r,s,o,a=i+"";return rO(t,function(t,i){var n=i.length;if(!n)return t;var r=n-1;return i[r]=(n>1?"& ":"")+i[r],i=i.join(n>2?", ":" "),t.replace(te,"{\n/* [wrapped with "+i+"] */\n")}(a,(r=(o=a.match(ti))?o[1].split(tn):[],s=n,eh(A,function(t){var i="_."+t[0];s&t[1]&&!ed(r,i)&&r.push(i)}),r.sort())))}function rP(t){var i=0,r=0;return function(){var s=e3(),o=16-(s-r);if(r=s,o>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(n,arguments)}}function rk(t,i){var r=-1,s=t.length,o=s-1;for(i=i===n?s:i;++r<i;){var a=nu(r,o),l=t[a];t[a]=t[r],t[r]=l}return t.length=i,t}var rN=(tm=(tt=sI(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(q,function(t,n,r,s){i.push(r?s.replace(to,"$1"):n||t)}),i},function(t){return 500===tm.size&&tm.clear(),t})).cache,tt);function rU(t){if("string"==typeof t||s2(t))return t;var i=t+"";return"0"==i&&1/t==-a?"-0":i}function rQ(t){if(null!=t){try{return tT.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function rH(t){if(t instanceof iv)return t.clone();var i=new iw(t.__wrapped__,t.__chain__);return i.__actions__=nV(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var rG=ng(function(t,i){return sH(t)?iQ(t,ij(i,1,sH,!0)):[]}),rV=ng(function(t,i){var r=rZ(i);return sH(r)&&(r=n),sH(t)?iQ(t,ij(i,1,sH,!0),ru(r,2)):[]}),rz=ng(function(t,i){var r=rZ(i);return sH(r)&&(r=n),sH(t)?iQ(t,ij(i,1,sH,!0),n,r):[]});function rK(t,i,n){var r=null==t?0:t.length;if(!r)return -1;var s=null==n?0:s7(n);return s<0&&(s=e5(r+s,0)),eb(t,ru(i,3),s)}function rj(t,i,r){var s=null==t?0:t.length;if(!s)return -1;var o=s-1;return r!==n&&(o=s7(r),o=r<0?e5(s+o,0):e4(o,s-1)),eb(t,ru(i,3),o,!0)}function rW(t){return(null==t?0:t.length)?ij(t,1):[]}function r$(t){return t&&t.length?t[0]:n}var rY=ng(function(t){var i=ef(t,nT);return i.length&&i[0]===t[0]?i4(i):[]}),rq=ng(function(t){var i=rZ(t),r=ef(t,nT);return i===rZ(r)?i=n:r.pop(),r.length&&r[0]===t[0]?i4(r,ru(i,2)):[]}),rX=ng(function(t){var i=rZ(t),r=ef(t,nT);return(i="function"==typeof i?i:n)&&r.pop(),r.length&&r[0]===t[0]?i4(r,n,i):[]});function rZ(t){var i=null==t?0:t.length;return i?t[i-1]:n}var rJ=ng(r0);function r0(t,i){return t&&t.length&&i&&i.length?nh(t,i):t}var r1=ro(function(t,i){var n=null==t?0:t.length,r=iD(t,i);return nc(t,ef(i,function(t){return rb(t,n)?+t:t}).sort(nQ)),r});function r2(t){return null==t?t:e7.call(t)}var r5=ng(function(t){return nE(ij(t,1,sH,!0))}),r4=ng(function(t){var i=rZ(t);return sH(i)&&(i=n),nE(ij(t,1,sH,!0),ru(i,2))}),r3=ng(function(t){var i=rZ(t);return i="function"==typeof i?i:n,nE(ij(t,1,sH,!0),n,i)});function r6(t){if(!(t&&t.length))return[];var i=0;return t=eu(t,function(t){if(sH(t))return i=e5(t.length,i),!0}),eM(i,function(i){return ef(t,eS(i))})}function r8(t,i){if(!(t&&t.length))return[];var r=r6(t);return null==i?r:ef(r,function(t){return el(i,n,t)})}var r7=ng(function(t,i){return sH(t)?iQ(t,i):[]}),r9=ng(function(t){return nF(eu(t,sH))}),st=ng(function(t){var i=rZ(t);return sH(i)&&(i=n),nF(eu(t,sH),ru(i,2))}),se=ng(function(t){var i=rZ(t);return i="function"==typeof i?i:n,nF(eu(t,sH),n,i)}),si=ng(r6),sn=ng(function(t){var i=t.length,r=i>1?t[i-1]:n;return r="function"==typeof r?(t.pop(),r):n,r8(t,r)});function sr(t){var i=im(t);return i.__chain__=!0,i}function ss(t,i){return i(t)}var so=ro(function(t){var i=t.length,r=i?t[0]:0,s=this.__wrapped__,o=function(i){return iD(i,t)};return!(i>1)&&!this.__actions__.length&&s instanceof iv&&rb(r)?((s=s.slice(r,+r+ +!!i)).__actions__.push({func:ss,args:[o],thisArg:n}),new iw(s,this.__chain__).thru(function(t){return i&&!t.length&&t.push(n),t})):this.thru(o)}),sa=nK(function(t,i,n){tR.call(t,n)?++t[n]:iO(t,n,1)}),sl=nZ(rK),sA=nZ(rj);function sh(t,i){return(sN(t)?eh:iH)(t,ru(i,3))}function sc(t,i){return(sN(t)?function(t,i){for(var n=null==t?0:t.length;n--&&!1!==i(t[n],n,t););return t}:iG)(t,ru(i,3))}var su=nK(function(t,i,n){tR.call(t,n)?t[n].push(i):iO(t,n,[i])}),sd=ng(function(t,i,n){var r=-1,s="function"==typeof i,o=sQ(t)?ty(t.length):[];return iH(t,function(t){o[++r]=s?el(i,t,n):i3(t,i,n)}),o}),sg=nK(function(t,i,n){iO(t,n,i)});function sf(t,i){return(sN(t)?ef:nn)(t,ru(i,3))}var sp=nK(function(t,i,n){t[+!n].push(i)},function(){return[[],[]]}),sm=ng(function(t,i){if(null==t)return[];var n=i.length;return n>1&&rC(t,i[0],i[1])?i=[]:n>2&&rC(i[0],i[1],i[2])&&(i=[i[0]]),nl(t,ij(i,1),[])}),s_=ee||function(){return t6.Date.now()};function sy(t,i,r){return i=r?n:i,i=t&&null==i?t.length:i,re(t,128,n,n,n,n,i)}function sw(t,i){var s;if("function"!=typeof i)throw new tS(r);return t=s7(t),function(){return--t>0&&(s=i.apply(this,arguments)),t<=1&&(i=n),s}}var sv=ng(function(t,i,n){var r=1;if(n.length){var s=ez(n,rc(sv));r|=32}return re(t,r,i,n,s)}),sb=ng(function(t,i,n){var r=3;if(n.length){var s=ez(n,rc(sb));r|=32}return re(i,r,t,n,s)});function sC(t,i,r){i=r?n:i;var s=re(t,8,n,n,n,n,n,i);return s.placeholder=sC.placeholder,s}function sx(t,i,r){i=r?n:i;var s=re(t,16,n,n,n,n,n,i);return s.placeholder=sx.placeholder,s}function sE(t,i,s){var o,a,l,A,h,c,u=0,d=!1,g=!1,f=!0;if("function"!=typeof t)throw new tS(r);function p(i){var r=o,s=a;return o=a=n,u=i,A=t.apply(s,r)}function m(t){var r=t-c,s=t-u;return c===n||r>=i||r<0||g&&s>=l}function _(){var t,n,r,s=s_();if(m(s))return y(s);h=rR(_,(t=s-c,n=s-u,r=i-t,g?e4(r,l-n):r))}function y(t){return(h=n,f&&o)?p(t):(o=a=n,A)}function w(){var t,r=s_(),s=m(r);if(o=arguments,a=this,c=r,s){if(h===n)return u=t=c,h=rR(_,i),d?p(t):A;if(g)return nP(h),h=rR(_,i),p(c)}return h===n&&(h=rR(_,i)),A}return i=ot(i)||0,s$(s)&&(d=!!s.leading,l=(g="maxWait"in s)?e5(ot(s.maxWait)||0,i):l,f="trailing"in s?!!s.trailing:f),w.cancel=function(){h!==n&&nP(h),u=0,o=c=a=h=n},w.flush=function(){return h===n?A:y(s_())},w}var sB=ng(function(t,i){return iU(t,1,i)}),sS=ng(function(t,i,n){return iU(t,ot(i)||0,n)});function sI(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new tS(r);var n=function(){var r=arguments,s=i?i.apply(this,r):r[0],o=n.cache;if(o.has(s))return o.get(s);var a=t.apply(this,r);return n.cache=o.set(s,a)||o,a};return n.cache=new(sI.Cache||ix),n}function sL(t){if("function"!=typeof t)throw new tS(r);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}sI.Cache=ix;var sF=ng(function(t,i){var n=(i=1==i.length&&sN(i[0])?ef(i[0],eR(ru())):ef(ij(i,1),eR(ru()))).length;return ng(function(r){for(var s=-1,o=e4(r.length,n);++s<o;)r[s]=i[s].call(this,r[s]);return el(t,this,r)})}),sM=ng(function(t,i){var r=ez(i,rc(sM));return re(t,32,n,i,r)}),sT=ng(function(t,i){var r=ez(i,rc(sT));return re(t,64,n,i,r)}),sR=ro(function(t,i){return re(t,256,n,n,n,i)});function sO(t,i){return t===i||t!=t&&i!=i}var sD=n6(i1),sP=n6(function(t,i){return t>=i}),sk=i6(function(){return arguments}())?i6:function(t){return sY(t)&&tR.call(t,"callee")&&!tY.call(t,"callee")},sN=ty.isArray,sU=ei?eR(ei):function(t){return sY(t)&&i0(t)==S};function sQ(t){return null!=t&&sW(t.length)&&!sK(t)}function sH(t){return sY(t)&&sQ(t)}var sG=eJ||o1,sV=en?eR(en):function(t){return sY(t)&&i0(t)==d};function sz(t){if(!sY(t))return!1;var i=i0(t);return i==g||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!sZ(t)}function sK(t){if(!s$(t))return!1;var i=i0(t);return i==f||i==p||"[object AsyncFunction]"==i||"[object Proxy]"==i}function sj(t){return"number"==typeof t&&t==s7(t)}function sW(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff}function s$(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function sY(t){return null!=t&&"object"==typeof t}var sq=er?eR(er):function(t){return sY(t)&&r_(t)==m};function sX(t){return"number"==typeof t||sY(t)&&i0(t)==_}function sZ(t){if(!sY(t)||i0(t)!=y)return!1;var i=tz(t);if(null===i)return!0;var n=tR.call(i,"constructor")&&i.constructor;return"function"==typeof n&&n instanceof n&&tT.call(n)==tk}var sJ=es?eR(es):function(t){return sY(t)&&i0(t)==v},s0=eo?eR(eo):function(t){return sY(t)&&r_(t)==b};function s1(t){return"string"==typeof t||!sN(t)&&sY(t)&&i0(t)==x}function s2(t){return"symbol"==typeof t||sY(t)&&i0(t)==E}var s5=ea?eR(ea):function(t){return sY(t)&&sW(t.length)&&!!tJ[i0(t)]},s4=n6(ni),s3=n6(function(t,i){return t<=i});function s6(t){if(!t)return[];if(sQ(t))return s1(t)?eW(t):nV(t);if(t3&&t[t3]){for(var i,n=t[t3](),r=[];!(i=n.next()).done;)r.push(i.value);return r}var s=r_(t);return(s==m?eG:s==b?eK:oE)(t)}function s8(t){return t?(t=ot(t))===a||t===-a?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function s7(t){var i=s8(t),n=i%1;return i==i?n?i-n:i:0}function s9(t){return t?iP(s7(t),0,0xffffffff):0}function ot(t){if("number"==typeof t)return t;if(s2(t))return l;if(s$(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=s$(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=eT(t);var n=th.test(t);return n||tu.test(t)?t5(t.slice(2),n?2:8):tA.test(t)?l:+t}function oe(t){return nz(t,om(t))}function oi(t){return null==t?"":nx(t)}var on=nj(function(t,i){if(rS(i)||sQ(i))return void nz(i,op(i),t);for(var n in i)tR.call(i,n)&&iF(t,n,i[n])}),or=nj(function(t,i){nz(i,om(i),t)}),os=nj(function(t,i,n,r){nz(i,om(i),t,r)}),oo=nj(function(t,i,n,r){nz(i,op(i),t,r)}),oa=ro(iD),oA=ng(function(t,i){t=tx(t);var r=-1,s=i.length,o=s>2?i[2]:n;for(o&&rC(i[0],i[1],o)&&(s=1);++r<s;)for(var a=i[r],l=om(a),A=-1,h=l.length;++A<h;){var c=l[A],u=t[c];(u===n||sO(u,tF[c])&&!tR.call(t,c))&&(t[c]=a[c])}return t}),oh=ng(function(t){return t.push(n,rn),el(oy,n,t)});function oc(t,i,r){var s=null==t?n:iZ(t,i);return s===n?r:s}function ou(t,i){return null!=t&&ry(t,i,i5)}var od=n1(function(t,i,n){null!=i&&"function"!=typeof i.toString&&(i=tP.call(i)),t[i]=n},oU(oG)),og=n1(function(t,i,n){null!=i&&"function"!=typeof i.toString&&(i=tP.call(i)),tR.call(t,i)?t[i].push(n):t[i]=[n]},ru),of=ng(i3);function op(t){return sQ(t)?iS(t):ne(t)}function om(t){return sQ(t)?iS(t,!0):function(t){if(!s$(t)){var i=t,n=[];if(null!=i)for(var r in tx(i))n.push(r);return n}var s=rS(t),o=[];for(var a in t)"constructor"==a&&(s||!tR.call(t,a))||o.push(a);return o}(t)}var o_=nj(function(t,i,n){no(t,i,n)}),oy=nj(function(t,i,n,r){no(t,i,n,r)}),ow=ro(function(t,i){var n={};if(null==t)return n;var r=!1;i=ef(i,function(i){return i=nO(i,t),r||(r=i.length>1),i}),nz(t,rl(t),n),r&&(n=ik(n,7,rr));for(var s=i.length;s--;)nB(n,i[s]);return n}),ov=ro(function(t,i){return null==t?{}:nA(t,i,function(i,n){return ou(t,n)})});function ob(t,i){if(null==t)return{};var n=ef(rl(t),function(t){return[t]});return i=ru(i),nA(t,n,function(t,n){return i(t,n[0])})}var oC=rt(op),ox=rt(om);function oE(t){return null==t?[]:eO(t,op(t))}var oB=nq(function(t,i,n){return i=i.toLowerCase(),t+(n?oS(i):i)});function oS(t){return oD(oi(t).toLowerCase())}function oI(t){return(t=oi(t))&&t.replace(tg,eN).replace(tj,"")}var oL=nq(function(t,i,n){return t+(n?"-":"")+i.toLowerCase()}),oF=nq(function(t,i,n){return t+(n?" ":"")+i.toLowerCase()}),oM=nY("toLowerCase"),oT=nq(function(t,i,n){return t+(n?"_":"")+i.toLowerCase()}),oR=nq(function(t,i,n){return t+(n?" ":"")+oD(i)}),oO=nq(function(t,i,n){return t+(n?" ":"")+i.toUpperCase()}),oD=nY("toUpperCase");function oP(t,i,r){if(t=oi(t),(i=r?n:i)===n){var s;return(s=t,tq.test(s))?t.match(t$)||[]:t.match(tr)||[]}return t.match(i)||[]}var ok=ng(function(t,i){try{return el(t,n,i)}catch(t){return sz(t)?t:new tv(t)}}),oN=ro(function(t,i){return eh(i,function(i){iO(t,i=rU(i),sv(t[i],t))}),t});function oU(t){return function(){return t}}var oQ=nJ(),oH=nJ(!0);function oG(t){return t}function oV(t){return nt("function"==typeof t?t:ik(t,1))}var oz=ng(function(t,i){return function(n){return i3(n,t,i)}}),oK=ng(function(t,i){return function(n){return i3(t,n,i)}});function oj(t,i,n){var r=op(i),s=iX(i,r);null!=n||s$(i)&&(s.length||!r.length)||(n=i,i=t,t=this,s=iX(i,op(i)));var o=!(s$(n)&&"chain"in n)||!!n.chain,a=sK(t);return eh(s,function(n){var r=i[n];t[n]=r,a&&(t.prototype[n]=function(){var i=this.__chain__;if(o||i){var n=t(this.__wrapped__);return(n.__actions__=nV(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=i,n}return r.apply(t,ep([this.value()],arguments))})}),t}function oW(){}var o$=n5(ef),oY=n5(ec),oq=n5(ey);function oX(t){return rx(t)?eS(rU(t)):function(i){return iZ(i,t)}}var oZ=n3(),oJ=n3(!0);function o0(){return[]}function o1(){return!1}var o2=n2(function(t,i){return t+i},0),o5=n7("ceil"),o4=n2(function(t,i){return t/i},1),o3=n7("floor"),o6=n2(function(t,i){return t*i},1),o8=n7("round"),o7=n2(function(t,i){return t-i},0);return im.after=function(t,i){if("function"!=typeof i)throw new tS(r);return t=s7(t),function(){if(--t<1)return i.apply(this,arguments)}},im.ary=sy,im.assign=on,im.assignIn=or,im.assignInWith=os,im.assignWith=oo,im.at=oa,im.before=sw,im.bind=sv,im.bindAll=oN,im.bindKey=sb,im.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return sN(t)?t:[t]},im.chain=sr,im.chunk=function(t,i,r){i=(r?rC(t,i,r):i===n)?1:e5(s7(i),0);var s=null==t?0:t.length;if(!s||i<1)return[];for(var o=0,a=0,l=ty(eI(s/i));o<s;)l[a++]=n_(t,o,o+=i);return l},im.compact=function(t){for(var i=-1,n=null==t?0:t.length,r=0,s=[];++i<n;){var o=t[i];o&&(s[r++]=o)}return s},im.concat=function(){var t=arguments.length;if(!t)return[];for(var i=ty(t-1),n=arguments[0],r=t;r--;)i[r-1]=arguments[r];return ep(sN(n)?nV(n):[n],ij(i,1))},im.cond=function(t){var i=null==t?0:t.length,n=ru();return t=i?ef(t,function(t){if("function"!=typeof t[1])throw new tS(r);return[n(t[0]),t[1]]}):[],ng(function(n){for(var r=-1;++r<i;){var s=t[r];if(el(s[0],this,n))return el(s[1],this,n)}})},im.conforms=function(t){var i,n;return n=op(i=ik(t,1)),function(t){return iN(t,i,n)}},im.constant=oU,im.countBy=sa,im.create=function(t,i){var n=i_(t);return null==i?n:iR(n,i)},im.curry=sC,im.curryRight=sx,im.debounce=sE,im.defaults=oA,im.defaultsDeep=oh,im.defer=sB,im.delay=sS,im.difference=rG,im.differenceBy=rV,im.differenceWith=rz,im.drop=function(t,i,r){var s=null==t?0:t.length;return s?n_(t,(i=r||i===n?1:s7(i))<0?0:i,s):[]},im.dropRight=function(t,i,r){var s=null==t?0:t.length;return s?n_(t,0,(i=s-(i=r||i===n?1:s7(i)))<0?0:i):[]},im.dropRightWhile=function(t,i){return t&&t.length?nI(t,ru(i,3),!0,!0):[]},im.dropWhile=function(t,i){return t&&t.length?nI(t,ru(i,3),!0):[]},im.fill=function(t,i,r,s){var o=null==t?0:t.length;if(!o)return[];r&&"number"!=typeof r&&rC(t,i,r)&&(r=0,s=o);var a=r,l=s,A=t.length;for((a=s7(a))<0&&(a=-a>A?0:A+a),(l=l===n||l>A?A:s7(l))<0&&(l+=A),l=a>l?0:s9(l);a<l;)t[a++]=i;return t},im.filter=function(t,i){return(sN(t)?eu:iK)(t,ru(i,3))},im.flatMap=function(t,i){return ij(sf(t,i),1)},im.flatMapDeep=function(t,i){return ij(sf(t,i),a)},im.flatMapDepth=function(t,i,r){return r=r===n?1:s7(r),ij(sf(t,i),r)},im.flatten=rW,im.flattenDeep=function(t){return(null==t?0:t.length)?ij(t,a):[]},im.flattenDepth=function(t,i){return(null==t?0:t.length)?ij(t,i=i===n?1:s7(i)):[]},im.flip=function(t){return re(t,512)},im.flow=oQ,im.flowRight=oH,im.fromPairs=function(t){for(var i=-1,n=null==t?0:t.length,r={};++i<n;){var s=t[i];r[s[0]]=s[1]}return r},im.functions=function(t){return null==t?[]:iX(t,op(t))},im.functionsIn=function(t){return null==t?[]:iX(t,om(t))},im.groupBy=su,im.initial=function(t){return(null==t?0:t.length)?n_(t,0,-1):[]},im.intersection=rY,im.intersectionBy=rq,im.intersectionWith=rX,im.invert=od,im.invertBy=og,im.invokeMap=sd,im.iteratee=oV,im.keyBy=sg,im.keys=op,im.keysIn=om,im.map=sf,im.mapKeys=function(t,i){var n={};return i=ru(i,3),iY(t,function(t,r,s){iO(n,i(t,r,s),t)}),n},im.mapValues=function(t,i){var n={};return i=ru(i,3),iY(t,function(t,r,s){iO(n,r,i(t,r,s))}),n},im.matches=function(t){return nr(ik(t,1))},im.matchesProperty=function(t,i){return ns(t,ik(i,1))},im.memoize=sI,im.merge=o_,im.mergeWith=oy,im.method=oz,im.methodOf=oK,im.mixin=oj,im.negate=sL,im.nthArg=function(t){return t=s7(t),ng(function(i){return na(i,t)})},im.omit=ow,im.omitBy=function(t,i){return ob(t,sL(ru(i)))},im.once=function(t){return sw(2,t)},im.orderBy=function(t,i,r,s){return null==t?[]:(sN(i)||(i=null==i?[]:[i]),sN(r=s?n:r)||(r=null==r?[]:[r]),nl(t,i,r))},im.over=o$,im.overArgs=sF,im.overEvery=oY,im.overSome=oq,im.partial=sM,im.partialRight=sT,im.partition=sp,im.pick=ov,im.pickBy=ob,im.property=oX,im.propertyOf=function(t){return function(i){return null==t?n:iZ(t,i)}},im.pull=rJ,im.pullAll=r0,im.pullAllBy=function(t,i,n){return t&&t.length&&i&&i.length?nh(t,i,ru(n,2)):t},im.pullAllWith=function(t,i,r){return t&&t.length&&i&&i.length?nh(t,i,n,r):t},im.pullAt=r1,im.range=oZ,im.rangeRight=oJ,im.rearg=sR,im.reject=function(t,i){return(sN(t)?eu:iK)(t,sL(ru(i,3)))},im.remove=function(t,i){var n=[];if(!(t&&t.length))return n;var r=-1,s=[],o=t.length;for(i=ru(i,3);++r<o;){var a=t[r];i(a,r,t)&&(n.push(a),s.push(r))}return nc(t,s),n},im.rest=function(t,i){if("function"!=typeof t)throw new tS(r);return ng(t,i=i===n?i:s7(i))},im.reverse=r2,im.sampleSize=function(t,i,r){return i=(r?rC(t,i,r):i===n)?1:s7(i),(sN(t)?function(t,i){return rk(nV(t),iP(i,0,t.length))}:function(t,i){var n=oE(t);return rk(n,iP(i,0,n.length))})(t,i)},im.set=function(t,i,n){return null==t?t:nf(t,i,n)},im.setWith=function(t,i,r,s){return s="function"==typeof s?s:n,null==t?t:nf(t,i,r,s)},im.shuffle=function(t){return(sN(t)?function(t){return rk(nV(t))}:function(t){return rk(oE(t))})(t)},im.slice=function(t,i,r){var s=null==t?0:t.length;return s?(r&&"number"!=typeof r&&rC(t,i,r)?(i=0,r=s):(i=null==i?0:s7(i),r=r===n?s:s7(r)),n_(t,i,r)):[]},im.sortBy=sm,im.sortedUniq=function(t){return t&&t.length?nb(t):[]},im.sortedUniqBy=function(t,i){return t&&t.length?nb(t,ru(i,2)):[]},im.split=function(t,i,r){return(r&&"number"!=typeof r&&rC(t,i,r)&&(i=r=n),r=r===n?0xffffffff:r>>>0)?(t=oi(t))&&("string"==typeof i||null!=i&&!sJ(i))&&!(i=nx(i))&&eH(t)?nD(eW(t),0,r):t.split(i,r):[]},im.spread=function(t,i){if("function"!=typeof t)throw new tS(r);return i=null==i?0:e5(s7(i),0),ng(function(n){var r=n[i],s=nD(n,0,i);return r&&ep(s,r),el(t,this,s)})},im.tail=function(t){var i=null==t?0:t.length;return i?n_(t,1,i):[]},im.take=function(t,i,r){return t&&t.length?n_(t,0,(i=r||i===n?1:s7(i))<0?0:i):[]},im.takeRight=function(t,i,r){var s=null==t?0:t.length;return s?n_(t,(i=s-(i=r||i===n?1:s7(i)))<0?0:i,s):[]},im.takeRightWhile=function(t,i){return t&&t.length?nI(t,ru(i,3),!1,!0):[]},im.takeWhile=function(t,i){return t&&t.length?nI(t,ru(i,3)):[]},im.tap=function(t,i){return i(t),t},im.throttle=function(t,i,n){var s=!0,o=!0;if("function"!=typeof t)throw new tS(r);return s$(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),sE(t,i,{leading:s,maxWait:i,trailing:o})},im.thru=ss,im.toArray=s6,im.toPairs=oC,im.toPairsIn=ox,im.toPath=function(t){return sN(t)?ef(t,rU):s2(t)?[t]:nV(rN(oi(t)))},im.toPlainObject=oe,im.transform=function(t,i,n){var r=sN(t),s=r||sG(t)||s5(t);if(i=ru(i,4),null==n){var o=t&&t.constructor;n=s?r?new o:[]:s$(t)&&sK(o)?i_(tz(t)):{}}return(s?eh:iY)(t,function(t,r,s){return i(n,t,r,s)}),n},im.unary=function(t){return sy(t,1)},im.union=r5,im.unionBy=r4,im.unionWith=r3,im.uniq=function(t){return t&&t.length?nE(t):[]},im.uniqBy=function(t,i){return t&&t.length?nE(t,ru(i,2)):[]},im.uniqWith=function(t,i){return i="function"==typeof i?i:n,t&&t.length?nE(t,n,i):[]},im.unset=function(t,i){return null==t||nB(t,i)},im.unzip=r6,im.unzipWith=r8,im.update=function(t,i,n){return null==t?t:nS(t,i,nR(n))},im.updateWith=function(t,i,r,s){return s="function"==typeof s?s:n,null==t?t:nS(t,i,nR(r),s)},im.values=oE,im.valuesIn=function(t){return null==t?[]:eO(t,om(t))},im.without=r7,im.words=oP,im.wrap=function(t,i){return sM(nR(i),t)},im.xor=r9,im.xorBy=st,im.xorWith=se,im.zip=si,im.zipObject=function(t,i){return nM(t||[],i||[],iF)},im.zipObjectDeep=function(t,i){return nM(t||[],i||[],nf)},im.zipWith=sn,im.entries=oC,im.entriesIn=ox,im.extend=or,im.extendWith=os,oj(im,im),im.add=o2,im.attempt=ok,im.camelCase=oB,im.capitalize=oS,im.ceil=o5,im.clamp=function(t,i,r){return r===n&&(r=i,i=n),r!==n&&(r=(r=ot(r))==r?r:0),i!==n&&(i=(i=ot(i))==i?i:0),iP(ot(t),i,r)},im.clone=function(t){return ik(t,4)},im.cloneDeep=function(t){return ik(t,5)},im.cloneDeepWith=function(t,i){return ik(t,5,i="function"==typeof i?i:n)},im.cloneWith=function(t,i){return ik(t,4,i="function"==typeof i?i:n)},im.conformsTo=function(t,i){return null==i||iN(t,i,op(i))},im.deburr=oI,im.defaultTo=function(t,i){return null==t||t!=t?i:t},im.divide=o4,im.endsWith=function(t,i,r){t=oi(t),i=nx(i);var s=t.length,o=r=r===n?s:iP(s7(r),0,s);return(r-=i.length)>=0&&t.slice(r,o)==i},im.eq=sO,im.escape=function(t){return(t=oi(t))&&z.test(t)?t.replace(G,eU):t},im.escapeRegExp=function(t){return(t=oi(t))&&Z.test(t)?t.replace(X,"\\$&"):t},im.every=function(t,i,r){var s=sN(t)?ec:iV;return r&&rC(t,i,r)&&(i=n),s(t,ru(i,3))},im.find=sl,im.findIndex=rK,im.findKey=function(t,i){return ev(t,ru(i,3),iY)},im.findLast=sA,im.findLastIndex=rj,im.findLastKey=function(t,i){return ev(t,ru(i,3),iq)},im.floor=o3,im.forEach=sh,im.forEachRight=sc,im.forIn=function(t,i){return null==t?t:iW(t,ru(i,3),om)},im.forInRight=function(t,i){return null==t?t:i$(t,ru(i,3),om)},im.forOwn=function(t,i){return t&&iY(t,ru(i,3))},im.forOwnRight=function(t,i){return t&&iq(t,ru(i,3))},im.get=oc,im.gt=sD,im.gte=sP,im.has=function(t,i){return null!=t&&ry(t,i,i2)},im.hasIn=ou,im.head=r$,im.identity=oG,im.includes=function(t,i,n,r){t=sQ(t)?t:oE(t),n=n&&!r?s7(n):0;var s=t.length;return n<0&&(n=e5(s+n,0)),s1(t)?n<=s&&t.indexOf(i,n)>-1:!!s&&eC(t,i,n)>-1},im.indexOf=function(t,i,n){var r=null==t?0:t.length;if(!r)return -1;var s=null==n?0:s7(n);return s<0&&(s=e5(r+s,0)),eC(t,i,s)},im.inRange=function(t,i,r){var s,o,a;return i=s8(i),r===n?(r=i,i=0):r=s8(r),(s=t=ot(t))>=e4(o=i,a=r)&&s<e5(o,a)},im.invoke=of,im.isArguments=sk,im.isArray=sN,im.isArrayBuffer=sU,im.isArrayLike=sQ,im.isArrayLikeObject=sH,im.isBoolean=function(t){return!0===t||!1===t||sY(t)&&i0(t)==u},im.isBuffer=sG,im.isDate=sV,im.isElement=function(t){return sY(t)&&1===t.nodeType&&!sZ(t)},im.isEmpty=function(t){if(null==t)return!0;if(sQ(t)&&(sN(t)||"string"==typeof t||"function"==typeof t.splice||sG(t)||s5(t)||sk(t)))return!t.length;var i=r_(t);if(i==m||i==b)return!t.size;if(rS(t))return!ne(t).length;for(var n in t)if(tR.call(t,n))return!1;return!0},im.isEqual=function(t,i){return i8(t,i)},im.isEqualWith=function(t,i,r){var s=(r="function"==typeof r?r:n)?r(t,i):n;return s===n?i8(t,i,n,r):!!s},im.isError=sz,im.isFinite=function(t){return"number"==typeof t&&e0(t)},im.isFunction=sK,im.isInteger=sj,im.isLength=sW,im.isMap=sq,im.isMatch=function(t,i){return t===i||i7(t,i,rg(i))},im.isMatchWith=function(t,i,r){return r="function"==typeof r?r:n,i7(t,i,rg(i),r)},im.isNaN=function(t){return sX(t)&&t!=+t},im.isNative=function(t){if(rB(t))throw new tv("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return i9(t)},im.isNil=function(t){return null==t},im.isNull=function(t){return null===t},im.isNumber=sX,im.isObject=s$,im.isObjectLike=sY,im.isPlainObject=sZ,im.isRegExp=sJ,im.isSafeInteger=function(t){return sj(t)&&t>=-0x1fffffffffffff&&t<=0x1fffffffffffff},im.isSet=s0,im.isString=s1,im.isSymbol=s2,im.isTypedArray=s5,im.isUndefined=function(t){return t===n},im.isWeakMap=function(t){return sY(t)&&r_(t)==B},im.isWeakSet=function(t){return sY(t)&&"[object WeakSet]"==i0(t)},im.join=function(t,i){return null==t?"":e1.call(t,i)},im.kebabCase=oL,im.last=rZ,im.lastIndexOf=function(t,i,r){var s=null==t?0:t.length;if(!s)return -1;var o=s;return r!==n&&(o=(o=s7(r))<0?e5(s+o,0):e4(o,s-1)),i==i?function(t,i,n){for(var r=n+1;r--&&t[r]!==i;);return r}(t,i,o):eb(t,eE,o,!0)},im.lowerCase=oF,im.lowerFirst=oM,im.lt=s4,im.lte=s3,im.max=function(t){return t&&t.length?iz(t,oG,i1):n},im.maxBy=function(t,i){return t&&t.length?iz(t,ru(i,2),i1):n},im.mean=function(t){return eB(t,oG)},im.meanBy=function(t,i){return eB(t,ru(i,2))},im.min=function(t){return t&&t.length?iz(t,oG,ni):n},im.minBy=function(t,i){return t&&t.length?iz(t,ru(i,2),ni):n},im.stubArray=o0,im.stubFalse=o1,im.stubObject=function(){return{}},im.stubString=function(){return""},im.stubTrue=function(){return!0},im.multiply=o6,im.nth=function(t,i){return t&&t.length?na(t,s7(i)):n},im.noConflict=function(){return t6._===this&&(t6._=tN),this},im.noop=oW,im.now=s_,im.pad=function(t,i,n){t=oi(t);var r=(i=s7(i))?ej(t):0;if(!i||r>=i)return t;var s=(i-r)/2;return n4(eX(s),n)+t+n4(eI(s),n)},im.padEnd=function(t,i,n){t=oi(t);var r=(i=s7(i))?ej(t):0;return i&&r<i?t+n4(i-r,n):t},im.padStart=function(t,i,n){t=oi(t);var r=(i=s7(i))?ej(t):0;return i&&r<i?n4(i-r,n)+t:t},im.parseInt=function(t,i,n){return n||null==i?i=0:i&&(i*=1),e6(oi(t).replace(J,""),i||0)},im.random=function(t,i,r){if(r&&"boolean"!=typeof r&&rC(t,i,r)&&(i=r=n),r===n&&("boolean"==typeof i?(r=i,i=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&i===n?(t=0,i=1):(t=s8(t),i===n?(i=t,t=0):i=s8(i)),t>i){var s=t;t=i,i=s}if(r||t%1||i%1){var o=e8();return e4(t+o*(i-t+t2("1e-"+((o+"").length-1))),i)}return nu(t,i)},im.reduce=function(t,i,n){var r=sN(t)?em:eL,s=arguments.length<3;return r(t,ru(i,4),n,s,iH)},im.reduceRight=function(t,i,n){var r=sN(t)?e_:eL,s=arguments.length<3;return r(t,ru(i,4),n,s,iG)},im.repeat=function(t,i,r){return i=(r?rC(t,i,r):i===n)?1:s7(i),nd(oi(t),i)},im.replace=function(){var t=arguments,i=oi(t[0]);return t.length<3?i:i.replace(t[1],t[2])},im.result=function(t,i,r){i=nO(i,t);var s=-1,o=i.length;for(o||(o=1,t=n);++s<o;){var a=null==t?n:t[rU(i[s])];a===n&&(s=o,a=r),t=sK(a)?a.call(t):a}return t},im.round=o8,im.runInContext=t,im.sample=function(t){return(sN(t)?iI:function(t){return iI(oE(t))})(t)},im.size=function(t){if(null==t)return 0;if(sQ(t))return s1(t)?ej(t):t.length;var i=r_(t);return i==m||i==b?t.size:ne(t).length},im.snakeCase=oT,im.some=function(t,i,r){var s=sN(t)?ey:ny;return r&&rC(t,i,r)&&(i=n),s(t,ru(i,3))},im.sortedIndex=function(t,i){return nw(t,i)},im.sortedIndexBy=function(t,i,n){return nv(t,i,ru(n,2))},im.sortedIndexOf=function(t,i){var n=null==t?0:t.length;if(n){var r=nw(t,i);if(r<n&&sO(t[r],i))return r}return -1},im.sortedLastIndex=function(t,i){return nw(t,i,!0)},im.sortedLastIndexBy=function(t,i,n){return nv(t,i,ru(n,2),!0)},im.sortedLastIndexOf=function(t,i){if(null==t?0:t.length){var n=nw(t,i,!0)-1;if(sO(t[n],i))return n}return -1},im.startCase=oR,im.startsWith=function(t,i,n){return t=oi(t),n=null==n?0:iP(s7(n),0,t.length),i=nx(i),t.slice(n,n+i.length)==i},im.subtract=o7,im.sum=function(t){return t&&t.length?eF(t,oG):0},im.sumBy=function(t,i){return t&&t.length?eF(t,ru(i,2)):0},im.template=function(t,i,r){var s=im.templateSettings;r&&rC(t,i,r)&&(i=n),t=oi(t),i=os({},i,s,ri);var o,a,l=os({},i.imports,s.imports,ri),A=op(l),h=eO(l,A),c=0,u=i.interpolate||tf,d="__p += '",g=tE((i.escape||tf).source+"|"+u.source+"|"+(u===W?ta:tf).source+"|"+(i.evaluate||tf).source+"|$","g"),f="//# sourceURL="+(tR.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tZ+"]")+"\n";t.replace(g,function(i,n,r,s,l,A){return r||(r=s),d+=t.slice(c,A).replace(tp,eQ),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),l&&(a=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=A+i.length,i}),d+="';\n";var p=tR.call(i,"variable")&&i.variable;if(p){if(ts.test(p))throw new tv("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(N,""):d).replace(U,"$1").replace(Q,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=ok(function(){return tb(A,f+"return "+d).apply(n,h)});if(m.source=d,sz(m))throw m;return m},im.times=function(t,i){if((t=s7(t))<1||t>0x1fffffffffffff)return[];var n=0xffffffff,r=e4(t,0xffffffff);i=ru(i),t-=0xffffffff;for(var s=eM(r,i);++n<t;)i(n);return s},im.toFinite=s8,im.toInteger=s7,im.toLength=s9,im.toLower=function(t){return oi(t).toLowerCase()},im.toNumber=ot,im.toSafeInteger=function(t){return t?iP(s7(t),-0x1fffffffffffff,0x1fffffffffffff):0===t?t:0},im.toString=oi,im.toUpper=function(t){return oi(t).toUpperCase()},im.trim=function(t,i,r){if((t=oi(t))&&(r||i===n))return eT(t);if(!t||!(i=nx(i)))return t;var s=eW(t),o=eW(i),a=eP(s,o),l=ek(s,o)+1;return nD(s,a,l).join("")},im.trimEnd=function(t,i,r){if((t=oi(t))&&(r||i===n))return t.slice(0,e$(t)+1);if(!t||!(i=nx(i)))return t;var s=eW(t),o=ek(s,eW(i))+1;return nD(s,0,o).join("")},im.trimStart=function(t,i,r){if((t=oi(t))&&(r||i===n))return t.replace(J,"");if(!t||!(i=nx(i)))return t;var s=eW(t),o=eP(s,eW(i));return nD(s,o).join("")},im.truncate=function(t,i){var r=30,s="...";if(s$(i)){var o="separator"in i?i.separator:o;r="length"in i?s7(i.length):r,s="omission"in i?nx(i.omission):s}var a=(t=oi(t)).length;if(eH(t)){var l=eW(t);a=l.length}if(r>=a)return t;var A=r-ej(s);if(A<1)return s;var h=l?nD(l,0,A).join(""):t.slice(0,A);if(o===n)return h+s;if(l&&(A+=h.length-A),sJ(o)){if(t.slice(A).search(o)){var c,u=h;for(o.global||(o=tE(o.source,oi(tl.exec(o))+"g")),o.lastIndex=0;c=o.exec(u);)var d=c.index;h=h.slice(0,d===n?A:d)}}else if(t.indexOf(nx(o),A)!=A){var g=h.lastIndexOf(o);g>-1&&(h=h.slice(0,g))}return h+s},im.unescape=function(t){return(t=oi(t))&&V.test(t)?t.replace(H,eY):t},im.uniqueId=function(t){var i=++tO;return oi(t)+i},im.upperCase=oO,im.upperFirst=oD,im.each=sh,im.eachRight=sc,im.first=r$,oj(im,(t_={},iY(im,function(t,i){tR.call(im.prototype,i)||(t_[i]=t)}),t_),{chain:!1}),im.VERSION="4.17.21",eh(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){im[t].placeholder=im}),eh(["drop","take"],function(t,i){iv.prototype[t]=function(r){r=r===n?1:e5(s7(r),0);var s=this.__filtered__&&!i?new iv(this):this.clone();return s.__filtered__?s.__takeCount__=e4(r,s.__takeCount__):s.__views__.push({size:e4(r,0xffffffff),type:t+(s.__dir__<0?"Right":"")}),s},iv.prototype[t+"Right"]=function(i){return this.reverse()[t](i).reverse()}}),eh(["filter","map","takeWhile"],function(t,i){var n=i+1,r=1==n||3==n;iv.prototype[t]=function(t){var i=this.clone();return i.__iteratees__.push({iteratee:ru(t,3),type:n}),i.__filtered__=i.__filtered__||r,i}}),eh(["head","last"],function(t,i){var n="take"+(i?"Right":"");iv.prototype[t]=function(){return this[n](1).value()[0]}}),eh(["initial","tail"],function(t,i){var n="drop"+(i?"":"Right");iv.prototype[t]=function(){return this.__filtered__?new iv(this):this[n](1)}}),iv.prototype.compact=function(){return this.filter(oG)},iv.prototype.find=function(t){return this.filter(t).head()},iv.prototype.findLast=function(t){return this.reverse().find(t)},iv.prototype.invokeMap=ng(function(t,i){return"function"==typeof t?new iv(this):this.map(function(n){return i3(n,t,i)})}),iv.prototype.reject=function(t){return this.filter(sL(ru(t)))},iv.prototype.slice=function(t,i){t=s7(t);var r=this;return r.__filtered__&&(t>0||i<0)?new iv(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),i!==n&&(r=(i=s7(i))<0?r.dropRight(-i):r.take(i-t)),r)},iv.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},iv.prototype.toArray=function(){return this.take(0xffffffff)},iY(iv.prototype,function(t,i){var r=/^(?:filter|find|map|reject)|While$/.test(i),s=/^(?:head|last)$/.test(i),o=im[s?"take"+("last"==i?"Right":""):i],a=s||/^find/.test(i);o&&(im.prototype[i]=function(){var i=this.__wrapped__,l=s?[1]:arguments,A=i instanceof iv,h=l[0],c=A||sN(i),u=function(t){var i=o.apply(im,ep([t],l));return s&&d?i[0]:i};c&&r&&"function"==typeof h&&1!=h.length&&(A=c=!1);var d=this.__chain__,g=!!this.__actions__.length,f=a&&!d,p=A&&!g;if(!a&&c){i=p?i:new iv(this);var m=t.apply(i,l);return m.__actions__.push({func:ss,args:[u],thisArg:n}),new iw(m,d)}return f&&p?t.apply(this,l):(m=this.thru(u),f?s?m.value()[0]:m.value():m)})}),eh(["pop","push","shift","sort","splice","unshift"],function(t){var i=tI[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);im.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var s=this.value();return i.apply(sN(s)?s:[],t)}return this[n](function(n){return i.apply(sN(n)?n:[],t)})}}),iY(iv.prototype,function(t,i){var n=im[i];if(n){var r=n.name+"";tR.call(ia,r)||(ia[r]=[]),ia[r].push({name:i,func:n})}}),ia[n0(n,2).name]=[{name:"wrapper",func:n}],iv.prototype.clone=function(){var t=new iv(this.__wrapped__);return t.__actions__=nV(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=nV(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=nV(this.__views__),t},iv.prototype.reverse=function(){if(this.__filtered__){var t=new iv(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},iv.prototype.value=function(){var t=this.__wrapped__.value(),i=this.__dir__,n=sN(t),r=i<0,s=n?t.length:0,o=function(t,i,n){for(var r=-1,s=n.length;++r<s;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":i-=a;break;case"take":i=e4(i,t+a);break;case"takeRight":t=e5(t,i-a)}}return{start:t,end:i}}(0,s,this.__views__),a=o.start,l=o.end,A=l-a,h=r?l:a-1,c=this.__iteratees__,u=c.length,d=0,g=e4(A,this.__takeCount__);if(!n||!r&&s==A&&g==A)return nL(t,this.__actions__);var f=[];t:for(;A--&&d<g;){for(var p=-1,m=t[h+=i];++p<u;){var _=c[p],y=_.iteratee,w=_.type,v=y(m);if(2==w)m=v;else if(!v)if(1==w)continue t;else break t}f[d++]=m}return f},im.prototype.at=so,im.prototype.chain=function(){return sr(this)},im.prototype.commit=function(){return new iw(this.value(),this.__chain__)},im.prototype.next=function(){this.__values__===n&&(this.__values__=s6(this.value()));var t=this.__index__>=this.__values__.length,i=t?n:this.__values__[this.__index__++];return{done:t,value:i}},im.prototype.plant=function(t){for(var i,r=this;r instanceof iy;){var s=rH(r);s.__index__=0,s.__values__=n,i?o.__wrapped__=s:i=s;var o=s;r=r.__wrapped__}return o.__wrapped__=t,i},im.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof iv){var i=t;return this.__actions__.length&&(i=new iv(this)),(i=i.reverse()).__actions__.push({func:ss,args:[r2],thisArg:n}),new iw(i,this.__chain__)}return this.thru(r2)},im.prototype.toJSON=im.prototype.valueOf=im.prototype.value=function(){return nL(this.__wrapped__,this.__actions__)},im.prototype.first=im.prototype.head,t3&&(im.prototype[t3]=function(){return this}),im}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t6._=eq,define(function(){return eq})):t7?((t7.exports=eq)._=eq,t8._=eq):t6._=eq}).call(this)}),L("45fvw",function(t,i){t.exports=function(){function i(){return H.apply(null,arguments)}function n(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t,i){return Object.prototype.hasOwnProperty.call(t,i)}function o(t){var i;if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;for(i in t)if(s(t,i))return!1;return!0}function a(t){return void 0===t}function l(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function A(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,i){var n,r=[],s=t.length;for(n=0;n<s;++n)r.push(i(t[n],n));return r}function c(t,i){for(var n in i)s(i,n)&&(t[n]=i[n]);return s(i,"toString")&&(t.toString=i.toString),s(i,"valueOf")&&(t.valueOf=i.valueOf),t}function u(t,i,n,r){return es(t,i,n,r,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function g(t){var i=null,n=!1,r=t._d&&!isNaN(t._d.getTime());return(r&&(i=d(t),n=G.call(i.parsedDateParts,function(t){return null!=t}),r=i.overflow<0&&!i.empty&&!i.invalidEra&&!i.invalidMonth&&!i.invalidWeekday&&!i.weekdayMismatch&&!i.nullInput&&!i.invalidFormat&&!i.userInvalidated&&(!i.meridiem||i.meridiem&&n),t._strict&&(r=r&&0===i.charsLeftOver&&0===i.unusedTokens.length&&void 0===i.bigHour)),null!=Object.isFrozen&&Object.isFrozen(t))?r:(t._isValid=r,t._isValid)}function f(t){var i=u(NaN);return null!=t?c(d(i),t):d(i).userInvalidated=!0,i}G=Array.prototype.some?Array.prototype.some:function(t){var i,n=Object(this),r=n.length>>>0;for(i=0;i<r;i++)if(i in n&&t.call(this,n[i],i,n))return!0;return!1};var p,m,_=i.momentProperties=[],y=!1;function w(t,i){var n,r,s,o=_.length;if(a(i._isAMomentObject)||(t._isAMomentObject=i._isAMomentObject),a(i._i)||(t._i=i._i),a(i._f)||(t._f=i._f),a(i._l)||(t._l=i._l),a(i._strict)||(t._strict=i._strict),a(i._tzm)||(t._tzm=i._tzm),a(i._isUTC)||(t._isUTC=i._isUTC),a(i._offset)||(t._offset=i._offset),a(i._pf)||(t._pf=d(i)),a(i._locale)||(t._locale=i._locale),o>0)for(n=0;n<o;n++)a(s=i[r=_[n]])||(t[r]=s);return t}function v(t){w(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function b(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function C(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function x(t,n){var r=!0;return c(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),r){var o,a,l,A=[],h=arguments.length;for(a=0;a<h;a++){if(o="","object"==typeof arguments[a]){for(l in o+="\n["+a+"] ",arguments[0])s(arguments[0],l)&&(o+=l+": "+arguments[0][l]+", ");o=o.slice(0,-2)}else o=arguments[a];A.push(o)}C(t+"\nArguments: "+Array.prototype.slice.call(A).join("")+"\n"+Error().stack),r=!1}return n.apply(this,arguments)},n)}var E={};function B(t,n){null!=i.deprecationHandler&&i.deprecationHandler(t,n),E[t]||(C(n),E[t]=!0)}function S(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function I(t,i){var n,o=c({},t);for(n in i)s(i,n)&&(r(t[n])&&r(i[n])?(o[n]={},c(o[n],t[n]),c(o[n],i[n])):null!=i[n]?o[n]=i[n]:delete o[n]);for(n in t)s(t,n)&&!s(i,n)&&r(t[n])&&(o[n]=c({},o[n]));return o}function L(t){null!=t&&this.set(t)}function F(t,i,n){var r=""+Math.abs(t);return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i-r.length)).toString().substr(1)+r}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null;var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,T=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},O={};function D(t,i,n,r){var s=r;"string"==typeof r&&(s=function(){return this[r]()}),t&&(O[t]=s),i&&(O[i[0]]=function(){return F(s.apply(this,arguments),i[1],i[2])}),n&&(O[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function P(t,i){return t.isValid()?(R[i=k(i,t.localeData())]=R[i]||function(t){var i,n,r,s=t.match(M);for(n=0,r=s.length;n<r;n++)O[s[n]]?s[n]=O[s[n]]:s[n]=(i=s[n]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(i){var n,o="";for(n=0;n<r;n++)o+=S(s[n])?s[n].call(i,t):s[n];return o}}(i),R[i](t)):t.localeData().invalidDate()}function k(t,i){var n=5;function r(t){return i.longDateFormat(t)||t}for(T.lastIndex=0;n>=0&&T.test(t);)t=t.replace(T,r),T.lastIndex=0,n-=1;return t}var N={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function U(t){return"string"==typeof t?N[t]||N[t.toLowerCase()]:void 0}function Q(t){var i,n,r={};for(n in t)s(t,n)&&(i=U(n))&&(r[i]=t[n]);return r}var H,G,V,z={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1},K=Object.keys?Object.keys:function(t){var i,n=[];for(i in t)s(t,i)&&n.push(i);return n},j=/\d/,W=/\d\d/,$=/\d{3}/,Y=/\d{4}/,q=/[+-]?\d{6}/,X=/\d\d?/,Z=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,te=/\d{1,4}/,ti=/[+-]?\d{1,6}/,tn=/\d+/,tr=/[+-]?\d+/,ts=/Z|[+-]\d\d:?\d\d/gi,to=/Z|[+-]\d\d(?::?\d\d)?/gi,ta=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,tl=/^[1-9]\d?/,tA=/^([1-9]\d|\d)/;function th(t,i,n){V[t]=S(i)?i:function(t,r){return t&&n?n:i}}function tc(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function tu(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function td(t){var i=+t,n=0;return 0!==i&&isFinite(i)&&(n=tu(i)),n}V={};var tg={};function tf(t,i){var n,r,s=i;for("string"==typeof t&&(t=[t]),l(i)&&(s=function(t,n){n[i]=td(t)}),r=t.length,n=0;n<r;n++)tg[t[n]]=s}function tp(t,i){tf(t,function(t,n,r,s){r._w=r._w||{},i(t,r._w,r,s)})}function tm(t){return t%4==0&&t%100!=0||t%400==0}function t_(t){return tm(t)?366:365}D("Y",0,0,function(){var t=this.year();return t<=9999?F(t,4):"+"+t}),D(0,["YY",2],0,function(){return this.year()%100}),D(0,["YYYY",4],0,"year"),D(0,["YYYYY",5],0,"year"),D(0,["YYYYYY",6,!0],0,"year"),th("Y",tr),th("YY",X,W),th("YYYY",te,Y),th("YYYYY",ti,q),th("YYYYYY",ti,q),tf(["YYYYY","YYYYYY"],0),tf("YYYY",function(t,n){n[0]=2===t.length?i.parseTwoDigitYear(t):td(t)}),tf("YY",function(t,n){n[0]=i.parseTwoDigitYear(t)}),tf("Y",function(t,i){i[0]=parseInt(t,10)}),i.parseTwoDigitYear=function(t){return td(t)+(td(t)>68?1900:2e3)};var ty=tw("FullYear",!0);function tw(t,n){return function(r){return null!=r?(tb(this,t,r),i.updateOffset(this,n),this):tv(this,t)}}function tv(t,i){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(i){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function tb(t,i,n){var r,s,o,a;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,s=t._isUTC,i){case"Milliseconds":return void(s?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(s?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(s?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(s?r.setUTCHours(n):r.setHours(n));case"Date":return void(s?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=t.month(),a=29!==(a=t.date())||1!==o||tm(n)?a:28,s?r.setUTCFullYear(n,o,a):r.setFullYear(n,o,a)}}function tC(t,i){if(isNaN(t)||isNaN(i))return NaN;var n=(i%12+12)%12;return t+=(i-n)/12,1===n?tm(t)?29:28:31-n%7%2}tV=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var i;for(i=0;i<this.length;++i)if(this[i]===t)return i;return -1},D("M",["MM",2],"Mo",function(){return this.month()+1}),D("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),D("MMMM",0,0,function(t){return this.localeData().months(this,t)}),th("M",X,tl),th("MM",X,W),th("MMM",function(t,i){return i.monthsShortRegex(t)}),th("MMMM",function(t,i){return i.monthsRegex(t)}),tf(["M","MM"],function(t,i){i[1]=td(t)-1}),tf(["MMM","MMMM"],function(t,i,n,r){var s=n._locale.monthsParse(t,r,n._strict);null!=s?i[1]=s:d(n).invalidMonth=t});var tx="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),tE=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;function tB(t,i,n){var r,s,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(r=0,this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];r<12;++r)o=u([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();if(n)if("MMM"===i)return -1!==(s=tV.call(this._shortMonthsParse,a))?s:null;else return -1!==(s=tV.call(this._longMonthsParse,a))?s:null;return"MMM"===i?-1!==(s=tV.call(this._shortMonthsParse,a))||-1!==(s=tV.call(this._longMonthsParse,a))?s:null:-1!==(s=tV.call(this._longMonthsParse,a))||-1!==(s=tV.call(this._shortMonthsParse,a))?s:null}function tS(t,i){if(!t.isValid())return t;if("string"==typeof i){if(/^\d+$/.test(i))i=td(i);else if(!l(i=t.localeData().monthsParse(i)))return t}var n=i,r=t.date();return r=r<29?r:Math.min(r,tC(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function tI(t){return null!=t?(tS(this,t),i.updateOffset(this,!0),this):tv(this,"Month")}function tL(){function t(t,i){return i.length-t.length}var i,n,r,s,o=[],a=[],l=[];for(i=0;i<12;i++)n=u([2e3,i]),r=tc(this.monthsShort(n,"")),s=tc(this.months(n,"")),o.push(r),a.push(s),l.push(s),l.push(r);o.sort(t),a.sort(t),l.sort(t),this._monthsRegex=RegExp("^("+l.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=RegExp("^("+o.join("|")+")","i")}function tF(t,i,n,r,s,o,a){var l;return t<100&&t>=0?isFinite((l=new Date(t+400,i,n,r,s,o,a)).getFullYear())&&l.setFullYear(t):l=new Date(t,i,n,r,s,o,a),l}function tM(t){var i,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,isFinite((i=new Date(Date.UTC.apply(null,n))).getUTCFullYear())&&i.setUTCFullYear(t)):i=new Date(Date.UTC.apply(null,arguments)),i}function tT(t,i,n){var r=7+i-n;return-((7+tM(t,0,r).getUTCDay()-i)%7)+r-1}function tR(t,i,n,r,s){var o,a,l=1+7*(i-1)+(7+n-r)%7+tT(t,r,s);return l<=0?a=t_(o=t-1)+l:l>t_(t)?(o=t+1,a=l-t_(t)):(o=t,a=l),{year:o,dayOfYear:a}}function tO(t,i,n){var r,s,o=tT(t.year(),i,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+tD(s=t.year()-1,i,n):a>tD(t.year(),i,n)?(r=a-tD(t.year(),i,n),s=t.year()+1):(s=t.year(),r=a),{week:r,year:s}}function tD(t,i,n){var r=tT(t,i,n),s=tT(t+1,i,n);return(t_(t)-r+s)/7}function tP(t,i){return t.slice(i,7).concat(t.slice(0,i))}D("w",["ww",2],"wo","week"),D("W",["WW",2],"Wo","isoWeek"),th("w",X,tl),th("ww",X,W),th("W",X,tl),th("WW",X,W),tp(["w","ww","W","WW"],function(t,i,n,r){i[r.substr(0,1)]=td(t)}),D("d",0,"do","day"),D("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),D("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),D("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),D("e",0,0,"weekday"),D("E",0,0,"isoWeekday"),th("d",X),th("e",X),th("E",X),th("dd",function(t,i){return i.weekdaysMinRegex(t)}),th("ddd",function(t,i){return i.weekdaysShortRegex(t)}),th("dddd",function(t,i){return i.weekdaysRegex(t)}),tp(["dd","ddd","dddd"],function(t,i,n,r){var s=n._locale.weekdaysParse(t,r,n._strict);null!=s?i.d=s:d(n).invalidWeekday=t}),tp(["d","e","E"],function(t,i,n,r){i[r]=td(t)});var tk="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function tN(t,i,n){var r,s,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(r=0,this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[];r<7;++r)o=u([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();if(n)if("dddd"===i)return -1!==(s=tV.call(this._weekdaysParse,a))?s:null;else if("ddd"===i)return -1!==(s=tV.call(this._shortWeekdaysParse,a))?s:null;else return -1!==(s=tV.call(this._minWeekdaysParse,a))?s:null;return"dddd"===i?-1!==(s=tV.call(this._weekdaysParse,a))||-1!==(s=tV.call(this._shortWeekdaysParse,a))||-1!==(s=tV.call(this._minWeekdaysParse,a))?s:null:"ddd"===i?-1!==(s=tV.call(this._shortWeekdaysParse,a))||-1!==(s=tV.call(this._weekdaysParse,a))||-1!==(s=tV.call(this._minWeekdaysParse,a))?s:null:-1!==(s=tV.call(this._minWeekdaysParse,a))||-1!==(s=tV.call(this._weekdaysParse,a))||-1!==(s=tV.call(this._shortWeekdaysParse,a))?s:null}function tU(){function t(t,i){return i.length-t.length}var i,n,r,s,o,a=[],l=[],A=[],h=[];for(i=0;i<7;i++)n=u([2e3,1]).day(i),r=tc(this.weekdaysMin(n,"")),s=tc(this.weekdaysShort(n,"")),o=tc(this.weekdays(n,"")),a.push(r),l.push(s),A.push(o),h.push(r),h.push(s),h.push(o);a.sort(t),l.sort(t),A.sort(t),h.sort(t),this._weekdaysRegex=RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=RegExp("^("+A.join("|")+")","i"),this._weekdaysShortStrictRegex=RegExp("^("+l.join("|")+")","i"),this._weekdaysMinStrictRegex=RegExp("^("+a.join("|")+")","i")}function tQ(){return this.hours()%12||12}function tH(t,i){D(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),i)})}function tG(t,i){return i._meridiemParse}D("H",["HH",2],0,"hour"),D("h",["hh",2],0,tQ),D("k",["kk",2],0,function(){return this.hours()||24}),D("hmm",0,0,function(){return""+tQ.apply(this)+F(this.minutes(),2)}),D("hmmss",0,0,function(){return""+tQ.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),D("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),D("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),tH("a",!0),tH("A",!1),th("a",tG),th("A",tG),th("H",X,tA),th("h",X,tl),th("k",X,tl),th("HH",X,W),th("hh",X,W),th("kk",X,W),th("hmm",Z),th("hmmss",J),th("Hmm",Z),th("Hmmss",J),tf(["H","HH"],3),tf(["k","kk"],function(t,i,n){var r=td(t);i[3]=24===r?0:r}),tf(["a","A"],function(t,i,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),tf(["h","hh"],function(t,i,n){i[3]=td(t),d(n).bigHour=!0}),tf("hmm",function(t,i,n){var r=t.length-2;i[3]=td(t.substr(0,r)),i[4]=td(t.substr(r)),d(n).bigHour=!0}),tf("hmmss",function(t,i,n){var r=t.length-4,s=t.length-2;i[3]=td(t.substr(0,r)),i[4]=td(t.substr(r,2)),i[5]=td(t.substr(s)),d(n).bigHour=!0}),tf("Hmm",function(t,i,n){var r=t.length-2;i[3]=td(t.substr(0,r)),i[4]=td(t.substr(r))}),tf("Hmmss",function(t,i,n){var r=t.length-4,s=t.length-2;i[3]=td(t.substr(0,r)),i[4]=td(t.substr(r,2)),i[5]=td(t.substr(s))});var tV,tz,tK=tw("Hours",!0),tj={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:tx,week:{dow:0,doy:6},weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysShort:tk,meridiemParse:/[ap]\.?m?\.?/i},tW={},t$={};function tY(t){return t?t.toLowerCase().replace("_","-"):t}function tq(i){var n=null;if(void 0===tW[i]&&t&&t.exports&&i&&i.match("^[^/\\\\]*$"))try{n=tz._abbr,(void 0)("./locale/"+i),tX(n)}catch(t){tW[i]=null}return tW[i]}function tX(t,i){var n;return t&&((n=a(i)?tJ(t):tZ(t,i))?tz=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),tz._abbr}function tZ(t,i){if(null===i)return delete tW[t],null;var n,r=tj;if(i.abbr=t,null!=tW[t])B("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=tW[t]._config;else if(null!=i.parentLocale)if(null!=tW[i.parentLocale])r=tW[i.parentLocale]._config;else{if(null==(n=tq(i.parentLocale)))return t$[i.parentLocale]||(t$[i.parentLocale]=[]),t$[i.parentLocale].push({name:t,config:i}),null;r=n._config}return tW[t]=new L(I(r,i)),t$[t]&&t$[t].forEach(function(t){tZ(t.name,t.config)}),tX(t),tW[t]}function tJ(t){var i;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return tz;if(!n(t)){if(i=tq(t))return i;t=[t]}return function(t){for(var i,n,r,s,o=0;o<t.length;){for(i=(s=tY(t[o]).split("-")).length,n=(n=tY(t[o+1]))?n.split("-"):null;i>0;){if(r=tq(s.slice(0,i).join("-")))return r;if(n&&n.length>=i&&function(t,i){var n,r=Math.min(t.length,i.length);for(n=0;n<r;n+=1)if(t[n]!==i[n])return n;return r}(s,n)>=i-1)break;i--}o++}return tz}(t)}function t0(t){var i,n=t._a;return n&&-2===d(t).overflow&&(i=n[1]<0||n[1]>11?1:n[2]<1||n[2]>tC(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,d(t)._overflowDayOfYear&&(i<0||i>2)&&(i=2),d(t)._overflowWeeks&&-1===i&&(i=7),d(t)._overflowWeekday&&-1===i&&(i=8),d(t).overflow=i),t}var t1=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,t2=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,t5=/Z|[+-]\d\d(?::?\d\d)?/,t4=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],t3=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],t6=/^\/?Date\((-?\d+)/i,t8=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,t7={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function t9(t){var i,n,r,s,o,a,l=t._i,A=t1.exec(l)||t2.exec(l),h=t4.length,c=t3.length;if(A){for(i=0,d(t).iso=!0,n=h;i<n;i++)if(t4[i][1].exec(A[1])){s=t4[i][0],r=!1!==t4[i][2];break}if(null==s){t._isValid=!1;return}if(A[3]){for(i=0,n=c;i<n;i++)if(t3[i][1].exec(A[3])){o=(A[2]||" ")+t3[i][0];break}if(null==o){t._isValid=!1;return}}if(!r&&null!=o){t._isValid=!1;return}if(A[4])if(t5.exec(A[4]))a="Z";else{t._isValid=!1;return}t._f=s+(o||"")+(a||""),en(t)}else t._isValid=!1}function et(t){var i,n,r,s,o,a,l,A,h,c,u,g=t8.exec(t._i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(g){if(o=g[4],a=g[3],l=g[2],A=g[5],h=g[6],c=g[7],u=[(i=parseInt(o,10))<=49?2e3+i:i<=999?1900+i:i,tx.indexOf(a),parseInt(l,10),parseInt(A,10),parseInt(h,10)],c&&u.push(parseInt(c,10)),n=g[1],r=u,s=t,n&&tk.indexOf(n)!==new Date(r[0],r[1],r[2]).getDay()&&(d(s).weekdayMismatch=!0,s._isValid=!1,1))return;t._a=u,t._tzm=function(t,i,n){if(t)return t7[t];if(i)return 0;var r=parseInt(n,10),s=r%100;return(r-s)/100*60+s}(g[8],g[9],g[10]),t._d=tM.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),d(t).rfc2822=!0}else t._isValid=!1}function ee(t,i,n){return null!=t?t:null!=i?i:n}function ei(t){var n,r,s,o,a,l,A,h,c,u,g,f,p,m,_,y,w=[];if(!t._d){for(g=new Date(i.now()),m=t._useUTC?[g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()]:[g.getFullYear(),g.getMonth(),g.getDate()],t._w&&null==t._a[2]&&null==t._a[1]&&(null!=(r=(n=t)._w).GG||null!=r.W||null!=r.E?(l=1,A=4,s=ee(r.GG,n._a[0],tO(eo(),1,4).year),o=ee(r.W,1),((a=ee(r.E,1))<1||a>7)&&(c=!0)):(l=n._locale._week.dow,A=n._locale._week.doy,u=tO(eo(),l,A),s=ee(r.gg,n._a[0],u.year),o=ee(r.w,u.week),null!=r.d?((a=r.d)<0||a>6)&&(c=!0):null!=r.e?(a=r.e+l,(r.e<0||r.e>6)&&(c=!0)):a=l),o<1||o>tD(s,l,A)?d(n)._overflowWeeks=!0:null!=c?d(n)._overflowWeekday=!0:(h=tR(s,o,a,l,A),n._a[0]=h.year,n._dayOfYear=h.dayOfYear)),null!=t._dayOfYear&&(y=ee(t._a[0],m[0]),(t._dayOfYear>t_(y)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),p=tM(y,0,t._dayOfYear),t._a[1]=p.getUTCMonth(),t._a[2]=p.getUTCDate()),f=0;f<3&&null==t._a[f];++f)t._a[f]=w[f]=m[f];for(;f<7;f++)t._a[f]=w[f]=null==t._a[f]?+(2===f):t._a[f];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?tM:tF).apply(null,w),_=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==_&&(d(t).weekdayMismatch=!0)}}function en(t){if(t._f===i.ISO_8601)return void t9(t);if(t._f===i.RFC_2822)return void et(t);t._a=[],d(t).empty=!0;var n,r,o,a,l,A,h,c,u,g,f,p=""+t._i,m=p.length,_=0;for(l=0,f=(h=k(t._f,t._locale).match(M)||[]).length;l<f;l++)if(c=h[l],(A=(p.match(!s(V,c)?new RegExp(tc(c.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,i,n,r,s){return i||n||r||s}))):V[c](t._strict,t._locale))||[])[0])&&((u=p.substr(0,p.indexOf(A))).length>0&&d(t).unusedInput.push(u),p=p.slice(p.indexOf(A)+A.length),_+=A.length),O[c])A?d(t).empty=!1:d(t).unusedTokens.push(c),null!=A&&s(tg,c)&&tg[c](A,t._a,t,c);else t._strict&&!A&&d(t).unusedTokens.push(c);d(t).charsLeftOver=m-_,p.length>0&&d(t).unusedInput.push(p),t._a[3]<=12&&!0===d(t).bigHour&&t._a[3]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=(n=t._locale,r=t._a[3],null==(o=t._meridiem)?r:null!=n.meridiemHour?n.meridiemHour(r,o):(null!=n.isPM&&((a=n.isPM(o))&&r<12&&(r+=12),a||12!==r||(r=0)),r)),null!==(g=d(t).era)&&(t._a[0]=t._locale.erasConvertYear(g,t._a[0])),ei(t),t0(t)}function er(t){var s=t._i,o=t._f;return(t._locale=t._locale||tJ(t._l),null===s||void 0===o&&""===s)?f({nullInput:!0}):("string"==typeof s&&(t._i=s=t._locale.preparse(s)),b(s))?new v(t0(s)):(A(s)?t._d=s:n(o)?!function(t){var i,n,r,s,o,a,l=!1,A=t._f.length;if(0===A){d(t).invalidFormat=!0,t._d=new Date(NaN);return}for(s=0;s<A;s++)o=0,a=!1,i=w({},t),null!=t._useUTC&&(i._useUTC=t._useUTC),i._f=t._f[s],en(i),g(i)&&(a=!0),o+=d(i).charsLeftOver,o+=10*d(i).unusedTokens.length,d(i).score=o,l?o<r&&(r=o,n=i):(null==r||o<r||a)&&(r=o,n=i,a&&(l=!0));c(t,n||i)}(t):o?en(t):function(t){var s=t._i;if(a(s))t._d=new Date(i.now());else if(A(s))t._d=new Date(s.valueOf());else if("string"==typeof s)!function(t){var n=t6.exec(t._i);if(null!==n){t._d=new Date(+n[1]);return}if(t9(t),!1===t._isValid)delete t._isValid,et(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:i.createFromInputFallback(t))}(t);else if(n(s))t._a=h(s.slice(0),function(t){return parseInt(t,10)}),ei(t);else if(r(s)){if(!t._d){var o=Q(t._i),c=void 0===o.day?o.date:o.day;t._a=h([o.year,o.month,c,o.hour,o.minute,o.second,o.millisecond],function(t){return t&&parseInt(t,10)}),ei(t)}}else l(s)?t._d=new Date(s):i.createFromInputFallback(t)}(t),g(t)||(t._d=null),t)}function es(t,i,s,a,l){var A,h={};return(!0===i||!1===i)&&(a=i,i=void 0),(!0===s||!1===s)&&(a=s,s=void 0),(r(t)&&o(t)||n(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=l,h._l=s,h._i=t,h._f=i,h._strict=a,(A=new v(t0(er(h))))._nextDay&&(A.add(1,"d"),A._nextDay=void 0),A}function eo(t,i,n,r){return es(t,i,n,r,!1)}i.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var ea=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=eo.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()}),el=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=eo.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()});function eA(t,i){var r,s;if(1===i.length&&n(i[0])&&(i=i[0]),!i.length)return eo();for(s=1,r=i[0];s<i.length;++s)(!i[s].isValid()||i[s][t](r))&&(r=i[s]);return r}var eh=["year","quarter","month","week","day","hour","minute","second","millisecond"];function ec(t){var i=Q(t),n=i.year||0,r=i.quarter||0,o=i.month||0,a=i.week||i.isoWeek||0,l=i.day||0,A=i.hour||0,h=i.minute||0,c=i.second||0,u=i.millisecond||0;this._isValid=function(t){var i,n,r=!1,o=eh.length;for(i in t)if(s(t,i)&&!(-1!==tV.call(eh,i)&&(null==t[i]||!isNaN(t[i]))))return!1;for(n=0;n<o;++n)if(t[eh[n]]){if(r)return!1;parseFloat(t[eh[n]])!==td(t[eh[n]])&&(r=!0)}return!0}(i),this._milliseconds=+u+1e3*c+6e4*h+36e5*A,this._days=+l+7*a,this._months=+o+3*r+12*n,this._data={},this._locale=tJ(),this._bubble()}function eu(t){return t instanceof ec}function ed(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function eg(t,i){D(t,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+F(~~(t/60),2)+i+F(~~t%60,2)})}eg("Z",":"),eg("ZZ",""),th("Z",to),th("ZZ",to),tf(["Z","ZZ"],function(t,i,n){n._useUTC=!0,n._tzm=ep(to,t)});var ef=/([\+\-]|\d\d)/gi;function ep(t,i){var n,r,s=(i||"").match(t);return null===s?null:0===(r=+(60*(n=((s[s.length-1]||[])+"").match(ef)||["-",0,0])[1])+td(n[2]))?0:"+"===n[0]?r:-r}function em(t,n){var r,s;return n._isUTC?(r=n.clone(),s=(b(t)||A(t)?t.valueOf():eo(t).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),i.updateOffset(r,!1),r):eo(t).local()}function e_(t){return-Math.round(t._d.getTimezoneOffset())}function ey(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var ew=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,ev=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function eb(t,i){var n,r,o,a,A,h,c=t,u=null;return eu(t)?c={ms:t._milliseconds,d:t._days,M:t._months}:l(t)||!isNaN(+t)?(c={},i?c[i]=+t:c.milliseconds=+t):(u=ew.exec(t))?(a="-"===u[1]?-1:1,c={y:0,d:td(u[2])*a,h:td(u[3])*a,m:td(u[4])*a,s:td(u[5])*a,ms:td(ed(1e3*u[6]))*a}):(u=ev.exec(t))?(a="-"===u[1]?-1:1,c={y:eC(u[2],a),M:eC(u[3],a),w:eC(u[4],a),d:eC(u[5],a),h:eC(u[6],a),m:eC(u[7],a),s:eC(u[8],a)}):null==c?c={}:"object"==typeof c&&("from"in c||"to"in c)&&(n=eo(c.from),r=eo(c.to),h=n.isValid()&&r.isValid()?(r=em(r,n),n.isBefore(r)?o=ex(n,r):((o=ex(r,n)).milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0},(c={}).ms=h.milliseconds,c.M=h.months),A=new ec(c),eu(t)&&s(t,"_locale")&&(A._locale=t._locale),eu(t)&&s(t,"_isValid")&&(A._isValid=t._isValid),A}function eC(t,i){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*i}function ex(t,i){var n={};return n.months=i.month()-t.month()+(i.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(i)&&--n.months,n.milliseconds=i-t.clone().add(n.months,"M"),n}function eE(t,i){return function(n,r){var s;return null===r||isNaN(+r)||(B(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),eB(this,eb(n,r),t),this}}function eB(t,n,r,s){var o=n._milliseconds,a=ed(n._days),l=ed(n._months);t.isValid()&&(s=null==s||s,l&&tS(t,tv(t,"Month")+l*r),a&&tb(t,"Date",tv(t,"Date")+a*r),o&&t._d.setTime(t._d.valueOf()+o*r),s&&i.updateOffset(t,a||l))}eb.fn=ec.prototype,eb.invalid=function(){return eb(NaN)};var eS=eE(1,"add"),eI=eE(-1,"subtract");function eL(t){return"string"==typeof t||t instanceof String}function eF(t,i){if(t.date()<i.date())return-eF(i,t);var n,r,s=(i.year()-t.year())*12+(i.month()-t.month()),o=t.clone().add(s,"months");return r=i-o<0?(i-o)/(o-t.clone().add(s-1,"months")):(i-o)/(t.clone().add(s+1,"months")-o),-(s+r)||0}function eM(t){var i;return void 0===t?this._locale._abbr:(null!=(i=tJ(t))&&(this._locale=i),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var eT=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function eR(){return this._locale}function eO(t,i,n){return t<100&&t>=0?new Date(t+400,i,n)-126227808e5:new Date(t,i,n).valueOf()}function eD(t,i,n){return t<100&&t>=0?Date.UTC(t+400,i,n)-126227808e5:Date.UTC(t,i,n)}function eP(t,i){return i.erasAbbrRegex(t)}function ek(){var t,i,n,r,s,o=[],a=[],l=[],A=[],h=this.eras();for(t=0,i=h.length;t<i;++t)n=tc(h[t].name),r=tc(h[t].abbr),s=tc(h[t].narrow),a.push(n),o.push(r),l.push(s),A.push(n),A.push(r),A.push(s);this._erasRegex=RegExp("^("+A.join("|")+")","i"),this._erasNameRegex=RegExp("^("+a.join("|")+")","i"),this._erasAbbrRegex=RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=RegExp("^("+l.join("|")+")","i")}function eN(t,i){D(0,[t,t.length],0,i)}function eU(t,i,n,r,s){var o;return null==t?tO(this,r,s).year:(i>(o=tD(t,r,s))&&(i=o),eQ.call(this,t,i,n,r,s))}function eQ(t,i,n,r,s){var o=tR(t,i,n,r,s),a=tM(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}D("N",0,0,"eraAbbr"),D("NN",0,0,"eraAbbr"),D("NNN",0,0,"eraAbbr"),D("NNNN",0,0,"eraName"),D("NNNNN",0,0,"eraNarrow"),D("y",["y",1],"yo","eraYear"),D("y",["yy",2],0,"eraYear"),D("y",["yyy",3],0,"eraYear"),D("y",["yyyy",4],0,"eraYear"),th("N",eP),th("NN",eP),th("NNN",eP),th("NNNN",function(t,i){return i.erasNameRegex(t)}),th("NNNNN",function(t,i){return i.erasNarrowRegex(t)}),tf(["N","NN","NNN","NNNN","NNNNN"],function(t,i,n,r){var s=n._locale.erasParse(t,r,n._strict);s?d(n).era=s:d(n).invalidEra=t}),th("y",tn),th("yy",tn),th("yyy",tn),th("yyyy",tn),th("yo",function(t,i){return i._eraYearOrdinalRegex||tn}),tf(["y","yy","yyy","yyyy"],0),tf(["yo"],function(t,i,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?i[0]=n._locale.eraYearOrdinalParse(t,s):i[0]=parseInt(t,10)}),D(0,["gg",2],0,function(){return this.weekYear()%100}),D(0,["GG",2],0,function(){return this.isoWeekYear()%100}),eN("gggg","weekYear"),eN("ggggg","weekYear"),eN("GGGG","isoWeekYear"),eN("GGGGG","isoWeekYear"),th("G",tr),th("g",tr),th("GG",X,W),th("gg",X,W),th("GGGG",te,Y),th("gggg",te,Y),th("GGGGG",ti,q),th("ggggg",ti,q),tp(["gggg","ggggg","GGGG","GGGGG"],function(t,i,n,r){i[r.substr(0,2)]=td(t)}),tp(["gg","GG"],function(t,n,r,s){n[s]=i.parseTwoDigitYear(t)}),D("Q",0,"Qo","quarter"),th("Q",j),tf("Q",function(t,i){i[1]=(td(t)-1)*3}),D("D",["DD",2],"Do","date"),th("D",X,tl),th("DD",X,W),th("Do",function(t,i){return t?i._dayOfMonthOrdinalParse||i._ordinalParse:i._dayOfMonthOrdinalParseLenient}),tf(["D","DD"],2),tf("Do",function(t,i){i[2]=td(t.match(X)[0])});var eH=tw("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear"),th("DDD",tt),th("DDDD",$),tf(["DDD","DDDD"],function(t,i,n){n._dayOfYear=td(t)}),D("m",["mm",2],0,"minute"),th("m",X,tA),th("mm",X,W),tf(["m","mm"],4);var eG=tw("Minutes",!1);D("s",["ss",2],0,"second"),th("s",X,tA),th("ss",X,W),tf(["s","ss"],5);var eV=tw("Seconds",!1);for(D("S",0,0,function(){return~~(this.millisecond()/100)}),D(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),D(0,["SSS",3],0,"millisecond"),D(0,["SSSS",4],0,function(){return 10*this.millisecond()}),D(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),D(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),D(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),D(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),D(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),th("S",tt,j),th("SS",tt,W),th("SSS",tt,$),p="SSSS";p.length<=9;p+="S")th(p,tn);function ez(t,i){i[6]=td(("0."+t)*1e3)}for(p="S";p.length<=9;p+="S")tf(p,ez);m=tw("Milliseconds",!1),D("z",0,0,"zoneAbbr"),D("zz",0,0,"zoneName");var eK=v.prototype;function ej(t){return t}eK.add=eS,eK.calendar=function(t,a){if(1==arguments.length)if(arguments[0]){var h,c,u,d;if(h=arguments[0],b(h)||A(h)||eL(h)||l(h)||(u=n(c=h),d=!1,u&&(d=0===c.filter(function(t){return!l(t)&&eL(c)}).length),u&&d)||function(t){var i,n,a=r(t)&&!o(t),l=!1,A=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],h=A.length;for(i=0;i<h;i+=1)n=A[i],l=l||s(t,n);return a&&l}(h)||null==h)t=arguments[0],a=void 0;else(function(t){var i,n,a=r(t)&&!o(t),l=!1,A=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(i=0;i<A.length;i+=1)n=A[i],l=l||s(t,n);return a&&l})(arguments[0])&&(a=arguments[0],t=void 0)}else t=void 0,a=void 0;var g=t||eo(),f=em(g,this).startOf("day"),p=i.calendarFormat(this,f)||"sameElse",m=a&&(S(a[p])?a[p].call(this,g):a[p]);return this.format(m||this.localeData().calendar(p,this,eo(g)))},eK.clone=function(){return new v(this)},eK.diff=function(t,i,n){var r,s,o;if(!this.isValid()||!(r=em(t,this)).isValid())return NaN;switch(s=(r.utcOffset()-this.utcOffset())*6e4,i=U(i)){case"year":o=eF(this,r)/12;break;case"month":o=eF(this,r);break;case"quarter":o=eF(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-s)/864e5;break;case"week":o=(this-r-s)/6048e5;break;default:o=this-r}return n?o:tu(o)},eK.endOf=function(t){var n,r;if(void 0===(t=U(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?eD:eO,t){case"year":n=r(this.year()+1,0,1)-1;break;case"quarter":n=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=r(this.year(),this.month()+1,1)-1;break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=36e5-((n+(this._isUTC?0:6e4*this.utcOffset()))%36e5+36e5)%36e5-1;break;case"minute":n=this._d.valueOf(),n+=6e4-(n%6e4+6e4)%6e4-1;break;case"second":n=this._d.valueOf(),n+=1e3-(n%1e3+1e3)%1e3-1}return this._d.setTime(n),i.updateOffset(this,!0),this},eK.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var n=P(this,t);return this.localeData().postformat(n)},eK.from=function(t,i){return this.isValid()&&(b(t)&&t.isValid()||eo(t).isValid())?eb({to:this,from:t}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()},eK.fromNow=function(t){return this.from(eo(),t)},eK.to=function(t,i){return this.isValid()&&(b(t)&&t.isValid()||eo(t).isValid())?eb({from:this,to:t}).locale(this.locale()).humanize(!i):this.localeData().invalidDate()},eK.toNow=function(t){return this.to(eo(),t)},eK.get=function(t){return S(this[t=U(t)])?this[t]():this},eK.invalidAt=function(){return d(this).overflow},eK.isAfter=function(t,i){var n=b(t)?t:eo(t);return!!(this.isValid()&&n.isValid())&&("millisecond"===(i=U(i)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(i).valueOf())},eK.isBefore=function(t,i){var n=b(t)?t:eo(t);return!!(this.isValid()&&n.isValid())&&("millisecond"===(i=U(i)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(i).valueOf()<n.valueOf())},eK.isBetween=function(t,i,n,r){var s=b(t)?t:eo(t),o=b(i)?i:eo(i);return!!(this.isValid()&&s.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(s,n):!this.isBefore(s,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},eK.isSame=function(t,i){var n,r=b(t)?t:eo(t);return!!(this.isValid()&&r.isValid())&&("millisecond"===(i=U(i)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(i).valueOf()<=n&&n<=this.clone().endOf(i).valueOf()))},eK.isSameOrAfter=function(t,i){return this.isSame(t,i)||this.isAfter(t,i)},eK.isSameOrBefore=function(t,i){return this.isSame(t,i)||this.isBefore(t,i)},eK.isValid=function(){return g(this)},eK.lang=eT,eK.locale=eM,eK.localeData=eR,eK.max=el,eK.min=ea,eK.parsingFlags=function(){return c({},d(this))},eK.set=function(t,i){if("object"==typeof t){var n,r=function(t){var i,n=[];for(i in t)s(t,i)&&n.push({unit:i,priority:z[i]});return n.sort(function(t,i){return t.priority-i.priority}),n}(t=Q(t)),o=r.length;for(n=0;n<o;n++)this[r[n].unit](t[r[n].unit])}else if(S(this[t=U(t)]))return this[t](i);return this},eK.startOf=function(t){var n,r;if(void 0===(t=U(t))||"millisecond"===t||!this.isValid())return this;switch(r=this._isUTC?eD:eO,t){case"year":n=r(this.year(),0,1);break;case"quarter":n=r(this.year(),this.month()-this.month()%3,1);break;case"month":n=r(this.year(),this.month(),1);break;case"week":n=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=r(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=((n+(this._isUTC?0:6e4*this.utcOffset()))%36e5+36e5)%36e5;break;case"minute":n=this._d.valueOf(),n-=(n%6e4+6e4)%6e4;break;case"second":n=this._d.valueOf(),n-=(n%1e3+1e3)%1e3}return this._d.setTime(n),i.updateOffset(this,!0),this},eK.subtract=eI,eK.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},eK.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},eK.toDate=function(){return new Date(this.valueOf())},eK.toISOString=function(t){if(!this.isValid())return null;var i=!0!==t,n=i?this.clone().utc():this;if(0>n.year()||n.year()>9999)return P(n,i?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ");if(S(Date.prototype.toISOString))if(i)return this.toDate().toISOString();else return new Date(this.valueOf()+6e4*this.utcOffset()).toISOString().replace("Z",P(n,"Z"));return P(n,i?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},eK.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,i,n,r="moment",s="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",s="Z"),t="["+r+'("]',i=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY",n=s+'[")]',this.format(t+i+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(eK[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),eK.toJSON=function(){return this.isValid()?this.toISOString():null},eK.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},eK.unix=function(){return Math.floor(this.valueOf()/1e3)},eK.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},eK.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},eK.eraName=function(){var t,i,n,r=this.localeData().eras();for(t=0,i=r.length;t<i;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""},eK.eraNarrow=function(){var t,i,n,r=this.localeData().eras();for(t=0,i=r.length;t<i;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""},eK.eraAbbr=function(){var t,i,n,r=this.localeData().eras();for(t=0,i=r.length;t<i;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""},eK.eraYear=function(){var t,n,r,s,o=this.localeData().eras();for(t=0,n=o.length;t<n;++t)if(r=o[t].since<=o[t].until?1:-1,s=this.clone().startOf("day").valueOf(),o[t].since<=s&&s<=o[t].until||o[t].until<=s&&s<=o[t].since)return(this.year()-i(o[t].since).year())*r+o[t].offset;return this.year()},eK.year=ty,eK.isLeapYear=function(){return tm(this.year())},eK.weekYear=function(t){return eU.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)},eK.isoWeekYear=function(t){return eU.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},eK.quarter=eK.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)},eK.month=tI,eK.daysInMonth=function(){return tC(this.year(),this.month())},eK.week=eK.weeks=function(t){var i=this.localeData().week(this);return null==t?i:this.add((t-i)*7,"d")},eK.isoWeek=eK.isoWeeks=function(t){var i=tO(this,1,4).week;return null==t?i:this.add((t-i)*7,"d")},eK.weeksInYear=function(){var t=this.localeData()._week;return tD(this.year(),t.dow,t.doy)},eK.weeksInWeekYear=function(){var t=this.localeData()._week;return tD(this.weekYear(),t.dow,t.doy)},eK.isoWeeksInYear=function(){return tD(this.year(),1,4)},eK.isoWeeksInISOWeekYear=function(){return tD(this.isoWeekYear(),1,4)},eK.date=eH,eK.day=eK.days=function(t){if(!this.isValid())return null!=t?this:NaN;var i,n,r=tv(this,"Day");return null==t?r:(i=t,n=this.localeData(),t="string"!=typeof i?i:isNaN(i)?"number"==typeof(i=n.weekdaysParse(i))?i:null:parseInt(i,10),this.add(t-r,"d"))},eK.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var i=(this.day()+7-this.localeData()._week.dow)%7;return null==t?i:this.add(t-i,"d")},eK.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var i,n=(i=this.localeData(),"string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?n:n-7)},eK.dayOfYear=function(t){var i=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?i:this.add(t-i,"d")},eK.hour=eK.hours=tK,eK.minute=eK.minutes=eG,eK.second=eK.seconds=eV,eK.millisecond=eK.milliseconds=m,eK.utcOffset=function(t,n,r){var s,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?o:e_(this);if("string"==typeof t){if(null===(t=ep(to,t)))return this}else 16>Math.abs(t)&&!r&&(t*=60);return!this._isUTC&&n&&(s=e_(this)),this._offset=t,this._isUTC=!0,null!=s&&this.add(s,"m"),o!==t&&(!n||this._changeInProgress?eB(this,eb(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this},eK.utc=function(t){return this.utcOffset(0,t)},eK.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(e_(this),"m")),this},eK.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=ep(ts,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},eK.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?eo(t).utcOffset():0,(this.utcOffset()-t)%60==0)},eK.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},eK.isLocal=function(){return!!this.isValid()&&!this._isUTC},eK.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},eK.isUtc=ey,eK.isUTC=ey,eK.zoneAbbr=function(){return this._isUTC?"UTC":""},eK.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},eK.dates=x("dates accessor is deprecated. Use date instead.",eH),eK.months=x("months accessor is deprecated. Use month instead",tI),eK.years=x("years accessor is deprecated. Use year instead",ty),eK.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,i){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,i),this):-this.utcOffset()}),eK.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t,i={};return w(i,this),(i=er(i))._a?(t=i._isUTC?u(i._a):eo(i._a),this._isDSTShifted=this.isValid()&&function(t,i,n){var r,s=Math.min(t.length,i.length),o=Math.abs(t.length-i.length),a=0;for(r=0;r<s;r++)td(t[r])!==td(i[r])&&a++;return a+o}(i._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted});var eW=L.prototype;function e$(t,i,n,r){var s=tJ(),o=u().set(r,i);return s[n](o,t)}function eY(t,i,n){if(l(t)&&(i=t,t=void 0),t=t||"",null!=i)return e$(t,i,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=e$(t,r,n,"month");return s}function eq(t,i,n,r){"boolean"==typeof t||(n=i=t,t=!1),l(i)&&(n=i,i=void 0),i=i||"";var s,o=tJ(),a=t?o._week.dow:0,A=[];if(null!=n)return e$(i,(n+a)%7,r,"day");for(s=0;s<7;s++)A[s]=e$(i,(s+a)%7,r,"day");return A}eW.calendar=function(t,i,n){var r=this._calendar[t]||this._calendar.sameElse;return S(r)?r.call(i,n):r},eW.longDateFormat=function(t){var i=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return i||!n?i:(this._longDateFormat[t]=n.match(M).map(function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t}).join(""),this._longDateFormat[t])},eW.invalidDate=function(){return this._invalidDate},eW.ordinal=function(t){return this._ordinal.replace("%d",t)},eW.preparse=ej,eW.postformat=ej,eW.relativeTime=function(t,i,n,r){var s=this._relativeTime[n];return S(s)?s(t,i,n,r):s.replace(/%d/i,t)},eW.pastFuture=function(t,i){var n=this._relativeTime[t>0?"future":"past"];return S(n)?n(i):n.replace(/%s/i,i)},eW.set=function(t){var i,n;for(n in t)s(t,n)&&(S(i=t[n])?this[n]=i:this["_"+n]=i);this._config=t,this._dayOfMonthOrdinalParseLenient=RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},eW.eras=function(t,n){var r,s,o,a=this._eras||tJ("en")._eras;for(r=0,s=a.length;r<s;++r)switch("string"==typeof a[r].since&&(o=i(a[r].since).startOf("day"),a[r].since=o.valueOf()),typeof a[r].until){case"undefined":a[r].until=1/0;break;case"string":o=i(a[r].until).startOf("day").valueOf(),a[r].until=o.valueOf()}return a},eW.erasParse=function(t,i,n){var r,s,o,a,l,A=this.eras();for(r=0,t=t.toUpperCase(),s=A.length;r<s;++r)if(o=A[r].name.toUpperCase(),a=A[r].abbr.toUpperCase(),l=A[r].narrow.toUpperCase(),n)switch(i){case"N":case"NN":case"NNN":if(a===t)return A[r];break;case"NNNN":if(o===t)return A[r];break;case"NNNNN":if(l===t)return A[r]}else if([o,a,l].indexOf(t)>=0)return A[r]},eW.erasConvertYear=function(t,n){var r=t.since<=t.until?1:-1;return void 0===n?i(t.since).year():i(t.since).year()+(n-t.offset)*r},eW.erasAbbrRegex=function(t){return s(this,"_erasAbbrRegex")||ek.call(this),t?this._erasAbbrRegex:this._erasRegex},eW.erasNameRegex=function(t){return s(this,"_erasNameRegex")||ek.call(this),t?this._erasNameRegex:this._erasRegex},eW.erasNarrowRegex=function(t){return s(this,"_erasNarrowRegex")||ek.call(this),t?this._erasNarrowRegex:this._erasRegex},eW.months=function(t,i){return t?n(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||tE).test(i)?"format":"standalone"][t.month()]:n(this._months)?this._months:this._months.standalone},eW.monthsShort=function(t,i){return t?n(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[tE.test(i)?"format":"standalone"][t.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},eW.monthsParse=function(t,i,n){var r,s,o;if(this._monthsParseExact)return tB.call(this,t,i,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=u([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=RegExp(o.replace(".",""),"i")),n&&"MMMM"===i&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===i&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},eW.monthsRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||tL.call(this),t)?this._monthsStrictRegex:this._monthsRegex:(s(this,"_monthsRegex")||(this._monthsRegex=ta),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},eW.monthsShortRegex=function(t){return this._monthsParseExact?(s(this,"_monthsRegex")||tL.call(this),t)?this._monthsShortStrictRegex:this._monthsShortRegex:(s(this,"_monthsShortRegex")||(this._monthsShortRegex=ta),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},eW.week=function(t){return tO(t,this._week.dow,this._week.doy).week},eW.firstDayOfYear=function(){return this._week.doy},eW.firstDayOfWeek=function(){return this._week.dow},eW.weekdays=function(t,i){var r=n(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(i)?"format":"standalone"];return!0===t?tP(r,this._week.dow):t?r[t.day()]:r},eW.weekdaysMin=function(t){return!0===t?tP(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},eW.weekdaysShort=function(t){return!0===t?tP(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},eW.weekdaysParse=function(t,i,n){var r,s,o;if(this._weekdaysParseExact)return tN.call(this,t,i,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=u([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=RegExp(o.replace(".",""),"i")),n&&"dddd"===i&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===i&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===i&&this._minWeekdaysParse[r].test(t))return r;else if(!n&&this._weekdaysParse[r].test(t))return r}},eW.weekdaysRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||tU.call(this),t)?this._weekdaysStrictRegex:this._weekdaysRegex:(s(this,"_weekdaysRegex")||(this._weekdaysRegex=ta),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},eW.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||tU.call(this),t)?this._weekdaysShortStrictRegex:this._weekdaysShortRegex:(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ta),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},eW.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||tU.call(this),t)?this._weekdaysMinStrictRegex:this._weekdaysMinRegex:(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=ta),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},eW.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},eW.meridiem=function(t,i,n){return t>11?n?"pm":"PM":n?"am":"AM"},tX("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var i=t%10,n=1===td(t%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th";return t+n}}),i.lang=x("moment.lang is deprecated. Use moment.locale instead.",tX),i.langData=x("moment.langData is deprecated. Use moment.localeData instead.",tJ);var eX=Math.abs;function eZ(t,i,n,r){var s=eb(i,n);return t._milliseconds+=r*s._milliseconds,t._days+=r*s._days,t._months+=r*s._months,t._bubble()}function eJ(t){return t<0?Math.floor(t):Math.ceil(t)}function e0(t){return 4800*t/146097}function e1(t){return 146097*t/4800}function e2(t){return function(){return this.as(t)}}var e5=e2("ms"),e4=e2("s"),e3=e2("m"),e6=e2("h"),e8=e2("d"),e7=e2("w"),e9=e2("M"),it=e2("Q"),ie=e2("y");function ii(t){return function(){return this.isValid()?this._data[t]:NaN}}var ir=ii("milliseconds"),is=ii("seconds"),io=ii("minutes"),ia=ii("hours"),il=ii("days"),iA=ii("months"),ih=ii("years"),ic=Math.round,iu={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function id(t,i,n,r,s){return s.relativeTime(i||1,!!n,t,r)}var ig=Math.abs;function ip(t){return(t>0)-(t<0)||+t}function im(){if(!this.isValid())return this.localeData().invalidDate();var t,i,n,r,s,o,a,l,A=ig(this._milliseconds)/1e3,h=ig(this._days),c=ig(this._months),u=this.asSeconds();return u?(t=tu(A/60),i=tu(t/60),A%=60,t%=60,n=tu(c/12),c%=12,r=A?A.toFixed(3).replace(/\.?0+$/,""):"",s=u<0?"-":"",o=ip(this._months)!==ip(u)?"-":"",a=ip(this._days)!==ip(u)?"-":"",l=ip(this._milliseconds)!==ip(u)?"-":"",s+"P"+(n?o+n+"Y":"")+(c?o+c+"M":"")+(h?a+h+"D":"")+(i||t||A?"T":"")+(i?l+i+"H":"")+(t?l+t+"M":"")+(A?l+r+"S":"")):"P0D"}var i_=ec.prototype;return i_.isValid=function(){return this._isValid},i_.abs=function(){var t=this._data;return this._milliseconds=eX(this._milliseconds),this._days=eX(this._days),this._months=eX(this._months),t.milliseconds=eX(t.milliseconds),t.seconds=eX(t.seconds),t.minutes=eX(t.minutes),t.hours=eX(t.hours),t.months=eX(t.months),t.years=eX(t.years),this},i_.add=function(t,i){return eZ(this,t,i,1)},i_.subtract=function(t,i){return eZ(this,t,i,-1)},i_.as=function(t){if(!this.isValid())return NaN;var i,n,r=this._milliseconds;if("month"===(t=U(t))||"quarter"===t||"year"===t)switch(i=this._days+r/864e5,n=this._months+e0(i),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(i=this._days+Math.round(e1(this._months)),t){case"week":return i/7+r/6048e5;case"day":return i+r/864e5;case"hour":return 24*i+r/36e5;case"minute":return 1440*i+r/6e4;case"second":return 86400*i+r/1e3;case"millisecond":return Math.floor(864e5*i)+r;default:throw Error("Unknown unit "+t)}},i_.asMilliseconds=e5,i_.asSeconds=e4,i_.asMinutes=e3,i_.asHours=e6,i_.asDays=e8,i_.asWeeks=e7,i_.asMonths=e9,i_.asQuarters=it,i_.asYears=ie,i_.valueOf=e5,i_._bubble=function(){var t,i,n,r,s,o=this._milliseconds,a=this._days,l=this._months,A=this._data;return o>=0&&a>=0&&l>=0||o<=0&&a<=0&&l<=0||(o+=864e5*eJ(e1(l)+a),a=0,l=0),A.milliseconds=o%1e3,A.seconds=(t=tu(o/1e3))%60,A.minutes=(i=tu(t/60))%60,A.hours=(n=tu(i/60))%24,a+=tu(n/24),l+=s=tu(e0(a)),a-=eJ(e1(s)),r=tu(l/12),l%=12,A.days=a,A.months=l,A.years=r,this},i_.clone=function(){return eb(this)},i_.get=function(t){return t=U(t),this.isValid()?this[t+"s"]():NaN},i_.milliseconds=ir,i_.seconds=is,i_.minutes=io,i_.hours=ia,i_.days=il,i_.weeks=function(){return tu(this.days()/7)},i_.months=iA,i_.years=ih,i_.humanize=function(t,i){if(!this.isValid())return this.localeData().invalidDate();var n,r,s,o,a,l,A,h,c,u,d,g,f,p=!1,m=iu;return"object"==typeof t&&(i=t,t=!1),"boolean"==typeof t&&(p=t),"object"==typeof i&&(m=Object.assign({},iu,i),null!=i.s&&null==i.ss&&(m.ss=i.s-1)),g=this.localeData(),n=!p,r=m,s=eb(this).abs(),o=ic(s.as("s")),a=ic(s.as("m")),l=ic(s.as("h")),A=ic(s.as("d")),h=ic(s.as("M")),c=ic(s.as("w")),u=ic(s.as("y")),d=o<=r.ss&&["s",o]||o<r.s&&["ss",o]||a<=1&&["m"]||a<r.m&&["mm",a]||l<=1&&["h"]||l<r.h&&["hh",l]||A<=1&&["d"]||A<r.d&&["dd",A],null!=r.w&&(d=d||c<=1&&["w"]||c<r.w&&["ww",c]),(d=d||h<=1&&["M"]||h<r.M&&["MM",h]||u<=1&&["y"]||["yy",u])[2]=n,d[3]=+this>0,d[4]=g,f=id.apply(null,d),p&&(f=g.pastFuture(+this,f)),g.postformat(f)},i_.toISOString=im,i_.toString=im,i_.toJSON=im,i_.locale=eM,i_.localeData=eR,i_.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",im),i_.lang=eT,D("X",0,0,"unix"),D("x",0,0,"valueOf"),th("x",tr),th("X",/[+-]?\d+(\.\d{1,3})?/),tf("X",function(t,i,n){n._d=new Date(1e3*parseFloat(t))}),tf("x",function(t,i,n){n._d=new Date(td(t))}),i.version="2.30.1",H=eo,i.fn=eK,i.min=function(){var t=[].slice.call(arguments,0);return eA("isBefore",t)},i.max=function(){var t=[].slice.call(arguments,0);return eA("isAfter",t)},i.now=function(){return Date.now?Date.now():+new Date},i.utc=u,i.unix=function(t){return eo(1e3*t)},i.months=function(t,i){return eY(t,i,"months")},i.isDate=A,i.locale=tX,i.invalid=f,i.duration=eb,i.isMoment=b,i.weekdays=function(t,i,n){return eq(t,i,n,"weekdays")},i.parseZone=function(){return eo.apply(null,arguments).parseZone()},i.localeData=tJ,i.isDuration=eu,i.monthsShort=function(t,i){return eY(t,i,"monthsShort")},i.weekdaysMin=function(t,i,n){return eq(t,i,n,"weekdaysMin")},i.defineLocale=tZ,i.updateLocale=function(t,i){if(null!=i){var n,r,s=tj;null!=tW[t]&&null!=tW[t].parentLocale?tW[t].set(I(tW[t]._config,i)):(null!=(r=tq(t))&&(s=r._config),i=I(s,i),null==r&&(i.abbr=t),(n=new L(i)).parentLocale=tW[t],tW[t]=n),tX(t)}else null!=tW[t]&&(null!=tW[t].parentLocale?(tW[t]=tW[t].parentLocale,t===tX()&&tX(t)):null!=tW[t]&&delete tW[t]);return tW[t]},i.locales=function(){return K(tW)},i.weekdaysShort=function(t,i,n){return eq(t,i,n,"weekdaysShort")},i.normalizeUnits=U,i.relativeTimeRounding=function(t){return void 0===t?ic:"function"==typeof t&&(ic=t,!0)},i.relativeTimeThreshold=function(t,i){return void 0!==iu[t]&&(void 0===i?iu[t]:(iu[t]=i,"s"===t&&(iu.ss=i-1),!0))},i.calendarFormat=function(t,i){var n=t.diff(i,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=eK,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()}),L("9zr9G",function(t,i){x(t.exports,"init",()=>c),x(t.exports,"forward",()=>u),x(t.exports,"inverse",()=>d),x(t.exports,"names",()=>g),x(t.exports,"default",()=>f);var n=I("9t3dO"),r=I("zBlxr"),s=I("jU5gu"),o=I("cVtoA"),a=I("klaWo"),l=I("k0stT"),A=I("iKZ74"),h=I("a9oRf");function c(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(n.default.init.apply(this),this.forward=n.default.forward,this.inverse=n.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),i=t/(2-t),r=i;this.cgb[0]=i*(2+i*(-2/3+i*(-2+i*(116/45+i*(26/45+-2854/675*i))))),this.cbg[0]=i*(-2+i*(2/3+i*(4/3+i*(-82/45+i*(32/45+4642/4725*i))))),r*=i,this.cgb[1]=r*(7/3+i*(-1.6+i*(-227/45+i*(2704/315+2323/945*i)))),this.cbg[1]=r*(5/3+i*(-16/15+i*(-13/9+i*(904/315+-1522/945*i)))),r*=i,this.cgb[2]=r*(56/15+i*(-136/35+i*(-1262/105+73814/2835*i))),this.cbg[2]=r*(-26/15+i*(34/21+i*(1.6+-12686/2835*i))),r*=i,this.cgb[3]=r*(4279/630+i*(-332/35+-399572/14175*i)),this.cbg[3]=r*(1237/630+i*(-2.4+-24832/14175*i)),r*=i,this.cgb[4]=r*(4174/315+-144838/6237*i),this.cbg[4]=r*(-734/315+109598/31185*i),r*=i,this.cgb[5]=601676/22275*r,this.cbg[5]=444337/155925*r,r=Math.pow(i,2),this.Qn=this.k0/(1+i)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=i*(-.5+i*(2/3+i*(-37/96+i*(1/360+i*(81/512+-96199/604800*i))))),this.gtu[0]=i*(.5+i*(-2/3+i*(5/16+i*(41/180+i*(-127/288+7891/37800*i))))),this.utg[1]=r*(-1/48+i*(-1/15+i*(437/1440+i*(-46/105+1118711/3870720*i)))),this.gtu[1]=r*(13/48+i*(-.6+i*(557/1440+i*(281/630+-1983433/1935360*i)))),r*=i,this.utg[2]=r*(-17/480+i*(37/840+i*(209/4480+-5569/90720*i))),this.gtu[2]=r*(61/240+i*(-103/140+i*(15061/26880+167603/181440*i))),r*=i,this.utg[3]=r*(-4397/161280+i*(11/504+830251/7257600*i)),this.gtu[3]=r*(49561/161280+i*(-179/168+6601661/7257600*i)),r*=i,this.utg[4]=r*(-4583/161280+108847/3991680*i),this.gtu[4]=r*(34729/80640+-3418889/1995840*i),r*=i,this.utg[5]=-0x13b12f5/0x26115000*r,this.gtu[5]=.6650675310896665*r;var s=(0,a.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(s+(0,l.default)(this.gtu,2*s))}function u(t){var i,n,r=(0,h.default)(t.x-this.long0),l=t.y,c=Math.sin(l=(0,a.default)(this.cbg,l)),u=Math.cos(l),d=Math.sin(r),g=Math.cos(r);l=Math.atan2(c,g*u),r=Math.atan2(d*u,(0,s.default)(c,u*g)),r=(0,o.default)(Math.tan(r));var f=(0,A.default)(this.gtu,2*l,2*r);return l+=f[0],2.623395162778>=Math.abs(r+=f[1])?(i=this.a*(this.Qn*r)+this.x0,n=this.a*(this.Qn*l+this.Zb)+this.y0):(i=1/0,n=1/0),t.x=i,t.y=n,t}function d(t){var i,n,o=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(l=(l-this.Zb)/this.Qn,2.623395162778>=Math.abs(o/=this.Qn)){var c=(0,A.default)(this.utg,2*l,2*o);l+=c[0],o+=c[1],o=Math.atan((0,r.default)(o));var u=Math.sin(l),d=Math.cos(l),g=Math.sin(o),f=Math.cos(o);l=Math.atan2(u*f,(0,s.default)(g,f*d)),o=Math.atan2(g,f*d),i=(0,h.default)(o+this.long0),n=(0,a.default)(this.cgb,l)}else i=1/0,n=1/0;return t.x=i,t.y=n,t}var g=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],f={init:c,forward:u,inverse:d,names:g}}),L("9t3dO",function(t,i){x(t.exports,"default",()=>A);var n=I("gqKpL"),r=I("hpUQm"),s=I("jQUK6"),o=I("a9oRf"),a=I("gyVUi"),l=I("boTd3"),A={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,n.default)(this.es),this.ml0=(0,r.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var i,n,s=t.x,l=t.y,A=(0,o.default)(s-this.long0),h=Math.sin(l),c=Math.cos(l);if(this.es){var u=c*A,d=Math.pow(u,2),g=this.ep2*Math.pow(c,2),f=Math.pow(g,2),p=Math.pow(Math.abs(c)>a.EPSLN?Math.tan(l):0,2),m=Math.pow(p,2);u/=Math.sqrt(1-this.es*Math.pow(h,2));var _=(0,r.default)(l,h,c,this.en);i=this.a*(this.k0*u*(1+d/6*(1-p+g+d/20*(5-18*p+m+14*g-58*p*g+d/42*(61+179*m-m*p-479*p)))))+this.x0,n=this.a*(this.k0*(_-this.ml0+h*A*u/2*(1+d/12*(5-p+9*g+4*f+d/30*(61+m-58*p+270*g-330*p*g+d/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var y=c*Math.sin(A);if(Math.abs(Math.abs(y)-1)<a.EPSLN)return 93;if(i=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,(y=Math.abs(n=c*Math.cos(A)/Math.sqrt(1-Math.pow(y,2))))>=1)if(y-1>a.EPSLN)return 93;else n=0;else n=Math.acos(n);l<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var i,n,r,A,h=(t.x-this.x0)*(1/this.a),c=(t.y-this.y0)*(1/this.a);if(this.es)if(i=this.ml0+c/this.k0,Math.abs(n=(0,s.default)(i,this.es,this.en))<a.HALF_PI){var u=Math.sin(n),d=Math.cos(n),g=Math.abs(d)>a.EPSLN?Math.tan(n):0,f=this.ep2*Math.pow(d,2),p=Math.pow(f,2),m=Math.pow(g,2),_=Math.pow(m,2),y=h*Math.sqrt(i=1-this.es*Math.pow(u,2))/this.k0,w=Math.pow(y,2);i*=g,r=n-i*w/(1-this.es)*.5*(1-w/12*(5+3*m-9*f*m+f-4*p-w/30*(61+90*m-252*f*m+45*_+46*f-w/56*(1385+3633*m+4095*_+1574*_*m)))),A=(0,o.default)(this.long0+y*(1-w/6*(1+2*m+f-w/20*(5+28*m+24*_+8*f*m+6*f-w/42*(61+662*m+1320*_+720*_*m))))/d)}else r=a.HALF_PI*(0,l.default)(c),A=0;else{var v=Math.exp(h/this.k0),b=.5*(v-1/v),C=Math.cos(this.lat0+c/this.k0);r=Math.asin(i=Math.sqrt((1-Math.pow(C,2))/(1+Math.pow(b,2)))),c<0&&(r=-r),A=0===b&&0===C?0:(0,o.default)(Math.atan2(b,C)+this.long0)}return t.x=A,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]}}),L("gqKpL",function(t,i){x(t.exports,"default",()=>n);function n(t){var i=[];i[0]=1-t*(.25+t*(.046875+t*(.01953125+.01068115234375*t))),i[1]=t*(.75-t*(.046875+t*(.01953125+.01068115234375*t)));var n=t*t;return i[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,i[3]=n*(.3645833333333333-.005696614583333333*t),i[4]=n*t*.3076171875,i}}),L("hpUQm",function(t,i){x(t.exports,"default",()=>n);function n(t,i,n,r){return n*=i,i*=i,r[0]*t-n*(r[1]+i*(r[2]+i*(r[3]+i*r[4])))}}),L("jQUK6",function(t,i){x(t.exports,"default",()=>s);var n=I("hpUQm"),r=I("gyVUi");function s(t,i,s){for(var o=1/(1-i),a=t,l=20;l;--l){var A=Math.sin(a),h=1-i*A*A;if(h=((0,n.default)(a,A,Math.cos(a),s)-t)*(h*Math.sqrt(h))*o,a-=h,Math.abs(h)<r.EPSLN)break}return a}}),L("gyVUi",function(t,i){x(t.exports,"PJD_3PARAM",()=>n),x(t.exports,"PJD_7PARAM",()=>r),x(t.exports,"PJD_GRIDSHIFT",()=>s),x(t.exports,"PJD_WGS84",()=>o),x(t.exports,"PJD_NODATUM",()=>a),x(t.exports,"SRS_WGS84_SEMIMAJOR",()=>l),x(t.exports,"SRS_WGS84_SEMIMINOR",()=>A),x(t.exports,"SRS_WGS84_ESQUARED",()=>h),x(t.exports,"SEC_TO_RAD",()=>c),x(t.exports,"HALF_PI",()=>u),x(t.exports,"SIXTH",()=>d),x(t.exports,"RA4",()=>g),x(t.exports,"RA6",()=>f),x(t.exports,"EPSLN",()=>p),x(t.exports,"D2R",()=>m),x(t.exports,"R2D",()=>_),x(t.exports,"FORTPI",()=>y),x(t.exports,"TWO_PI",()=>w),x(t.exports,"SPI",()=>v);var n=1,r=2,s=3,o=4,a=5,l=6378137,A=6356752.314,h=.0066943799901413165,c=484813681109536e-20,u=Math.PI/2,d=.16666666666666666,g=.04722222222222222,f=.022156084656084655,p=1e-10,m=.017453292519943295,_=57.29577951308232,y=Math.PI/4,w=2*Math.PI,v=3.14159265359}),L("a9oRf",function(t,i){x(t.exports,"default",()=>s);var n=I("gyVUi"),r=I("boTd3");function s(t){return Math.abs(t)<=n.SPI?t:t-(0,r.default)(t)*n.TWO_PI}}),L("boTd3",function(t,i){x(t.exports,"default",()=>n);function n(t){return t<0?-1:1}}),L("zBlxr",function(t,i){x(t.exports,"default",()=>n);function n(t){var i=Math.exp(t);return(i-1/i)/2}}),L("jU5gu",function(t,i){x(t.exports,"default",()=>n);function n(t,i){var n=Math.max(t=Math.abs(t),i=Math.abs(i)),r=Math.min(t,i)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}}),L("cVtoA",function(t,i){x(t.exports,"default",()=>s);var n=I("jU5gu"),r=I("g1hBf");function s(t){var i=Math.abs(t);return i=(0,r.default)(i*(1+i/((0,n.default)(1,i)+1))),t<0?-i:i}}),L("g1hBf",function(t,i){x(t.exports,"default",()=>n);function n(t){var i=1+t,n=i-1;return 0===n?t:t*Math.log(i)/n}}),L("klaWo",function(t,i){x(t.exports,"default",()=>n);function n(t,i){for(var n,r=2*Math.cos(2*i),s=t.length-1,o=t[s],a=0;--s>=0;)n=-a+r*o+t[s],a=o,o=n;return i+n*Math.sin(2*i)}}),L("k0stT",function(t,i){x(t.exports,"default",()=>n);function n(t,i){for(var n,r=2*Math.cos(i),s=t.length-1,o=t[s],a=0;--s>=0;)n=-a+r*o+t[s],a=o,o=n;return Math.sin(i)*n}}),L("iKZ74",function(t,i){x(t.exports,"default",()=>s);var n=I("zBlxr"),r=I("cz4ED");function s(t,i,s){for(var o,a,l=Math.sin(i),A=Math.cos(i),h=(0,n.default)(s),c=(0,r.default)(s),u=2*A*c,d=-2*l*h,g=t.length-1,f=t[g],p=0,m=0,_=0;--g>=0;)o=m,a=p,f=-o+u*(m=f)-d*(p=_)+t[g],_=-a+d*m+u*p;return[(u=l*c)*f-(d=A*h)*_,u*_+d*f]}}),L("cz4ED",function(t,i){x(t.exports,"default",()=>n);function n(t){var i=Math.exp(t);return(i+1/i)/2}}),L("llHto",function(t,i){x(t.exports,"ssfn_",()=>A),x(t.exports,"init",()=>h),x(t.exports,"forward",()=>c),x(t.exports,"inverse",()=>u),x(t.exports,"names",()=>d),x(t.exports,"default",()=>g);var n=I("gyVUi"),r=I("boTd3"),s=I("bi5ZC"),o=I("3xC66"),a=I("2AZR8"),l=I("a9oRf");function A(t,i,r){return i*=r,Math.tan(.5*(n.HALF_PI+t))*Math.pow((1-i)/(1+i),.5*r)}function h(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n.EPSLN&&(this.k0=.5*(1+(0,r.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=n.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n.EPSLN&&Math.abs(Math.cos(this.lat_ts))>n.EPSLN&&(this.k0=.5*this.cons*(0,s.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,o.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,s.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-n.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function c(t){var i,r,s,a,A,h,c=t.x,u=t.y,d=Math.sin(u),g=Math.cos(u),f=(0,l.default)(c-this.long0);if(Math.abs(Math.abs(c-this.long0)-Math.PI)<=n.EPSLN&&Math.abs(u+this.lat0)<=n.EPSLN)return t.x=NaN,t.y=NaN,t;if(this.sphere)i=2*this.k0/(1+this.sinlat0*d+this.coslat0*g*Math.cos(f)),t.x=this.a*i*g*Math.sin(f)+this.x0,t.y=this.a*i*(this.coslat0*d-this.sinlat0*g*Math.cos(f))+this.y0;else{if(a=Math.cos(r=2*Math.atan(this.ssfn_(u,d,this.e))-n.HALF_PI),s=Math.sin(r),Math.abs(this.coslat0)<=n.EPSLN)return A=(0,o.default)(this.e,u*this.con,this.con*d),h=2*this.a*this.k0*A/this.cons,t.x=this.x0+h*Math.sin(c-this.long0),t.y=this.y0-this.con*h*Math.cos(c-this.long0),t;Math.abs(this.sinlat0)<n.EPSLN?t.y=(i=2*this.a*this.k0/(1+a*Math.cos(f)))*s:t.y=(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*a*Math.cos(f))))*(this.cosX0*s-this.sinX0*a*Math.cos(f))+this.y0,t.x=i*a*Math.sin(f)+this.x0}return t}function u(t){t.x-=this.x0,t.y-=this.y0;var i,r,s,o,A,h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(h/(2*this.a*this.k0));return i=this.long0,r=this.lat0,h<=n.EPSLN||(r=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/h),i=Math.abs(this.coslat0)<n.EPSLN?this.lat0>0?(0,l.default)(this.long0+Math.atan2(t.x,-1*t.y)):(0,l.default)(this.long0+Math.atan2(t.x,t.y)):(0,l.default)(this.long0+Math.atan2(t.x*Math.sin(c),h*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c)))),t.x=i,t.y=r,t}if(Math.abs(this.coslat0)<=n.EPSLN){if(h<=n.EPSLN)return r=this.lat0,t.x=i=this.long0,t.y=r,t;t.x*=this.con,t.y*=this.con,s=h*this.cons/(2*this.a*this.k0),r=this.con*(0,a.default)(this.e,s),i=this.con*(0,l.default)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,h<=n.EPSLN?A=this.X0:(A=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/h),i=(0,l.default)(this.long0+Math.atan2(t.x*Math.sin(o),h*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*(0,a.default)(this.e,Math.tan(.5*(n.HALF_PI+A)));return t.x=i,t.y=r,t}var d=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],g={init:h,forward:c,inverse:u,names:d,ssfn_:A}}),L("bi5ZC",function(t,i){x(t.exports,"default",()=>n);function n(t,i,n){var r=t*i;return n/Math.sqrt(1-r*r)}}),L("3xC66",function(t,i){x(t.exports,"default",()=>r);var n=I("gyVUi");function r(t,i,r){var s=t*r;return s=Math.pow((1-s)/(1+s),.5*t),Math.tan(.5*(n.HALF_PI-i))/s}}),L("2AZR8",function(t,i){x(t.exports,"default",()=>r);var n=I("gyVUi");function r(t,i){for(var r,s,o=.5*t,a=n.HALF_PI-2*Math.atan(i),l=0;l<=15;l++)if(r=t*Math.sin(a),s=n.HALF_PI-2*Math.atan(i*Math.pow((1-r)/(1+r),o))-a,a+=s,1e-10>=Math.abs(s))return a;return -9999}}),L("deudM",function(t,i){x(t.exports,"S_POLE",()=>o),x(t.exports,"N_POLE",()=>a),x(t.exports,"EQUIT",()=>l),x(t.exports,"OBLIQ",()=>A),x(t.exports,"init",()=>h),x(t.exports,"forward",()=>c),x(t.exports,"inverse",()=>u),x(t.exports,"names",()=>d),x(t.exports,"default",()=>g);var n=I("gyVUi"),r=I("874JP"),s=I("a9oRf"),o=1,a=2,l=3,A=4;function h(){var t,i,s,o,a=Math.abs(this.lat0);if(Math.abs(a-n.HALF_PI)<n.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<n.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){switch(this.qp=(0,r.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=(t=this.es,(s=[])[0]=.3333333333333333*t,i=t*t,s[0]+=.17222222222222222*i,s[1]=.06388888888888888*i,i*=t,s[0]+=.10257936507936508*i,s[1]+=.0664021164021164*i,s[2]=.016415012942191543*i,s),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),o=Math.sin(this.lat0),this.sinb1=(0,r.default)(this.e,o)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*o*o)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function c(t){var i,o,a,l,A,h,c,u,d,g,f=t.x,p=t.y;if(f=(0,s.default)(f-this.long0),this.sphere){if(A=Math.sin(p),g=Math.cos(p),a=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((o=this.mode===this.EQUIT?1+g*a:1+this.sinph0*A+this.cosph0*g*a)<=n.EPSLN)return null;i=(o=Math.sqrt(2/o))*g*Math.sin(f),o*=this.mode===this.EQUIT?A:this.cosph0*A-this.sinph0*g*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(p+this.lat0)<n.EPSLN)return null;o=n.FORTPI-.5*p,i=(o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)))*Math.sin(f),o*=a}}else{switch(c=0,u=0,d=0,a=Math.cos(f),l=Math.sin(f),A=Math.sin(p),h=(0,r.default)(this.e,A),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(u=Math.sqrt(1-(c=h/this.qp)*c)),this.mode){case this.OBLIQ:d=1+this.sinb1*c+this.cosb1*u*a;break;case this.EQUIT:d=1+u*a;break;case this.N_POLE:d=n.HALF_PI+p,h=this.qp-h;break;case this.S_POLE:d=p-n.HALF_PI,h=this.qp+h}if(Math.abs(d)<n.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),o=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*c-this.sinb1*u*a):(d=Math.sqrt(2/(1+u*a)))*c*this.ymf,i=this.xmf*d*u*l;break;case this.N_POLE:case this.S_POLE:h>=0?(i=(d=Math.sqrt(h))*l,o=a*(this.mode===this.S_POLE?d:-d)):i=o=0}}return t.x=this.a*i+this.x0,t.y=this.a*o+this.y0,t}function u(t){t.x-=this.x0,t.y-=this.y0;var i,r,o,a=t.x/this.a,l=t.y/this.a;if(this.sphere){var A,h,c,u,d,g,f,p,m=0,_=0;if((h=.5*(p=Math.sqrt(a*a+l*l)))>1)return null;switch(h=2*Math.asin(h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(h),m=Math.cos(h)),this.mode){case this.EQUIT:h=Math.abs(p)<=n.EPSLN?0:Math.asin(l*_/p),a*=_,l=m*p;break;case this.OBLIQ:h=Math.abs(p)<=n.EPSLN?this.lat0:Math.asin(m*this.sinph0+l*_*this.cosph0/p),a*=_*this.cosph0,l=(m-Math.sin(h)*this.sinph0)*p;break;case this.N_POLE:l=-l,h=n.HALF_PI-h;break;case this.S_POLE:h-=n.HALF_PI}A=0===l&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(a,l)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a/=this.dd,l*=this.dd,(g=Math.sqrt(a*a+l*l))<n.EPSLN)return t.x=this.long0,t.y=this.lat0,t;c=Math.cos(u=2*Math.asin(.5*g/this.rq)),a*=u=Math.sin(u),this.mode===this.OBLIQ?(f=c*this.sinb1+l*u*this.cosb1/g,d=this.qp*f,l=g*this.cosb1*c-l*this.sinb1*u):(f=l*u/g,d=this.qp*f,l=g*c)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(d=a*a+l*l))return t.x=this.long0,t.y=this.lat0,t;f=1-d/this.qp,this.mode===this.S_POLE&&(f=-f)}A=Math.atan2(a,l),i=Math.asin(f),r=this.apa,o=i+i,h=i+r[0]*Math.sin(o)+r[1]*Math.sin(o+o)+r[2]*Math.sin(o+o+o)}return t.x=(0,s.default)(this.long0+A),t.y=h,t}var d=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],g={init:h,forward:c,inverse:u,names:d,S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}}),L("874JP",function(t,i){x(t.exports,"default",()=>n);function n(t,i){var n;return t>1e-7?(n=t*i,(1-t*t)*(i/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*i}}),L("8mhgZ",function(t,i){x(t.exports,"init",()=>l),x(t.exports,"forward",()=>A),x(t.exports,"inverse",()=>h),x(t.exports,"phi1z",()=>c),x(t.exports,"names",()=>u),x(t.exports,"default",()=>d);var n=I("bi5ZC"),r=I("874JP"),s=I("a9oRf"),o=I("ljPJJ"),a=I("gyVUi");function l(){Math.abs(this.lat1+this.lat2)<a.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,n.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,r.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,n.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,r.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,r.default)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>a.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function A(t){var i=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var o=(0,r.default)(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,l=this.ns0*(0,s.default)(i-this.long0),A=a*Math.sin(l)+this.x0,h=this.rh-a*Math.cos(l)+this.y0;return t.x=A,t.y=h,t}function h(t){var i,n,r,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),o=0,0!==i&&(o=Math.atan2(r*t.x,r*t.y)),r=i*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),t.x=(0,s.default)(o/this.ns0+this.long0),t.y=a,t}function c(t,i){var n,r,s,l,A,h=(0,o.default)(.5*i);if(t<a.EPSLN)return h;for(var c=t*t,u=1;u<=25;u++)if(n=Math.sin(h),r=Math.cos(h),h+=A=.5*(l=1-(s=t*n)*s)*l/r*(i/(1-c)-n/l+.5/t*Math.log((1-s)/(1+s))),1e-7>=Math.abs(A))return h;return null}var u=["Albers_Conic_Equal_Area","Albers","aea"],d={init:l,forward:A,inverse:h,names:u,phi1z:c}}),L("ljPJJ",function(t,i){x(t.exports,"default",()=>n);function n(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}}),L("6Eu1X",function(t,i){x(t.exports,"iterations",()=>r),x(t.exports,"init",()=>s),x(t.exports,"forward",()=>o),x(t.exports,"inverse",()=>a),x(t.exports,"names",()=>l),x(t.exports,"default",()=>A);var n=I("gyVUi"),r=1;function s(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function o(t){var i,r,s,o=t.x,a=t.y-this.lat0,l=o-this.long0,A=a/n.SEC_TO_RAD*1e-5,h=1,c=0;for(i=1;i<=10;i++)h*=A,c+=this.A[i]*h;var u=c,d=1,g=0,f=0,p=0;for(i=1;i<=6;i++)r=d*u-g*l,s=g*u+d*l,d=r,g=s,f=f+this.B_re[i]*d-this.B_im[i]*g,p=p+this.B_im[i]*d+this.B_re[i]*g;return t.x=p*this.a+this.x0,t.y=f*this.a+this.y0,t}function a(t){var i=t.x,r=t.y,s=i-this.x0,o=(r-this.y0)/this.a,a=s/this.a,l=1,A=0,h=0,c=0;for(d=1;d<=6;d++)g=l*o-A*a,f=A*o+l*a,l=g,A=f,h=h+this.C_re[d]*l-this.C_im[d]*A,c=c+this.C_im[d]*l+this.C_re[d]*A;for(var u=0;u<this.iterations;u++){var d,g,f,p,m,_=h,y=c,w=o,v=a;for(d=2;d<=6;d++)p=_*h-y*c,m=y*h+_*c,_=p,y=m,w+=(d-1)*(this.B_re[d]*_-this.B_im[d]*y),v+=(d-1)*(this.B_im[d]*_+this.B_re[d]*y);_=1,y=0;var b=this.B_re[1],C=this.B_im[1];for(d=2;d<=6;d++)p=_*h-y*c,m=y*h+_*c,_=p,y=m,b+=d*(this.B_re[d]*_-this.B_im[d]*y),C+=d*(this.B_im[d]*_+this.B_re[d]*y);var x=b*b+C*C;h=(w*b+v*C)/x,c=(v*b-w*C)/x}var E=h,B=c,S=1,I=0;for(d=1;d<=9;d++)S*=E,I+=this.D[d]*S;var L=this.lat0+I*n.SEC_TO_RAD*1e5;return t.x=this.long0+B,t.y=L,t}var l=["New_Zealand_Map_Grid","nzmg"],A={init:s,forward:o,inverse:a,names:l}});var F={ADD:"add",REMOVE:"remove"},M={PROPERTYCHANGE:"propertychange"},T={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"},R=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function O(t,i){return t>i?1:t<i?-1:0}function D(t,i){return t<i?1:t>i?-1:0}function P(t,i,n){if(t[0]<=i)return 0;let r=t.length;if(i<=t[r-1])return r-1;if("function"==typeof n){for(let s=1;s<r;++s){let r=t[s];if(r===i)return s;if(r<i){if(n(i,t[s-1],r)>0)return s-1;return s}}return r-1}if(n>0){for(let n=1;n<r;++n)if(t[n]<i)return n-1;return r-1}if(n<0){for(let n=1;n<r;++n)if(t[n]<=i)return n;return r-1}for(let n=1;n<r;++n){if(t[n]==i)return n;if(t[n]<i){if(t[n-1]-i<i-t[n])return n-1;return n}}return r-1}function k(t,i){let n=Array.isArray(i)?i:[i],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function N(t,i){let n=t.length;if(n!==i.length)return!1;for(let r=0;r<n;r++)if(t[r]!==i[r])return!1;return!0}function U(){return!0}function Q(){return!1}function H(){}function G(t){let i,n,r;return function(){let s=Array.prototype.slice.call(arguments);return n&&this===r&&N(s,n)||(r=this,n=s,i=t.apply(this,arguments)),i}}function V(t){for(let i in t)delete t[i]}function z(t){let i;for(i in t)return!1;return!i}var K=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},j=class extends R{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,i){if(!t||!i)return;let n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);r.includes(i)||r.push(i)}dispatchEvent(t){let i,n="string"==typeof t,r=n?t:t.type,s=this.listeners_&&this.listeners_[r];if(!s)return;let o=n?new K(t):t;o.target||(o.target=this.eventTarget_||this);let a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,l[r]=0),++a[r];for(let t=0,n=s.length;t<n;++t)if(!1===(i="handleEvent"in s[t]?s[t].handleEvent(o):s[t].call(this,o))||o.propagationStopped){i=!1;break}if(0==--a[r]){let t=l[r];for(delete l[r];t--;)this.removeEventListener(r,H);delete a[r]}return i}disposeInternal(){this.listeners_&&V(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,i){if(!this.listeners_)return;let n=this.listeners_[t];if(!n)return;let r=n.indexOf(i);-1!==r&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=H,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}};function W(t,i,n,r,s){if(s){let s=n;n=function(o){return t.removeEventListener(i,n),s.call(r??this,o)}}else r&&r!==t&&(n=n.bind(r));let o={target:t,type:i,listener:n};return t.addEventListener(i,n),o}function $(t,i,n,r){return W(t,i,n,r,!0)}function Y(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),V(t))}class q extends j{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(T.CHANGE)}getRevision(){return this.revision_}onInternal(t,i){if(Array.isArray(t)){let n=t.length,r=Array(n);for(let s=0;s<n;++s)r[s]=W(this,t[s],i);return r}return W(this,t,i)}onceInternal(t,i){let n;if(Array.isArray(t)){let r=t.length;n=Array(r);for(let s=0;s<r;++s)n[s]=$(this,t[s],i)}else n=$(this,t,i);return i.ol_key=n,n}unInternal(t,i){let n=i.ol_key;if(n)X(n);else if(Array.isArray(t))for(let n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],i);else this.removeEventListener(t,i)}}function X(t){if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)Y(t[i]);else Y(t)}q.prototype.on,q.prototype.once,q.prototype.un;var Z=q;function J(){throw Error("Unimplemented abstract method.")}let tt=0;function te(t){return t.ol_uid||(t.ol_uid=String(++tt))}class ti extends K{constructor(t,i,n){super(t),this.key=i,this.oldValue=n}}var tn=class extends Z{constructor(t){super(),this.on,this.once,this.un,te(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let i;return this.values_&&this.values_.hasOwnProperty(t)&&(i=this.values_[t]),i}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,i){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new ti(n,t,i)),n=M.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new ti(n,t,i))}addChangeListener(t,i){this.addEventListener(`change:${t}`,i)}removeChangeListener(t,i){this.removeEventListener(`change:${t}`,i)}set(t,i,n){let r=this.values_||(this.values_={});if(n)r[t]=i;else{let n=r[t];r[t]=i,n!==i&&this.notify(t,n)}}setProperties(t,i){for(let n in t)this.set(n,t[n],i)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,i){if(this.values_&&t in this.values_){let n=this.values_[t];delete this.values_[t],z(this.values_)&&(this.values_=null),i||this.notify(t,n)}}};const tr="length";class ts extends K{constructor(t,i,n){super(t),this.element=i,this.index=n}}var to=class extends tn{constructor(t,i){if(super(),this.on,this.once,this.un,i=i||{},this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(let t=0,i=this.array_.length;t<i;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let i=0,n=t.length;i<n;++i)this.push(t[i]);return this}forEach(t){let i=this.array_;for(let n=0,r=i.length;n<r;++n)t(i[n],n,i)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(tr)}insertAt(t,i){if(t<0||t>this.getLength())throw Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i),this.array_.splice(t,0,i),this.updateLength_(),this.dispatchEvent(new ts(F.ADD,i,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);let i=this.getLength();return this.insertAt(i,t),this.getLength()}remove(t){let i=this.array_;for(let n=0,r=i.length;n<r;++n)if(i[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;let i=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ts(F.REMOVE,i,t)),i}setAt(t,i){if(t>=this.getLength())return void this.insertAt(t,i);if(t<0)throw Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(i,t);let n=this.array_[t];this.array_[t]=i,this.dispatchEvent(new ts(F.REMOVE,n,t)),this.dispatchEvent(new ts(F.ADD,i,t))}updateLength_(){this.set(tr,this.array_.length)}assertUnique_(t,i){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==i)throw Error("Duplicate item added to a unique collection")}},ta=class extends K{constructor(t,i,n){super(t),this.map=i,this.frameState=void 0!==n?n:null}},tl=class extends ta{constructor(t,i,n,r,s,o){super(t,i,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==r&&r,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},tA={SINGLECLICK:"singleclick",CLICK:T.CLICK,DBLCLICK:T.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};const th="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";th.includes("safari")&&!th.includes("chrom")&&(th.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(th));const tc=th.includes("webkit")&&!th.includes("edge"),tu=th.includes("macintosh"),td="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,tg="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,tf="undefined"!=typeof Image&&Image.prototype.decode,tp=function(){let t=!1;try{let i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,i),window.removeEventListener("_",null,i)}catch{}return t}();var tm={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"},t_=class extends j{constructor(t,i){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===i?1:i,this.down_=null;let n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=W(n,tm.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=W(n,tm.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(T.TOUCHMOVE,this.boundHandleTouchMove_,!!tp&&{passive:!1})}emulateClick_(t){let i=new tl(tA.CLICK,this.map_,t);this.dispatchEvent(i),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new tl(tA.DBLCLICK,this.map_,t),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let i=new tl(tA.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){let i=t.pointerId;if(t.type==tA.POINTERUP||t.type==tA.POINTERCANCEL){for(let n in delete this.trackedTouches_[i],this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==tA.POINTERDOWN||t.type==tA.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);let i=new tl(tA.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(i),this.emulateClicks_&&!i.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Y),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);let i=new tl(tA.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(i),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){let t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(W(t,tA.POINTERMOVE,this.handlePointerMove_,this),W(t,tA.POINTERUP,this.handlePointerUp_,this),W(this.element_,tA.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(W(this.element_.getRootNode(),tA.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;let i=new tl(tA.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(i)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;let i=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new tl(tA.POINTERMOVE,this.map_,t,i))}handleTouchMove_(t){let i=this.originalPointerMoveEvent_;(!i||i.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Y(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(T.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Y(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Y),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},ty={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},tw={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},tv={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function tb(t,i){if(!t)throw Error(i)}const tC=1/0;var tx=class{constructor(t,i){this.priorityFunction_=t,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,V(this.queuedElements_)}dequeue(){let t=this.elements_,i=this.priorities_,n=t[0];1==t.length?(t.length=0,i.length=0):(t[0]=t.pop(),i[0]=i.pop(),this.siftUp_(0));let r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(t){tb(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let i=this.priorityFunction_(t);return i!=tC&&(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){let i=this.elements_,n=this.priorities_,r=i.length,s=i[t],o=n[t],a=t;for(;t<r>>1;){let s=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),a=o<r&&n[o]<n[s]?o:s;i[t]=i[a],n[t]=n[a],t=a}i[t]=s,n[t]=o,this.siftDown_(a,t)}siftDown_(t,i){let n=this.elements_,r=this.priorities_,s=n[i],o=r[i];for(;i>t;){let t=this.getParentIndex_(i);if(r[t]>o)n[i]=n[t],r[i]=r[t],i=t;else break}n[i]=s,r[i]=o}reprioritize(){let t,i,n,r=this.priorityFunction_,s=this.elements_,o=this.priorities_,a=0,l=s.length;for(i=0;i<l;++i)(n=r(t=s[i]))==tC?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,s[a++]=t);s.length=a,o.length=a,this.heapify_()}},tE=class extends tx{constructor(t,i){super(i=>t.apply(null,i),t=>t[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){let i=super.enqueue(t);return i&&t[0].addEventListener(T.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){let i=t.target,n=i.getState();if(n===tv.LOADED||n===tv.ERROR||n===tv.EMPTY){n!==tv.ERROR&&i.removeEventListener(T.CHANGE,this.boundHandleTileChange_);let t=i.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,i){let n=0;for(;this.tilesLoading_<t&&n<i&&this.getCount()>0;){let t=this.dequeue()[0],i=t.getKey();t.getState()!==tv.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++n,t.load())}}},tB={ANIMATING:0,INTERACTING:1},tS={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function tI(t,i,n){return Math.min(Math.max(t,i),n)}function tL(t,i,n,r,s,o){let a=s-n,l=o-r;if(0!==a||0!==l){let A=((t-n)*a+(i-r)*l)/(a*a+l*l);A>1?(n=s,r=o):A>0&&(n+=a*A,r+=l*A)}return tF(t,i,n,r)}function tF(t,i,n,r){let s=n-t,o=r-i;return s*s+o*o}function tM(t){return 180*t/Math.PI}function tT(t){return t*Math.PI/180}function tR(t,i){let n=t%i;return n*i<0?n+i:n}function tO(t,i){let n=Math.pow(10,i);return Math.round(t*n)/n}function tD(t,i){return Math.round(tO(t,i))}function tP(t,i){return Math.floor(tO(t,i))}function tk(t,i){return Math.ceil(tO(t,i))}function tN(t,i,n){if(t>=i&&t<n)return t;let r=n-i;return((t-i)%r+r)%r+i}function tU(t,i,n){return function(r,s,o,a,l){if(!r)return;if(!s&&!i)return r;let A=i?0:o[0]*s,h=i?0:o[1]*s,c=l?l[0]:0,u=l?l[1]:0,d=t[0]+A/2+c,g=t[2]-A/2+c,f=t[1]+h/2+u,p=t[3]-h/2+u;d>g&&(g=d=(g+d)/2),f>p&&(p=f=(p+f)/2);let m=tI(r[0],d,g),_=tI(r[1],f,p);if(a&&n&&s){let t=30*s;m+=-t*Math.log(1+Math.max(0,d-r[0])/t)+t*Math.log(1+Math.max(0,r[0]-g)/t),_+=-t*Math.log(1+Math.max(0,f-r[1])/t)+t*Math.log(1+Math.max(0,r[1]-p)/t)}return[m,_]}}function tQ(t){return t}var tH={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function tG(t){let i=tq();for(let n=0,r=t.length;n<r;++n)t2(i,t[n]);return i}function tV(t,i,n){return n?(n[0]=t[0]-i,n[1]=t[1]-i,n[2]=t[2]+i,n[3]=t[3]+i,n):[t[0]-i,t[1]-i,t[2]+i,t[3]+i]}function tz(t,i){return i?(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i):t.slice()}function tK(t,i,n){let r,s;return(r=i<t[0]?t[0]-i:t[2]<i?i-t[2]:0)*r+(s=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*s}function tj(t,i){return t$(t,i[0],i[1])}function tW(t,i){return t[0]<=i[0]&&i[2]<=t[2]&&t[1]<=i[1]&&i[3]<=t[3]}function t$(t,i,n){return t[0]<=i&&i<=t[2]&&t[1]<=n&&n<=t[3]}function tY(t,i){let n=t[0],r=t[1],s=t[2],o=t[3],a=i[0],l=i[1],A=tH.UNKNOWN;return a<n?A|=tH.LEFT:a>s&&(A|=tH.RIGHT),l<r?A|=tH.BELOW:l>o&&(A|=tH.ABOVE),A===tH.UNKNOWN&&(A=tH.INTERSECTING),A}function tq(){return[1/0,1/0,-1/0,-1/0]}function tX(t,i,n,r,s){return s?(s[0]=t,s[1]=i,s[2]=n,s[3]=r,s):[t,i,n,r]}function tZ(t){return tX(1/0,1/0,-1/0,-1/0,t)}function tJ(t,i){let n=t[0],r=t[1];return tX(n,r,n,r,i)}function t0(t,i){return t[0]==i[0]&&t[2]==i[2]&&t[1]==i[1]&&t[3]==i[3]}function t1(t,i){return i[0]<t[0]&&(t[0]=i[0]),i[2]>t[2]&&(t[2]=i[2]),i[1]<t[1]&&(t[1]=i[1]),i[3]>t[3]&&(t[3]=i[3]),t}function t2(t,i){i[0]<t[0]&&(t[0]=i[0]),i[0]>t[2]&&(t[2]=i[0]),i[1]<t[1]&&(t[1]=i[1]),i[1]>t[3]&&(t[3]=i[1])}function t5(t,i,n,r,s){for(;n<r;n+=s){var o,a,l;o=t,a=i[n],l=i[n+1],o[0]=Math.min(o[0],a),o[1]=Math.min(o[1],l),o[2]=Math.max(o[2],a),o[3]=Math.max(o[3],l)}return t}function t4(t,i){let n;return!!((n=i(t6(t)))||(n=i(t8(t)))||(n=i(er(t)))||(n=i(en(t))))&&n}function t3(t){let i=0;return ea(t)||(i=es(t)*ee(t)),i}function t6(t){return[t[0],t[1]]}function t8(t){return[t[2],t[1]]}function t7(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function t9(t,i,n,r,s){let[o,a,l,A,h,c,u,d]=et(t,i,n,r);return tX(Math.min(o,l,h,u),Math.min(a,A,c,d),Math.max(o,l,h,u),Math.max(a,A,c,d),s)}function et(t,i,n,r){let s=i*r[0]/2,o=i*r[1]/2,a=Math.cos(n),l=Math.sin(n),A=s*a,h=s*l,c=o*a,u=o*l,d=t[0],g=t[1];return[d-A+u,g-h-c,d-A-u,g-h+c,d+A-u,g+h+c,d+A+u,g+h-c,d-A+u,g-h-c]}function ee(t){return t[3]-t[1]}function ei(t,i,n){let r=n||tq();return eo(t,i)?(t[0]>i[0]?r[0]=t[0]:r[0]=i[0],t[1]>i[1]?r[1]=t[1]:r[1]=i[1],t[2]<i[2]?r[2]=t[2]:r[2]=i[2],t[3]<i[3]?r[3]=t[3]:r[3]=i[3]):tZ(r),r}function en(t){return[t[0],t[3]]}function er(t){return[t[2],t[3]]}function es(t){return t[2]-t[0]}function eo(t,i){return t[0]<=i[2]&&t[2]>=i[0]&&t[1]<=i[3]&&t[3]>=i[1]}function ea(t){return t[2]<t[0]||t[3]<t[1]}function el(t,i,n,r){if(ea(t))return tZ(n);let s=[];if(r>1){let i=t[2]-t[0],n=t[3]-t[1];for(let o=0;o<r;++o)s.push(t[0]+i*o/r,t[1],t[2],t[1]+n*o/r,t[2]-i*o/r,t[3],t[0],t[3]-n*o/r)}else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];i(s,s,2);let o=[],a=[];for(let t=0,i=s.length;t<i;t+=2)o.push(s[t]),a.push(s[t+1]);let l=Math.min.apply(null,o);return tX(l,Math.min.apply(null,a),Math.max.apply(null,o),Math.max.apply(null,a),n)}function eA(t,i){let n=i.getExtent(),r=t7(t);if(i.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){let i=es(n),s=Math.floor((r[0]-n[0])/i)*i;t[0]-=s,t[2]-=s}return t}function eh(t,i,n){if(i.canWrapX()){let r=i.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];eA(t,i);let s=es(r);if(es(t)>s&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+s,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-s,t[3]]]}return[t]}function ec(t,i,n){let r=void 0!==n?t.toFixed(n):""+t,s=r.indexOf(".");return(s=-1===s?r.length:s)>i?r:Array(1+i-s).join("0")+r}function eu(t,i){let n=(""+t).split("."),r=(""+i).split(".");for(let t=0;t<Math.max(n.length,r.length);t++){let i=parseInt(n[t]||"0",10),s=parseInt(r[t]||"0",10);if(i>s)return 1;if(s>i)return -1}return 0}function ed(t,i){let n,r,s=t[0],o=t[1],a=i[0],l=i[1],A=a[0],h=a[1],c=l[0],u=l[1],d=c-A,g=u-h,f=0===d&&0===g?0:(d*(s-A)+g*(o-h))/(d*d+g*g||0);return f<=0?(n=A,r=h):f>=1?(n=c,r=u):(n=A+f*d,r=h+f*g),[n,r]}function eg(t,i,n){let r=tR(i+180,360)-180,s=Math.abs(3600*r),o=n||0,a=Math.floor(s/3600),l=Math.floor((s-3600*a)/60),A=tO(s-3600*a-60*l,o);A>=60&&(A=0,l+=1),l>=60&&(l=0,a+=1);let h=a+"°";return(0!==l||0!==A)&&(h+=" "+ec(l,2)+"′"),0!==A&&(h+=" "+ec(A,2,o)+"″"),0!==r&&(h+=" "+t.charAt(+(r<0))),h}function ef(t,i){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=i[r]){n=!1;break}return n}function ep(t,i){let n=Math.cos(i),r=Math.sin(i),s=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=s,t[1]=o,t}function em(t,i){let n=t[0]-i[0],r=t[1]-i[1];return n*n+r*r}function e_(t,i){return Math.sqrt(em(t,i))}function ey(t,i){return t?eg("NS",t[1],i)+" "+eg("EW",t[0],i):""}function ew(t,i){if(i.canWrapX()){let n=es(i.getExtent()),r=ev(t,i,n);r&&(t[0]-=r*n)}return t}function ev(t,i,n){let r=i.getExtent(),s=0;return i.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||es(r),s=Math.floor((t[0]-r[0])/n)),s}function eb(t){return Math.pow(t,3)}function eC(t){return 1-eb(1-t)}function ex(t){return 3*t*t-2*t*t*t}function eE(t){return t}function eB(t,i,n){n=n||6371008.8;let r=tT(t[1]),s=tT(i[1]),o=(s-r)/2,a=tT(i[0]-t[0])/2,l=Math.sin(o)*Math.sin(o)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function eS(t,i){let n=0;for(let r=0,s=t.length;r<s-1;++r)n+=eB(t[r],t[r+1],i);return n}function eI(t,i){let n=0,r=t.length,s=t[r-1][0],o=t[r-1][1];for(let i=0;i<r;i++){let r=t[i][0],a=t[i][1];n+=tT(r-s)*(2+Math.sin(tT(o))+Math.sin(tT(a))),s=r,o=a}return n*i*i/2}function eL(...t){console.warn(...t)}const eF={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var eM=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||eF[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const eT=6378137*Math.PI,eR=[-eT,-eT,eT,eT],eO=[-180,-85,180,85],eD=6378137*Math.log(Math.tan(Math.PI/2));class eP extends eM{constructor(t){super({code:t,units:"m",extent:eR,global:!0,worldExtent:eO,getPointResolution:function(t,i){return t/Math.cosh(i[1]/6378137)}})}}const ek=[new eP("EPSG:3857"),new eP("EPSG:102100"),new eP("EPSG:102113"),new eP("EPSG:900913"),new eP("http://www.opengis.net/def/crs/EPSG/0/3857"),new eP("http://www.opengis.net/gml/srs/epsg.xml#3857")],eN=[-180,-90,180,90],eU=6378137*Math.PI/180;class eQ extends eM{constructor(t,i){super({code:t,units:"degrees",extent:eN,axisOrientation:i,global:!0,metersPerUnit:eU,worldExtent:eN})}}const eH=[new eQ("CRS:84"),new eQ("EPSG:4326","neu"),new eQ("urn:ogc:def:crs:OGC:1.3:CRS84"),new eQ("urn:ogc:def:crs:OGC:2:84"),new eQ("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new eQ("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new eQ("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let eG={};function eV(t){return eG[t]||eG[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}let ez={};function eK(t,i,n){let r=t.getCode(),s=i.getCode();r in ez||(ez[r]={}),ez[r][s]=n}function ej(t,i){return t in ez&&i in ez[t]?ez[t][i]:null}const eW=Math.sqrt(.99330562),e$=(1-eW)/(1+eW),eY=e$*e$,eq=eY*e$,eX=eq*e$,eZ=eX*e$,eJ=1.5*e$-27/32*eq+269/512*eZ,e0=21/16*eY-55/32*eX,e1=151/96*eq-417/128*eZ,e2=1097/512*eX;function e5(t,i,n){let r=(n.north?i:i-1e7)/.9996/6367449.145945056,s=r+eJ*Math.sin(2*r)+e0*Math.sin(4*r)+e1*Math.sin(6*r)+e2*Math.sin(8*r),o=Math.sin(s),a=o*o,l=Math.cos(s),A=o/l,h=A*A,c=h*h,u=.006739496752268451*l**2,d=u*u,g=(t-5e5)/(6378137/Math.sqrt(1-.00669438*a)*.9996),f=g*g,p=f*g,m=p*g,_=m*g,y=s-A/(.99330562/(1-.00669438*a))*(f/2-m/24*(5+3*h+10*u-4*d-.06065547077041606))+_*g/720*(61+90*h+298*u+45*c-1.6983531815716497-3*d),w=(g-p/6*(1+2*h+u)+_/120*(5-2*u+28*h-3*d+.05391597401814761+24*c))/l;return[tM(w=tN(w+tT(e3(n.number)),-Math.PI,Math.PI)),tM(y)]}function e4(t,i,n){t=tN(t,-180,180),i<-80?i=-80:i>84&&(i=84);let r=tT(i),s=Math.sin(r),o=Math.cos(r),a=s/o,l=a*a,A=l*l,h=tT(t),c=tT(e3(n.number)),u=6378137/Math.sqrt(1-.00669438*s**2),d=.006739496752268451*o**2,g=o*tN(h-c,-Math.PI,Math.PI),f=g*g,p=f*g,m=p*g,_=m*g,y=.9996*u*(g+p/6*(1-l+d)+_/120*(5-18*l+A+72*d-.39089081163157013))+5e5,w=.9996*(6378137*(.9983242984503243*r-.002514607064228144*Math.sin(2*r)+26390466021299826e-22*Math.sin(4*r)-3418046101696858e-24*Math.sin(6*r))+u*a*(f/2+m/24*(5-l+9*d+4*d**2)+_*g/720*(61-58*l+A+600*d-2.2240339282485886)));return n.north||(w+=1e7),[y,w]}function e3(t){return(t-1)*6-180+3}const e6=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function e8(t){let i=0;for(let n of e6){let r=t.match(n);if(r){i=parseInt(r[1]);break}}if(!i)return null;let n=0,r=!1;return(i>32700&&i<32761?n=i-32700:i>32600&&i<32661&&(r=!0,n=i-32600),n)?{number:n,north:r}:null}function e7(t,i){return function(n,r,s,o){let a=n.length;s=s>1?s:2,o=o??s,r||(r=s>2?n.slice():Array(a));for(let s=0;s<a;s+=o){let o=t(n[s],n[s+1],i);r[s]=o[0],r[s+1]=o[1]}return r}}const e9=[function(t){let i=e8(t.getCode());return i?{forward:e7(e4,i),inverse:e7(e5,i)}:null}],it=[function(t){return e8(t)?new eM({code:t,units:"m"}):null}];let ie=!0;function ii(t){ie=!(void 0===t||t)}function ir(t,i){if(void 0!==i)for(let n=0,r=t.length;n<r;++n)i[n]=t[n];else i=t.slice();return i}function is(t){var i;i=t.getCode(),eG[i]=t,eK(t,t,ir)}function io(t){if("string"!=typeof t)return t;let i=eV(t);if(i)return i;for(let i of it){let n=i(t);if(n)return n}return null}function ia(t,i,n,r){let s,o=(t=io(t)).getPointResolutionFunc();if(o){if(s=o(i,n),r&&r!==t.getUnits()){let i=t.getMetersPerUnit();i&&(s=s*i/eF[r])}}else{let o=t.getUnits();if(("degrees"!=o||r)&&"degrees"!=r){let a=ig(t,io("EPSG:4326"));if(a||"degrees"===o){let t=[n[0]-i/2,n[1],n[0]+i/2,n[1],n[0],n[1]-i/2,n[0],n[1]+i/2];s=(eB((t=a(t,t,2)).slice(0,2),t.slice(2,4))+eB(t.slice(4,6),t.slice(6,8)))/2}else s=i*t.getMetersPerUnit();let l=r?eF[r]:t.getMetersPerUnit();void 0!==l&&(s/=l)}else s=i}return s}function il(t){t.forEach(is),t.forEach(function(i){t.forEach(function(t){i!==t&&eK(i,t,ir)})})}function iA(t,i){return t?"string"==typeof t?io(t):t:io(i)}function ih(t){return function(i,n,r,s){let o=i.length;r=void 0!==r?r:2,s=s??r,n=void 0!==n?n:Array(o);for(let a=0;a<o;a+=s){let o=t(i.slice(a,a+r)),l=o.length;for(let t=0,r=s;t<r;++t)n[a+t]=t>=l?i[a+t]:o[t]}return n}}function ic(t,i){return ii(),i_(t,"EPSG:4326",void 0!==i?i:"EPSG:3857")}function iu(t,i){let n=i_(t,void 0!==i?i:"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=tR(r+180,360)-180),n}function id(t,i){if(t===i)return!0;let n=t.getUnits()===i.getUnits();return t.getCode()===i.getCode()?n:ig(t,i)===ir&&n}function ig(t,i){let n=t.getCode(),r=i.getCode(),s=ej(n,r);if(s)return s;let o=null,a=null;for(let n of e9)o||(o=n(t)),a||(a=n(i));if(!o&&!a)return null;let l="EPSG:4326";if(a)if(o)s=ip(o.inverse,a.forward);else{let t=ej(n,l);t&&(s=ip(t,a.forward))}else{let t=ej(l,r);t&&(s=ip(o.inverse,t))}return s&&(is(t),is(i),eK(t,i,s)),s}function ip(t,i){return function(n,r,s,o){return i(r=t(n,r,s,o),r,s,o)}}function im(t,i){return ig(io(t),io(i))}function i_(t,i,n){let r=im(i,n);if(!r){let t=io(i).getCode(),r=io(n).getCode();throw Error(`No transform available between ${t} and ${r}`)}return r(t,void 0,t.length)}function iy(){return null}function iw(t,i){return t}function iv(t,i){return ie&&!ef(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(ie=!1,eL("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function ib(t,i){return t}function iC(t,i){return t}function ix(t,i,n){return function(r){let s,o;if(t.canWrapX()){let i=t.getExtent(),a=es(i);(o=ev(r=r.slice(0),t,a))&&(r[0]=r[0]-o*a),r[0]=tI(r[0],i[0],i[2]),r[1]=tI(r[1],i[1],i[3]),s=n(r)}else s=n(r);return o&&i.canWrapX()&&(s[0]+=o*es(i.getExtent())),s}}function iE(){return[1,0,0,1,0,0]}function iB(t,i){let n=i[0],r=i[1];return i[0]=t[0]*n+t[2]*r+t[4],i[1]=t[1]*n+t[3]*r+t[5],i}function iS(t,i,n,r,s,o,a,l){let A=Math.sin(o),h=Math.cos(o);return t[0]=r*h,t[1]=s*A,t[2]=-r*A,t[3]=s*h,t[4]=a*r*h-l*r*A+i,t[5]=a*s*A+l*s*h+n,t}function iI(t,i){var n;let r=(n=i)[0]*n[3]-n[1]*n[2];tb(0!==r,"Transformation matrix cannot be inverted");let s=i[0],o=i[1],a=i[2],l=i[3],A=i[4],h=i[5];return t[0]=l/r,t[1]=-o/r,t[2]=-a/r,t[3]=s/r,t[4]=(a*h-l*A)/r,t[5]=-(s*h-o*A)/r,t}il(ek),il(eH),yL=function(t,i,n,r){let s=t.length;n=n>1?n:2,r=r??n,void 0===i&&(i=n>2?t.slice():Array(s));for(let n=0;n<s;n+=r){i[n]=eT*t[n]/180;let r=6378137*Math.log(Math.tan(Math.PI*(+t[n+1]+90)/360));r>eD?r=eD:r<-eD&&(r=-eD),i[n+1]=r}return i},yF=function(t,i,n,r){let s=t.length;n=n>1?n:2,r=r??n,void 0===i&&(i=n>2?t.slice():Array(s));for(let n=0;n<s;n+=r)i[n]=180*t[n]/eT,i[n+1]=360*Math.atan(Math.exp(t[n+1]/6378137))/Math.PI-90;return i},eH.forEach(function(t){ek.forEach(function(i){eK(t,i,yL),eK(i,t,yF)})});const iL=[1e5,1e5,1e5,1e5,2,2];function iF(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function iM(t,i,n,r,s,o,a){o=o||[],a=a||2;let l=0;for(let A=i;A<n;A+=r){let i=t[A],n=t[A+1];o[l++]=s[0]*i+s[2]*n+s[4],o[l++]=s[1]*i+s[3]*n+s[5];for(let i=2;i<a;i++)o[l++]=t[A+i]}return o&&o.length!=l&&(o.length=l),o}function iT(t,i,n,r,s,o,a){a=a||[];let l=Math.cos(s),A=Math.sin(s),h=o[0],c=o[1],u=0;for(let s=i;s<n;s+=r){let i=t[s]-h,n=t[s+1]-c;a[u++]=h+i*l-n*A,a[u++]=c+i*A+n*l;for(let i=s+2;i<s+r;++i)a[u++]=t[i]}return a&&a.length!=u&&(a.length=u),a}const iR=iE(),iO=[NaN,NaN];var iD=class extends tn{constructor(){super(),this.extent_=tq(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=G((t,i,n)=>{if(!n)return this.getSimplifiedGeometry(i);let r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(i)})}simplifyTransformed(t,i){return this.simplifyTransformedInternal(this.getRevision(),t,i)}clone(){return J()}closestPointXY(t,i,n,r){return J()}containsXY(t,i){return 0===this.closestPointXY(t,i,iO,Number.MIN_VALUE)}getClosestPoint(t,i){return i=i||[NaN,NaN],this.closestPointXY(t[0],t[1],i,1/0),i}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return J()}getExtent(t){var i;if(this.extentRevision_!=this.getRevision()){let t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&tZ(t),this.extentRevision_=this.getRevision()}return i=this.extent_,t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}rotate(t,i){J()}scale(t,i,n){J()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return J()}getType(){return J()}applyTransform(t){J()}intersectsExtent(t){return J()}translate(t,i){J()}transform(t,i){let n=io(t),r="tile-pixels"==n.getUnits()?function(t,r,s){let o=n.getExtent(),a=n.getWorldExtent(),l=ee(a)/ee(o);iS(iR,a[0],a[3],l,-l,0,0,0);let A=iM(t,0,t.length,s,iR,r),h=im(n,i);return h?h(A,A,s):A}:im(n,i);return this.applyTransform(r),this}};function iP(t){let i;return 2==t?i="XY":3==t?i="XYZ":4==t&&(i="XYZM"),i}function ik(t){let i;return"XY"==t?i=2:"XYZ"==t||"XYM"==t?i=3:"XYZM"==t&&(i=4),i}var iN=class extends iD{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){var i,n,r;return i=this.flatCoordinates,n=this.flatCoordinates.length,r=this.stride,t5(tZ(t),i,0,n,r)}getCoordinates(){return J()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,i){this.stride=ik(t),this.layout=t,this.flatCoordinates=i}setCoordinates(t,i){J()}setLayout(t,i,n){let r;if(t)r=ik(t);else{for(let t=0;t<n;++t){if(0===i.length){this.layout="XY",this.stride=2;return}i=i[0]}t=iP(r=i.length)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,i){let n=this.getFlatCoordinates();if(n){let r=this.getStride();iT(n,0,n.length,r,t,i,n),this.changed()}}scale(t,i,n){void 0===i&&(i=t),n||(n=t7(this.getExtent()));let r=this.getFlatCoordinates();if(r){let s=this.getStride();!function(t,i,n,r,s,o,a,l){l=l||[];let A=a[0],h=a[1],c=0;for(let i=0;i<n;i+=r){let n=t[i]-A,a=t[i+1]-h;l[c++]=A+s*n,l[c++]=h+o*a;for(let n=i+2;n<i+r;++n)l[c++]=t[n]}l&&l.length!=c&&(l.length=c)}(r,0,r.length,s,t,i,n,r),this.changed()}}translate(t,i){let n=this.getFlatCoordinates();if(n){let r=this.getStride();!function(t,i,n,r,s,o,a){a=a||[];let l=0;for(let i=0;i<n;i+=r){a[l++]=t[i]+s,a[l++]=t[i+1]+o;for(let n=i+2;n<i+r;++n)a[l++]=t[n]}a&&a.length!=l&&(a.length=l)}(n,0,n.length,r,t,i,n),this.changed()}}};function iU(t,i,n,r){let s=0,o=t[n-r],a=t[n-r+1],l=0,A=0;for(;i<n;i+=r){let n=t[i]-o,r=t[i+1]-a;s+=A*n-l*r,l=n,A=r}return s/2}function iQ(t,i,n,r){let s=0;for(let o=0,a=n.length;o<a;++o){let a=n[o];s+=iU(t,i,a,r),i=a}return s}function iH(t,i,n,r,s,o,a){let l,A=t[i],h=t[i+1],c=t[n]-A,u=t[n+1]-h;if(0===c&&0===u)l=i;else{let g=((s-A)*c+(o-h)*u)/(c*c+u*u);if(g>1)l=n;else if(g>0){for(let s=0;s<r;++s){var d;a[s]=(d=t[i+s],d+g*(t[n+s]-d))}a.length=r;return}else l=i}for(let i=0;i<r;++i)a[i]=t[l+i];a.length=r}function iG(t,i,n,r,s){let o=t[i],a=t[i+1];for(i+=r;i<n;i+=r){let n=t[i],r=t[i+1],l=tF(o,a,n,r);l>s&&(s=l),o=n,a=r}return s}function iV(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){let a=n[o];s=iG(t,i,a,r,s),i=a}return s}function iz(t,i,n,r,s,o,a,l,A,h,c){let u,d;if(i==n)return h;if(0===s){if((d=tF(a,l,t[i],t[i+1]))<h){for(u=0;u<r;++u)A[u]=t[i+u];return A.length=r,d}return h}c=c||[NaN,NaN];let g=i+r;for(;g<n;)if(iH(t,g-r,g,r,a,l,c),(d=tF(a,l,c[0],c[1]))<h){for(u=0,h=d;u<r;++u)A[u]=c[u];A.length=r,g+=r}else g+=r*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(o&&(iH(t,n-r,i,r,a,l,c),(d=tF(a,l,c[0],c[1]))<h)){for(u=0,h=d;u<r;++u)A[u]=c[u];A.length=r}return h}function iK(t,i,n,r,s,o,a,l,A,h,c){c=c||[NaN,NaN];for(let u=0,d=n.length;u<d;++u){let d=n[u];h=iz(t,i,d,r,s,o,a,l,A,h,c),i=d}return h}function ij(t,i,n,r){for(let r=0,s=n.length;r<s;++r)t[i++]=n[r];return i}function iW(t,i,n,r){for(let s=0,o=n.length;s<o;++s){let o=n[s];for(let n=0;n<r;++n)t[i++]=o[n]}return i}function i$(t,i,n,r,s){s=s||[];let o=0;for(let a=0,l=n.length;a<l;++a){let l=iW(t,i,n[a],r);s[o++]=l,i=l}return s.length=o,s}function iY(t,i,n,r,s){s=s||[];let o=0;for(let a=0,l=n.length;a<l;++a){let l=i$(t,i,n[a],r,s[o]);0===l.length&&(l[0]=i),s[o++]=l,i=l[l.length-1]}return s.length=o,s}function iq(t,i,n,r,s){s=void 0!==s?s:[];let o=0;for(let a=i;a<n;a+=r)s[o++]=t.slice(a,a+r);return s.length=o,s}function iX(t,i,n,r,s){s=void 0!==s?s:[];let o=0;for(let a=0,l=n.length;a<l;++a){let l=n[a];s[o++]=iq(t,i,l,r,s[o]),i=l}return s.length=o,s}function iZ(t,i,n,r,s){s=void 0!==s?s:[];let o=0;for(let a=0,l=n.length;a<l;++a){let l=n[a];s[o++]=1===l.length&&l[0]===i?[]:iX(t,i,l,r,s[o]),i=l[l.length-1]}return s.length=o,s}function iJ(t,i,n,r,s,o,a){let l=(n-i)/r;if(l<3){for(;i<n;i+=r)o[a++]=t[i],o[a++]=t[i+1];return a}let A=Array(l);A[0]=1,A[l-1]=1;let h=[i,n-r],c=0;for(;h.length>0;){let n=h.pop(),o=h.pop(),a=0,l=t[o],u=t[o+1],d=t[n],g=t[n+1];for(let i=o+r;i<n;i+=r){let n=tL(t[i],t[i+1],l,u,d,g);n>a&&(c=i,a=n)}a>s&&(A[(c-i)/r]=1,o+r<c&&h.push(o,c),c+r<n&&h.push(c,n))}for(let n=0;n<l;++n)A[n]&&(o[a++]=t[i+n*r],o[a++]=t[i+n*r+1]);return a}function i0(t,i,n,r,s,o,a,l){for(let A=0,h=n.length;A<h;++A){let h=n[A];a=iJ(t,i,h,r,s,o,a),l.push(a),i=h}return a}function i1(t,i){return i*Math.round(t/i)}function i2(t,i,n,r,s,o,a,l){for(let A=0,h=n.length;A<h;++A){let h=n[A];a=function(t,i,n,r,s,o,a){let l,A;if(i==n)return a;let h=i1(t[i],s),c=i1(t[i+1],s);i+=r,o[a++]=h,o[a++]=c;do if(l=i1(t[i],s),A=i1(t[i+1],s),(i+=r)==n)return o[a++]=l,o[a++]=A,a;while(l==h&&A==c)for(;i<n;){let n=i1(t[i],s),u=i1(t[i+1],s);if(i+=r,n==l&&u==A)continue;let d=l-h,g=A-c,f=n-h,p=u-c;if(d*p==g*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(g<0&&p<g||g==p||g>0&&p>g)){l=n,A=u;continue}o[a++]=l,o[a++]=A,h=l,c=A,l=n,A=u}return o[a++]=l,o[a++]=A,a}(t,i,h,r,s,o,a),l.push(a),i=h}return a}class i5 extends iN{constructor(t,i){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(t[0])?this.setCoordinates(t,i):this.setFlatCoordinates(i,t)}clone(){return new i5(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,i,n,r){return r<tK(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,n,r))}getArea(){return iU(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return iq(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){let i=[];return i.length=iJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new i5(i,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iW(this.flatCoordinates,0,t,this.stride),this.changed()}}class i4 extends iN{constructor(t,i){super(),this.setCoordinates(t,i)}clone(){let t=new i4(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){let s=this.flatCoordinates,o=tF(t,i,s[0],s[1]);if(o<r){let t=this.stride;for(let i=0;i<t;++i)n[i]=s[i];return n.length=t,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return tJ(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return t$(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ij(this.flatCoordinates,0,t,this.stride),this.changed()}}function i3(t,i,n,r,s,o){let a=0,l=t[n-r],A=t[n-r+1];for(;i<n;i+=r){let n=t[i],r=t[i+1];A<=o?r>o&&(n-l)*(o-A)-(s-l)*(r-A)>0&&a++:r<=o&&(n-l)*(o-A)-(s-l)*(r-A)<0&&a--,l=n,A=r}return 0!==a}function i6(t,i,n,r,s,o){if(0===n.length||!i3(t,i,n[0],r,s,o))return!1;for(let i=1,a=n.length;i<a;++i)if(i3(t,n[i-1],n[i],r,s,o))return!1;return!0}function i8(t,i,n,r,s,o,a){let l,A,h,c,u,d,g,f=s[o+1],p=[];for(let s=0,o=n.length;s<o;++s){let o=n[s];for(c=t[o-r],d=t[o-r+1],l=i;l<o;l+=r)u=t[l],g=t[l+1],(f<=d&&g<=f||d<=f&&f<=g)&&(h=(f-d)/(g-d)*(u-c)+c,p.push(h)),c=u,d=g}let m=NaN,_=-1/0;for(p.sort(O),c=p[0],l=1,A=p.length;l<A;++l){let s=Math.abs((u=p[l])-c);s>_&&i6(t,i,n,r,h=(c+u)/2,f)&&(m=h,_=s),c=u}return(isNaN(m)&&(m=s[o]),a)?(a.push(m,f,_),a):[m,f,_]}function i7(t,i,n,r,s){let o=[];for(let a=0,l=n.length;a<l;++a){let l=n[a];o=i8(t,i,l,r,s,2*a,o),i=l[l.length-1]}return o}function i9(t,i,n,r,s){let o;for(i+=r;i<n;i+=r)if(o=s(t.slice(i-r,i),t.slice(i,i+r)))return o;return!1}function nt(t,i){let[n,r]=t,[s,o]=i,a=((n[0]-s[0])*(s[1]-o[1])-(n[1]-s[1])*(s[0]-o[0]))/((n[0]-r[0])*(s[1]-o[1])-(n[1]-r[1])*(s[0]-o[0])),l=((n[0]-s[0])*(n[1]-r[1])-(n[1]-s[1])*(n[0]-r[0]))/((n[0]-r[0])*(s[1]-o[1])-(n[1]-r[1])*(s[0]-o[0]));if(0<=a&&a<=1&&0<=l&&l<=1)return[n[0]+a*(r[0]-n[0]),n[1]+a*(r[1]-n[1])]}function ne(t,i,n,r,s,o){return!!eo(s,o=o??t5(tq(),t,i,n,r))&&(o[0]>=s[0]&&o[2]<=s[2]||o[1]>=s[1]&&o[3]<=s[3]||i9(t,i,n,r,function(t,i){return function(t,i,n){let r=!1,s=tY(t,i),o=tY(t,n);if(s===tH.INTERSECTING||o===tH.INTERSECTING)r=!0;else{let a,l,A=t[0],h=t[1],c=t[2],u=t[3],d=i[0],g=i[1],f=n[0],p=n[1],m=(p-g)/(f-d);o&tH.ABOVE&&!(s&tH.ABOVE)&&(r=(a=f-(p-u)/m)>=A&&a<=c),r||!(o&tH.RIGHT)||s&tH.RIGHT||(r=(l=p-(f-c)*m)>=h&&l<=u),r||!(o&tH.BELOW)||s&tH.BELOW||(r=(a=f-(p-h)/m)>=A&&a<=c),r||!(o&tH.LEFT)||s&tH.LEFT||(r=(l=p-(f-A)*m)>=h&&l<=u)}return r}(s,t,i)}))}function ni(t,i,n,r,s){return!!(ne(t,i,n,r,s)||i3(t,i,n,r,s[0],s[1])||i3(t,i,n,r,s[0],s[3])||i3(t,i,n,r,s[2],s[1])||i3(t,i,n,r,s[2],s[3]))}function nn(t,i,n,r,s){if(!ni(t,i,n[0],r,s))return!1;if(1===n.length)return!0;for(let i=1,o=n.length;i<o;++i)if(function(t,i,n,r,s){return!t4(s,function(s){return!i3(t,i,n,r,s[0],s[1])})}(t,n[i-1],n[i],r,s)&&!ne(t,n[i-1],n[i],r,s))return!1;return!0}function nr(t,i,n,r){let s=0,o=t[n-r],a=t[n-r+1];for(;i<n;i+=r){let n=t[i],r=t[i+1];s+=(n-o)*(r+a),o=n,a=r}return 0===s?void 0:s>0}function ns(t,i,n,r,s){s=void 0!==s&&s;for(let o=0,a=n.length;o<a;++o){let a=n[o],l=nr(t,i,a,r);if(0===o){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;i=a}return!0}function no(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){let a=n[o];if(!ns(t,i,a,r,s))return!1;a.length&&(i=a[a.length-1])}return!0}function na(t,i,n,r,s){s=void 0!==s&&s;for(let o=0,a=n.length;o<a;++o){let a=n[o],l=nr(t,i,a,r);(0===o?s&&l||!s&&!l:s&&!l||!s&&l)&&function(t,i,n,r){for(;i<n-r;){for(let s=0;s<r;++s){let o=t[i+s];t[i+s]=t[n-r+s],t[n-r+s]=o}i+=r,n-=r}}(t,i,a,r),i=a}return i}function nl(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o)i=na(t,i,n[o],r,s);return i}class nA extends iN{constructor(t,i,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&n?(this.setFlatCoordinates(i,t),this.ends_=n):this.setCoordinates(t,i)}appendLinearRing(t){this.flatCoordinates?k(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new nA(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,r){return r<tK(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iV(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iK(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,r))}containsXY(t,i){return i6(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)}getArea(){return iQ(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let i;return void 0!==t?na(i=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):i=this.flatCoordinates,iX(i,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let t=t7(this.getExtent());this.flatInteriorPoint_=i8(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new i4(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new i5(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){let t=this.layout,i=this.flatCoordinates,n=this.ends_,r=[],s=0;for(let o=0,a=n.length;o<a;++o){let a=n[o],l=new i5(i.slice(s,a),t);r.push(l),s=a}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;ns(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=na(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let i=[],n=[];return i.length=i2(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,n),new nA(i,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return nn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let n=i$(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}function nh(t){if(ea(t))throw Error("Cannot create polygon from empty extent");let i=t[0],n=t[1],r=t[2],s=t[3],o=[i,n,i,s,r,s,r,n,i,n];return new nA(o,"XY",[o.length])}function nc(t,i,n){i=i||32;let r=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=r*(i+1),l=Array(a);for(let t=0;t<a;t+=r){l[t]=0,l[t+1]=0;for(let i=2;i<r;i++)l[t+i]=o[i]}let A=[l.length],h=new nA(l,s,A);return nu(h,o,t.getRadius(),n),h}function nu(t,i,n,r){let s=t.getFlatCoordinates(),o=t.getStride(),a=s.length/o-1,l=r||0;for(let t=0;t<=a;++t){let r=t*o,A=l+2*tR(t,a)*Math.PI/a;s[r]=i[0]+n*Math.cos(A),s[r+1]=i[1]+n*Math.sin(A)}t.changed()}function nd(t,i,n,r){let s=es(i)/n[0],o=ee(i)/n[1];return r?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function ng(t,i,n){let r=Math.min(t,i);return r*=Math.log(1+50*Math.max(0,t/i-1))/50+1,n&&(r=Math.max(r,n)/(Math.log(1+50*Math.max(0,n/t-1))/50+1)),tI(r,n/2,2*i)}function nf(t,i,n,r,s){return n=void 0===n||n,function(o,a,l,A){if(void 0!==o){let a=r?nd(t,r,l,s):t;return n&&A?ng(o,a,i):tI(o,i,a)}}}function np(t){if(void 0!==t)return 0}function nm(t){if(void 0!==t)return t}function n_(t,i){setTimeout(function(){t(i)},0)}function ny(t,i,n,r,s){let o=Math.cos(-s),a=Math.sin(-s),l=t[0]*o-t[1]*a,A=t[1]*o+t[0]*a;return l+=(i[0]/2-n[0])*r,[l*o-(A+=(n[1]-i[1]/2)*r)*(a=-a),A*o+l*a]}var nw=class extends tn{constructor(t){var i,n;super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=iA(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&ii(),t.center&&(t.center=iv(t.center,this.projection_)),t.extent&&(t.extent=(i=t.extent,n=this.projection_,i)),this.applyOptions_(t)}applyOptions_(t){let i=Object.assign({},t);for(let t in tS)delete i[t];this.setProperties(i,!0);let n=function(t){var i,n,r,s,o,a;let l,A,h,c=void 0!==t.minZoom?t.minZoom:0,u=void 0!==t.maxZoom?t.maxZoom:28,d=void 0!==t.zoomFactor?t.zoomFactor:2,g=void 0!==t.multiWorld&&t.multiWorld,f=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,m=iA(t.projection,"EPSG:3857"),_=m.getExtent(),y=t.constrainOnlyCenter,w=t.extent;if(!g&&!w&&m.isGlobal()&&(y=!1,w=_),void 0!==t.resolutions){let r=t.resolutions;(A=r[c],h=void 0!==r[u]?r[u]:r[r.length-1],t.constrainResolution)?(i=f,n=!y&&w,i=void 0===i||i,l=function(t,s,o,a){if(void 0!==t){let l=r[0],A=r[r.length-1],h=n?nd(l,n,o,p):l;if(a)return i?ng(t,h,A):tI(t,A,h);let c=Math.floor(P(r,Math.min(h,t),s));return r[c]>h&&c<r.length-1?r[c+1]:r[c]}}):l=nf(A,h,f,!y&&w,p)}else{let i=(_?Math.max(es(_),ee(_)):360*eF.degrees/m.getMetersPerUnit())/256/1;(void 0!==(A=t.maxResolution)?c=0:A=i/Math.pow(d,c),void 0===(h=t.minResolution)&&(h=void 0!==t.maxZoom?void 0!==t.maxResolution?A/Math.pow(d,u):i/Math.pow(d,u):i/0x10000000),u=c+Math.floor(Math.log(A/h)/Math.log(d)),h=A/Math.pow(d,u-c),t.constrainResolution)?(r=A,s=h,o=f,a=!y&&w,o=void 0===o||o,s=void 0!==s?s:0,l=function(t,i,n,l){if(void 0!==t){let A=a?nd(r,a,n,p):r;if(l)return o?ng(t,A,s):tI(t,s,A);let h=Math.max(Math.ceil(Math.log(r/A)/Math.log(d)-1e-9),Math.floor(Math.log(r/Math.min(A,t))/Math.log(d)+(-(.499999999*i)+.5)));return tI(r/Math.pow(d,h),s,A)}}):l=nf(A,h,f,!y&&w,p)}return{constraint:l,maxResolution:A,minResolution:h,minZoom:c,zoomFactor:d}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;let r=function(t){if(void 0!==t.extent){let i=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return tU(t.extent,t.constrainOnlyCenter,i)}let i=iA(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&i.isGlobal()){let t=i.getExtent().slice();return t[0]=-1/0,t[2]=1/0,tU(t,!1,!1)}return tQ}(t),s=n.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){let i=t.constrainRotation;if(void 0===i||!0===i){let t=tT(5);return function(i,n){return n||void 0===i?i:Math.abs(i)<=t?0:i}}if(!1===i)return nm;if("number"==typeof i){let t=2*Math.PI/i;return function(i,n){return n?i:void 0!==i?i=Math.floor(i/t+.5)*t:void 0}}return nm}return np}(t);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let i=this.padding_;this.padding_=t;let n=this.getCenterInternal();if(n){let r=t||[0,0,0,0];i=i||[0,0,0,0];let s=this.getResolution(),o=s/2*(r[3]-i[3]+i[1]-r[1]),a=s/2*(r[0]-i[0]+i[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(t){let i=this.getProperties();return void 0!==i.resolution?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenterInternal(),i.rotation=this.getRotation(),Object.assign({},i,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let i=Array(arguments.length);for(let t=0;t<i.length;++t){let n=arguments[t];n.center&&((n=Object.assign({},n)).center=iv(n.center,this.getProjection())),n.anchor&&((n=Object.assign({},n)).anchor=iv(n.anchor,this.getProjection())),i[t]=n}this.animateInternal.apply(this,i)}animateInternal(t){let i,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){let t=arguments[r];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(r===n){i&&n_(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,A=[];for(;r<n;++r){var h;let t=arguments[r],n={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||ex,callback:i};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=l;let i=tR(t.rotation-l+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=l+i,l=n.targetRotation}(!(h=n).sourceCenter||!h.targetCenter||ef(h.sourceCenter,h.targetCenter))&&h.sourceResolution===h.targetResolution&&h.sourceRotation===h.targetRotation?n.complete=!0:s+=n.duration,A.push(n)}this.animations_.push(A),this.setHint(tB.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[tB.ANIMATING]>0}getInteracting(){return this.hints_[tB.INTERACTING]>0}cancelAnimations(){let t;this.setHint(tB.ANIMATING,-this.hints_[tB.ANIMATING]);for(let i=0,n=this.animations_.length;i<n;++i){let n=this.animations_[i];if(n[0].callback&&n_(n[0].callback,!1),!t)for(let i=0,r=n.length;i<r;++i){let r=n[i];if(!r.complete){t=r.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let t=Date.now(),i=!1;for(let n=this.animations_.length-1;n>=0;--n){let r=this.animations_[n],s=!0;for(let n=0,o=r.length;n<o;++n){let o=r[n];if(o.complete)continue;let a=t-o.start,l=o.duration>0?a/o.duration:1;l>=1?(o.complete=!0,l=1):s=!1;let A=o.easing(l);if(o.sourceCenter){let t=o.sourceCenter[0],i=o.sourceCenter[1],n=o.targetCenter[0],r=o.targetCenter[1];this.nextCenter_=o.targetCenter;let s=t+A*(n-t),a=i+A*(r-i);this.targetCenter_=[s,a]}if(o.sourceResolution&&o.targetResolution){let t=1===A?o.targetResolution:o.sourceResolution+A*(o.targetResolution-o.sourceResolution);if(o.anchor){let i=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,i,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){let t=1===A?tR(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+A*(o.targetRotation-o.sourceRotation);if(o.anchor){let i=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(i,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),i=!0,!o.complete)break}if(s){this.animations_[n]=null,this.setHint(tB.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let t=r[0].callback;t&&n_(t,!0)}}this.animations_=this.animations_.filter(Boolean),i&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,i){let n,r=this.getCenterInternal();if(void 0!==r){var s;ep(n=[r[0]-i[0],r[1]-i[1]],t-this.getRotation()),s=n,s[0]+=+i[0],s[1]+=+i[1]}return n}calculateCenterZoom(t,i){let n,r=this.getCenterInternal(),s=this.getResolution();return void 0!==r&&void 0!==s&&(n=[i[0]-t*(i[0]-r[0])/s,i[1]-t*(i[1]-r[1])/s]),n}getViewportSize_(t){let i=this.viewportSize_;if(t){let n=i[0],r=i[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return i}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){var t,i;let n=this.getCenterInternal();return n?(t=n,i=this.getProjection(),t):n}getCenterInternal(){return this.get(tS.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){var i,n;return i=this.calculateExtentInternal(t),n=this.getProjection(),i}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();let i=this.getCenterInternal();tb(i,"The view center is not defined");let n=this.getResolution();tb(void 0!==n,"The view resolution is not defined");let r=this.getRotation();return tb(void 0!==r,"The view rotation is not defined"),t9(i,n,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(tS.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,i){var n,r;return this.getResolutionForExtentInternal((n=t,r=this.getProjection(),n),i)}getResolutionForExtentInternal(t,i){return i=i||this.getViewportSizeMinusPadding_(),Math.max(es(t)/i[0],ee(t)/i[1])}getResolutionForValueFunction(t){t=t||2;let i=this.getConstrainedResolution(this.maxResolution_),n=Math.log(i/this.minResolution_)/Math.log(t);return function(r){return i/Math.pow(t,r*n)}}getRotation(){return this.get(tS.ROTATION)}getValueForResolutionFunction(t){let i=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=Math.log(n/this.minResolution_)/i;return function(t){return Math.log(n/t)/i/r}}getViewportSizeMinusPadding_(t){let i=this.getViewportSize_(t),n=this.padding_;return n&&(i=[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]),i}getState(){let t=this.getProjection(),i=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),s=this.padding_;if(s){let t=this.getViewportSizeMinusPadding_();r=ny(r,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],i,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:i,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t,i=this.getResolution();return void 0!==i&&(t=this.getZoomForResolution(i)),t}getZoomForResolution(t){let i,n,r=this.minZoom_||0;if(this.resolutions_){let s=P(this.resolutions_,t,1);r=s,i=this.resolutions_[s],n=s==this.resolutions_.length-1?2:i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(i/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];let i=tI(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,tI(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,i){var n,r,s,o;let a;if(tb(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){tb(!ea(t),"Cannot fit empty extent provided as `geometry`"),a=nh((n=t,r=this.getProjection(),n))}else if("Circle"===t.getType()){let i=(s=t.getExtent(),o=this.getProjection(),s);(a=nh(i)).rotate(this.getRotation(),t7(i))}else{let i=iy();a=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(a,i)}rotatedExtentForGeometry(t){let i=this.getRotation(),n=Math.cos(i),r=Math.sin(-i),s=t.getFlatCoordinates(),o=t.getStride(),a=1/0,l=1/0,A=-1/0,h=-1/0;for(let t=0,i=s.length;t<i;t+=o){let i=s[t]*n-s[t+1]*r,o=s[t]*r+s[t+1]*n;a=Math.min(a,i),l=Math.min(l,o),A=Math.max(A,i),h=Math.max(h,o)}return[a,l,A,h]}fitInternal(t,i){let n,r=(i=i||{}).size;r||(r=this.getViewportSizeMinusPadding_());let s=void 0!==i.padding?i.padding:[0,0,0,0],o=void 0!==i.nearest&&i.nearest;n=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.getResolutionForZoom(i.maxZoom):0;let a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);l=isNaN(l)?n:Math.max(l,n),l=this.getConstrainedResolution(l,+!o);let A=this.getRotation(),h=Math.sin(A),c=Math.cos(A),u=t7(a);u[0]+=(s[1]-s[3])/2*l,u[1]+=(s[0]-s[2])/2*l;let d=u[0]*c-u[1]*h,g=u[1]*c+u[0]*h,f=this.getConstrainedCenter([d,g],l),p=i.callback?i.callback:H;void 0!==i.duration?this.animateInternal({resolution:l,center:f,duration:i.duration,easing:i.easing},p):(this.targetResolution_=l,this.targetCenter_=f,this.applyTargetState_(!1,!0),n_(p,!0))}centerOn(t,i,n){this.centerOnInternal(iv(t,this.getProjection()),i,n)}centerOnInternal(t,i,n){this.setCenterInternal(ny(t,i,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,i,n,r){let s,o=this.padding_;if(o&&t){let a=this.getViewportSizeMinusPadding_(-n),l=ny(t,r,[a[0]/2+o[3],a[1]/2+o[0]],i,n);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){var i,n;let r=(i=this.targetCenter_,n=this.getProjection(),i);this.setCenter([r[0]+t[0],r[1]+t[1]])}adjustCenterInternal(t){let i=this.targetCenter_;this.setCenterInternal([i[0]+t[0],i[1]+t[1]])}adjustResolution(t,i){i=i&&iv(i,this.getProjection()),this.adjustResolutionInternal(t,i)}adjustResolutionInternal(t,i){let n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,r,n);i&&(this.targetCenter_=this.calculateCenterZoom(s,i)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,i){this.adjustResolution(Math.pow(this.zoomFactor_,-t),i)}adjustRotation(t,i){i&&(i=iv(i,this.getProjection())),this.adjustRotationInternal(t,i)}adjustRotationInternal(t,i){let n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);i&&(this.targetCenter_=this.calculateCenterRotate(r,i)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?iv(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,i){let n=this.getAnimating()||this.getInteracting()||i,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(tS.ROTATION)!==r&&this.set(tS.ROTATION,r),this.get(tS.RESOLUTION)!==o&&(this.set(tS.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(tS.CENTER)&&ef(this.get(tS.CENTER),a)||this.set(tS.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,i,n){t=void 0!==t?t:200;let r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,i||0,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,this.applyTargetState_();return}n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&ef(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:eC,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(tB.INTERACTING,1)}endInteraction(t,i,n){n=n&&iv(n,this.getProjection()),this.endInteractionInternal(t,i,n)}endInteractionInternal(t,i,n){this.getInteracting()&&(this.setHint(tB.INTERACTING,-1),this.resolveConstraints(t,i,n))}getConstrainedCenter(t,i){let n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,i||this.getResolution(),n)}getConstrainedZoom(t,i){let n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,i))}getConstrainedResolution(t,i){i=i||0;let n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,n)}};const nv="ol-hidden",nb="ol-unselectable",nC="ol-control",nx="ol-collapsed",nE=RegExp("^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))?\\s*([-,\\\"\\'\\sa-z0-9]+?)\\s*$","i"),nB=["style","variant","weight","size","lineHeight","family"],nS={normal:400,bold:700},nI=function(t){let i=t.match(nE);if(!i)return null;let n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let t=0,r=nB.length;t<r;++t){let r=i[t+1];void 0!==r&&(n[nB[t]]="string"==typeof r?r.trim():r)}return isNaN(Number(n.weight))&&n.weight in nS&&(n.weight=nS[n.weight]),n.families=n.family.split(/,\s?/).map(t=>t.trim().replace(/^['"]|['"]$/g,"")),n};function nL(t,i,n,r){let s;return s=n&&n.length?n.shift():tg?new OffscreenCanvas(t||300,i||300):document.createElement("canvas"),t&&(s.width=t),i&&(s.height=i),s.getContext("2d",r)}function nF(){return t||(t=nL(1,1)),t}function nM(t){let i=t.canvas;i.width=1,i.height=1,t.clearRect(0,0,1,1)}function nT(t,i){let n=i.parentNode;n&&n.replaceChild(t,i)}function nR(t){for(;t.lastChild;)t.lastChild.remove()}var nO=class extends tn{constructor(t){super();let i=t.element;!i||t.target||i.style.pointerEvents||(i.style.pointerEvents="auto"),this.element=i||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)Y(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){let i=this.target_??t.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==H&&this.listenerKeys.push(W(t,ty.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}},nD=class extends nO{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;let i=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",r=void 0!==t.expandClassName?t.expandClassName:i+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"›",o=void 0!==t.collapseClassName?t.collapseClassName:i+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;let a=void 0!==t.label?t.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(T.CLICK,this.handleClick_.bind(this),!1);let A=i+" "+nb+" "+nC+(this.collapsed_&&this.collapsible_?" "+nx:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=A,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){let i=this.getMap().getAllLayers(),n=new Set(i.flatMap(i=>i.getAttributions(t)));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach(t=>n.add(t)):n.add(this.attributions_)),!this.overrideCollapsible_){let t=!i.some(t=>t.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(t)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let i=await Promise.all(this.collectSourceAttributions_(t).map(t=>(function(t){let i;try{i=t()}catch(t){return Promise.reject(t)}return i instanceof Promise?i:Promise.resolve(i)})(()=>t))),n=i.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!N(i,this.renderedAttributions_)){nR(this.ulElement_);for(let t=0,n=i.length;t<n;++t){let n=document.createElement("li");n.innerHTML=i[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=i}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(nx),this.collapsed_?nT(this.collapseLabel_,this.label_):nT(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},nP=class extends nO{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});let i=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"⇧",r=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));let s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=i+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(T.CLICK,this.handleClick_.bind(this),!1);let a=this.element;a.className=i+" "+nb+" "+nC,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(nv)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let t=this.getMap().getView();if(!t)return;let i=t.getRotation();void 0!==i&&(this.duration_>0&&i%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:eC}):t.setRotation(0))}render(t){let i=t.frameState;if(!i)return;let n=i.viewState.rotation;if(n!=this.rotation_){if(this.autoHide_){let t=this.element.classList.contains(nv);t||0!==n?t&&0!==n&&this.element.classList.remove(nv):this.element.classList.add(nv)}this.label_.style.transform="rotate("+n+"rad)"}this.rotation_=n}},nk=class extends nO{constructor(t){super({element:document.createElement("div"),target:(t=t||{}).target});let i=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,r=void 0!==t.zoomInClassName?t.zoomInClassName:i+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:i+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",a=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",l=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",A=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof o?document.createTextNode(o):o),h.addEventListener(T.CLICK,this.handleClick_.bind(this,n),!1);let c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=A,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(T.CLICK,this.handleClick_.bind(this,-n),!1);let u=this.element;u.className=i+" "+nb+" "+nC,u.appendChild(h),u.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,i){i.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){let i=this.getMap().getView();if(!i)return;let n=i.getZoom();if(void 0!==n){let r=i.getConstrainedZoom(n+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:eC})):i.setZoom(r)}}};function nN(t){t=t||{};let i=new to;return(void 0===t.zoom||t.zoom)&&i.push(new nk(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&i.push(new nP(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&i.push(new nD(t.attributionOptions)),i}var nU=class{constructor(t,i,n){this.decay_=t,this.minVelocity_=i,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,i){this.points_.push(t,i,Date.now())}end(){if(this.points_.length<6)return!1;let t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;let n=i-3;for(;n>0&&this.points_[n+2]>t;)n-=3;let r=this.points_[i+2]-this.points_[n+2];if(r<1e3/60)return!1;let s=this.points_[i]-this.points_[n],o=this.points_[i+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},nQ="active";function nH(t,i,n,r){let s=t.getZoom();if(void 0===s)return;let o=t.getConstrainedZoom(s+i),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==r?r:250,easing:eC})}var nG=class extends tn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(nQ)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(nQ,t)}setMap(t){this.map_=t}},nV=class extends nG{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let i=!1;if(t.type==tA.DBLCLICK){let n=t.originalEvent,r=t.map,s=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;nH(r.getView(),o,s,this.duration_),n.preventDefault(),i=!0}return!i}};function nz(t){let i=arguments;return function(t){let n=!0;for(let r=0,s=i.length;r<s&&(n=n&&i[r](t));++r);return n}}const nK=function(t){let i=t.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey},nj=function(t){let i=t.originalEvent;return i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},nW=function(t){let i=t.map.getTargetElement(),n=i.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):i.contains(r)},n$=function(t){let i=t.map.getTargetElement(),n=i.getRootNode();return!(n instanceof ShadowRoot?n.host:i).hasAttribute("tabindex")||nW(t)},nY=function(t){return t.type==tA.CLICK},nq=function(t){let i=t.originalEvent;return"pointerId"in i&&0==i.button&&!(tc&&tu&&i.ctrlKey)},nX=function(t){return t.type==tA.SINGLECLICK},nZ=function(t){let i=t.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&!i.shiftKey},nJ=function(t){let i=t.originalEvent;return!i.altKey&&(tu?i.metaKey:i.ctrlKey)&&!i.shiftKey},n0=function(t){let i=t.originalEvent;return tu?i.metaKey:i.ctrlKey},n1=function(t){let i=t.originalEvent;return!i.altKey&&!(i.metaKey||i.ctrlKey)&&i.shiftKey},n2=function(t){let i=t.originalEvent,n=i.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!i.target.isContentEditable},n5=function(t){let i=t.originalEvent;return"pointerId"in i&&"mouse"==i.pointerType},n4=function(t){let i=t.originalEvent;return"pointerId"in i&&i.isPrimary&&0===i.button};function n3(t){let i=t.length,n=0,r=0;for(let s=0;s<i;s++)n+=t[s].clientX,r+=t[s].clientY;return{clientX:n/i,clientY:r/i}}var n6=class extends nG{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let i=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==tA.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==tA.POINTERUP){let i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==tA.POINTERDOWN){let n=this.handleDownEvent(t);this.handlingDownUpSequence=n,i=this.stopDown(n)}else t.type==tA.POINTERMOVE&&this.handleMoveEvent(t);return!i}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}},n8=class extends n6{constructor(t){super({stopDown:Q}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let i=t.condition?t.condition:nz(nZ,n4);this.condition_=t.onFocusOnly?nz(n$,i):i,this.noKinetic_=!1}handleDragEvent(t){let i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());let n=this.targetPointers,r=i.getEventPixel(n3(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var s;let i=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],n=t.map.getView();s=n.getResolution(),i[0]*=s,i[1]*=s,ep(i,n.getRotation()),n.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){let i=t.map,n=i.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let t=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),s=n.getCenterInternal(),o=i.getPixelFromCoordinateInternal(s),a=i.getCoordinateFromPixelInternal([o[0]-t*Math.cos(r),o[1]-t*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:eC})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){let i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},n7=class extends n6{constructor(t){t=t||{},super({stopDown:Q}),this.condition_=t.condition?t.condition:nj,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!n5(t))return;let i=t.map,n=i.getView();if(n.getConstraints().rotation===np)return;let r=i.getSize(),s=t.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(void 0!==this.lastAngle_){let t=o-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!n5(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!n5(t)&&!!(nq(t)&&this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},n9=class extends R{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let t=this.startPixel_,i=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],i[0])+"px",n.top=Math.min(t[1],i[1])+"px",n.width=Math.abs(i[0]-t[0])+"px",n.height=Math.abs(i[1]-t[1])+"px"}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,i){this.startPixel_=t,this.endPixel_=i,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;let t=this.startPixel_,i=this.endPixel_,n=[t,[t[0],i[1]],i,[i[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new nA([n])}getGeometry(){return this.geometry_}};const rt={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class re extends K{constructor(t,i,n){super(t),this.coordinate=i,this.mapBrowserEvent=n}}var ri=class extends n6{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new n9(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??nq,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,i,n){let r=n[0]-i[0],s=n[1]-i[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new re(rt.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;let i=this.boxEndCondition_(t,this.startPixel_,t.pixel);return i&&this.onBoxEnd(t),this.dispatchEvent(new re(i?rt.BOXEND:rt.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new re(rt.BOXSTART,t.coordinate,t)),!0)}onBoxEnd(t){}setActive(t){!t&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new re(rt.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new re(rt.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}},rn=class extends ri{constructor(t){super({condition:(t=t||{}).condition?t.condition:n1,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){let i=this.getMap().getView(),n=this.getGeometry();if(this.out_){let t=i.rotatedExtentForGeometry(n),r=i.getResolutionForExtentInternal(t),s=i.getResolution()/r;(n=n.clone()).scale(s*s)}i.fitInternal(n,{duration:this.duration_,easing:eC})}},rr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"},rs=class extends nG{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return nZ(t)&&n2(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let i=!1;if(t.type==T.KEYDOWN){let r=t.originalEvent,s=r.key;if(this.condition_(t)&&(s==rr.DOWN||s==rr.LEFT||s==rr.RIGHT||s==rr.UP)){let o=t.map.getView(),a=o.getResolution()*this.pixelDelta_,l=0,A=0;s==rr.DOWN?A=-a:s==rr.LEFT?l=-a:s==rr.RIGHT?l=a:A=a;let h=[l,A];ep(h,o.getRotation());var n=this.duration_;let c=o.getCenterInternal();if(c){let t=[c[0]+h[0],c[1]+h[1]];o.animateInternal({duration:void 0!==n?n:250,easing:eE,center:o.getConstrainedCenter(t)})}r.preventDefault(),i=!0}}return!i}},ro=class extends nG{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!n0(t)&&n2(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let i=!1;if(t.type==T.KEYDOWN||t.type==T.KEYPRESS){let n=t.originalEvent,r=n.key;if(this.condition_(t)&&("+"===r||"-"===r)){let s=t.map,o="+"===r?this.delta_:-this.delta_;nH(s.getView(),o,void 0,this.duration_),n.preventDefault(),i=!0}}return!i}},ra=class extends nG{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;let i=t.condition?t.condition:U;this.condition_=t.onFocusOnly?nz(n$,i):i,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==T.WHEEL)return!0;let i=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let r=n.deltaY;switch(n.deltaMode){case WheelEvent.DOM_DELTA_LINE:r*=40;break;case WheelEvent.DOM_DELTA_PAGE:r*=300}if(0===r)return!1;this.lastDelta_=r;let s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=4>Math.abs(r)?"trackpad":"wheel");let o=i.getView();if("trackpad"===this.mode_&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=r;let a=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),a),!1}handleWheelZoom_(t){let i=t.getView();i.getAnimating()&&i.cancelAnimations();let n=-tI(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(i.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),nH(i,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},rl=class extends n6{constructor(t){let i=t=t||{};i.stopDown||(i.stopDown=Q),super(i),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let i=0,n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){let t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),i=t}this.lastAngle_=s;let o=t.map,a=o.getView();a.getConstraints().rotation!==np&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(n3(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(i,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){let i=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}},rA=class extends n6{constructor(t){let i=t=t||{};i.stopDown||(i.stopDown=Q),super(i),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let i=1,n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(i=this.lastDistance_/a),this.lastDistance_=a;let l=t.map,A=l.getView();1!=i&&(this.lastScaleDelta_=i),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(n3(this.targetPointers))),l.render(),A.adjustResolutionInternal(i,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){let i=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){let i=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||i.getView().beginInteraction(),!0}return!1}};function rh(t){t=t||{};let i=new to,n=new nU(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&i.push(new n7),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&i.push(new nV({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&i.push(new n8({onFocusOnly:t.onFocusOnly,kinetic:n})),(void 0===t.pinchRotate||t.pinchRotate)&&i.push(new rl),(void 0===t.pinchZoom||t.pinchZoom)&&i.push(new rA({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(i.push(new rs),i.push(new ro({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&i.push(new ra({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&i.push(new rn({duration:t.zoomDuration})),i}var rc="opacity",ru="visible",rd="extent",rg="zIndex",rf="maxResolution",rp="minResolution",rm="maxZoom",r_="minZoom",ry="source",rw=class extends tn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;let i=Object.assign({},t);"object"==typeof t.properties&&(delete i.properties,Object.assign(i,t.properties)),i[rc]=void 0!==t.opacity?t.opacity:1,tb("number"==typeof i[rc],"Layer opacity must be a number"),i[ru]=void 0===t.visible||t.visible,i[rg]=t.zIndex,i[rf]=void 0!==t.maxResolution?t.maxResolution:1/0,i[rp]=void 0!==t.minResolution?t.minResolution:0,i[r_]=void 0!==t.minZoom?t.minZoom:-1/0,i[rm]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==i.className?i.className:"ol-layer",delete i.className,this.setProperties(i),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){let i=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return i.opacity=tI(Math.round(100*this.getOpacity())/100,0,1),i.visible=this.getVisible(),i.extent=this.getExtent(),i.zIndex=void 0!==n||i.managed?n:1/0,i.maxResolution=this.getMaxResolution(),i.minResolution=Math.max(this.getMinResolution(),0),i.minZoom=this.getMinZoom(),i.maxZoom=this.getMaxZoom(),this.state_=i,i}getLayersArray(t){return J()}getLayerStatesArray(t){return J()}getExtent(){return this.get(rd)}getMaxResolution(){return this.get(rf)}getMinResolution(){return this.get(rp)}getMinZoom(){return this.get(r_)}getMaxZoom(){return this.get(rm)}getOpacity(){return this.get(rc)}getSourceState(){return J()}getVisible(){return this.get(ru)}getZIndex(){return this.get(rg)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(rd,t)}setMaxResolution(t){this.set(rf,t)}setMinResolution(t){this.set(rp,t)}setMaxZoom(t){this.set(rm,t)}setMinZoom(t){this.set(r_,t)}setOpacity(t){tb("number"==typeof t,"Layer opacity must be a number"),this.set(rc,t)}setVisible(t){this.set(ru,t)}setZIndex(t){this.set(rg,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}};class rv extends K{constructor(t,i){super(t),this.layer=i}}const rb="layers";class rC extends rw{constructor(t){let i=Object.assign({},t=t||{});delete i.layers;let n=t.layers;super(i),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(rb,this.handleLayersChanged_),n?Array.isArray(n)?n=new to(n.slice(),{unique:!0}):tb("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new to(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Y),this.layersListenerKeys_.length=0;let t=this.getLayers();for(let i in this.layersListenerKeys_.push(W(t,F.ADD,this.handleLayersAdd_,this),W(t,F.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[i].forEach(Y);V(this.listenerKeys_);let i=t.getArray();for(let t=0,n=i.length;t<n;t++){let n=i[t];this.registerLayerListeners_(n),this.dispatchEvent(new rv("addlayer",n))}this.changed()}registerLayerListeners_(t){let i=[W(t,M.PROPERTYCHANGE,this.handleLayerChange_,this),W(t,T.CHANGE,this.handleLayerChange_,this)];t instanceof rC&&i.push(W(t,"addlayer",this.handleLayerGroupAdd_,this),W(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[te(t)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new rv("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new rv("removelayer",t.layer))}handleLayersAdd_(t){let i=t.element;this.registerLayerListeners_(i),this.dispatchEvent(new rv("addlayer",i)),this.changed()}handleLayersRemove_(t){let i=t.element,n=te(i);this.listenerKeys_[n].forEach(Y),delete this.listenerKeys_[n],this.dispatchEvent(new rv("removelayer",i)),this.changed()}getLayers(){return this.get(rb)}setLayers(t){let i=this.getLayers();if(i){let t=i.getArray();for(let i=0,n=t.length;i<n;++i)this.dispatchEvent(new rv("removelayer",t[i]))}this.set(rb,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach(function(i){i.getLayersArray(t)}),t}getLayerStatesArray(t){let i=void 0!==t?t:[],n=i.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(i)});let r=this.getLayerState(),s=r.zIndex;t||void 0!==r.zIndex||(s=0);for(let t=n,o=i.length;t<o;t++){let n=i[t];n.opacity*=r.opacity,n.visible=n.visible&&r.visible,n.maxResolution=Math.min(n.maxResolution,r.maxResolution),n.minResolution=Math.max(n.minResolution,r.minResolution),n.minZoom=Math.max(n.minZoom,r.minZoom),n.maxZoom=Math.min(n.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==n.extent?n.extent=ei(n.extent,r.extent):n.extent=r.extent),void 0===n.zIndex&&(n.zIndex=s)}return i}getSourceState(){return"ready"}}var rx={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};function rE(t,i){if(!t.visible)return!1;let n=i.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;let r=i.zoom;return r>t.minZoom&&r<=t.maxZoom}var rB=class extends rw{constructor(t){let i=Object.assign({},t);delete i.source,super(i),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ry,this.handleSourcePropertyChange_);let n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(ry)||null}getRenderSource(){return this.getSource()}getSourceState(){let t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Y(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let t=this.getSource();t&&(this.sourceChangeKey_=W(t,T.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let i,n,r=this.getMapInternal();if(!t&&r&&(t=r.getView()),!(i=t instanceof nw?{viewState:t.getState(),extent:t.calculateExtent()}:t).layerStatesArray&&r&&(i.layerStatesArray=r.getLayerGroup().getLayerStatesArray()),i.layerStatesArray){if(!(n=i.layerStatesArray.find(t=>t.layer===this)))return!1}else n=this.getLayerState();let s=this.getExtent();return rE(n,i.viewState)&&(!s||eo(s,i.extent))}getAttributions(t){if(!this.isVisible(t))return[];let i=this.getSource()?.getAttributions();if(!i)return[];let n=i(t instanceof nw?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,i){let n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,i)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,i){}renderDeferred(t){let i=this.getRenderer();i&&i.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&(Y(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Y(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=W(t,rx.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=W(this,T.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){let i=t.frameState.layerStatesArray,n=this.getLayerState(!1);tb(!i.some(t=>t.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),i.push(n)}setSource(t){this.set(ry,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}},rS={};rS=function(){function t(t,i,n){let r=t[i];t[i]=t[n],t[n]=r}function i(t,i){n(t,0,t.children.length,i,t)}function n(t,i,n,s,o){o||(o=c(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let a=i;a<n;a++){let i=t.children[a];r(o,t.leaf?s(i):i)}return o}function r(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function o(t,i){return t.minY-i.minY}function a(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function A(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function h(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function c(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function u(i,n,r,s,o){let a=[n,r];for(;a.length;){if((r=a.pop())-(n=a.pop())<=s)continue;let l=n+Math.ceil((r-n)/s/2)*s;(function i(n,r,s=0,o=n.length-1,a=function(t,i){return t<i?-1:+(t>i)}){for(;o>s;){if(o-s>600){let t=o-s+1,l=r-s+1,A=Math.log(t),h=.5*Math.exp(2*A/3),c=.5*Math.sqrt(A*h*(t-h)/t)*(l-t/2<0?-1:1);i(n,r,Math.max(s,Math.floor(r-l*h/t+c)),Math.min(o,Math.floor(r+(t-l)*h/t+c)),a)}let l=n[r],A=s,h=o;for(t(n,s,r),a(n[o],l)>0&&t(n,s,o);A<h;){for(t(n,A,h),A++,h--;0>a(n[A],l);)A++;for(;a(n[h],l)>0;)h--}0===a(n[s],l)?t(n,s,h):t(n,++h,o),h<=r&&(s=h+1),r<=h&&(o=h-1)}})(i,l,n,r,o),a.push(n,l,l,r)}}return class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let i=this.data,n=[];if(!h(t,i))return n;let r=this.toBBox,s=[];for(;i;){for(let o=0;o<i.children.length;o++){let a=i.children[o],l=i.leaf?r(a):a;h(t,l)&&(i.leaf?n.push(a):A(t,l)?this._all(a,n):s.push(a))}i=s.pop()}return n}collides(t){let i=this.data;if(!h(t,i))return!1;let n=[];for(;i;){for(let r=0;r<i.children.length;r++){let s=i.children[r],o=i.leaf?this.toBBox(s):s;if(h(t,o)){if(i.leaf||A(t,o))return!0;n.push(s)}}i=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){let t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=c([]),this}remove(t,i){let n,r,s;if(!t)return this;let o=this.data,a=this.toBBox(t),l=[],h=[];for(;o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],n=h.pop(),s=!0),o.leaf){let n=function(t,i,n){if(!n)return i.indexOf(t);for(let r=0;r<i.length;r++)if(n(t,i[r]))return r;return -1}(t,o.children,i);if(-1!==n)return o.children.splice(n,1),l.push(o),this._condense(l),this}s||o.leaf||!A(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(l.push(o),h.push(n),n=0,r=o,o=o.children[0])}return this}toBBox(t){return t}compareMinX(t,i){return t.minX-i.minX}compareMinY(t,i){return t.minY-i.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=[];for(;t;)t.leaf?i.push(...t.children):n.push(...t.children),t=n.pop();return i}_build(t,n,r,s){let o=r-n+1,a,l=this._maxEntries;if(o<=l)return i(a=c(t.slice(n,r+1)),this.toBBox),a;s||(s=Math.ceil(Math.log(o)/Math.log(l)),l=Math.ceil(o/Math.pow(l,s-1))),(a=c([])).leaf=!1,a.height=s;let A=Math.ceil(o/l),h=A*Math.ceil(Math.sqrt(l));u(t,n,r,h,this.compareMinX);for(let i=n;i<=r;i+=h){let n=Math.min(i+h-1,r);u(t,i,n,A,this.compareMinY);for(let r=i;r<=n;r+=A){let i=Math.min(r+A-1,n);a.children.push(this._build(t,r,i,s-1))}}return i(a,this.toBBox),a}_chooseSubtree(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){let n,r=1/0,s=1/0;for(let o=0;o<i.children.length;o++){let l=i.children[o],A=a(l),h=(Math.max(l.maxX,t.maxX)-Math.min(l.minX,t.minX))*(Math.max(l.maxY,t.maxY)-Math.min(l.minY,t.minY))-A;h<s?(s=h,r=A<r?A:r,n=l):h===s&&A<r&&(r=A,n=l)}i=n||i.children[0]}return i}_insert(t,i,n){let s=n?t:this.toBBox(t),o=[],a=this._chooseSubtree(s,this.data,i,o);for(a.children.push(t),r(a,s);i>=0&&o[i].children.length>this._maxEntries;)this._split(o,i),i--;this._adjustParentBBoxes(s,o,i)}_split(t,n){let r=t[n],s=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,s);let a=this._chooseSplitIndex(r,o,s),l=c(r.children.splice(a,r.children.length-a));l.height=r.height,l.leaf=r.leaf,i(r,this.toBBox),i(l,this.toBBox),n?t[n-1].children.push(l):this._splitRoot(r,l)}_splitRoot(t,n){this.data=c([t,n]),this.data.height=t.height+1,this.data.leaf=!1,i(this.data,this.toBBox)}_chooseSplitIndex(t,i,r){let s,o=1/0,l=1/0;for(let A=i;A<=r-i;A++){let i=n(t,0,A,this.toBBox),h=n(t,A,r,this.toBBox),c=function(t,i){let n=Math.max(t.minX,i.minX),r=Math.max(t.minY,i.minY);return Math.max(0,Math.min(t.maxX,i.maxX)-n)*Math.max(0,Math.min(t.maxY,i.maxY)-r)}(i,h),u=a(i)+a(h);c<o?(o=c,s=A,l=u<l?u:l):c===o&&u<l&&(l=u,s=A)}return s||r-i}_chooseSplitAxis(t,i,n){let r=t.leaf?this.compareMinX:s,a=t.leaf?this.compareMinY:o;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,a)&&t.children.sort(r)}_allDistMargin(t,i,s,o){t.children.sort(o);let a=this.toBBox,A=n(t,0,i,a),h=n(t,s-i,s,a),c=l(A)+l(h);for(let n=i;n<s-i;n++){let i=t.children[n];r(A,t.leaf?a(i):i),c+=l(A)}for(let n=s-i-1;n>=i;n--){let i=t.children[n];r(h,t.leaf?a(i):i),c+=l(h)}return c}_adjustParentBBoxes(t,i,n){for(let s=n;s>=0;s--)r(i[s],t)}_condense(t){for(let n,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(n=t[r-1].children).splice(n.indexOf(t[r]),1):this.clear():i(t[r],this.toBBox)}}}();const rI=[NaN,NaN,NaN,0],rL=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rF=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rM=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rT=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function rR(t,i){return t.endsWith("%")?Number(t.substring(0,t.length-1))/i:Number(t)}function rO(t){throw Error('failed to parse "'+t+'" as color')}const rD={};let rP=0;function rk(t){return t>.0031308?269.025*Math.pow(t,1/2.4)-14.025:3294.6*t}function rN(t){return t>.2068965?Math.pow(t,3):108/841*(t-4/29)}function rU(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function rQ(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function rH(t){let i=rU(t[0]),n=rU(t[1]),r=rU(t[2]),s=rQ(.222488403*i+.716873169*n+.06060791*r),o=500*(rQ(.452247074*i+.399439023*n+.148375274*r)-s),a=200*(s-rQ(.016863605*i+.117638439*n+.865350722*r)),l=180/Math.PI*Math.atan2(a,o);return[116*s-16,Math.sqrt(o*o+a*a),l<0?l+360:l,t[3]]}function rG(t){if("none"===t)return rI;if(rD.hasOwnProperty(t))return rD[t];if(rP>=1024){let t=0;for(let i in rD)(3&t++)==0&&(delete rD[i],--rP)}let n=function t(n){if(n.toLowerCase().startsWith("rgb")){let t=n.match(rF)||n.match(rL)||n.match(rM);if(t){let i=t[4],n=100/255;return[tI(rR(t[1],n)+.5|0,0,255),tI(rR(t[2],n)+.5|0,0,255),tI(rR(t[3],n)+.5|0,0,255),void 0!==i?tI(rR(i,100),0,1):1]}rO(n)}if(n.startsWith("#")){if(rT.test(n)){let t=n.substring(1),i=t.length<=4?1:2,r=[0,0,0,255];for(let n=0,s=t.length;n<s;n+=i){let s=parseInt(t.substring(n,n+i),16);1===i&&(s+=s<<4),r[n/i]=s}return r[3]=r[3]/255,r}rO(n)}let r=(i||(i=nL(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),i);r.fillStyle="#abcdef";let s=r.fillStyle;r.fillStyle=n,r.fillStyle===s&&(r.fillStyle="#fedcba",s=r.fillStyle,r.fillStyle=n,r.fillStyle===s&&rO(n));let o=r.fillStyle;if(o.startsWith("#")||o.startsWith("rgba"))return t(o);r.clearRect(0,0,1,1),r.fillRect(0,0,1,1);let a=Array.from(r.getImageData(0,0,1,1).data);return a[3]=tO(a[3]/255,3),a}(t);for(let i of(4!==n.length&&rO(t),n))isNaN(i)&&rO(t);return rD[t]=n,++rP,n}function rV(t){return Array.isArray(t)?t:rG(t)}function rz(t){let i=t[0];i!=(0|i)&&(i=i+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+i+","+n+","+r+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}function rK(t){return t[0]>0&&t[1]>0}function rj(t,i){return Array.isArray(t)?t:(void 0===i?i=[t,t]:(i[0]=t,i[1]=t),i)}let rW=0;const r$=1<<rW++,rY=1<<rW++,rq=1<<rW++,rX=1<<rW++,rZ=1<<rW++,rJ=1<<rW++,r0=Math.pow(2,rW)-1,r1={[r$]:"boolean",[rY]:"number",[rq]:"string",[rX]:"color",[rZ]:"number[]",[rJ]:"size"},r2=Object.keys(r1).map(Number).sort(O);function r5(t){let i=[];for(let r of r2){var n;(t&(n=r))===n&&i.push(r1[r])}return 0===i.length?"untyped":i.length<3?i.join(" or "):i.slice(0,-1).join(", ")+", or "+i[i.length-1]}class r4{constructor(t,i){if(!(t in r1))throw Error(`literal expressions must have a specific type, got ${r5(t)}`);this.type=t,this.value=i}}class r3{constructor(t,i,...n){this.type=t,this.operator=i,this.args=n}}function r6(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function r8(t,i,n){switch(typeof t){case"boolean":if(i===rq)return new r4(rq,t?"true":"false");if((i&r$)!==r$)throw Error(`got a boolean, but expected ${r5(i)}`);return new r4(r$,t);case"number":if(i===rJ)return new r4(rJ,rj(t));if(i===r$)return new r4(r$,!!t);if(i===rq)return new r4(rq,t.toString());if((i&rY)!==rY)throw Error(`got a number, but expected ${r5(i)}`);return new r4(rY,t);case"string":if(i===rX)return new r4(rX,rG(t));if(i===r$)return new r4(r$,!!t);if((i&rq)!==rq)throw Error(`got a string, but expected ${r5(i)}`);return new r4(rq,t)}if(!Array.isArray(t))throw Error("expression must be an array or a primitive value");if(0===t.length)throw Error("empty expression");if("string"==typeof t[0]){var r=t,s=i,o=n;let a=r[0],l=r9[a];if(!l)throw Error(`unknown operator: ${a}`);return l(r,s,o)}for(let i of t)if("number"!=typeof i)throw Error("expected an array of numbers");if(i===rJ){if(2!==t.length)throw Error(`expected an array of two values for a size, got ${t.length}`);return new r4(rJ,t)}if(i===rX){if(3===t.length)return new r4(rX,[...t,1]);if(4===t.length)return new r4(rX,t);throw Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if((i&rZ)!==rZ)throw Error(`got an array of numbers, but expected ${r5(i)}`);return new r4(rZ,t)}const r7={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},r9={[r7.Get]:sa(sn(1,1/0),st),[r7.Var]:sa(sn(1,1),function(t,i,n){let r=t[1];if("string"!=typeof r)throw Error("expected a string argument for var operation");return n.variables.add(r),[new r4(rq,r)]}),[r7.Has]:sa(sn(1,1/0),st),[r7.Id]:sa(function(t,i,n){n.featureId=!0},si),[r7.Concat]:sa(sn(2,1/0),ss(rq)),[r7.GeometryType]:sa(function(t,i,n){n.geometryType=!0},si),[r7.LineMetric]:sa(si),[r7.Resolution]:sa(se,si),[r7.Zoom]:sa(se,si),[r7.Time]:sa(se,si),[r7.Any]:sa(sn(2,1/0),ss(r$)),[r7.All]:sa(sn(2,1/0),ss(r$)),[r7.Not]:sa(sn(1,1),ss(r$)),[r7.Equal]:sa(sn(2,2),ss(r0)),[r7.NotEqual]:sa(sn(2,2),ss(r0)),[r7.GreaterThan]:sa(sn(2,2),ss(rY)),[r7.GreaterThanOrEqualTo]:sa(sn(2,2),ss(rY)),[r7.LessThan]:sa(sn(2,2),ss(rY)),[r7.LessThanOrEqualTo]:sa(sn(2,2),ss(rY)),[r7.Multiply]:sa(sn(2,1/0),sr),[r7.Coalesce]:sa(sn(2,1/0),sr),[r7.Divide]:sa(sn(2,2),ss(rY)),[r7.Add]:sa(sn(2,1/0),ss(rY)),[r7.Subtract]:sa(sn(2,2),ss(rY)),[r7.Clamp]:sa(sn(3,3),ss(rY)),[r7.Mod]:sa(sn(2,2),ss(rY)),[r7.Pow]:sa(sn(2,2),ss(rY)),[r7.Abs]:sa(sn(1,1),ss(rY)),[r7.Floor]:sa(sn(1,1),ss(rY)),[r7.Ceil]:sa(sn(1,1),ss(rY)),[r7.Round]:sa(sn(1,1),ss(rY)),[r7.Sin]:sa(sn(1,1),ss(rY)),[r7.Cos]:sa(sn(1,1),ss(rY)),[r7.Atan]:sa(sn(1,2),ss(rY)),[r7.Sqrt]:sa(sn(1,1),ss(rY)),[r7.Match]:sa(sn(4,1/0),so,function(t,i,n){let r=t.length-1,s=rq|rY|r$,o=r8(t[1],s,n),a=r8(t[t.length-1],i,n),l=Array(r-2);for(let i=0;i<r-2;i+=2){try{let r=r8(t[i+2],o.type,n);l[i]=r}catch(t){throw Error(`failed to parse argument ${i+1} of match expression: ${t.message}`)}try{let r=r8(t[i+3],a.type,n);l[i+1]=r}catch(t){throw Error(`failed to parse argument ${i+2} of match expression: ${t.message}`)}}return[o,...l,a]}),[r7.Between]:sa(sn(3,3),ss(rY)),[r7.Interpolate]:sa(sn(6,1/0),so,function(t,i,n){let r,s,o=t[1];switch(o[0]){case"linear":r=1;break;case"exponential":let a=o[1];if("number"!=typeof a||a<=0)throw Error(`expected a number base for exponential interpolation, got ${JSON.stringify(a)} instead`);r=a;break;default:throw Error(`invalid interpolation type: ${JSON.stringify(o)}`)}let l=new r4(rY,r);try{s=r8(t[2],rY,n)}catch(t){throw Error(`failed to parse argument 1 in interpolate expression: ${t.message}`)}let A=Array(t.length-3);for(let r=0;r<A.length;r+=2){try{let i=r8(t[r+3],rY,n);A[r]=i}catch(t){throw Error(`failed to parse argument ${r+2} for interpolate expression: ${t.message}`)}try{let s=r8(t[r+4],i,n);A[r+1]=s}catch(t){throw Error(`failed to parse argument ${r+3} for interpolate expression: ${t.message}`)}}return[l,s,...A]}),[r7.Case]:sa(sn(3,1/0),function(t,i,n){let r=t[0],s=t.length-1;if(s%2==0)throw Error(`expected an odd number of arguments for ${r}, got ${s} instead`)},function(t,i,n){let r=r8(t[t.length-1],i,n),s=Array(t.length-1);for(let i=0;i<s.length-1;i+=2){try{let r=r8(t[i+1],r$,n);s[i]=r}catch(t){throw Error(`failed to parse argument ${i} of case expression: ${t.message}`)}try{let o=r8(t[i+2],r.type,n);s[i+1]=o}catch(t){throw Error(`failed to parse argument ${i+1} of case expression: ${t.message}`)}}return s[s.length-1]=r,s}),[r7.In]:sa(sn(2,2),function(t,i,n){let r,s=t[2];if(!Array.isArray(s))throw Error('the second argument for the "in" operator must be an array');if("string"==typeof s[0]){if("literal"!==s[0])throw Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(s[1]))throw Error('failed to parse "in" expression: the literal operator must be followed by an array');s=s[1],r=rq}else r=rY;let o=Array(s.length);for(let t=0;t<o.length;t++)try{let i=r8(s[t],r,n);o[t]=i}catch(i){throw Error(`failed to parse haystack item ${t} for "in" expression: ${i.message}`)}return[r8(t[1],r,n),...o]}),[r7.Number]:sa(sn(1,1/0),ss(r0)),[r7.String]:sa(sn(1,1/0),ss(r0)),[r7.Array]:sa(sn(1,1/0),ss(rY)),[r7.Color]:sa(sn(1,4),ss(rY)),[r7.Band]:sa(sn(1,3),ss(rY)),[r7.Palette]:sa(sn(2,2),function(t,i,n){let r;try{r=r8(t[1],rY,n)}catch(t){throw Error(`failed to parse first argument in palette expression: ${t.message}`)}let s=t[2];if(!Array.isArray(s))throw Error("the second argument of palette must be an array");let o=Array(s.length);for(let t=0;t<o.length;t++){let i;try{i=r8(s[t],rX,n)}catch(i){throw Error(`failed to parse color at index ${t} in palette expression: ${i.message}`)}if(!(i instanceof r4))throw Error(`the palette color at index ${t} must be a literal value`);o[t]=i}return[r,...o]}),[r7.ToString]:sa(sn(1,1),ss(r$|rY|rq|rX))};function st(t,i,n){let r=t.length-1,s=Array(r);for(let i=0;i<r;++i){let r=t[i+1];switch(typeof r){case"number":s[i]=new r4(rY,r);break;case"string":s[i]=new r4(rq,r);break;default:throw Error(`expected a string key or numeric array index for a get operation, got ${r}`)}0===i&&n.properties.add(String(r))}return s}function se(t,i,n){n.mapState=!0}function si(t,i,n){let r=t[0];if(1!==t.length)throw Error(`expected no arguments for ${r} operation`);return[]}function sn(t,i){return function(n,r,s){let o=n[0],a=n.length-1;if(t===i){if(a!==t)throw Error(`expected ${t} argument${1===t?"":"s"} for ${o}, got ${a}`)}else if(a<t||a>i){let n=i===1/0?`${t} or more`:`${t} to ${i}`;throw Error(`expected ${n} arguments for ${o}, got ${a}`)}}}function sr(t,i,n){let r=t.length-1,s=Array(r);for(let o=0;o<r;++o){let r=r8(t[o+1],i,n);s[o]=r}return s}function ss(t){return function(i,n,r){let s=i.length-1,o=Array(s);for(let n=0;n<s;++n){let s=r8(i[n+1],t,r);o[n]=s}return o}}function so(t,i,n){let r=t[0],s=t.length-1;if(s%2==1)throw Error(`expected an even number of arguments for operation ${r}, got ${s} instead`)}function sa(...t){return function(i,n,r){let s,o=i[0];for(let o=0;o<t.length;o++){let a=t[o](i,n,r);if(o==t.length-1){if(!a)throw Error("expected last argument validator to return the parsed args");s=a}}return new r3(n,o,...s)}}function sl(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function sA(t,i,n){return function t(i,n){if(i instanceof r4){if(i.type===rX&&"string"==typeof i.value){let t=rG(i.value);return function(){return t}}return function(){return i.value}}let r=i.operator;switch(r){case r7.Number:case r7.String:case r7.Coalesce:var s=i,o=n;let a=s.operator,l=s.args.length,A=Array(l);for(let i=0;i<l;++i)A[i]=t(s.args[i],o);switch(a){case r7.Coalesce:return t=>{for(let i=0;i<l;++i){let n=A[i](t);if(null!=n)return n}throw Error("Expected one of the values to be non-null")};case r7.Number:case r7.String:return t=>{for(let i=0;i<l;++i){let n=A[i](t);if(typeof n===a)return n}throw Error(`Expected one of the values to be a ${a}`)};default:throw Error(`Unsupported assertion operator ${a}`)}case r7.Get:case r7.Var:case r7.Has:var h=i,c=0;let u=h.args[0].value;switch(h.operator){case r7.Get:return t=>{let i=h.args,n=t.properties[u];for(let t=1,r=i.length;t<r;++t)n=n[i[t].value];return n};case r7.Var:return t=>t.variables[u];case r7.Has:return t=>{let i=h.args;if(!(u in t.properties))return!1;let n=t.properties[u];for(let t=1,r=i.length;t<r;++t){let r=i[t].value;if(!n||!Object.hasOwn(n,r))return!1;n=n[r]}return!0};default:throw Error(`Unsupported accessor operator ${h.operator}`)}case r7.Id:return t=>t.featureId;case r7.GeometryType:return t=>t.geometryType;case r7.Concat:{let r=i.args.map(i=>t(i,n));return t=>"".concat(...r.map(i=>i(t).toString()))}case r7.Resolution:return t=>t.resolution;case r7.Any:case r7.All:case r7.Between:case r7.In:case r7.Not:var d=i,g=n;let f=d.operator,p=d.args.length,m=Array(p);for(let i=0;i<p;++i)m[i]=t(d.args[i],g);switch(f){case r7.Any:return t=>{for(let i=0;i<p;++i)if(m[i](t))return!0;return!1};case r7.All:return t=>{for(let i=0;i<p;++i)if(!m[i](t))return!1;return!0};case r7.Between:return t=>{let i=m[0](t),n=m[1](t),r=m[2](t);return i>=n&&i<=r};case r7.In:return t=>{let i=m[0](t);for(let n=1;n<p;++n)if(i===m[n](t))return!0;return!1};case r7.Not:return t=>!m[0](t);default:throw Error(`Unsupported logical operator ${f}`)}case r7.Equal:case r7.NotEqual:case r7.LessThan:case r7.LessThanOrEqualTo:case r7.GreaterThan:case r7.GreaterThanOrEqualTo:var _=i,y=n;let w=_.operator,v=t(_.args[0],y),b=t(_.args[1],y);switch(w){case r7.Equal:return t=>v(t)===b(t);case r7.NotEqual:return t=>v(t)!==b(t);case r7.LessThan:return t=>v(t)<b(t);case r7.LessThanOrEqualTo:return t=>v(t)<=b(t);case r7.GreaterThan:return t=>v(t)>b(t);case r7.GreaterThanOrEqualTo:return t=>v(t)>=b(t);default:throw Error(`Unsupported comparison operator ${w}`)}case r7.Multiply:case r7.Divide:case r7.Add:case r7.Subtract:case r7.Clamp:case r7.Mod:case r7.Pow:case r7.Abs:case r7.Floor:case r7.Ceil:case r7.Round:case r7.Sin:case r7.Cos:case r7.Atan:case r7.Sqrt:var C=i,x=n;let E=C.operator,B=C.args.length,S=Array(B);for(let i=0;i<B;++i)S[i]=t(C.args[i],x);switch(E){case r7.Multiply:return t=>{let i=1;for(let n=0;n<B;++n)i*=S[n](t);return i};case r7.Divide:return t=>S[0](t)/S[1](t);case r7.Add:return t=>{let i=0;for(let n=0;n<B;++n)i+=S[n](t);return i};case r7.Subtract:return t=>S[0](t)-S[1](t);case r7.Clamp:return t=>{let i=S[0](t),n=S[1](t);if(i<n)return n;let r=S[2](t);return i>r?r:i};case r7.Mod:return t=>S[0](t)%S[1](t);case r7.Pow:return t=>Math.pow(S[0](t),S[1](t));case r7.Abs:return t=>Math.abs(S[0](t));case r7.Floor:return t=>Math.floor(S[0](t));case r7.Ceil:return t=>Math.ceil(S[0](t));case r7.Round:return t=>Math.round(S[0](t));case r7.Sin:return t=>Math.sin(S[0](t));case r7.Cos:return t=>Math.cos(S[0](t));case r7.Atan:if(2===B)return t=>Math.atan2(S[0](t),S[1](t));return t=>Math.atan(S[0](t));case r7.Sqrt:return t=>Math.sqrt(S[0](t));default:throw Error(`Unsupported numeric operator ${E}`)}case r7.Case:var I=i,L=n;let F=I.args.length,M=Array(F);for(let i=0;i<F;++i)M[i]=t(I.args[i],L);return t=>{for(let i=0;i<F-1;i+=2)if(M[i](t))return M[i+1](t);return M[F-1](t)};case r7.Match:var T=i,R=n;let O=T.args.length,D=Array(O);for(let i=0;i<O;++i)D[i]=t(T.args[i],R);return t=>{let i=D[0](t);for(let n=1;n<O-1;n+=2)if(i===D[n](t))return D[n+1](t);return D[O-1](t)};case r7.Interpolate:var P=i,k=n;let N=P.args.length,U=Array(N);for(let i=0;i<N;++i)U[i]=t(P.args[i],k);return t=>{let i,n,r=U[0](t),s=U[1](t);for(let o=2;o<N;o+=2){let a=U[o](t),l=U[o+1](t),A=Array.isArray(l);if(A&&(l=function(t){if(4===t.length)return t;let i=t.slice();return i[3]=1,i}(l)),a>=s){if(2===o)return l;if(A)return function(t,i,n,r,s,o){if(0==s-n)return r;let a=rH(r),l=rH(o),A=l[2]-a[2];return A>180?A-=360:A<-180&&(A+=360),function(t){let i=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,s=rN(i),o=rN(i+n/500*Math.cos(r)),a=rN(i-n/200*Math.sin(r)),l=rk(3.021973625*o-1.617392459*s-.404875592*a),A=rk(-.943766287*o+1.916279586*s+.027607165*a),h=rk(.069407491*o-.22898585*s+1.159737864*a);return[tI(l+.5|0,0,255),tI(A+.5|0,0,255),tI(h+.5|0,0,255),t[3]]}([sh(t,i,n,a[0],s,l[0]),sh(t,i,n,a[1],s,l[1]),a[2]+sh(t,i,n,0,s,A),sh(t,i,n,r[3],s,o[3])])}(r,s,i,n,a,l);return sh(r,s,i,n,a,l)}i=a,n=l}return n};case r7.ToString:var Q=i,H=n;let G=Q.operator,V=Q.args.length,z=Array(V);for(let i=0;i<V;++i)z[i]=t(Q.args[i],H);if(G===r7.ToString)return t=>{let i=z[0](t);return Q.args[0].type===rX?rz(i):i.toString()};throw Error(`Unsupported convert operator ${G}`);default:throw Error(`Unsupported operator ${r}`)}}(r8(t,i,n),n)}function sh(t,i,n,r,s,o){let a=s-n;if(0===a)return r;let l=i-n;return r+(1===t?l/a:(Math.pow(t,l)-1)/(Math.pow(t,a)-1))*(o-r)}var sc={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function su(t,i,n){return i+":"+t+":"+(n?rV(n):"null")}const sd=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(let i in this.cache_){let n=this.cache_[i];(3&t++)==0&&!n.hasListener()&&(delete this.cache_[i],delete this.patternCache_[i],--this.cacheSize_)}}}get(t,i,n){let r=su(t,i,n);return r in this.cache_?this.cache_[r]:null}getPattern(t,i,n){let r=su(t,i,n);return r in this.patternCache_?this.patternCache_[r]:null}set(t,i,n,r,s){let o=su(t,i,n),a=o in this.cache_;this.cache_[o]=r,s&&(r.getImageState()===sc.IDLE&&r.load(),r.getImageState()===sc.LOADING?r.ready().then(()=>{this.patternCache_[o]=nF().createPattern(r.getImage(1),"repeat")}):this.patternCache_[o]=nF().createPattern(r.getImage(1),"repeat")),!a&&++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};let sg=null;class sf extends j{constructor(t,i,n,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=void 0===r?sc.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=i,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===sc.LOADED){sg||(sg=nL(1,1,void 0,{willReadFrequently:!0})),sg.drawImage(this.image_,0,0);try{sg.getImageData(0,0,1,1),this.tainted_=!1}catch{sg=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(T.CHANGE)}handleImageError_(){this.imageState_=sc.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=sc.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let t=this.size_[0],i=this.size_[1],n=nL(t,i);n.fillRect(0,0,t,i),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===sc.IDLE){var t,i;this.image_||this.initializeImage_(),this.imageState_=sc.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(t=this.image_,(i=this.src_)&&(t.src=i),t.src&&tf?new Promise((i,n)=>t.decode().then(()=>i(t)).catch(r=>t.complete&&t.width?i(t):n(r))):new Promise((i,n)=>{function r(){o(),i(t)}function s(){o(),n(Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s)})).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){var i;if(!this.color_||this.canvas_[t]||this.imageState_!==sc.LOADED)return;let n=this.image_,r=nL(Math.ceil(n.width*t),Math.ceil(n.height*t)),s=r.canvas;r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle="string"==typeof(i=this.color_)?i:rz(i),r.fillRect(0,0,s.width/t,s.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=s}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===sc.LOADED||this.imageState_===sc.ERROR)t();else{let i=()=>{(this.imageState_===sc.LOADED||this.imageState_===sc.ERROR)&&(this.removeEventListener(T.CHANGE,i),t())};this.addEventListener(T.CHANGE,i)}})),this.ready_}}function sp(t,i,n,r,s,o){let a=void 0===i?void 0:sd.get(i,n,s);return a||(a=new sf(t,t&&"src"in t?t.src||void 0:i,n,r,s),sd.set(i,n,s,a,o)),o&&a&&!sd.getPattern(i,n,s)&&sd.set(i,n,s,a,o),a}function sm(t){return t?Array.isArray(t)?rz(t):"object"==typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return sd.getPattern(t.src,"anonymous",t.color);let i=t.src+":"+t.offset,n=sd.getPattern(i,void 0,t.color);if(n)return n;let r=sd.get(t.src,"anonymous",null);if(r.getImageState()!==sc.LOADED)return null;let s=nL(t.size[0],t.size[1]);return s.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),sp(s.canvas,i,void 0,sc.LOADED,t.color,!0),sd.getPattern(i,void 0,t.color)}(t):t:null}const s_="10px sans-serif",sy="#000",sw="round",sv=[],sb="round",sC="#000",sx="center",sE="middle",sB=[0,0,0,0],sS=new tn;let sI=null;const sL={},sF=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]),sM=function(){let t,i;async function n(t){await i.ready;let n=await i.load(t);if(0===n.length)return!1;let r=nI(t),s=r.families[0].toLowerCase(),o=r.weight;return n.some(t=>{let i=t.family.replace(/^['"]|['"]$/g,"").toLowerCase(),n=nS[t.weight]||t.weight;return i===s&&t.style===r.style&&n==o})}async function r(){await i.ready;let s=!0,o=sS.getProperties(),a=Object.keys(o).filter(t=>o[t]<100);for(let t=a.length-1;t>=0;--t){let i=a[t],r=o[i];r<100&&(await n(i)?(V(sL),sS.set(i,100)):(r+=10,sS.set(i,r,!0),r<100&&(s=!1)))}t=void 0,s||(t=setTimeout(r,100))}return async function(n){i||(i=tg?self.fonts:document.fonts);let s=nI(n);if(!s)return;let o=s.families,a=!1;for(let t of o){var l,A;if(sF.has(t))continue;let i=(l=s.style,A=s.weight,`${l} ${A} 16px "${t}"`);void 0===sS.get(i)&&(sS.set(i,0,!0),a=!0)}a&&(clearTimeout(t),t=setTimeout(r,100))}}(),sT=function(t){let i=sL[t];if(void 0==i){if(tg){let n=nI(t),r=sR(t,"Žg");i=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else f||((f=document.createElement("div")).innerHTML="M",f.style.minHeight="0",f.style.maxHeight="none",f.style.height="auto",f.style.padding="0",f.style.border="none",f.style.position="absolute",f.style.display="block",f.style.left="-99999px"),f.style.font=t,document.body.appendChild(f),i=f.offsetHeight,document.body.removeChild(f);sL[t]=i}return i};function sR(t,i){return sI||(sI=nL(1,1)),t!=n&&(sI.font=t,n=sI.font),sI.measureText(i)}function sO(t,i,n){if(i in n)return n[i];let r=i.split("\n").reduce((i,n)=>Math.max(i,sR(t,n).width),0);return n[i]=r,r}class sD{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=rj(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new sD({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return J()}getImage(t){return J()}getHitDetectionImage(){return J()}getPixelRatio(t){return 1}getImageState(){return J()}getImageSize(){return J()}getOrigin(){return J()}getSize(){return J()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=rj(t)}listenImageChange(t){J()}load(){J()}unlistenImageChange(t){J()}ready(){return Promise.resolve()}}var sP=sD;class sk extends sP{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?sc.LOADING:sc.LOADED,this.imageState_===sc.LOADING&&this.ready().then(()=>this.imageState_=sc.LOADED),this.render()}clone(){let t=this.getScale(),i=new sk({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}getAnchor(){let t=this.size_,i=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-i[0]/n[0],t[1]/2+i[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let i=this.fill_?.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${i}`+Object.values(this.renderOptions_).join(","),r=sd.get(n,null,null)?.getImage(1);if(!r){let i=this.renderOptions_,s=Math.ceil(i.size*t),o=nL(s,s);this.draw_(i,o,t),r=o.canvas,sd.set(n,null,null,new sf(r,void 0,null,sc.LOADED,null))}return r}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,i,n){if(0===i||this.points_===1/0||"bevel"!==t&&"miter"!==t)return i;let r=this.radius,s=void 0===this.radius2_?r:this.radius2_;if(r<s){let t=r;r=s,s=t}let o=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),a=s*Math.sin(o),l=r-Math.sqrt(s*s-a*a),A=Math.sqrt(a*a+l*l),h=A/a;if("miter"===t&&h<=n)return h*i;let c=i/2/h,u=i/2*(l/A),d=Math.sqrt((r+c)*(r+c)+u*u)-r;if(void 0===this.radius2_||"bevel"===t)return 2*d;let g=r*Math.sin(o),f=s-Math.sqrt(r*r-g*g),p=Math.sqrt(g*g+f*f)/g;return p<=n?2*Math.max(d,p*i/2-s-r):2*d}createRenderOptions(){let t,i=sw,n=sb,r=0,s=null,o=0,a=0;this.stroke_&&(t=sm(this.stroke_.getColor()??sC),a=this.stroke_.getWidth()??1,s=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??sb,i=this.stroke_.getLineCap()??sw,r=this.stroke_.getMiterLimit()??10);let l=this.calculateLineJoinSize_(n,a,r);return{strokeStyle:t,strokeWidth:a,size:Math.ceil(2*Math.max(this.radius,this.radius2_||0)+l),lineCap:i,lineDash:s,lineDashOffset:o,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();let t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,i,n){if(i.scale(n,n),i.translate(t.size/2,t.size/2),this.createPath_(i),this.fill_){let t=this.fill_.getColor();null===t&&(t=sy),i.fillStyle=sm(t),i.fill()}t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineCap=t.lineCap,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}createHitDetectionCanvas_(t){let i;if(this.fill_){let n=this.fill_.getColor(),r=0;"string"==typeof n&&(n=rV(n)),null===n?r=1:Array.isArray(n)&&(r=4===n.length?n[3]:1),0===r&&(i=nL(t.size,t.size),this.drawHitDetectionCanvas_(t,i))}return i?i.canvas:this.getImage(1)}createPath_(t){let i=this.points_,n=this.radius;if(i===1/0)t.arc(0,0,n,0,2*Math.PI);else{let r=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(i*=2);let s=this.angle_-Math.PI/2,o=2*Math.PI/i;for(let a=0;a<i;a++){let i=s+a*o,l=a%2==0?n:r;t.lineTo(l*Math.cos(i),l*Math.sin(i))}t.closePath()}}drawHitDetectionCanvas_(t,i){i.translate(t.size/2,t.size/2),this.createPath_(i),i.fillStyle=sy,i.fill(),t.strokeStyle&&(i.strokeStyle=t.strokeStyle,i.lineWidth=t.strokeWidth,t.lineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit,i.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}var sN=sk;class sU extends sN{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),i=new sU({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return i.setOpacity(this.getOpacity()),i}setRadius(t){this.radius=t,this.render()}}class sQ{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){let t=this.getColor();return new sQ({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"==typeof t&&"src"in t){let i=sp(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));i.ready().then(()=>{this.patternImage_=null}),i.getImageState()===sc.IDLE&&i.load(),i.getImageState()===sc.LOADING&&(this.patternImage_=i)}this.color_=t}getKey(){let t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?te(t):"object"==typeof t&&"src"in t?t.src+":"+t.offset:rV(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function sH(t,i,n,r){return void 0!==n&&void 0!==r?[n/t,r/i]:void 0!==n?n/t:void 0!==r?r/i:1}class sG extends sP{constructor(t){let i,n=void 0!==(t=t||{}).opacity?t.opacity:1,r=void 0!==t.rotation?t.rotation:0;super({opacity:n,rotation:r,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;let s=void 0!==t.img?t.img:null,o=t.src;if(tb(!(void 0!==o&&s),"`image` and `src` cannot be provided at the same time"),(void 0===o||0===o.length)&&s&&(o=s.src||te(s)),tb(void 0!==o&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),tb(void 0===t.width&&void 0===t.height||void 0===t.scale,"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?i=sc.IDLE:void 0!==s&&(i="complete"in s?s.complete?s.src?sc.LOADED:sc.IDLE:sc.LOADING:sc.LOADED),this.color_=void 0!==t.color?rV(t.color):null,this.iconImage_=sp(s,o,this.crossOrigin_,i,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,this.initialOptions_,void 0!==t.width||void 0!==t.height){let i,n;if(t.size)[i,n]=t.size;else{let r=this.getImage(1);if(r.width&&r.height)i=r.width,n=r.height;else if(r instanceof HTMLImageElement){this.initialOptions_=t;let i=()=>{if(this.unlistenImageChange(i),!this.initialOptions_)return;let n=this.iconImage_.getSize();this.setScale(sH(n[0],n[1],t.width,t.height))};this.listenImageChange(i);return}}void 0!==i&&this.setScale(sH(i,n,t.width,t.height))}}clone(){let t,i,n;return this.initialOptions_?(i=this.initialOptions_.width,n=this.initialOptions_.height):t=Array.isArray(t=this.getScale())?t.slice():t,new sG({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:i,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let i=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!i)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=i[0]),"fraction"==this.anchorYUnits_&&(t[1]*=i[1])}if("top-left"!=this.anchorOrigin_){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+i[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}let i=this.getDisplacement(),n=this.getScaleArray();return[t[0]-i[0]/n[0],t[1]+i[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){let i=this.getSize(),n=this.iconImage_.getSize();if(!i||!n)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=n[0]-i[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=n[1]-i[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==sc.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){let t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==sc.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(T.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(T.CHANGE,t)}ready(){return this.iconImage_.ready()}}class sV{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new sV({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class sz{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=s$,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new sz({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(i){return i.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=s$,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let sK=null;function sj(t,i){if(!sK){let t=new sQ({color:"rgba(255,255,255,0.4)"}),i=new sV({color:"#3399CC",width:1.25});sK=[new sz({image:new sU({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return sK}function sW(){let t={},i=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new sz({fill:new sQ({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new sz({stroke:new sV({color:i,width:5})}),new sz({stroke:new sV({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new sz({image:new sU({radius:6,fill:new sQ({color:n}),stroke:new sV({color:i,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function s$(t){return t.getGeometry()}class sY{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=rj(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new sQ({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){let t=this.getScale();return new sY({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=rj(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}function sq(t){return!0}function sX(t){let i=r6(),n=t.length,r=Array(n);for(let s=0;s<n;++s)r[s]=sZ(t[s],i);let s=sl(),o=Array(n);return function(t,a){if(s.properties=t.getPropertiesInternal(),s.resolution=a,i.featureId){let i=t.getId();void 0!==i?s.featureId=i:s.featureId=null}let l=0;for(let t=0;t<n;++t){let i=r[t](s);i&&(o[l]=i,l+=1)}return o.length=l,o}}function sZ(t,i){var n,r;let s=sJ(t,"",i),o=s0(t,"",i),a=function(t,i){let n="text-",r=s2(t,n+"value",i);if(!r)return null;let s=sJ(t,n,i),o=sJ(t,n+"background-",i),a=s0(t,n,i),l=s0(t,n+"background-",i),A=s2(t,n+"font",i),h=s1(t,n+"max-angle",i),c=s1(t,n+"offset-x",i),u=s1(t,n+"offset-y",i),d=s5(t,n+"overflow",i),g=s2(t,n+"placement",i),f=s1(t,n+"repeat",i),p=s7(t,n+"scale",i),m=s5(t,n+"rotate-with-view",i),_=s1(t,n+"rotation",i),y=s2(t,n+"align",i),w=s2(t,n+"justify",i),v=s2(t,n+"baseline",i),b=s5(t,n+"keep-upright",i),C=s3(t,n+"padding",i),x=new sY({declutterMode:oi(t,n+"declutter-mode")});return function(t){if(x.setText(r(t)),s&&x.setFill(s(t)),o&&x.setBackgroundFill(o(t)),a&&x.setStroke(a(t)),l&&x.setBackgroundStroke(l(t)),A&&x.setFont(A(t)),h&&x.setMaxAngle(h(t)),c&&x.setOffsetX(c(t)),u&&x.setOffsetY(u(t)),d&&x.setOverflow(d(t)),g){let i=g(t);if("point"!==i&&"line"!==i)throw Error("Expected point or line for text-placement");x.setPlacement(i)}if(f&&x.setRepeat(f(t)),p&&x.setScale(p(t)),m&&x.setRotateWithView(m(t)),_&&x.setRotation(_(t)),y){let i=y(t);if("left"!==i&&"center"!==i&&"right"!==i&&"end"!==i&&"start"!==i)throw Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(i)}if(w){let i=w(t);if("left"!==i&&"right"!==i&&"center"!==i)throw Error("Expected left, right, or center for text-justify");x.setJustify(i)}if(v){let i=v(t);if("bottom"!==i&&"top"!==i&&"middle"!==i&&"alphabetic"!==i&&"hanging"!==i)throw Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(i)}return C&&x.setPadding(C(t)),b&&x.setKeepUpright(b(t)),x}}(t,i),l=(n=t,r=i,"icon-src"in n?function(t,i){let n="icon-",r=n+"src",s=or(t[r],r),o=s6(t,n+"anchor",i),a=s7(t,n+"scale",i),l=s1(t,n+"opacity",i),A=s6(t,n+"displacement",i),h=s1(t,n+"rotation",i),c=s5(t,n+"rotate-with-view",i),u=ot(t,n+"anchor-origin"),d=oe(t,n+"anchor-x-units"),g=oe(t,n+"anchor-y-units"),f=function(t,i){let n=t[i];if(void 0!==n)return oo(n,i)}(t,n+"color"),p=function(t,i){let n=t[i];if(void 0!==n){if("string"!=typeof n)throw Error(`Expected a string for ${i}`);return n}}(t,n+"cross-origin"),m=function(t,i){let n=t[i];if(void 0!==n)return on(n,i)}(t,n+"offset"),_=ot(t,n+"offset-origin"),y=s9(t,n+"width"),w=s9(t,n+"height"),v=new sG({src:s,anchorOrigin:u,anchorXUnits:d,anchorYUnits:g,color:f,crossOrigin:p,offset:m,offsetOrigin:_,height:w,width:y,size:function(t,i){let n=t[i];if(void 0!==n){if("number"==typeof n)return rj(n);if(!Array.isArray(n)||2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])throw Error(`Expected a number or size array for ${i}`);return n}}(t,n+"size"),declutterMode:oi(t,n+"declutter-mode")});return function(t){return l&&v.setOpacity(l(t)),A&&v.setDisplacement(A(t)),h&&v.setRotation(h(t)),c&&v.setRotateWithView(c(t)),a&&v.setScale(a(t)),o&&v.setAnchor(o(t)),v}}(n,r):"shape-points"in n?function(t,i){let n="shape-",r=n+"points",s=n+"radius",o=os(t[r],r),a=os(t[s],s),l=sJ(t,n,i),A=s0(t,n,i),h=s7(t,n+"scale",i),c=s6(t,n+"displacement",i),u=s1(t,n+"rotation",i),d=s5(t,n+"rotate-with-view",i),g=s9(t,n+"radius2"),f=new sN({points:o,radius:a,radius2:g,angle:s9(t,n+"angle"),declutterMode:oi(t,n+"declutter-mode")});return function(t){return l&&f.setFill(l(t)),A&&f.setStroke(A(t)),c&&f.setDisplacement(c(t)),u&&f.setRotation(u(t)),d&&f.setRotateWithView(d(t)),h&&f.setScale(h(t)),f}}(n,r):"circle-radius"in n?function(t,i){let n="circle-",r=sJ(t,n,i),s=s0(t,n,i),o=s1(t,n+"radius",i),a=s7(t,n+"scale",i),l=s6(t,n+"displacement",i),A=s1(t,n+"rotation",i),h=s5(t,n+"rotate-with-view",i),c=new sU({radius:5,declutterMode:oi(t,n+"declutter-mode")});return function(t){return o&&c.setRadius(o(t)),r&&c.setFill(r(t)),s&&c.setStroke(s(t)),l&&c.setDisplacement(l(t)),A&&c.setRotation(A(t)),h&&c.setRotateWithView(h(t)),a&&c.setScale(a(t)),c}}(n,r):null),A=s1(t,"z-index",i);if(!s&&!o&&!a&&!l&&!z(t))throw Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));let h=new sz;return function(t){let i=!0;if(s){let n=s(t);n&&(i=!1),h.setFill(n)}if(o){let n=o(t);n&&(i=!1),h.setStroke(n)}if(a){let n=a(t);n&&(i=!1),h.setText(n)}if(l){let n=l(t);n&&(i=!1),h.setImage(n)}return(A&&h.setZIndex(A(t)),i)?null:h}}function sJ(t,i,n){let r;if(i+"fill-pattern-src"in t)r=function(t,i,n){let r=s2(t,i+"pattern-src",n),s=s8(t,i+"pattern-offset",n),o=s8(t,i+"pattern-size",n),a=s4(t,i+"color",n);return function(t){return{src:r(t),offset:s&&s(t),size:o&&o(t),color:a&&a(t)}}}(t,i+"fill-",n);else{if("none"===t[i+"fill-color"])return t=>null;r=s4(t,i+"fill-color",n)}if(!r)return null;let s=new sQ;return function(t){let i=r(t);return i===rI?null:(s.setColor(i),s)}}function s0(t,i,n){let r=s1(t,i+"stroke-width",n),s=s4(t,i+"stroke-color",n);if(!r&&!s)return null;let o=s2(t,i+"stroke-line-cap",n),a=s2(t,i+"stroke-line-join",n),l=s3(t,i+"stroke-line-dash",n),A=s1(t,i+"stroke-line-dash-offset",n),h=s1(t,i+"stroke-miter-limit",n),c=new sV;return function(t){if(s){let i=s(t);if(i===rI)return null;c.setColor(i)}if(r&&c.setWidth(r(t)),o){let i=o(t);if("butt"!==i&&"round"!==i&&"square"!==i)throw Error("Expected butt, round, or square line cap");c.setLineCap(i)}if(a){let i=a(t);if("bevel"!==i&&"round"!==i&&"miter"!==i)throw Error("Expected bevel, round, or miter line join");c.setLineJoin(i)}return l&&c.setLineDash(l(t)),A&&c.setLineDashOffset(A(t)),h&&c.setMiterLimit(h(t)),c}}function s1(t,i,n){if(!(i in t))return;let r=sA(t[i],rY,n);return function(t){return os(r(t),i)}}function s2(t,i,n){if(!(i in t))return null;let r=sA(t[i],rq,n);return function(t){return or(r(t),i)}}function s5(t,i,n){if(!(i in t))return null;let r=sA(t[i],r$,n);return function(t){let n=r(t);if("boolean"!=typeof n)throw Error(`Expected a boolean for ${i}`);return n}}function s4(t,i,n){if(!(i in t))return null;let r=sA(t[i],rX,n);return function(t){return oo(r(t),i)}}function s3(t,i,n){if(!(i in t))return null;let r=sA(t[i],rZ,n);return function(t){return on(r(t),i)}}function s6(t,i,n){if(!(i in t))return null;let r=sA(t[i],rZ,n);return function(t){let n=on(r(t),i);if(2!==n.length)throw Error(`Expected two numbers for ${i}`);return n}}function s8(t,i,n){if(!(i in t))return null;let r=sA(t[i],rZ,n);return function(t){return oa(r(t),i)}}function s7(t,i,n){if(!(i in t))return null;let r=sA(t[i],rZ|rY,n);return function(t){var n,s;return n=r(t),s=i,"number"==typeof n?n:oa(n,s)}}function s9(t,i){let n=t[i];if(void 0!==n){if("number"!=typeof n)throw Error(`Expected a number for ${i}`);return n}}function ot(t,i){let n=t[i];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${i}`);return n}}function oe(t,i){let n=t[i];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw Error(`Expected pixels or fraction for ${i}`);return n}}function oi(t,i){let n=t[i];if(void 0!==n){if("string"!=typeof n)throw Error(`Expected a string for ${i}`);if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw Error(`Expected declutter, obstacle, or none for ${i}`);return n}}function on(t,i){if(!Array.isArray(t))throw Error(`Expected an array for ${i}`);let n=t.length;for(let r=0;r<n;++r)if("number"!=typeof t[r])throw Error(`Expected an array of numbers for ${i}`);return t}function or(t,i){if("string"!=typeof t)throw Error(`Expected a string for ${i}`);return t}function os(t,i){if("number"!=typeof t)throw Error(`Expected a number for ${i}`);return t}function oo(t,i){if("string"==typeof t)return t;let n=on(t,i),r=n.length;if(r<3||r>4)throw Error(`Expected a color with 3 or 4 values for ${i}`);return n}function oa(t,i){let n=on(t,i);if(2!==n.length)throw Error(`Expected an array of two numbers for ${i}`);return n}const oA="renderOrder";var oh=class extends rB{constructor(t){let i=Object.assign({},t=t||{});delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,super(i),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(oA)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,i){let n=this.getDeclutter();n in t.declutter==!1&&(t.declutter[n]=new(E(rS))(9)),this.getRenderer().renderDeclutter(t,i)}setRenderOrder(t){this.set(oA,t)}setStyle(t){this.style_=void 0===t?sj:t;let i=function(t){if(void 0===t)return sj;if(!t)return null;if("function"==typeof t||t instanceof sz)return t;if(!Array.isArray(t))return sX([t]);if(0===t.length)return[];let i=t.length,n=t[0];if(n instanceof sz){let n=Array(i);for(let r=0;r<i;++r){let i=t[r];if(!(i instanceof sz))throw Error("Expected a list of style instances");n[r]=i}return n}if("style"in n){let n=Array(i);for(let r=0;r<i;++r){let i=t[r];if(!("style"in i))throw Error("Expected a list of rules with a style property");n[r]=i}let r=r6(),s=function(t,i){let n=t.length,r=Array(n);for(let s=0;s<n;++s){let n,o=t[s],a="filter"in o?sA(o.filter,r$,i):sq;if(Array.isArray(o.style)){let t=o.style.length;n=Array(t);for(let r=0;r<t;++r)n[r]=sZ(o.style[r],i)}else n=[sZ(o.style,i)];r[s]={filter:a,styles:n}}return function(i){let s=[],o=!1;for(let a=0;a<n;++a)if((0,r[a].filter)(i)&&(!t[a].else||!o))for(let t of(o=!0,r[a].styles)){let n=t(i);n&&s.push(n)}return s}}(n,r),o=sl();return function(t,i){if(o.properties=t.getPropertiesInternal(),o.resolution=i,r.featureId){let i=t.getId();void 0!==i?o.featureId=i:o.featureId=null}return r.geometryType&&(o.geometryType=function t(i){if(!i)return"";let n=i.getType();switch(n){case"Point":case"LineString":case"Polygon":return n;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return n.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return t(i.getGeometries()[0]);default:return""}}(t.getGeometry())),s(o)}}return sX(t)}(t);this.styleFunction_=null===t?void 0:function(t){let i;if("function"==typeof t)i=t;else{let n;Array.isArray(t)?n=t:(tb("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),n=[t]),i=function(){return n}}return i}(i),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}},oc=class extends K{constructor(t,i,n,r){super(t),this.inversePixelTransform=i,this.frameState=n,this.context=r}};function ou(t,i){sd.expire()}var od=class extends R{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,i){J()}calculateMatrices2D(t){let i=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;iS(n,t.size[0]/2,t.size[1]/2,1/i.resolution,-1/i.resolution,-i.rotation,-i.center[0],-i.center[1]),iI(r,n)}forEachFeatureAtCoordinate(t,i,n,r,s,o,a,l){let A,h=i.viewState;function c(t,i,n,r){return s.call(o,i,t?n:null,r)}let u=h.projection,d=ew(t.slice(),u),g=[[0,0]];if(u.canWrapX()&&r){let t=es(u.getExtent());g.push([-t,0],[t,0])}let f=i.layerStatesArray,p=f.length,m=[],_=[];for(let r=0;r<g.length;r++)for(let s=p-1;s>=0;--s){let o=f[s],u=o.layer;if(u.hasRenderer()&&rE(o,h)&&a.call(l,u)){let s=u.getRenderer(),a=u.getSource();if(s&&a){let l=a.getWrapX()?d:t,h=c.bind(null,o.managed);_[0]=l[0]+g[r][0],_[1]=l[1]+g[r][1],A=s.forEachFeatureAtCoordinate(_,i,n,h,m)}if(A)return A}}if(0===m.length)return;let y=1/m.length;return m.forEach((t,i)=>t.distanceSq+=i*y),m.sort((t,i)=>t.distanceSq-i.distanceSq),m.some(t=>A=t.callback(t.feature,t.layer,t.geometry)),A}hasFeatureAtCoordinate(t,i,n,r,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,i,n,r,U,this,s,o)}getMap(){return this.map_}renderFrame(t){J()}scheduleExpireIconCache(t){sd.canExpireCache()&&t.postRenderFunctions.push(ou)}},og=class extends od{constructor(t){super(t),this.fontChangeListenerKey_=W(sS,M.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");let i=this.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",this.element_.className=nb+" ol-layers";let n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,i){let n=this.getMap();if(n.hasListener(t)){let r=new oc(t,void 0,i);n.dispatchEvent(r)}}disposeInternal(){Y(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(rx.PRECOMPOSE,t);let i=t.layerStatesArray.sort((t,i)=>t.zIndex-i.zIndex);i.some(t=>t.layer instanceof oh&&t.layer.getDeclutter())&&(t.declutter={});let n=t.viewState;this.children_.length=0;let r=[],s=null;for(let o=0,a=i.length;o<a;++o){let a=i[o];t.layerIndex=o;let l=a.layer,A=l.getSourceState();if(!rE(a,n)||"ready"!=A&&"undefined"!=A){l.unrender();continue}let h=l.render(t,s);h&&(h!==s&&(this.children_.push(h),s=h),r.push(a))}this.declutter(t,r),function(t,i){let n=t.childNodes;for(let r=0;;++r){let s=n[r],o=i[r];if(!s&&!o)break;if(s!==o){if(!s){t.appendChild(o);continue}if(!o){t.removeChild(s),--r;continue}t.insertBefore(o,s)}}}(this.element_,this.children_),this.dispatchRenderEvent(rx.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,i){if(t.declutter){for(let n=i.length-1;n>=0;--n){let r=i[n],s=r.layer;s.getDeclutter()&&s.renderDeclutter(t,r)}i.forEach(i=>i.layer.renderDeferred(t))}}},of=class extends tn{constructor(t){super(),t=t||{},this.on,this.once,this.un;let i=function(t){let i,n,r,s=null;void 0!==t.keyboardEventTarget&&(s="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);let o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new rC({layers:t.layers});return o[tw.LAYERGROUP]=a,o[tw.TARGET]=t.target,o[tw.VIEW]=t.view instanceof nw?t.view:new nw,void 0!==t.controls&&(Array.isArray(t.controls)?i=new to(t.controls.slice()):(tb("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new to(t.interactions.slice()):(tb("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new to(t.overlays.slice()):(tb("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),r=t.overlays):r=new to,{controls:i,interactions:n,keyboardEventTarget:s,overlays:r,values:o}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:td,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=iE(),this.pixelToCoordinateTransform_=iE(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=i.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=i.controls||nN(),this.interactions=i.interactions||rh({onFocusOnly:!0}),this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new tE(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(tw.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(tw.VIEW,this.handleViewChanged_),this.addChangeListener(tw.SIZE,this.handleSizeChanged_),this.addChangeListener(tw.TARGET,this.handleTargetChanged_),this.setProperties(i.values);let n=this;!t.view||t.view instanceof nw||t.view.then(function(t){n.setView(new nw(t))}),this.controls.addEventListener(F.ADD,t=>{t.element.setMap(this)}),this.controls.addEventListener(F.REMOVE,t=>{t.element.setMap(null)}),this.interactions.addEventListener(F.ADD,t=>{t.element.setMap(this)}),this.interactions.addEventListener(F.REMOVE,t=>{t.element.setMap(null)}),this.overlays_.addEventListener(F.ADD,t=>{this.addOverlayInternal_(t.element)}),this.overlays_.addEventListener(F.REMOVE,t=>{let i=t.element.getId();void 0!==i&&delete this.overlayIdIndex_[i.toString()],t.element.setMap(null)}),this.controls.forEach(t=>{t.setMap(this)}),this.interactions.forEach(t=>{t.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){!function t(i,n){if(i instanceof rB)return void i.setMapInternal(n);if(i instanceof rC){let r=i.getLayers().getArray();for(let i=0,s=r.length;i<s;++i)t(r[i],n)}}(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){let i=t.getId();void 0!==i&&(this.overlayIdIndex_[i.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,i,n){if(!this.frameState_||!this.renderer_)return;let r=this.getCoordinateFromPixelInternal(t),s=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,o=void 0!==n.layerFilter?n.layerFilter:U,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,i,null,o,null)}getFeaturesAtPixel(t,i){let n=[];return this.forEachFeatureAtPixel(t,function(t){n.push(t)},i),n}getAllLayers(){let t=[];return!function i(n){n.forEach(function(n){n instanceof rC?i(n.getLayers()):t.push(n)})}(this.getLayers()),t}hasFeatureAtPixel(t,i){if(!this.frameState_||!this.renderer_)return!1;let n=this.getCoordinateFromPixelInternal(t),r=void 0!==(i=void 0!==i?i:{}).layerFilter?i.layerFilter:U,s=void 0!==i.hitTolerance?i.hitTolerance:0,o=!1!==i.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){let i=this.viewport_.getBoundingClientRect(),n=this.getSize(),r=i.width/n[0],s=i.height/n[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-i.left)/r,(o.clientY-i.top)/s]}getTarget(){return this.get(tw.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){var i,n;return i=this.getCoordinateFromPixelInternal(t),n=this.getView().getProjection(),i}getCoordinateFromPixelInternal(t){let i=this.frameState_;return i?iB(i.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){let i=this.overlayIdIndex_[t.toString()];return void 0!==i?i:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(tw.LAYERGROUP)}setLayers(t){let i=this.getLayerGroup();if(t instanceof to)return void i.setLayers(t);let n=i.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let t=this.getLayerGroup().getLayerStatesArray();for(let i=0,n=t.length;i<n;++i){let n=t[i];if(!n.visible)continue;let r=n.layer.getRenderer();if(r&&!r.ready)return!0;let s=n.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){let i=iv(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(i)}getPixelFromCoordinateInternal(t){let i=this.frameState_;return i?iB(i.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(tw.SIZE)}getView(){return this.get(tw.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,i,n,r){return function(t,i,n,r,s){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][i.getKey()])return tC;let o=t.viewState.center,a=r[0]-o[0],l=r[1]-o[1];return 65536*Math.log(s)+Math.sqrt(a*a+l*l)/s}(this.frameState_,t,i,n,r)}handleBrowserEvent(t,i){let n=new tl(i=i||t.type,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;let i=t.originalEvent,n=i.type;if(n===tm.POINTERDOWN||n===T.WHEEL||n===T.KEYDOWN){let t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,r=i.target,s=n instanceof ShadowRoot?n.host===r?n.host.ownerDocument:n:n===t?t.documentElement:n;if(this.overlayContainerStopEvent_.contains(r)||!s.contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){let i=this.getInteractions().getArray().slice();for(let n=i.length-1;n>=0;n--){let r=i[n];if(r.getMap()===this&&r.getActive()&&this.getTargetElement()&&(!r.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){let t=this.frameState_,i=this.tileQueue_;if(!i.isEmpty()){let n=this.maxTilesLoading_,r=n;if(t){let i=t.viewHints;if(i[tB.ANIMATING]||i[tB.INTERACTING]){let i=Date.now()-t.time>8;n=8*!i,r=2*!i}}i.getTilesLoading()<n&&(i.reprioritize(),i.loadMoreTiles(n,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(rx.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(rx.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new ta(ty.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new ta(ty.LOADSTART,this,t))));let n=this.postRenderFunctions_;if(t)for(let i=0,r=n.length;i<r;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,i=this.targetChangeHandlerKeys_.length;t<i;++t)Y(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(T.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(T.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}let t=this.getTarget(),i="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=i,i){let t;for(let t in i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new og(this)),this.mapBrowserEventHandler_=new t_(this,this.moveTolerance_),tA)this.mapBrowserEventHandler_.addEventListener(tA[t],this.handleMapBrowserEvent.bind(this));if(this.viewport_.addEventListener(T.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(T.WHEEL,this.boundHandleBrowserEvent_,!!tp&&{passive:!1}),this.keyboardEventTarget_)t=this.keyboardEventTarget_;else{let n=i.getRootNode();t=n instanceof ShadowRoot?n.host:i}this.targetChangeHandlerKeys_=[W(t,T.KEYDOWN,this.handleBrowserEvent,this),W(t,T.KEYPRESS,this.handleBrowserEvent,this)];let n=i.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(i)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Y(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Y(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=W(t,M.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=W(t,T.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Y),this.layerGroupPropertyListenerKeys_=null);let t=this.getLayerGroup();t&&(this.handleLayerAdd_(new rv("addlayer",t)),this.layerGroupPropertyListenerKeys_=[W(t,M.PROPERTYCHANGE,this.render,this),W(t,T.CHANGE,this.render,this),W(t,"addlayer",this.handleLayerAdd_,this),W(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;let t=this.frameState_.layerStatesArray;for(let i=0,n=t.length;i<n;++i){let n=t[i].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){!function t(i){if(i instanceof rB)return void i.setMapInternal(null);i instanceof rC&&i.getLayers().forEach(t)}(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){let i=this.getSize(),n=this.getView(),r=this.frameState_,s=null;if(void 0!==i&&rK(i)&&n&&n.isDef()){let r=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:t9(o.center,o.resolution,o.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:r,wantedTiles:{},mapId:te(this),renderTargets:{}},o.nextCenter&&o.nextResolution){let t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=t9(o.nextCenter,o.nextResolution,t,i)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(this.previousExtent_&&(ea(this.previousExtent_)||t0(s.extent,this.previousExtent_))||(this.dispatchEvent(new ta(ty.MOVESTART,this,r)),this.previousExtent_=tZ(this.previousExtent_))),!this.previousExtent_||s.viewHints[tB.ANIMATING]||s.viewHints[tB.INTERACTING]||t0(s.extent,this.previousExtent_)||(this.dispatchEvent(new ta(ty.MOVEEND,this,s)),tz(s.extent,this.previousExtent_))),this.dispatchEvent(new ta(ty.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(ty.LOADSTART)||this.hasListener(ty.LOADEND)||this.hasListener(rx.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){let i=this.getLayerGroup();i&&this.handleLayerRemove_(new rv("removelayer",i)),this.set(tw.LAYERGROUP,t)}setSize(t){this.set(tw.SIZE,t)}setTarget(t){this.set(tw.TARGET,t)}setView(t){if(!t||t instanceof nw)return void this.set(tw.VIEW,t);this.set(tw.VIEW,new nw);let i=this;t.then(function(t){i.setView(new nw(t))})}updateSize(){let t,i=this.getTargetElement();if(i){let n=getComputedStyle(i),r=i.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),s=i.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(r)&&!isNaN(s)&&!rK(t=[Math.max(0,r),Math.max(0,s)])&&(i.offsetWidth||i.offsetHeight||i.getClientRects().length)&&eL("No map visible because the map container's width or height are 0.")}let n=this.getSize();!t||n&&N(t,n)||(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(t){let i=this.getView();i&&i.setViewportSize(t)}},op=class extends j{constructor(t,i,n){super(),n=n||{},this.tileCoord=t,this.state=i,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(T.CHANGE)}release(){this.setState(tv.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==tv.EMPTY){if(this.state!==tv.ERROR&&this.state>t)throw Error("Tile load sequence violation");this.state=t,this.changed()}}load(){J()}getAlpha(t,i){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=i,this.transitionStarts_[t]=n;let r=i-n+1e3/60;return r>=this.transition_?1:eb(r/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}};function om(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const o_=Error("disposed"),oy=[256,256];var ow=class extends op{constructor(t){super(t.tileCoord,tv.IDLE,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;let t=om(this.data_);return t?[t.width,t.height]:oy}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==tv.IDLE&&this.state!==tv.ERROR)return;this.state=tv.LOADING,this.changed();let t=this;this.loader_().then(function(i){t.data_=i,t.state=tv.LOADED,t.changed()}).catch(function(i){t.error_=i,t.state=tv.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(o_),this.controller_=null),super.disposeInternal()}},ov=class extends op{constructor(t,i,n,r,s,o){super(t,i,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=tv.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=tv.ERROR,this.unlistenImage_(),this.image_=function(){let t=nL(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=tv.LOADED:this.state=tv.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==tv.ERROR&&(this.state=tv.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==tv.IDLE&&(this.state=tv.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(t,i,n){let r=!0,s=!1,o=!1,a=[$(t,T.LOAD,function(){o=!0,s||i()})];return t.src&&tf?(s=!0,t.decode().then(function(){r&&i()}).catch(function(t){r&&(o?i():n())})):a.push($(t,T.ERROR,n)),function(){r=!1,a.forEach(Y)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}};class ob{constructor(t,i,n,r){this.minX=t,this.maxX=i,this.minY=n,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function oC(t,i,n,r,s){return void 0!==s?(s.minX=t,s.maxX=i,s.minY=n,s.maxY=r,s):new ob(t,i,n,r)}const ox=[];function oE(t,i,n,r,s){t.beginPath(),t.moveTo(0,0),t.lineTo(i,n),t.lineTo(r,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(i,r)+1,Math.max(n,s)),t.restore()}function oB(t,i){return Math.abs(t[4*i]-210)>2||Math.abs(t[4*i+3]-191.25)>2}function oS(t,i,n,r){let s=i_(n,i,t),o=ia(i,r,n),a=i.getMetersPerUnit();void 0!==a&&(o*=a);let l=t.getMetersPerUnit();void 0!==l&&(o/=l);let A=t.getExtent();if(!A||tj(A,s)){let i=ia(t,o,s)/o;isFinite(i)&&i>0&&(o/=i)}return o}var oI=class{constructor(t,i,n,r,s,o,a){this.sourceProj_=t,this.targetProj_=i;let l={},A=a?ih(t=>iB(a,i_(t,this.targetProj_,this.sourceProj_))):im(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){let i=t[0]+"/"+t[1];return l[i]||(l[i]=A(t)),l[i]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&es(r)>=es(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?es(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?es(this.targetProj_.getExtent()):null;let h=en(n),c=er(n),u=t8(n),d=t6(n),g=this.transformInv_(h),f=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),_=10+(o?Math.max(0,Math.ceil(Math.log2(t3(n)/(o*o*65536)))):0);if(this.addQuad_(h,c,u,d,g,f,p,m,_),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(i,n,r){t=Math.min(t,i.source[0][0],i.source[1][0],i.source[2][0])}),this.triangles_.forEach(i=>{if(Math.max(i.source[0][0],i.source[1][0],i.source[2][0])-t>this.sourceWorldWidth_/2){let n=[[i.source[0][0],i.source[0][1]],[i.source[1][0],i.source[1][1]],[i.source[2][0],i.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);let r=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-r<this.sourceWorldWidth_/2&&(i.source=n)}})}l={}}addTriangle_(t,i,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[t,i,n]})}addQuad_(t,i,n,r,s,o,a,l,A){let h=tG([s,o,a,l]),c=this.sourceWorldWidth_?es(h)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1,g=!1;if(A>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(g=es(tG([t,i,n,r]))/this.targetWorldWidth_>.25||g),!d&&this.sourceProj_.isGlobal()&&c&&(g=c>.25||g)),!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!eo(h,this.maxSourceExtent_))return;let f=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(A>0)g=!0;else if(1!=(f=8*!(isFinite(s[0])&&isFinite(s[1]))+4*!(isFinite(o[0])&&isFinite(o[1]))+2*!(isFinite(a[0])&&isFinite(a[1]))+ +!(isFinite(l[0])&&isFinite(l[1])))&&2!=f&&4!=f&&8!=f)return}if(A>0){if(!g){let i,r=[(t[0]+n[0])/2,(t[1]+n[1])/2],o=this.transformInv_(r);i=d?(tR(s[0],u)+tR(a[0],u))/2-tR(o[0],u):(s[0]+a[0])/2-o[0];let l=(s[1]+a[1])/2-o[1];g=i*i+l*l>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){let h=[(i[0]+n[0])/2,(i[1]+n[1])/2],c=this.transformInv_(h),u=[(r[0]+t[0])/2,(r[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,i,h,u,s,o,c,d,A-1),this.addQuad_(u,h,n,r,d,c,a,l,A-1)}else{let h=[(t[0]+i[0])/2,(t[1]+i[1])/2],c=this.transformInv_(h),u=[(n[0]+r[0])/2,(n[1]+r[1])/2],d=this.transformInv_(u);this.addQuad_(t,h,u,r,s,c,d,l,A-1),this.addQuad_(h,i,n,u,c,o,a,d,A-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(11&f)==0&&this.addTriangle_(t,n,r,s,a,l),(14&f)==0&&this.addTriangle_(t,n,i,s,a,o),f&&((13&f)==0&&this.addTriangle_(i,r,t,o,l,s),(7&f)==0&&this.addTriangle_(i,r,n,o,l,a))}calculateSourceExtent(){let t=tq();return this.triangles_.forEach(function(i,n,r){let s=i.source;t2(t,s[0]),t2(t,s[1]),t2(t,s[2])}),t}getTriangles(){return this.triangles_}},oL=class extends op{constructor(t,i,n,r,s,o,a,l,A,h,c,u){let d;super(s,tv.IDLE,u),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;let g=r.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent(),p=this.sourceTileGrid_.getExtent(),m=f?ei(g,f):g;if(0===t3(m)){this.state=tv.EMPTY;return}let _=t.getExtent();_&&(p=p?ei(p,_):_);let y=r.getResolution(this.wrappedTileCoord_[0]),w=((!isFinite(d=oS(t,n,t7(m),y))||d<=0)&&t4(m,function(i){return isFinite(d=oS(t,n,i,y))&&d>0}),d);if(!isFinite(w)||w<=0||(this.triangulation_=new oI(t,n,m,p,w*(void 0!==h?h:.5),y),0===this.triangulation_.getTriangles().length)){this.state=tv.EMPTY;return}this.sourceZ_=i.getZForResolution(w);let v=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(v[1]=tI(v[1],p[1],p[3]),v[3]=tI(v[3],p[1],p[3])):v=ei(v,p)),t3(v)){let n=0,r=0;t.canWrapX()&&(n=es(_),r=Math.floor((v[0]-_[0])/n)),eh(v.slice(),t,!0).forEach(t=>{let s=i.getTileRangeForExtentAndZ(t,this.sourceZ_);for(let t=s.minX;t<=s.maxX;t++)for(let i=s.minY;i<=s.maxY;i++){let s=A(this.sourceZ_,t,i,a);if(s){let t=r*n;this.sourceTiles_.push({tile:s,offset:t})}}++r}),0===this.sourceTiles_.length&&(this.state=tv.EMPTY)}else this.state=tv.EMPTY}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(i=>{let n=i.tile;if(n&&n.getState()==tv.LOADED){let r=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);r[0]+=i.offset,r[2]+=i.offset;let s=this.clipExtent_?.slice();s&&(s[0]+=i.offset,s[2]+=i.offset),t.push({extent:r,clipExtent:s,image:n.getImage()})}}),this.sourceTiles_.length=0,0===t.length)this.state=tv.ERROR;else{let i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),s="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],a=this.targetTileGrid_.getResolution(i),l=this.sourceTileGrid_.getResolution(this.sourceZ_),A=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,i,n,s,o,a,l,A,h,c,u,d,g,f){let p,m=nL(Math.round(n*t),Math.round(n*i),ox);if(d||(m.imageSmoothingEnabled=!1),0===h.length)return m.canvas;function _(t){return Math.round(t*n)/n}m.scale(n,n),m.globalCompositeOperation="lighter";let y=tq();h.forEach(function(t,i,n){t1(y,t.extent)});let w=n/s,v=(d?1:1.0000000596046448)/w;p=nL(Math.round(es(y)*w),Math.round(ee(y)*w),ox),d||(p.imageSmoothingEnabled=!1),h.forEach(function(t,i,n){if(t.image.width>0&&t.image.height>0){if(t.clipExtent){p.save();let i=(t.clipExtent[0]-y[0])*w,n=-(t.clipExtent[3]-y[3])*w,r=es(t.clipExtent)*w,s=ee(t.clipExtent)*w;p.rect(d?i:Math.round(i),d?n:Math.round(n),d?r:Math.round(i+r)-Math.round(i),d?s:Math.round(n+s)-Math.round(n)),p.clip()}let i=(t.extent[0]-y[0])*w,n=-(t.extent[3]-y[3])*w,r=es(t.extent)*w,s=ee(t.extent)*w;p.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,d?i:Math.round(i),d?n:Math.round(n),d?r:Math.round(i+r)-Math.round(i),d?s:Math.round(n+s)-Math.round(n)),t.clipExtent&&p.restore()}});let b=en(l);return A.getTriangles().forEach(function(t,i,n){let s,o=t.source,l=t.target,A=o[0][0],c=o[0][1],u=o[1][0],g=o[1][1],f=o[2][0],w=o[2][1],C=_((l[0][0]-b[0])/a),x=_(-(l[0][1]-b[1])/a),E=_((l[1][0]-b[0])/a),B=_(-(l[1][1]-b[1])/a),S=_((l[2][0]-b[0])/a),I=_(-(l[2][1]-b[1])/a),L=A,F=c;A=0,c=0;let M=function(t){let i=t.length;for(let n=0;n<i;n++){let r=n,s=Math.abs(t[n][n]);for(let o=n+1;o<i;o++){let i=Math.abs(t[o][n]);i>s&&(s=i,r=o)}if(0===s)return null;let o=t[r];t[r]=t[n],t[n]=o;for(let r=n+1;r<i;r++){let s=-t[r][n]/t[n][n];for(let o=n;o<i+1;o++)n==o?t[r][o]=0:t[r][o]+=s*t[n][o]}}let n=Array(i);for(let r=i-1;r>=0;r--){n[r]=t[r][i]/t[r][r];for(let s=r-1;s>=0;s--)t[s][i]-=t[s][r]*n[r]}return n}([[u-=L,g-=F,0,0,E-C],[f-=L,w-=F,0,0,S-C],[0,0,u,g,B-x],[0,0,f,w,I-x]]);if(M){if(m.save(),m.beginPath(),function(){if(void 0===r){let t=nL(6,6,ox);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",oE(t,4,5,4,0),oE(t,4,5,0,5);let i=t.getImageData(0,0,3,3).data;r=oB(i,0)||oB(i,4)||oB(i,8),nM(t),ox.push(t.canvas)}return r}()||!d){m.moveTo(E,B);let t=C-E,i=x-B;for(let n=0;n<4;n++)m.lineTo(E+_((n+1)*t/4),B+_(n*i/3)),3!=n&&m.lineTo(E+_((n+1)*t/4),B+_((n+1)*i/3));m.lineTo(S,I)}else m.moveTo(E,B),m.lineTo(C,x),m.lineTo(S,I);if(m.clip(),m.transform(M[0],M[2],M[1],M[3],C,x),m.translate(y[0]-L,y[3]-F),p)s=p.canvas,m.scale(v,-v);else{let t=h[0],i=t.extent;s=t.image,m.scale(es(i)/s.width,-ee(i)/s.height)}m.drawImage(s,0,0),m.restore()}}),p&&(nM(p),ox.push(p.canvas)),u&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,A.getTriangles().forEach(function(t,i,n){let r=t.target,s=(r[0][0]-b[0])/a,o=-(r[0][1]-b[1])/a,l=(r[1][0]-b[0])/a,A=-(r[1][1]-b[1])/a,h=(r[2][0]-b[0])/a,c=-(r[2][1]-b[1])/a;m.beginPath(),m.moveTo(l,A),m.lineTo(s,o),m.lineTo(h,c),m.closePath(),m.stroke()}),m.restore()),m.canvas}(s,o,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),a,A,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=tv.LOADED}this.changed()}load(){if(this.state==tv.IDLE){this.state=tv.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:i})=>{let n=i.getState();if(n==tv.IDLE||n==tv.LOADING){t++;let n=W(i,T.CHANGE,r=>{let s=i.getState();(s==tv.LOADED||s==tv.ERROR||s==tv.EMPTY)&&(Y(n),0==--t&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,n){t.getState()==tv.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Y),this.sourcesListenerKeys_=null}release(){this.canvas_&&(nM(this.canvas_.getContext("2d")),ox.push(this.canvas_),this.canvas_=null),super.release()}},oF=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){let t=this.pop();t instanceof R&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let i=this.oldest_;for(;i;)t(i.value_,i.key_,this),i=i.newer}get(t,i){let n=this.entries_[t];return tb(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){let i=this.entries_[t];return tb(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_?(this.newest_=i.older,this.newest_&&(this.newest_.newer=null)):i===this.oldest_?(this.oldest_=i.newer,this.oldest_&&(this.oldest_.older=null)):(i.newer.older=i.older,i.older.newer=i.newer),delete this.entries_[t],--this.count_,i.value_}getCount(){return this.count_}getKeys(){let t,i=Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)i[n++]=t.key_;return i}getValues(){let t,i=Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)i[n++]=t.value_;return i}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,i){this.get(t),this.entries_[t].value_=i}set(t,i){tb(!(t in this.entries_),"Tried to set a value for a key that is used already");let n={key_:t,newer:null,older:this.newest_,value_:i};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}};function oM(t,i,n,r){return void 0!==r?(r[0]=t,r[1]=i,r[2]=n,r):[t,i,n]}function oT(t){var i,n;return i=t[0],n=t[1],(n<<i)+t[2]}var oR=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(nF(),{get:(t,i)=>{if("function"==typeof nF()[i])return this.push_(i),this.pushMethodArgs_},set:(t,i,n)=>(this.push_(i,n),!0)})}push_(...t){let i=this.instructions_,n=this.zIndex+this.offset_;i[n]||(i[n]=[]),i[n].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(i=>{for(let n=0,r=i.length;n<r;++n){let r=i[n];if("function"==typeof r){r(t);continue}let s=i[++n];if("function"==typeof t[r])t[r](...s);else{if("function"==typeof s){t[r]=s(t);continue}t[r]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},oO=class extends Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=[],this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return J()}getData(t){return null}prepareFrame(t){return J()}renderFrame(t,i){return J()}forEachFeatureAtCoordinate(t,i,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let i=t.target;(i.getState()===sc.LOADED||i.getState()===sc.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let i=t.getState();return i!=sc.LOADED&&i!=sc.ERROR&&t.addEventListener(T.CHANGE,this.boundHandleImageChange_),i==sc.IDLE&&(t.load(),i=t.getState()),i==sc.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}};const oD=[];let oP=null;var ok=class extends oO{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=iE(),this.pixelTransform=iE(),this.inversePixelTransform=iE(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,i,n){let r;oP||(oP=nL(1,1,void 0,{willReadFrequently:!0})),oP.clearRect(0,0,1,1);try{oP.drawImage(t,i,n,1,1,0,0,1,1),r=oP.getImageData(0,0,1,1).data}catch{return oP=null,null}return r}getBackground(t){let i=this.getLayer().getBackground();return"function"==typeof i&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,i,n){let r,s,o=this.getLayer().getClassName();if(t&&t.className===o&&(!n||t&&t.style.backgroundColor&&N(rV(t.style.backgroundColor),rV(n)))){let i=t.firstElementChild;i instanceof HTMLCanvasElement&&(s=i.getContext("2d"))}if(s&&function(t,i){let n=iF(t),r=iF(i);for(let t=0;t<6;++t)if(0!==Math.round((n[t]-r[t])*iL[t]))return!1;return!0}(s.canvas.style.transform,i)?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(r=document.createElement("div")).className=o;let t=r.style;t.position="absolute",t.width="100%",t.height="100%";let i=(s=nL()).canvas;r.appendChild(i),(t=i.style).position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,i,n){let r=en(n),s=er(n),o=t8(n),a=t6(n);iB(i.coordinateToPixelTransform,r),iB(i.coordinateToPixelTransform,s),iB(i.coordinateToPixelTransform,o),iB(i.coordinateToPixelTransform,a);let l=this.inversePixelTransform;iB(l,r),iB(l,s),iB(l,o),iB(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,i){let n=t.extent,r=t.viewState.resolution,s=t.viewState.rotation,o=t.pixelRatio,a=Math.round(es(n)/r*o),l=Math.round(ee(n)/r*o);iS(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,s,-a/2,-l/2),iI(this.inversePixelTransform,this.pixelTransform);let A="matrix("+this.pixelTransform.join(", ")+")";if(this.useContainer(i,A,this.getBackground(t)),!this.containerReused){let t=this.context.canvas;t.width!=a||t.height!=l?(t.width=a,t.height=l):this.context.clearRect(0,0,a,l),A!==t.style.transform&&(t.style.transform=A)}}dispatchRenderEvent_(t,i,n){let r=this.getLayer();if(r.hasListener(t)){let s=new oc(t,this.inversePixelTransform,n,i);r.dispatchEvent(s)}}preRender(t,i){this.frameState=i,i.declutter||this.dispatchRenderEvent_(rx.PRERENDER,t,i)}postRender(t,i){i.declutter||this.dispatchRenderEvent_(rx.POSTRENDER,t,i)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new oR),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(rx.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(rx.POSTRENDER,this.context,t))}getRenderTransform(t,i,n,r,s,o,a){let l=r/i,A=-t[0]+a,h=-t[1];return iS(this.tempTransform,s/2,o/2,l,-l,-n,A,h)}disposeInternal(){delete this.frameState,super.disposeInternal()}};function oN(t,i,n,r,s){return`${te(t)},${i},${n+"/"+r+"/"+s}`}function oU(t,i,n){if(!(n in t))return t[n]=new Set([i]),!0;let r=t[n],s=r.has(i);return s||r.add(i),!s}function oQ(t,i){var n,r;let s=t.layerStatesArray[t.layerIndex];s.extent&&(i=ei(i,(n=s.extent,r=t.viewState.projection,n)));let o=s.layer.getRenderSource();if(!o.getWrapX()){let n=o.getTileGridForProjection(t.viewState.projection).getExtent();n&&(i=ei(i,n))}return i}var oH=class extends ok{constructor(t,i){super(t),i=i||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=tq(),this.tempTileRange_=new ob(0,0,0,0),this.tempTileCoord_=oM(0,0,0);let n=void 0!==i.cacheSize?i.cacheSize:512;this.tileCache_=new oF(n),this.maxStaleKeys=.5*n}getTileCache(){return this.tileCache_}getOrCreateTile(t,i,n,r){let s,o=this.tileCache_,a=this.getLayer().getSource(),l=oN(a,a.getKey(),t,i,n);if(o.containsKey(l))s=o.get(l);else{if(!(s=a.getTile(t,i,n,r.pixelRatio,r.viewState.projection)))return null;o.set(l,s)}return s}getTile(t,i,n,r){let s=this.getOrCreateTile(t,i,n,r);return s||null}getData(t){let i=this.frameState;if(!i)return null;let n=this.getLayer(),r=iB(i.pixelToCoordinateTransform,t.slice()),s=n.getExtent();if(s&&!tj(s,r))return null;let o=i.viewState,a=n.getRenderSource(),l=a.getTileGridForProjection(o.projection),A=a.getTilePixelRatio(i.pixelRatio);for(let t=l.getZForResolution(o.resolution);t>=l.getMinZoom();--t){let n,s=l.getTileCoordForCoordAndZ(r,t),h=this.getTile(t,s[1],s[2],i);if(!h||h.getState()!==tv.LOADED)continue;let c=l.getOrigin(t),u=rj(l.getTileSize(t)),d=l.getResolution(t);if(h instanceof ov||h instanceof oL)n=h.getImage();else if(!(h instanceof ow))continue;else if(!(n=om(h.getData())))continue;let g=Math.floor(A*((r[0]-c[0])/d-s[1]*u[0])),f=Math.floor(A*((c[1]-r[1])/d-s[2]*u[1])),p=Math.round(A*a.getGutterForProjection(o.projection));return this.getImageData(n,g+p,f+p)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;let i=this.getLayer().getSource();if(!i)return!1;let n=i.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===i.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=n,!0}enqueueTiles(t,i,n,r,s){let o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),A=l.getTileGridForProjection(o.projection),h=te(l);h in t.wantedTiles||(t.wantedTiles[h]={});let c=t.wantedTiles[h],u=a.getMapInternal(),d=Math.max(n-s,A.getMinZoom(),A.getZForResolution(Math.min(a.getMaxResolution(),u?u.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):A.getResolution(0)),l.zDirection)),g=o.rotation,f=g?et(o.center,o.resolution,g,t.size):void 0;for(let s=n;s>=d;--s){let n=A.getTileRangeForExtentAndZ(i,s,this.tempTileRange_),o=A.getResolution(s);for(let i=n.minX;i<=n.maxX;++i)for(let a=n.minY;a<=n.maxY;++a){if(g&&!A.tileCoordIntersectsViewport([s,i,a],f))continue;let n=this.getTile(s,i,a,t);if(!n||!oU(r,n,s))continue;let l=n.getKey();if(c[l]=!0,n.getState()===tv.IDLE&&!t.tileQueue.isKeyQueued(l)){let r=oM(s,i,a,this.tempTileCoord_);t.tileQueue.enqueue([n,h,A.getTileCoordCenter(r),o])}}}}findStaleTile_(t,i){let n=this.tileCache_,r=t[0],s=t[1],o=t[2],a=this.getStaleKeys();for(let t=0;t<a.length;++t){let l=oN(this.getLayer().getSource(),a[t],r,s,o);if(n.containsKey(l)){let t=n.peek(l);if(t.getState()===tv.LOADED)return t.endTransition(te(this)),oU(i,t,r),!0}}return!1}findAltTiles_(t,i,n,r){let s=t.getTileRangeForTileCoordAndZ(i,n,this.tempTileRange_);if(!s)return!1;let o=!0,a=this.tileCache_,l=this.getLayer().getRenderSource(),A=l.getKey();for(let t=s.minX;t<=s.maxX;++t)for(let i=s.minY;i<=s.maxY;++i){let s=oN(l,A,n,t,i),h=!1;if(a.containsKey(s)){let t=a.peek(s);t.getState()===tv.LOADED&&(oU(r,t,n),h=!0)}h||(o=!1)}return o}renderFrame(t,i){var n,r,s,o;let a;this.renderComplete=!0;let l=t.layerStatesArray[t.layerIndex],A=t.viewState,h=A.projection,c=A.resolution,u=A.center,d=t.pixelRatio,g=this.getLayer(),f=g.getSource(),p=f.getTileGridForProjection(h),m=p.getZForResolution(c,f.zDirection),_=p.getResolution(m),y=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==y&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=y):this.renderedSourceKey_=y;let w=t.extent,v=f.getTilePixelRatio(d);this.prepareContainer(t,i);let b=this.context.canvas.width,C=this.context.canvas.height,x=l.extent&&(n=l.extent,r=0,n);x&&(w=ei(w,(s=l.extent,o=0,s)));let E=_*b/2/v,B=_*C/2/v,S=[u[0]-E,u[1]-B,u[0]+E,u[1]+B],I={};this.renderedTiles.length=0;let L=g.getPreload();if(t.nextExtent){let i=p.getZForResolution(A.nextResolution,f.zDirection),n=oQ(t,t.nextExtent);this.enqueueTiles(t,n,i,I,L)}let F=oQ(t,w);if(this.enqueueTiles(t,F,m,I,0),L>0&&setTimeout(()=>{this.enqueueTiles(t,F,m-1,I,L-1)},0),!(m in I))return this.container;let M=te(this),T=t.time;for(let i of I[m]){let n=i.getState();if(n===tv.EMPTY)continue;let r=i.tileCoord;if(n===tv.LOADED&&1===i.getAlpha(M,T)){i.endTransition(M);continue}if(n!==tv.ERROR&&(this.renderComplete=!1),this.findStaleTile_(r,I)){!function(t,i,n){let r=t[n];r&&r.delete(i)}(I,i,m),t.animate=!0;continue}if(this.findAltTiles_(p,r,m+1,I))continue;let s=p.getMinZoom();for(let t=m-1;t>=s&&!this.findAltTiles_(p,r,t,I);--t);}let R=_/c*d/v,D=this.getRenderContext(t);iS(this.tempTransform,b/2,C/2,R,R,0,-b/2,-C/2),l.extent&&this.clipUnrotated(D,t,x),f.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,t);let P=Object.keys(I).map(Number);P.sort(O);let k=[],N=[];for(let i=P.length-1;i>=0;--i){let n=P[i],r=f.getTilePixelSize(n,d,h),s=p.getResolution(n)/_,o=r[0]*s*R,l=r[1]*s*R,A=p.getTileCoordForCoordAndZ(en(S),n),c=p.getTileCoordExtent(A),u=iB(this.tempTransform,[v*(c[0]-S[0])/_,v*(S[3]-c[3])/_]),g=v*f.getGutterForProjection(h);for(let i of I[n]){if(i.getState()!==tv.LOADED)continue;let r=i.tileCoord,s=A[1]-r[1],h=Math.round(u[0]-(s-1)*o),c=A[2]-r[2],d=Math.round(u[1]-(c-1)*l),p=Math.round(u[0]-s*o),m=Math.round(u[1]-c*l),_=h-p,y=d-m,w=1===P.length,v=!1;a=[p,m,p+_,m,p+_,m+y,p,m+y];for(let t=0,i=k.length;t<i;++t)if(!w&&n<N[t]){let i=k[t];eo([p,m,p+_,m+y],[i[0],i[3],i[4],i[7]])&&(v||(D.save(),v=!0),D.beginPath(),D.moveTo(a[0],a[1]),D.lineTo(a[2],a[3]),D.lineTo(a[4],a[5]),D.lineTo(a[6],a[7]),D.moveTo(i[6],i[7]),D.lineTo(i[4],i[5]),D.lineTo(i[2],i[3]),D.lineTo(i[0],i[1]),D.clip())}k.push(a),N.push(n),this.drawTile(i,t,p,m,_,y,g,w),v&&D.restore(),this.renderedTiles.unshift(i),this.updateUsedTiles(t.usedTiles,f,i)}}return this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!t0(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=d,this.postRender(this.context,t),l.extent&&D.restore(),D.imageSmoothingEnabled=!0,this.renderComplete&&t.postRenderFunctions.push((t,i)=>{let n=te(f),r=i.wantedTiles[n],s=r?Object.keys(r).length:0;this.updateCacheSize(s),this.tileCache_.expireCache()}),this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*t)}drawTile(t,i,n,r,s,o,a,l){let A;if(t instanceof ow){if(!(A=om(t.getData())))throw Error("Rendering array data is not yet supported")}else A=this.getTileImage(t);if(!A)return;let h=this.getRenderContext(i),c=te(this),u=i.layerStatesArray[i.layerIndex],d=u.opacity*(l?t.getAlpha(c,i.time):1),g=d!==h.globalAlpha;g&&(h.save(),h.globalAlpha=d),h.drawImage(A,a,a,A.width-2*a,A.height-2*a,n,r,s,o),g&&h.restore(),d!==u.opacity?i.animate=!0:l&&t.endTransition(c)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,i,n){let r=te(i);r in t||(t[r]={}),t[r][n.getKey()]=!0}},oG="preload",oV="useInterimTilesOnError",oz=class extends rB{constructor(t){let i=Object.assign({},t=t||{}),n=t.cacheSize;delete t.cacheSize,delete i.preload,delete i.useInterimTilesOnError,super(i),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(oG)}setPreload(t){this.set(oG,t)}getUseInterimTilesOnError(){return this.get(oV)}setUseInterimTilesOnError(t){this.set(oV,t)}getData(t){return super.getData(t)}},oK=class extends oz{constructor(t){super(t)}createRenderer(){return new oH(this,{cacheSize:this.getCacheSize()})}};const oj=[0,0,0];var oW=class{constructor(t){let i;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,tb(function(t,i,n){let r=i||O;return t.every(function(i,s){if(0===s)return!0;let o=r(t[s-1],i);return!(o>0||n&&0===o)})}(this.resolutions_,(t,i)=>i-t,!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let t=0,n=this.resolutions_.length-1;t<n;++t)if(i){if(this.resolutions_[t]/this.resolutions_[t+1]!==i){i=void 0;break}}else i=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=i,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,tb(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=en(n)),tb(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,tb(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,tb(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((t,i)=>{let r=new ob(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){let t=this.getTileRangeForExtentAndZ(n,i);r.minX=Math.max(t.minX,r.minX),r.maxX=Math.min(t.maxX,r.maxX),r.minY=Math.max(t.minY,r.minY),r.maxY=Math.min(t.maxY,r.maxY)}return r}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,i,n){let r=this.getTileRangeForExtentAndZ(t,i);for(let t=r.minX,s=r.maxX;t<=s;++t)for(let s=r.minY,o=r.maxY;s<=o;++s)n([i,t,s])}forEachTileCoordParentTileRange(t,i,n,r){let s,o,a,l=null,A=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);A>=this.minZoom;){if(s=void 0!==o&&void 0!==a?oC(o=Math.floor(o/2),o,a=Math.floor(a/2),a,n):this.getTileRangeForExtentAndZ(l,A,n),i(A,s))return!0;--A}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,i,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){let n=2*t[1],r=2*t[2];return oC(n,n+1,r,r+1,i)}let r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,i)}return null}getTileRangeForTileCoordAndZ(t,i,n){if(i>this.maxZoom||i<this.minZoom)return null;let r=t[0],s=t[1],o=t[2];if(i===r)return oC(s,o,s,o,n);if(this.zoomFactor_){let t=Math.pow(this.zoomFactor_,i-r),a=Math.floor(s*t),l=Math.floor(o*t);return i<r?oC(a,a,l,l,n):oC(a,Math.floor(t*(s+1))-1,l,Math.floor(t*(o+1))-1,n)}let a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,i,n)}getTileRangeForExtentAndZ(t,i,n){this.getTileCoordForXYAndZ_(t[0],t[3],i,!1,oj);let r=oj[1],s=oj[2];return this.getTileCoordForXYAndZ_(t[2],t[1],i,!0,oj),oC(r,oj[1],s,oj[2],n)}getTileCoordCenter(t){let i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=rj(this.getTileSize(t[0]),this.tmpSize_);return[i[0]+(t[1]+.5)*r[0]*n,i[1]-(t[2]+.5)*r[1]*n]}getTileCoordExtent(t,i){let n=this.getOrigin(t[0]),r=this.getResolution(t[0]),s=rj(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*s[0]*r,a=n[1]-(t[2]+1)*s[1]*r,l=o+s[0]*r,A=a+s[1]*r;return tX(o,a,l,A,i)}getTileCoordForCoordAndResolution(t,i,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],i,!1,n)}getTileCoordForXYAndResolution_(t,i,n,r,s){let o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),A=rj(this.getTileSize(o),this.tmpSize_),h=a*(t-l[0])/n/A[0],c=a*(l[1]-i)/n/A[1];return r?(h=tk(h,5)-1,c=tk(c,5)-1):(h=tP(h,5),c=tP(c,5)),oM(o,h,c,s)}getTileCoordForXYAndZ_(t,i,n,r,s){let o=this.getOrigin(n),a=this.getResolution(n),l=rj(this.getTileSize(n),this.tmpSize_),A=(t-o[0])/a/l[0],h=(o[1]-i)/a/l[1];return r?(A=tk(A,5)-1,h=tk(h,5)-1):(A=tP(A,5),h=tP(h,5)),oM(n,A,h,s)}getTileCoordForCoordAndZ(t,i,n){return this.getTileCoordForXYAndZ_(t[0],t[1],i,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,i){return tI(P(this.resolutions_,t,i||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,i){return ni(i,0,i.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let i=this.resolutions_.length,n=Array(i);for(let r=this.minZoom;r<i;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n}};function o$(t){let i=t.getDefaultTileGrid();return i||(i=function(t,i,n,r){var s=oq(t),o=void 0;o=void 0!==o?o:"top-left";let a=oY(s,void 0,void 0);return new oW({extent:s,origin:function(t,i){let n;if("bottom-left"===i)n=t6(t);else if("bottom-right"===i)n=t8(t);else if("top-left"===i)n=en(t);else if("top-right"===i)n=er(t);else throw Error("Invalid corner");return n}(s,o),resolutions:a,tileSize:n})}(t),t.setDefaultTileGrid(i)),i}function oY(t,i,n,r){i=void 0!==i?i:42,n=rj(void 0!==n?n:256);let s=ee(t),o=es(t);r=r>0?r:Math.max(o/n[0],s/n[1]);let a=i+1,l=Array(a);for(let t=0;t<a;++t)l[t]=r/Math.pow(2,t);return l}function oq(t){let i=(t=io(t)).getExtent();if(!i){let n=180*eF.degrees/t.getMetersPerUnit();i=tX(-n,-n,n,n)}return i}function oX(t,i){let n=[];Object.keys(i).forEach(function(t){null!==i[t]&&void 0!==i[t]&&n.push(t+"="+encodeURIComponent(i[t]))});let r=n.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+r}const oZ=/\{z\}/g,oJ=/\{x\}/g,o0=/\{y\}/g,o1=/\{-y\}/g;function o2(t){return t?"function"==typeof t?t:(Array.isArray(t)||(t=[t]),i=>t):null}var o5=class extends tn{constructor(t){super(),this.projection=io(t.projection),this.attributions_=o2(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let i=this;this.viewPromise_=new Promise(function(t,n){i.viewResolver=t,i.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=o2(t),this.changed()}setState(t){this.state_=t,this.changed()}};class o4 extends K{constructor(t,i){super(t),this.tile=i}}var o3=class extends o5{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileGrid&&rj(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tmpSize=[0,0],this.key_=t.key||te(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){let i=t?this.getTileGridForProjection(t):this.tileGrid;return i?i.getResolutions():null}getTile(t,i,n,r,s){return J()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:o$(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,i,n){var r;let s=this.getTileGridForProjection(n),o=this.getTilePixelRatio(i),a=rj(s.getTileSize(t),this.tmpSize);return 1==o?a:(void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=a[0]*o+.5|0,r[1]=a[1]*o+.5|0,r)}getTileCoordForTileUrlFunction(t,i){let n=void 0!==i?i:this.getProjection(),r=void 0!==i?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,i,n){let r=i[0],s=t.getTileCoordCenter(i),o=oq(n);if(!tj(o,s)){let i=es(o),n=Math.ceil((o[0]-s[0])/i);return s[0]+=i*n,t.getTileCoordForCoordAndZ(s,r)}return i}(r,t,n)),!function(t,i){let n=t[0],r=t[1],s=t[2];if(i.getMinZoom()>n||n>i.getMaxZoom())return!1;let o=i.getFullTileRange(n);return!o||o.containsXY(r,s)}(t,r)?null:t}clear(){}refresh(){this.clear(),super.refresh()}},o6={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class o8 extends o3{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===o8.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let i,n=t.target,r=te(n),s=n.getState();s==tv.LOADING?(this.tileLoadingKeys_[r]=!0,i=o6.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],i=s==tv.ERROR?o6.TILELOADERROR:s==tv.LOADED?o6.TILELOADEND:void 0),void 0!=i&&this.dispatchEvent(new o4(i,n))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,i){this.tileUrlFunction=t,void 0!==i?this.setKey(i):this.changed()}setUrl(t){let i=function(t){let i=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){let r,s=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(r=s;r<=o;++r)i.push(t.replace(n[0],String.fromCharCode(r)));return i}if(n=/\{(\d+)-(\d+)\}/.exec(t)){let r=parseInt(n[2],10);for(let s=parseInt(n[1],10);s<=r;s++)i.push(t.replace(n[0],s.toString()));return i}return i.push(t),i}(t);this.urls=i,this.setUrls(i)}setUrls(t){this.urls=t;let i=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,i){var n;let r=t.length,s=Array(r);for(let n=0;n<r;++n)s[n]=function(t,i){return function(n,r,s){var o,a,l;let A;if(!n)return;let h=n[0];if(i){let t=i.getFullTileRange(h);t&&(A=t.getHeight()-1)}return o=n[1],a=n[2],l=A,t.replace(oZ,h.toString()).replace(oJ,o.toString()).replace(o0,a.toString()).replace(o1,function(){if(void 0===l)throw Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(l-a).toString()})}}(t[n],i);return 1===(n=s).length?n[0]:function(t,i,r){if(!t)return;let s=tR(oT(t),n.length);return n[s](t,i,r)}}(t,this.tileGrid),i):this.setKey(i)}tileUrlFunction(t,i,n){}}var o7=o8;function o9(t,i){t.getImage().src=i}var at=class extends o7{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:o9,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:ov,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!id(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){let i=this.getProjection();if(this.tileGrid&&(!i||id(i,t)))return this.tileGrid;let n=te(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=o$(t)),this.tileGridForProjection[n]}createTile_(t,i,n,r,s,o){let a=[t,i,n],l=this.getTileCoordForTileUrlFunction(a,s),A=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(a,void 0!==A?tv.IDLE:tv.EMPTY,void 0!==A?A:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(T.CHANGE,this.handleTileChange.bind(this)),h}getTile(t,i,n,r,s){let o=this.getProjection();if(!o||!s||id(o,s))return this.getTileInternal(t,i,n,r,o||s);let a=[t,i,n],l=this.getKey(),A=this.getTileGridForProjection(o),h=this.getTileGridForProjection(s),c=this.getTileCoordForTileUrlFunction(a,s),u=new oL(o,A,s,h,a,c,this.getTilePixelRatio(r),this.getGutter(),(t,i,n,r)=>this.getTileInternal(t,i,n,r,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return u.key=l,u}getTileInternal(t,i,n,r,s){let o=this.getKey();return this.createTile_(t,i,n,r,s,o)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,i){let n=io(t);if(n){let t=te(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=i)}}},ae=class extends at{constructor(t){let i=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857";super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:void 0!==t.tileGrid?t.tileGrid:function(t){let i=t||{},n=i.extent||io("EPSG:3857").getExtent();return new oW({extent:n,minZoom:i.minZoom,tileSize:i.tileSize,resolutions:oY(n,i.maxZoom,i.tileSize,i.maxResolution)})}({extent:oq(i),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize}),tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}},ai=class extends ae{constructor(t){let i;i=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:i,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:void 0!==t.crossOrigin?t.crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:t.wrapX,zDirection:t.zDirection})}},an=(I("f1q41"),I("f1q41"),I("f1q41"));function ar(t,i){return function(){return t.apply(i,arguments)}}const{toString:as}=Object.prototype,{getPrototypeOf:ao}=Object,aa=(p=Object.create(null),t=>{let i=as.call(t);return p[i]||(p[i]=i.slice(8,-1).toLowerCase())}),al=t=>(t=t.toLowerCase(),i=>aa(i)===t),aA=t=>i=>typeof i===t,{isArray:ah}=Array,ac=aA("undefined"),au=al("ArrayBuffer"),ad=aA("string"),ag=aA("function"),af=aA("number"),ap=t=>null!==t&&"object"==typeof t,am=t=>{if("object"!==aa(t))return!1;let i=ao(t);return(null===i||i===Object.prototype||null===Object.getPrototypeOf(i))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},a_=al("Date"),ay=al("File"),aw=al("Blob"),av=al("FileList"),ab=al("URLSearchParams"),[aC,ax,aE,aB]=["ReadableStream","Request","Response","Headers"].map(al);function aS(t,i,{allOwnKeys:n=!1}={}){let r,s;if(null!=t)if("object"!=typeof t&&(t=[t]),ah(t))for(r=0,s=t.length;r<s;r++)i.call(null,t[r],r,t);else{let s,o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;for(r=0;r<a;r++)s=o[r],i.call(null,t[s],s,t)}}function aI(t,i){let n;i=i.toLowerCase();let r=Object.keys(t),s=r.length;for(;s-- >0;)if(i===(n=r[s]).toLowerCase())return n;return null}const aL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:C,aF=t=>!ac(t)&&t!==aL;const aM=(m="undefined"!=typeof Uint8Array&&ao(Uint8Array),t=>m&&t instanceof m),aT=al("HTMLFormElement"),aR=(({hasOwnProperty:t})=>(i,n)=>t.call(i,n))(Object.prototype),aO=al("RegExp"),aD=(t,i)=>{let n=Object.getOwnPropertyDescriptors(t),r={};aS(n,(n,s)=>{let o;!1!==(o=i(n,s,t))&&(r[s]=o||n)}),Object.defineProperties(t,r)},aP=al("AsyncFunction"),ak=(yE="function"==typeof setImmediate,yB=ag(aL.postMessage),yE?setImmediate:yB?(yS=`axios@${Math.random()}`,yI=[],aL.addEventListener("message",({source:t,data:i})=>{t===aL&&i===yS&&yI.length&&yI.shift()()},!1),t=>{yI.push(t),aL.postMessage(yS,"*")}):t=>setTimeout(t)),aN="undefined"!=typeof queueMicrotask?queueMicrotask.bind(aL):ak;var aU={isArray:ah,isArrayBuffer:au,isBuffer:function(t){return null!==t&&!ac(t)&&null!==t.constructor&&!ac(t.constructor)&&ag(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let i;return t&&("function"==typeof FormData&&t instanceof FormData||ag(t.append)&&("formdata"===(i=aa(t))||"object"===i&&ag(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let i;return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&au(t.buffer)},isString:ad,isNumber:af,isBoolean:t=>!0===t||!1===t,isObject:ap,isPlainObject:am,isReadableStream:aC,isRequest:ax,isResponse:aE,isHeaders:aB,isUndefined:ac,isDate:a_,isFile:ay,isBlob:aw,isRegExp:aO,isFunction:ag,isStream:t=>ap(t)&&ag(t.pipe),isURLSearchParams:ab,isTypedArray:aM,isFileList:av,forEach:aS,merge:function t(){let{caseless:i}=aF(this)&&this||{},n={},r=(r,s)=>{let o=i&&aI(n,s)||s;am(n[o])&&am(r)?n[o]=t(n[o],r):am(r)?n[o]=t({},r):ah(r)?n[o]=r.slice():n[o]=r};for(let t=0,i=arguments.length;t<i;t++)arguments[t]&&aS(arguments[t],r);return n},extend:(t,i,n,{allOwnKeys:r}={})=>(aS(i,(i,r)=>{n&&ag(i)?t[r]=ar(i,n):t[r]=i},{allOwnKeys:r}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,i,n,r)=>{t.prototype=Object.create(i.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:i.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,i,n,r)=>{let s,o,a,l={};if(i=i||{},null==t)return i;do{for(o=(s=Object.getOwnPropertyNames(t)).length;o-- >0;)a=s[o],(!r||r(a,t,i))&&!l[a]&&(i[a]=t[a],l[a]=!0);t=!1!==n&&ao(t)}while(t&&(!n||n(t,i))&&t!==Object.prototype)return i},kindOf:aa,kindOfTest:al,endsWith:(t,i,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=i.length;let r=t.indexOf(i,n);return -1!==r&&r===n},toArray:t=>{if(!t)return null;if(ah(t))return t;let i=t.length;if(!af(i))return null;let n=Array(i);for(;i-- >0;)n[i]=t[i];return n},forEachEntry:(t,i)=>{let n,r=(t&&t[Symbol.iterator]).call(t);for(;(n=r.next())&&!n.done;){let r=n.value;i.call(t,r[0],r[1])}},matchAll:(t,i)=>{let n,r=[];for(;null!==(n=t.exec(i));)r.push(n);return r},isHTMLForm:aT,hasOwnProperty:aR,hasOwnProp:aR,reduceDescriptors:aD,freezeMethods:t=>{aD(t,(i,n)=>{if(ag(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;if(ag(t[n])){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet:(t,i)=>{let n={};return(ah(t)?t:String(t).split(i)).forEach(t=>{n[t]=!0}),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,n){return i.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(t,i)=>null!=t&&Number.isFinite(t*=1)?t:i,findKey:aI,global:aL,isContextDefined:aF,isSpecCompliantForm:function(t){return!!(t&&ag(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{let i=Array(10),n=(t,r)=>{if(ap(t)){if(i.indexOf(t)>=0)return;if(!("toJSON"in t)){i[r]=t;let s=ah(t)?[]:{};return aS(t,(t,i)=>{let o=n(t,r+1);ac(o)||(s[i]=o)}),i[r]=void 0,s}}return t};return n(t,0)},isAsyncFn:aP,isThenable:t=>t&&(ap(t)||ag(t))&&ag(t.then)&&ag(t.catch),setImmediate:ak,asap:aN};function aQ(t,i,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack,this.message=t,this.name="AxiosError",i&&(this.code=i),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}aU.inherits(aQ,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:aU.toJSONObject(this.config),code:this.code,status:this.status}}});const aH=aQ.prototype,aG={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{aG[t]={value:t}}),Object.defineProperties(aQ,aG),Object.defineProperty(aH,"isAxiosError",{value:!0}),aQ.from=(t,i,n,r,s,o)=>{let a=Object.create(aH);return aU.toFlatObject(t,a,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t),aQ.call(a,t.message,i,n,r,s),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a},yN=function(t){for(var i,n=t.length,r=n%3,s=[],o=0,a=n-r;o<a;o+=16383)s.push(function(t,i,n){for(var r,s=[],o=i;o<n;o+=3)r=(t[o]<<16&0xff0000)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(aV[r>>18&63]+aV[r>>12&63]+aV[r>>6&63]+aV[63&r]);return s.join("")}(t,o,o+16383>a?a:o+16383));return 1===r?s.push(aV[(i=t[n-1])>>2]+aV[i<<4&63]+"=="):2===r&&s.push(aV[(i=(t[n-2]<<8)+t[n-1])>>10]+aV[i>>4&63]+aV[i<<2&63]+"="),s.join("")};for(var aV=[],az=[],aK="undefined"!=typeof Uint8Array?Uint8Array:Array,aj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aW=0,a$=aj.length;aW<a$;++aW)aV[aW]=aj[aW],az[aj.charCodeAt(aW)]=aW;az[45]=62,az[95]=63,yU=function(t,i,n,r,s){var o,a,l=8*s-r-1,A=(1<<l)-1,h=A>>1,c=-7,u=n?s-1:0,d=n?-1:1,g=t[i+u];for(u+=d,o=g&(1<<-c)-1,g>>=-c,c+=l;c>0;o=256*o+t[i+u],u+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[i+u],u+=d,c-=8);if(0===o)o=1-h;else{if(o===A)return a?NaN:1/0*(g?-1:1);a+=Math.pow(2,r),o-=h}return(g?-1:1)*a*Math.pow(2,o-r)},yQ=function(t,i,n,r,s,o){var a,l,A,h=8*o-s-1,c=(1<<h)-1,u=c>>1,d=5960464477539062e-23*(23===s),g=r?0:o-1,f=r?1:-1,p=+(i<0||0===i&&1/i<0);for(isNaN(i=Math.abs(i))||i===1/0?(l=+!!isNaN(i),a=c):(a=Math.floor(Math.log(i)/Math.LN2),i*(A=Math.pow(2,-a))<1&&(a--,A*=2),a+u>=1?i+=d/A:i+=d*Math.pow(2,1-u),i*A>=2&&(a++,A/=2),a+u>=c?(l=0,a=c):a+u>=1?(l=(i*A-1)*Math.pow(2,s),a+=u):(l=i*Math.pow(2,u-1)*Math.pow(2,s),a=0));s>=8;t[n+g]=255&l,g+=f,l/=256,s-=8);for(a=a<<s|l,h+=s;h>0;t[n+g]=255&a,g+=f,a/=256,h-=8);t[n+g-f]|=128*p};const aY="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function aq(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');let i=new Uint8Array(t);return Object.setPrototypeOf(i,aX.prototype),i}function aX(t,i,n){if("number"==typeof t){if("string"==typeof i)throw TypeError('The "string" argument must be of type string. Received type number');return a0(t)}return aZ(t,i,n)}function aZ(t,i,n){if("string"==typeof t){var r=t,s=i;if(("string"!=typeof s||""===s)&&(s="utf8"),!aX.isEncoding(s))throw TypeError("Unknown encoding: "+s);let n=0|a4(r,s),o=aq(n),a=o.write(r,s);return a!==n&&(o=o.slice(0,a)),o}if(ArrayBuffer.isView(t)){var o=t;if(lm(o,Uint8Array)){let t=new Uint8Array(o);return a2(t.buffer,t.byteOffset,t.byteLength)}return a1(o)}if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(lm(t,ArrayBuffer)||t&&lm(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(lm(t,SharedArrayBuffer)||t&&lm(t.buffer,SharedArrayBuffer)))return a2(t,i,n);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let a=t.valueOf&&t.valueOf();if(null!=a&&a!==t)return aX.from(a,i,n);let l=function(t){if(aX.isBuffer(t)){let i=0|a5(t.length),n=aq(i);return 0===n.length||t.copy(n,0,0,i),n}return void 0!==t.length?"number"!=typeof t.length||function(t){return t!=t}(t.length)?aq(0):a1(t):"Buffer"===t.type&&Array.isArray(t.data)?a1(t.data):void 0}(t);if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return aX.from(t[Symbol.toPrimitive]("string"),i,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function aJ(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function a0(t){return aJ(t),aq(t<0?0:0|a5(t))}function a1(t){let i=t.length<0?0:0|a5(t.length),n=aq(i);for(let r=0;r<i;r+=1)n[r]=255&t[r];return n}function a2(t,i,n){let r;if(i<0||t.byteLength<i)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<i+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===i&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,i):new Uint8Array(t,i,n),aX.prototype),r}function a5(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function a4(t,i){if(aX.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||lm(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let s=!1;for(;;)switch(i){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return lg(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return lf(t).length;default:if(s)return r?-1:lg(t).length;i=(""+i).toLowerCase(),s=!0}}function a3(t,i,n){let r=!1;if((void 0===i||i<0)&&(i=0),i>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(i>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,i,n){let r=t.length;(!i||i<0)&&(i=0),(!n||n<0||n>r)&&(n=r);let s="";for(let r=i;r<n;++r)s+=l_[t[r]];return s}(this,i,n);case"utf8":case"utf-8":return a9(this,i,n);case"ascii":return function(t,i,n){let r="";n=Math.min(t.length,n);for(let s=i;s<n;++s)r+=String.fromCharCode(127&t[s]);return r}(this,i,n);case"latin1":case"binary":return function(t,i,n){let r="";n=Math.min(t.length,n);for(let s=i;s<n;++s)r+=String.fromCharCode(t[s]);return r}(this,i,n);case"base64":var s,o,a;return s=this,o=i,a=n,0===o&&a===s.length?yN(s):yN(s.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,i,n){let r=t.slice(i,n),s="";for(let t=0;t<r.length-1;t+=2)s+=String.fromCharCode(r[t]+256*r[t+1]);return s}(this,i,n);default:if(r)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function a6(t,i,n){let r=t[i];t[i]=t[n],t[n]=r}function a8(t,i,n,r,s){var o;if(0===t.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(o=n*=1)!=o&&(n=s?0:t.length-1),n<0&&(n=t.length+n),n>=t.length)if(s)return -1;else n=t.length-1;else if(n<0)if(!s)return -1;else n=0;if("string"==typeof i&&(i=aX.from(i,r)),aX.isBuffer(i))return 0===i.length?-1:a7(t,i,n,r,s);if("number"==typeof i){if(i&=255,"function"==typeof Uint8Array.prototype.indexOf)if(s)return Uint8Array.prototype.indexOf.call(t,i,n);else return Uint8Array.prototype.lastIndexOf.call(t,i,n);return a7(t,[i],n,r,s)}throw TypeError("val must be string, number or Buffer")}function a7(t,i,n,r,s){let o,a=1,l=t.length,A=i.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||i.length<2)return -1;a=2,l/=2,A/=2,n/=2}function h(t,i){return 1===a?t[i]:t.readUInt16BE(i*a)}if(s){let r=-1;for(o=n;o<l;o++)if(h(t,o)===h(i,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===A)return r*a}else -1!==r&&(o-=o-r),r=-1}else for(n+A>l&&(n=l-A),o=n;o>=0;o--){let n=!0;for(let r=0;r<A;r++)if(h(t,o+r)!==h(i,r)){n=!1;break}if(n)return o}return -1}function a9(t,i,n){n=Math.min(t.length,n);let r=[],s=i;for(;s<n;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=n){let n,r,l,A;switch(a){case 1:i<128&&(o=i);break;case 2:(192&(n=t[s+1]))==128&&(A=(31&i)<<6|63&n)>127&&(o=A);break;case 3:n=t[s+1],r=t[s+2],(192&n)==128&&(192&r)==128&&(A=(15&i)<<12|(63&n)<<6|63&r)>2047&&(A<55296||A>57343)&&(o=A);break;case 4:n=t[s+1],r=t[s+2],l=t[s+3],(192&n)==128&&(192&r)==128&&(192&l)==128&&(A=(15&i)<<18|(63&n)<<12|(63&r)<<6|63&l)>65535&&A<1114112&&(o=A)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),s+=a}var o=r;let a=o.length;if(a<=4096)return String.fromCharCode.apply(String,o);let l="",A=0;for(;A<a;)l+=String.fromCharCode.apply(String,o.slice(A,A+=4096));return l}function lt(t,i,n){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+i>n)throw RangeError("Trying to access beyond buffer length")}function le(t,i,n,r,s,o){if(!aX.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(i>s||i<o)throw RangeError('"value" argument is out of bounds');if(n+r>t.length)throw RangeError("Index out of range")}function li(t,i,n,r,s){lh(i,r,s,t,n,7);let o=Number(i&BigInt(0xffffffff));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let a=Number(i>>BigInt(32)&BigInt(0xffffffff));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function ln(t,i,n,r,s){lh(i,r,s,t,n,7);let o=Number(i&BigInt(0xffffffff));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let a=Number(i>>BigInt(32)&BigInt(0xffffffff));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function lr(t,i,n,r,s,o){if(n+r>t.length||n<0)throw RangeError("Index out of range")}function ls(t,i,n,r,s){return i*=1,n>>>=0,s||lr(t,i,n,4,34028234663852886e22,-34028234663852886e22),yQ(t,i,n,r,23,4),n+4}function lo(t,i,n,r,s){return i*=1,n>>>=0,s||lr(t,i,n,8,17976931348623157e292,-17976931348623157e292),yQ(t,i,n,r,52,8),n+8}aX.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),i={foo:function(){return 42}};return Object.setPrototypeOf(i,Uint8Array.prototype),Object.setPrototypeOf(t,i),42===t.foo()}catch(t){return!1}}(),aX.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(aX.prototype,"parent",{enumerable:!0,get:function(){if(aX.isBuffer(this))return this.buffer}}),Object.defineProperty(aX.prototype,"offset",{enumerable:!0,get:function(){if(aX.isBuffer(this))return this.byteOffset}}),aX.poolSize=8192,aX.from=function(t,i,n){return aZ(t,i,n)},Object.setPrototypeOf(aX.prototype,Uint8Array.prototype),Object.setPrototypeOf(aX,Uint8Array),aX.alloc=function(t,i,n){return(aJ(t),t<=0)?aq(t):void 0!==i?"string"==typeof n?aq(t).fill(i,n):aq(t).fill(i):aq(t)},aX.allocUnsafe=function(t){return a0(t)},aX.allocUnsafeSlow=function(t){return a0(t)},aX.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==aX.prototype},aX.compare=function(t,i){if(lm(t,Uint8Array)&&(t=aX.from(t,t.offset,t.byteLength)),lm(i,Uint8Array)&&(i=aX.from(i,i.offset,i.byteLength)),!aX.isBuffer(t)||!aX.isBuffer(i))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let n=t.length,r=i.length;for(let s=0,o=Math.min(n,r);s<o;++s)if(t[s]!==i[s]){n=t[s],r=i[s];break}return n<r?-1:+(r<n)},aX.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},aX.concat=function(t,i){let n;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return aX.alloc(0);if(void 0===i)for(n=0,i=0;n<t.length;++n)i+=t[n].length;let r=aX.allocUnsafe(i),s=0;for(n=0;n<t.length;++n){let i=t[n];if(lm(i,Uint8Array))s+i.length>r.length?(aX.isBuffer(i)||(i=aX.from(i)),i.copy(r,s)):Uint8Array.prototype.set.call(r,i,s);else if(aX.isBuffer(i))i.copy(r,s);else throw TypeError('"list" argument must be an Array of Buffers');s+=i.length}return r},aX.byteLength=a4,aX.prototype._isBuffer=!0,aX.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)a6(this,i,i+1);return this},aX.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)a6(this,i,i+3),a6(this,i+1,i+2);return this},aX.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)a6(this,i,i+7),a6(this,i+1,i+6),a6(this,i+2,i+5),a6(this,i+3,i+4);return this},aX.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?a9(this,0,t):a3.apply(this,arguments)},aX.prototype.toLocaleString=aX.prototype.toString,aX.prototype.equals=function(t){if(!aX.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===aX.compare(this,t)},aX.prototype.inspect=function(){let t="";return t=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(t+=" ... "),"<Buffer "+t+">"},aY&&(aX.prototype[aY]=aX.prototype.inspect),aX.prototype.compare=function(t,i,n,r,s){if(lm(t,Uint8Array)&&(t=aX.from(t,t.offset,t.byteLength)),!aX.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===i&&(i=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),i<0||n>t.length||r<0||s>this.length)throw RangeError("out of range index");if(r>=s&&i>=n)return 0;if(r>=s)return -1;if(i>=n)return 1;if(i>>>=0,n>>>=0,r>>>=0,s>>>=0,this===t)return 0;let o=s-r,a=n-i,l=Math.min(o,a),A=this.slice(r,s),h=t.slice(i,n);for(let t=0;t<l;++t)if(A[t]!==h[t]){o=A[t],a=h[t];break}return o<a?-1:+(a<o)},aX.prototype.includes=function(t,i,n){return -1!==this.indexOf(t,i,n)},aX.prototype.indexOf=function(t,i,n){return a8(this,t,i,n,!0)},aX.prototype.lastIndexOf=function(t,i,n){return a8(this,t,i,n,!1)},aX.prototype.write=function(t,i,n,r){var s,o,a,l,A,h,c,u;if(void 0===i)r="utf8",n=this.length,i=0;else if(void 0===n&&"string"==typeof i)r=i,n=this.length,i=0;else if(isFinite(i))i>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-i;if((void 0===n||n>d)&&(n=d),t.length>0&&(n<0||i<0)||i>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let g=!1;for(;;)switch(r){case"hex":return function(t,i,n,r){let s;n=Number(n)||0;let o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;let a=i.length;for(r>a/2&&(r=a/2),s=0;s<r;++s){var l;let r=parseInt(i.substr(2*s,2),16);if((l=r)!=l)break;t[n+s]=r}return s}(this,t,i,n);case"utf8":case"utf-8":return s=i,o=n,lp(lg(t,this.length-s),this,s,o);case"ascii":case"latin1":case"binary":return a=i,l=n,lp(function(t){let i=[];for(let n=0;n<t.length;++n)i.push(255&t.charCodeAt(n));return i}(t),this,a,l);case"base64":return A=i,h=n,lp(lf(t),this,A,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=i,u=n,lp(function(t,i){let n,r,s=[];for(let o=0;o<t.length&&!((i-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,s.push(n%256),s.push(r);return s}(t,this.length-c),this,c,u);default:if(g)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),g=!0}},aX.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},aX.prototype.slice=function(t,i){let n=this.length;t=~~t,i=void 0===i?n:~~i,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),i<0?(i+=n)<0&&(i=0):i>n&&(i=n),i<t&&(i=t);let r=this.subarray(t,i);return Object.setPrototypeOf(r,aX.prototype),r},aX.prototype.readUintLE=aX.prototype.readUIntLE=function(t,i,n){t>>>=0,i>>>=0,n||lt(t,i,this.length);let r=this[t],s=1,o=0;for(;++o<i&&(s*=256);)r+=this[t+o]*s;return r},aX.prototype.readUintBE=aX.prototype.readUIntBE=function(t,i,n){t>>>=0,i>>>=0,n||lt(t,i,this.length);let r=this[t+--i],s=1;for(;i>0&&(s*=256);)r+=this[t+--i]*s;return r},aX.prototype.readUint8=aX.prototype.readUInt8=function(t,i){return t>>>=0,i||lt(t,1,this.length),this[t]},aX.prototype.readUint16LE=aX.prototype.readUInt16LE=function(t,i){return t>>>=0,i||lt(t,2,this.length),this[t]|this[t+1]<<8},aX.prototype.readUint16BE=aX.prototype.readUInt16BE=function(t,i){return t>>>=0,i||lt(t,2,this.length),this[t]<<8|this[t+1]},aX.prototype.readUint32LE=aX.prototype.readUInt32LE=function(t,i){return t>>>=0,i||lt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},aX.prototype.readUint32BE=aX.prototype.readUInt32BE=function(t,i){return t>>>=0,i||lt(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},aX.prototype.readBigUInt64LE=ly(function(t){lc(t>>>=0,"offset");let i=this[t],n=this[t+7];(void 0===i||void 0===n)&&lu(t,this.length-8);let r=i+256*this[++t]+65536*this[++t]+0x1000000*this[++t],s=this[++t]+256*this[++t]+65536*this[++t]+0x1000000*n;return BigInt(r)+(BigInt(s)<<BigInt(32))}),aX.prototype.readBigUInt64BE=ly(function(t){lc(t>>>=0,"offset");let i=this[t],n=this[t+7];(void 0===i||void 0===n)&&lu(t,this.length-8);let r=0x1000000*i+65536*this[++t]+256*this[++t]+this[++t],s=0x1000000*this[++t]+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(s)}),aX.prototype.readIntLE=function(t,i,n){t>>>=0,i>>>=0,n||lt(t,i,this.length);let r=this[t],s=1,o=0;for(;++o<i&&(s*=256);)r+=this[t+o]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*i)),r},aX.prototype.readIntBE=function(t,i,n){t>>>=0,i>>>=0,n||lt(t,i,this.length);let r=i,s=1,o=this[t+--r];for(;r>0&&(s*=256);)o+=this[t+--r]*s;return o>=(s*=128)&&(o-=Math.pow(2,8*i)),o},aX.prototype.readInt8=function(t,i){return(t>>>=0,i||lt(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},aX.prototype.readInt16LE=function(t,i){t>>>=0,i||lt(t,2,this.length);let n=this[t]|this[t+1]<<8;return 32768&n?0xffff0000|n:n},aX.prototype.readInt16BE=function(t,i){t>>>=0,i||lt(t,2,this.length);let n=this[t+1]|this[t]<<8;return 32768&n?0xffff0000|n:n},aX.prototype.readInt32LE=function(t,i){return t>>>=0,i||lt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},aX.prototype.readInt32BE=function(t,i){return t>>>=0,i||lt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},aX.prototype.readBigInt64LE=ly(function(t){lc(t>>>=0,"offset");let i=this[t],n=this[t+7];return(void 0===i||void 0===n)&&lu(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24))<<BigInt(32))+BigInt(i+256*this[++t]+65536*this[++t]+0x1000000*this[++t])}),aX.prototype.readBigInt64BE=ly(function(t){lc(t>>>=0,"offset");let i=this[t],n=this[t+7];return(void 0===i||void 0===n)&&lu(t,this.length-8),(BigInt((i<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(0x1000000*this[++t]+65536*this[++t]+256*this[++t]+n)}),aX.prototype.readFloatLE=function(t,i){return t>>>=0,i||lt(t,4,this.length),yU(this,t,!0,23,4)},aX.prototype.readFloatBE=function(t,i){return t>>>=0,i||lt(t,4,this.length),yU(this,t,!1,23,4)},aX.prototype.readDoubleLE=function(t,i){return t>>>=0,i||lt(t,8,this.length),yU(this,t,!0,52,8)},aX.prototype.readDoubleBE=function(t,i){return t>>>=0,i||lt(t,8,this.length),yU(this,t,!1,52,8)},aX.prototype.writeUintLE=aX.prototype.writeUIntLE=function(t,i,n,r){if(t*=1,i>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;le(this,t,i,n,r,0)}let s=1,o=0;for(this[i]=255&t;++o<n&&(s*=256);)this[i+o]=t/s&255;return i+n},aX.prototype.writeUintBE=aX.prototype.writeUIntBE=function(t,i,n,r){if(t*=1,i>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;le(this,t,i,n,r,0)}let s=n-1,o=1;for(this[i+s]=255&t;--s>=0&&(o*=256);)this[i+s]=t/o&255;return i+n},aX.prototype.writeUint8=aX.prototype.writeUInt8=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,1,255,0),this[i]=255&t,i+1},aX.prototype.writeUint16LE=aX.prototype.writeUInt16LE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,2,65535,0),this[i]=255&t,this[i+1]=t>>>8,i+2},aX.prototype.writeUint16BE=aX.prototype.writeUInt16BE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=255&t,i+2},aX.prototype.writeUint32LE=aX.prototype.writeUInt32LE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,4,0xffffffff,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t,i+4},aX.prototype.writeUint32BE=aX.prototype.writeUInt32BE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,4,0xffffffff,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},aX.prototype.writeBigUInt64LE=ly(function(t,i=0){return li(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),aX.prototype.writeBigUInt64BE=ly(function(t,i=0){return ln(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),aX.prototype.writeIntLE=function(t,i,n,r){if(t*=1,i>>>=0,!r){let r=Math.pow(2,8*n-1);le(this,t,i,n,r-1,-r)}let s=0,o=1,a=0;for(this[i]=255&t;++s<n&&(o*=256);)t<0&&0===a&&0!==this[i+s-1]&&(a=1),this[i+s]=(t/o|0)-a&255;return i+n},aX.prototype.writeIntBE=function(t,i,n,r){if(t*=1,i>>>=0,!r){let r=Math.pow(2,8*n-1);le(this,t,i,n,r-1,-r)}let s=n-1,o=1,a=0;for(this[i+s]=255&t;--s>=0&&(o*=256);)t<0&&0===a&&0!==this[i+s+1]&&(a=1),this[i+s]=(t/o|0)-a&255;return i+n},aX.prototype.writeInt8=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=255&t,i+1},aX.prototype.writeInt16LE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,2,32767,-32768),this[i]=255&t,this[i+1]=t>>>8,i+2},aX.prototype.writeInt16BE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=255&t,i+2},aX.prototype.writeInt32LE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,4,0x7fffffff,-0x80000000),this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},aX.prototype.writeInt32BE=function(t,i,n){return t*=1,i>>>=0,n||le(this,t,i,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t,i+4},aX.prototype.writeBigInt64LE=ly(function(t,i=0){return li(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),aX.prototype.writeBigInt64BE=ly(function(t,i=0){return ln(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),aX.prototype.writeFloatLE=function(t,i,n){return ls(this,t,i,!0,n)},aX.prototype.writeFloatBE=function(t,i,n){return ls(this,t,i,!1,n)},aX.prototype.writeDoubleLE=function(t,i,n){return lo(this,t,i,!0,n)},aX.prototype.writeDoubleBE=function(t,i,n){return lo(this,t,i,!1,n)},aX.prototype.copy=function(t,i,n,r){if(!aX.isBuffer(t))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),i>=t.length&&(i=t.length),i||(i=0),r>0&&r<n&&(r=n),r===n||0===t.length||0===this.length)return 0;if(i<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-i<r-n&&(r=t.length-i+n);let s=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(i,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),i),s},aX.prototype.fill=function(t,i,n,r){let s;if("string"==typeof t){if("string"==typeof i?(r=i,i=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!aX.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){let i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(i<0||this.length<i||this.length<n)throw RangeError("Out of range index");if(n<=i)return this;if(i>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=i;s<n;++s)this[s]=t;else{let o=aX.isBuffer(t)?t:aX.from(t,r),a=o.length;if(0===a)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-i;++s)this[s+i]=o[s%a]}return this};const la={};function ll(t,i,n){la[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:i.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function lA(t){let i="",n=t.length,r=+("-"===t[0]);for(;n>=r+4;n-=3)i=`_${t.slice(n-3,n)}${i}`;return`${t.slice(0,n)}${i}`}function lh(t,i,n,r,s,o){if(t>n||t<i){let r,s="bigint"==typeof i?"n":"";throw r=o>3?0===i||i===BigInt(0)?`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:`>= ${i}${s} and <= ${n}${s}`,new la.ERR_OUT_OF_RANGE("value",r,t)}lc(s,"offset"),(void 0===r[s]||void 0===r[s+o])&&lu(s,r.length-(o+1))}function lc(t,i){if("number"!=typeof t)throw new la.ERR_INVALID_ARG_TYPE(i,"number",t)}function lu(t,i,n){if(Math.floor(t)!==t)throw lc(t,n),new la.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(i<0)throw new la.ERR_BUFFER_OUT_OF_BOUNDS;throw new la.ERR_OUT_OF_RANGE(n||"offset",`>= ${+!!n} and <= ${i}`,t)}ll("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ll("ERR_INVALID_ARG_TYPE",function(t,i){return`The "${t}" argument must be of type number. Received type ${typeof i}`},TypeError),ll("ERR_OUT_OF_RANGE",function(t,i,n){let r=`The value of "${t}" is out of range.`,s=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?s=lA(String(n)):"bigint"==typeof n&&(s=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(s=lA(s)),s+="n"),r+=` It must be ${i}. Received ${s}`},RangeError);const ld=/[^+/0-9A-Za-z-_]/g;function lg(t,i){let n;i=i||1/0;let r=t.length,s=null,o=[];for(let a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!s){if(n>56319||a+1===r){(i-=3)>-1&&o.push(239,191,189);continue}s=n;continue}if(n<56320){(i-=3)>-1&&o.push(239,191,189),s=n;continue}n=(s-55296<<10|n-56320)+65536}else s&&(i-=3)>-1&&o.push(239,191,189);if(s=null,n<128){if((i-=1)<0)break;o.push(n)}else if(n<2048){if((i-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((i-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((i-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function lf(t){return function(t){var i,n,r=function(t){var i=t.length;if(i%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=i);var r=n===i?0:4-n%4;return[n,r]}(t),s=r[0],o=r[1],a=new aK((s+o)*3/4-o),l=0,A=o>0?s-4:s;for(n=0;n<A;n+=4)i=az[t.charCodeAt(n)]<<18|az[t.charCodeAt(n+1)]<<12|az[t.charCodeAt(n+2)]<<6|az[t.charCodeAt(n+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===o&&(i=az[t.charCodeAt(n)]<<2|az[t.charCodeAt(n+1)]>>4,a[l++]=255&i),1===o&&(i=az[t.charCodeAt(n)]<<10|az[t.charCodeAt(n+1)]<<4|az[t.charCodeAt(n+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}(function(t){if((t=(t=t.split("=")[0]).trim().replace(ld,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function lp(t,i,n,r){let s;for(s=0;s<r&&!(s+n>=i.length)&&!(s>=t.length);++s)i[s+n]=t[s];return s}function lm(t,i){return t instanceof i||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===i.name}const l_=function(){let t="0123456789abcdef",i=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let s=0;s<16;++s)i[r+s]=t[n]+t[s]}return i}();function ly(t){return"undefined"==typeof BigInt?lw:t}function lw(){throw Error("BigInt not supported")}function lv(t){return aU.isPlainObject(t)||aU.isArray(t)}function lb(t){return aU.endsWith(t,"[]")?t.slice(0,-2):t}function lC(t,i,n){return t?t.concat(i).map(function(t,i){return t=lb(t),!n&&i?"["+t+"]":t}).join(n?".":""):i}const lx=aU.toFlatObject(aU,{},null,function(t){return/^is[A-Z]/.test(t)});var lE=function(t,i,n){if(!aU.isObject(t))throw TypeError("target must be an object");i=i||new FormData;let r=(n=aU.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,i){return!aU.isUndefined(i[t])})).metaTokens,s=n.visitor||h,o=n.dots,a=n.indexes,l=(n.Blob||"undefined"!=typeof Blob&&Blob)&&aU.isSpecCompliantForm(i);if(!aU.isFunction(s))throw TypeError("visitor must be a function");function A(t){if(null===t)return"";if(aU.isDate(t))return t.toISOString();if(!l&&aU.isBlob(t))throw new aQ("Blob is not supported. Use a Buffer instead.");return aU.isArrayBuffer(t)||aU.isTypedArray(t)?l&&"function"==typeof Blob?new Blob([t]):aX.from(t):t}function h(t,n,s){let l=t;if(t&&!s&&"object"==typeof t)if(aU.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else{var h;if(aU.isArray(t)&&(h=t,aU.isArray(h)&&!h.some(lv))||(aU.isFileList(t)||aU.endsWith(n,"[]"))&&(l=aU.toArray(t)))return n=lb(n),l.forEach(function(t,r){aU.isUndefined(t)||null===t||i.append(!0===a?lC([n],r,o):null===a?n:n+"[]",A(t))}),!1}return!!lv(t)||(i.append(lC(s,n,o),A(t)),!1)}let c=[],u=Object.assign(lx,{defaultVisitor:h,convertValue:A,isVisitable:lv});if(!aU.isObject(t))throw TypeError("data must be an object");return!function t(n,r){if(!aU.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),aU.forEach(n,function(n,o){!0===(!(aU.isUndefined(n)||null===n)&&s.call(i,n,aU.isString(o)?o.trim():o,r,u))&&t(n,r?r.concat(o):[o])}),c.pop()}}(t),i};function lB(t){let i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return i[t]})}function lS(t,i){this._pairs=[],t&&lE(t,this,i)}const lI=lS.prototype;function lL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lF(t,i,n){let r;if(!i)return t;let s=n&&n.encode||lL;aU.isFunction(n)&&(n={serialize:n});let o=n&&n.serialize;if(r=o?o(i,n):aU.isURLSearchParams(i)?i.toString():new lS(i,n).toString(s)){let i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}lI.append=function(t,i){this._pairs.push([t,i])},lI.toString=function(t){let i=t?function(i){return t.call(this,i,lB)}:lB;return this._pairs.map(function(t){return i(t[0])+"="+i(t[1])},"").join("&")};var lM=class{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){aU.forEach(this.handlers,function(i){null!==i&&t(i)})}},lT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lR="undefined"!=typeof URLSearchParams?URLSearchParams:lS,lO="undefined"!=typeof FormData?FormData:null,lD="undefined"!=typeof Blob?Blob:null,lP={};x(lP,"hasBrowserEnv",()=>lk),x(lP,"navigator",()=>lN),x(lP,"hasStandardBrowserEnv",()=>lU),x(lP,"hasStandardBrowserWebWorkerEnv",()=>lQ),x(lP,"origin",()=>lH);const lk="undefined"!=typeof window&&"undefined"!=typeof document,lN="object"==typeof navigator&&navigator||void 0,lU=lk&&(!lN||0>["ReactNative","NativeScript","NS"].indexOf(lN.product)),lQ="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,lH=lk&&window.location.href||"http://localhost";var lG={...lP,isBrowser:!0,classes:{URLSearchParams:lR,FormData:lO,Blob:lD},protocols:["http","https","file","blob","url","data"]},lV=function(t){if(aU.isFormData(t)&&aU.isFunction(t.entries)){let i={};return aU.forEachEntry(t,(t,n)=>{!function t(i,n,r,s){let o=i[s++];if("__proto__"===o)return!0;let a=Number.isFinite(+o),l=s>=i.length;return(o=!o&&aU.isArray(r)?r.length:o,l)?aU.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n:(r[o]&&aU.isObject(r[o])||(r[o]=[]),t(i,n,r[o],s)&&aU.isArray(r[o])&&(r[o]=function(t){let i,n,r={},s=Object.keys(t),o=s.length;for(i=0;i<o;i++)r[n=s[i]]=t[n];return r}(r[o]))),!a}(aU.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0]),n,i,0)}),i}return null};const lz={transitional:lT,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){let n,r=i.getContentType()||"",s=r.indexOf("application/json")>-1,o=aU.isObject(t);if(o&&aU.isHTMLForm(t)&&(t=new FormData(t)),aU.isFormData(t))return s?JSON.stringify(lV(t)):t;if(aU.isArrayBuffer(t)||aU.isBuffer(t)||aU.isStream(t)||aU.isFile(t)||aU.isBlob(t)||aU.isReadableStream(t))return t;if(aU.isArrayBufferView(t))return t.buffer;if(aU.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1){var a,l;return(a=t,l=this.formSerializer,lE(a,new lG.classes.URLSearchParams,Object.assign({visitor:function(t,i,n,r){return lG.isNode&&aU.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},l))).toString()}if((n=aU.isFileList(t))||r.indexOf("multipart/form-data")>-1){let i=this.env&&this.env.FormData;return lE(n?{"files[]":t}:t,i&&new i,this.formSerializer)}}if(o||s){i.setContentType("application/json",!1);var A=t;if(aU.isString(A))try{return(0,JSON.parse)(A),aU.trim(A)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(A)}return t}],transformResponse:[function(t){let i=this.transitional||lz.transitional,n=i&&i.forcedJSONParsing,r="json"===this.responseType;if(aU.isResponse(t)||aU.isReadableStream(t))return t;if(t&&aU.isString(t)&&(n&&!this.responseType||r)){let n=i&&i.silentJSONParsing;try{return JSON.parse(t)}catch(t){if(!n&&r){if("SyntaxError"===t.name)throw aQ.from(t,aQ.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lG.classes.FormData,Blob:lG.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};aU.forEach(["delete","get","head","post","put","patch"],t=>{lz.headers[t]={}});const lK=aU.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var lj=t=>{let i,n,r,s={};return t&&t.split("\n").forEach(function(t){r=t.indexOf(":"),i=t.substring(0,r).trim().toLowerCase(),n=t.substring(r+1).trim(),!i||s[i]&&lK[i]||("set-cookie"===i?s[i]?s[i].push(n):s[i]=[n]:s[i]=s[i]?s[i]+", "+n:n)}),s};const lW=Symbol("internals");function l$(t){return t&&String(t).trim().toLowerCase()}function lY(t){return!1===t||null==t?t:aU.isArray(t)?t.map(lY):String(t)}const lq=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lX(t,i,n,r,s){if(aU.isFunction(r))return r.call(this,i,n);if(s&&(i=n),aU.isString(i)){if(aU.isString(r))return -1!==i.indexOf(r);if(aU.isRegExp(r))return r.test(i)}}class lZ{constructor(t){t&&this.set(t)}set(t,i,n){let r=this;function s(t,i,n){let s=l$(i);if(!s)throw Error("header name must be a non-empty string");let o=aU.findKey(r,s);o&&void 0!==r[o]&&!0!==n&&(void 0!==n||!1===r[o])||(r[o||i]=lY(t))}let o=(t,i)=>aU.forEach(t,(t,n)=>s(t,n,i));if(aU.isPlainObject(t)||t instanceof this.constructor)o(t,i);else if(aU.isString(t)&&(t=t.trim())&&!lq(t))o(lj(t),i);else if(aU.isHeaders(t))for(let[i,r]of t.entries())s(r,i,n);else null!=t&&s(i,t,n);return this}get(t,i){if(t=l$(t)){let n=aU.findKey(this,t);if(n){let t=this[n];if(!i)return t;if(!0===i){let i,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(;i=r.exec(t);)n[i[1]]=i[2];return n}if(aU.isFunction(i))return i.call(this,t,n);if(aU.isRegExp(i))return i.exec(t);throw TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=l$(t)){let n=aU.findKey(this,t);return!!(n&&void 0!==this[n]&&(!i||lX(this,this[n],n,i)))}return!1}delete(t,i){let n=this,r=!1;function s(t){if(t=l$(t)){let s=aU.findKey(n,t);s&&(!i||lX(n,n[s],s,i))&&(delete n[s],r=!0)}}return aU.isArray(t)?t.forEach(s):s(t),r}clear(t){let i=Object.keys(this),n=i.length,r=!1;for(;n--;){let s=i[n];(!t||lX(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){let i=this,n={};return aU.forEach(this,(r,s)=>{let o=aU.findKey(n,s);if(o){i[o]=lY(r),delete i[s];return}let a=t?s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n):String(s).trim();a!==s&&delete i[s],i[a]=lY(r),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let i=Object.create(null);return aU.forEach(this,(n,r)=>{null!=n&&!1!==n&&(i[r]=t&&aU.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){let n=new this(t);return i.forEach(t=>n.set(t)),n}static accessor(t){let i=(this[lW]=this[lW]={accessors:{}}).accessors,n=this.prototype;function r(t){let r=l$(t);if(!i[r]){let s=aU.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+s,{value:function(n,r,s){return this[i].call(this,t,n,r,s)},configurable:!0})}),i[r]=!0}}return aU.isArray(t)?t.forEach(r):r(t),this}}function lJ(t,i){let n=this||lz,r=i||n,s=lZ.from(r.headers),o=r.data;return aU.forEach(t,function(t){o=t.call(n,o,s.normalize(),i?i.status:void 0)}),s.normalize(),o}function l0(t){return!!(t&&t.__CANCEL__)}function l1(t,i,n){aQ.call(this,null==t?"canceled":t,aQ.ERR_CANCELED,i,n),this.name="CanceledError"}function l2(t,i,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):i(new aQ("Request failed with status code "+n.status,[aQ.ERR_BAD_REQUEST,aQ.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}lZ.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),aU.reduceDescriptors(lZ.prototype,({value:t},i)=>{let n=i[0].toUpperCase()+i.slice(1);return{get:()=>t,set(t){this[n]=t}}}),aU.freezeMethods(lZ),aU.inherits(l1,aQ,{__CANCEL__:!0});var l5=function(t,i){let n,r=Array(t=t||10),s=Array(t),o=0,a=0;return i=void 0!==i?i:1e3,function(l){let A=Date.now(),h=s[a];n||(n=A),r[o]=l,s[o]=A;let c=a,u=0;for(;c!==o;)u+=r[c++],c%=t;if((o=(o+1)%t)===a&&(a=(a+1)%t),A-n<i)return;let d=h&&A-h;return d?Math.round(1e3*u/d):void 0}},l4=function(t,i){let n,r,s=0,o=1e3/i,a=(i,o=Date.now())=>{s=o,n=null,r&&(clearTimeout(r),r=null),t.apply(null,i)};return[(...t)=>{let i=Date.now(),l=i-s;l>=o?a(t,i):(n=t,r||(r=setTimeout(()=>{r=null,a(n)},o-l)))},()=>n&&a(n)]};const l3=(t,i,n=3)=>{let r=0,s=l5(50,250);return l4(n=>{let o=n.loaded,a=n.lengthComputable?n.total:void 0,l=o-r,A=s(l);r=o,t({loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:A||void 0,estimated:A&&a&&o<=a?(a-o)/A:void 0,event:n,lengthComputable:null!=a,[i?"download":"upload"]:!0})},n)},l6=(t,i)=>{let n=null!=t;return[r=>i[0]({lengthComputable:n,total:t,loaded:r}),i[1]]},l8=t=>(...i)=>aU.asap(()=>t(...i));var l7=lG.hasStandardBrowserEnv?(_=new URL(lG.origin),y=lG.navigator&&/(msie|trident)/i.test(lG.navigator.userAgent),t=>(t=new URL(t,lG.origin),_.protocol===t.protocol&&_.host===t.host&&(y||_.port===t.port))):()=>!0,l9=lG.hasStandardBrowserEnv?{write(t,i,n,r,s,o){let a=[t+"="+encodeURIComponent(i)];aU.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),aU.isString(r)&&a.push("path="+r),aU.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(t){let i=document.cookie.match(RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function At(t,i,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i);return t&&(r||!1==n)?i?t.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):t:i}const Ae=t=>t instanceof lZ?{...t}:t;function Ai(t,i){i=i||{};let n={};function r(t,i,n,r){return aU.isPlainObject(t)&&aU.isPlainObject(i)?aU.merge.call({caseless:r},t,i):aU.isPlainObject(i)?aU.merge({},i):aU.isArray(i)?i.slice():i}function s(t,i,n,s){return aU.isUndefined(i)?aU.isUndefined(t)?void 0:r(void 0,t,n,s):r(t,i,n,s)}function o(t,i){if(!aU.isUndefined(i))return r(void 0,i)}function a(t,i){return aU.isUndefined(i)?aU.isUndefined(t)?void 0:r(void 0,t):r(void 0,i)}function l(n,s,o){return o in i?r(n,s):o in t?r(void 0,n):void 0}let A={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(t,i,n)=>s(Ae(t),Ae(i),n,!0)};return aU.forEach(Object.keys(Object.assign({},t,i)),function(r){let o=A[r]||s,a=o(t[r],i[r],r);aU.isUndefined(a)&&o!==l||(n[r]=a)}),n}var An=t=>{let i,n=Ai({},t),{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:a,headers:l,auth:A}=n;if(n.headers=l=lZ.from(l),n.url=lF(At(n.baseURL,n.url,n.allowAbsoluteUrls),t.params,t.paramsSerializer),A&&l.set("Authorization","Basic "+btoa((A.username||"")+":"+(A.password?unescape(encodeURIComponent(A.password)):""))),aU.isFormData(r)){if(lG.hasStandardBrowserEnv||lG.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(i=l.getContentType())){let[t,...n]=i?i.split(";").map(t=>t.trim()).filter(Boolean):[];l.setContentType([t||"multipart/form-data",...n].join("; "))}}if(lG.hasStandardBrowserEnv&&(s&&aU.isFunction(s)&&(s=s(n)),s||!1!==s&&l7(n.url))){let t=o&&a&&l9.read(a);t&&l.set(o,t)}return n},Ar="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise(function(i,n){let r,s,o,a,l,A=An(t),h=A.data,c=lZ.from(A.headers).normalize(),{responseType:u,onUploadProgress:d,onDownloadProgress:g}=A;function f(){a&&a(),l&&l(),A.cancelToken&&A.cancelToken.unsubscribe(r),A.signal&&A.signal.removeEventListener("abort",r)}let p=new XMLHttpRequest;function m(){if(!p)return;let r=lZ.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());l2(function(t){i(t),f()},function(t){n(t),f()},{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:t,request:p}),p=null}p.open(A.method.toUpperCase(),A.url,!0),p.timeout=A.timeout,"onloadend"in p?p.onloadend=m:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(m)},p.onabort=function(){p&&(n(new aQ("Request aborted",aQ.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new aQ("Network Error",aQ.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let i=A.timeout?"timeout of "+A.timeout+"ms exceeded":"timeout exceeded",r=A.transitional||lT;A.timeoutErrorMessage&&(i=A.timeoutErrorMessage),n(new aQ(i,r.clarifyTimeoutError?aQ.ETIMEDOUT:aQ.ECONNABORTED,t,p)),p=null},void 0===h&&c.setContentType(null),"setRequestHeader"in p&&aU.forEach(c.toJSON(),function(t,i){p.setRequestHeader(i,t)}),aU.isUndefined(A.withCredentials)||(p.withCredentials=!!A.withCredentials),u&&"json"!==u&&(p.responseType=A.responseType),g&&([o,l]=l3(g,!0),p.addEventListener("progress",o)),d&&p.upload&&([s,a]=l3(d),p.upload.addEventListener("progress",s),p.upload.addEventListener("loadend",a)),(A.cancelToken||A.signal)&&(r=i=>{p&&(n(!i||i.type?new l1(null,t,p):i),p.abort(),p=null)},A.cancelToken&&A.cancelToken.subscribe(r),A.signal&&(A.signal.aborted?r():A.signal.addEventListener("abort",r)));let _=function(t){let i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return i&&i[1]||""}(A.url);if(_&&-1===lG.protocols.indexOf(_))return void n(new aQ("Unsupported protocol "+_+":",aQ.ERR_BAD_REQUEST,t));p.send(h||null)})},As=(t,i)=>{let{length:n}=t=t?t.filter(Boolean):[];if(i||n){let n,r=new AbortController,s=function(t){if(!n){n=!0,a();let i=t instanceof Error?t:this.reason;r.abort(i instanceof aQ?i:new l1(i instanceof Error?i.message:i))}},o=i&&setTimeout(()=>{o=null,s(new aQ(`timeout ${i} of ms exceeded`,aQ.ETIMEDOUT))},i),a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(t=>{t.unsubscribe?t.unsubscribe(s):t.removeEventListener("abort",s)}),t=null)};t.forEach(t=>t.addEventListener("abort",s));let{signal:l}=r;return l.unsubscribe=()=>aU.asap(a),l}};const Ao=function*(t,i){let n,r=t.byteLength;if(!i||r<i)return void(yield t);let s=0;for(;s<r;)n=s+i,yield t.slice(s,n),s=n},Aa=async function*(t,i){for await(let n of Al(t))yield*Ao(n,i)},Al=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);let i=t.getReader();try{for(;;){let{done:t,value:n}=await i.read();if(t)break;yield n}}finally{await i.cancel()}},AA=(t,i,n,r)=>{let s,o=Aa(t,i),a=0,l=t=>{!s&&(s=!0,r&&r(t))};return new ReadableStream({async pull(t){try{let{done:i,value:r}=await o.next();if(i){l(),t.close();return}let s=r.byteLength;if(n){let t=a+=s;n(t)}t.enqueue(new Uint8Array(r))}catch(t){throw l(t),t}},cancel:t=>(l(t),o.return())},{highWaterMark:2})},Ah="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Ac=Ah&&"function"==typeof ReadableStream,Au=Ah&&("function"==typeof TextEncoder?(w=new TextEncoder,t=>w.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ad=(t,...i)=>{try{return!!t(...i)}catch(t){return!1}},Ag=Ac&&Ad(()=>{let t=!1,i=new Request(lG.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!i}),Af=Ac&&Ad(()=>aU.isReadableStream(new Response("").body)),Ap={stream:Af&&(t=>t.body)};Ah&&(yM=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(t=>{Ap[t]||(Ap[t]=aU.isFunction(yM[t])?i=>i[t]():(i,n)=>{throw new aQ(`Response type '${t}' is not supported`,aQ.ERR_NOT_SUPPORT,n)})}));const Am=async t=>{if(null==t)return 0;if(aU.isBlob(t))return t.size;if(aU.isSpecCompliantForm(t)){let i=new Request(lG.origin,{method:"POST",body:t});return(await i.arrayBuffer()).byteLength}return aU.isArrayBufferView(t)||aU.isArrayBuffer(t)?t.byteLength:(aU.isURLSearchParams(t)&&(t+=""),aU.isString(t))?(await Au(t)).byteLength:void 0},A_=async(t,i)=>{let n=aU.toFiniteNumber(t.getContentLength());return null==n?Am(i):n},Ay={http:null,xhr:Ar,fetch:Ah&&(async t=>{let i,n,{url:r,method:s,data:o,signal:a,cancelToken:l,timeout:A,onDownloadProgress:h,onUploadProgress:c,responseType:u,headers:d,withCredentials:g="same-origin",fetchOptions:f}=An(t);u=u?(u+"").toLowerCase():"text";let p=As([a,l&&l.toAbortSignal()],A),m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});try{if(c&&Ag&&"get"!==s&&"head"!==s&&0!==(n=await A_(d,o))){let t,i=new Request(r,{method:"POST",body:o,duplex:"half"});if(aU.isFormData(o)&&(t=i.headers.get("content-type"))&&d.setContentType(t),i.body){let[t,r]=l6(n,l3(l8(c)));o=AA(i.body,65536,t,r)}}aU.isString(g)||(g=g?"include":"omit");let a="credentials"in Request.prototype;i=new Request(r,{...f,signal:p,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:a?g:void 0});let l=await fetch(i),A=Af&&("stream"===u||"response"===u);if(Af&&(h||A&&m)){let t={};["status","statusText","headers"].forEach(i=>{t[i]=l[i]});let i=aU.toFiniteNumber(l.headers.get("content-length")),[n,r]=h&&l6(i,l3(l8(h),!0))||[];l=new Response(AA(l.body,65536,n,()=>{r&&r(),m&&m()}),t)}u=u||"text";let _=await Ap[aU.findKey(Ap,u)||"text"](l,t);return!A&&m&&m(),await new Promise((n,r)=>{l2(n,r,{data:_,headers:lZ.from(l.headers),status:l.status,statusText:l.statusText,config:t,request:i})})}catch(n){if(m&&m(),n&&"TypeError"===n.name&&/fetch/i.test(n.message))throw Object.assign(new aQ("Network Error",aQ.ERR_NETWORK,t,i),{cause:n.cause||n});throw aQ.from(n,n&&n.code,t,i)}})};aU.forEach(Ay,(t,i)=>{if(t){try{Object.defineProperty(t,"name",{value:i})}catch(t){}Object.defineProperty(t,"adapterName",{value:i})}});const Aw=t=>`- ${t}`,Av=t=>aU.isFunction(t)||null===t||!1===t;var Ab=t=>{let i,n,{length:r}=t=aU.isArray(t)?t:[t],s={};for(let o=0;o<r;o++){let r;if(n=i=t[o],!Av(i)&&void 0===(n=Ay[(r=String(i)).toLowerCase()]))throw new aQ(`Unknown adapter '${r}'`);if(n)break;s[r||"#"+o]=n}if(!n){let t=Object.entries(s).map(([t,i])=>`adapter ${t} `+(!1===i?"is not supported by the environment":"is not available in the build"));throw new aQ("There is no suitable adapter to dispatch the request "+(r?t.length>1?"since :\n"+t.map(Aw).join("\n"):" "+Aw(t[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function AC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new l1(null,t)}function Ax(t){return AC(t),t.headers=lZ.from(t.headers),t.data=lJ.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ab(t.adapter||lz.adapter)(t).then(function(i){return AC(t),i.data=lJ.call(t,t.transformResponse,i),i.headers=lZ.from(i.headers),i},function(i){return!l0(i)&&(AC(t),i&&i.response&&(i.response.data=lJ.call(t,t.transformResponse,i.response),i.response.headers=lZ.from(i.response.headers))),Promise.reject(i)})}const AE="1.8.4",AB={};["object","boolean","number","function","string","symbol"].forEach((t,i)=>{AB[t]=function(n){return typeof n===t||"a"+(i<1?"n ":" ")+t}});const AS={};AB.transitional=function(t,i,n){function r(t,i){return"[Axios v"+AE+"] Transitional option '"+t+"'"+i+(n?". "+n:"")}return(n,s,o)=>{if(!1===t)throw new aQ(r(s," has been removed"+(i?" in "+i:"")),aQ.ERR_DEPRECATED);return i&&!AS[s]&&(AS[s]=!0,console.warn(r(s," has been deprecated since v"+i+" and will be removed in the near future"))),!t||t(n,s,o)}},AB.spelling=function(t){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};var AI={assertOptions:function(t,i,n){if("object"!=typeof t)throw new aQ("options must be an object",aQ.ERR_BAD_OPTION_VALUE);let r=Object.keys(t),s=r.length;for(;s-- >0;){let o=r[s],a=i[o];if(a){let i=t[o],n=void 0===i||a(i,o,t);if(!0!==n)throw new aQ("option "+o+" must be "+n,aQ.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new aQ("Unknown option "+o,aQ.ERR_BAD_OPTION)}},validators:AB};const AL=AI.validators;class AF{constructor(t){this.defaults=t,this.interceptors={request:new lM,response:new lM}}async request(t,i){try{return await this._request(t,i)}catch(t){if(t instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=Error();let n=i.stack?i.stack.replace(/^.+\n/,""):"";try{t.stack?n&&!String(t.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+n):t.stack=n}catch(t){}}throw t}}_request(t,i){let n,r;"string"==typeof t?(i=i||{}).url=t:i=t||{};let{transitional:s,paramsSerializer:o,headers:a}=i=Ai(this.defaults,i);void 0!==s&&AI.assertOptions(s,{silentJSONParsing:AL.transitional(AL.boolean),forcedJSONParsing:AL.transitional(AL.boolean),clarifyTimeoutError:AL.transitional(AL.boolean)},!1),null!=o&&(aU.isFunction(o)?i.paramsSerializer={serialize:o}:AI.assertOptions(o,{encode:AL.function,serialize:AL.function},!0)),void 0!==i.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),AI.assertOptions(i,{baseUrl:AL.spelling("baseURL"),withXsrfToken:AL.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let l=a&&aU.merge(a.common,a[i.method]);a&&aU.forEach(["delete","get","head","post","put","patch","common"],t=>{delete a[t]}),i.headers=lZ.concat(l,a);let A=[],h=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(i))&&(h=h&&t.synchronous,A.unshift(t.fulfilled,t.rejected))});let c=[];this.interceptors.response.forEach(function(t){c.push(t.fulfilled,t.rejected)});let u=0;if(!h){let t=[Ax.bind(this),void 0];for(t.unshift.apply(t,A),t.push.apply(t,c),r=t.length,n=Promise.resolve(i);u<r;)n=n.then(t[u++],t[u++]);return n}r=A.length;let d=i;for(u=0;u<r;){let t=A[u++],i=A[u++];try{d=t(d)}catch(t){i.call(this,t);break}}try{n=Ax.call(this,d)}catch(t){return Promise.reject(t)}for(u=0,r=c.length;u<r;)n=n.then(c[u++],c[u++]);return n}getUri(t){return lF(At((t=Ai(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}}aU.forEach(["delete","get","head","options"],function(t){AF.prototype[t]=function(i,n){return this.request(Ai(n||{},{method:t,url:i,data:(n||{}).data}))}}),aU.forEach(["post","put","patch"],function(t){function i(i){return function(n,r,s){return this.request(Ai(s||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}AF.prototype[t]=i(),AF.prototype[t+"Form"]=i(!0)});class AM{constructor(t){let i;if("function"!=typeof t)throw TypeError("executor must be a function.");this.promise=new Promise(function(t){i=t});let n=this;this.promise.then(t=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](t);n._listeners=null}),this.promise.then=t=>{let i,r=new Promise(t=>{n.subscribe(t),i=t}).then(t);return r.cancel=function(){n.unsubscribe(i)},r},t(function(t,r,s){n.reason||(n.reason=new l1(t,r,s),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason)return void t(this.reason);this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let i=this._listeners.indexOf(t);-1!==i&&this._listeners.splice(i,1)}toAbortSignal(){let t=new AbortController,i=i=>{t.abort(i)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new AM(function(i){t=i}),cancel:t}}}const AT={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(AT).forEach(([t,i])=>{AT[i]=t});const AR=function t(i){let n=new AF(i),r=ar(AF.prototype.request,n);return aU.extend(r,AF.prototype,n,{allOwnKeys:!0}),aU.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(Ai(i,n))},r}(lz);AR.Axios=AF,AR.CanceledError=l1,AR.CancelToken=AM,AR.isCancel=l0,AR.VERSION=AE,AR.toFormData=lE,AR.AxiosError=aQ,AR.Cancel=AR.CanceledError,AR.all=function(t){return Promise.all(t)},AR.spread=function(t){return function(i){return t.apply(null,i)}},AR.isAxiosError=function(t){return aU.isObject(t)&&!0===t.isAxiosError},AR.mergeConfig=Ai,AR.AxiosHeaders=lZ,AR.formToJSON=t=>lV(aU.isHTMLForm(t)?new FormData(t):t),AR.getAdapter=Ab,AR.HttpStatusCode=AT,AR.default=AR;const{Axios:AO,AxiosError:AD,CanceledError:AP,isCancel:Ak,CancelToken:AN,VERSION:AU,all:AQ,Cancel:AH,isAxiosError:AG,spread:AV,toFormData:Az,AxiosHeaders:AK,HttpStatusCode:Aj,formToJSON:AW,getAdapter:A$,mergeConfig:AY}=AR;var Aq=I("45fvw");class AX{static async initAsync(t={}){throw Error("Abstract base class")}static setMap(t){throw Error("Abstract base method")}static getName(){throw Error("Abstract base method")}}const AZ="log-manager.js",AJ=Object.freeze({logging:{logToConsole:!1},timeFormat:Object.freeze({pretty:"YYYY-MM-DD HH:mm:ss:SSS",gmt:"YYYY-MM-DDTHH:mm:ssZ:SSS"})});class A0 extends AX{static #t=[];static #e=Object.freeze({debug:{value:1,name:"Debug",visible:!1,color:"#00385B",backgroundColor:"#F0F6FF",borderColor:"#D7E3FA",method:window.console.debug},information:{value:2,name:"Information",visible:!0,color:"#212529",backgroundColor:"#F3F4F5",borderColor:"#D3D9E6",method:window.console.info},warning:{value:3,name:"Warning",visible:!0,color:"#493B10",backgroundColor:"#FFF8E1",borderColor:"#FAE59D",method:window.console.warn},error:{value:4,name:"Error",visible:!0,color:"#8D2120",backgroundColor:"#FFE6E6",borderColor:"#FDB5B4",method:window.console.error},fatal:{value:5,name:"Fatal",visible:!0,color:"#212529",backgroundColor:"#E8E6FF",borderColor:"#D0CAFF",method:window.console.error}});static async initAsync(t={}){return A0.logDebug(AZ,"initAsync","Initialization started"),new Promise(t=>{t({filename:AZ,result:!0})})}static setMap(t){}static getName(){return AZ}static #i(t,i,n,r,s){t.method(i,n,r,s)}static #n(t,i,n,r){let s=AJ.timeFormat.pretty,o=AJ.logging.logToConsole,a=E(Aq)().format(s),l={timestamp:a,level:t,origin:i,method:n,value:r};return this.#t.push(l),o&&this.#i(t,i,n,r,a),l}static setLogToConsole(t){AJ.logging.logToConsole=t}static getSize(){return this.#t.length||0}static getLog(){return this.#t}static clearLog(){this.#t=[]}static getLogLevels(){return this.#e}static logDebug(t,i,n){return this.#n(this.#e.debug,t,i,n)}static logInformation(t,i,n){return this.#n(this.#e.information,t,i,n)}static logWarning(t,i,n){return this.#n(this.#e.warning,t,i,n)}static logError(t,i,n){return this.#n(this.#e.error,t,i,n)}static logFatal(t,i,n){return this.#n(this.#e.fatal,t,i,n)}}var A1={};A1=JSON.parse('{"name":"oltb","version":"3.5.0","author":"Qulle","license":"BSD-2-Clause license","description":"OLTB is a portable mobile friendly GIS toolbar developed for OpenLayers 10.6.1","keywords":["gis","map","web-gis","toolbar","openlayers"],"repository":{"type":"git","url":"git+https://github.com/qulle/oltb.git"},"homepage":"https://github.com/qulle/oltb#readme","bugs":{"url":"https://github.com/qulle/oltb/issues"},"scripts":{"start":"parcel serve ./dev/index.html --open --dist-dir ./serve","eslint:src":"eslint --config ./config/.eslintrc.mjs ./src/oltb/js/**/*.js","eslint:src-fix":"eslint --fix --config ./config/.eslintrc.mjs ./src/oltb/js/**/*.js","eslint:dev":"eslint --config ./config/.eslintrc.mjs ./dev/**/*.js","eslint:dev-fix":"eslint --fix --config ./config/.eslintrc.mjs ./dev/**/*.js","test":"cross-env NODE_OPTIONS=--experimental-vm-modules NODE_NO_WARNINGS=1 jest ./src --config ./config/jest.config.mjs","test:watch":"cross-env NODE_OPTIONS=--experimental-vm-modules NODE_NO_WARNINGS=1 jest ./src --watch --config ./config/jest.config.mjs","test:coverage":"cross-env NODE_OPTIONS=--experimental-vm-modules NODE_NO_WARNINGS=1 jest ./src --coverage --config ./config/jest.config.mjs","test:clear":"jest --clearCache","build":"npm run build:demo && npm run build:lib","build:lib":"rollup --config ./config/rollup.config.mjs","build:demo":"parcel build --public-url . ./dev/index.html --dist-dir ./demo","example:cdn:1":"sh -c \'start firefox -url \\"file://C:$(cut -c3- <<< $(readlink -m ./examples/cdn/example-1/index.html))\\"\'","example:npm:1":"parcel serve ./examples/npm/example-1/index.html --open --dist-dir ./serve","example:npm:2":"parcel serve ./examples/npm/example-2/index.html --open --dist-dir ./serve","example:npm:3":"npm --prefix ./examples/npm/example-3-angular start","example:npm:4":"npm --prefix ./examples/npm/example-4-react run dev","clean":"rm -rf ./serve ./dist ./demo ./.parcel-cache","install-husky":"npx husky install","configure-husky":"npx husky install && npx husky add .husky/pre-commit \\"npx lint-staged\\""},"lint-staged":{"./src/oltb/js/**/*.js":["eslint --config ./config/.eslintrc.mjs"],"./dev/**/*.js":["eslint --config ./config/.eslintrc.mjs"]},"files":["dist"],"type":"module","dependencies":{"a-color-picker":"^1.2.1","axios":"^1.8.4","browser-dtector":"^4.1.0","html2canvas":"^1.4.1","jsts":"^2.12.1","lodash":"^4.17.21","many-keys-map":"^2.0.1","moment":"^2.30.1","ol":"^10.6.1","proj4":"^2.15.0","screenfull":"^6.0.2","sortablejs":"^1.15.6","tippy.js":"^6.3.7","uuid":"^11.1.0"},"devDependencies":{"@eslint/js":"^9.2.0","@parcel/transformer-sass":"^2.14.4","@rollup/plugin-commonjs":"^28.0.3","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^16.0.1","@rollup/plugin-replace":"^6.0.2","@rollup/plugin-terser":"^0.4.4","buffer":"^6.0.3","cross-env":"^7.0.3","eslint":"^9.24.0","husky":"^9.1.7","identity-obj-proxy":"^3.0.0","jest":"^29.7.0","jest-environment-jsdom":"^29.7.0","lint-staged":"^15.5.0","parcel":"^2.14.4","process":"^0.11.10","rollup":"^4.39.0","rollup-plugin-license":"^3.6.0","rollup-plugin-scss":"^4.0.1"}}');const A2=Object.freeze({timeFormat:Object.freeze({pretty:"YYYY-MM-DD HH:mm:ss:SSS",gmt:"YYYY-MM-DDTHH:mm:ssZ:SSS"}),localization:Object.freeze({active:"en-us",languages:Object.freeze(["en-us","sv-se"])}),location:Object.freeze({default:Object.freeze({lon:18.1201,lat:35.3518,zoom:3,rotation:0})}),className:Object.freeze({row:"oltb-row",dark:"oltb-dark"}),openLayers:Object.freeze({version:"10.6.1",id:"map"}),toolbar:Object.freeze({version:A1.version,id:"oltb"}),urlParameter:Object.freeze({debug:"oltb-debug",marker:"oltb-marker"}),marker:Object.freeze({focusZoom:6,label:{shouldRender:!0,visibleUnderResolution:5e3},pulseAnimation:{isEnabled:!0,duration:2e3,shouldLoop:!0,strokeWidth:1,defaultStartSize:0,defaultEndSize:14,defaultColor:"#3B4352FF"}}),scroll:Object.freeze({distance:100}),browser:Object.freeze({rem:16}),sessionStorage:Object.freeze({key:"oltb"}),localStorage:Object.freeze({key:"oltb"}),projection:Object.freeze({default:"EPSG:3857",wgs84:"EPSG:4326"}),overlayOffset:Object.freeze({horizontal:0,vertical:-8}),tippy:Object.freeze({delay:[600,100]}),deviceWidth:Object.freeze({xs:"0",sm:"576",md:"768",lg:"992",xl:"1200",xxl:"1400"}),autoRemovalDuation:Object.freeze({slow:6e3,normal:4e3,fast:2e3}),animationDuration:Object.freeze({slow:450,normal:350,fast:250,warp:150}),aColorPicker:Object.freeze({showPaletteAsDefault:!0,palette:Object.freeze(["#F0F6FF","#D7E3FA","#6397C2","#0166A5","#00385B","#E7EFFF","#C7D9F8","#5B88D6","#2357B1","#103677","#E8E6FF","#D0CAFF","#9085E4","#52489B","#2E2769","#FEEDFF","#FEE6FF","#E8A2EA","#914594","#59275A","#DDFEFF","#BCF8FA","#56BABD","#00959A","#005255","#DFFFFC","#BCFAF4","#3CAEA3","#007C70","#004942","#E0F4FF","#CEEEFF","#68B9E5","#0080C5","#004367","#FFF8E1","#FBEAB2","#FBDD83","#FBBD02","#493B10","#FFEDDB","#FFDDBC","#FCBE80","#F08741","#6B310A","#FFE6E6","#FDB5B4","#E96B69","#D64B49","#8D2120","#F3F4F5","#D3D9E6","#959DAD","#3B4352","#212529","#000000","#FFFFFF"])})}),A5="config-manager.js",A4=Object.freeze({url:"./assets/config/config.json"});class A3 extends AX{static #r;static #s;static async initAsync(t={}){return this.#s=E(an).merge(E(an).cloneDeep(A4),t),A0.logDebug(A5,"initAsync","Initialization started"),this.#o(this.#s.url)}static setMap(t){}static getName(){return A5}static getConfig(){return this.#r||E(an).cloneDeep(A2)}static clearConfig(){this.#r=E(an).cloneDeep(A2)}static async #o(t){let i=Date.now().toString();return AR.get(t,{responseType:"application/json",params:{cache:i},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(t=>{if(200!==t.status)throw Error("Bad response from server",{cause:t});return JSON.parse(t.data)}).then(t=>(this.#r=E(an).mergeWith(E(an).cloneDeep(A2),t,(t,i)=>{if(E(an).isArray(i))return i}),A0.logInformation(A5,"loadConfigFileAsync",E(an).cloneDeep(t)),A0.logInformation(A5,"loadConfigFileAsync",E(an).cloneDeep(this.#r)),Promise.resolve({filename:A5,result:!0}))).catch(t=>(A0.logWarning(A5,"loadConfigFileAsync",{message:"Failed to load configurations from /assets/config/config.json directory",error:t}),Promise.resolve({filename:A5,result:!1})))}}class A6{static createElement(t={}){let i=window.document.createElement(t.element);for(let[n,r]of Object.entries({id:"id",class:"className",value:"value",text:"innerText",html:"innerHTML",style:"style",title:"title"})){let s=t[n];s&&("style"===n?i[r]=Object.entries(s).map(([t,i])=>`${t}:${i}`).join(";"):"string"==typeof s?i[r]=s.trim():i[r]=s)}for(let n in t.attributes)i.setAttribute(n,t.attributes[n]);for(let n in t.prototypes)i[n]=t.prototypes[n];for(let n in t.listeners){let r=t.listeners[n];Array.isArray(r)?r.forEach(t=>{i.addEventListener(n,t)}):i.addEventListener(n,r)}return i}static removeElements(t=[]){t.forEach(t=>{this.removeElement(t)})}static removeElement(t){t.remove()}static clearElements(t=[]){t.forEach(t=>{this.clearElement(t)})}static clearText(t){t.innerText=""}static clearElement(t){t.innerHTML=""}static prependChildren(t,i=[]){i.forEach(i=>{t.prepend(i)})}static appendChildren(t,i=[]){i.forEach(i=>{t.appendChild(i)})}static runAnimation(t,i){if(!t)return;t.classList.remove(i),t.offsetWidth,t.classList.add(i);let n=A3.getConfig().animationDuration.fast;window.setTimeout(()=>{t.classList.remove(i)},n)}static flashClass(t,i){t.classList.add(i);let n=A3.getConfig().animationDuration.slow;window.setTimeout(()=>{t.classList.remove(i)},n)}}const A8=Object.freeze({browser:Object.freeze({change:"change",click:"click",contentLoaded:"DOMContentLoaded",contextMenu:"contextmenu",error:"error",fullScreenChange:"fullscreenchange",input:"input",keyDown:"keydown",keyUp:"keyup",load:"load",mouseDown:"mousedown",mouseMove:"mousemove",mouseOut:"mouseout",resize:"resize",wheel:"wheel"}),openLayers:Object.freeze({add:"add",boxCancel:"boxcancel",boxDrag:"boxdrag",boxEnd:"boxend",boxStart:"boxstart",change:"change",drawAbort:"drawabort",drawEnd:"drawend",drawStart:"drawstart",error:"error",modifyEnd:"modifyend",modifyStart:"modifystart",moveEnd:"moveend",pointerMove:"pointermove",postRender:"postrender",preRender:"prerender",propertyChange:"propertychange",remove:"remove",renderComplete:"rendercomplete",singleClick:"singleclick",snap:"snap",unSnap:"unsnap",translateEnd:"translateend",translateStart:"translatestart"}),custom:Object.freeze({activeFeatureLayerChange:"oltb.active.feature.layer.change",browserStateCleared:"oltb.browser.state.cleared",colorChange:"oltb.color.change",featureEdited:"oltb.feature.edited",featureLayerAdded:"oltb.featureLayer.added",featureLayerRemoved:"oltb.featureLayer.removed",featureRemoved:"oltb.feature.removed",mapLayerAdded:"oltb.mapLayer.added",mapLayerRemoved:"oltb.mapLayer.removed",ready:"oltb.is.ready",toolbarDirectionChange:"oltb.toolbar.direction.change"})});var an=I("f1q41");const A7=Object.freeze(["marker","tooltip","onChangeListener"]),A9="state-manager.js";class ht extends AX{static #a;static #l;static async initAsync(t={}){return A0.logDebug(A9,"initAsync","Initialization started"),this.#a=this.#A(t),this.#l=this.#h(),new Promise(t=>{t({filename:A9,result:!0})})}static setMap(t){}static getName(){return A9}static #A(t){let i=Object.freeze([...A7,...t?.ignoredKeys||[]]);return A0.logDebug(A9,"getIgnoredKeys",i),i}static #h(){A0.logDebug(A9,"getBrowserData","Loading stored state from browser");let t={};try{let i=A3.getConfig().localStorage.key;t=JSON.parse(localStorage.getItem(i))||{}}catch(t){A0.logError(A9,"getBrowserData",{message:"Failed to load application state",error:t})}return A0.logDebug(A9,"getBrowserData",E(an).cloneDeep(t)),t}static #c(){try{let t=JSON.stringify(this.#l,(t,i)=>{if(!this.#a.includes(t))return i}),i=A3.getConfig().localStorage.key;localStorage.setItem(i,t)}catch(t){A0.logError(A9,"saveState",{message:"Failed to save application state",error:t})}}static loadRuntimeState(){this.#l=this.#h()}static getIgnoredKeys(){return this.#a}static setStateObject(t,i){this.#l[t]=i,this.#c()}static getStateObject(t){return t in this.#l?this.#l[t]:{}}static getAndMergeStateObject(t,i){return E(an).merge(E(an).cloneDeep(i),this.getStateObject(t))}static clear(){A0.logDebug(A9,"clear",{info:"Clearing stored state from browser",state:E(an).cloneDeep(this.#l)}),this.#l=this.#h()}}const he=Object.freeze({bookmarkTool:"bookmarkTool",coordinatesTool:"coordinatesTool",directionTool:"directionTool",drawTool:"drawTool",editTool:"editTool",graticuleTool:"graticuleTool",homeTool:"homeTool",layerTool:"layerTool",magnifyTool:"magnifyTool",mapData:"mapData",measureTool:"measureTool",overviewTool:"overviewTool",scaleLineTool:"scalelineTool",scissorsTool:"scissorsTool",settingsManager:"settingsManager",splitViewTool:"splitviewTool",themeTool:"themeTool",toolboxTool:"toolboxTool",translationManager:"translationManager",zoomboxTool:"zoomboxTool"}),hi="element-manager.js",hn="oltb-toolbox-container";class hr extends AX{static #u;static #d;static #g;static #f;static async initAsync(t={}){return A0.logDebug(hi,"initAsync","Initialization started"),this.#u=this.#p(),this.#d=this.#m(),this.#g=this.#_(),this.#f=this.#y(),window.addEventListener(A8.browser.load,this.#w.bind(this)),window.addEventListener(A8.browser.resize,this.#v.bind(this)),window.addEventListener(A8.custom.ready,this.#v.bind(this)),window.addEventListener(A8.custom.toolbarDirectionChange,this.#v.bind(this)),window.addEventListener(A8.custom.browserStateCleared,this.#b.bind(this)),new Promise(t=>{t({filename:hi,result:!0})})}static setMap(t){}static getName(){return hi}static #p(){return window.document.getElementById(A3.getConfig().openLayers.id)}static #m(){let t=A6.createElement({element:"div",class:"oltb-toast-container",attributes:{"data-html2canvas-ignore":"true"}});return A6.appendChildren(hr.getMapElement(),[t]),t}static #_(){let t=A3.getConfig(),i=window.document.getElementById(t.toolbar.id);i.setAttribute("data-html2canvas-ignore","true"),i.addEventListener(A8.browser.wheel,this.#C.bind(i));let n=he.themeTool,r=he.directionTool;return"dark"===ht.getStateObject(n).theme&&i.classList.add("dark"),"light"===ht.getStateObject(n).theme&&i.classList.remove("dark"),"row"===ht.getStateObject(r).direction&&i.classList.add("row"),"col"===ht.getStateObject(r).direction&&i.classList.remove("row"),i.classList.contains("dark")&&window.document.body.classList.add(t.className.dark),i.classList.contains("row")&&window.document.body.classList.add(t.className.row),i}static #y(){let t=A6.createElement({element:"div",class:hn,attributes:{"data-html2canvas-ignore":"true"}});return A6.appendChildren(hr.getMapElement(),[t]),t}static #b(t){window.innerWidth<=A3.getConfig().deviceWidth.sm?this.#f.classList.add(`${hn}--collision`):this.#f.classList.remove(`${hn}--collision`)}static #C(t){if(!t.ctrlKey){let i=A3.getConfig().scroll.distance;this.scrollLeft+=t.deltaY>0?i:-i}}static #w(t){window.setTimeout(()=>{this.#g.classList.add("init-visible")},600)}static #v(t){let i=window.innerWidth,n=this.#g.offsetWidth,r=this.#f.offsetWidth;i-(3.5*A3.getConfig().browser.rem+n+r)<=0?this.#f.classList.add(`${hn}--collision`):this.#f.classList.remove(`${hn}--collision`)}static getMapElement(){return this.#u}static getToastElement(){return this.#d}static getToolbarElement(){return this.#g}static getToolboxElement(){return this.#f}}var an=I("f1q41");function hs(t){return t?(t.nodeName||"").toLowerCase():null}function ho(t){if(null==t)return window;if("[object Window]"!==t.toString()){var i=t.ownerDocument;return i&&i.defaultView||window}return t}function ha(t){var i=ho(t).Element;return t instanceof i||t instanceof Element}function hl(t){var i=ho(t).HTMLElement;return t instanceof i||t instanceof HTMLElement}function hA(t){if("undefined"==typeof ShadowRoot)return!1;var i=ho(t).ShadowRoot;return t instanceof i||t instanceof ShadowRoot}var hh={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var i=t.state;Object.keys(i.elements).forEach(function(t){var n=i.styles[t]||{},r=i.attributes[t]||{},s=i.elements[t];hl(s)&&hs(s)&&(Object.assign(s.style,n),Object.keys(r).forEach(function(t){var i=r[t];!1===i?s.removeAttribute(t):s.setAttribute(t,!0===i?"":i)}))})},effect:function(t){var i=t.state,n={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,n.popper),i.styles=n,i.elements.arrow&&Object.assign(i.elements.arrow.style,n.arrow),function(){Object.keys(i.elements).forEach(function(t){var r=i.elements[t],s=i.attributes[t]||{},o=Object.keys(i.styles.hasOwnProperty(t)?i.styles[t]:n[t]).reduce(function(t,i){return t[i]="",t},{});hl(r)&&hs(r)&&(Object.assign(r.style,o),Object.keys(s).forEach(function(t){r.removeAttribute(t)}))})}},requires:["computeStyles"]},hc=Math.max,hu=Math.min,hd=Math.round;function hg(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function hf(){return!/^((?!chrome|android).)*safari/i.test(hg())}function hp(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),s=1,o=1;i&&hl(t)&&(s=t.offsetWidth>0&&hd(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&hd(r.height)/t.offsetHeight||1);var a=(ha(t)?ho(t):window).visualViewport,l=!hf()&&n,A=(r.left+(l&&a?a.offsetLeft:0))/s,h=(r.top+(l&&a?a.offsetTop:0))/o,c=r.width/s,u=r.height/o;return{width:c,height:u,top:h,right:A+c,bottom:h+u,left:A,x:A,y:h}}function hm(t){var i=ho(t);return{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function h_(t){return((ha(t)?t.ownerDocument:t.document)||window.document).documentElement}function hy(t){return hp(h_(t)).left+hm(t).scrollLeft}function hw(t){return ho(t).getComputedStyle(t)}function hv(t){var i=hw(t),n=i.overflow,r=i.overflowX,s=i.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function hb(t){var i=hp(t),n=t.offsetWidth,r=t.offsetHeight;return 1>=Math.abs(i.width-n)&&(n=i.width),1>=Math.abs(i.height-r)&&(r=i.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function hC(t){return"html"===hs(t)?t:t.assignedSlot||t.parentNode||(hA(t)?t.host:null)||h_(t)}function hx(t,i){void 0===i&&(i=[]);var n,r=function t(i){return["html","body","#document"].indexOf(hs(i))>=0?i.ownerDocument.body:hl(i)&&hv(i)?i:t(hC(i))}(t),s=r===(null==(n=t.ownerDocument)?void 0:n.body),o=ho(r),a=s?[o].concat(o.visualViewport||[],hv(r)?r:[]):r,l=i.concat(a);return s?l:l.concat(hx(hC(a)))}function hE(t){return hl(t)&&"fixed"!==hw(t).position?t.offsetParent:null}function hB(t){for(var i=ho(t),n=hE(t);n&&["table","td","th"].indexOf(hs(n))>=0&&"static"===hw(n).position;)n=hE(n);return n&&("html"===hs(n)||"body"===hs(n)&&"static"===hw(n).position)?i:n||function(t){var i=/firefox/i.test(hg());if(/Trident/i.test(hg())&&hl(t)&&"fixed"===hw(t).position)return null;var n=hC(t);for(hA(n)&&(n=n.host);hl(n)&&0>["html","body"].indexOf(hs(n));){var r=hw(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||i&&"filter"===r.willChange||i&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||i}var hS="bottom",hI="right",hL="left",hF="auto",hM=["top",hS,hI,hL],hT="start",hR="viewport",hO="popper",hD=hM.reduce(function(t,i){return t.concat([i+"-"+hT,i+"-end"])},[]),hP=[].concat(hM,[hF]).reduce(function(t,i){return t.concat([i,i+"-"+hT,i+"-end"])},[]),hk=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"],hN={placement:"bottom",modifiers:[],strategy:"absolute"};function hU(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return!i.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}var hQ={passive:!0};function hH(t){return t.split("-")[0]}function hG(t){return t.split("-")[1]}function hV(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function hz(t){var i,n=t.reference,r=t.element,s=t.placement,o=s?hH(s):null,a=s?hG(s):null,l=n.x+n.width/2-r.width/2,A=n.y+n.height/2-r.height/2;switch(o){case"top":i={x:l,y:n.y-r.height};break;case hS:i={x:l,y:n.y+n.height};break;case hI:i={x:n.x+n.width,y:A};break;case hL:i={x:n.x-r.width,y:A};break;default:i={x:n.x,y:n.y}}var h=o?hV(o):null;if(null!=h){var c="y"===h?"height":"width";switch(a){case hT:i[h]=i[h]-(n[c]/2-r[c]/2);break;case"end":i[h]=i[h]+(n[c]/2-r[c]/2)}}return i}var hK={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hj(t){var i,n,r,s,o,a,l,A=t.popper,h=t.popperRect,c=t.placement,u=t.variation,d=t.offsets,g=t.position,f=t.gpuAcceleration,p=t.adaptive,m=t.roundOffsets,_=t.isFixed,y=d.x,w=void 0===y?0:y,v=d.y,b=void 0===v?0:v,C="function"==typeof m?m({x:w,y:b}):{x:w,y:b};w=C.x,b=C.y;var x=d.hasOwnProperty("x"),E=d.hasOwnProperty("y"),B=hL,S="top",I=window;if(p){var L=hB(A),F="clientHeight",M="clientWidth";L===ho(A)&&"static"!==hw(L=h_(A)).position&&"absolute"===g&&(F="scrollHeight",M="scrollWidth"),("top"===c||(c===hL||c===hI)&&"end"===u)&&(S=hS,b-=(_&&L===I&&I.visualViewport?I.visualViewport.height:L[F])-h.height,b*=f?1:-1),(c===hL||("top"===c||c===hS)&&"end"===u)&&(B=hI,w-=(_&&L===I&&I.visualViewport?I.visualViewport.width:L[M])-h.width,w*=f?1:-1)}var T=Object.assign({position:g},p&&hK),R=!0===m?(i={x:w,y:b},n=ho(A),r=i.x,s=i.y,{x:hd(r*(o=n.devicePixelRatio||1))/o||0,y:hd(s*o)/o||0}):{x:w,y:b};return(w=R.x,b=R.y,f)?Object.assign({},T,((l={})[S]=E?"0":"",l[B]=x?"0":"",l.transform=1>=(I.devicePixelRatio||1)?"translate("+w+"px, "+b+"px)":"translate3d("+w+"px, "+b+"px, 0)",l)):Object.assign({},T,((a={})[S]=E?b+"px":"",a[B]=x?w+"px":"",a.transform="",a))}var hW={left:"right",right:"left",bottom:"top",top:"bottom"};function h$(t){return t.replace(/left|right|bottom|top/g,function(t){return hW[t]})}var hY={start:"end",end:"start"};function hq(t){return t.replace(/start|end/g,function(t){return hY[t]})}function hX(t,i){var n=i.getRootNode&&i.getRootNode();if(t.contains(i))return!0;if(n&&hA(n)){var r=i;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function hZ(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function hJ(t,i,n){var r,s,o,a,l,A,h,c,u,d;return i===hR?hZ(function(t,i){var n=ho(t),r=h_(t),s=n.visualViewport,o=r.clientWidth,a=r.clientHeight,l=0,A=0;if(s){o=s.width,a=s.height;var h=hf();(h||!h&&"fixed"===i)&&(l=s.offsetLeft,A=s.offsetTop)}return{width:o,height:a,x:l+hy(t),y:A}}(t,n)):ha(i)?((r=hp(i,!1,"fixed"===n)).top=r.top+i.clientTop,r.left=r.left+i.clientLeft,r.bottom=r.top+i.clientHeight,r.right=r.left+i.clientWidth,r.width=i.clientWidth,r.height=i.clientHeight,r.x=r.left,r.y=r.top,r):hZ((s=h_(t),a=h_(s),l=hm(s),A=null==(o=s.ownerDocument)?void 0:o.body,h=hc(a.scrollWidth,a.clientWidth,A?A.scrollWidth:0,A?A.clientWidth:0),c=hc(a.scrollHeight,a.clientHeight,A?A.scrollHeight:0,A?A.clientHeight:0),u=-l.scrollLeft+hy(s),d=-l.scrollTop,"rtl"===hw(A||a).direction&&(u+=hc(a.clientWidth,A?A.clientWidth:0)-h),{width:h,height:c,x:u,y:d}))}function h0(){return{top:0,right:0,bottom:0,left:0}}function h1(t){return Object.assign({},h0(),t)}function h2(t,i){return i.reduce(function(i,n){return i[n]=t,i},{})}function h5(t,i){void 0===i&&(i={});var n,r,s,o,a,l,A,h,c=i,u=c.placement,d=void 0===u?t.placement:u,g=c.strategy,f=void 0===g?t.strategy:g,p=c.boundary,m=c.rootBoundary,_=c.elementContext,y=void 0===_?hO:_,w=c.altBoundary,v=c.padding,b=void 0===v?0:v,C=h1("number"!=typeof b?b:h2(b,hM)),x=t.rects.popper,E=t.elements[void 0!==w&&w?y===hO?"reference":hO:y],B=(n=ha(E)?E:E.contextElement||h_(t.elements.popper),r=void 0===p?"clippingParents":p,s=void 0===m?hR:m,A=(l=[].concat("clippingParents"===r?(o=hx(hC(n)),!ha(a=["absolute","fixed"].indexOf(hw(n).position)>=0&&hl(n)?hB(n):n)?[]:o.filter(function(t){return ha(t)&&hX(t,a)&&"body"!==hs(t)})):[].concat(r),[s]))[0],(h=l.reduce(function(t,i){var r=hJ(n,i,f);return t.top=hc(r.top,t.top),t.right=hu(r.right,t.right),t.bottom=hu(r.bottom,t.bottom),t.left=hc(r.left,t.left),t},hJ(n,A,f))).width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h),S=hp(t.elements.reference),I=hz({reference:S,element:x,strategy:"absolute",placement:d}),L=hZ(Object.assign({},x,I)),F=y===hO?L:S,M={top:B.top-F.top+C.top,bottom:F.bottom-B.bottom+C.bottom,left:B.left-F.left+C.left,right:F.right-B.right+C.right},T=t.modifiersData.offset;if(y===hO&&T){var R=T[d];Object.keys(M).forEach(function(t){var i=[hI,hS].indexOf(t)>=0?1:-1,n=["top",hS].indexOf(t)>=0?"y":"x";M[t]+=R[n]*i})}return M}function h4(t,i,n){return hc(t,hu(i,n))}function h3(t,i,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-i.height-n.y,right:t.right-i.width+n.x,bottom:t.bottom-i.height+n.y,left:t.left-i.width-n.x}}function h6(t){return["top",hI,hS,hL].some(function(i){return t[i]>=0})}var h8=(yO=void 0===(yR=(yT={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var i=t.state,n=t.instance,r=t.options,s=r.scroll,o=void 0===s||s,a=r.resize,l=void 0===a||a,A=ho(i.elements.popper),h=[].concat(i.scrollParents.reference,i.scrollParents.popper);return o&&h.forEach(function(t){t.addEventListener("scroll",n.update,hQ)}),l&&A.addEventListener("resize",n.update,hQ),function(){o&&h.forEach(function(t){t.removeEventListener("scroll",n.update,hQ)}),l&&A.removeEventListener("resize",n.update,hQ)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var i=t.state,n=t.name;i.modifiersData[n]=hz({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var i=t.state,n=t.options,r=n.gpuAcceleration,s=n.adaptive,o=n.roundOffsets,a=void 0===o||o,l={placement:hH(i.placement),variation:hG(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:void 0===r||r,isFixed:"fixed"===i.options.strategy};null!=i.modifiersData.popperOffsets&&(i.styles.popper=Object.assign({},i.styles.popper,hj(Object.assign({},l,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:void 0===s||s,roundOffsets:a})))),null!=i.modifiersData.arrow&&(i.styles.arrow=Object.assign({},i.styles.arrow,hj(Object.assign({},l,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})},data:{}},hh,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var i=t.state,n=t.options,r=t.name,s=n.offset,o=void 0===s?[0,0]:s,a=hP.reduce(function(t,n){var r,s,a,l,A,h;return t[n]=(r=i.rects,a=[hL,"top"].indexOf(s=hH(n))>=0?-1:1,A=(l="function"==typeof o?o(Object.assign({},r,{placement:n})):o)[0],h=l[1],A=A||0,h=(h||0)*a,[hL,hI].indexOf(s)>=0?{x:h,y:A}:{x:A,y:h}),t},{}),l=a[i.placement],A=l.x,h=l.y;null!=i.modifiersData.popperOffsets&&(i.modifiersData.popperOffsets.x+=A,i.modifiersData.popperOffsets.y+=h),i.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var i=t.state,n=t.options,r=t.name;if(!i.modifiersData[r]._skip){for(var s=n.mainAxis,o=void 0===s||s,a=n.altAxis,l=void 0===a||a,A=n.fallbackPlacements,h=n.padding,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,g=n.flipVariations,f=void 0===g||g,p=n.allowedAutoPlacements,m=i.options.placement,_=hH(m)===m,y=A||(_||!f?[h$(m)]:function(t){if(hH(t)===hF)return[];var i=h$(t);return[hq(t),i,hq(i)]}(m)),w=[m].concat(y).reduce(function(t,n){var r,s,o,a,l,A,d,g,m,_,y,w;return t.concat(hH(n)===hF?(s=(r={placement:n,boundary:c,rootBoundary:u,padding:h,flipVariations:f,allowedAutoPlacements:p}).placement,o=r.boundary,a=r.rootBoundary,l=r.padding,A=r.flipVariations,g=void 0===(d=r.allowedAutoPlacements)?hP:d,0===(y=(_=(m=hG(s))?A?hD:hD.filter(function(t){return hG(t)===m}):hM).filter(function(t){return g.indexOf(t)>=0})).length&&(y=_),Object.keys(w=y.reduce(function(t,n){return t[n]=h5(i,{placement:n,boundary:o,rootBoundary:a,padding:l})[hH(n)],t},{})).sort(function(t,i){return w[t]-w[i]})):n)},[]),v=i.rects.reference,b=i.rects.popper,C=new Map,x=!0,E=w[0],B=0;B<w.length;B++){var S=w[B],I=hH(S),L=hG(S)===hT,F=["top",hS].indexOf(I)>=0,M=F?"width":"height",T=h5(i,{placement:S,boundary:c,rootBoundary:u,altBoundary:d,padding:h}),R=F?L?hI:hL:L?hS:"top";v[M]>b[M]&&(R=h$(R));var O=h$(R),D=[];if(o&&D.push(T[I]<=0),l&&D.push(T[R]<=0,T[O]<=0),D.every(function(t){return t})){E=S,x=!1;break}C.set(S,D)}if(x)for(var P=f?3:1,k=function(t){var i=w.find(function(i){var n=C.get(i);if(n)return n.slice(0,t).every(function(t){return t})});if(i)return E=i,"break"},N=P;N>0&&"break"!==k(N);N--);i.placement!==E&&(i.modifiersData[r]._skip=!0,i.placement=E,i.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var i=t.state,n=t.options,r=t.name,s=n.mainAxis,o=n.altAxis,a=n.boundary,l=n.rootBoundary,A=n.altBoundary,h=n.padding,c=n.tether,u=void 0===c||c,d=n.tetherOffset,g=void 0===d?0:d,f=h5(i,{boundary:a,rootBoundary:l,padding:h,altBoundary:A}),p=hH(i.placement),m=hG(i.placement),_=!m,y=hV(p),w="x"===y?"y":"x",v=i.modifiersData.popperOffsets,b=i.rects.reference,C=i.rects.popper,x="function"==typeof g?g(Object.assign({},i.rects,{placement:i.placement})):g,E="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),B=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,S={x:0,y:0};if(v){if(void 0===s||s){var I,L="y"===y?"top":hL,F="y"===y?hS:hI,M="y"===y?"height":"width",T=v[y],R=T+f[L],O=T-f[F],D=u?-C[M]/2:0,P=m===hT?b[M]:C[M],k=m===hT?-C[M]:-b[M],N=i.elements.arrow,U=u&&N?hb(N):{width:0,height:0},Q=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:h0(),H=Q[L],G=Q[F],V=h4(0,b[M],U[M]),z=_?b[M]/2-D-V-H-E.mainAxis:P-V-H-E.mainAxis,K=_?-b[M]/2+D+V+G+E.mainAxis:k+V+G+E.mainAxis,j=i.elements.arrow&&hB(i.elements.arrow),W=j?"y"===y?j.clientTop||0:j.clientLeft||0:0,$=null!=(I=null==B?void 0:B[y])?I:0,Y=h4(u?hu(R,T+z-$-W):R,T,u?hc(O,T+K-$):O);v[y]=Y,S[y]=Y-T}if(void 0!==o&&o){var q,X,Z="x"===y?"top":hL,J="x"===y?hS:hI,tt=v[w],te="y"===w?"height":"width",ti=tt+f[Z],tn=tt-f[J],tr=-1!==["top",hL].indexOf(p),ts=null!=(X=null==B?void 0:B[w])?X:0,to=tr?ti:tt-b[te]-C[te]-ts+E.altAxis,ta=tr?tt+b[te]+C[te]-ts-E.altAxis:tn,tl=u&&tr?(q=h4(to,tt,ta))>ta?ta:q:h4(u?to:ti,tt,u?ta:tn);v[w]=tl,S[w]=tl-tt}i.modifiersData[r]=S}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var i,n=t.state,r=t.name,s=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,l=hH(n.placement),A=hV(l),h=[hL,hI].indexOf(l)>=0?"height":"width";if(o&&a){var c,u=(c=s.padding,h1("number"!=typeof(c="function"==typeof c?c(Object.assign({},n.rects,{placement:n.placement})):c)?c:h2(c,hM))),d=hb(o),g="y"===A?"top":hL,f="y"===A?hS:hI,p=n.rects.reference[h]+n.rects.reference[A]-a[A]-n.rects.popper[h],m=a[A]-n.rects.reference[A],_=hB(o),y=_?"y"===A?_.clientHeight||0:_.clientWidth||0:0,w=u[g],v=y-d[h]-u[f],b=y/2-d[h]/2+(p/2-m/2),C=h4(w,b,v);n.modifiersData[r]=((i={})[A]=C,i.centerOffset=C-b,i)}},effect:function(t){var i=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;if(null!=r)("string"!=typeof r||(r=i.elements.popper.querySelector(r)))&&hX(i.elements.popper,r)&&(i.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var i=t.state,n=t.name,r=i.rects.reference,s=i.rects.popper,o=i.modifiersData.preventOverflow,a=h5(i,{elementContext:"reference"}),l=h5(i,{altBoundary:!0}),A=h3(a,r),h=h3(l,s,o),c=h6(A),u=h6(h);i.modifiersData[n]={referenceClippingOffsets:A,popperEscapeOffsets:h,isReferenceHidden:c,hasPopperEscaped:u},i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}}]}).defaultModifiers)?[]:yR,yP=void 0===(yD=yT.defaultOptions)?hN:yD,function(t,i,n){void 0===n&&(n=yP);var r,s,o={placement:"bottom",orderedModifiers:[],options:Object.assign({},hN,yP),modifiersData:{},elements:{reference:t,popper:i},attributes:{},styles:{}},a=[],l=!1,A={state:o,setOptions:function(n){var r,s,l,c,u,d,g="function"==typeof n?n(o.options):n;h(),o.options=Object.assign({},yP,o.options,g),o.scrollParents={reference:ha(t)?hx(t):t.contextElement?hx(t.contextElement):[],popper:hx(i)};var f=(s=Object.keys(r=[].concat(yO,o.options.modifiers).reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{})).map(function(t){return r[t]}),l=new Map,c=new Set,u=[],s.forEach(function(t){l.set(t.name,t)}),s.forEach(function(t){c.has(t.name)||function t(i){c.add(i.name),[].concat(i.requires||[],i.requiresIfExists||[]).forEach(function(i){if(!c.has(i)){var n=l.get(i);n&&t(n)}}),u.push(i)}(t)}),d=u,hk.reduce(function(t,i){return t.concat(d.filter(function(t){return t.phase===i}))},[]));return o.orderedModifiers=f.filter(function(t){return t.enabled}),o.orderedModifiers.forEach(function(t){var i=t.name,n=t.options,r=t.effect;if("function"==typeof r){var s=r({state:o,name:i,instance:A,options:void 0===n?{}:n});a.push(s||function(){})}}),A.update()},forceUpdate:function(){if(!l){var t=o.elements,i=t.reference,n=t.popper;if(hU(i,n)){o.rects={reference:(r=hB(n),s="fixed"===o.options.strategy,a=hl(r),d=hl(r)&&(c=hd((h=r.getBoundingClientRect()).width)/r.offsetWidth||1,u=hd(h.height)/r.offsetHeight||1,1!==c||1!==u),g=h_(r),f=hp(i,d,s),p={scrollLeft:0,scrollTop:0},m={x:0,y:0},(a||!a&&!s)&&(("body"!==hs(r)||hv(g))&&(p=function(t){return t!==ho(t)&&hl(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:hm(t)}(r)),hl(r)?(m=hp(r,!0),m.x+=r.clientLeft,m.y+=r.clientTop):g&&(m.x=hy(g))),{x:f.left+p.scrollLeft-m.x,y:f.top+p.scrollTop-m.y,width:f.width,height:f.height}),popper:hb(n)},o.reset=!1,o.placement=o.options.placement,o.orderedModifiers.forEach(function(t){return o.modifiersData[t.name]=Object.assign({},t.data)});for(var r,s,a,h,c,u,d,g,f,p,m,_=0;_<o.orderedModifiers.length;_++){if(!0===o.reset){o.reset=!1,_=-1;continue}var y=o.orderedModifiers[_],w=y.fn,v=y.options,b=void 0===v?{}:v,C=y.name;"function"==typeof w&&(o=w({state:o,options:b,name:C,instance:A})||o)}}}},update:(r=function(){return new Promise(function(t){A.forceUpdate(),t(o)})},function(){return s||(s=new Promise(function(t){Promise.resolve().then(function(){s=void 0,t(r())})})),s}),destroy:function(){h(),l=!0}};if(!hU(t,i))return A;function h(){a.forEach(function(t){return t()}),a=[]}return A.setOptions(n).then(function(t){!l&&n.onFirstUpdate&&n.onFirstUpdate(t)}),A}),h7="tippy-content",h9="tippy-arrow",ct="tippy-svg-arrow",ce={passive:!0,capture:!0},ci=function(){return document.body};function cn(t,i,n){if(Array.isArray(t)){var r=t[i];return null==r?Array.isArray(n)?n[i]:n:r}return t}function cr(t,i){var n=({}).toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(i+"]")>-1}function cs(t,i){return"function"==typeof t?t.apply(void 0,i):t}function co(t,i){var n;return 0===i?t:function(r){clearTimeout(n),n=setTimeout(function(){t(r)},i)}}function ca(t,i){var n=Object.assign({},t);return i.forEach(function(t){delete n[t]}),n}function cl(t){return[].concat(t)}function cA(t,i){-1===t.indexOf(i)&&t.push(i)}function ch(t){return[].slice.call(t)}function cc(t){return Object.keys(t).reduce(function(i,n){return void 0!==t[n]&&(i[n]=t[n]),i},{})}function cu(){return document.createElement("div")}function cd(t){return["Element","Fragment"].some(function(i){return cr(t,i)})}function cg(t,i){t.forEach(function(t){t&&(t.style.transitionDuration=i+"ms")})}function cf(t,i){t.forEach(function(t){t&&t.setAttribute("data-state",i)})}function cp(t,i,n){var r=i+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function cm(t,i){for(var n,r=i;r;){if(t.contains(r))return!0;r=null==r.getRootNode||null==(n=r.getRootNode())?void 0:n.host}return!1}var c_={isTouch:!1},cy=0;function cw(){!c_.isTouch&&(c_.isTouch=!0,window.performance&&document.addEventListener("mousemove",cv))}function cv(){var t=performance.now();t-cy<20&&(c_.isTouch=!1,document.removeEventListener("mousemove",cv)),cy=t}function cb(){var t=document.activeElement;if(t&&t._tippy&&t._tippy.reference===t){var i=t._tippy;t.blur&&!i.state.isVisible&&t.blur()}}var cC="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto,cx=Object.assign({appendTo:ci,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),cE=Object.keys(cx);function cB(t){var i=(t.plugins||[]).reduce(function(i,n){var r,s=n.name,o=n.defaultValue;return s&&(i[s]=void 0!==t[s]?t[s]:null!=(r=cx[s])?r:o),i},{});return Object.assign({},t,i)}function cS(t,i){var n,r=Object.assign({},i,{content:cs(i.content,[t])},i.ignoreAttributes?{}:((n=i.plugins)?Object.keys(cB(Object.assign({},cx,{plugins:n}))):cE).reduce(function(i,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return i;if("content"===n)i[n]=r;else try{i[n]=JSON.parse(r)}catch(t){i[n]=r}return i},{}));return r.aria=Object.assign({},cx.aria,r.aria),r.aria={expanded:"auto"===r.aria.expanded?i.interactive:r.aria.expanded,content:"auto"===r.aria.content?i.interactive?null:"describedby":r.aria.content},r}function cI(t,i){t.innerHTML=i}function cL(t){var i=cu();return!0===t?i.className=h9:(i.className=ct,cd(t)?i.appendChild(t):cI(i,t)),i}function cF(t,i){cd(i.content)?(cI(t,""),t.appendChild(i.content)):"function"!=typeof i.content&&(i.allowHTML?cI(t,i.content):t.textContent=i.content)}function cM(t){var i=t.firstElementChild,n=ch(i.children);return{box:i,content:n.find(function(t){return t.classList.contains(h7)}),arrow:n.find(function(t){return t.classList.contains(h9)||t.classList.contains(ct)}),backdrop:n.find(function(t){return t.classList.contains("tippy-backdrop")})}}function cT(t){var i=cu(),n=cu();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=cu();function s(n,r){var s=cM(i),o=s.box,a=s.content,l=s.arrow;r.theme?o.setAttribute("data-theme",r.theme):o.removeAttribute("data-theme"),"string"==typeof r.animation?o.setAttribute("data-animation",r.animation):o.removeAttribute("data-animation"),r.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?o.setAttribute("role",r.role):o.removeAttribute("role"),(n.content!==r.content||n.allowHTML!==r.allowHTML)&&cF(a,t.props),r.arrow?l?n.arrow!==r.arrow&&(o.removeChild(l),o.appendChild(cL(r.arrow))):o.appendChild(cL(r.arrow)):l&&o.removeChild(l)}return r.className=h7,r.setAttribute("data-state","hidden"),cF(r,t.props),i.appendChild(n),n.appendChild(r),s(t.props,t.props),{popper:i,onUpdate:s}}cT.$$tippy=!0;var cR=1,cO=[],cD=[];function cP(t,i){void 0===i&&(i={});var n,r=cx.plugins.concat(i.plugins||[]);document.addEventListener("touchstart",cw,ce),window.addEventListener("blur",cb);var s=Object.assign({},i,{plugins:r}),o=(cd(n=t)?[n]:cr(n,"NodeList")?ch(n):Array.isArray(n)?n:ch(document.querySelectorAll(n))).reduce(function(t,i){var n=i&&function(t,i){var n,r,s,o,a,l,A,h,c=cS(t,Object.assign({},cx,cB(cc(i)))),u=!1,d=!1,g=!1,f=!1,p=[],m=co(j,c.interactiveDebounce),_=cR++,y=(n=c.plugins).filter(function(t,i){return n.indexOf(t)===i}),w={id:_,reference:t,popper:cu(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)},setProps:function(i){if(!w.state.isDestroyed){T("onBeforeUpdate",[w,i]),z();var n=w.props,r=cS(t,Object.assign({},n,cc(i),{ignoreAttributes:!0}));w.props=r,V(),n.interactiveDebounce!==r.interactiveDebounce&&(D(),m=co(j,r.interactiveDebounce)),n.triggerTarget&&!r.triggerTarget?cl(n.triggerTarget).forEach(function(t){t.removeAttribute("aria-expanded")}):r.triggerTarget&&t.removeAttribute("aria-expanded"),O(),M(),C&&C(n,r),w.popperInstance&&(q(),Z().forEach(function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})),T("onAfterUpdate",[w,i])}},setContent:function(t){w.setProps({content:t})},show:function(){var i=w.state.isVisible,n=w.state.isDestroyed,r=!w.state.isEnabled,s=c_.isTouch&&!w.props.touch,o=cn(w.props.duration,0,cx.duration);if(!(i||n||r||s||(h||t).hasAttribute("disabled"))&&(T("onShow",[w],!1),!1!==w.props.onShow(w))){if(w.state.isVisible=!0,I()&&(b.style.visibility="visible"),M(),U(),w.state.isMounted||(b.style.transition="none"),I()){var a,l,c,u=cM(b);cg([u.box,u.content],0)}A=function(){var t;if(w.state.isVisible&&!f){if(f=!0,b.offsetHeight,b.style.transition=w.props.moveTransition,I()&&w.props.animation){var i=cM(b),n=i.box,r=i.content;cg([n,r],o),cf([n,r],"visible")}R(),O(),cA(cD,w),null==(t=w.popperInstance)||t.forceUpdate(),T("onMount",[w]),w.props.animation&&I()&&H(o,function(){w.state.isShown=!0,T("onShown",[w])})}},l=w.props.appendTo,c=h||t,(a=w.props.interactive&&l===ci||"parent"===l?c.parentNode:cs(l,[c])).contains(b)||a.appendChild(b),w.state.isMounted=!0,q()}},hide:function(){var t=!w.state.isVisible,i=w.state.isDestroyed,n=!w.state.isEnabled,r=cn(w.props.duration,1,cx.duration);if(!t&&!i&&!n&&(T("onHide",[w],!1),!1!==w.props.onHide(w))){if(w.state.isVisible=!1,w.state.isShown=!1,f=!1,u=!1,I()&&(b.style.visibility="hidden"),D(),Q(),M(!0),I()){var s,o=cM(b),a=o.box,l=o.content;w.props.animation&&(cg([a,l],r),cf([a,l],"hidden"))}(R(),O(),w.props.animation)?I()&&(s=w.unmount,H(r,function(){!w.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&s()})):w.unmount()}},hideWithInteractivity:function(t){L().addEventListener("mousemove",m),cA(cO,m),m(t)},enable:function(){w.state.isEnabled=!0},disable:function(){w.hide(),w.state.isEnabled=!1},unmount:function(){w.state.isVisible&&w.hide(),w.state.isMounted&&(X(),Z().forEach(function(t){t._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),cD=cD.filter(function(t){return t!==w}),w.state.isMounted=!1,T("onHidden",[w]))},destroy:function(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),z(),delete t._tippy,w.state.isDestroyed=!0,T("onDestroy",[w]))}};if(!c.render)return w;var v=c.render(w),b=v.popper,C=v.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+w.id,w.popper=b,t._tippy=w,b._tippy=w;var x=y.map(function(t){return t.fn(w)}),E=t.hasAttribute("aria-expanded");return V(),O(),M(),T("onCreate",[w]),c.showOnCreate&&J(),b.addEventListener("mouseenter",function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&L().addEventListener("mousemove",m)}),w;function B(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function S(){return"hold"===B()[0]}function I(){var t;return!!(null!=(t=w.props.render)&&t.$$tippy)}function L(){var i,n,r=(h||t).parentNode;return r&&null!=(n=cl(r)[0])&&null!=(i=n.ownerDocument)&&i.body?n.ownerDocument:document}function F(t){return w.state.isMounted&&!w.state.isVisible||c_.isTouch||a&&"focus"===a.type?0:cn(w.props.delay,+!t,cx.delay)}function M(t){void 0===t&&(t=!1),b.style.pointerEvents=w.props.interactive&&!t?"":"none",b.style.zIndex=""+w.props.zIndex}function T(t,i,n){if(void 0===n&&(n=!0),x.forEach(function(n){n[t]&&n[t].apply(n,i)}),n){var r;(r=w.props)[t].apply(r,i)}}function R(){var i=w.props.aria;if(i.content){var n="aria-"+i.content,r=b.id;cl(w.props.triggerTarget||t).forEach(function(t){var i=t.getAttribute(n);if(w.state.isVisible)t.setAttribute(n,i?i+" "+r:r);else{var s=i&&i.replace(r,"").trim();s?t.setAttribute(n,s):t.removeAttribute(n)}})}}function O(){!E&&w.props.aria.expanded&&cl(w.props.triggerTarget||t).forEach(function(i){w.props.interactive?i.setAttribute("aria-expanded",w.state.isVisible&&i===(h||t)?"true":"false"):i.removeAttribute("aria-expanded")})}function D(){L().removeEventListener("mousemove",m),cO=cO.filter(function(t){return t!==m})}function P(i){if(!c_.isTouch||!g&&"mousedown"!==i.type){var n=i.composedPath&&i.composedPath()[0]||i.target;if(!(w.props.interactive&&cm(b,n))){if(cl(w.props.triggerTarget||t).some(function(t){return cm(t,n)})){if(c_.isTouch||w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else T("onClickOutside",[w,i]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),d=!0,setTimeout(function(){d=!1}),w.state.isMounted||Q())}}}function k(){g=!0}function N(){g=!1}function U(){var t=L();t.addEventListener("mousedown",P,!0),t.addEventListener("touchend",P,ce),t.addEventListener("touchstart",N,ce),t.addEventListener("touchmove",k,ce)}function Q(){var t=L();t.removeEventListener("mousedown",P,!0),t.removeEventListener("touchend",P,ce),t.removeEventListener("touchstart",N,ce),t.removeEventListener("touchmove",k,ce)}function H(t,i){var n=cM(b).box;function r(t){t.target===n&&(cp(n,"remove",r),i())}if(0===t)return i();cp(n,"remove",l),cp(n,"add",r),l=r}function G(i,n,r){void 0===r&&(r=!1),cl(w.props.triggerTarget||t).forEach(function(t){t.addEventListener(i,n,r),p.push({node:t,eventType:i,handler:n,options:r})})}function V(){S()&&(G("touchstart",K,{passive:!0}),G("touchend",W,{passive:!0})),w.props.trigger.split(/\s+/).filter(Boolean).forEach(function(t){if("manual"!==t)switch(G(t,K),t){case"mouseenter":G("mouseleave",W);break;case"focus":G(cC?"focusout":"blur",$);break;case"focusin":G("focusout",$)}})}function z(){p.forEach(function(t){var i=t.node,n=t.eventType,r=t.handler,s=t.options;i.removeEventListener(n,r,s)}),p=[]}function K(t){var i,n=!1;if(!(!w.state.isEnabled||Y(t))&&!d){var r=(null==(i=a)?void 0:i.type)==="focus";a=t,h=t.currentTarget,O(),!w.state.isVisible&&cr(t,"MouseEvent")&&cO.forEach(function(i){return i(t)}),"click"===t.type&&(0>w.props.trigger.indexOf("mouseenter")||u)&&!1!==w.props.hideOnClick&&w.state.isVisible?n=!0:J(t),"click"===t.type&&(u=!n),n&&!r&&tt(t)}}function j(i){var n,r,s,o=i.target,a=(h||t).contains(o)||b.contains(o);("mousemove"!==i.type||!a)&&(n=Z().concat(b).map(function(t){var i,n=null==(i=t._tippy.popperInstance)?void 0:i.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:c}:null}).filter(Boolean),r=i.clientX,s=i.clientY,n.every(function(t){var i=t.popperRect,n=t.popperState,o=t.props.interactiveBorder,a=n.placement.split("-")[0],l=n.modifiersData.offset;if(!l)return!0;var A="bottom"===a?l.top.y:0,h="top"===a?l.bottom.y:0,c="right"===a?l.left.x:0,u="left"===a?l.right.x:0,d=i.top-s+A>o,g=s-i.bottom-h>o,f=i.left-r+c>o,p=r-i.right-u>o;return d||g||f||p})&&(D(),tt(i)))}function W(t){if(!(Y(t)||w.props.trigger.indexOf("click")>=0&&u)){if(w.props.interactive)return void w.hideWithInteractivity(t);tt(t)}}function $(i){(!(0>w.props.trigger.indexOf("focusin"))||i.target===(h||t))&&(w.props.interactive&&i.relatedTarget&&b.contains(i.relatedTarget)||tt(i))}function Y(t){return!!c_.isTouch&&S()!==t.type.indexOf("touch")>=0}function q(){X();var i=w.props,n=i.popperOptions,r=i.placement,s=i.offset,o=i.getReferenceClientRect,a=i.moveTransition,l=I()?cM(b).arrow:null,c=o?{getBoundingClientRect:o,contextElement:o.contextElement||h||t}:t,u=[{name:"offset",options:{offset:s}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var i=t.state;if(I()){var n=cM(b).box;["placement","reference-hidden","escaped"].forEach(function(t){"placement"===t?n.setAttribute("data-placement",i.placement):i.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)}),i.attributes.popper={}}}}];I()&&l&&u.push({name:"arrow",options:{element:l,padding:3}}),u.push.apply(u,(null==n?void 0:n.modifiers)||[]),w.popperInstance=h8(c,b,Object.assign({},n,{placement:r,onFirstUpdate:A,modifiers:u}))}function X(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function Z(){return ch(b.querySelectorAll("[data-tippy-root]"))}function J(t){w.clearDelayTimeouts(),t&&T("onTrigger",[w,t]),U();var i=F(!0),n=B(),s=n[0],o=n[1];c_.isTouch&&"hold"===s&&o&&(i=o),i?r=setTimeout(function(){w.show()},i):w.show()}function tt(t){if(w.clearDelayTimeouts(),T("onUntrigger",[w,t]),!w.state.isVisible)return void Q();if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0)||!u){var i=F(!1);i?s=setTimeout(function(){w.state.isVisible&&w.hide()},i):o=requestAnimationFrame(function(){w.hide()})}}}(i,s);return n&&t.push(n),t},[]);return cd(t)?o[0]:o}cP.defaultProps=cx,cP.setDefaultProps=function(t){Object.keys(t).forEach(function(i){cx[i]=t[i]})},cP.currentInput=c_;var ck=Object.assign({},hh,{effect:function(t){var i=t.state,n={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,n.popper),i.styles=n,i.elements.arrow&&Object.assign(i.elements.arrow.style,n.arrow)}}),cN=function(t,i){void 0===i&&(i={});var n,r,s=t,o=[],a=[],l=i.overrides,A=[],h=!1;function c(){a=s.map(function(t){return cl(t.props.triggerTarget||t.reference)}).reduce(function(t,i){return t.concat(i)},[])}function u(){o=s.map(function(t){return t.reference})}function d(t){s.forEach(function(i){t?i.enable():i.disable()})}function g(t){return s.map(function(i){var n=i.setProps;return i.setProps=function(s){n(s),i.reference===r&&t.setProps(s)},function(){i.setProps=n}})}function f(t,i){var n=a.indexOf(i);if(i!==r){r=i;var A=(l||[]).concat("content").reduce(function(t,i){return t[i]=s[n].props[i],t},{});t.setProps(Object.assign({},A,{getReferenceClientRect:"function"==typeof A.getReferenceClientRect?A.getReferenceClientRect:function(){var t;return null==(t=o[n])?void 0:t.getBoundingClientRect()}}))}}d(!1),u(),c();var p=cP(cu(),Object.assign({},ca(i,["overrides"]),{plugins:[{fn:function(){return{onDestroy:function(){d(!0)},onHidden:function(){r=null},onClickOutside:function(t){t.props.showOnCreate&&!h&&(h=!0,r=null)},onShow:function(t){t.props.showOnCreate&&!h&&(h=!0,f(t,o[0]))},onTrigger:function(t,i){f(t,i.currentTarget)}}}}].concat(i.plugins||[]),triggerTarget:a,popperOptions:Object.assign({},i.popperOptions,{modifiers:[].concat((null==(n=i.popperOptions)?void 0:n.modifiers)||[],[ck])})})),m=p.show;p.show=function(t){if(m(),!r&&null==t)return f(p,o[0]);if(!r||null!=t){if("number"==typeof t)return o[t]&&f(p,o[t]);if(s.indexOf(t)>=0)return f(p,t.reference);if(o.indexOf(t)>=0)return f(p,t)}},p.showNext=function(){var t=o[0];if(!r)return p.show(0);var i=o.indexOf(r);p.show(o[i+1]||t)},p.showPrevious=function(){var t=o[o.length-1];if(!r)return p.show(t);var i=o.indexOf(r),n=o[i-1]||t;p.show(n)};var _=p.setProps;return p.setProps=function(t){l=t.overrides||l,_(t)},p.setInstances=function(t){d(!0),A.forEach(function(t){return t()}),s=t,d(!1),u(),c(),A=g(p),p.setProps({triggerTarget:a})},A=g(p),p},cU={mouseover:"mouseenter",focusin:"focus",click:"click"};function cQ(t,i){var n=[],r=[],s=!1,o=i.target,a=ca(i,["target"]),l=Object.assign({},a,{trigger:"manual",touch:!1}),A=Object.assign({touch:cx.touch},a,{showOnCreate:!0}),h=cP(t,l);function c(t){if(!t.target||s)return;var n=t.target.closest(o);if(n){var a=n.getAttribute("data-tippy-trigger")||i.trigger||cx.trigger;if(!n._tippy&&("touchstart"!==t.type||"boolean"!=typeof A.touch)&&!("touchstart"!==t.type&&0>a.indexOf(cU[t.type]))){var l=cP(n,A);l&&(r=r.concat(l))}}}function u(t,i,r,s){void 0===s&&(s=!1),t.addEventListener(i,r,s),n.push({node:t,eventType:i,handler:r,options:s})}return cl(h).forEach(function(t){var i,o=t.destroy,a=t.enable,l=t.disable;t.destroy=function(t){void 0===t&&(t=!0),t&&r.forEach(function(t){t.destroy()}),r=[],n.forEach(function(t){var i=t.node,n=t.eventType,r=t.handler,s=t.options;i.removeEventListener(n,r,s)}),n=[],o()},t.enable=function(){a(),r.forEach(function(t){return t.enable()}),s=!1},t.disable=function(){l(),r.forEach(function(t){return t.disable()}),s=!0},u(i=t.reference,"touchstart",c,ce),u(i,"mouseover",c),u(i,"focusin",c),u(i,"click",c)}),h}cP.setDefaultProps({render:cT});const cH=function(){return window.document.body.classList.contains(A3.getConfig().className.row)};var cG={};"undefined"!=typeof self&&self,cG=function(){var t=[function(t,i,n){var r=n(3);function s(t){return!0===r(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var i,n;return!1!==s(t)&&"function"==typeof(i=t.constructor)&&!1!==s(n=i.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")}},function(t,i,n){Object.defineProperty(i,"__esModule",{value:!0}),i.VERSION=i.PALETTE_MATERIAL_CHROME=i.PALETTE_MATERIAL_500=i.COLOR_NAMES=i.getLuminance=i.intToRgb=i.rgbToInt=i.rgbToHsv=i.rgbToHsl=i.hslToRgb=i.rgbToHex=i.parseColor=i.parseColorToHsla=i.parseColorToHsl=i.parseColorToRgba=i.parseColorToRgb=i.from=i.createPicker=void 0;var r=function(){function t(t,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,n,r){return n&&t(i.prototype,n),r&&t(i,r),i}}(),s=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!i||n.length!==i);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(s)throw o}}return n}(t,i);throw TypeError("Invalid attempt to destructure non-iterable instance")},o=n(2),a=A(n(0)),l=A(n(4));function A(t){return t&&t.__esModule?t:{default:t}}function h(t,i){if(!(t instanceof i))throw TypeError("Cannot call a class as a function")}function c(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}var u="undefined"!=typeof window&&window.navigator.userAgent.indexOf("Edge")>-1,d="undefined"!=typeof window&&window.navigator.userAgent.indexOf("rv:")>-1,g={id:null,attachTo:"body",showHSL:!0,showRGB:!0,showHEX:!0,showAlpha:!1,color:"#ff0000",palette:null,paletteEditable:!1,useAlphaInPalette:"auto",slBarSize:[232,150],hueBarSize:[150,11],alphaBarSize:[150,11]},f="COLOR",p="RGBA_USER",m="HSLA_USER";function _(t,i,n){return t?t instanceof HTMLElement?t:t instanceof NodeList?t[0]:"string"==typeof t?document.querySelector(t):t.jquery?t.get(0):n?i:null:i}function y(t){var i=t.getContext("2d"),n=+t.width,r=+t.height,a=i.createLinearGradient(1,1,1,r-1);return a.addColorStop(0,"white"),a.addColorStop(1,"black"),{setHue:function(t){var s=i.createLinearGradient(1,0,n-1,0);s.addColorStop(0,"hsla("+t+", 100%, 50%, 0)"),s.addColorStop(1,"hsla("+t+", 100%, 50%, 1)"),i.fillStyle=a,i.fillRect(0,0,n,r),i.fillStyle=s,i.globalCompositeOperation="multiply",i.fillRect(0,0,n,r),i.globalCompositeOperation="source-over"},grabColor:function(t,n){return i.getImageData(t,n,1,1).data},findColor:function(t,i,a){var l=s((0,o.rgbToHsv)(t,i,a),3);return[l[1]*n,r-l[2]*r]}}}function w(t,i,n){return null===t?i:/^\s*$/.test(t)?n:!!/true|yes|1/i.test(t)||!/false|no|0/i.test(t)&&i}function v(t,i,n){if(null===t)return i;if(/^\s*$/.test(t))return n;var r=t.split(",").map(Number);return 2===r.length&&r[0]&&r[1]?r:i}var b=function(){function t(i,n){if(h(this,t),n?(i=_(i),this.options=Object.assign({},g,n)):i&&(0,a.default)(i)?(this.options=Object.assign({},g,i),i=_(this.options.attachTo)):(this.options=Object.assign({},g),i=_((0,o.nvl)(i,this.options.attachTo))),!i)throw Error("Container not found: "+this.options.attachTo);!function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"acp-";if(i.hasAttribute(n+"show-hsl")&&(t.showHSL=w(i.getAttribute(n+"show-hsl"),g.showHSL,!0)),i.hasAttribute(n+"show-rgb")&&(t.showRGB=w(i.getAttribute(n+"show-rgb"),g.showRGB,!0)),i.hasAttribute(n+"show-hex")&&(t.showHEX=w(i.getAttribute(n+"show-hex"),g.showHEX,!0)),i.hasAttribute(n+"show-alpha")&&(t.showAlpha=w(i.getAttribute(n+"show-alpha"),g.showAlpha,!0)),i.hasAttribute(n+"palette-editable")&&(t.paletteEditable=w(i.getAttribute(n+"palette-editable"),g.paletteEditable,!0)),i.hasAttribute(n+"sl-bar-size")&&(t.slBarSize=v(i.getAttribute(n+"sl-bar-size"),g.slBarSize,[232,150])),i.hasAttribute(n+"hue-bar-size")&&(t.hueBarSize=v(i.getAttribute(n+"hue-bar-size"),g.hueBarSize,[150,11]),t.alphaBarSize=t.hueBarSize),i.hasAttribute(n+"palette")){var r=i.getAttribute(n+"palette");switch(r){case"PALETTE_MATERIAL_500":t.palette=o.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":case"":t.palette=o.PALETTE_MATERIAL_CHROME;break;default:t.palette=r.split(/[;|]/)}}i.hasAttribute(n+"color")&&(t.color=i.getAttribute(n+"color"))}(this.options,i),this.H=0,this.S=0,this.L=0,this.R=0,this.G=0,this.B=0,this.A=1,this.palette={},this.element=document.createElement("div"),this.options.id&&(this.element.id=this.options.id),this.element.className="a-color-picker",this.element.innerHTML=l.default,i.appendChild(this.element);var r=this.element.querySelector(".a-color-picker-h");this.setupHueCanvas(r),this.hueBarHelper=y(r),this.huePointer=this.element.querySelector(".a-color-picker-h+.a-color-picker-dot");var s=this.element.querySelector(".a-color-picker-sl");this.setupSlCanvas(s),this.slBarHelper=y(s),this.slPointer=this.element.querySelector(".a-color-picker-sl+.a-color-picker-dot"),this.preview=this.element.querySelector(".a-color-picker-preview"),this.setupClipboard(this.preview.querySelector(".a-color-picker-clipbaord")),this.options.showHSL?(this.setupInput(this.inputH=this.element.querySelector(".a-color-picker-hsl>input[nameref=H]")),this.setupInput(this.inputS=this.element.querySelector(".a-color-picker-hsl>input[nameref=S]")),this.setupInput(this.inputL=this.element.querySelector(".a-color-picker-hsl>input[nameref=L]"))):this.element.querySelector(".a-color-picker-hsl").remove(),this.options.showRGB?(this.setupInput(this.inputR=this.element.querySelector(".a-color-picker-rgb>input[nameref=R]")),this.setupInput(this.inputG=this.element.querySelector(".a-color-picker-rgb>input[nameref=G]")),this.setupInput(this.inputB=this.element.querySelector(".a-color-picker-rgb>input[nameref=B]"))):this.element.querySelector(".a-color-picker-rgb").remove(),this.options.showHEX?this.setupInput(this.inputRGBHEX=this.element.querySelector("input[nameref=RGBHEX]")):this.element.querySelector(".a-color-picker-rgbhex").remove(),this.options.paletteEditable||this.options.palette&&this.options.palette.length>0?this.setPalette(this.paletteRow=this.element.querySelector(".a-color-picker-palette")):(this.paletteRow=this.element.querySelector(".a-color-picker-palette"),this.paletteRow.remove()),this.options.showAlpha?(this.setupAlphaCanvas(this.element.querySelector(".a-color-picker-a")),this.alphaPointer=this.element.querySelector(".a-color-picker-a+.a-color-picker-dot")):this.element.querySelector(".a-color-picker-alpha").remove(),this.element.style.width=this.options.slBarSize[0]+"px",this.onValueChanged(f,this.options.color)}return r(t,[{key:"setupHueCanvas",value:function(t){var i=this;t.width=this.options.hueBarSize[0],t.height=this.options.hueBarSize[1];for(var n=t.getContext("2d"),r=n.createLinearGradient(0,0,this.options.hueBarSize[0],0),s=0;s<=1;s+=1/360)r.addColorStop(s,"hsl("+360*s+", 100%, 50%)");n.fillStyle=r,n.fillRect(0,0,this.options.hueBarSize[0],this.options.hueBarSize[1]);var a=function(n){var r=(0,o.limit)(n.clientX-t.getBoundingClientRect().left,0,i.options.hueBarSize[0]),s=Math.round(360*r/i.options.hueBarSize[0]);i.huePointer.style.left=r-7+"px",i.onValueChanged("H",s)},l=function t(){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",function(t){a(t),document.addEventListener("mousemove",a),document.addEventListener("mouseup",l)})}},{key:"setupSlCanvas",value:function(t){var i=this;t.width=this.options.slBarSize[0],t.height=this.options.slBarSize[1];var n=function(n){var r=(0,o.limit)(n.clientX-t.getBoundingClientRect().left,0,i.options.slBarSize[0]-1),s=(0,o.limit)(n.clientY-t.getBoundingClientRect().top,0,i.options.slBarSize[1]-1),a=i.slBarHelper.grabColor(r,s);i.slPointer.style.left=r-7+"px",i.slPointer.style.top=s-7+"px",i.onValueChanged("RGB",a)},r=function t(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",function(t){n(t),document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)})}},{key:"setupAlphaCanvas",value:function(t){var i=this;t.width=this.options.alphaBarSize[0],t.height=this.options.alphaBarSize[1];var n=t.getContext("2d"),r=n.createLinearGradient(0,0,t.width-1,0);r.addColorStop(0,"hsla(0, 0%, 50%, 0)"),r.addColorStop(1,"hsla(0, 0%, 50%, 1)"),n.fillStyle=r,n.fillRect(0,0,this.options.alphaBarSize[0],this.options.alphaBarSize[1]);var s=function(n){var r=(0,o.limit)(n.clientX-t.getBoundingClientRect().left,0,i.options.alphaBarSize[0]),s=+(r/i.options.alphaBarSize[0]).toFixed(2);i.alphaPointer.style.left=r-7+"px",i.onValueChanged("ALPHA",s)},a=function t(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",function(t){s(t),document.addEventListener("mousemove",s),document.addEventListener("mouseup",a)})}},{key:"setupInput",value:function(t){var i=this,n=+t.min,r=+t.max,s=t.getAttribute("nameref");t.hasAttribute("select-on-focus")&&t.addEventListener("focus",function(){t.select()}),"text"===t.type?t.addEventListener("change",function(){i.onValueChanged(s,t.value)}):((u||d)&&t.addEventListener("keydown",function(a){"Up"===a.key?(t.value=(0,o.limit)(+t.value+1,n,r),i.onValueChanged(s,t.value),a.returnValue=!1):"Down"===a.key&&(t.value=(0,o.limit)(t.value-1,n,r),i.onValueChanged(s,t.value),a.returnValue=!1)}),t.addEventListener("change",function(){var a=+t.value;i.onValueChanged(s,(0,o.limit)(a,n,r))}))}},{key:"setupClipboard",value:function(t){var i=this;t.title="click to copy",t.addEventListener("click",function(){t.value=(0,o.parseColor)([i.R,i.G,i.B,i.A],"hexcss4"),t.select(),document.execCommand("copy")})}},{key:"setPalette",value:function(t){var i=this,n="auto"===this.options.useAlphaInPalette?this.options.showAlpha:this.options.useAlphaInPalette,r=null;switch(this.options.palette){case"PALETTE_MATERIAL_500":r=o.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":r=o.PALETTE_MATERIAL_CHROME;break;default:r=(0,o.ensureArray)(this.options.palette)}if(this.options.paletteEditable||r.length>0){var s=function(n,r,s){var o=t.querySelector('.a-color-picker-palette-color[data-color="'+n+'"]')||document.createElement("div");o.className="a-color-picker-palette-color",o.style.backgroundColor=n,o.setAttribute("data-color",n),o.title=n,t.insertBefore(o,r),i.palette[n]=!0,s&&i.onPaletteColorAdd(n)},a=function(n,r){n?(t.removeChild(n),i.palette[n.getAttribute("data-color")]=!1,r&&i.onPaletteColorRemove(n.getAttribute("data-color"))):(t.querySelectorAll(".a-color-picker-palette-color[data-color]").forEach(function(i){t.removeChild(i)}),Object.keys(i.palette).forEach(function(t){i.palette[t]=!1}),r&&i.onPaletteColorRemove())};if(r.map(function(t){return(0,o.parseColor)(t,n?"rgbcss4":"hex")}).filter(function(t){return!!t}).forEach(function(t){return s(t)}),this.options.paletteEditable){var l=document.createElement("div");l.className="a-color-picker-palette-color a-color-picker-palette-add",l.innerHTML="+",t.appendChild(l),t.addEventListener("click",function(t){/a-color-picker-palette-add/.test(t.target.className)?t.shiftKey?a(null,!0):s(n?(0,o.parseColor)([i.R,i.G,i.B,i.A],"rgbcss4"):(0,o.rgbToHex)(i.R,i.G,i.B),t.target,!0):/a-color-picker-palette-color/.test(t.target.className)&&(t.shiftKey?a(t.target,!0):i.onValueChanged(f,t.target.getAttribute("data-color")))})}else t.addEventListener("click",function(t){/a-color-picker-palette-color/.test(t.target.className)&&i.onValueChanged(f,t.target.getAttribute("data-color"))})}else t.style.display="none"}},{key:"updatePalette",value:function(t){this.paletteRow.innerHTML="",this.palette={},this.paletteRow.parentElement||this.element.appendChild(this.paletteRow),this.options.palette=t,this.setPalette(this.paletteRow)}},{key:"onValueChanged",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{silent:!1};switch(t){case"H":this.H=i;var r=s((0,o.hslToRgb)(this.H,this.S,this.L),3);this.R=r[0],this.G=r[1],this.B=r[2],this.slBarHelper.setHue(i),this.updatePointerH(this.H),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"S":this.S=i;var a=s((0,o.hslToRgb)(this.H,this.S,this.L),3);this.R=a[0],this.G=a[1],this.B=a[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"L":this.L=i;var l=s((0,o.hslToRgb)(this.H,this.S,this.L),3);this.R=l[0],this.G=l[1],this.B=l[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"R":this.R=i;var A=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=A[0],this.S=A[1],this.L=A[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"G":this.G=i;var h=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=h[0],this.S=h[1],this.L=h[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"B":this.B=i;var c=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=c[0],this.S=c[1],this.L=c[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"RGB":var u=s(i,3);this.R=u[0],this.G=u[1],this.B=u[2];var d=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=d[0],this.S=d[1],this.L=d[2],this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case p:var g=s(i,4);this.R=g[0],this.G=g[1],this.B=g[2],this.A=g[3];var _=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=_[0],this.S=_[1],this.L=_[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case m:var y=s(i,4);this.H=y[0],this.S=y[1],this.L=y[2],this.A=y[3];var w=s((0,o.hslToRgb)(this.H,this.S,this.L),3);this.R=w[0],this.G=w[1],this.B=w[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"RGBHEX":var v=s((0,o.cssColorToRgb)(i)||[this.R,this.G,this.B],3);this.R=v[0],this.G=v[1],this.B=v[2];var b=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=b[0],this.S=b[1],this.L=b[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B);break;case f:var C=s((0,o.parseColor)(i,"rgba")||[0,0,0,1],4);this.R=C[0],this.G=C[1],this.B=C[2],this.A=C[3];var x=s((0,o.rgbToHsl)(this.R,this.G,this.B),3);this.H=x[0],this.S=x[1],this.L=x[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"ALPHA":this.A=i}1===this.A?this.preview.style.backgroundColor="rgb("+this.R+","+this.G+","+this.B+")":this.preview.style.backgroundColor="rgba("+this.R+","+this.G+","+this.B+","+this.A+")",n&&n.silent||this.onchange&&this.onchange(this.preview.style.backgroundColor)}},{key:"onPaletteColorAdd",value:function(t){this.oncoloradd&&this.oncoloradd(t)}},{key:"onPaletteColorRemove",value:function(t){this.oncolorremove&&this.oncolorremove(t)}},{key:"updateInputHSL",value:function(t,i,n){this.options.showHSL&&(this.inputH.value=t,this.inputS.value=i,this.inputL.value=n)}},{key:"updateInputRGB",value:function(t,i,n){this.options.showRGB&&(this.inputR.value=t,this.inputG.value=i,this.inputB.value=n)}},{key:"updateInputRGBHEX",value:function(t,i,n){this.options.showHEX&&(this.inputRGBHEX.value=(0,o.rgbToHex)(t,i,n))}},{key:"updatePointerH",value:function(t){var i=this.options.hueBarSize[0]*t/360;this.huePointer.style.left=i-7+"px"}},{key:"updatePointerSL",value:function(t,i,n){var r=s((0,o.hslToRgb)(t,i,n),3),a=r[0],l=r[1],A=r[2],h=s(this.slBarHelper.findColor(a,l,A),2),c=h[0],u=h[1];c>=0&&(this.slPointer.style.left=c-7+"px",this.slPointer.style.top=u-7+"px")}},{key:"updatePointerA",value:function(t){if(this.options.showAlpha){var i=this.options.alphaBarSize[0]*t;this.alphaPointer.style.left=i-7+"px"}}}]),t}(),C=function(){function t(i){h(this,t),this.name=i,this.listeners=[]}return r(t,[{key:"on",value:function(t){t&&this.listeners.push(t)}},{key:"off",value:function(t){this.listeners=t?this.listeners.filter(function(i){return i!==t}):[]}},{key:"emit",value:function(t,i){for(var n=this.listeners.slice(0),r=0;r<n.length;r++)n[r].apply(i,t)}}]),t}();function x(t,i){var n=new b(t,i),r={change:new C("change"),coloradd:new C("coloradd"),colorremove:new C("colorremove")},a=!0,l={},A={get element(){return n.element},get rgb(){return[n.R,n.G,n.B]},set rgb(e){var h=s(e,3),c=h[0],u=h[1],d=h[2],g=[(0,o.limit)(c,0,255),(0,o.limit)(u,0,255),(0,o.limit)(d,0,255)];c=g[0],u=g[1],d=g[2],n.onValueChanged(p,[c,u,d,1])},get hsl(){return[n.H,n.S,n.L]},set hsl(e){var _=s(e,3),y=_[0],w=_[1],v=_[2],x=[(0,o.limit)(y,0,360),(0,o.limit)(w,0,100),(0,o.limit)(v,0,100)];y=x[0],w=x[1],v=x[2],n.onValueChanged(m,[y,w,v,1])},get rgbhex(){return this.all.hex},get rgba(){return[n.R,n.G,n.B,n.A]},set rgba(e){var E=s(e,4),B=E[0],S=E[1],I=E[2],L=E[3],F=[(0,o.limit)(B,0,255),(0,o.limit)(S,0,255),(0,o.limit)(I,0,255),(0,o.limit)(L,0,1)];B=F[0],S=F[1],I=F[2],L=F[3],n.onValueChanged(p,[B,S,I,L])},get hsla(){return[n.H,n.S,n.L,n.A]},set hsla(e){var M=s(e,4),T=M[0],R=M[1],O=M[2],D=M[3],P=[(0,o.limit)(T,0,360),(0,o.limit)(R,0,100),(0,o.limit)(O,0,100),(0,o.limit)(D,0,1)];T=P[0],R=P[1],O=P[2],D=P[3],n.onValueChanged(m,[T,R,O,D])},get color(){return this.all.toString()},set color(e){n.onValueChanged(f,e)},setColor:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.onValueChanged(f,t,{silent:i})},get all(){if(a){var k=[n.R,n.G,n.B,n.A],N=n.A<1?"rgba("+n.R+","+n.G+","+n.B+","+n.A+")":o.rgbToHex.apply(void 0,k);(l=(0,o.parseColor)(k,l)).toString=function(){return N},a=!1}return Object.assign({},l)},get onchange(){return r.change&&r.change.listeners[0]},set onchange(e){this.off("change").on("change",e)},get oncoloradd(){return r.coloradd&&r.coloradd.listeners[0]},set oncoloradd(e){this.off("coloradd").on("coloradd",e)},get oncolorremove(){return r.colorremove&&r.colorremove.listeners[0]},set oncolorremove(e){this.off("colorremove").on("colorremove",e)},get palette(){return Object.keys(n.palette).filter(function(t){return n.palette[t]})},set palette(e){n.updatePalette(e)},show:function(){n.element.classList.remove("hidden")},hide:function(){n.element.classList.add("hidden")},toggle:function(){n.element.classList.toggle("hidden")},on:function(t,i){return t&&r[t]&&r[t].on(i),this},off:function(t,i){return t&&r[t]&&r[t].off(i),this},destroy:function(){r.change.off(),r.coloradd.off(),r.colorremove.off(),n.element.remove(),r=null,n=null}};return n.onchange=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];a=!0,r.change.emit([A].concat(i),A)},n.oncoloradd=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];r.coloradd.emit([A].concat(i),A)},n.oncolorremove=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];r.colorremove.emit([A].concat(i),A)},n.element.ctrl=A,A}if("undefined"!=typeof window&&!document.querySelector('head>style[data-source="a-color-picker"]')){var E=n(5).toString(),B=document.createElement("style");B.setAttribute("type","text/css"),B.setAttribute("data-source","a-color-picker"),B.innerHTML=E,document.querySelector("head").appendChild(B)}i.createPicker=x,i.from=function(t,i){var n=(t?Array.isArray(t)?t:t instanceof HTMLElement?[t]:t instanceof NodeList?[].concat(c(t)):"string"==typeof t?[].concat(c(document.querySelectorAll(t))):t.jquery?t.get():[]:[]).map(function(t,n){var r=x(t,i);return r.index=n,r});return n.on=function(t,i){return n.forEach(function(n){return n.on(t,i)}),this},n.off=function(t){return n.forEach(function(i){return i.off(t)}),this},n},i.parseColorToRgb=o.parseColorToRgb,i.parseColorToRgba=o.parseColorToRgba,i.parseColorToHsl=o.parseColorToHsl,i.parseColorToHsla=o.parseColorToHsla,i.parseColor=o.parseColor,i.rgbToHex=o.rgbToHex,i.hslToRgb=o.hslToRgb,i.rgbToHsl=o.rgbToHsl,i.rgbToHsv=o.rgbToHsv,i.rgbToInt=o.rgbToInt,i.intToRgb=o.intToRgb,i.getLuminance=o.getLuminance,i.COLOR_NAMES=o.COLOR_NAMES,i.PALETTE_MATERIAL_500=o.PALETTE_MATERIAL_500,i.PALETTE_MATERIAL_CHROME=o.PALETTE_MATERIAL_CHROME,i.VERSION="1.2.1"},function(t,i,n){Object.defineProperty(i,"__esModule",{value:!0}),i.nvl=i.ensureArray=i.limit=i.getLuminance=i.parseColor=i.parseColorToHsla=i.parseColorToHsl=i.cssHslaToHsla=i.cssHslToHsl=i.parseColorToRgba=i.parseColorToRgb=i.cssRgbaToRgba=i.cssRgbToRgb=i.cssColorToRgba=i.cssColorToRgb=i.intToRgb=i.rgbToInt=i.rgbToHsv=i.rgbToHsl=i.hslToRgb=i.rgbToHex=i.PALETTE_MATERIAL_CHROME=i.PALETTE_MATERIAL_500=i.COLOR_NAMES=void 0;var r,s=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],r=!0,s=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!i||n.length!==i);r=!0);}catch(t){s=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(s)throw o}}return n}(t,i);throw TypeError("Invalid attempt to destructure non-iterable instance")},o=(r=n(0))&&r.__esModule?r:{default:r};function a(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}var l={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4","indianred ":"#CD5C5C","indigo ":"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function A(t,i,n){return isNaN(t*=1)||t<i?i:t>n?n:t}function h(t,i){return null==t?i:t}function c(t,i,n){var r=[A(t,0,255),A(i,0,255),A(n,0,255)];return"#"+("000000"+((t=r[0])<<16|(i=r[1])<<8|(n=r[2])).toString(16)).slice(-6)}function u(t,i,n){var r=void 0,s=void 0,o=void 0,a=[A(t,0,360)/360,A(i,0,100)/100,A(n,0,100)/100];if(t=a[0],n=a[2],0==(i=a[1]))r=s=o=n;else{var l=function(t,i,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(i-t)*n:n<.5?i:n<2/3?t+(i-t)*(2/3-n)*6:t},h=n<.5?n*(1+i):n+i-n*i,c=2*n-h;r=l(c,h,t+1/3),s=l(c,h,t),o=l(c,h,t-1/3)}return[255*r,255*s,255*o].map(Math.round)}function d(t,i,n){var r=[A(t,0,255)/255,A(i,0,255)/255,A(n,0,255)/255];t=r[0];var s=Math.max(t,i=r[1],n=r[2]),o=Math.min(t,i,n),a=void 0,l=void 0,h=(s+o)/2;if(s==o)a=l=0;else{var c=s-o;switch(l=h>.5?c/(2-s-o):c/(s+o),s){case t:a=(i-n)/c+6*(i<n);break;case i:a=(n-t)/c+2;break;case n:a=(t-i)/c+4}a/=6}return[360*a,100*l,100*h].map(Math.round)}function g(t,i,n){return t<<16|i<<8|n}function f(t){if(t){var i=l[t.toString().toLowerCase()],n=s(/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F]))|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})))\s*$/i.exec(i||t)||[],10),r=n[3],o=n[4],a=n[5],A=n[7],h=n[8],c=n[9];if(void 0!==r)return[parseInt(r+r,16),parseInt(o+o,16),parseInt(a+a,16)];if(void 0!==A)return[parseInt(A,16),parseInt(h,16),parseInt(c,16)]}}function p(t){if(t){var i=l[t.toString().toLowerCase()],n=s(/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F])([0-9A-F])?)|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?))\s*$/i.exec(i||t)||[],12),r=n[3],o=n[4],a=n[5],A=n[6],h=n[8],c=n[9],u=n[10],d=n[11];if(void 0!==r)return[parseInt(r+r,16),parseInt(o+o,16),parseInt(a+a,16),A?+(parseInt(A+A,16)/255).toFixed(2):1];if(void 0!==h)return[parseInt(h,16),parseInt(c,16),parseInt(u,16),d?+(parseInt(d,16)/255).toFixed(2):1]}}function m(t){if(t){var i=s(/^rgb\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(t)||[],4),n=i[0],r=i[1],o=i[2],a=i[3];return n?[A(r,0,255),A(o,0,255),A(a,0,255)]:void 0}}function _(t){if(t){var i=s(/^rgba?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(t)||[],6),n=i[0],r=i[1],o=i[2],a=i[3],l=i[5];return n?[A(r,0,255),A(o,0,255),A(a,0,255),A(h(l,1),0,1)]:void 0}}function y(t){if(Array.isArray(t))return[A(t[0],0,255),A(t[1],0,255),A(t[2],0,255),A(h(t[3],1),0,1)];var i=p(t)||_(t);return i&&3===i.length&&i.push(1),i}function w(t){if(t){var i=s(/^hsl\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(t)||[],4),n=i[0],r=i[1],o=i[2],a=i[3];return n?[A(r,0,360),A(o,0,100),A(a,0,100)]:void 0}}function v(t){if(t){var i=s(/^hsla?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(t)||[],6),n=i[0],r=i[1],o=i[2],a=i[3],l=i[5];return n?[A(r,0,255),A(o,0,255),A(a,0,255),A(h(l,1),0,1)]:void 0}}function b(t){if(Array.isArray(t))return[A(t[0],0,360),A(t[1],0,100),A(t[2],0,100),A(h(t[3],1),0,1)];var i=v(t);return i&&3===i.length&&i.push(1),i}function C(t,i){switch(i){case"rgb":default:return t.slice(0,3);case"rgbcss":return"rgb("+t[0]+", "+t[1]+", "+t[2]+")";case"rgbcss4":return"rgb("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";case"rgba":return t;case"rgbacss":return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";case"hsl":return d.apply(void 0,a(t));case"hslcss":return"hsl("+(t=d.apply(void 0,a(t)))[0]+", "+t[1]+", "+t[2]+")";case"hslcss4":var n=d.apply(void 0,a(t));return"hsl("+n[0]+", "+n[1]+", "+n[2]+", "+t[3]+")";case"hsla":return[].concat(a(d.apply(void 0,a(t))),[t[3]]);case"hslacss":var r=d.apply(void 0,a(t));return"hsla("+r[0]+", "+r[1]+", "+r[2]+", "+t[3]+")";case"hex":return c.apply(void 0,a(t));case"hexcss4":return c.apply(void 0,a(t))+("00"+parseInt(255*t[3]).toString(16)).slice(-2);case"int":return g.apply(void 0,a(t))}}i.COLOR_NAMES=l,i.PALETTE_MATERIAL_500=["#F44336","#E91E63","#E91E63","#9C27B0","#9C27B0","#673AB7","#673AB7","#3F51B5","#3F51B5","#2196F3","#2196F3","#03A9F4","#03A9F4","#00BCD4","#00BCD4","#009688","#009688","#4CAF50","#4CAF50","#8BC34A","#8BC34A","#CDDC39","#CDDC39","#FFEB3B","#FFEB3B","#FFC107","#FFC107","#FF9800","#FF9800","#FF5722","#FF5722","#795548","#795548","#9E9E9E","#9E9E9E","#607D8B","#607D8B"],i.PALETTE_MATERIAL_CHROME=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],i.rgbToHex=c,i.hslToRgb=u,i.rgbToHsl=d,i.rgbToHsv=function(t,i,n){var r=[A(t,0,255)/255,A(i,0,255)/255,A(n,0,255)/255];t=r[0];var s,o=Math.max(t,i=r[1],n=r[2]),a=Math.min(t,i,n),l=void 0,h=o-a;if(s=0===o?0:h/o,o==a)l=0;else{switch(o){case t:l=(i-n)/h+6*(i<n);break;case i:l=(n-t)/h+2;break;case n:l=(t-i)/h+4}l/=6}return[l,s,o]},i.rgbToInt=g,i.intToRgb=function(t){return[t>>16&255,t>>8&255,255&t]},i.cssColorToRgb=f,i.cssColorToRgba=p,i.cssRgbToRgb=m,i.cssRgbaToRgba=_,i.parseColorToRgb=function(t){return Array.isArray(t)?t=[A(t[0],0,255),A(t[1],0,255),A(t[2],0,255)]:f(t)||m(t)},i.parseColorToRgba=y,i.cssHslToHsl=w,i.cssHslaToHsla=v,i.parseColorToHsl=function(t){return Array.isArray(t)?t=[A(t[0],0,360),A(t[1],0,100),A(t[2],0,100)]:w(t)},i.parseColorToHsla=b,i.parseColor=function(t,i){if(i=i||"rgb",null!=t){var n=void 0;if((n=y(t))||(n=b(t))&&(n=[].concat(a(u.apply(void 0,a(n))),[n[3]])))return(0,o.default)(i)?["rgb","rgbcss","rgbcss4","rgba","rgbacss","hsl","hslcss","hslcss4","hsla","hslacss","hex","hexcss4","int"].reduce(function(t,i){return t[i]=C(n,i),t},i||{}):C(n,i.toString().toLowerCase())}},i.getLuminance=function(t,i,n){return .2126*(t=(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(i=(i/=255)<.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*((n/=255)<.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},i.limit=A,i.ensureArray=function(t){return t?Array.from(t):[]},i.nvl=h},function(t,i,n){t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,i){t.exports='<div class="a-color-picker-row a-color-picker-stack a-color-picker-row-top"> <canvas class="a-color-picker-sl a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> <div class=a-color-picker-row> <div class="a-color-picker-stack a-color-picker-transparent a-color-picker-circle"> <div class=a-color-picker-preview> <input class=a-color-picker-clipbaord type=text> </div> </div> <div class=a-color-picker-column> <div class="a-color-picker-cell a-color-picker-stack"> <canvas class=a-color-picker-h></canvas> <div class=a-color-picker-dot></div> </div> <div class="a-color-picker-cell a-color-picker-alpha a-color-picker-stack" show-on-alpha> <canvas class="a-color-picker-a a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> </div> </div> <div class="a-color-picker-row a-color-picker-hsl" show-on-hsl> <label>H</label> <input nameref=H type=number maxlength=3 min=0 max=360 value=0> <label>S</label> <input nameref=S type=number maxlength=3 min=0 max=100 value=0> <label>L</label> <input nameref=L type=number maxlength=3 min=0 max=100 value=0> </div> <div class="a-color-picker-row a-color-picker-rgb" show-on-rgb> <label>R</label> <input nameref=R type=number maxlength=3 min=0 max=255 value=0> <label>G</label> <input nameref=G type=number maxlength=3 min=0 max=255 value=0> <label>B</label> <input nameref=B type=number maxlength=3 min=0 max=255 value=0> </div> <div class="a-color-picker-row a-color-picker-rgbhex a-color-picker-single-input" show-on-single-input> <label>HEX</label> <input nameref=RGBHEX type=text select-on-focus> </div> <div class="a-color-picker-row a-color-picker-palette"></div>'},function(t,i,n){var r=n(6);t.exports="string"==typeof r?r:r.toString()},function(t,i,n){(t.exports=n(7)(!1)).push([t.i,"/*!\n * a-color-picker\n * https://github.com/narsenico/a-color-picker\n *\n * Copyright (c) 2017-2018, Gianfranco Caldi.\n * Released under the MIT License.\n */.a-color-picker{background-color:#fff;padding:0;display:inline-flex;flex-direction:column;user-select:none;width:232px;font:400 10px Helvetica,Arial,sans-serif;border-radius:3px;box-shadow:0 0 0 1px rgba(0,0,0,.05),0 2px 4px rgba(0,0,0,.25)}.a-color-picker,.a-color-picker-row,.a-color-picker input{box-sizing:border-box}.a-color-picker-row{padding:15px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;user-select:none}.a-color-picker-row-top{padding:0}.a-color-picker-row:not(:first-child){border-top:1px solid #f5f5f5}.a-color-picker-column{display:flex;flex-direction:column}.a-color-picker-cell{flex:1 1 auto;margin-bottom:4px}.a-color-picker-cell:last-child{margin-bottom:0}.a-color-picker-stack{position:relative}.a-color-picker-dot{position:absolute;width:14px;height:14px;top:0;left:0;background:#fff;pointer-events:none;border-radius:50px;z-index:1000;box-shadow:0 1px 2px rgba(0,0,0,.75)}.a-color-picker-a,.a-color-picker-h,.a-color-picker-sl{cursor:cell}.a-color-picker-a+.a-color-picker-dot,.a-color-picker-h+.a-color-picker-dot{top:-2px}.a-color-picker-a,.a-color-picker-h{border-radius:2px}.a-color-picker-preview{box-sizing:border-box;width:30px;height:30px;user-select:none;border-radius:15px}.a-color-picker-circle{border-radius:50px;border:1px solid #eee}.a-color-picker-hsl,.a-color-picker-rgb,.a-color-picker-single-input{justify-content:space-evenly}.a-color-picker-hsl>label,.a-color-picker-rgb>label,.a-color-picker-single-input>label{padding:0 8px;flex:0 0 auto;color:#969696}.a-color-picker-hsl>input,.a-color-picker-rgb>input,.a-color-picker-single-input>input{text-align:center;padding:2px 0;width:0;flex:1 1 auto;border:1px solid #e0e0e0;line-height:20px}.a-color-picker-hsl>input::-webkit-inner-spin-button,.a-color-picker-rgb>input::-webkit-inner-spin-button,.a-color-picker-single-input>input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.a-color-picker-hsl>input:focus,.a-color-picker-rgb>input:focus,.a-color-picker-single-input>input:focus{border-color:#04a9f4;outline:none}.a-color-picker-transparent{background-image:linear-gradient(-45deg,#cdcdcd 25%,transparent 0),linear-gradient(45deg,#cdcdcd 25%,transparent 0),linear-gradient(-45deg,transparent 75%,#cdcdcd 0),linear-gradient(45deg,transparent 75%,#cdcdcd 0);background-size:11px 11px;background-position:0 0,0 -5.5px,-5.5px 5.5px,5.5px 0}.a-color-picker-sl{border-radius:3px 3px 0 0}.a-color-picker.hide-alpha [show-on-alpha],.a-color-picker.hide-hsl [show-on-hsl],.a-color-picker.hide-rgb [show-on-rgb],.a-color-picker.hide-single-input [show-on-single-input]{display:none}.a-color-picker-clipbaord{width:100%;height:100%;opacity:0;cursor:pointer}.a-color-picker-palette{flex-flow:wrap;flex-direction:row;justify-content:flex-start;padding:10px}.a-color-picker-palette-color{width:15px;height:15px;flex:0 1 15px;margin:3px;box-sizing:border-box;cursor:pointer;border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1)}.a-color-picker-palette-add{text-align:center;line-height:13px;color:#607d8b}.a-color-picker.hidden{display:none}",""])},function(t,i){t.exports=function(t){var i=[];return i.toString=function(){return this.map(function(i){var n=function(t,i){var n=t[1]||"",r=t[3];if(!r)return n;if(i&&"function"==typeof btoa){var s="/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */";return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([s]).join("\n")}return[n].join("\n")}(i,t);return i[2]?"@media "+i[2]+"{"+n+"}":n}).join("")},i.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(r[o]=!0)}for(s=0;s<t.length;s++){var a=t[s];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),i.push(a))}},i}}],i={};function n(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=i,n.d=function(t,i,r){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i||4&i&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)n.d(r,s,(function(i){return t[i]}).bind(null,s));return r},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=1)}();const cV="event-manager.js";class cz extends AX{static async initAsync(t={}){return A0.logDebug(cV,"initAsync","Initialization started"),new Promise(t=>{t({filename:cV,result:!0})})}static setMap(t){}static getName(){return cV}static on(t,i,n){}static off(t,i){}static dispatchEvent(t,i,n={}){let r=new Event(i,n);return t.forEach(t=>{t.dispatchEvent(r)}),r}static dispatchCustomEvent(t,i,n={}){let r=new CustomEvent(i,n);return t.forEach(t=>{t.dispatchEvent(r)}),r}}const cK="color-picker-manager.js";class cj extends AX{static #x;static #E;static async initAsync(t={}){return A0.logDebug(cK,"initAsync","Initialization started"),this.#x=this.#B(),this.#E=cG.createPicker(this.#x),new Promise(t=>{t({filename:cK,result:!0})})}static setMap(t){}static getName(){return cK}static #B(){let t=A3.getConfig().aColorPicker.palette;return A0.logDebug(cK,"initAsync",{count:t.length,palette:t}),A6.createElement({element:"div",id:"otlb-color-picker",class:"oltb-mt-05 oltb-mb-0313",attributes:{"acp-color":"#D7E3FA","acp-show-alpha":"yes","acp-show-rgb":"no","acp-show-hsl":"no","acp-show-hex":"yes","acp-palette":t.join("|")}})}static #S(){let t="oltb-d-none",i=this.#x.querySelectorAll(".a-color-picker-row");if(A3.getConfig().aColorPicker.showPaletteAsDefault&&i.length>=2)for(let n=0;n<=2;++n)i[n].classList.add(t);let n=A6.createElement({element:"div",class:"oltb-acp__header",listeners:{click:()=>{for(let n=0;n<=2;++n)i[n].classList.toggle(t)}}}),r=A6.createElement({element:"label",class:"oltb-acp__title",text:"Color Picker"}),s=A6.createElement({element:"label",class:"oltb-acp__icon oltb-tippy",title:"Toggle Section"});A6.appendChildren(n,[r,s]);let o=A6.createElement({element:"div",class:"oltb-acp"});return A6.appendChildren(o,[n,this.#x]),o}static #I(){return window.innerWidth<=A3.getConfig().deviceWidth.sm||cH()}static getColorPicker(){return this.#E}static getColorPickerElement(){return this.#x}static show(t){let i=this.#S();t.setContent(i),t.setProps({placement:this.#I()?"bottom":"left"}),t.popper.classList.add("tippy-color-picker"),this.#x.querySelectorAll(".a-color-picker-palette-color").forEach(t=>{t.classList.add("oltb-tippy")});let n=t.reference.getAttribute("data-oltb-color-target"),r=window.document.querySelector(n);return this.#E.setColor(t.reference.getAttribute("data-oltb-color")),this.#E.on(A8.browser.change,(i,n)=>{n=cG.parseColor(n,"hexcss4"),r.setAttribute("data-oltb-color",n),r.firstElementChild.style.backgroundColor=n,cz.dispatchEvent([t.reference],A8.custom.colorChange)}),i}}const cW="tippy-manager.js";class c$ extends AX{static #L;static #F;static #M;static #T;static async initAsync(t={}){return A0.logDebug(cW,"initAsync","Initialization started"),this.#L=[],this.#F=this.#R(),this.#M=this.#O(),this.#T=this.#D(),window.addEventListener(A8.browser.resize,this.#P.bind(this)),window.addEventListener(A8.custom.toolbarDirectionChange,this.#P.bind(this)),window.addEventListener(A8.custom.ready,this.#k.bind(this)),window.addEventListener(A8.custom.browserStateCleared,this.#b.bind(this)),new Promise(t=>{t({filename:cW,result:!0})})}static setMap(t){}static getName(){return cW}static #N(){return window.innerWidth<=A3.getConfig().deviceWidth.sm}static #U(){return this.#N()||cH()}static #Q(){this.#L.forEach(t=>{t.destroy()}),this.#L=cP(".oltb-tool-button"),this.#F.setInstances(this.#L),this.#P()}static #k(t){this.#Q()}static #P(){this.#F.setProps({placement:this.#U()?"bottom":"right"})}static #b(){this.#F.setProps({placement:this.#N()?"bottom":"right"})}static #R(){return cN([],{placement:"right",appendTo:hr.getMapElement(),offset:[0,12],theme:"oltb",touch:!1})}static #O(){let t=hr.getMapElement();return cQ(t,{target:".oltb-tippy",placement:"top",appendTo:t,theme:"oltb oltb-themed",offset:A3.getConfig().tippy.offset,touch:!1,onShow(t){let i=t.reference,n=i.getAttribute("title")||i.getAttribute("data-tippy-value")||"";i.setAttribute("data-tippy-value",n),i.removeAttribute("title"),t.setContent(n)},onHidden(t){let i=t.reference,n=i.getAttribute("data-tippy-value")||i.getAttribute("title")||"";i.setAttribute("title",n),i.removeAttribute("data-tippy-value"),t.setContent("")}})}static #D(){let t=hr.getMapElement();return cQ(t,{target:".oltb-color-tippy",placement:"left",offset:[8,8],trigger:"click",appendTo:t,theme:"oltb oltb-inverted-themed",interactive:!0,allowHTML:!0,onShow(t){cj.show(t)},onHide(t){cj.getColorPicker().off(A8.browser.change)},onHidden(t){t.setContent(null)}})}static applyLanguage(){this.#Q()}static getToolButtonTippy(){return this.#F}static getDynamicTippy(){return this.#M}static getColorTippy(){return this.#T}}const cY=Object.freeze({meta:{text:"English",value:"en-us",info:"This is the default translation instance and not the loaded en-us.json file"},commons:{titles:{edit:"Edit",delete:"Delete",dragToSort:"Drag To Sort",download:"Download",copyText:"Copy Text",copyCoordinates:"Copy Coordinates",showLayer:"Show Layer",rename:"Rename",toggleSection:"Toggle Section",toggleVisibility:"Toggle Visibility",zoomToCoordinates:"Zoom To Coordinates"},types:{convertable:{drawing:"Drawing",measurement:"Measurement"}}},managers:{settingsManager:{settings:{mouseWheelZoom:"Zoom Map Using Mousewheel Only",altShiftDragRotate:"Rotate Map Using Shift + Alt + Drag",dragPan:"Drag Map Using Mouse Only",keyboardZoom:"Zoom Map Using Keyboard",keyboardPan:"Pan Map Using Keyboard",selectVectorMapShapes:"Select Shapes In Vector Map Layers",snapInteraction:"Use Snap Interaction",snapHelpLines:"Use Snap Help Lines",alwaysNewLayers:"Create New Layer When Selecting Tool"}},errorManager:{toasts:{errors:{uncaughtException:{title:"Error",message:"An unexpected error occurred"}}}},infoWindowManager:{toasts:{infos:{copyMarkerCoordinates:{title:"Copied",message:"Marker coordinates copied to clipboard"},copyMarkerInfo:{title:"Copied",message:"Marker info copied to clipboard"}},errors:{copyMarkerInfo:{title:"Error",message:"Failed to copy Marker info"},copyMarkerCoordinates:{title:"Error",message:"Failed to copy Marker coordinates"}}},dialogs:{confirms:{deleteMarker:{title:"Delete Marker",message:"Do you want to delete this Marker?",confirmText:"Delete",cancelText:"Cancel"}}}}},modalExtensions:{coordinateModal:{title:"Coordinates",form:{latitude:"Latitude",longitude:"Longitude",navigateTo:"Navigate To",cancel:"Cancel",description:"Coordinates are given in WGS84/EPSG:4326"}},debugInfoModal:{title:"Debug Information",noMapFound:"No Map reference found",form:{doAction:"Do Action",defaultItem:{title:"Select Action"},miscGroup:{title:"Misc",items:{logToBrowser:"Log Map To Browser Console",generateUUID:"Generate UUID",clearStyleManager:"Clear Style Manager"}},eventLogGroup:{title:"Event Log",items:{copyEventLog:"Copy Event Log",clearEventLog:"Clear Event Log"}}},sections:{appData:"App Data",mapData:"Map Data",browserData:"Browser Data",localStorage:"Local Storage",sessionStorage:"Session Storage",cookies:"Cookies",eventLog:"Eventlog"},toasts:{infos:{logMapObject:{title:"Logged",message:"Map object logged to console"},copyEventLog:{title:"Copied",message:"Event log copied to clipboard"},clearEventLog:{title:"Cleared",message:"Event log was cleared of all entries"},clearStyleManager:{title:"Cleared",message:"Style Manager was cleared of all entries"}},errors:{copyEventLog:{title:"Error",message:"Failed to copy Event log to clipboard"}}}},downloadLayerModal:{title:"Download Layer",form:{layerFormat:"Layer format",download:"Download Layer",cancel:"Cancel"}},geometryDataModal:{title:"Geometry Data",data:{id:"Id",measurement:"Measurement",oltbProperties:"OLTB Properties",vertices:"Vertices",coordinates:"Coordinates"}},iconMarkerModal:{title:"Marker Configuration",form:{title:"Title",description:"Description",latitude:"Latitude",longitude:"Longitude",markerFill:"Marker Fill",markerStroke:"Marker Stroke",icon:"Icon",iconFill:"Icon Fill",iconStroke:"Icon Stroke",label:"Label",labelFill:"Label Fill",labelStroke:"Label Stroke",labelStrokeWidth:"Label Stroke Width",saveChanges:"Save Changes",createMarker:"Create Marker",cancel:"Cancel"}},importLayerModal:{title:"Import Layer",form:{featureProjection:"Feature Projection",dataProjection:"Data Projection",import:"Import Layer",cancel:"Cancel"}},layerModal:{title:"Create Map Layer",form:{name:"Name",layer:"Layer",source:"Source",projection:"Projection",url:"URL",parameters:"Parameters (JSON)",wrapX:"WrapX",cors:"CORS",attributions:"Attributions",createLayer:"Create Layer",cancel:"Cancel"}},settingsModal:{title:"Settings",form:{save:"Save Settings",cancel:"Cancel"}}},tools:{hiddenAboutTool:{contextItems:{about:"About OLTB"},modals:{about:{title:"About OLTB",version:"Version",developedBy:"Developed by Qulle",usingOpenLayers:"Using OpenLayers"}}},hiddenMapNavigationTool:{contextItems:{copyCoordinates:"Copy Coordinates",navigateToCoordinates:"Navigate To",centerMap:"Center Here",focusMap:"Focus Here"},toasts:{infos:{coordinatesCopied:{title:"Copied",message:"Coordinates copied to clipboard"}},errors:{coordinatesCopy:{title:"Error",message:"Failed to copy coordinates"},parseUrlMarker:{title:"Error",message:"Failed to parse URL Marker"},missingProjection:{title:"Error",message:"Missing projection definition"}}}},hiddenMarkerTool:{contextItems:{createMarker:"Create Marker"}},bookmarkTool:{title:"Bookmarks",toolbox:{titles:{bookmarks:"Bookmarks"},groups:{addBookmark:{placeholder:"Name",add:"Add Bookmark"}}},contextItems:{addBookmark:"Add Bookmark",clearBookmarks:"Clear Bookmarks"},layers:{bookmarks:"Bookmarks"},toasts:{infos:{clearBookmarks:{title:"Cleared",message:"All stored bookmarks was cleared"},createBookmark:{title:"New Bookmark",message:"A new Bookmark created"},copyCoordinates:{title:"Copied",message:"Coordinates copied to clipboard"}},errors:{copyCoordinates:{title:"Error",message:"Failed to copy coordinates"}}},dialogs:{confirms:{clearBookmarks:{title:"Clear Bookmarks",message:"Do you want to clear all Bookmarks?",confirmText:"Clear",cancelText:"Cancel"},deleteBookmark:{title:"Delete Bookmark",message:"Do you want to delete bookmark",confirmText:"Delete",cancelText:"Cancel"}},prompts:{editBookmark:{title:"Edit Name",message:"You are editing bookmark",confirmText:"Rename",cancelText:"Cancel"}}}},coordinatesTool:{title:"Show Coordinates",toolbox:{titles:{coordinates:"Coordinates"},groups:{formats:{title:"Format",dd:"Decimal Degrees",dms:"Degrees, Minutes, Seconds"},coordinates:{title:"Coordinates"}}},settings:{copyOnClick:"Copy Coordinates On Click",updateToolboxOnHover:"Update Toolbox Coordinates When Hover"},toasts:{infos:{copyCoordinates:{title:"Copied",message:"Coordinates copied to clipboard"}},errors:{copyCoordinates:{title:"Error",message:"Failed to copy coordinates"}}}},debugInfoTool:{title:"Debug Info"},directionTool:{title:"Toggle Direction"},drawTool:{title:"Draw",toolbox:{titles:{draw:"Draw"},groups:{shapes:{title:"Shape",circle:"Circle",square:"Square",rectangle:"Rectangle",lineString:"Line",point:"Point",polygon:"Polygon"},intersectable:{title:"Intersection",true:"Yes",false:"No"},strokeWidth:{title:"Stroke Width"},strokeColor:{title:"Stroke Color"},fillColor:{title:"Fill Color"}}},layers:{defaultName:"Drawing layer"},toasts:{infos:{drawInHiddenLayer:{title:"Tip",message:"You are drawing in a hidden layer"},missingIntersections:{title:"Oops",message:"No intersecting object found"}}}},editTool:{title:"Edit",toolbox:{titles:{edit:"Edit"},groups:{misc:{title:"Misc",delete:"Delete",rotate:"Rotate",geometryData:"Geometry Data",convertFeature:"Convert"},copying:{title:"Clipboard",cut:"Cut",copy:"Copy",paste:"Paste"},shapes:{title:"Shapes",union:"Union",intersect:"Intersect",exclude:"Exclude",difference:"Difference"},strokeColor:{title:"Stroke Color"},fillColor:{title:"Fill Color"}}},settings:{mouseOnlyToEditVectorShapes:"Mouse Only To Edit Vector Shapes"},toasts:{infos:{copiedFeatures:{title:"Copied",message:"objects has been copied"},pastedFeatures:{title:"Pasted",message:"objects has been pasted"},cutFeatures:{title:"Cut",message:"objects has been cut"},missingFeatures:{title:"Oops",message:"No objects are selected"},strictOneFeature:{title:"Oops",message:"Strict one object can be selected"},strictTwoFeatures:{title:"Oops",message:"Strict two overlapping objects must be selected"}},errors:{operationFailed:{title:"Error",message:"Failed to perform shape operation"},invalidValue:{title:"Error",message:"Only digits are allowed as input"}}},dialogs:{confirms:{deleteFeatures:{title:"Delete",message:"Delete selected objects",confirmText:"Delete",cancelText:"Cancel"}},prompts:{rotateFeatures:{title:"Rotate",message:"Rotate objects by N-degrees",confirmText:"Rotate",cancelText:"Cancel"},convertFeatures:{title:"Convert",message:"Convert selected objects to",confirmText:"Convert",cancelText:"Cancel"}}}},exportPngTool:{title:"Export PNG",toasts:{errors:{renderCanvas:{title:"Error",message:"Failed to export Canvas"}}}},fullscreenTool:{title:"Toggle Fullscreen",toasts:{errors:{missingFullScreenSupport:{title:"Error",message:"Fullscreen is not supported by this browser"}}}},graticuleTool:{title:"Show Graticule"},helpTool:{title:"Help",dialogs:{confirms:{openHelp:{title:"Help Pages",message:"Browsers block automatic opening new windows, here is a button for you to press",confirmText:"Open Help",cancelText:"Cancel"}}},toasts:{errors:{blockedByBrowser:{title:"Error",message:"Action was restricted by browser settings"}}}},homeTool:{title:"Zoom Home",contextItems:{setHome:"Set Home"},toasts:{infos:{setHomeLocation:{title:"New Home",message:"New location was set as Home"}}}},importVectorLayerTool:{title:"Import Vector Layer",toasts:{errors:{unsupportedFormat:{title:"Error",message:"The layer format is not supported"},importFailed:{title:"Error",message:"Failed to import vector layer"}}}},infoTool:{title:"Info"},layerTool:{title:"Layers",toolbox:{titles:{mapLayers:"Map Layers",featureLayers:"Feature Layers"},groups:{createMapLayer:{placeholder:"Name",create:"Create Map Layer"},createFeatureLayer:{placeholder:"Name",create:"Create Feature Layer"}}},contextItems:{addMapLayer:"Add Map Layer",addFeatureLayer:"Add Feature Layer"},toasts:{infos:{addFeatureLayer:{title:"New Layer",message:"A new Feature layer created"}},errors:{addFeatureLayer:{title:"Error",message:"Failed to create new layer"},missingProjection:{title:"Error",message:"Missing projection definition"},unsupportedFormat:{title:"Error",message:"The layer format is not supported"}}},dialogs:{prompts:{renameLayer:{title:"Edit Name",message:"Edit name for layer",confirmText:"Rename",cancelText:"Cancel"}},confirms:{deleteLayer:{title:"Delete Layer",message:"Do you want to delete layer",confirmText:"Delete",cancelText:"Cancel"}}}},magnifyTool:{title:"Magnify",toasts:{errors:{renderCanvas:{title:"Error",message:"Unexpected error using magnifier"}}}},measureTool:{title:"Measure",toolbox:{titles:{measure:"Measure"},groups:{type:{title:"Type",lineString:"Length",polygon:"Area"},strokeColor:{title:"Stroke Color"},fillColor:{title:"Fill Color"}}},layers:{defaultName:"Measurements layer"},toasts:{infos:{drawInHiddenLayer:{title:"Tip",message:"You are measuring in a hidden layer"}}}},myLocationTool:{title:"My Location",dialogs:{confirms:{exitFullscreen:{title:"Exit Fullscreen",message:"To use geolocation you must exit fullscreen",confirmText:"Exit Fullscreen",cancelText:"Cancel"}}},toasts:{infos:{fetchLocation:{title:"Searching",message:"Trying to find your location..."}},errors:{exitFullscreen:{title:"Error",message:"Failed to exit fullscreen"},locationNotFound:{title:"Error",message:"Failed to find location"}}}},overviewTool:{title:"Map Overview",toolbox:{titles:{overview:"Map Overview"}}},refreshTool:{title:"Refresh Page"},resetNorthTool:{title:"Reset North",contextItems:{rotate:"Rotate Map"},dialogs:{prompts:{rotateMap:{title:"Rotate Map",message:"Set Map rotation by degrees",confirmText:"Rotate Map",cancelText:"Cancel"}}},toasts:{errors:{invalidValue:{title:"Error",message:"Only digits are allowed as input"}}}},scaleLineTool:{title:"Scale Line"},scissorsTool:{title:"Polygon Scissors",toasts:{infos:{missingIntersections:{title:"Oops",message:"No intersecting object found"}}}},settingsTool:{title:"Settings",contextItems:{clearBrowserState:"Clear Browser State"},toasts:{infos:{clearBrowserState:{title:"Cleared",message:"All stored items was reset to default"}},successes:{savedSettings:{title:"Saved",message:"All settings saved in browser storage"}}},dialogs:{confirms:{clearBrowserState:{title:"Clear Browser State",message:"Do you want to reset all items to default state for the Toolbar?",confirmText:"Clear",cancelText:"Cancel"}}}},splitViewTool:{title:"Split View",toolbox:{titles:{splitView:"Split View"},groups:{leftSide:{title:"Left Side"},rightSide:{title:"Right Side"},swapSides:{swap:"Swap Sides"}},toasts:{infos:{strictOneLayer:{title:"Tip",message:"You must have more than one layer"}},errors:{layerFailedToLoad:{title:"Error",message:"Layer(s) could not be loaded"}}}}},themeTool:{title:"Toggle Theme"},toolboxTool:{title:"Toggle Toolbox"},translationTool:{title:"Translate",dialogs:{selects:{changeLanguage:{title:"Language",message:"Current language is",confirmText:"Switch Language",cancelText:"Cancel"}}}},zoomboxTool:{title:"Zoombox",tooltips:{dragToZoom:"Drag To Zoom"}},zoomInTool:{title:"Zoom In"},zoomOutTool:{title:"Zoom Out"}}}),cq="translation-manager.js",cX=Object.freeze({url:"./assets/i18n"}),cZ=Object.freeze({text:"English",value:"en-us",translation:cY}),cJ=he.translationManager,c0=Object.freeze({activeLanguageValue:cZ.value});class c1 extends AX{static #H;static #G;static #V;static #s;static async initAsync(t={}){this.#s=E(an).merge(E(an).cloneDeep(cX),t),A0.logDebug(cq,"initAsync","Initialization started"),this.#V=ht.getAndMergeStateObject(cJ,c0),this.#G=[];let i=this.#z();return this.#K(i)}static setMap(t){}static getName(){return cq}static async #j(t){let i=Date.now().toString(),n=t.map(async t=>AR.get(`${this.#s.url}/${t}.json`,{responseType:"application/json",params:{cache:i},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(t=>JSON.parse(t.data)));return await Promise.allSettled(n)}static async #K(t){return this.#j(t).then(t=>{t.forEach(t=>{if("rejected"===t.status)return void A0.logWarning(cq,"loadLanguagesAsync",{info:"Failed to load language(s)",reason:t.reason,status:t.status});let i=t.value.meta.text,n=t.value.meta.value;if(!i||!n)return void A0.logWarning(cq,"loadLanguagesAsync",{info:"Failed to find translation information in the meta section"});let r={text:i,value:n,translation:t.value};this.#G.push(r)}),this.#G.length<=0&&(A0.logWarning(cq,"loadLanguagesAsync",{info:"No languages loaded, fallback to default language instance",value:cZ.value}),this.#G.push(E(an).cloneDeep(cZ)));let i=this.#V.activeLanguageValue,n=this.#G.find(t=>t.value===i),r=A3.getConfig().localization.active,s=this.#G.find(t=>t.value===r);return this.#H=n??s??E(an).cloneDeep(cZ),Promise.resolve({filename:cq,result:!0})})}static #z(){let t=[];return A3.getConfig().localization.languages.forEach(i=>{if(t.find(t=>t===i))return void A0.logWarning(cq,"getLanguageValues",{info:"Language already added to be loaded",value:i});t.push(i)}),t}static #W(){let t="data-oltb-i18n";window.document.querySelectorAll(`[${t}]`).forEach(i=>{let n=i.getAttribute(t),r=this.get(n),s="data-tippy-content";if(i.hasAttribute(s)){let t=i.getAttribute("data-tippy-content-pre")||"",n=i.getAttribute("data-tippy-content-post")||"",o=`${t} ${r} ${n}`.trim();i.setAttribute(s,o);return}if(i.classList.contains("oltb-tippy"))return void i.setAttribute("title",r);let o="placeholder";if(i.hasAttribute(o))return void i.setAttribute(o,r);i.innerHTML=r}),c$.applyLanguage()}static getDefaultLanguage(){return E(an).cloneDeep(cZ)}static getLanguages(){return this.#G}static getActiveLanguage(){return this.#H||E(an).cloneDeep(cZ)}static setActiveLanguage(t){if(this.#H||(this.#H=this.getDefaultLanguage()),this.#H.value===t.value)return void A0.logWarning(cq,"setActiveLanguage",{info:"Aborting language change, selected language is already active",to:t.value,active:this.#H.value});let i=this.#G.find(i=>i.value===t.value);if(!i||!E(an).has(i,["translation"]))return void A0.logWarning(cq,"setActiveLanguage",{info:"Selected language not found",language:t});this.#H=i,this.#V.activeLanguageValue=i.value,this.#W(),ht.setStateObject(cJ,this.#V)}static get(t){let i=t.split("."),n=this.getActiveLanguage(),r=E(an).get(n.translation,i,t);return r===t&&A0.logWarning(cq,"get",{info:"No translation found",keys:i,path:t}),r}}const c2="oltb-toast",c5="oltb-animation",c4=`${c5}--slide-in`,c3=`${c5}--slide-out`,c6=`${c5}--linear-spinner`,c8=Object.freeze({title:"Toast",prefix:"",postfix:"",message:"",i18nKey:void 0,type:"info",autoremove:!1,clickToRemove:!0,spinner:!1});class c7{constructor(t={}){this.options=E(an).merge(E(an).cloneDeep(c8),t),this.#$()}#$(){if(this.toast=A6.createElement({element:"div",class:`${c2} ${c2}--${this.options.type} ${c5} ${c4} oltb-d-flex`}),this.options.clickToRemove&&(this.toast.classList.add(`${c2}--clickable`),this.toast.addEventListener(A8.browser.click,this.remove.bind(this))),this.options.spinner){let t=A6.createElement({element:"div",class:`oltb-spinner oltb-spinner--small ${c5} ${c6}`});A6.appendChildren(this.toast,[t])}let t=A6.createElement({element:"div",class:`${c2}__container ${this.options.spinner?"oltb-ml-0625":""}`});if(this.options.i18nKey){let t=c1.get(this.options.i18nKey);this.options.title=t.title,this.options.message=t.message}let i=A6.createElement({element:"h4",text:this.options.title,class:`${c2}__title`,...this.options.i18nKey&&{attributes:{"data-oltb-i18n":`${this.options.i18nKey}.title`}}}),n=`${this.options.prefix} ${this.options.message} ${this.options.postfix}`,r=A6.createElement({element:"p",html:n,class:`${c2}__message`,...this.options.i18nKey&&{attributes:{"data-oltb-i18n":`${this.options.i18nKey}.message`}}});if(A6.appendChildren(t,[i,r]),A6.appendChildren(this.toast,[t]),hr.getToastElement().prepend(this.toast),this.options.autoremove){let t=A3.getConfig().autoRemovalDuation.normal;window.setTimeout(()=>{A6.removeElement(this)},t)}}remove(){this.toast.classList.add(`${c2}--remove`,c3);let t=A3.getConfig().animationDuration.fast;window.setTimeout(()=>{A6.removeElement(this.toast),this.options.onRemove&&this.options.onRemove()},t)}getType(){return this.options.type}getTitle(){return this.options.title}getMessage(){return this.options.message}isSpinner(){return this.options.spinner}isClickableToRemove(){return this.options.clickToRemove}isAutoremove(){return this.options.autoremove}getElement(){return this.toast}getI18NKey(){return this.options.i18nKey}static get Info(){return"info"}static get Warning(){return"warning"}static get Error(){return"error"}static get Success(){return"success"}}class c9{static info(t){return new c7({...t,type:c7.Info})}static warning(t){return new c7({...t,type:c7.Warning})}static success(t){return new c7({...t,type:c7.Success})}static error(t){return new c7({...t,type:c7.Error})}}var ut={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};const ue=new Uint8Array(16),ui=[];for(let t=0;t<256;++t)ui.push((t+256).toString(16).slice(1));var un=function(t,i,n){if(ut.randomUUID&&!i&&!t)return ut.randomUUID();let r=(t=t||{}).random??t.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(ue)}();if(r.length<16)throw Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i){if((n=n||0)<0||n+16>i.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let t=0;t<16;++t)i[n+t]=r[t];return i}return function(t,i=0){return(ui[t[i+0]]+ui[t[i+1]]+ui[t[i+2]]+ui[t[i+3]]+"-"+ui[t[i+4]]+ui[t[i+5]]+"-"+ui[t[i+6]]+ui[t[i+7]]+"-"+ui[t[i+8]]+ui[t[i+9]]+"-"+ui[t[i+10]]+ui[t[i+11]]+ui[t[i+12]]+ui[t[i+13]]+ui[t[i+14]]+ui[t[i+15]]).toLowerCase()}(r)},an=I("f1q41");const ur=Symbol("null");let us=0;class uo extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;let[t]=arguments;if(null==t)return;if("function"!=typeof t[Symbol.iterator])throw TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(let[i,n]of t)this.set(i,n)}_getPublicKeys(t,i=!1){let n;if(!Array.isArray(t))throw TypeError("The keys parameter must be an array");let r=this._getPrivateKey(t,i);return r&&this._publicKeys.has(r)?n=this._publicKeys.get(r):i&&(n=[...t],this._publicKeys.set(r,n)),{privateKey:r,publicKey:n}}_getPrivateKey(t,i=!1){let n=[];for(let r of t){null===r&&(r=ur);let t="object"==typeof r||"function"==typeof r?"_objectHashes":"symbol"==typeof r&&"_symbolHashes";if(t)if(this[t].has(r))n.push(this[t].get(r));else{if(!i)return!1;let s=`@@mkm-ref-${us++}@@`;this[t].set(r,s),n.push(s)}else n.push(r)}return JSON.stringify(n)}set(t,i){let{publicKey:n}=this._getPublicKeys(t,!0);return super.set(n,i)}get(t){let{publicKey:i}=this._getPublicKeys(t);return super.get(i)}has(t){let{publicKey:i}=this._getPublicKeys(t);return super.has(i)}delete(t){let{publicKey:i,privateKey:n}=this._getPublicKeys(t);return!!(i&&super.delete(i)&&this._publicKeys.delete(n))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}class ua extends iN{constructor(t,i){super(),i&&!Array.isArray(t[0])?this.setFlatCoordinates(i,t):this.setCoordinates(t,i)}appendPoint(t){k(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){let t=new ua(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){if(r<tK(this.getExtent(),t,i))return r;let s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){let l=tF(t,i,s[a],s[a+1]);if(l<r){r=l;for(let t=0;t<o;++t)n[t]=s[a+t];n.length=o}}return r}getCoordinates(){return iq(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){let i=this.flatCoordinates.length/this.stride;return t<0||i<=t?null:new i4(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){let t=this.flatCoordinates,i=this.layout,n=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=n){let o=new i4(t.slice(s,s+n),i);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(t){let i=this.flatCoordinates,n=this.stride;for(let r=0,s=i.length;r<s;r+=n)if(t$(t,i[r],i[r+1]))return!0;return!1}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iW(this.flatCoordinates,0,t,this.stride),this.changed()}}var an=I("f1q41");const ul=Object.freeze({knot0:'<path fill="rgba(59, 67, 82, 1)" d="M125,120c2.762,0,5,2.239,5,5c0,2.762-2.238,5-5,5c-2.761,0-5-2.238-5-5C120,122.239,122.239,120,125,120z"/><path fill="none" stroke="rgba(59, 67, 82, 1)" stroke-width="2" d="M125,115c5.523,0,10,4.477,10,10c0,5.523-4.477,10-10,10 c-5.523,0-10-4.477-10-10C115,119.477,119.477,115,125,115z "/>',knot2:'<path d="M125,112V76 M125,125l7-12.1h-14L125,125z"/>',knot5:'<path d="M125,112V76 M125,89l7-7 M125,125l7-12.1h-14L125,125z"/>',knot10:'<path d="M125,112V89 M125,89l14-14 M125,125l7-12.1h-14L125,125z"/>',knot15:'<path d="M125,112V89 M125,89l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot20:'<path d="M125,112V89 M125,89l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot25:'<path d="M125,112V79 M125,79l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot30:'<path d="M125,112V79 M125,79l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot35:'<path d="M125,112V69 M125,69l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot40:'<path d="M125,112V69 M125,69l14-14 M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot45:'<path d="M125,112V59 M125,59l14-14 M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14 L125,125z"/>',knot50:'<path d="M125,112V76 M125,76h14l-14,14V76z M125,125l7-12.1h-14L125,125z"/>',knot55:'<path d="M125,112V76 M125,76h14l-14,14V76z M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot60:'<path d="M125,112V76 M125,76h14l-14,14V76z M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot65:'<path d="M125,112V66 M125,66h14l-14,14V66z M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot70:'<path d="M125,112V66 M125,66h14l-14,14V66z M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot75:'<path d="M125,112V56 M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot80:'<path d="M125,112V56 M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot85:'<path d="M125,112V46 M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1 h-14L125,125z"/>',knot90:'<path d="M125,112V46 M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1 h-14L125,125z"/>',knot95:'<path d="M125,112V36 M125,36h14l-14,14V36z M125,60l14-14 M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot100:'<path d="M125,112V62 M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,125l7-12.1h-14L125,125z"/>',knot105:'<path d="M125,112V62 M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot110:'<path d="M125,112V62 M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot115:'<path d="M125,112V52 M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14 L125,125z"/>',knot120:'<path d="M125,112V52 M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14 L125,125z"/>',knot125:'<path d="M125,112V42 M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125 l7-12.1h-14L125,125z"/>',knot130:'<path d="M125,112V42 M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125 l7-12.1h-14L125,125z"/>',knot135:'<path d="M125,112V32 M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100 l7-7 M125,125l7-12.1h-14L125,125z"/>',knot140:'<path d="M125,112V32 M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100 l14-14 M125,125l7-12.1h-14L125,125z"/>',knot145:'<path d="M125,112V22 M125,22h14l-14,14V22z M125,36h14l-14,14V36z M125,60l14-14 M125,70l14-14 M125,80l14-14 M125,90 l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot150:'<path d="M125,112V48 M125,48h14l-14,14V48z M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,125l7-12.1h-14L125,125z"/>',knot155:'<path d="M125,112V48 M125,48h14l-14,14V48z M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l7-7 M125,125l7-12.1 h-14L125,125z"/>',knot160:'<path d="M125,112V48 M125,48h14l-14,14V48z M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l14-14 M125,125 l7-12.1h-14L125,125z"/>',knot165:'<path d="M125,112V38 M125,38h14l-14,14V38z M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot170:'<path d="M125,112V38 M125,38h14l-14,14V38z M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot175:'<path d="M125,112V28 M125,28h14l-14,14V28z M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot180:'<path d="M125,112V28 M125,28h14l-14,14V28z M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot185:'<path d="M125,112V18 M125,18h14l-14,14V18z M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot190:'<path d="M125,112V18 M125,18h14l-14,14V18z M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>'}),uA="conversion-manager.js";class uh extends AX{static async initAsync(t={}){return A0.logDebug(uA,"initAsync","Initialization started"),new Promise(t=>{t({filename:uA,result:!0})})}static setMap(t){}static getName(){return uA}static roundToNearest(t,i){return Math.round(t/i)*i}static roundUpToNearest(t,i){return Math.ceil(t/i)*i}static roundDownToNearest(t,i){return Math.floor(t/i)*i}static degreesToRadians(t){return Math.PI/180*t}static radiansToDegrees(t){return 180/Math.PI*t}static metersPerSecondToKnots(t){return 1.94384*t}static knotsToMetersPerSecond(t){return .51444*t}}const uc=function(t){if(t>=1&&t<2.5)return ul.knot2;let i=uh.roundDownToNearest(t,2.5),n=uh.metersPerSecondToKnots(i),r=uh.roundToNearest(n,5),s=`knot${r}`;return E(an).has(ul,[s])?ul[s]:ul.knot0},uu=Object.freeze({windSpeed:0,width:250,height:250,fill:"#3B4352FF",stroke:"#3B4352FF",strokeWidth:3,shouldReplaceHashtag:!1}),ud=Object.freeze({type:Object.freeze({layer:"layer",iconMarker:"iconMarker",windBarb:"windBarb",measurement:"measurement",drawing:"drawing",snapLine:"snapLine"})});var an=I("f1q41");const ug=Object.freeze({airplane:Object.freeze({stroked:`
            <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849Zm.894.448C7.111 2.02 7 2.569 7 3v4a.5.5 0 0 1-.276.447l-5.448 2.724a.5.5 0 0 0-.276.447v.792l5.418-.903a.5.5 0 0 1 .575.41l.5 3a.5.5 0 0 1-.14.437L6.708 15h2.586l-.647-.646a.5.5 0 0 1-.14-.436l.5-3a.5.5 0 0 1 .576-.411L15 11.41v-.792a.5.5 0 0 0-.276-.447L9.276 7.447A.5.5 0 0 1 9 7V3c0-.432-.11-.979-.322-1.401C8.458 1.159 8.213 1 8 1c-.213 0-.458.158-.678.599Z"/>
        `,filled:`
            <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849Z"/>
        `}),arrowClockwise:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>      
        `}),arrowLeftRight:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5m14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5"/>
        `}),arrowRepeat:Object.freeze({stroked:`
            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>  
        `}),arrowsExpandHorizontal:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"/>
        `}),arrowsExpandVertical:Object.freeze({stroked:`
            <path d="M8 15a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5ZM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2ZM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8Z"/>
        `}),arrowsMove:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"/>
        `}),aspectRatio:Object.freeze({stroked:`
            <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5v-9zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"/>
            <path d="M2 4.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H3v2.5a.5.5 0 0 1-1 0v-3zm12 7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H13V8.5a.5.5 0 0 1 1 0v3z"/>      
        `,filled:`
            <path d="M0 12.5v-9A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5zM2.5 4a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 1 0V5h2.5a.5.5 0 0 0 0-1h-3zm11 8a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-1 0V11h-2.5a.5.5 0 0 0 0 1h3z"/>
        `}),bell:Object.freeze({stroked:`
            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
        `,filled:`
            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>
        `}),bookmarkStar:Object.freeze({stroked:`
            <path d="M7.84 4.1a.178.178 0 0 1 .32 0l.634 1.285a.178.178 0 0 0 .134.098l1.42.206c.145.021.204.2.098.303L9.42 6.993a.178.178 0 0 0-.051.158l.242 1.414a.178.178 0 0 1-.258.187l-1.27-.668a.178.178 0 0 0-.165 0l-1.27.668a.178.178 0 0 1-.257-.187l.242-1.414a.178.178 0 0 0-.05-.158l-1.03-1.001a.178.178 0 0 1 .098-.303l1.42-.206a.178.178 0 0 0 .134-.098L7.84 4.1z"/>
            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>
        `,filled:`
            <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zM8.16 4.1a.178.178 0 0 0-.32 0l-.634 1.285a.178.178 0 0 1-.134.098l-1.42.206a.178.178 0 0 0-.098.303L6.58 6.993c.042.041.061.1.051.158L6.39 8.565a.178.178 0 0 0 .258.187l1.27-.668a.178.178 0 0 1 .165 0l1.27.668a.178.178 0 0 0 .257-.187L9.368 7.15a.178.178 0 0 1 .05-.158l1.028-1.001a.178.178 0 0 0-.098-.303l-1.42-.206a.178.178 0 0 1-.134-.098L8.16 4.1z"/>
        `}),bookmarkX:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M6.146 5.146a.5.5 0 0 1 .708 0L8 6.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 7l1.147 1.146a.5.5 0 0 1-.708.708L8 7.707 6.854 8.854a.5.5 0 1 1-.708-.708L7.293 7 6.146 5.854a.5.5 0 0 1 0-.708z"/>
            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>      
        `,filled:`
            <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zM6.854 5.146a.5.5 0 1 0-.708.708L7.293 7 6.146 8.146a.5.5 0 1 0 .708.708L8 7.707l1.146 1.147a.5.5 0 1 0 .708-.708L8.707 7l1.147-1.146a.5.5 0 0 0-.708-.708L8 6.293 6.854 5.146z"/>
        `}),boundingBoxCircles:Object.freeze({stroked:`
            <path d="M2 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM0 2a2 2 0 0 1 3.937-.5h8.126A2 2 0 1 1 14.5 3.937v8.126a2 2 0 1 1-2.437 2.437H3.937A2 2 0 1 1 1.5 12.063V3.937A2 2 0 0 1 0 2zm2.5 1.937v8.126c.703.18 1.256.734 1.437 1.437h8.126a2.004 2.004 0 0 1 1.437-1.437V3.937A2.004 2.004 0 0 1 12.063 2.5H3.937A2.004 2.004 0 0 1 2.5 3.937zM14 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM2 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
        `}),braces:Object.freeze({stroked:`
            <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6zM13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6z"/>
        `}),bug:Object.freeze({stroked:`
            <path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/>
        `,filled:`
            <path d="M4.978.855a.5.5 0 1 0-.956.29l.41 1.352A4.985 4.985 0 0 0 3 6h10a4.985 4.985 0 0 0-1.432-3.503l.41-1.352a.5.5 0 1 0-.956-.29l-.291.956A4.978 4.978 0 0 0 8 1a4.979 4.979 0 0 0-2.731.811l-.29-.956z"/>
            <path d="M13 6v1H8.5v8.975A5 5 0 0 0 13 11h.5a.5.5 0 0 1 .5.5v.5a.5.5 0 1 0 1 0v-.5a1.5 1.5 0 0 0-1.5-1.5H13V9h1.5a.5.5 0 0 0 0-1H13V7h.5A1.5 1.5 0 0 0 15 5.5V5a.5.5 0 0 0-1 0v.5a.5.5 0 0 1-.5.5H13zm-5.5 9.975V7H3V6h-.5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 0-1 0v.5A1.5 1.5 0 0 0 2.5 7H3v1H1.5a.5.5 0 0 0 0 1H3v1h-.5A1.5 1.5 0 0 0 1 11.5v.5a.5.5 0 1 0 1 0v-.5a.5.5 0 0 1 .5-.5H3a5 5 0 0 0 4.5 4.975z"/>
        `}),chevronExpand:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"/>
        `}),clipboard:Object.freeze({stroked:`
            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>      
        `,filled:`
            <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>
        `}),close:Object.freeze({stroked:`
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
        `}),compass:Object.freeze({stroked:`
            <path d="M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016zm6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
            <path d="m6.94 7.44 4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"/>      
        `,filled:`
            <path d="M15.5 8.516a7.5 7.5 0 1 1-9.462-7.24A1 1 0 0 1 7 0h2a1 1 0 0 1 .962 1.276 7.503 7.503 0 0 1 5.538 7.24zm-3.61-3.905L6.94 7.439 4.11 12.39l4.95-2.828 2.828-4.95z"/>
        `}),copy:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
        `}),crosshair:Object.freeze({stroked:`
            <path d="M8.5.5a.5.5 0 0 0-1 0v.518A7.001 7.001 0 0 0 1.018 7.5H.5a.5.5 0 0 0 0 1h.518A7.001 7.001 0 0 0 7.5 14.982v.518a.5.5 0 0 0 1 0v-.518A7.001 7.001 0 0 0 14.982 8.5h.518a.5.5 0 0 0 0-1h-.518A7.001 7.001 0 0 0 8.5 1.018V.5Zm-6.48 7A6.001 6.001 0 0 1 7.5 2.02v.48a.5.5 0 0 0 1 0v-.48a6.001 6.001 0 0 1 5.48 5.48h-.48a.5.5 0 0 0 0 1h.48a6.002 6.002 0 0 1-5.48 5.48v-.48a.5.5 0 0 0-1 0v.48A6.001 6.001 0 0 1 2.02 8.5h.48a.5.5 0 0 0 0-1h-.48ZM8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>
        `}),cursor:{stroked:`
            <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103zM2.25 8.184l3.897 1.67a.5.5 0 0 1 .262.263l1.67 3.897L12.743 3.52 2.25 8.184z"/>
        `,filled:`
            <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>
        `},edit:Object.freeze({stroked:`
            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
        `,filled:`
            <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>
        `}),exclamationTriangle:Object.freeze({stroked:`
            <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
            <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>
        `,filled:`
            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
        `}),exclude:Object.freeze({mixed:`
            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm12 2H5a1 1 0 0 0-1 1v7h7a1 1 0 0 0 1-1V4z"/>
        `}),fullscreen:Object.freeze({stroked:`
            <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>
        `}),fullscreenExit:Object.freeze({stroked:`
            <path d="M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"/>
        `}),folderOpen:Object.freeze({stroked:`
            <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/>
        `}),gear:Object.freeze({stroked:`
            <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
            <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
        `,filled:`
            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
        `}),geoMarker:Object.freeze({stroked:`
            <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>
            <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
        `,filled:`
            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
        `}),geoPin:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>
        `,filled:`
            <path fill-rule="evenodd" d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>
        `}),gitHub:Object.freeze({mixed:`
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        `}),globe:Object.freeze({stroked:`
            <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855-.143.268-.276.56-.395.872.705.157 1.472.257 2.282.287V1.077zM4.249 3.539c.142-.384.304-.744.481-1.078a6.7 6.7 0 0 1 .597-.933A7.01 7.01 0 0 0 3.051 3.05c.362.184.763.349 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9.124 9.124 0 0 1-1.565-.667A6.964 6.964 0 0 0 1.018 7.5h2.49zm1.4-2.741a12.344 12.344 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332zM8.5 5.09V7.5h2.99a12.342 12.342 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.612 13.612 0 0 1 7.5 10.91V8.5H4.51zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741H8.5zm-3.282 3.696c.12.312.252.604.395.872.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a6.696 6.696 0 0 1-.598-.933 8.853 8.853 0 0 1-.481-1.079 8.38 8.38 0 0 0-1.198.49 7.01 7.01 0 0 0 2.276 1.522zm-1.383-2.964A13.36 13.36 0 0 1 3.508 8.5h-2.49a6.963 6.963 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667zm6.728 2.964a7.009 7.009 0 0 0 2.275-1.521 8.376 8.376 0 0 0-1.197-.49 8.853 8.853 0 0 1-.481 1.078 6.688 6.688 0 0 1-.597.933zM8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855.143-.268.276-.56.395-.872A12.63 12.63 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.963 6.963 0 0 0 14.982 8.5h-2.49a13.36 13.36 0 0 1-.437 3.008zM14.982 7.5a6.963 6.963 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008h2.49zM11.27 2.461c.177.334.339.694.482 1.078a8.368 8.368 0 0 0 1.196-.49 7.01 7.01 0 0 0-2.275-1.52c.218.283.418.597.597.932zm-.488 1.343a7.765 7.765 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"/>
        `}),house:Object.freeze({stroked:`
            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z"/>
        `,filled:`
            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"/>
            <path d="M8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"/>      
        `}),image:Object.freeze({mixed:`
            <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
            <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
        `}),infoCircle:Object.freeze({stroked:`
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>      
        `,filled:`
            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
        `}),intersect:Object.freeze({mixed:`
            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5zm6-8V2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2V6a2 2 0 0 1 2-2h5z"/>
        `}),layers:Object.freeze({stroked:`
            <path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zm3.515 7.008L14.438 10 8 13.433 1.562 10 4.25 8.567l3.515 1.874a.5.5 0 0 0 .47 0l3.515-1.874zM8 9.433L1.562 6 8 2.567 14.438 6 8 9.433z"/>
        `,filled:`
            <path d="M7.765 1.559a.5.5 0 0 1 .47 0l7.5 4a.5.5 0 0 1 0 .882l-7.5 4a.5.5 0 0 1-.47 0l-7.5-4a.5.5 0 0 1 0-.882l7.5-4z"/>
            <path d="m2.125 8.567-1.86.992a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882l-1.86-.992-5.17 2.756a1.5 1.5 0 0 1-1.41 0l-5.17-2.756z"/>
        `}),layoutSidebarInset:Object.freeze({mixed:`
            <path d="M14 2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zM2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2z"/>
            <path d="M3 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z"/>      
        `}),layoutSsidebarInsetReverse:Object.freeze({mixed:`
            <path d="M2 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm12-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/>
            <path d="M13 4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z"/>      
        `}),lightbulb:Object.freeze({stroked:`
            <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"/>
        `,filled:`
            <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13h-5a.5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm3 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1-.5-.5z"/>
        `}),lightbulbOff:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M2.23 4.35A6.004 6.004 0 0 0 2 6c0 1.691.7 3.22 1.826 4.31.203.196.359.4.453.619l.762 1.769A.5.5 0 0 0 5.5 13a.5.5 0 0 0 0 1 .5.5 0 0 0 0 1l.224.447a1 1 0 0 0 .894.553h2.764a1 1 0 0 0 .894-.553L10.5 15a.5.5 0 0 0 0-1 .5.5 0 0 0 0-1 .5.5 0 0 0 .288-.091L9.878 12H5.83l-.632-1.467a2.954 2.954 0 0 0-.676-.941 4.984 4.984 0 0 1-1.455-4.405l-.837-.836zm1.588-2.653.708.707a5 5 0 0 1 7.07 7.07l.707.707a6 6 0 0 0-8.484-8.484zm-2.172-.051a.5.5 0 0 1 .708 0l12 12a.5.5 0 0 1-.708.708l-12-12a.5.5 0 0 1 0-.708z"/>
        `,filled:`
            <path d="M2 6c0-.572.08-1.125.23-1.65l8.558 8.559A.5.5 0 0 1 10.5 13h-5a.5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm10.303 4.181L3.818 1.697a6 6 0 0 1 8.484 8.484zM5 14.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1-.5-.5zM2.354 1.646a.5.5 0 1 0-.708.708l12 12a.5.5 0 0 0 .708-.708l-12-12z"/>
        `}),moon:Object.freeze({stroked:`
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"/>
        `,filled:`
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        `}),moonStars:Object.freeze({stroked:`
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>      
        `,filled:`
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>      
        `}),person:Object.freeze({stroked:`
            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>
        `,filled:`
            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
        `}),pip:Object.freeze({stroked:`
            <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5z"/>
            <path d="M8 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5z"/>      
        `,filled:`
            <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm7 6h5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5"/>
        `}),plus:Object.freeze({stroked:`
            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
        `}),plusLarge:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"/>
        `}),questionCircle:Object.freeze({stroked:`
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
        `}),rulers:Object.freeze({mixed:`
            <path d="M1 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h5v-1H2v-1h4v-1H4v-1h2v-1H2v-1h4V9H4V8h2V7H2V6h4V2h1v4h1V4h1v2h1V2h1v4h1V4h1v2h1V2h1v4h1V1a1 1 0 0 0-1-1H1z"/>
        `}),scissors:Object.freeze({filled:`
            <path d="M3.5 3.5c-.614-.884-.074-1.962.858-2.5L8 7.226 11.642 1c.932.538 1.472 1.616.858 2.5L8.81 8.61l1.556 2.661a2.5 2.5 0 1 1-.794.637L8 9.73l-1.572 2.177a2.5 2.5 0 1 1-.794-.637L7.19 8.61 3.5 3.5zm2.5 10a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0zm7 0a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/>
        `}),shuffle:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.6 9.6 0 0 0 7.556 8a9.6 9.6 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.6 10.6 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.6 9.6 0 0 0 6.444 8a9.6 9.6 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5"/>
            <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192"/>
        `}),sun:Object.freeze({stroked:`
            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        `,filled:`
            <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        `}),symmetryHorizontal:Object.freeze({mixed:`
            <path d="M13.5 7a.5.5 0 0 0 .24-.939l-11-6A.5.5 0 0 0 2 .5v6a.5.5 0 0 0 .5.5h11zm.485 2.376a.5.5 0 0 1-.246.563l-11 6A.5.5 0 0 1 2 15.5v-6a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .485.376zM11.539 10H3v4.658L11.54 10z"/>
        `}),symmetryVertical:Object.freeze({mixed:`
            <path d="M7 2.5a.5.5 0 0 0-.939-.24l-6 11A.5.5 0 0 0 .5 14h6a.5.5 0 0 0 .5-.5v-11zm2.376-.484a.5.5 0 0 1 .563.245l6 11A.5.5 0 0 1 15.5 14h-6a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .376-.484zM10 4.46V13h4.658L10 4.46z"/>
        `}),scaleLine:Object.freeze({stroked:`
            <path d="M4.114 7.951l.397-.413L5.799 9.25h.742L4.935 7.097l1.439-1.545h-.77L4.453 6.769l-.339.406V4h-.632v5.25h.632V7.951zM7.638 5.962l-.017-.41h-.598V9.25h.632v-2.7c.153-.353.437-.53.851-.53.527 0 .79.269.79.807V9.25h.636V6.796a.846.846 0 01.27-.564.834.834 0 01.584-.212c.285 0 .488.066.609.198.12.13.18.327.18.592v2.44h.633V6.772c-.014-.86-.426-1.289-1.237-1.289-.27 0-.503.055-.701.164-.196.11-.355.253-.479.431-.186-.396-.538-.595-1.056-.595-.46 0-.826.16-1.097.479z"/>
            <path d="M1.5 10.75v-2.5h-1v3a.5.5 0 00.5.5h14a.5.5 0 00.5-.5v-3h-1v2.5h-13z"/>
        `}),search:Object.freeze({stroked:`
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
        `}),subtract:Object.freeze({mixed:`
            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5z"/>
        `}),translate:Object.freeze({mixed:`
            <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/>
            <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 0 1-.415-.492 1.988 1.988 0 0 1-.94.31z"/>      
        `}),trash:Object.freeze({stroked:`
            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>  
        `,filled:`
            <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
        `}),union:Object.freeze({mixed:`
            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2z"/>
        `}),vectorPen:Object.freeze({mixed:`
            <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>
            <path fill-rule="evenodd" d="M2.832 13.228 8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>
        `}),zoomIn:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
            <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>
            <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/>
        `}),zoomOut:Object.freeze({stroked:`
            <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>
            <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>
            <path fill-rule="evenodd" d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
        `})}),uf=Object.freeze({path:ug.airplane.stroked,width:24,height:24,fill:"currentColor",stroke:"#FFFFFFFF",strokeWidth:0,shouldReplaceHashtag:!1,class:""}),up=function(t={}){return(t=E(an).merge(E(an).cloneDeep(uf),t)).shouldReplaceHashtag&&(t.fill=t.fill.replace("#","%23"),t.stroke=t.stroke.replace("#","%23")),`
        <svg xmlns="http://www.w3.org/2000/svg" 
            width="${t.width}" 
            height="${t.height}" 
            fill="${t.fill}"
            stroke="${t.stroke}" 
            stroke-width="${t.strokeWidth}"
            class="${t.class}" 
            viewBox="0 0 16 16">
            ${t.path}
        </svg>
    `},um=function(t){let i=function t(i){return i.reduce((i,n)=>Array.isArray(n)?i.concat(t(n)):i.concat(n),[])}(t),n=[];for(let t=0;t<i.length;t+=2)n.push([i[t],i[t+1]]);return n},u_="style-manager.js",uy=new sz({fill:new sQ({color:"#D7E3FA80"}),stroke:new sV({color:"#0166A5FF",width:2.5})}),uw=new sz({fill:new sQ({color:"#FFFFFF66"}),stroke:new sV({color:"#3B4352FF",lineDash:[2,5],width:2.5})}),uv=new sz({fill:new sQ({color:"#CEEEFF80"}),stroke:new sV({color:"#0080C5FF",width:2.5})}),ub=new sz({fill:new sQ({color:"#CEEEFF80"}),stroke:new sV({color:"#0080C5FF",lineDash:[2,5],width:2.5})}),uC=new sz({image:new sU({radius:6,fill:new sQ({color:"#0080C5FF"}),stroke:new sV({color:"#FFFFFFFF",width:2})}),geometry:t=>new ua(um(t.getGeometry().getCoordinates()))});class ux extends AX{static #Y;static async initAsync(t={}){return A0.logDebug(u_,"initAsync","Initialization started"),this.#Y=new uo,new Promise(t=>{t({filename:u_,result:!0})})}static setMap(t){}static getName(){return u_}static #q(t,i,n,r,s,o,a){let l=[t,i,n,r,s,o],A=this.#Y.get(l);if(A)return A;let h=new sz({image:new sG({src:`data:image/svg+xml;utf8,${a}`,rotation:i,size:[n,r]})});return this.#Y.set(l,h),h}static #X(t,i,n,r){let s=[t,i,n,r],o=this.#Y.get(s);if(o)return o;let a=new sz({image:new sU({radius:t,fill:new sQ({color:n}),stroke:new sV({color:r,width:i})})});return this.#Y.set(s,a),a}static #Z(t,i,n,r,s,o,a,l){let A=[t,i,n,r,s,o,a,l],h=this.#Y.get(A);if(h)return h;let c=new sz({text:new sY({font:s,text:(n?t.toUpperCase():t).ellipsis(r),placement:"point",fill:new sQ({color:o}),stroke:new sV({color:a,width:l}),offsetY:i})});return this.#Y.set(A,c),c}static #J(t,i){let[n,r]=t.icon.key.split("."),[s,o]="geoPin.filled".split("."),a=up({path:E(an).has(ug,[n,r])?ug[n][r]:ug[s][o],width:t.icon.width,height:t.icon.width,fill:t.icon.fill,stroke:t.icon.stroke,strokeWidth:t.icon.strokeWidth,shouldReplaceHashtag:t.settings.shouldReplaceHashtag}),l=this.#q(t.icon.key,t.icon.rotation,t.icon.width,t.icon.height,t.icon.fill,t.icon.stroke,a),A=[this.#X(t.marker.radius,t.marker.width,t.marker.fill,t.marker.stroke),l];if(A2.marker.label.shouldRender&&i<A2.marker.label.visibleUnderResolution){let i=this.#Z(t.label.text,-35,t.label.useUpperCase,t.label.useEllipsisAfter,t.label.font,t.label.fill,t.label.stroke,t.label.strokeWidth);A.push(i)}return A}static #tt(t,i){let n=function(t={}){return(t=E(an).merge(E(an).cloneDeep(uu),t)).shouldReplaceHashtag&&(t.fill=t.fill.replace("#","%23"),t.stroke=t.stroke.replace("#","%23")),`
        <svg xmlns="http://www.w3.org/2000/svg" 
            width="${t.width}" 
            height="${t.height}" 
            fill="${t.fill}"
            stroke="${t.stroke}"
            stroke-width="${t.strokeWidth}"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-miterlimit="10"
            viewBox="0 0 250 250">
            ${uc(t.windSpeed)}
        </svg>
    `}({windSpeed:t.icon.key,width:t.icon.width,height:t.icon.height,fill:t.icon.fill,stroke:t.icon.stroke,strokeWidth:t.icon.strokeWidth,shouldReplaceHashtag:t.settings.shouldReplaceHashtag}),r=uh.degreesToRadians(t.icon.rotation),s=[this.#q(t.icon.key,r,t.icon.width,t.icon.height,t.icon.fill,t.icon.stroke,n)];if(A2.marker.label.shouldRender&&i<A2.marker.label.visibleUnderResolution){let i=r>=90&&r<=270?-1:1,n=this.#Z(t.label.text,20*i,t.label.useUpperCase,t.label.useEllipsisAfter,t.label.font,t.label.fill,t.label.stroke,t.label.strokeWidth);s.push(n)}return s}static #te(){}static #ti(t){return E(an).get(t.getProperties(),["oltb","type"],void 0)}static getStyle(t,i){let n=A2.toolbar.id,r=t.get(n);if(r)return r.type===ud.type.iconMarker?this.#J(r,i):r.type===ud.type.windBarb?this.#tt(r,i):this.#te()}static clearStyles(){this.#Y.clear()}static getSize(){return this.#Y.size||0}static getDefaultMeasurementStyle(){return uw}static getDefaultDrawingStyle(){return uy}static getSelectedStyle(t,i){switch(this.#ti(t)){case ud.type.measurement:return this.getDefaultSelectMeasurementStyle();case ud.type.drawing:default:return this.getDefaultSelectDrawingStyle()}}static getDefaultSelectDrawingStyle(){return[uv,uC]}static getDefaultSelectMeasurementStyle(){return[ub,uC]}}var an=I("f1q41");class uE extends tn{constructor(t){super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}clone(){let t=new uE(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let i=this.getGeometry();i&&t.setGeometry(i.clone());let n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Y(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=W(t,T.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){var i;let n;this.style_=t,this.styleFunction_=t?"function"==typeof(i=t)?i:(Array.isArray(i)?n=i:(tb("function"==typeof i.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),n=[i]),function(){return n}):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const uB=function(t,i){if(!A7.includes(t))return i instanceof Error?{name:i.name,message:i.message,fileName:i.fileName,lineNumber:i.lineNumber,columnNumber:i.columnNumber,stack:i.stack.split("\n").filter(t=>t),cause:i.cause}:i instanceof Response?{ok:i.ok,redirect:i.redirect,status:i.status,statusText:i.statusText,type:i.type,url:i.url}:i},uS={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};var uI=class extends tn{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(uS.ELEMENT,this.handleElementChanged),this.addChangeListener(uS.MAP,this.handleMapChanged),this.addChangeListener(uS.OFFSET,this.handleOffsetChanged),this.addChangeListener(uS.POSITION,this.handlePositionChanged),this.addChangeListener(uS.POSITIONING,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(uS.ELEMENT)}getId(){return this.id}getMap(){return this.get(uS.MAP)||null}getOffset(){return this.get(uS.OFFSET)}getPosition(){return this.get(uS.POSITION)}getPositioning(){return this.get(uS.POSITIONING)}handleElementChanged(){nR(this.element);let t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),Y(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let t=this.getMap();if(t){this.mapPostrenderListenerKey=W(t,ty.POSTRENDER,this.render,this),this.updatePixelPosition();let i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(uS.ELEMENT,t)}setMap(t){this.set(uS.MAP,t)}setOffset(t){this.set(uS.OFFSET,t)}setPosition(t){this.set(uS.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){let i=this.getMap();if(!i||!i.getTargetElement()||!this.get(uS.POSITION))return;let n=this.getRect(i.getTargetElement(),i.getSize()),r=this.getElement(),s=this.getRect(r,[function(t){let i=t.offsetWidth,n=getComputedStyle(t);return i+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10))}(r),function(t){let i=t.offsetHeight,n=getComputedStyle(t);return i+(parseInt(n.marginTop,10)+parseInt(n.marginBottom,10))}(r)]),o=void 0===(t=t||{}).margin?20:t.margin;if(!tW(n,s)){let r=s[0]-n[0],a=n[2]-s[2],l=s[1]-n[1],A=n[3]-s[3],h=[0,0];if(r<0?h[0]=r-o:a<0&&(h[0]=Math.abs(a)+o),l<0?h[1]=l-o:A<0&&(h[1]=Math.abs(A)+o),0!==h[0]||0!==h[1]){let n=i.getView().getCenterInternal(),r=i.getPixelFromCoordinateInternal(n);if(!r)return;let s=[r[0]+h[0],r[1]+h[1]],o=t.animation||{};i.getView().animateInternal({center:i.getCoordinateFromPixelInternal(s),duration:o.duration,easing:o.easing})}}}getRect(t,i){let n=t.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[r,s,r+i[0],s+i[1]]}setPositioning(t){this.set(uS.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){let t=this.getMap(),i=this.getPosition();if(!t||!t.isRendered()||!i)return void this.setVisible(!1);let n=t.getPixelFromCoordinate(i),r=t.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(t,i){let n=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let o=`${t[0]+r[0]}px`,a=`${t[1]+r[1]}px`,l="0%",A="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?l="-100%":("bottom-center"==s||"center-center"==s||"top-center"==s)&&(l="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?A="-100%":("center-left"==s||"center-center"==s||"center-right"==s)&&(A="-50%");let h=`translate(${l}, ${A}) translate(${o}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,n.transform=h)}getOptions(){return this.options}};const uL="oltb-overlay-tooltip",uF=function(t=""){let i=A6.createElement({element:"div",class:uL}),n=A6.createElement({element:"span",html:t,class:`${uL}__item`});A6.appendChildren(i,[n]);let r=A3.getConfig().overlayOffset,s=new uI({element:i,positioning:"bottom-center",offset:[r.horizontal,r.vertical]});return{getOverlay:()=>s,setPosition:t=>{s.setPosition(t)},getPositioin:()=>s.getPosition(),setData:t=>{n.innerHTML=t},getData:()=>n.innerHTML}},uM=Object.freeze({lon:void 0,lat:void 0,infoWindow:void 0,title:"",description:"",settings:Object.freeze({shouldReplaceHashtag:!0}),icon:Object.freeze({key:0,width:200,height:200,rotation:0,fill:"#3B4352FF",stroke:"#3B4352FF",strokeWidth:3}),label:Object.freeze({text:"",font:"14px Calibri",fill:"#FFFFFFFF",stroke:"#3B4352CC",strokeWidth:8,useEllipsisAfter:20,useUpperCase:!1})}),uT=Object.freeze({lon:void 0,lat:void 0,infoWindow:void 0,title:"",description:"",settings:Object.freeze({shouldReplaceHashtag:!0}),marker:Object.freeze({width:14,radius:14,fill:"#0166A5FF",stroke:"#0166A566",strokeWidth:2}),icon:Object.freeze({key:"geoPin.filled",width:14,height:14,rotation:0,fill:"#FFFFFFFF",stroke:"#FFFFFFFF",strokeWidth:0}),label:Object.freeze({text:"",font:"14px Calibri",fill:"#FFFFFFFF",stroke:"#3B4352CC",strokeWidth:8,useEllipsisAfter:20,useUpperCase:!1})}),uR=function(t){return t instanceof nA?uP(t):uD(t)},uO=function(t){return t instanceof nA?t.getInteriorPoint().getCoordinates():t.getLastCoordinate()},uD=function(t){let i=function t(i,n){let r,s,o,a,l,A,h=(n=n||{}).radius||6371008.8,c=n.projection||"EPSG:3857",u=i.getType();"GeometryCollection"!==u&&(i=i.clone().transform(c,"EPSG:4326"));let d=0;switch(u){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":d=eS(r=i.getCoordinates(),h);break;case"MultiLineString":case"Polygon":for(o=0,a=(r=i.getCoordinates()).length;o<a;++o)d+=eS(r[o],h);break;case"MultiPolygon":for(o=0,a=(r=i.getCoordinates()).length;o<a;++o)for(l=0,A=(s=r[o]).length;l<A;++l)d+=eS(s[l],h);break;case"GeometryCollection":{let r=i.getGeometries();for(o=0,a=r.length;o<a;++o)d+=t(r[o],n);break}default:throw Error("Unsupported geometry type: "+u)}return d}(t);return i>100?{value:Math.round(i/1e3*100)/100,unit:"km"}:{value:Math.round(100*i)/100,unit:"m"}},uP=function(t){let i=function t(i,n){let r,s,o,a,l,A,h=(n=n||{}).radius||6371008.8,c=n.projection||"EPSG:3857",u=i.getType();"GeometryCollection"!==u&&(i=i.clone().transform(c,"EPSG:4326"));let d=0;switch(u){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=1,d=Math.abs(eI((r=i.getCoordinates())[0],h)),a=r.length;o<a;++o)d-=Math.abs(eI(r[o],h));break;case"MultiPolygon":for(o=0,a=(r=i.getCoordinates()).length;o<a;++o)for(d+=Math.abs(eI((s=r[o])[0],h)),l=1,A=s.length;l<A;++l)d-=Math.abs(eI(s[l],h));break;case"GeometryCollection":{let r=i.getGeometries();for(o=0,a=r.length;o<a;++o)d+=t(r[o],n);break}default:throw Error("Unsupported geometry type: "+u)}return d}(t);return i>1e4?{value:Math.round(i/1e6*100)/100,unit:"km<sup>2</sup>"}:{value:Math.round(100*i)/100,unit:"m<sup>2</sup>"}};class uk extends iN{constructor(t,i,n){super(),void 0!==n&&void 0===i?this.setFlatCoordinates(n,t):(i=i||0,this.setCenterAndRadius(t,i,n))}clone(){let t=new uk(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){let s=this.flatCoordinates,o=t-s[0],a=i-s[1],l=o*o+a*a;if(l<r){if(0===l)for(let t=0;t<this.stride;++t)n[t]=s[t];else{let t=this.getRadius()/Math.sqrt(l);n[0]=s[0]+t*o,n[1]=s[1]+t*a;for(let t=2;t<this.stride;++t)n[t]=s[t]}return n.length=this.stride,l}return r}containsXY(t,i){let n=this.flatCoordinates,r=t-n[0],s=i-n[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){let i=this.flatCoordinates,n=i[this.stride]-i[0];return tX(i[0]-n,i[1]-n,i[0]+n,i[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){let t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],i=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+i*i}getType(){return"Circle"}intersectsExtent(t){if(eo(t,this.getExtent())){let i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]||t4(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){let i=this.stride,n=this.flatCoordinates[i]-this.flatCoordinates[0],r=t.slice();r[i]=r[0]+n;for(let n=1;n<i;++n)r[i+n]=t[n];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(t,i,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);let r=this.flatCoordinates,s=ij(r,0,t,this.stride);r[s++]=r[0]+i;for(let t=1,i=this.stride;t<i;++t)r[s++]=r[t];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(t,i){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,i){let n=this.getCenter(),r=this.getStride();this.setCenter(iT(n,0,n.length,r,t,i,n)),this.changed()}}uk.prototype.transform;class uN extends iD{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Y),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let t=this.geometries_;for(let i=0,n=t.length;i<n;++i)this.changeEventsKeys_.push(W(t[i],T.CHANGE,this.changed,this))}clone(){let t=new uN(uU(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,i,n,r){if(r<tK(this.getExtent(),t,i))return r;let s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(t,i,n,r);return r}containsXY(t,i){let n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].containsXY(t,i))return!0;return!1}computeExtent(t){tZ(t);let i=this.geometries_;for(let n=0,r=i.length;n<r;++n)t1(t,i[n].getExtent());return t}getGeometries(){return uU(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[],i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].getType()===this.getType()?t=t.concat(i[n].getGeometriesArrayRecursive()):t.push(i[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let i=[],n=this.geometries_,r=!1;for(let s=0,o=n.length;s<o;++s){let o=n[s],a=o.getSimplifiedGeometry(t);i.push(a),a!==o&&(r=!0)}return r?new uN(i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){let i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,i){let n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].rotate(t,i);this.changed()}scale(t,i,n){n||(n=t7(this.getExtent()));let r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(t,i,n);this.changed()}setGeometries(t){this.setGeometriesArray(uU(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){let i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].applyTransform(t);this.changed()}translate(t,i){let n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].translate(t,i);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function uU(t){return t.map(t=>t.clone())}function uQ(t,i,n,r,s,o,a){let l,A,h=(n-i)/r;if(1===h)l=i;else if(2===h)l=i,A=s;else if(0!==h){let o=t[i],a=t[i+1],h=0,c=[0];for(let s=i+r;s<n;s+=r){let i=t[s],n=t[s+1];h+=Math.sqrt((i-o)*(i-o)+(n-a)*(n-a)),c.push(h),o=i,a=n}let u=s*h,d=function(t,i,n){let r,s;n=n||O;let o=0,a=t.length,l=!1;for(;o<a;)(s=+n(t[r=o+(a-o>>1)],i))<0?o=r+1:(a=r,l=!s);return l?o:~o}(c,u);d<0?(A=(u-c[-d-2])/(c[-d-1]-c[-d-2]),l=i+(-d-2)*r):l=i+d*r}a=a>1?a:2,o=o||Array(a);for(let i=0;i<a;++i){var c;o[i]=void 0===l?NaN:void 0===A?t[l+i]:(c=t[l+i],c+A*(t[l+r+i]-c))}return o}function uH(t,i,n,r,s,o){let a;if(n==i)return null;if(s<t[i+r-1])return o?((a=t.slice(i,i+r))[r-1]=s,a):null;if(t[n-1]<s)return o?((a=t.slice(n-r,n))[r-1]=s,a):null;if(s==t[i+r-1])return t.slice(i,i+r);let l=i/r,A=n/r;for(;l<A;){let i=l+A>>1;s<t[(i+1)*r-1]?A=i:l=i+1}let h=t[l*r-1];if(s==h)return t.slice((l-1)*r,(l-1)*r+r);let c=(s-h)/(t[(l+1)*r-1]-h);a=[];for(let i=0;i<r-1;++i){var u;a.push((u=t[(l-1)*r+i],u+c*(t[l*r+i]-u)))}return a.push(s),a}function uG(t,i,n,r){let s=t[i],o=t[i+1],a=0;for(let l=i+r;l<n;l+=r){let i=t[l],n=t[l+1];a+=Math.sqrt((i-s)*(i-s)+(n-o)*(n-o)),s=i,o=n}return a}class uV extends iN{constructor(t,i){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(t[0])?this.setCoordinates(t,i):this.setFlatCoordinates(i,t)}appendCoordinate(t){k(this.flatCoordinates,t),this.changed()}clone(){let t=new uV(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,i,n,r){return r<tK(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,n,r))}forEachSegment(t){return i9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,i){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(i=void 0!==i&&i,uH(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i))}getCoordinates(){return iq(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,i){return uQ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,this.stride)}getLength(){return uG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let i=[];return i.length=iJ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new uV(i,"XY")}getType(){return"LineString"}intersectsExtent(t){return ne(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iW(this.flatCoordinates,0,t,this.stride),this.changed()}}class uz extends iN{constructor(t,i,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,i);else if(void 0!==i&&n)this.setFlatCoordinates(i,t),this.ends_=n;else{let i=[],n=[];for(let r=0,s=t.length;r<s;++r)k(i,t[r].getFlatCoordinates()),n.push(i.length);let r=0===t.length?this.getLayout():t[0].getLayout();this.setFlatCoordinates(r,i),this.ends_=n}}appendLineString(t){k(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new uz(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,i,n,r){return r<tK(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iV(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),iK(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,i,n,r))}getCoordinateAtM(t,i,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(i=void 0!==i&&i,n=void 0!==n&&n,function(t,i,n,r,s,o,a){let l;if(a)return uH(t,i,n[n.length-1],r,s,o);if(s<t[r-1])return o?((l=t.slice(0,r))[r-1]=s,l):null;if(t[t.length-1]<s)return o?((l=t.slice(t.length-r))[r-1]=s,l):null;for(let o=0,a=n.length;o<a;++o){let a=n[o];if(i!=a){if(s<t[i+r-1])return null;if(s<=t[a-1])return uH(t,i,a,r,s,!1);i=a}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,i,n))}getCoordinates(){return iX(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new uV(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){let t=this.flatCoordinates,i=this.ends_,n=this.layout,r=[],s=0;for(let o=0,a=i.length;o<a;++o){let a=i[o],l=new uV(t.slice(s,a),n);r.push(l),s=a}return r}getLength(){let t=this.ends_,i=0,n=0;for(let r=0,s=t.length;r<s;++r)n+=uG(this.flatCoordinates,i,t[r],this.stride),i=t[r];return n}getFlatMidpoints(){let t=[],i=this.flatCoordinates,n=0,r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){let a=r[o];k(t,uQ(i,n,a,s,.5)),n=a}return t}getSimplifiedGeometryInternal(t){let i=[],n=[];return i.length=i0(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,n),new uz(i,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){if(ne(t,i,n[o],r,s))return!0;i=n[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let n=i$(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}function uK(t,i,n,r){let s=[],o=tq();for(let A=0,h=n.length;A<h;++A){var a,l;let h=n[A];a=i,l=h[0],o=t5(tZ(void 0),t,a,l,r),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),i=h[h.length-1]}return s}class uj extends iN{constructor(t,i,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){let r=t,s=[],o=[];for(let t=0,i=r.length;t<i;++t){let i=r[t],n=s.length,a=i.getEnds();for(let t=0,i=a.length;t<i;++t)a[t]+=n;k(s,i.getFlatCoordinates()),o.push(a)}i=0===r.length?this.getLayout():r[0].getLayout(),t=s,n=o}void 0!==i&&n?(this.setFlatCoordinates(i,t),this.endss_=n):this.setCoordinates(t,i)}appendPolygon(t){let i;if(this.flatCoordinates){let n=this.flatCoordinates.length;k(this.flatCoordinates,t.getFlatCoordinates()),i=t.getEnds().slice();for(let t=0,r=i.length;t<r;++t)i[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),i=t.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()}clone(){let t=this.endss_.length,i=Array(t);for(let n=0;n<t;++n)i[n]=this.endss_[n].slice();let n=new uj(this.flatCoordinates.slice(),this.layout,i);return n.applyProperties(this),n}closestPointXY(t,i,n,r){return r<tK(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){let a=n[o];s=iV(t,i,a,r,s),i=a[a.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,i,n,r,s,o,a,l,A,h,c){c=c||[NaN,NaN];for(let u=0,d=n.length;u<d;++u){let d=n[u];h=iK(t,i,d,r,s,o,a,l,A,h,c),i=d[d.length-1]}return h}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,n,r))}containsXY(t,i){return function(t,i,n,r,s,o){if(0===n.length)return!1;for(let a=0,l=n.length;a<l;++a){let l=n[a];if(i6(t,i,l,r,s,o))return!0;i=l[l.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,i)}getArea(){return function(t,i,n,r){let s=0;for(let o=0,a=n.length;o<a;++o){let a=n[o];s+=iQ(t,i,a,r),i=a[a.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let i;return void 0!==t?nl(i=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):i=this.flatCoordinates,iZ(i,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let t=uK(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=i7(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ua(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;no(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=nl(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let i=[],n=[];return i.length=function(t,i,n,r,s,o,a,l){for(let A=0,h=n.length;A<h;++A){let h=n[A],c=[];a=i2(t,i,h,r,s,o,a,c),l.push(c),i=h[h.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,n),new uj(i,"XY",n)}getPolygon(t){let i;if(t<0||this.endss_.length<=t)return null;if(0===t)i=0;else{let n=this.endss_[t-1];i=n[n.length-1]}let n=this.endss_[t].slice(),r=n[n.length-1];if(0!==i)for(let t=0,r=n.length;t<r;++t)n[t]-=i;return new nA(this.flatCoordinates.slice(i,r),this.layout,n)}getPolygons(){let t=this.layout,i=this.flatCoordinates,n=this.endss_,r=[],s=0;for(let o=0,a=n.length;o<a;++o){let a=n[o].slice(),l=a[a.length-1];if(0!==s)for(let t=0,i=a.length;t<i;++t)a[t]-=s;let A=new nA(i.slice(s,l),t,a);r.push(A),s=l}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){let a=n[o];if(nn(t,i,a,r,s))return!0;i=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,i){this.setLayout(i,t,3),this.flatCoordinates||(this.flatCoordinates=[]);let n=iY(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{let t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var uW=class{drawCustom(t,i,n,r,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,i,n){}drawFeature(t,i,n){}drawGeometryCollection(t,i,n){}drawLineString(t,i,n){}drawMultiLineString(t,i,n){}drawMultiPoint(t,i,n){}drawMultiPolygon(t,i,n){}drawPoint(t,i,n){}drawPolygon(t,i,n){}drawText(t,i,n){}setFillStrokeStyle(t,i){}setImageStyle(t,i){}setTextStyle(t,i){}};const u$={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},uY=[u$.FILL],uq=[u$.STROKE],uX=[u$.BEGIN_PATH],uZ=[u$.CLOSE_PATH];var uJ=class extends uW{constructor(t,i,n,r){super(),this.tolerance=t,this.maxExtent=i,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let i=this.pixelRatio;return 1==i?t:t.map(function(t){return t*i})}appendFlatPointCoordinates(t,i){let n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates,o=s.length;for(let a=0,l=t.length;a<l;a+=i)r[0]=t[a],r[1]=t[a+1],tj(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(t,i,n,r,s,o){let a,l,A,h=this.coordinates,c=h.length,u=this.getBufferedMaxExtent();o&&(i+=r);let d=t[i],g=t[i+1],f=this.tmpCoordinate_,p=!0;for(a=i+r;a<n;a+=r)f[0]=t[a],f[1]=t[a+1],(A=tY(u,f))!==l?(p&&(h[c++]=d,h[c++]=g,p=!1),h[c++]=f[0],h[c++]=f[1]):A===tH.INTERSECTING?(h[c++]=f[0],h[c++]=f[1],p=!1):p=!0,d=f[0],g=f[1],l=A;return(s&&p||a===i+r)&&(h[c++]=d,h[c++]=g),c}drawCustomCoordinates_(t,i,n,r,s){for(let o=0,a=n.length;o<a;++o){let a=n[o],l=this.appendFlatLineCoordinates(t,i,a,r,!1,!1);s.push(l),i=a}return i}drawCustom(t,i,n,r,s){let o,a,l,A,h;this.beginGeometry(t,i,s);let c=t.getType(),u=t.getStride(),d=this.coordinates.length;switch(c){case"MultiPolygon":o=t.getOrientedFlatCoordinates(),A=[];let g=t.getEndss();h=0;for(let t=0,i=g.length;t<i;++t){let i=[];h=this.drawCustomCoordinates_(o,h,g[t],u,i),A.push(i)}this.instructions.push([u$.CUSTOM,d,A,t,n,iZ,s]),this.hitDetectionInstructions.push([u$.CUSTOM,d,A,t,r||n,iZ,s]);break;case"Polygon":case"MultiLineString":l=[],o="Polygon"==c?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(o,0,t.getEnds(),u,l),this.instructions.push([u$.CUSTOM,d,l,t,n,iX,s]),this.hitDetectionInstructions.push([u$.CUSTOM,d,l,t,r||n,iX,s]);break;case"LineString":case"Circle":o=t.getFlatCoordinates(),a=this.appendFlatLineCoordinates(o,0,o.length,u,!1,!1),this.instructions.push([u$.CUSTOM,d,a,t,n,iq,s]),this.hitDetectionInstructions.push([u$.CUSTOM,d,a,t,r||n,iq,s]);break;case"MultiPoint":o=t.getFlatCoordinates(),(a=this.appendFlatPointCoordinates(o,u))>d&&(this.instructions.push([u$.CUSTOM,d,a,t,n,iq,s]),this.hitDetectionInstructions.push([u$.CUSTOM,d,a,t,r||n,iq,s]));break;case"Point":o=t.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),a=this.coordinates.length,this.instructions.push([u$.CUSTOM,d,a,t,n,void 0,s]),this.hitDetectionInstructions.push([u$.CUSTOM,d,a,t,r||n,void 0,s])}this.endGeometry(i)}beginGeometry(t,i,n){this.beginGeometryInstruction1_=[u$.BEGIN_GEOMETRY,i,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[u$.BEGIN_GEOMETRY,i,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t,i,n,r=this.hitDetectionInstructions;r.reverse();let s=r.length,o=-1;for(t=0;t<s;++t)if((n=(i=r[t])[0])==u$.END_GEOMETRY)o=t;else if(n==u$.BEGIN_GEOMETRY){i[2]=t;for(var a=this.hitDetectionInstructions,l=o,A=t;l<A;){let t=a[l];a[l]=a[A],a[A]=t,++l,--A}o=-1}}fillStyleToState(t,i={}){if(t){let n=t.getColor();i.fillPatternScale=n&&"object"==typeof n&&"src"in n?this.pixelRatio:1,i.fillStyle=sm(n||sy)}else i.fillStyle=void 0;return i}strokeStyleToState(t,i={}){if(t){i.strokeStyle=sm(t.getColor()||sC);let n=t.getLineCap();i.lineCap=void 0!==n?n:sw;let r=t.getLineDash();i.lineDash=r?r.slice():sv,i.lineDashOffset=t.getLineDashOffset()||0;let s=t.getLineJoin();i.lineJoin=void 0!==s?s:sb;let o=t.getWidth();i.lineWidth=void 0!==o?o:1;let a=t.getMiterLimit();i.miterLimit=void 0!==a?a:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0;return i}setFillStrokeStyle(t,i){let n=this.state;this.fillStyleToState(t,n),this.strokeStyleToState(i,n)}createFill(t){let i=t.fillStyle,n=[u$.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[u$.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,i){let n=t.fillStyle;("string"!=typeof n||t.currentFillStyle!=n)&&(this.instructions.push(i.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,i){let n=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,A=t.miterLimit;t.currentStrokeStyle==n&&t.currentLineCap==r&&(s==t.currentLineDash||N(t.currentLineDash,s))&&t.currentLineDashOffset==o&&t.currentLineJoin==a&&t.currentLineWidth==l&&t.currentMiterLimit==A||(i.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=A)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let i=[u$.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=tz(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;tV(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},u0=class extends uJ{constructor(t,i,n,r){super(t,i,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,i,n){if(!this.image_||this.maxExtent&&!tj(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,i,n);let r=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,s);this.instructions.push([u$.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([u$.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}drawMultiPoint(t,i,n){if(!this.image_)return;this.beginGeometry(t,i,n);let r=t.getFlatCoordinates(),s=[];for(let i=0,n=r.length;i<n;i+=t.getStride())(!this.maxExtent||tj(this.maxExtent,r.slice(i,i+2)))&&s.push(r[i],r[i+1]);let o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([u$.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([u$.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(i)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,i){let n=t.getAnchor(),r=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}},u1=class extends uJ{constructor(t,i,n,r){super(t,i,n,r)}drawFlatCoordinates_(t,i,n,r){let s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,i,n,r,!1,!1),a=[u$.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(t,i,n){let r=this.state,s=r.strokeStyle,o=r.lineWidth;if(void 0===s||void 0===o)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i,n),this.hitDetectionInstructions.push([u$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,sv,0],uX);let a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(uq),this.endGeometry(i)}drawMultiLineString(t,i,n){let r=this.state,s=r.strokeStyle,o=r.lineWidth;if(void 0===s||void 0===o)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,i,n),this.hitDetectionInstructions.push([u$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,sv,0],uX);let a=t.getEnds(),l=t.getFlatCoordinates(),A=t.getStride(),h=0;for(let t=0,i=a.length;t<i;++t)h=this.drawFlatCoordinates_(l,h,a[t],A);this.hitDetectionInstructions.push(uq),this.endGeometry(i)}finish(){let t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(uq),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(uq),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(uX)}},u2=class extends uJ{constructor(t,i,n,r){super(t,i,n,r)}drawFlatCoordinatess_(t,i,n,r){let s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,l=n.length;this.instructions.push(uX),this.hitDetectionInstructions.push(uX);for(let s=0;s<l;++s){let o=n[s],l=this.coordinates.length,A=this.appendFlatLineCoordinates(t,i,o,r,!0,!a),h=[u$.MOVE_TO_LINE_TO,l,A];this.instructions.push(h),this.hitDetectionInstructions.push(h),a&&(this.instructions.push(uZ),this.hitDetectionInstructions.push(uZ)),i=o}return o&&(this.instructions.push(uY),this.hitDetectionInstructions.push(uY)),a&&(this.instructions.push(uq),this.hitDetectionInstructions.push(uq)),i}drawCircle(t,i,n){let r=this.state,s=r.fillStyle,o=r.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([u$.SET_FILL_STYLE,sy]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([u$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,sv,0]);let a=t.getFlatCoordinates(),l=t.getStride(),A=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);let h=[u$.CIRCLE,A];this.instructions.push(uX,h),this.hitDetectionInstructions.push(uX,h),void 0!==r.fillStyle&&(this.instructions.push(uY),this.hitDetectionInstructions.push(uY)),void 0!==r.strokeStyle&&(this.instructions.push(uq),this.hitDetectionInstructions.push(uq)),this.endGeometry(i)}drawPolygon(t,i,n){let r=this.state,s=r.fillStyle,o=r.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([u$.SET_FILL_STYLE,sy]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([u$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,sv,0]);let a=t.getEnds(),l=t.getOrientedFlatCoordinates(),A=t.getStride();this.drawFlatCoordinatess_(l,0,a,A),this.endGeometry(i)}drawMultiPolygon(t,i,n){let r=this.state,s=r.fillStyle,o=r.strokeStyle;if(void 0===s&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,i,n),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([u$.SET_FILL_STYLE,sy]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([u$.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,sv,0]);let a=t.getEndss(),l=t.getOrientedFlatCoordinates(),A=t.getStride(),h=0;for(let t=0,i=a.length;t<i;++t)h=this.drawFlatCoordinatess_(l,h,a[t],A);this.endGeometry(i)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(0!==t){let i=this.coordinates;for(let n=0,r=i.length;n<r;++n)i[n]=i1(i[n],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}};const u5={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};var u4=class extends uJ{constructor(t,i,n,r){super(t,i,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[sy]={fillStyle:sy},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,i,n){let r=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(""===this.text_||!o||!r&&!s)return;let a=this.coordinates,l=a.length,A=t.getType(),h=null,c=t.getStride();if("line"===o.placement&&("LineString"==A||"MultiLineString"==A||"Polygon"==A||"MultiPolygon"==A)){let r;if(!eo(this.maxExtent,t.getExtent()))return;if(h=t.getFlatCoordinates(),"LineString"==A)r=[h.length];else if("MultiLineString"==A)r=t.getEnds();else if("Polygon"==A)r=t.getEnds().slice(0,1);else if("MultiPolygon"==A){let i=t.getEndss();r=[];for(let t=0,n=i.length;t<n;++t)r.push(i[t][0])}this.beginGeometry(t,i,n);let s=o.repeat,u=s?void 0:o.textAlign,d=0;for(let t=0,i=r.length;t<i;++t){let i;i=s?function(t,i,n,r,s){let o=[],a=n,l=0,A=i.slice(n,2);for(;l<t&&a+s<r;){let[n,r]=A.slice(-2),h=i[a+s],c=i[a+s+1],u=Math.sqrt((h-n)*(h-n)+(c-r)*(c-r));if((l+=u)>=t){let i=(t-l+u)/u,d=n+i*(h-n),g=r+i*(c-r);A.push(d,g),o.push(A),A=[d,g],l==t&&(a+=s),l=0}else if(l<t)A.push(i[a+s],i[a+s+1]),a+=s;else{let t=u-l,i=n+t/u*(h-n),d=r+t/u*(c-r);A.push(i,d),o.push(A),A=[i,d],l=0,a+=s}}return l>0&&o.push(A),o}(s*this.resolution,h,d,r[t],c):[h.slice(d,r[t])];for(let n=0,s=i.length;n<s;++n){let s=i[n],A=0,h=s.length;if(void 0==u){let t=function(t,i,n,r,s){let o,a,l,A,h,c,u,d,g,f=0,p=0,m=0,_=0,y=n;for(o=n;o<r;o+=2){let n=i[o],r=i[o+1];void 0!==A&&(l=Math.sqrt((d=n-A)*d+(g=r-h)*g),void 0!==c&&(_+=a,Math.acos((c*d+u*g)/(a*l))>t&&(_>m&&(m=_,f=y,p=o),_=0,y=o-2)),a=l,c=d,u=g),A=n,h=r}return(_+=l)>m?[y,o]:[f,p]}(o.maxAngle,s,0,s.length,2);A=t[0],h=t[1]}for(let t=A;t<h;t+=c)a.push(s[t],s[t+1]);let g=a.length;d=r[t],this.drawChars_(l,g),l=g}}this.endGeometry(i)}else{let r=o.overflow?null:[];switch(A){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),c=2;break;case"Polygon":h=t.getFlatInteriorPoint(),o.overflow||r.push(h[2]/this.resolution),c=3;break;case"MultiPolygon":let s=t.getFlatInteriorPoints();h=[];for(let t=0,i=s.length;t<i;t+=3)o.overflow||r.push(s[t+2]/this.resolution),h.push(s[t],s[t+1]);if(0===h.length)return;c=2}let u=this.appendFlatPointCoordinates(h,c);if(u===l)return;if(r&&(u-l)/2!=h.length/c){let t=l/2;r=r.filter((i,n)=>{let r=a[(t+n)*2]===h[n*c]&&a[(t+n)*2+1]===h[n*c+1];return!r&&--t,r})}this.saveTextStates_();let d=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,g=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(t,i,n);let f=o.padding;if(f!=sB&&(o.scale[0]<0||o.scale[1]<0)){let t=o.padding[0],i=o.padding[1],n=o.padding[2],r=o.padding[3];o.scale[0]<0&&(i=-i,r=-r),o.scale[1]<0&&(t=-t,n=-n),f=[t,i,n,r]}let p=this.pixelRatio;this.instructions.push([u$.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,f==sB?sB:f.map(function(t){return t*p}),d,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,r]);let m=1/p,_=d?d.slice(0):null;_&&(_[1]=sy),this.hitDetectionInstructions.push([u$.DRAW_IMAGE,l,u,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[m,m],NaN,this.declutterMode_,this.declutterImageWithText_,f,_,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?sy:this.fillKey_,this.textOffsetX_,this.textOffsetY_,r]),this.endGeometry(i)}}saveTextStates_(){let t=this.textStrokeState_,i=this.textState_,n=this.textFillState_,r=this.strokeKey_;!t||r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash});let s=this.textKey_;s in this.textStates||(this.textStates[s]={font:i.font,textAlign:i.textAlign||sx,justify:i.justify,textBaseline:i.textBaseline||sE,scale:i.scale});let o=this.fillKey_;!n||o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle})}drawChars_(t,i){let n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,A=u5[r.textBaseline],h=this.textOffsetY_*l,c=this.text_,u=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([u$.DRAW_CHARS,t,i,A,r.overflow,a,r.maxAngle,l,h,s,u*l,c,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([u$.DRAW_CHARS,t,i,A,r.overflow,a?sy:a,r.maxAngle,l,h,s,u*l,c,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,i){let n,r,s;if(t){let i=t.getFill();i?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=sm(i.getColor()||sy)):(r=null,this.textFillState_=r);let o=t.getStroke();if(o){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);let t=o.getLineDash(),i=o.getLineDashOffset(),n=o.getWidth(),r=o.getMiterLimit();s.lineCap=o.getLineCap()||sw,s.lineDash=t?t.slice():sv,s.lineDashOffset=void 0===i?0:i,s.lineJoin=o.getLineJoin()||sb,s.lineWidth=void 0===n?1:n,s.miterLimit=void 0===r?10:r,s.strokeStyle=sm(o.getColor()||sC)}else s=null,this.textStrokeState_=s;n=this.textState_;let a=t.getFont()||s_;sM(a);let l=t.getScaleArray();n.overflow=t.getOverflow(),n.font=a,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||sE,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||sB,n.scale=void 0===l?[1,1]:l;let A=t.getOffsetX(),h=t.getOffsetY(),c=t.getRotateWithView(),u=t.getKeepUpright(),d=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===A?0:A,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==c&&c,this.textKeepUpright_=void 0===u||u,this.textRotation_=void 0===d?0:d,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:te(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?"string"==typeof r.fillStyle?r.fillStyle:"|"+te(r.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=i}};const u3={Circle:u2,Default:uJ,Image:u0,LineString:u1,Polygon:u2,Text:u4};var u6=class{constructor(t,i,n,r){this.tolerance_=t,this.maxExtent_=i,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){let t={};for(let i in this.buildersByZIndex_){t[i]=t[i]||{};let n=this.buildersByZIndex_[i];for(let r in n){let s=n[r].finish();t[i][r]=s}}return t}getBuilder(t,i){let n=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(r={},this.buildersByZIndex_[n]=r);let s=r[i];return void 0===s&&(s=new u3[i](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[i]=s),s}};const u8=tq(),u7=[],u9=[],dt=[],de=[];function di(t){return t[3].declutterBox}const dn=RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function dr(t,i){return"start"===i?i=dn.test(t)?"right":"left":"end"===i&&(i=dn.test(t)?"left":"right"),u5[i]}function ds(t,i,n){return n>0&&t.push("\n",""),t.push(i,""),t}function da(t,i,n){return n%2==0&&(t+=i),t}var dl=class{constructor(t,i,n,r,s){this.overlaps=n,this.pixelRatio=i,this.resolution=t,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=iE(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new oR:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,i,n,r){let s,o=t+i+n+r;if(this.labels_[o])return this.labels_[o];let a=r?this.strokeStates[r]:null,l=n?this.fillStates[n]:null,A=this.textStates[i],h=this.pixelRatio,c=[A.scale[0]*h,A.scale[1]*h],u=A.justify?u5[A.justify]:dr(Array.isArray(t)?t[0]:t,A.textAlign||sx),d=r&&a.lineWidth?a.lineWidth:0,g=Array.isArray(t)?t:String(t).split("\n").reduce(ds,[]),{width:f,height:p,widths:m,heights:_,lineWidths:y}=function(t,i){let n=[],r=[],s=[],o=0,a=0,l=0,A=0;for(let h=0,c=i.length;h<=c;h+=2){let u=i[h];if("\n"===u||h===c){o=Math.max(o,a),s.push(a),a=0,l+=A,A=0;continue}let d=i[h+1]||t.font,g=sR(d,u).width;n.push(g),a+=g;let f=sT(d);r.push(f),A=Math.max(A,f)}return{width:o,height:l,widths:n,heights:r,lineWidths:s}}(A,g),w=f+d,v=[],b=(w+2)*c[0],C=(p+d)*c[1],x={width:b<0?Math.floor(b):Math.ceil(b),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:v};(1!=c[0]||1!=c[1])&&v.push("scale",c),r&&(v.push("strokeStyle",a.strokeStyle),v.push("lineWidth",d),v.push("lineCap",a.lineCap),v.push("lineJoin",a.lineJoin),v.push("miterLimit",a.miterLimit),v.push("setLineDash",[a.lineDash]),v.push("lineDashOffset",a.lineDashOffset)),n&&v.push("fillStyle",l.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");let E=.5-u,B=u*w+E*d,S=[],I=[],L=0,F=0,M=0,T=0;for(let t=0,i=g.length;t<i;t+=2){let i=g[t];if("\n"===i){F+=L,L=0,B=u*w+E*d,++T;continue}let o=g[t+1]||A.font;o!==s&&(r&&S.push("font",o),n&&I.push("font",o),s=o),L=Math.max(L,_[M]);let a=[i,B+E*m[M]+u*(m[M]-y[T]),.5*(d+L)+F];B+=m[M],r&&S.push("strokeText",a),n&&I.push("fillText",a),++M}return Array.prototype.push.apply(v,S),Array.prototype.push.apply(v,I),this.labels_[o]=x,x}replayTextBackground_(t,i,n,r,s,o,a){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,s),t.lineTo.apply(t,i),o&&(this.alignAndScaleFill_=o[2],t.fillStyle=o[1],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,i,n,r,s,o,a,l,A,h,c,u,d,g,f,p){let m;a*=u[0],l*=u[1];let _=n-a,y=r-l,w=s+A>t?t-A:s,v=o+h>i?i-h:o,b=g[3]+w*u[0]+g[1],C=g[0]+v*u[1]+g[2],x=_-g[3],E=y-g[0];return(f||0!==c)&&(u7[0]=x,de[0]=x,u7[1]=E,u9[1]=E,u9[0]=x+b,dt[0]=u9[0],dt[1]=E+C,de[1]=dt[1]),0!==c?(iB(m=iS(iE(),n,r,1,1,c,-n,-r),u7),iB(m,u9),iB(m,dt),iB(m,de),tX(Math.min(u7[0],u9[0],dt[0],de[0]),Math.min(u7[1],u9[1],dt[1],de[1]),Math.max(u7[0],u9[0],dt[0],de[0]),Math.max(u7[1],u9[1],dt[1],de[1]),u8)):tX(Math.min(x,x+b),Math.min(E,E+C),Math.max(x,x+b),Math.max(E,E+C),u8),d&&(_=Math.round(_),y=Math.round(y)),{drawImageX:_,drawImageY:y,drawImageW:w,drawImageH:v,originX:A,originY:h,declutterBox:{minX:u8[0],minY:u8[1],maxX:u8[2],maxY:u8[3],value:p},canvasTransform:m,scale:u}}replayImageOrLabel_(t,i,n,r,s,o,a){let l=!!(o||a),A=r.declutterBox,h=a?a[2]*r.scale[0]/2:0;if(A.minX-h<=i[0]&&A.maxX+h>=0&&A.minY-h<=i[1]&&A.maxY+h>=0){var c,u,d,g,f,p,m,_;l&&this.replayTextBackground_(t,u7,u9,dt,de,o,a),c=r.canvasTransform,u=r.originX,d=r.originY,g=r.drawImageW,f=r.drawImageH,p=r.drawImageX,m=r.drawImageY,_=r.scale,t.save(),1!==s&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=s:t.globalAlpha*=s),c&&t.transform.apply(t,c),n.contextInstructions?(t.translate(p,m),t.scale(_[0],_[1]),function(t,i){let n=t.contextInstructions;for(let t=0,r=n.length;t<r;t+=2)Array.isArray(n[t+1])?i[n[t]].apply(i,n[t+1]):i[n[t]]=n[t+1]}(n,t)):_[0]<0||_[1]<0?(t.translate(p,m),t.scale(_[0],_[1]),t.drawImage(n,u,d,g,f,0,0,g,f)):t.drawImage(n,u,d,g,f,p,m,g*_[0],f*_[1]),t.restore()}return!0}fill_(t){let i=this.alignAndScaleFill_;if(i){let n=iB(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(n[0]%r,n[1]%r),1!==i&&t.scale(i,i),t.rotate(this.viewRotation_)}t.fill(),i&&t.restore()}setStrokeStyle_(t,i){t.strokeStyle=i[1],i[1]&&(t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.lineDashOffset=i[7],t.setLineDash(i[6]))}drawLabelWithPointPlacement_(t,i,n,r){let s=this.textStates[i],o=this.createLabel(t,i,r,n),a=this.strokeStates[n],l=this.pixelRatio,A=dr(Array.isArray(t)?t[0]:t,s.textAlign||sx),h=u5[s.textBaseline||sE],c=a&&a.lineWidth?a.lineWidth:0,u=o.width/l-2*s.scale[0],d=h*o.height/l+2*(.5-h)*c;return{label:o,anchorX:A*u+2*(.5-A)*c,anchorY:d}}execute_(t,i,n,r,s,o,a,l){let A,h,c,u,d,g,f,p,m,_,y,w,v,b,C,x,E,B,S=this.zIndexContext_;if(this.pixelCoordinates_&&N(n,this.renderedTransform_))A=this.pixelCoordinates_;else{var I;this.pixelCoordinates_||(this.pixelCoordinates_=[]),A=iM(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),I=this.renderedTransform_,I[0]=n[0],I[1]=n[1],I[2]=n[2],I[3]=n[3],I[4]=n[4],I[5]=n[5]}let L=0,F=r.length,M=0,T=0,R=0,O=this.coordinateCache_,D=this.viewRotation_,P=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,k={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:D},U=this.instructions!=r||this.overlaps?0:200;for(;L<F;){let n=r[L];switch(n[0]){case u$.BEGIN_GEOMETRY:C=n[1],B=n[3],C.getGeometry()?void 0===a||eo(a,B.getExtent())?++L:L=n[2]+1:L=n[2],S&&(S.zIndex=n[4]);break;case u$.BEGIN_PATH:T>U&&(this.fill_(t),T=0),R>U&&(t.stroke(),R=0),T||R||(t.beginPath(),g=NaN,f=NaN),++L;break;case u$.CIRCLE:let I=A[M=n[1]],F=A[M+1],N=A[M+2],Q=A[M+3],H=N-I,G=Q-F,V=Math.sqrt(H*H+G*G);t.moveTo(I+V,F),t.arc(I,F,V,0,2*Math.PI,!0),++L;break;case u$.CLOSE_PATH:t.closePath(),++L;break;case u$.CUSTOM:M=n[1],h=n[2];let z=n[3],K=n[4],j=n[5];k.geometry=z,k.feature=C,L in O||(O[L]=[]);let W=O[L];j?j(A,M,h,2,W):(W[0]=A[M],W[1]=A[M+1],W.length=2),S&&(S.zIndex=n[6]),K(W,k),++L;break;case u$.DRAW_IMAGE:let $,Y,q,X;M=n[1],h=n[2],_=n[3],c=n[4],u=n[5];let Z=n[6],J=n[7],tt=n[8],te=n[9],ti=n[10],tn=n[11],tr=n[12],ts=n[13];d=n[14]||"declutter";let to=n[15];if(!_&&n.length>=20){y=n[19],w=n[20],v=n[21],b=n[22];let t=this.drawLabelWithPointPlacement_(y,w,v,b);_=t.label,n[3]=_;let i=n[23];c=(t.anchorX-i)*this.pixelRatio,n[4]=c;let r=n[24];u=(t.anchorY-r)*this.pixelRatio,n[5]=u,Z=_.height,n[6]=Z,ts=_.width,n[13]=ts}n.length>25&&($=n[25]),n.length>17?(Y=n[16],q=n[17],X=n[18]):(Y=sB,q=null,X=null),ti&&P?tn+=D:ti||P||(tn-=D);let ta=0;for(;M<h;M+=2){if($&&$[ta++]<ts/this.pixelRatio)continue;let n=this.calculateImageOrLabelDimensions_(_.width,_.height,A[M],A[M+1],ts,Z,c,u,tt,te,tn,tr,s,Y,!!q||!!X,C),r=[t,i,_,n,J,q,X];if(l){let t,i,s,o,a;if(to){let n=h-M;if(!to[n]){to[n]={args:r,declutterMode:d};continue}let o=to[n];t=o.args,i=o.declutterMode,delete to[n],s=di(t)}if(t&&("declutter"!==i||!l.collides(s))&&(o=!0),"declutter"===d&&l.collides(n.declutterBox)||(a=!0),"declutter"===i&&"declutter"===d){let t=o&&a;o=t,a=t}o&&("none"!==i&&l.insert(s),this.replayImageOrLabel_.apply(this,t)),a&&("none"!==d&&l.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,r))}else this.replayImageOrLabel_.apply(this,r)}++L;break;case u$.DRAW_CHARS:let tl,tA=n[1],th=n[2],tc=n[3],tu=n[4];b=n[5];let td=n[6],tg=n[7],tf=n[8];v=n[9];let tp=n[10];Array.isArray(y=n[11])&&(y=y.reduce(da,"")),w=n[12];let tm=[n[13],n[13]];d=n[14]||"declutter";let t_=n[15],ty=this.textStates[w],tw=ty.font,tv=[ty.scale[0]*tg,ty.scale[1]*tg];tw in this.widths_?tl=this.widths_[tw]:(tl={},this.widths_[tw]=tl);let tb=uG(A,tA,th,2),tC=Math.abs(tv[0])*sO(tw,y,tl);if(tu||tC<=tb){let n=(tb-tC)*dr(y,this.textStates[w].textAlign),r=function(t,i,n,r,s,o,a,l,A,h,c,u,d=!0){var g,f,p,m,_,y;let w,v=t[i],b=t[i+1],C=0,x=0,E=0,B=0;function S(){C=v,x=b,i+=2,v=t[i],b=t[i+1],B+=E,E=Math.sqrt((v-C)*(v-C)+(b-x)*(b-x))}do S();while(i<n-2&&B+E<o)let I=0===E?0:(o-B)/E,L=(g=C)+I*(v-g),F=(f=x)+I*(b-f),M=i-r,T=B,R=o+l*A(h,s,c);for(;i<n-r&&B+E<R;)S();I=0===E?0:(R-B)/E;let O=(p=C)+I*(v-p),D=(m=x)+I*(b-m),P=!1;if(d)if(u){let t=[L,F,O,D];iT(t,0,4,2,u,t,t),P=t[0]>t[2]}else P=L>O;let k=Math.PI,N=[],U=M+r===i;if(i=M,E=0,B=T,v=t[i],b=t[i+1],U){S(),w=Math.atan2(b-x,v-C),P&&(w+=w>0?-k:k);let t=(O+L)/2,i=(D+F)/2;return N[0]=[t,i,(R-o)/2,w,s],N}s=s.replace(/\n/g," ");for(let t=0,u=s.length;t<u;){S();let d=Math.atan2(b-x,v-C);if(P&&(d+=d>0?-k:k),void 0!==w){let t=d-w;if(Math.abs(t+=t>k?-2*k:t<-k?2*k:0)>a)return null}w=d;let g=t,f=0;for(;t<u;++t){let a=l*A(h,s[P?u-t-1:t],c);if(i+r<n&&B+E<o+f+a/2)break;f+=a}if(t===g)continue;let p=P?s.substring(u-g,u-t):s.substring(g,t);I=0===E?0:(o+f/2-B)/E;let m=(_=C)+I*(v-_),L=(y=x)+I*(b-y);N.push([m,L,f/2,d,p]),o+=f}return N}(A,tA,th,2,y,n,td,Math.abs(tv[0]),sO,tw,tl,P?0:this.viewRotation_,t_);e:if(r){let n,s,o,a,A,h=[];if(v)for(n=0,s=r.length;n<s;++n){o=(A=r[n])[4],a=this.createLabel(o,w,"",v),c=A[2]+(tv[0]<0?-tp:tp),u=tc*a.height+(.5-tc)*2*tp*tv[1]/tv[0]-tf;let s=this.calculateImageOrLabelDimensions_(a.width,a.height,A[0],A[1],a.width,a.height,c,u,0,0,A[3],tm,!1,sB,!1,C);if(l&&"declutter"===d&&l.collides(s.declutterBox))break e;h.push([t,i,a,s,1,null,null])}if(b)for(n=0,s=r.length;n<s;++n){o=(A=r[n])[4],a=this.createLabel(o,w,b,""),c=A[2],u=tc*a.height-tf;let s=this.calculateImageOrLabelDimensions_(a.width,a.height,A[0],A[1],a.width,a.height,c,u,0,0,A[3],tm,!1,sB,!1,C);if(l&&"declutter"===d&&l.collides(s.declutterBox))break e;h.push([t,i,a,s,1,null,null])}l&&"none"!==d&&l.load(h.map(di));for(let t=0,i=h.length;t<i;++t)this.replayImageOrLabel_.apply(this,h[t])}}++L;break;case u$.END_GEOMETRY:if(void 0!==o){let t=o(C=n[1],B,d);if(t)return t}++L;break;case u$.FILL:U?T++:this.fill_(t),++L;break;case u$.MOVE_TO_LINE_TO:for(M=n[1],h=n[2],x=A[M],E=A[M+1],t.moveTo(x,E),g=x+.5|0,f=E+.5|0,M+=2;M<h;M+=2)x=A[M],E=A[M+1],p=x+.5|0,m=E+.5|0,(M==h-2||p!==g||m!==f)&&(t.lineTo(x,E),g=p,f=m);++L;break;case u$.SET_FILL_STYLE:this.alignAndScaleFill_=n[2],T&&(this.fill_(t),T=0,R&&(t.stroke(),R=0)),t.fillStyle=n[1],++L;break;case u$.SET_STROKE_STYLE:R&&(t.stroke(),R=0),this.setStrokeStyle_(t,n),++L;break;case u$.STROKE:U?R++:t.stroke(),++L;break;default:++L}}T&&this.fill_(t),R&&t.stroke()}execute(t,i,n,r,s,o){this.viewRotation_=r,this.execute_(t,i,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,i,n,r,s){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],i,this.hitDetectionInstructions,!0,r,s)}};const dA=["Polygon","Circle","LineString","Image","Text","Default"],dh=["Image","Text"],dc=dA.filter(t=>!dh.includes(t)),du={};var dd=class{constructor(t,i,n,r,s,o,a){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=iE(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(t,i){let n=this.getClipCoords(i);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,i){for(let n in t){let r=this.executorsByZIndex_[n];void 0===r&&(r={},this.executorsByZIndex_[n]=r);let s=t[n];for(let t in s){let n=s[t];r[t]=new dl(this.resolution_,this.pixelRatio_,this.overlaps_,n,i)}}}hasExecutors(t){for(let i in this.executorsByZIndex_){let n=this.executorsByZIndex_[i];for(let i=0,r=t.length;i<r;++i)if(t[i]in n)return!0}return!1}forEachFeatureAtCoordinate(t,i,n,r,s,o){let a,l,A,h,c,u,d,g=2*(r=Math.round(r))+1,f=iS(this.hitDetectionTransform_,r+.5,r+.5,1/i,-1/i,-n,-t[0],-t[1]),p=!this.hitDetectionContext_;p&&(this.hitDetectionContext_=nL(g,g));let m=this.hitDetectionContext_;m.canvas.width!==g||m.canvas.height!==g?(m.canvas.width=g,m.canvas.height=g):p||m.clearRect(0,0,g,g),void 0!==this.renderBuffer_&&(t2(a=tq(),t),tV(a,i*(this.renderBuffer_+r),a));let _=function(t){if(void 0!==du[t])return du[t];let i=2*t+1,n=t*t,r=Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){let a=s*s+o*o;if(a>n)break;let l=r[a];l||(l=[],r[a]=l),l.push(((t+s)*i+(t+o))*4+3),s>0&&l.push(((t-s)*i+(t+o))*4+3),o>0&&(l.push(((t+s)*i+(t-o))*4+3),s>0&&l.push(((t-s)*i+(t-o))*4+3))}let s=[];for(let t=0,i=r.length;t<i;++t)r[t]&&s.push(...r[t]);return du[t]=s,s}(r);function y(t,i,n){let a=m.getImageData(0,0,g,g).data;for(let A=0,h=_.length;A<h;A++)if(a[_[A]]>0){if(!o||"none"===n||"Image"!==l&&"Text"!==l||o.includes(t)){let n=(_[A]-3)/4,o=r-n%g,a=r-(n/g|0),l=s(t,i,o*o+a*a);if(l)return l}m.clearRect(0,0,g,g);break}}let w=Object.keys(this.executorsByZIndex_).map(Number);for(w.sort(O),A=w.length-1;A>=0;--A){let t=w[A].toString();for(c=this.executorsByZIndex_[t],h=dA.length-1;h>=0;--h)if(void 0!==(u=c[l=dA[h]])&&(d=u.executeHitDetection(m,f,n,y,a)))return d}}getClipCoords(t){let i=this.maxExtent_;if(!i)return null;let n=i[0],r=i[1],s=i[2],o=i[3],a=[n,r,n,o,s,o,s,r];return iM(a,0,8,2,t,a),a}isEmpty(){return z(this.executorsByZIndex_)}execute(t,i,n,r,s,o,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?D:O),o=o||dA;let A=dA.length;for(let h=0,c=l.length;h<c;++h){let c=l[h].toString(),u=this.executorsByZIndex_[c];for(let c=0,d=o.length;c<d;++c){let d=o[c],g=u[d];if(void 0!==g){let o=null===a?void 0:g.getZIndexContext(),c=o?o.getContext():t,u=this.maxExtent_&&"Image"!==d&&"Text"!==d;if(u&&(c.save(),this.clip(c,n)),o&&"Text"!==d&&"Image"!==d?o.pushFunction(t=>g.execute(t,i,n,r,s,a)):g.execute(c,i,n,r,s,a),u&&c.restore(),o){o.offset();let t=l[h]*A+dA.indexOf(d);this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let t=this.deferredZIndexContexts_,i=Object.keys(t).map(Number).sort(O);for(let n=0,r=i.length;n<r;++n)t[i[n]].forEach(t=>{t.draw(this.renderedContext_),t.clear()}),t[i[n]].length=0}},dg=class extends uW{constructor(t,i,n,r,s,o,a){super(),this.context_=t,this.pixelRatio_=i,this.extent_=n,this.transform_=r,this.transformRotation_=r?tO(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=iE()}drawImages_(t,i,n,r){if(!this.image_)return;let s=iM(t,i,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let A=this.imageRotation_;0===this.transformRotation_&&(A-=this.viewRotation_),this.imageRotateWithView_&&(A+=this.viewRotation_);for(let t=0,i=s.length;t<i;t+=2){let i=s[t]-this.imageAnchorX_,n=s[t+1]-this.imageAnchorY_;if(0!==A||1!=this.imageScale_[0]||1!=this.imageScale_[1]){let t=i+this.imageAnchorX_,r=n+this.imageAnchorY_;iS(a,t,r,1,1,A,-t,-r),o.save(),o.transform.apply(o,a),o.translate(t,r),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,i,n,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(t,i,n,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let s=iM(t,i,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);i<n;i+=r){let t=s[i]+this.textOffsetX_,n=s[i+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(t-this.textOffsetX_,n-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,t,n),this.textFillState_&&o.fillText(this.text_,t,n))}}moveToLineTo_(t,i,n,r,s){let o=this.context_,a=iM(t,i,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let t=2;t<l;t+=2)o.lineTo(a[t],a[t+1]);return s&&o.closePath(),n}drawRings_(t,i,n,r){for(let s=0,o=n.length;s<o;++s)i=this.moveToLineTo_(t,i,n[s],r,!0);return i}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let i=function(t,i,n){let r=t.getFlatCoordinates();if(!r)return null;let s=t.getStride();return iM(r,0,r.length,s,i,n)}(t,this.transform_,this.pixelCoordinates_),n=i[2]-i[0],r=i[3]-i[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(i[0],i[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,i){let n=i.getGeometryFunction()(t);n&&(this.setStyle(i),this.drawGeometry(n))}drawGeometryCollection(t){let i=t.getGeometriesArray();for(let t=0,n=i.length;t<n;++t)this.drawGeometry(i[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),""!==this.text_&&this.drawText_(i,0,i.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let i=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(i,0,i.length,n),""!==this.text_&&this.drawText_(i,0,i.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,n=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),i.stroke()}if(""!==this.text_){let i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let i=t.getExtent();if(eo(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,n=t.getFlatCoordinates(),r=0,s=t.getEnds(),o=t.getStride();i.beginPath();for(let t=0,i=s.length;t<i;++t)r=this.moveToLineTo_(n,r,s[t],o,!1);i.stroke()}if(""!==this.text_){let i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){let i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),eo(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let i=this.context_,n=t.getOrientedFlatCoordinates(),r=0,s=t.getEndss(),o=t.getStride();i.beginPath();for(let t=0,i=s.length;t<i;++t){let i=s[t];r=this.drawRings_(n,r,i,o)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(""!==this.text_){let i=t.getFlatInteriorPoints();this.drawText_(i,0,i.length,2)}}}setContextFillState_(t){let i=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let i=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,i.lineCap=t.lineCap),N(n.lineDash,t.lineDash)||i.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset,i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let i=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:sx;n?(n.font!=t.font&&(n.font=t.font,i.font=t.font),n.textAlign!=r&&(n.textAlign=r,i.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=r,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,i){if(t){let i=t.getColor();this.fillState_={fillStyle:sm(i||sy)}}else this.fillState_=null;if(i){let t=i.getColor(),n=i.getLineCap(),r=i.getLineDash(),s=i.getLineDashOffset(),o=i.getLineJoin(),a=i.getWidth(),l=i.getMiterLimit(),A=r||sv;this.strokeState_={lineCap:void 0!==n?n:sw,lineDash:1===this.pixelRatio_?A:A.map(t=>t*this.pixelRatio_),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==o?o:sb,lineWidth:(void 0!==a?a:1)*this.pixelRatio_,miterLimit:void 0!==l?l:10,strokeStyle:sm(t||sC)}}else this.strokeState_=null}setImageStyle(t){let i;if(!t||!(i=t.getSize())){this.image_=null;return}let n=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=i[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=i[0]*n}setTextStyle(t){if(t){let i=t.getFill();if(i){let t=i.getColor();this.textFillState_={fillStyle:sm(t||sy)}}else this.textFillState_=null;let n=t.getStroke();if(n){let t=n.getColor(),i=n.getLineCap(),r=n.getLineDash(),s=n.getLineDashOffset(),o=n.getLineJoin(),a=n.getWidth(),l=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==i?i:sw,lineDash:r||sv,lineDashOffset:s||0,lineJoin:void 0!==o?o:sb,lineWidth:void 0!==a?a:1,miterLimit:void 0!==l?l:10,strokeStyle:sm(t||sC)}}else this.textStrokeState_=null;let r=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),A=t.getScaleArray(),h=t.getText(),c=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:void 0!==r?r:s_,textAlign:void 0!==c?c:sx,textBaseline:void 0!==u?u:sE},this.text_=void 0!==h?Array.isArray(h)?h.reduce((t,i,n)=>t+=n%2?" ":i,""):h:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*A[0],this.pixelRatio_*A[1]]}else this.text_=""}};const df={Point:function(t,i,n,r,s,o){let a=n.getImage(),l=n.getText(),A=l&&l.getText(),h=o&&a&&A?{}:void 0;if(a){if(a.getImageState()!=sc.LOADED)return;let o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(a,h),o.drawPoint(i,r,s)}if(A){let o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l,h),o.drawText(i,r,s)}},LineString:function(t,i,n,r,s){let o=n.getStroke();if(o){let a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(i,r,s)}let a=n.getText();if(a&&a.getText()){let o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(i,r,s)}},Polygon:function(t,i,n,r,s){let o=n.getFill(),a=n.getStroke();if(o||a){let l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawPolygon(i,r,s)}let l=n.getText();if(l&&l.getText()){let o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l),o.drawText(i,r,s)}},MultiPoint:function(t,i,n,r,s,o){let a=n.getImage(),l=a&&0!==a.getOpacity(),A=n.getText(),h=A&&A.getText(),c=o&&l&&h?{}:void 0;if(l){if(a.getImageState()!=sc.LOADED)return;let o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(a,c),o.drawMultiPoint(i,r,s)}if(h){let o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(A,c),o.drawText(i,r,s)}},MultiLineString:function(t,i,n,r,s){let o=n.getStroke();if(o){let a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(i,r,s)}let a=n.getText();if(a&&a.getText()){let o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(a),o.drawText(i,r,s)}},MultiPolygon:function(t,i,n,r,s){let o=n.getFill(),a=n.getStroke();if(a||o){let l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,a),l.drawMultiPolygon(i,r,s)}let l=n.getText();if(l&&l.getText()){let o=t.getBuilder(n.getZIndex(),"Text");o.setTextStyle(l),o.drawText(i,r,s)}},GeometryCollection:function(t,i,n,r,s,o){let a,l,A=i.getGeometriesArray();for(a=0,l=A.length;a<l;++a)(0,df[A[a].getType()])(t,A[a],n,r,s,o)},Circle:function(t,i,n,r,s){let o=n.getFill(),a=n.getStroke();if(o||a){let l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(o,a),l.drawCircle(i,r,s)}let l=n.getText();if(l&&l.getText()){let s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(l),s.drawText(i,r)}}};function dp(t,i){return parseInt(te(t),10)-parseInt(te(i),10)}function dm(t,i){let n=.5*t/i;return n*n}function d_(t,i,n,r,s,o,a,l){let A=[],h=n.getImage();if(h){let t=!0,i=h.getImageState();i==sc.LOADED||i==sc.ERROR?t=!1:i==sc.IDLE&&h.load(),t&&A.push(h.ready())}let c=n.getFill();c&&c.loading()&&A.push(c.ready());let u=A.length>0;return u&&Promise.all(A).then(()=>s(null)),function(t,i,n,r,s,o,a){let l=n.getGeometryFunction()(i);if(!l)return;let A=l.simplifyTransformed(r,s);n.getRenderer()?function t(i,n,r,s,o){if("GeometryCollection"==n.getType()){let a=n.getGeometries();for(let n=0,l=a.length;n<l;++n)t(i,a[n],r,s,o);return}i.getBuilder(r.getZIndex(),"Default").drawCustom(n,s,r.getRenderer(),r.getHitDetectionRenderer(),o)}(t,A,n,i,a):(0,df[A.getType()])(t,A,n,i,a,o)}(t,i,n,r,o,a,l),u}var dy=class extends ok{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=tq(),this.wrappedRenderedExtent_=tq(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,i,n){let r=i.extent,s=i.viewState,o=s.center,a=s.resolution,l=s.projection,A=s.rotation,h=l.getExtent(),c=this.getLayer().getSource(),u=this.getLayer().getDeclutter(),d=i.pixelRatio,g=i.viewHints,f=!(g[tB.ANIMATING]||g[tB.INTERACTING]),p=this.context,m=Math.round(es(r)/a*d),_=Math.round(ee(r)/a*d),y=c.getWrapX()&&l.canWrapX(),w=y?es(h):null,v=y?Math.ceil((r[2]-h[2])/w)+1:1,b=y?Math.floor((r[0]-h[0])/w):0;do{let r=this.getRenderTransform(o,a,0,d,m,_,b*w);i.declutter&&(r=r.slice(0)),t.execute(p,[p.canvas.width,p.canvas.height],r,A,f,void 0===n?dA:n?dh:dc,n?u&&i.declutter[u]:void 0)}while(++b<v)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=nL(this.context.canvas.width,this.context.canvas.height,oD))}resetDrawContext_(){if(1!==this.opacity_&&this.targetContext_){let t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,nM(this.context),oD.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,i){let n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;let r=t.viewState;this.prepareContainer(t,i);let s=this.context,o=this.replayGroup_,a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(rx.PRERENDER)||this.getLayer().hasListener(rx.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(s,t);let l=r.projection;if(this.clipped_=!1,a&&n.extent&&this.clipping){var A,h;let i=(A=n.extent,h=0,A);a=eo(i,t.extent),this.clipped_=a&&!tW(i,t.extent),this.clipped_&&this.clipUnrotated(s,t,i)}return a&&this.renderWorlds(o,t,!this.getLayer().getDeclutter()&&void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(i=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let t=this.frameState.size.slice(),i=this.renderedCenter_,n=this.renderedResolution_,r=this.renderedRotation_,s=this.renderedProjection_,o=this.wrappedRenderedExtent_,a=this.getLayer(),l=[],A=.5*t[0],h=.5*t[1];l.push(this.getRenderTransform(i,n,r,.5,A,h,0).slice());let c=a.getSource(),u=s.getExtent();if(c.getWrapX()&&s.canWrapX()&&!tW(u,o)){let t,s=o[0],a=es(u),c=0;for(;s<u[0];)t=a*--c,l.push(this.getRenderTransform(i,n,r,.5,A,h,t).slice()),s+=a;for(c=0,s=o[2];s>u[2];)t=a*++c,l.push(this.getRenderTransform(i,n,r,.5,A,h,t).slice()),s-=a}let d=iy();this.hitDetectionImageData_=function(t,i,n,r,s,o,a,l,A){var h;let c=(A&&(h=0),s),u=nL(.5*t[0],.5*t[1]);u.imageSmoothingEnabled=!1;let d=u.canvas,g=new dg(u,.5,s,null,a,l,A?ig(iy(),A):null),f=n.length,p=Math.floor(0xffffff/f),m={};for(let t=1;t<=f;++t){let i=n[t-1],s=i.getStyleFunction()||r;if(!s)continue;let a=s(i,o);if(!a)continue;Array.isArray(a)||(a=[a]);let l=(t*p).toString(16).padStart(7,"#00000");for(let t=0,n=a.length;t<n;++t){let n=a[t],r=n.getGeometryFunction()(i);if(!r||!eo(c,r.getExtent()))continue;let s=n.clone(),o=s.getFill();o&&o.setColor(l);let A=s.getStroke();A&&(A.setColor(l),A.setLineDash(null)),s.setText(void 0);let h=n.getImage();if(h){let t=h.getImageSize();if(!t)continue;let i=nL(t[0],t[1],void 0,{alpha:!1}),n=i.canvas;i.fillStyle=l,i.fillRect(0,0,n.width,n.height),s.setImage(new sG({img:n,anchor:h.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}let u=s.getZIndex()||0,d=m[u];d||(d={},m[u]=d,d.Polygon=[],d.Circle=[],d.LineString=[],d.Point=[]);let g=r.getType();if("GeometryCollection"===g){let t=r.getGeometriesArrayRecursive();for(let i=0,n=t.length;i<n;++i){let n=t[i];d[n.getType().replace("Multi","")].push(n,s)}}else d[g.replace("Multi","")].push(r,s)}}let _=Object.keys(m).map(Number).sort(O);for(let t=0,n=_.length;t<n;++t){let n=m[_[t]];for(let t in n){let r=n[t];for(let t=0,n=r.length;t<n;t+=2){g.setStyle(r[t+1]);for(let n=0,s=i.length;n<s;++n)g.setTransform(i[n]),g.drawGeometry(r[t])}}}return u.getImageData(0,0,d.width,d.height)}(t,l,this.renderedFeatures_,a.getStyleFunction(),o,n,r,dm(n,this.renderedPixelRatio_),d?s:null)}i(function(t,i,n){let r=[];if(n){let s=Math.floor(.5*Math.round(t[0])),o=Math.floor(.5*Math.round(t[1])),a=(tI(s,0,n.width-1)+tI(o,0,n.height-1)*n.width)*4,l=n.data[a],A=n.data[a+1],h=n.data[a+2]+256*(A+256*l),c=Math.floor(0xffffff/i.length);h&&h%c==0&&r.push(i[h/c-1])}return r}(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,i,n,r,s){if(!this.replayGroup_)return;let o=i.viewState.resolution,a=i.viewState.rotation,l=this.getLayer(),A={},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,n,function(t,i,n){let o=te(t),a=A[o];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return A[o]=!0,s.splice(s.lastIndexOf(a),1),r(t,l,i);a.geometry=i,a.distanceSq=n}}else{if(0===n)return A[o]=!0,r(t,l,i);s.push(A[o]={feature:t,layer:l,geometry:i,distanceSq:n,callback:r})}},h?i.declutter?.[h]?.all().map(t=>t.value):null)}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){var i,n,r,s;let o,a=this.getLayer(),l=a.getSource();if(!l)return!1;let A=t.viewHints[tB.ANIMATING],h=t.viewHints[tB.INTERACTING],c=a.getUpdateWhileAnimating(),u=a.getUpdateWhileInteracting();if(this.ready&&!c&&A||!u&&h)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let d=t.extent,g=t.viewState,f=g.projection,p=g.resolution,m=t.pixelRatio,_=a.getRevision(),y=a.getRenderBuffer(),w=a.getRenderOrder();void 0===w&&(w=dp);let v=g.center.slice(),b=tV(d,y*p),C=b.slice(),x=[b.slice()],E=f.getExtent();if(l.getWrapX()&&f.canWrapX()&&!tW(E,t.extent)){let t=es(E),i=Math.max(es(b)/2,t);b[0]=E[0]-i,b[2]=E[2]+i,ew(v,f);let n=eA(x[0],f);n[0]<E[0]&&n[2]<E[2]?x.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>E[0]&&n[2]>E[2]&&x.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==_&&this.renderedRenderOrder_==w&&!!t.declutter===this.renderedFrameDeclutter_&&tW(this.wrappedRenderedExtent_,b))return N(this.renderedExtent_,C)||(this.hitDetectionImageData_=null,this.renderedExtent_=C),this.renderedCenter_=v,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let B=new u6(.5*p/m,b,p,m),S=iy();if(S){for(let t=0,s=x.length;t<s;++t){let s=(i=x[t],n=0,i);l.loadFeatures(s,(r=0,p),S)}o=ig(S,f)}else for(let t=0,i=x.length;t<i;++t)l.loadFeatures(x[t],p,f);let I=dm(p,m),L=!0,F=(t,i)=>{let n,r=t.getStyleFunction()||a.getStyleFunction();if(r&&(n=r(t,p)),n){let r=this.renderFeature(t,I,n,B,o,this.getLayer().getDeclutter(),i);L=L&&!r}},M=(s=0,b),T=l.getFeaturesInExtent(M);w&&T.sort(w);for(let t=0,i=T.length;t<i;++t)F(T[t],t);this.renderedFeatures_=T,this.ready=L;let R=B.finish(),O=new dd(b,p,m,l.getOverlaps(),R,a.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=p,this.renderedRevision_=_,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=C,this.wrappedRenderedExtent_=b,this.renderedCenter_=v,this.renderedProjection_=f,this.renderedPixelRatio_=m,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,i,n,r,s,o,a){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let A=0,h=n.length;A<h;++A)l=d_(r,t,n[A],i,this.boundHandleStyleImageChange_,s,o,a)||l;else l=d_(r,t,n,i,this.boundHandleStyleImageChange_,s,o,a);return l}},dw=class extends oh{constructor(t){super(t)}createRenderer(){return new dy(this)}};function dv(t,i){return function(n,r,s,o,a){!function(t,i,n,r,s,o,a){let l=new XMLHttpRequest;l.open("GET","function"==typeof t?t(n,r,s):t,!0),"arraybuffer"==i.getType()&&(l.responseType="arraybuffer"),l.withCredentials=!1,l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){let t=i.getType();try{let r;"text"==t||"json"==t?r=l.responseText:"xml"==t?r=l.responseXML||l.responseText:"arraybuffer"==t&&(r=l.response),r?o(i.readFeatures(r,{extent:n,featureProjection:s}),i.readProjection(r)):a()}catch{a()}}else a()},l.onerror=a,l.send()}(t,i,n,r,s,(t,i)=>{this.addFeatures(t),void 0!==o&&o(t)},()=>{this.changed(),void 0!==a&&a()})}}function db(t,i){return[[-1/0,-1/0,1/0,1/0]]}const dC=iE();class dx{constructor(t,i,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=i,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){var t,i;return this.extent_||(this.extent_="Point"===this.type_?tJ(this.flatCoordinates_):(t=this.flatCoordinates_,i=this.flatCoordinates_.length,t5(tZ(void 0),t,0,i,2))),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let t=t7(this.getExtent());this.flatInteriorPoints_=i8(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let t=function(t,i){let n,r=[],s=0,o=0;for(let a=0,l=i.length;a<l;++a){let l=i[a],A=nr(t,s,l,2);if(void 0===n&&(n=A),A===n)r.push(i.slice(o,a+1));else{if(0===r.length)continue;r[r.length-1].push(i[o])}o=a+1,s=l}return r}(this.flatCoordinates_,this.ends_),i=uK(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=i7(this.flatCoordinates_,0,t,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=uQ(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let t=this.flatCoordinates_,i=0,n=this.ends_;for(let r=0,s=n.length;r<s;++r){let s=n[r],o=uQ(t,i,s,2,.5);k(this.flatMidpoints_,o),i=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,i){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){let i=(t=io(t)).getExtent(),n=t.getWorldExtent();if(i&&n){let t=ee(n)/ee(i);iS(dC,n[0],n[3],t,-t,0,0,0),iM(this.flatCoordinates_,0,this.flatCoordinates_.length,2,dC,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new dx(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=G((t,i)=>{let n;if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),i&&this.simplifiedGeometry_.applyTransform(i);let r=this.simplifiedGeometry_.getFlatCoordinates();switch(this.type_){case"LineString":r.length=iJ(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),n=[r.length];break;case"MultiLineString":n=[],r.length=i0(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,n);break;case"Polygon":n=[],r.length=i2(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,n)}return n&&(this.simplifiedGeometry_=new dx(this.type_,r,n,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}dx.prototype.getFlatCoordinates=dx.prototype.getOrientedFlatCoordinates;var dE=class{constructor(t){this.rbush_=new(E(rS))(t),this.items_={}}insert(t,i){let n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};this.rbush_.insert(n),this.items_[te(i)]=n}load(t,i){let n=Array(i.length);for(let r=0,s=i.length;r<s;r++){let s=t[r],o=i[r],a={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:o};n[r]=a,this.items_[te(o)]=a}this.rbush_.load(n)}remove(t){let i=te(t),n=this.items_[i];return delete this.items_[i],null!==this.rbush_.remove(n)}update(t,i){let n=this.items_[te(i)];t0([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(i),this.insert(t,i))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(i).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,i){return this.forEach_(this.getInExtent(t),i)}forEach_(t,i){let n;for(let r=0,s=t.length;r<s&&!(n=i(t[r]));r++);return n}isEmpty(){return z(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let i=this.rbush_.toJSON();return tX(i.minX,i.minY,i.maxX,i.maxY,t)}concat(t){for(let i in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[i]=t.items_[i]}},dB={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class dS extends K{constructor(t,i,n){super(t),this.feature=i,this.features=n}}var dI=class extends o5{constructor(t){let i,n;t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=H,this.format_=t.format||null,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(tb(this.format_,"`format` must be set when `url` is set"),this.loader_=dv(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:db;let r=void 0===t.useSpatialIndex||t.useSpatialIndex;this.featuresRtree_=r?new dE:null,this.loadedExtentsRtree_=new dE,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?n=t.features:t.features&&(n=(i=t.features).getArray()),r||void 0!==i||(i=new to(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let i=te(t);if(!this.addToIndex_(i,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(i,t);let n=t.getGeometry();if(n){let i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new dS(dB.ADDFEATURE,t))}setupChangeEvents_(t,i){i instanceof dx||(this.featureChangeKeys_[t]=[W(i,T.CHANGE,this.handleFeatureChange_,this),W(i,M.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,i){let n=!0;if(void 0!==i.getId()){let t=String(i.getId());if(t in this.idIndex_)if(i instanceof dx){let r=this.idIndex_[t];r instanceof dx?Array.isArray(r)?r.push(i):this.idIndex_[t]=[r,i]:n=!1}else n=!1;else this.idIndex_[t]=i}return n&&(tb(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=i),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let i=[],n=[],r=[];for(let i=0,r=t.length;i<r;i++){let r=t[i],s=te(r);this.addToIndex_(s,r)&&n.push(r)}for(let t=0,s=n.length;t<s;t++){let s=n[t],o=te(s);this.setupChangeEvents_(o,s);let a=s.getGeometry();if(a){let t=a.getExtent();i.push(t),r.push(s)}else this.nullGeometryFeatures_[o]=s}if(this.featuresRtree_&&this.featuresRtree_.load(i,r),this.hasListener(dB.ADDFEATURE))for(let t=0,i=n.length;t<i;t++)this.dispatchEvent(new dS(dB.ADDFEATURE,n[t]))}bindFeaturesCollection_(t){let i=!1;this.addEventListener(dB.ADDFEATURE,function(n){i||(i=!0,t.push(n.feature),i=!1)}),this.addEventListener(dB.REMOVEFEATURE,function(n){i||(i=!0,t.remove(n.feature),i=!1)}),t.addEventListener(F.ADD,t=>{i||(i=!0,this.addFeature(t.element),i=!1)}),t.addEventListener(F.REMOVE,t=>{i||(i=!0,this.removeFeature(t.element),i=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(Y);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(let t in this.featuresRtree_.forEach(t=>{this.removeFeatureInternal(t)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let i=new dS(dB.CLEAR);this.dispatchEvent(i),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,i){let n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(n){let r=n.getGeometry();if(r instanceof dx||r.intersectsCoordinate(t))return i(n)})}forEachFeatureInExtent(t,i){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,i);this.featuresCollection_&&this.featuresCollection_.forEach(i)}forEachFeatureIntersectingExtent(t,i){return this.forEachFeatureInExtent(t,function(n){let r=n.getGeometry();if(r instanceof dx||r.intersectsExtent(t)){let t=i(n);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),z(this.nullGeometryFeatures_)||k(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let i=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){i.push(t)}),i}getFeaturesInExtent(t,i){return this.featuresRtree_?i&&i.canWrapX()&&this.getWrapX()?[].concat(...eh(t,i).map(t=>this.featuresRtree_.getInExtent(t))):this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,i){let n=t[0],r=t[1],s=null,o=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return i=i||U,this.featuresRtree_.forEachInExtent(l,function(t){if(i(t)){let i=t.getGeometry(),A=a;if((a=i instanceof dx?0:i.closestPointXY(n,r,o,a))<A){s=t;let i=Math.sqrt(a);l[0]=n-i,l[1]=r-i,l[2]=n+i,l[3]=r+i}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let i=this.idIndex_[t.toString()];return void 0!==i?i:null}getFeatureByUid(t){let i=this.uidIndex_[t];return void 0!==i?i:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let i=t.target,n=te(i),r=i.getGeometry();if(r){let t=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,i)):this.featuresRtree_&&this.featuresRtree_.update(t,i)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[n]=i);let s=i.getId();if(void 0!==s){let t=s.toString();this.idIndex_[t]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[t]=i)}else this.removeFromIdIndex_(i),this.uidIndex_[n]=i;this.changed(),this.dispatchEvent(new dS(dB.CHANGEFEATURE,i))}hasFeature(t){let i=t.getId();return void 0!==i?i in this.idIndex_:te(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&z(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,i,n){let r=this.loadedExtentsRtree_,s=this.strategy_(t,i,n);for(let t=0,o=s.length;t<o;++t){let o=s[t];r.forEachInExtent(o,function(t){return tW(t.extent,o)})||(++this.loadingExtentsCount_,this.dispatchEvent(new dS(dB.FEATURESLOADSTART)),this.loader_.call(this,o,i,n,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new dS(dB.FEATURESLOADEND,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new dS(dB.FEATURESLOADERROR))}),r.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let i=this.loadedExtentsRtree_,n=i.forEachInExtent(t,function(i){if(t0(i.extent,t))return i});n&&i.remove(n)}removeFeatures(t){let i=!1;for(let n=0,r=t.length;n<r;++n)i=this.removeFeatureInternal(t[n])||i;i&&this.changed()}removeFeature(t){t&&this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let i=te(t);if(!(i in this.uidIndex_))return!1;i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t);let n=this.featureChangeKeys_[i];n?.forEach(Y),delete this.featureChangeKeys_[i];let r=t.getId();if(void 0!==r){let i=r.toString(),n=this.idIndex_[i];n===t?delete this.idIndex_[i]:Array.isArray(n)&&(n.splice(n.indexOf(t),1),1===n.length&&(this.idIndex_[i]=n[0]))}return delete this.uidIndex_[i],this.hasListener(dB.REMOVEFEATURE)&&this.dispatchEvent(new dS(dB.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(let i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i];break}}setLoader(t){this.loader_=t}setUrl(t){tb(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(dv(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}};const dL={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class dF extends K{constructor(t,i){super(t),this.feature=i}}function dM(t,i){return tF(t[0],t[1],i[0],i[1])}function dT(t,i){let n=t.length;return i<0?t[i+n]:i>=n?t[i-n]:t[i]}function dR(t,i,n){let r,s;i<n?(r=i,s=n):(r=n,s=i);let o=Math.ceil(r),a=Math.floor(s);if(o>a)return dM(dN(t,r),dN(t,s));let l=0;r<o&&(l+=dM(dN(t,r),dT(t,o))),a<s&&(l+=dM(dT(t,a),dN(t,s)));for(let i=o;i<a-1;++i)l+=dM(dT(t,i),dT(t,i+1));return l}const dO={index:-1,endIndex:NaN};function dD(t,i,n,r){let s=t[0],o=t[1];for(let t=0,a=i.length-1;t<a;++t){let a=dk(s,o,i[t],i[t+1]);if(0===a.squaredDistance){let s=t+a.along;r.push({coordinates:i,ring:n,startIndex:s,endIndex:s});return}}}const dP={along:0,squaredDistance:0};function dk(t,i,n,r){let s=n[0],o=n[1],a=r[0],l=r[1],A=a-s,h=l-o,c=0,u=s,d=o;return(0!==A||0!==h)&&(c=tI(((t-s)*A+(i-o)*h)/(A*A+h*h),0,1),u+=A*c,d+=h*c),dP.along=c,dP.squaredDistance=tO(tF(t,i,u,d),10),dP}function dN(t,i){let n=t.length,r=Math.floor(i),s=i-r;r>=n?r-=n:r<0&&(r+=n);let o=r+1;o>=n&&(o-=n);let a=t[r],l=a[0],A=a[1],h=t[o],c=h[0]-l,u=h[1]-A;return[l+c*s,A+u*s]}function dU(t,i){return function(n,r,s){let o=iv(n[0],s),a=iv(n[n.length-1],s),l=Math.sqrt(em(o,a));r=r||nc(new uk(o),t);let A=i;if(!i&&0!==i){let t=a[0]-o[0];A=Math.atan2(a[1]-o[1],t)}nu(r,o,l,A);let h=iy();return h&&r.transform(s,h),r}}var dQ=class extends n6{constructor(t){t.stopDown||(t.stopDown=Q),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw Error("Invalid type: "+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:U,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){let t=this.mode_;if("Circle"===t)i=(t,i,n)=>{let r=i||new uk([NaN,NaN]),s=iv(t[0],n),o=em(s,iv(t[t.length-1],n));r.setCenterAndRadius(s,Math.sqrt(o),this.geometryLayout_);let a=iy();return a&&r.transform(n,a),r};else{let n;"Point"===t?n=i4:"LineString"===t?n=uV:"Polygon"===t&&(n=nA),i=(i,r,s)=>(r?"Polygon"===t?i[0].length?r.setCoordinates([i[0].concat([i[0][0]])],this.geometryLayout_):r.setCoordinates([],this.geometryLayout_):r.setCoordinates(i,this.geometryLayout_):r=new n(i,this.geometryLayout_),r)}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new dw({source:new dI({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:function(){let t=sW();return function(i,n){return t[i.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:nZ,this.freehandCondition_,t.freehand?this.freehandCondition_=U:this.freehandCondition_=t.freehandCondition?t.freehandCondition:n1,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(nQ,this.updateState_)}setTrace(t){let i;i=t?!0===t?U:t:Q,this.traceCondition_=i}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===T.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let i=t.type===tA.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&t.type===tA.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===tA.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===tA.POINTERDOWN?n=!1:i&&2>this.getPointerCount()?(n=t.type===tA.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===tA.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===tA.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return(this.shouldHandle_=!this.freehand_,this.freehand_)?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new tl(tA.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))},this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();let i=this.getMap(),n=tG([i.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),i.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),r=this.traceSource_.getFeaturesInExtent(n);if(0===r.length)return;let s=function(t,i){let n=[];for(let r=0;r<i.length;++r)!function t(i,n,r){if(n instanceof uV)return void dD(i,n.getCoordinates(),!1,r);if(n instanceof uz){let t=n.getCoordinates();for(let n=0,s=t.length;n<s;++n)dD(i,t[n],!1,r);return}if(n instanceof nA){let t=n.getCoordinates();for(let n=0,s=t.length;n<s;++n)dD(i,t[n],!0,r);return}if(n instanceof uj){let t=n.getCoordinates();for(let n=0,s=t.length;n<s;++n){let s=t[n];for(let t=0,n=s.length;t<n;++t)dD(i,s[t],!0,r)}return}if(n instanceof uN){let s=n.getGeometries();for(let n=0;n<s.length;++n)t(i,s[n],r);return}}(t,i[r].getGeometry(),n);return n}(t.coordinate,r);s.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:s,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,i){let n=t.startIndex<=t.endIndex;n===t.startIndex<=i?n&&i>t.endIndex||!n&&i<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,i):(n&&i<t.endIndex||!n&&i>t.endIndex)&&this.removeTracedCoordinates_(i,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,i))}removeTracedCoordinates_(t,i){if(t===i)return;let n=0;if(t<i){let r=Math.floor(i);r===i&&(r-=1),n=r-Math.ceil(t)+1}else{let r=Math.ceil(i);r===i&&(r+=1),n=Math.floor(t)-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(t,i,n){if(i===n)return;let r=[];if(i<n){let s=Math.ceil(i),o=Math.floor(n);o===n&&(o-=1);for(let i=s;i<=o;++i)r.push(dT(t.coordinates,i))}else{let s=Math.floor(i),o=Math.ceil(n);o===n&&(o+=1);for(let i=s;i>=o;--i)r.push(dT(t.coordinates,i))}r.length&&this.appendCoordinates(r)}updateTrace_(t){let i=this.traceState_;if(!i.active||-1===i.targetIndex&&e_(i.startPx,t.pixel)<this.snapTolerance_)return;let n=function(t,i,n,r){let s=t[0],o=t[1],a=1/0,l=-1,A=NaN;for(let t=0;t<i.targets.length;++t){let n,r=i.targets[t],h=r.coordinates,c=1/0;for(let t=0;t<h.length-1;++t){let i=dk(s,o,h[t],h[t+1]);i.squaredDistance<c&&(c=i.squaredDistance,n=t+i.along)}c<a&&(a=c,r.ring&&i.targetIndex===t&&(r.endIndex>r.startIndex?n<r.startIndex&&(n+=h.length):r.endIndex<r.startIndex&&n>r.startIndex&&(n-=h.length)),A=n,l=t)}let h=i.targets[l],c=h.ring;if(i.targetIndex===l&&c){let t=dN(h.coordinates,A);e_(n.getPixelFromCoordinate(t),i.startPx)>r&&(c=!1)}if(c){let t=h.coordinates,i=t.length,n=h.startIndex,r=A;if(n<r){let s=dR(t,n,r);dR(t,n,r-i)<s&&(A-=i)}else{let s=dR(t,n,r);dR(t,n,r+i)<s&&(A+=i)}}return dO.index=l,dO.endIndex=A,dO}(t.coordinate,i,this.getMap(),this.snapTolerance_);if(i.targetIndex!==n.index){if(-1!==i.targetIndex){let t=i.targets[i.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}let t=i.targets[n.index];this.addTracedCoordinates_(t,t.startIndex,n.endIndex)}else{let t=i.targets[i.targetIndex];this.addOrRemoveTracedCoordinates_(t,n.endIndex)}i.targetIndex=n.index;let r=i.targets[i.targetIndex];r.endIndex=n.endIndex;let s=dN(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let i=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);let n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){let r=!this.finishCoordinate_;r&&this.startDrawing_(t.coordinate),!r&&this.freehand_?this.finishDrawing():this.freehand_||r&&"Point"!==this.mode_||(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),i=!1}else this.freehand_&&this.abortDrawing()}return!i&&this.stopClick_&&t.preventDefault(),i}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){let i=this.downPx_,n=t.pixel,r=i[0]-n[0],s=i[1]-n[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_)return void this.createOrUpdateSketchPoint_(t.coordinate.slice());this.updateTrace_(t),this.modifyDrawing_(t.coordinate)}atFinish_(t,i){let n=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_],o=this.mode_;if("Point"===o)n=!0;else if("Circle"===o)n=2===this.sketchCoords_.length;else if("LineString"===o)r=!i&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){let t=this.sketchCoords_;r=t[0].length>this.minPoints_,s=[t[0][0],t[0][t[0].length-2]],s=i?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(r){let i=this.getMap();for(let r=0,o=s.length;r<o;r++){let o=s[r],a=i.getPixelFromCoordinate(o),l=t[0]-a[0],A=t[1]-a[1];if(n=Math.sqrt(l*l+A*A)<=(this.freehand_?1:this.snapTolerance_)){this.finishCoordinate_=o;break}}}}return n}createOrUpdateSketchPoint_(t){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new uE(new i4(t)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new uE);let i=t.getLinearRing(0),n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(i.getLayout(),i.getFlatCoordinates()),n.changed()):(n=new uV(i.getFlatCoordinates(),i.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(t){let i=this.getMap().getView().getProjection(),n=ik(this.geometryLayout_);for(;t.length<n;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new uE(new uV(this.sketchLineCoords_)));let r=this.geometryFunction_(this.sketchCoords_,void 0,i);this.sketchFeature_=new uE,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new dF(dL.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){let i,n,r=this.getMap(),s=this.sketchFeature_.getGeometry(),o=r.getView().getProjection(),a=ik(this.geometryLayout_);for(;t.length<a;)t.push(0);"Point"===this.mode_?n=this.sketchCoords_:"Polygon"===this.mode_?(n=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(r.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):n=(i=this.sketchCoords_)[i.length-1],n[0]=t[0],n[1]=t[1],this.geometryFunction_(this.sketchCoords_,s,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(t),"Polygon"===s.getType()&&"Polygon"!==this.mode_?this.createOrUpdateCustomSketchLine_(s):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(t){let i,n,r=this.sketchFeature_.getGeometry(),s=this.getMap().getView().getProjection(),o=this.mode_;return("LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),(n=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?n.pop():i=!0),n.push(t.slice()),this.geometryFunction_(n,r,s)):"Polygon"===o&&((n=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?n.pop():i=!0),n.push(t.slice()),i&&(this.finishCoordinate_=n[0]),this.geometryFunction_(this.sketchCoords_,r,s)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),i)?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;let i=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<t;++s){let t;if("LineString"===r||"Circle"===r){if((t=this.sketchCoords_).splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();let i=this.finishCoordinate_.slice();t[t.length-1]=i,this.createOrUpdateSketchPoint_(i)}this.geometryFunction_(t,i,n),"Polygon"===i.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(i)}else if("Polygon"===r){(t=this.sketchCoords_[0]).splice(-2,1);let r=this.sketchLine_.getGeometry();if(t.length>=2){let i=t[t.length-2].slice();t[t.length-1]=i,this.createOrUpdateSketchPoint_(i)}r.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,i,n)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){let t=this.abortDrawing_();if(!t)return null;let i=this.sketchCoords_,n=t.getGeometry(),r=this.getMap().getView().getProjection();return"LineString"===this.mode_?(i.pop(),this.geometryFunction_(i,n,r)):"Polygon"===this.mode_&&(i[0].pop(),this.geometryFunction_(i,n,r),i=n.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new ua([i])):"MultiLineString"===this.type_?t.setGeometry(new uz([i])):"MultiPolygon"===this.type_&&t.setGeometry(new uj([i])),this.dispatchEvent(new dF(dL.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;let t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){let t=this.abortDrawing_();t&&this.dispatchEvent(new dF(dL.DRAWABORT,t))}appendCoordinates(t){let i,n=this.mode_,r=!this.sketchFeature_;if(r&&this.startDrawing_(t[0]),"LineString"===n||"Circle"===n)i=this.sketchCoords_;else{if("Polygon"!==n)return;i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}r&&i.shift(),i.pop();for(let i=0;i<t.length;i++)this.addToDrawing_(t[i]);let s=t[t.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(t){let i=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();let n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new uE(new i4(n)),this.updateSketchFeatures_(),this.dispatchEvent(new dF(dL.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){let t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);let i=this.overlay_.getSource();i.clear(!0),i.addFeatures(t)}updateState_(){let t=this.getMap(),i=this.getActive();t&&i||this.abortDrawing(),this.overlay_.setMap(i?t:null)}};Object.freeze(["Square","Rectangle","Circle"]);const dH=Object.freeze({Square:{type:"Circle",callback:dU,parameters:4},Rectangle:{type:"Circle",callback:function(){return function(t,i,n){let r=tG([t[0],t[t.length-1]].map(function(t){return iv(t,n)})),s=[[t6(r),t8(r),er(r),en(r),t6(r)]];i?i.setCoordinates(s):i=new nA(s);let o=iy();return o&&i.transform(n,o),i}},parameters:void 0},Circle:{type:"Circle",callback:dU,parameters:32}}),dG=Object.freeze({Circle:"Circle",LinearRing:"LinearRing",LineString:"LineString",MultiLineString:"MultiLineString",MultiPoint:"MultiPoint",MultiPolygon:"MultiPolygon",Point:"Point",Polygon:"Polygon",Rectangle:"Rectangle",Square:"Square"}),dV=function(t){if(!(t in dG))return["Polygon",void 0];if(!(t in dH))return[t,void 0];let i=dH[t],n=i.type;return[n,(0,i.callback)(i.parameters)]},dz="feature-manager.js";class dK extends AX{static #tn;static async initAsync(t={}){return A0.logDebug(dz,"initAsync","Initialization started"),new Promise(t=>{t({filename:dz,result:!0})})}static setMap(t){this.#tn=t}static getName(){return dz}static #tr(t,i,n={}){return{oltb:{lon:t.lon,lat:t.lat,type:i,infoWindow:t.infoWindow,title:t.title,description:t.description,settings:{shouldReplaceHashtag:t.settings.shouldReplaceHashtag},...n,icon:{key:t.icon.key,width:t.icon.width,height:t.icon.height,rotation:t.icon.rotation,fill:t.icon.fill,stroke:t.icon.stroke,strokeWidth:t.icon.strokeWidth},label:{text:t.label.text,font:t.label.font,fill:t.label.fill,stroke:t.label.stroke,strokeWidth:t.label.strokeWidth,useEllipsisAfter:t.label.useEllipsisAfter,useUpperCase:t.label.useUpperCase}}}}static #ts(t){this.applyDrawingProperties(t),t.setStyle(ux.getDefaultDrawingStyle())}static #to(t){this.applyMeasurementProperties(t),this.#tn.addOverlay(this.getTooltip(t)),t.setStyle(ux.getDefaultMeasurementStyle())}static #ta(t){return[dG.Circle,dG.LineString,dG.LinearRing,dG.MultiLineString,dG.MultiPolygon,dG.Polygon,dG.Rectangle,dG.Square].includes(t)}static getType(t){return E(an).get(t.getProperties(),["oltb","type"],void 0)}static isWindBarbType(t){return E(an).get(t.getProperties(),["oltb","type"],void 0)===ud.type.windBarb}static isIconMarkerType(t){return E(an).get(t.getProperties(),["oltb","type"],void 0)===ud.type.iconMarker}static isMeasurementType(t){return E(an).get(t.getProperties(),["oltb","type"],void 0)===ud.type.measurement}static shouldHighlightOnHover(t){return!0===E(an).get(t.getProperties(),["oltb","settings","shouldHighlightOnHover"],void 0)}static hasInfoWindow(t){return E(an).has(t.getProperties(),["oltb","infoWindow"])}static getInfoWindow(t){return E(an).get(t.getProperties(),["oltb","infoWindow"],void 0)}static hasTooltip(t){return E(an).has(t.getProperties(),["oltb","tooltip"])}static getTooltip(t){return E(an).get(t.getProperties(),["oltb","tooltip"],void 0)}static generateWindBarb(t={}){let i=new uE({geometry:new i4(ic([(t=E(an).merge(E(an).cloneDeep(uM),t)).lon,t.lat]))});return i.setProperties(this.#tr(t,ud.type.windBarb)),i}static generateIconMarker(t={}){let i=new uE({geometry:new i4(ic([(t=E(an).merge(E(an).cloneDeep(uT),t)).lon,t.lat]))});return i.setProperties(this.#tr(t,ud.type.iconMarker,{marker:{width:t.marker.width,radius:t.marker.radius,fill:t.marker.fill,stroke:t.marker.stroke,strokeWidth:t.marker.strokeWidth}})),i}static isSameFeature(t,i){return!!t&&!!i&&!!t.ol_uid&&!!i.ol_uid&&t.ol_uid===i.ol_uid}static deepCopyVectorFeatureWithStyle(t,i){let n=te(t),r=t.clone(),s=JSON.parse(JSON.stringify(JSON.decycle(t.getProperties()),uB));return s.geometry=r.getGeometry(),r.setProperties(s,!0),r.setStyle(i[n]),this.isMeasurementType(t)&&this.applyMeasurementProperties(r),r}static applyMeasurementProperties(t){this.hasTooltip(t)&&this.#tn.removeOverlay(this.getTooltip(t));let i=uF();t.setProperties({oltb:{type:ud.type.measurement,tooltip:i.getOverlay()}});let n=t.getGeometry(),r=uO(n),s=uR(n);i.setPosition(r),i.setData(`${s.value} ${s.unit}`)}static applyDrawingProperties(t){this.hasTooltip(t)&&this.#tn.removeOverlay(this.getTooltip(t)),t.setProperties({oltb:{type:ud.type.drawing}})}static convertFeaturesTo(t,i){let n=new Map([[ud.type.drawing,this.#ts.bind(this)],[ud.type.measurement,this.#to.bind(this)]]);t.forEach(t=>{let r=n.get(i.value),s=t.getGeometry().getType();r&&this.#ta(s)?r(t):A0.logWarning(dz,"convertFeaturesTo",{info:"Unsupported format or geometry-type",format:i,type:s})})}}const dj="layer-manager.js",dW=Object.freeze({name:"",isVisible:!0,isSilent:!1,disableFeatureLayerEditButton:!1,disableFeatureLayerDownloadButton:!1,disableFeatureLayerDeleteButton:!1}),d$=Object.freeze({isVisible:!0,isSilent:!1,disableMapLayerEditButton:!1,disableMapLayerDeleteButton:!1});class dY extends AX{static #tn;static #tl;static #tA=new to;static #th={mapLayers:[],featureLayers:[]};static #tc={mapLayers:[],featureLayers:[]};static async initAsync(t={}){return A0.logDebug(dj,"initAsync","Initialization started"),new Promise(t=>{t({filename:dj,result:!0})})}static setMap(t){A0.logDebug(dj,"setMap",{info:"Handling map-queues for layers that were added before the map was ready",adding:{mapLayers:this.#th.mapLayers.length,featureLayers:this.#th.featureLayers.length}}),this.#tn=t,this.#tu(),this.#td()}static getName(){return dj}static #tu(){this.#th.mapLayers.forEach(t=>{this.#tg(t.layerWrapper,t.options)}),this.#th.mapLayers=[]}static #td(){this.#th.featureLayers.forEach(t=>{this.#tf(t.layerWrapper,t.options)}),this.#th.featureLayers=[]}static #tp(t){t.getLayer=function(){return this.layer},t.setLayer=function(t){this.layer=t},t.getName=function(){return this.name},t.setName=function(t){this.name=t},t.getId=function(){return this.id},t.setId=function(t){this.id=t}}static #tm(t){return(t=t.trim()).length||(t="New layer"),t}static #t_(t,i){for(let n=0;n<i.length;n++){let r=i[n],s=r.getLayer();if(!this.isVectorLayer(s))continue;let o=s.getSource().getFeatures();for(let i=0;i<o.length;i++)if(t===o[i])return r}}static #ty(t){this.#tn.removeLayer(t.getLayer())}static #tw(t,i){let n=i.getLayer(),r=dK.getTooltip(t);r&&(n.getVisible()?r.setMap(this.#tn):r.setMap(null))}static addFeatureToLayer(t,i,n){let r=i.getLayer(),s=r.getSource();dK.hasTooltip(t)&&this.#tn.addOverlay(dK.getTooltip(t)),s.addFeature(t),this.#tA.push(t),this.#tw(t,i),n&&!r.getVisible()&&c9.info({i18nKey:n,autoremove:!0})}static removeFeatureFromLayer(t,i){let n=i.getLayer().getSource();dK.hasTooltip(t)&&this.#tn.removeOverlay(dK.getTooltip(t)),n.removeFeature(t),this.#tA.remove(t)}static getSnapFeatures(){return this.#tA}static clearSnapFeatures(){this.#tA=new to}static isVectorLayer(t){return t instanceof dw}static isVectorSource(t){return t instanceof dI}static getLayerFromFeature(t){let i=this.getLayerWrapperFromFeature(t);if(i)return i.getLayer()}static getLayerWrapperFromFeature(t){let i;return(i=this.#t_(t,this.#tc.mapLayers))?i:i=this.#t_(t,this.#tc.featureLayers)}static #tv(t){this.#tc.mapLayers=this.#tc.mapLayers.filter(i=>i.getId()!==t.getId())}static #tb(t){let i=t.getLayer();this.isVectorLayer(i)&&i.getSource().getFeatures().forEach(t=>{this.#tA.remove(t)})}static #tg(t,i){this.#tc.mapLayers.push(t),this.#tn.addLayer(t.getLayer()),cz.dispatchCustomEvent([window],A8.custom.mapLayerAdded,{detail:{layerWrapper:t,isSilent:i.isSilent,disableMapLayerEditButton:i.disableMapLayerEditButton,disableMapLayerDeleteButton:i.disableMapLayerDeleteButton}})}static addMapLayers(t,i={}){for(let n in t)this.addMapLayer(t[n],i)}static addMapLayer(t,i={}){let n=E(an).merge(E(an).cloneDeep(d$),i);if(t.name=this.#tm(t.name),A0.logDebug(dj,"addMapLayer",t.name),this.#tp(t),t.isDynamicallyAdded||(t.isDynamicallyAdded=!1),!t.getId()){let i=un();t.setId(i)}return this.#tn?this.#tg(t,n):this.#th.mapLayers.push({layerWrapper:t,options:n}),t}static removeAllMapLayers(){this.#tc.mapLayers.forEach(t=>{this.removeMapLayer(t)})}static removeMapLayer(t,i=!1){A0.logDebug(dj,"removeMapLayer",t.getName()),this.#tv(t),this.#tb(t),this.#ty(t),cz.dispatchCustomEvent([window],A8.custom.mapLayerRemoved,{detail:{layerWrapper:t,isSilent:i}})}static hasMapLayerWithId(t){return!!this.getMapLayerById(t)}static getMapLayers(){return this.#tc.mapLayers}static getMapLayerById(t){return this.#tc.mapLayers.find(i=>i.getId()===t)}static getOLMapLayers(){let t=[];for(let i in this.#tc.mapLayers)t.push(this.#tc.mapLayers[i].getLayer());return t}static setTopMapLayerAsOnlyVisible(){this.#tc.mapLayers.forEach(t=>{t.getLayer().setVisible(!1)}),this.isMapLayersEmpty()||this.#tc.mapLayers[0].getLayer().setVisible(!0)}static getMapLayerSize(){return this.#tc.mapLayers.length}static isMapLayersEmpty(){return 0===this.getMapLayerSize()}static setMapLayerZIndex(t,i){this.getMapLayerById(t).getLayer().setZIndex(1+i)}static belongsToMapLayer(t){return!!this.#tc.mapLayers.find(i=>void 0!==i.getLayer().getSource().hasFeature&&i.getLayer().getSource().hasFeature(t))}static #tC(t){this.#tc.featureLayers=this.#tc.featureLayers.filter(i=>i.getId()!==t.getId())}static #tx(t){t.getLayer().getSource().getFeatures().forEach(t=>{this.#tA.remove(t),dK.hasTooltip(t)&&this.#tn.removeOverlay(dK.getTooltip(t))})}static #tf(t,i){this.#tc.featureLayers.push(t),this.#tn.addLayer(t.getLayer()),cz.dispatchCustomEvent([window],A8.custom.featureLayerAdded,{detail:{layerWrapper:t,isSilent:i.isSilent,disableFeatureLayerEditButton:i.disableFeatureLayerEditButton,disableFeatureLayerDownloadButton:i.disableFeatureLayerDownloadButton,disableFeatureLayerDeleteButton:i.disableFeatureLayerDeleteButton}})}static #tE(){return this.isFeatureLayersEmpty()?null:this.#tc.featureLayers[this.#tc.featureLayers.length-1]}static addFeatureLayer(t={}){let i=E(an).merge(E(an).cloneDeep(dW),t);i.name=this.#tm(i.name),A0.logDebug(dj,"addFeatureLayer",i.name);let n={id:i.id,name:i.name,sortIndex:i.sortIndex,isDynamicallyAdded:i.isDynamicallyAdded,layer:new dw({source:new dI,visible:i.isVisible,style:function(t,i){return ux.getStyle(t,i)}})};if(this.#tp(n),n.isDynamicallyAdded||(n.isDynamicallyAdded=!1),!n.getId()){let t=un();n.setId(t)}return this.setActiveFeatureLayer(n),this.#tn?this.#tf(n,i):this.#th.featureLayers.push({layerWrapper:n,options:i}),n}static removeAllFeatureLayers(){this.#tc.featureLayers.forEach(t=>{this.removeFeatureLayer(t)})}static removeFeatureLayer(t,i=!1){A0.logDebug(dj,"removeFeatureLayer",t.getName()),this.#tC(t),this.#tx(t),this.#ty(t),this.setNextActiveFeatureLayer(),cz.dispatchCustomEvent([window],A8.custom.featureLayerRemoved,{detail:{layerWrapper:t,isSilent:i}})}static getActiveFeatureLayer(t={}){return this.#tl||this.addFeatureLayer({name:t.fallback,isDynamicallyAdded:!0}),this.#tl}static setNextActiveFeatureLayer(){let t=this.#tE();this.setActiveFeatureLayer(t)}static setActiveFeatureLayer(t){this.#tl=t,cz.dispatchCustomEvent([window],A8.custom.activeFeatureLayerChange,{detail:{layerWrapper:t}})}static hasFeatureLayerWithId(t){return!!this.getFeatureLayerById(t)}static getFeatureLayers(){return this.#tc.featureLayers}static getFeatureLayerById(t){return this.#tc.featureLayers.find(i=>i.getId()===t)}static removeFeatureFromFeatureLayers(t){this.getFeatureLayers().forEach(i=>{i.getLayer().getSource().removeFeature(t)})}static getFeatureLayerSize(){return this.#tc.featureLayers.length}static isFeatureLayersEmpty(){return 0===this.getFeatureLayerSize()}static setFeatureLayerZIndex(t,i){this.getFeatureLayerById(t).getLayer().setZIndex(1e6+i)}static belongsToFeatureLayer(t){return!!this.#tc.featureLayers.find(i=>void 0!==i.getLayer().getSource().hasFeature&&i.getLayer().getSource().hasFeature(t))}}dY.addMapLayers([{id:"7b5399a8-9e57-4304-a233-cdf363c8ed93",name:"Open Street Map",layer:new oK({source:new ai({crossOrigin:"anonymous"}),visible:!0})},{id:"97485b21-6a9d-48fb-9838-645543648daa",name:"ArcGIS World Topo",layer:new oK({source:new ae({crossOrigin:"anonymous",attributions:'Tiles © <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}),visible:!1})}],{isSilent:!0});var an=I("f1q41"),dq={};dq=import.meta.resolve("4GFUf");const dX="oltb-func-btn",dZ="oltb-info-window-marker",dJ=dY.addFeatureLayer({id:"fd319a29-d2ac-4b2b-b018-dc86cff22600",name:"Wind Barbs",isVisible:!1,isSilent:!0}),d0=function(t){t.features.forEach(t=>{let i=[Number(t.geometry.coordinates[0]),Number(t.geometry.coordinates[1])],n=ey(i),r=t.properties.countryName,s=t.properties.continentName,o=E(an).random(0,40),a=Object.freeze({Europe:5,Africa:110,Antarctica:65,Asia:65,Australia:65,"Central America":210,"North America":210,"South America":210,UM:210,US:210})[s]||0,l=Date.now().toString(),A=`
            Current wind speed is ${o}m/s. The direction is ${a}deg.
        `,h={title:r,content:`
                <p>${A}</p>
                <img src="./images/placeholder-9.jpeg?cache=${l}" alt="Placeholder Image" draggable="false" />
            `,footer:`
                <span class="oltb-info-window__coordinates">${n}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${dX} ${dX}--delete oltb-tippy" title="Delete Marker" id="${dZ}-remove"></button>
                    <button class="${dX} ${dX}--crosshair oltb-tippy" title="Copy Marker Coordinates" id="${dZ}-copy-coordinates" data-oltb-coordinates="${n}"></button>
                    <button class="${dX} ${dX}--copy oltb-tippy" title="Copy Marker Text" id="${dZ}-copy-text" data-oltb-copy="${A}"></button>
                    <button class="${dX} ${dX}--layer oltb-tippy" title="Show Layer" id="${dZ}-show-layer"></button>
                </div>
            `},c=dK.generateWindBarb({lon:i[0],lat:i[1],infoWindow:h,title:r,description:A,icon:{key:o,rotation:a},label:{text:`${o}m/s`}});dJ.getLayer().getSource().addFeature(c)})};AR.get(E(dq),{responseType:"application/json",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(t=>{if(200!==t.status)throw Error("Failed to fetch local geojson",{cause:t});return JSON.parse(t.data)}).then(t=>{d0(t)}).catch(t=>{let i="Failed to load Wind Barbs layer";A0.logError("layers/Wind.js","geoJsonPromise",{message:i,error:t}),c9.error({title:"Error",message:i})});var d1={};d1=import.meta.resolve("fCY3N");const d2="oltb-func-btn",d5="oltb-info-window-marker",d4=dY.addFeatureLayer({id:"91a9a06f-7e49-4f85-a204-58dc7ab6a95e",name:"50 Airports",isVisible:!1,isSilent:!0}),d3=function(t){t.features.forEach(t=>{let i=[Number(t.geometry.coordinates[0]),Number(t.geometry.coordinates[1])],n=ey(i),r=t.properties.name,s=t.properties.location,o=t.properties.country,a=t.properties.totalPassengers,l=`
            ${r} is a airport located in ${s} in ${o}.
            Its total number of passenger is estimated to ${a}.
        `,A={title:r,content:`
                <p>${l}</p>
                <p>
                    Google has more information about <a href="//www.google.com/search?q=${r}" target="_blank" class="oltb-link">${r}</a> 
                </p>
            `,footer:`
                <span class="oltb-info-window__coordinates">${n}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${d2} ${d2}--delete oltb-tippy" title="Delete Marker" id="${d5}-remove"></button>
                    <button class="${d2} ${d2}--crosshair oltb-tippy" title="Copy Marker Coordinates" id="${d5}-copy-coordinates" data-oltb-coordinates="${n}"></button>
                    <button class="${d2} ${d2}--copy oltb-tippy" title="Copy Marker Text" id="${d5}-copy-text" data-oltb-copy="${l}"></button>
                    <button class="${d2} ${d2}--layer oltb-tippy" title="Show Layer" id="${d5}-show-layer"></button>
                </div>
            `},h=dK.generateIconMarker({lon:i[0],lat:i[1],title:r,description:l,infoWindow:A,marker:{fill:"#FCBE80FF",stroke:"#FCBE8066"},icon:{key:"airplane.filled",fill:"#6B310AFF"},label:{text:r}});d4.getLayer().getSource().addFeature(h)})};AR.get(E(d1),{responseType:"application/json",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(t=>{if(200!==t.status)throw Error("Failed to fetch local geojson",{cause:t});return JSON.parse(t.data)}).then(t=>{d3(t)}).catch(t=>{let i="Failed to load Airports layer";A0.logError("layers/Airports.js","geoJsonPromise",{message:i,error:t}),c9.error({title:"Error",message:i})});const d6="oltb-func-btn",d8="oltb-info-window-marker",d7=dY.addFeatureLayer({id:"73e8b36c-6aa2-42b9-a97d-0e8288916050",name:"Capitals",isVisible:!0,isSilent:!0}),d9=function(t){t.features.forEach(t=>{let i=[Number(t.geometry.coordinates[0]),Number(t.geometry.coordinates[1])],n=ey(i),r=t.properties.countryName,s=t.properties.countryCode,o=t.properties.capitalName,a=t.properties.continentName,l=Date.now().toString(),A=`
            ${r} is a country located in ${a}.
            Its capital is ${o} and its country code is ${s}.
        `,h={title:r,content:`
                <p>${A}</p>
                <img src="./images/placeholder-1.jpeg?cache=${l}" alt="Placeholder Image" draggable="false" />
                <p>
                    Google has more information about <a href="//www.google.com/search?q=${r}" target="_blank" class="oltb-link">${r}</a>.
                </p>
            `,footer:`
                <span class="oltb-info-window__coordinates">${n}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${d6} ${d6}--delete oltb-tippy" title="Delete Marker" id="${d8}-remove"></button>
                    <button class="${d6} ${d6}--crosshair oltb-tippy" title="Copy Marker Coordinates" id="${d8}-copy-coordinates" data-oltb-coordinates="${n}"></button>
                    <button class="${d6} ${d6}--copy oltb-tippy" title="Copy Marker Text" id="${d8}-copy-text" data-oltb-copy="${A}"></button>
                    <button class="${d6} ${d6}--layer oltb-tippy" title="Show Layer" id="${d8}-show-layer"></button>
                </div>
            `},c=Object.freeze({Europe:{fill:"#0166A5FF",stroke:"#0166A566"},Africa:{fill:"#00959AFF",stroke:"#00959A66"},Antarctica:{fill:"#007C70FF",stroke:"#007C7066"},Asia:{fill:"#2357B1FF",stroke:"#2357B166"},Australia:{fill:"#007C70FF",stroke:"#007C7066"},"Central America":{fill:"#0080C5FF",stroke:"#0080C566"},"North America":{fill:"#0080C5FF",stroke:"#0080C566"},"South America":{fill:"#0080C5FF",stroke:"#0080C566"},UM:{fill:"#0080C5FF",stroke:"#0080C566"},US:{fill:"#0080C5FF",stroke:"#0080C566"}})[a]||{fill:"#0166A5FF",stroke:"#0166A566"},u=dK.generateIconMarker({lon:i[0],lat:i[1],title:r,description:A,infoWindow:h,marker:{fill:c.fill,stroke:c.stroke},icon:{key:"geoMarker.filled"},label:{text:r}});d7.getLayer().getSource().addFeature(u)})};AR.get(E(dq),{responseType:"application/json",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(t=>{if(200!==t.status)throw Error("Failed to fetch local geojson",{cause:t});return JSON.parse(t.data)}).then(t=>{d9(t)}).catch(t=>{let i="Failed to load Capitals layer";A0.logError("layers/Capitals.js","geoJsonPromise",{message:i,error:t}),c9.error({title:"Error",message:i})});var gt={};gt=import.meta.resolve("dzYfg");var ge=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=uE,this.supportedMediaTypes=null}getReadOptions(t,i){if(i){let n=i.dataProjection?io(i.dataProjection):this.readProjection(t);i.extent&&n&&"tile-pixels"===n.getUnits()&&(n=io(n)).setWorldExtent(i.extent),i={dataProjection:n,featureProjection:i.featureProjection}}return this.adaptOptions(i)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return J()}readFeature(t,i){return J()}readFeatures(t,i){return J()}readGeometry(t,i){return J()}readProjection(t){return J()}writeFeature(t,i){return J()}writeFeatures(t,i){return J()}writeGeometry(t,i){return J()}};function gi(t,i,n){let r=n?io(n.featureProjection):null,s=n?io(n.dataProjection):null,o=t;if(r&&s&&!id(r,s)){i&&(o=t.clone());let n=i?r:s,a=i?s:r;"tile-pixels"===n.getUnits()?o.transform(n,a):o.applyTransform(im(n,a))}if(i&&n&&void 0!==n.decimals){let i=Math.pow(10,n.decimals);o===t&&(o=t.clone()),o.applyTransform(function(t){for(let n=0,r=t.length;n<r;++n)t[n]=Math.round(t[n]*i)/i;return t})}return o}const gn={Point:i4,LineString:uV,Polygon:nA,MultiPoint:ua,MultiLineString:uz,MultiPolygon:uj};function gr(t,i){return t?Array.isArray(t)?new uN(t.map(t=>gr(t,i))):gi(new gn[t.type](t.flatCoordinates,t.layout||"XY",t.ends),!1,i):null}function gs(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var go=class extends ge{constructor(){super()}getType(){return"json"}readFeature(t,i){return this.readFeatureFromObject(gs(t),this.getReadOptions(t,i))}readFeatures(t,i){return this.readFeaturesFromObject(gs(t),this.getReadOptions(t,i))}readFeatureFromObject(t,i){return J()}readFeaturesFromObject(t,i){return J()}readGeometry(t,i){return this.readGeometryFromObject(gs(t),this.getReadOptions(t,i))}readGeometryFromObject(t,i){return J()}readProjection(t){return this.readProjectionFromObject(gs(t))}readProjectionFromObject(t){return J()}writeFeature(t,i){return JSON.stringify(this.writeFeatureObject(t,i))}writeFeatureObject(t,i){return J()}writeFeatures(t,i){return JSON.stringify(this.writeFeaturesObject(t,i))}writeFeaturesObject(t,i){return J()}writeGeometry(t,i){return JSON.stringify(this.writeGeometryObject(t,i))}writeGeometryObject(t,i){return J()}};function ga(t,i){let n;if(!t)return null;switch(t.type){case"Point":n=function(t){let i=t.coordinates;return{type:"Point",flatCoordinates:i,layout:iP(i.length)}}(t);break;case"LineString":n=function(t){let i=t.coordinates,n=i.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:iP(i[0]?.length||2)}}(t);break;case"Polygon":n=function(t){let i=t.coordinates,n=[],r=i[0]?.[0]?.length,s=i$(n,0,i,r);return{type:"Polygon",flatCoordinates:n,ends:s,layout:iP(r)}}(t);break;case"MultiPoint":n=function(t){let i=t.coordinates;return{type:"MultiPoint",flatCoordinates:i.flat(),layout:iP(i[0]?.length||2)}}(t);break;case"MultiLineString":n=function(t){let i=t.coordinates,n=i[0]?.[0]?.length||2,r=[],s=i$(r,0,i,n);return{type:"MultiLineString",flatCoordinates:r,ends:s,layout:iP(n)}}(t);break;case"MultiPolygon":n=function(t){let i=t.coordinates,n=[],r=i[0]?.[0]?.[0].length||2,s=iY(n,0,i,r);return{type:"MultiPolygon",flatCoordinates:n,ends:s,layout:iP(r)}}(t);break;case"GeometryCollection":var r;n=t.geometries.map(function(t){return ga(t,void 0)});break;default:throw Error("Unsupported GeoJSON type: "+t.type)}return n}function gl(t,i){var n,r,s,o,a,l,A,h,c,u;let d,g,f,p=(t=gi(t,!0,i)).getType();switch(p){case"Point":n=0,d={type:"Point",coordinates:t.getCoordinates()};break;case"LineString":r=0,d={type:"LineString",coordinates:t.getCoordinates()};break;case"Polygon":s=t,(o=i)&&(g=o.rightHanded),d={type:"Polygon",coordinates:s.getCoordinates(g)};break;case"MultiPoint":a=0,d={type:"MultiPoint",coordinates:t.getCoordinates()};break;case"MultiLineString":l=0,d={type:"MultiLineString",coordinates:t.getCoordinates()};break;case"MultiPolygon":A=t,(h=i)&&(f=h.rightHanded),d={type:"MultiPolygon",coordinates:A.getCoordinates(f)};break;case"GeometryCollection":c=t,u=Object.assign({},u=i),delete u.featureProjection,d={type:"GeometryCollection",geometries:c.getGeometriesArray().map(function(t){return gl(t,u)})};break;case"Circle":d={type:"GeometryCollection",geometries:[]};break;default:throw Error("Unsupported geometry type: "+p)}return d}var gA=class extends go{constructor(t){t=t||{},super(),this.dataProjection=io(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=io(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,i){let n=null,r=ga((n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,i);if(this.featureClass===dx)return function t(i,n){var r,s;let o=i.geometry;if(!o)return[];if(Array.isArray(o))return o.map(n=>t({...i,geometry:n})).flat();let a="MultiPolygon"===o.type?"Polygon":o.type;if("GeometryCollection"===a||"Circle"===a)throw Error("Unsupported geometry type: "+a);let l=o.layout.length;return gi(new dx(a,"Polygon"===a?(r=o.flatCoordinates,s=o.ends,Array.isArray(s[0])?!no(r,0,s,l)&&nl(r=r.slice(),0,s,l):!ns(r,0,s,l)&&na(r=r.slice(),0,s,l),r):o.flatCoordinates,o.ends?.flat(),l,i.properties||{},i.id).enableSimplifyTransformed(),!1,n)}({geometry:r,id:n.id,properties:n.properties},i);let s=new uE;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry(gr(r,i)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(t,i){let n=null;if("FeatureCollection"===t.type){n=[];let r=t.features;for(let t=0,s=r.length;t<s;++t){let s=this.readFeatureFromObject(r[t],i);s&&n.push(s)}}else n=[this.readFeatureFromObject(t,i)];return n.flat()}readGeometryFromObject(t,i){var n;return gr(ga(t,n=i),n)}readProjectionFromObject(t){let i,n=t.crs;if(n)if("name"==n.type)i=io(n.properties.name);else if("EPSG"===n.type)i=io("EPSG:"+n.properties.code);else throw Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(t,i){i=this.adaptOptions(i);let n={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(n.id=r),!t.hasProperties())return n;let s=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=gl(o,i),delete s[t.getGeometryName()]),z(s)||(n.properties=s),n}writeFeaturesObject(t,i){i=this.adaptOptions(i);let n=[];for(let r=0,s=t.length;r<s;++r)n.push(this.writeFeatureObject(t[r],i));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,i){return gl(t,this.adaptOptions(i))}};const gh="oltb-func-btn",gc="oltb-info-window-marker",gu=function(t,i,n){let r=new gA({featureProjection:n.getCode()}).readFeatures(i),s=A3.getConfig();return r.forEach(t=>{let i=ey(i_(t7(t.getGeometry().getExtent()),s.projection.default,s.projection.wgs84)),n=uR(t.getGeometry()),r=t.get("name"),o=`
            Based on the geometric data, we estimate the area to be ${n.value} ${n.unit}.
        `,a={title:r,content:`
                <p>${o}</p>
            `,footer:`
                <span class="oltb-info-window__coordinates">${i}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${gh} ${gh}--copy oltb-tippy" title="Copy Marker Text" id="${gc}-copy-text" data-oltb-copy="${o}"></button>
                    <button class="${gh} ${gh}--layer oltb-tippy" title="Show Layer" id="${gc}-show-layer"></button>
                </div>
            `};t.setProperties({oltb:{type:ud.type.layer,title:r,description:o,settings:{shouldHighlightOnHover:!0},infoWindow:a}})}),t.addFeatures(r),r};dY.addMapLayers([{id:"90fcb696-0eca-43cf-897c-268f1d7d070f",name:"Countries Overlay",layer:new dw({source:new dI({format:new gA({featureProjection:A3.getConfig().projection.default}),loader:function(t,i,n,r,s){AR.get(E(gt),{responseType:"application/json",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(t=>{if(200!==t.status)throw Error("Failed to fetch local geojson",{cause:t});return JSON.parse(t.data)}).then(t=>{r(gu(this,t,n))}).catch(t=>{let i="Failed to load Countries layer";A0.logError("layers/Countries.js","geoJsonPromise",{message:i,error:t}),c9.error({title:"Error",message:i}),s()})},strategy:function(t,i){return[t]}}),visible:!1})}],{isSilent:!0});var gd={};gd=import.meta.resolve("ll2lK"),dY.addMapLayers([{id:"7f6200e1-8a41-48a2-a39c-b8ff1ed4f7ec",name:"Continents Overlay",layer:new dw({source:new dI({url:E(gd),format:new gA({featureProjection:A3.getConfig().projection.default})}),visible:!0})}],{isSilent:!0}),"function"!=typeof JSON.decycle&&(JSON.decycle=function(t,i){var n=new WeakMap;return function t(r,s){var o,a;return(void 0!==i&&(r=i(r)),"object"!=typeof r||null===r||r instanceof Boolean||r instanceof Date||r instanceof Number||r instanceof RegExp||r instanceof String)?r:void 0!==(o=n.get(r))?{$ref:o}:(n.set(r,s),Array.isArray(r)?(a=[],r.forEach(function(i,n){a[n]=t(i,s+"["+n+"]")})):(a={},Object.keys(r).forEach(function(i){a[i]=t(r[i],s+"["+JSON.stringify(i)+"]")})),a)}(t,"$")}),"function"!=typeof JSON.retrocycle&&(JSON.retrocycle=function(t){var i=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/;return!function t(n){n&&"object"==typeof n&&(Array.isArray(n)?n.forEach(function(r,s){if("object"==typeof r&&null!==r){var o=r.$ref;"string"==typeof o&&i.test(o)?n[s]=Function(o):t(r)}}):Object.keys(n).forEach(function(r){var s=n[r];if("object"==typeof s&&null!==s){var o=s.$ref;"string"==typeof o&&i.test(o)?n[r]=Function(o):t(s)}}))}(t),t}),String.prototype.startsWithCapital=function(){return/^[A-Z]/.test(this)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.isDigitsOnly=function(){return null!==this.match(/^-?[0-9]+$/)},String.prototype.ellipsis=function(t){return this.length>t?`${this.substring(0,t)}...`:this},HTMLElement.prototype.slideToggle=function(t,i){0===this.clientHeight?gg(this,t,i,!0):gg(this,t,i)},HTMLElement.prototype.slideUp=function(t,i){gg(this,t,i)},HTMLElement.prototype.slideDown=function(t,i){gg(this,t,i,!0)};const gg=function(t,i,n,r){let s;if(void 0===i&&(i=200),void 0===r&&(r=!1),0===parseFloat(window.getComputedStyle(t).getPropertyValue("height")))return;t.style.overflow="hidden",r&&(t.style.display="block");let o=window.getComputedStyle(t),a=parseFloat(o.getPropertyValue("height")),l=parseFloat(o.getPropertyValue("padding-top")),A=parseFloat(o.getPropertyValue("padding-bottom")),h=parseFloat(o.getPropertyValue("margin-top")),c=parseFloat(o.getPropertyValue("margin-bottom")),u=a/i,d=l/i,g=A/i,f=h/i,p=c/i,m=function(o){void 0===s&&(s=o);let _=o-s;r?(t.style.height=`${u*_}px`,t.style.paddingTop=`${d*_}px`,t.style.paddingBottom=`${g*_}px`,t.style.marginTop=`${f*_}px`,t.style.marginBottom=`${p*_}px`):(t.style.height=`${a-u*_}px`,t.style.paddingTop=`${l-d*_}px`,t.style.paddingBottom=`${A-g*_}px`,t.style.marginTop=`${h-f*_}px`,t.style.marginBottom=`${c-p*_}px`),_>=i?(t.style.height="",t.style.paddingTop="",t.style.paddingBottom="",t.style.marginTop="",t.style.marginBottom="",t.style.overflow="",r||(t.style.display="none"),n instanceof Function&&n(!r)):window.requestAnimationFrame(m)};window.requestAnimationFrame(m)},gf=Object.freeze({altShiftDragRotate:"altShiftDragRotate",alwaysNewLayers:"alwaysNewLayers",copyCoordinatesOnClick:"copyCoordinatesOnClick",dragPan:"dragPan",keyboardPan:"keyboardPan",keyboardZoom:"keyboardZoom",mouseOnlyToEditVectorShapes:"mouseOnlyToEditVectorShapes",mouseWheelZoom:"mouseWheelZoom",selectVectorMapShapes:"selectVectorMapShapes",snapHelpLines:"snapHelpLines",snapInteraction:"snapInteraction",updateToolboxCoordinatesOnHover:"updateToolboxCoordinatesOnHover"}),gp="url-manager.js";class gm extends AX{static async initAsync(t={}){return A0.logDebug(gp,"initAsync","Initialization started"),new Promise(t=>{t({filename:gp,result:!0})})}static setMap(t){}static getName(){return gp}static getParameters(){return new URLSearchParams(decodeURI(window.location.search))}static getParameter(t,i=!0){let n=this.getParameters().get(t)||"";return i?n.toLowerCase():n}}var an=I("f1q41");const g_=Object.freeze(["Badger","Bear","Cat","Cow","Dog","Donkey","Elephant","Frog","Giraffe","Koala","Lemur","Lizard","Lynx","Meerkat","Moose","Mosquito","Mouse","Otter","Owl","Panda","Pelican","Puma","Rabbit","Snow leopard"]),gy=Object.freeze(["Adorable","Adored","Angry","Clever","Clumsy","Confused","Dashing","Dizzy","Elegant","Funny","Glowing","Happy","Mysterious","Notorious","Running","Slow","Smooth","Spooky","Stubborn","Suspicious","Swimming","Tired","Triumphant","Upset","Yummy"]),gw="name-manager.js";class gv extends AX{static async initAsync(t={}){return A0.logDebug(gw,"initAsync","Initialization started"),new Promise(t=>{t({filename:gw,result:!0})})}static setMap(t){}static getName(){return gw}static generate(){let t=E(an).random(0,g_.length-1),i=E(an).random(0,gy.length-1);return`${gy[i]} ${g_[t]}`.capitalize()}}const gb="tool-manager.js";class gC extends AX{static #tB;static async initAsync(t={}){return A0.logDebug(gb,"initAsync","Initialization started"),new Promise(t=>{t({filename:gb,result:!0})})}static setMap(t){}static getName(){return gb}static setActiveTool(t){this.#tB&&this.#tB!==t&&this.#tB.deselectTool(),this.#tB=t}static getActiveTool(){return this.#tB}static hasActiveTool(){return void 0!==this.#tB}static removeActiveTool(){this.#tB=void 0}}var an=I("f1q41");const gx={SNAP:"snap",UNSNAP:"unsnap"};class gE extends K{constructor(t,i){super(t),this.vertex=i.vertex,this.vertexPixel=i.vertexPixel,this.feature=i.feature,this.segment=i.segment}}const gB={Circle(t,i){let n=t,r=iy();r&&(n=n.clone().transform(r,i));let s=nc(n);return r&&s.transform(i,r),gB.Polygon(s)},GeometryCollection(t,i){let n=[],r=t.getGeometriesArray();for(let t=0;t<r.length;++t){let s=gB[r[t].getType()];s&&n.push(s(r[t],i))}return n.flat()},LineString(t){let i=[],n=t.getFlatCoordinates(),r=t.getStride();for(let t=0,s=n.length-r;t<s;t+=r)i.push([n.slice(t,t+2),n.slice(t+r,t+r+2)]);return i},MultiLineString(t){let i=[],n=t.getFlatCoordinates(),r=t.getStride(),s=t.getEnds(),o=0;for(let t=0,a=s.length;t<a;++t){let a=s[t];for(let t=o,s=a-r;t<s;t+=r)i.push([n.slice(t,t+2),n.slice(t+r,t+r+2)]);o=a}return i},MultiPoint(t){let i=[],n=t.getFlatCoordinates(),r=t.getStride();for(let t=0,s=n.length;t<s;t+=r)i.push([n.slice(t,t+2)]);return i},MultiPolygon(t){let i=[],n=t.getFlatCoordinates(),r=t.getStride(),s=t.getEndss(),o=0;for(let t=0,a=s.length;t<a;++t){let a=s[t];for(let t=0,s=a.length;t<s;++t){let s=a[t];for(let t=o,a=s-r;t<a;t+=r)i.push([n.slice(t,t+2),n.slice(t+r,t+r+2)]);o=s}}return i},Point:t=>[[t.getFlatCoordinates().slice(0,2)]],Polygon(t){let i=[],n=t.getFlatCoordinates(),r=t.getStride(),s=t.getEnds(),o=0;for(let t=0,a=s.length;t<a;++t){let a=s[t];for(let t=o,s=a-r;t<s;t+=r)i.push([n.slice(t,t+2),n.slice(t+r,t+r+2)]);o=a}return i}};function gS(t){return t.feature?t.feature:t.element?t.element:null}const gI=[],gL=[],gF=[];var gM=class extends n6{constructor(t){let i=t=t||{};i.handleDownEvent||(i.handleDownEvent=U),i.stopDown||(i.stopDown=Q),super(i),this.on,this.once,this.un,this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.intersection_=void 0!==t.intersection&&t.intersection,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new dE,this.snapped_=null,this.segmenters_=Object.assign({},gB,t.segmenters)}addFeature(t,i){i=void 0===i||i;let n=te(t),r=t.getGeometry();if(r){let i=this.segmenters_[r.getType()];if(i){this.indexedFeaturesExtents_[n]=r.getExtent(tq());let s=i(r,this.getMap().getView().getProjection()),o=s.length;for(let i=0;i<o;++i){let n=s[i];gL[i]=tG(n),gF[i]={feature:t,segment:n}}if(gL.length=o,gF.length=o,this.intersection_)for(let i=0,n=s.length;i<n;++i){let n=s[i];if(1===n.length)continue;let r=gL[i];for(let a=0,l=s.length;a<l;++a){if(i===a||i-1===a||i+1===a)continue;let l=s[a];if(!eo(r,gL[a]))continue;let A=nt(n,l);if(!A)continue;let h=[A];gL[o]=tG(h),gF[o++]={feature:t,segment:h,isIntersection:!0}}for(let{segment:r}of this.rBush_.getInExtent(gL[i])){if(1===r.length)continue;let i=nt(n,r);if(!i)continue;let s=[i];gL[o]=tG(s),gF[o++]={feature:t,segment:s,isIntersection:!0}}}1===o?this.rBush_.insert(gL[0],gF[0]):this.rBush_.load(gL,gF)}}i&&(this.featureChangeListenerKeys_[n]=W(t,T.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}areSnapDataEqual_(t,i){return t.segment===i.segment&&t.feature===i.feature}handleEvent(t){let i=this.snapTo(t.pixel,t.coordinate,t.map);return i?(t.coordinate=i.vertex.slice(0,2),t.pixel=i.vertexPixel,this.snapped_&&!this.areSnapDataEqual_(this.snapped_,i)&&this.dispatchEvent(new gE(gx.UNSNAP,this.snapped_)),this.snapped_={vertex:t.coordinate,vertexPixel:t.pixel,feature:i.feature,segment:i.segment},this.dispatchEvent(new gE(gx.SNAP,this.snapped_))):this.snapped_&&(this.dispatchEvent(new gE(gx.UNSNAP,this.snapped_)),this.snapped_=null),super.handleEvent(t)}handleFeatureAdd_(t){let i=gS(t);i&&this.addFeature(i)}handleFeatureRemove_(t){let i=gS(t);i&&this.removeFeature(i)}handleFeatureChange_(t){let i=t.target;if(this.handlingDownUpSequence){let t=te(i);t in this.pendingFeatures_||(this.pendingFeatures_[t]=i)}else this.updateFeature_(i)}handleUpEvent(t){let i=Object.values(this.pendingFeatures_);if(i.length)for(let t of i)this.updateFeature_(t);return!1}removeFeature(t,i){let n=te(t),r=this.indexedFeaturesExtents_[n];if(r){let i=this.rBush_,n=[];i.forEachInExtent(r,function(i){t===i.feature&&n.push(i)});for(let t=n.length-1;t>=0;--t)i.remove(n[t])}(void 0===i||i)&&(Y(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(t){let i=this.getMap(),n=this.featuresListenerKeys_,r=this.getFeatures_();if(Array.isArray(r)||(r=r.getArray()),i&&(n.forEach(Y),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(Y),this.featureChangeListenerKeys_={}),super.setMap(t),t)for(let t of(this.features_?n.push(W(this.features_,F.ADD,this.handleFeatureAdd_,this),W(this.features_,F.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(W(this.source_,dB.ADDFEATURE,this.handleFeatureAdd_,this),W(this.source_,dB.REMOVEFEATURE,this.handleFeatureRemove_,this)),r))this.addFeature(t)}snapTo(t,i,n){var r,s,o;let a,l,A,h=n.getView().getProjection(),c=iv(i,h),u=(r=tV(tG([c]),n.getView().getResolution()*this.pixelTolerance_),s=0,r),d=this.rBush_.getInExtent(u),g=d.length;if(0===g)return null;let f=1/0,p=null,m=this.pixelTolerance_*this.pixelTolerance_,_=()=>{if(a){let i=n.getPixelFromCoordinate(a);if(em(t,i)<=m&&(A&&this.intersection_||!A&&(this.vertex_||this.edge_)))return{vertex:a,vertexPixel:[Math.round(i[0]),Math.round(i[1])],feature:l,segment:p}}return null};if(this.vertex_||this.intersection_){for(let t=0;t<g;++t){let i=d[t];if("Circle"!==i.feature.getGeometry().getType())for(let t of i.segment){let n=em(c,iv(t,h));n<f&&(a=t,f=n,l=i.feature,A=i.isIntersection)}}let t=_();if(t)return t}if(this.edge_){for(let t=0;t<g;++t){let i=null,n=d[t];if("Circle"===n.feature.getGeometry().getType()){let t=n.feature.getGeometry(),r=iy();r&&(t=t.clone().transform(r,h)),i=function(t,i){let n=i.getRadius(),r=i.getCenter(),s=r[0],o=r[1],a=t[0],l=t[1],A=a-s,h=l-o;0===A&&0===h&&(A=1);let c=Math.sqrt(A*A+h*h);return[s+n*A/c,o+n*h/c]}(c,t)}else{let[t,r]=n.segment;r&&(gI[0]=iv(t,h),gI[1]=iv(r,h),i=ed(c,gI))}if(i){let t=em(c,i);t<f&&(o=0,a=i,p="Circle"===n.feature.getGeometry().getType()?null:n.segment,f=t,l=n.feature)}}let t=_();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}},an=I("f1q41");const gT=new Map([[gf.mouseWheelZoom,{state:!1}],[gf.altShiftDragRotate,{state:!0}],[gf.dragPan,{state:!0}],[gf.keyboardZoom,{state:!0}],[gf.keyboardPan,{state:!0}],[gf.selectVectorMapShapes,{state:!1}],[gf.snapInteraction,{state:!0}],[gf.snapHelpLines,{state:!0}],[gf.alwaysNewLayers,{state:!1}]]),gR="settings-manager.js",gO=he.settingsManager,gD=Object.freeze({});class gP extends AX{static #V;static #tS;static async initAsync(t={}){return A0.logDebug(gR,"initAsync","Initialization started"),this.#V=this.#h(),this.#tS=E(an).cloneDeep(gT),this.#tS.forEach((t,i)=>{t.i18nKey=i,t.i18nBase="managers.settingsManager.settings",i in this.#V&&(t.state=this.#V[i])}),new Promise(t=>{t({filename:gR,result:!0})})}static setMap(t){}static getName(){return gR}static #h(){return A0.logDebug(gR,"getBrowserData","Loading settings from browser"),ht.getAndMergeStateObject(gO,gD)}static clear(){this.#tS=E(an).cloneDeep(gT)}static addSetting(t,i){let n=this.#V[t];void 0!==n&&(i.state=n),gT.set(t,E(an).cloneDeep(i)),this.#tS.set(t,i)}static setSetting(t,i){this.#tS.get(t).state=i,this.#V[t]=i,ht.setStateObject(gO,this.#V)}static getSetting(t){return this.#tS.get(t).state}static getSettings(){return this.#tS}}const gk="snap-manager.js",gN=Object.freeze([2,5]);class gU extends AX{static #tn;static #tB;static #tI;static #tL;static #tF;static async initAsync(t={}){return A0.logDebug(gk,"initAsync","Initialization started"),this.#tI=this.#tM(),this.#tL=this.#tT(),this.#tL.on(A8.openLayers.snap,this.#tR.bind(this)),this.#tL.on(A8.openLayers.unSnap,this.#tO.bind(this)),new Promise(t=>{t({filename:gk,result:!0})})}static setMap(t){this.#tn=t}static getName(){return gk}static #tM(){return new dw({zIndex:1e9,source:new dI,style:new sz({stroke:new sV({color:"#EB4542FF",lineDash:gN,width:2})})})}static #tT(){return new gM({features:dY.getSnapFeatures(),pixelTolerance:10,edge:!0,vertex:!0,intersection:!0})}static #tR(t){this.isSnapLine(t.feature)||this.#tB.onSnap(t)}static #tO(t){this.isSnapLine(t.feature)||this.#tB.onUnSnap(t)}static #tD(t){this.#tP(t)}static #tk(){return gP.getSetting(gf.snapInteraction)}static #tN(){return gP.getSetting(gf.snapHelpLines)}static #tU(t,i,n){let[r,s]=t,[o,a]=i,l=Math.abs(r-o)<=n;return Math.abs(s-a)<=n?[r,a]:l?[o,s]:null}static #tP(t){let i=t.coordinate,n=dY.getSnapFeatures(),r=10*this.#tn.getView().getResolution();this.#tQ();let s=this.#tI.getSource(),o=[];n.forEach(t=>{um(t.getGeometry().getCoordinates()).forEach(t=>{let n=this.#tU(i,t,r);if(n){let i=new uE({geometry:new uV([t,n]),oltb:{type:ud.type.snapLine}});o.push(i)}})}),o.forEach(t=>{s.addFeature(t),this.#tL.addFeature(t)})}static #tQ(){let t=this.#tI.getSource();t.getFeatures().forEach(t=>{this.#tL.removeFeature(t)}),t.clear()}static isSnapLine(t){return E(an).get(t.getProperties(),["oltb","type"],void 0)===ud.type.snapLine}static addSnap(t){let i=this.#tk(),n=this.#tN();A0.logDebug(gk,"addSnap",{info:"Snap interaction requested",isEnabled:i,useSnapHelpLines:n,requestedBy:t.getName()}),i&&(this.#tB=t,this.#tn.addInteraction(this.#tL),this.#tN()&&(this.#tn.addLayer(this.#tI),this.#tF=this.#tn.on(A8.openLayers.pointerMove,this.#tD.bind(this))))}static removeSnap(){this.#tB=void 0,this.#tn.removeLayer(this.#tI),this.#tn.removeInteraction(this.#tL),this.#tQ(),X(this.#tF)}static getActivatedBy(){return this.#tB}static hasActiveTool(){return!!this.getActivatedBy()}static getInteraction(){return this.#tL}}const gQ="error-manager.js",gH="tooltip-manager.js",gG="oltb-overlay-tooltip";class gV extends AX{static #tn;static #tH;static #tF;static #tG;static #tV={};static async initAsync(t={}){return A0.logDebug(gH,"initAsync","Initialization started"),this.#tH=this.#tz(),new Promise(t=>{t({filename:gH,result:!0})})}static setMap(t){this.#tn=t}static getName(){return gH}static #tz(){let t=A3.getConfig().overlayOffset;return new uI({stopEvent:!1,element:A6.createElement({element:"div",class:gG}),positioning:"bottom-center",offset:[t.horizontal,t.vertical]})}static #tD(t){this.#tH.setPosition(t.coordinate)}static #tK(t){this.#tH.setPosition(t.coordinate)}static getTooltips(){return this.#tV}static getSize(){return Object.keys(this.#tV).length}static isEmpty(){return 0===this.getSize()}static getTooltip(t){return this.#tV[t]}static push(t){let i=A6.createElement({element:"span",class:`${gG}__item`});return this.isEmpty()&&(this.#tn.addOverlay(this.#tH),this.#tF=this.#tn.on(A8.openLayers.pointerMove,this.#tD.bind(this)),this.#tG=this.#tn.on(A8.openLayers.moveEnd,this.#tK.bind(this))),this.#tV[t]=i,this.#tH.getElement().prepend(i),i}static pop(t){let i=this.#tV[t];return this.#tH.getElement().removeChild(i),delete this.#tV[t],this.isEmpty()&&(X(this.#tF),X(this.#tG),this.#tn.removeOverlay(this.#tH),this.#tH.setPosition(null)),i}}const gz="bootstrap-manager.js";class gK extends AX{static #tj=[];static async initAsync(t=[]){A0.logInformation(gz,"initAsync","Manager initialization started");let i=A3.getConfig(),n=i.toolbar.version,r=i.openLayers.version;window.document.documentElement.setAttribute("ol-version",r),window.document.documentElement.setAttribute("oltb-version",n),A0.logInformation(gz,"initAsync",`Running OL version ${r}`),A0.logInformation(gz,"initAsync",`Running OLTB version ${n}`);let s=[];for(let i of t){let t=i.manager,n=i.options||{};this.#tj.push(t);let r=await t.initAsync(n);s.push(r)}A0.logInformation(gz,"initAsync","Manager initialization ended"),A0.logInformation(gz,"initAsync",s)}static setMap(t){A0.logInformation(gz,"setMap","OL is ready to use"),this.#tj.forEach(i=>{i.setMap(t)})}static getName(){return gz}static ready(){A0.logInformation(gz,"ready","OLTB is ready to use"),cz.dispatchEvent([window],A8.custom.ready)}}var an=I("f1q41");const gj=Object.freeze({valueCancel:"Cancel",valueHelp:"Help",valueBackSpace:"Backspace",valueTab:"Tab",valueClear:"Clear",valueEnter:"Enter",valueReturn:"Enter",valueShift:"Shift",valueControl:"Control",valueAlt:"Alt",valueOperatingSystem:"OS",valuePause:"Pause",valueCapsLock:"CapsLock",valueEscape:"Escape",valueSpace:" ",valuePageUp:"PageUp",valuePageDown:"PageDown",valueEnd:"End",valueHome:"Home",valueLeft:"ArrowLeft",valueUp:"ArrowUp",valueRight:"ArrowRight",valueDown:"ArrowDown",valuePrintScreen:"PrintScreen",valueInsert:"Insert",valueDelete:"Delete",value0:"0",value1:"1",value2:"2",value3:"3",value4:"4",value5:"5",value6:"6",value7:"7",value8:"8",value9:"9",valueA:"a",valueB:"b",valueC:"c",valueD:"d",valueE:"e",valueF:"f",valueG:"g",valueH:"h",valueI:"i",valueJ:"j",valueK:"k",valueL:"l",valueM:"m",valueN:"n",valueO:"o",valueP:"p",valueQ:"q",valueR:"r",valueS:"s",valueT:"t",valueU:"u",valueV:"v",valueW:"w",valueX:"x",valueY:"y",valueZ:"z",valueMeta:"Meta",valueLeftCmd:"Meta",valueRightCmd:"Meta",valueContextMenu:"ContextMenu",valueNumpad0:"0",valueNumpad1:"1",valueNumpad2:"2",valueNumpad3:"3",valueNumpad4:"4",valueNumpad5:"5",valueNumpad6:"6",valueNumpad7:"7",valueNumpad8:"8",valueNumpad9:"9",valueMultiply:"*",valueAdd:"+",valueSubtract:"-",valueDecimal:".",valueDivide:"/",valueF1:"F1",valueF2:"F2",valueF3:"F3",valueF4:"F4",valueF5:"F5",valueF6:"F6",valueF7:"F7",valueF8:"F8",valueF9:"F9",valueF10:"F10",valueF11:"F11",valueF12:"F12",valueF13:"F13",valueF14:"F14",valueF15:"F15",valueF16:"F16",valueF17:"F17",valueF18:"F18",valueF19:"F19",valueF20:"F20",valueF21:"F21",valueF22:"F22",valueF23:"F23",valueF24:"F24",valueNumLock:"NumLock",valueScrollLock:"ScrollLock",valueSemicolon:",",valueEquals:"=",valueComma:",",valueDash:"-",valuePeriod:".",valueSlash:"/",valueBackQuote:"`",valueOpenBracket:"[",valueBackSlash:"\\",valueCloseBracket:"]",valueQuote:"'"}),gW=function(t){if(t.key!==gj.valueTab)return;let i='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',n=this.querySelectorAll(i)[0],r=this.querySelectorAll(i),s=r[r.length-1];t.shiftKey?window.document.activeElement===n&&(s.focus(),t.preventDefault()):window.document.activeElement===s&&(n.focus(),t.preventDefault())};var an=(I("f1q41"),I("f1q41"));const g$="oltb-animation",gY=`${g$}--bounce`,gq="oltb-modal",gX=`${gq}-backdrop`,gZ=Object.freeze({title:"Modal",maximized:!1,pushWidth:!1,content:void 0,onClose:void 0});class gJ{#tW="base-modal.js";constructor(t={}){this.options=E(an).merge(E(an).cloneDeep(gZ),t),t.filename&&(this.#tW=t.filename),this.#t$()}#t$(){this.backdrop=A6.createElement({element:"div",class:`${gX} ${gX}--fixed`,attributes:{tabindex:"-1"},listeners:{click:this.#tY.bind(this),keydown:gW}}),this.modal=A6.createElement({element:"div",class:`${gq} ${this.options.maximized?`${gq}--maximized`:""} ${this.options.pushWidth?`${gq}--push-width`:""} ${g$} ${gY}`}),this.modalContent=A6.createElement({element:"div",class:`${gq}__content`});let t=A6.createElement({element:"div",class:`${gq}__header`}),i=A6.createElement({element:"h2",html:this.options.title,class:`${gq}__title`}),n=A6.createElement({element:"button",html:up({path:ug.close.stroked,fill:"none",stroke:"currentColor",strokeWidth:1}),class:`${gq}__close oltb-btn oltb-btn--blank`,attributes:{type:"button"},listeners:{click:this.close.bind(this)}});A6.appendChildren(t,[i,n]),A6.appendChildren(this.modal,[t,this.modalContent]),A6.appendChildren(this.backdrop,[this.modal]),window.addEventListener(A8.browser.keyUp,this.#tq.bind(this)),this.buttons=[n],this.options.content&&this.show(this.options.content)}#tX(t){return t.target===this.backdrop}#tY(t){if(!this.#tX(t))return;let i=this.backdrop.firstElementChild;A6.runAnimation(i,gY)}#tq(t){t.key===gj.valueEscape&&this.close()}getName(){return this.#tW}getTitle(){return this.options.title}getContent(){return this.options.content}getOnClose(){return this.options.onClose}isMaximized(){return this.options.maximized}show(t){this.options.content=t,"string"==typeof t?this.modalContent.innerHTML=t:A6.appendChildren(this.modalContent,[t]);let i=hr.getMapElement();A6.appendChildren(i,[this.backdrop]),this.backdrop.focus()}close(){this.backdrop.removeEventListener(A8.browser.keyDown,gW),A6.removeElement(this.backdrop),this.options.onClose&&this.options.onClose()}}const g0=function(){return window.document.body.classList.contains(A3.getConfig().className.dark)};var an=I("f1q41");const g1=Object.freeze({idPrefix:"",idPostfix:"",text:"",value:"",placeholder:""}),g2=function(t={}){t=E(an).merge(E(an).cloneDeep(g1),t);let i=A6.createElement({element:"div",class:"oltb-mt-0625"}),n=A6.createElement({element:"label",text:t.text,class:"oltb-label",attributes:{for:`${t.idPrefix}${t.idPostfix}`}}),r=A6.createElement({element:"input",id:`${t.idPrefix}${t.idPostfix}`,class:"oltb-input",value:t.value,attributes:{type:"text",placeholder:t.placeholder}});return A6.appendChildren(i,[n,r]),[i,r]};var an=I("f1q41");const g5=Object.freeze({idPrefix:"",idPostfix:"",text:"",options:[],value:void 0}),g4=function(t={}){t=E(an).merge(E(an).cloneDeep(g5),t);let i=A6.createElement({element:"div",class:"oltb-mt-0625"}),n=A6.createElement({element:"label",text:t.text,class:"oltb-label",attributes:{for:`${t.idPrefix}${t.idPostfix}`}}),r=A6.createElement({element:"select",id:`${t.idPrefix}${t.idPostfix}`,class:"oltb-select"});return t.options.forEach(t=>{let i=A6.createElement({element:"option",text:t.text,value:t.value});A6.appendChildren(r,[i])}),t.value?r.value=t.value:t.options.length>0?r.value=t.options[0].value:r.value="",A6.appendChildren(i,[n,r]),[i,r]};var an=I("f1q41");const g3="oltb-color-input",g6=Object.freeze({idPrefix:"",idPostfix:"",text:"",color:""}),g8=function(t={}){t=E(an).merge(E(an).cloneDeep(g6),t);let i=A6.createElement({element:"div",class:"oltb-mt-0625"}),n=A6.createElement({element:"label",text:t.text,class:"oltb-label",attributes:{for:`${t.idPrefix}${t.idPostfix}`}}),r=A6.createElement({element:"div",id:`${t.idPrefix}${t.idPostfix}`,class:`${g3} oltb-color-tippy`,attributes:{tabindex:0,"data-oltb-color-target":`#${t.idPrefix}${t.idPostfix}`,"data-oltb-color":t.color}}),s=A6.createElement({element:"div",class:`${g3}__inner`,style:{"background-color":`${t.color}`}});return A6.appendChildren(r,[s]),A6.appendChildren(i,[n,r]),[i,r]},g7="oltb-marker-modal-marker",g9="modalExtensions.iconMarkerModal",ft=Object.freeze({edit:!1,coordinates:[0,0],title:"Marker",description:"",marker:Object.freeze({fill:"#0166A5FF",stroke:"#0166A566"}),icon:Object.freeze({key:"geoPin.filled",fill:"#FFFFFFFF",stroke:"#FFFFFFFF"}),label:Object.freeze({text:"Marker",fill:"#FFFFFF",stroke:"#3B4352CC",strokeWidth:8}),maxLabelStrokeWidth:24,onCreate:void 0,onCancel:void 0});class fe extends gJ{#tZ=[];constructor(t={}){super({filename:"icon-marker-modal.js",title:c1.get(`${g9}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(ft),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=c1.get(`${g9}.form`),[i,n]=g2({idPrefix:g7,idPostfix:"-title",text:t.title,value:this.options.title}),[r,s]=g2({idPrefix:g7,idPostfix:"-description",text:t.description,value:this.options.description}),[o,a]=g2({idPrefix:g7,idPostfix:"-lat",text:t.latitude,value:this.options.coordinates[1]}),[l,A]=g2({idPrefix:g7,idPostfix:"-lon",text:t.longitude,value:this.options.coordinates[0]}),h=A6.createElement({element:"div",class:"oltb-group"}),[c,u]=g8({idPrefix:g7,idPostfix:"-marker-fill",text:t.markerFill,color:this.options.marker.fill}),[d,g]=g8({idPrefix:g7,idPostfix:"-marker-stroke",text:t.markerStroke,color:this.options.marker.stroke});A6.appendChildren(h,[c,d]);let f=[];for(let t in ug)for(let i in ug[t])f.push({text:`${t.capitalize()} | ${i}`,value:`${t}.${i}`});let[p,m]=g4({idPrefix:g7,idPostfix:"-icon",text:t.icon,options:f,value:this.options.icon.key}),_=A6.createElement({element:"div",class:"oltb-group"}),[y,w]=g8({idPrefix:g7,idPostfix:"-icon-fill",text:t.iconFill,color:this.options.icon.fill}),[v,b]=g8({idPrefix:g7,idPostfix:"-icon-stroke",text:t.iconStroke,color:this.options.icon.stroke});A6.appendChildren(_,[y,v]);let[C,x]=g2({idPrefix:g7,idPostfix:"-label",text:t.label,value:this.options.label.text}),E=A6.createElement({element:"div",class:"oltb-group"}),[B,S]=g8({idPrefix:g7,idPostfix:"-label-fill",text:t.labelFill,color:this.options.label.fill}),[I,L]=g8({idPrefix:g7,idPostfix:"-label-stroke",text:t.labelStroke,color:this.options.label.stroke});A6.appendChildren(E,[B,I]);let F=[];for(let t=1;t<=this.options.maxLabelStrokeWidth;t++)F.push({text:t,value:t});let[M,T]=g4({idPrefix:g7,idPostfix:"-label-stroke-width",text:t.labelStrokeWidth,options:F,value:this.options.label.strokeWidth}),R=A6.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),O=A6.createElement({element:"button",text:`${this.options.edit?t.saveChanges:t.createMarker}`,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#t0({latitude:parseFloat(a.value.trim()),longitude:parseFloat(A.value.trim()),title:n.value.trim(),description:s.value.trim(),icon:m.value.trim(),iconFill:w.getAttribute("data-oltb-color"),iconStroke:b.getAttribute("data-oltb-color"),markerFill:u.getAttribute("data-oltb-color"),markerStroke:g.getAttribute("data-oltb-color"),label:x.value.trim(),labelFill:S.getAttribute("data-oltb-color"),labelStroke:L.getAttribute("data-oltb-color"),labelStrokeWidth:T.value.trim()})}}}),D=A6.createElement({element:"button",text:t.cancel,class:`oltb-dialog__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(R,[D,O]);let P=A6.createElement({element:"div",class:"oltb-modal__content"});A6.appendChildren(P,[i,r,o,l,h,p,_,C,E,M,R]),this.#tZ=[D,O],this.show(P)}#t0(t){this.close(),this.options.onCreate&&this.options.onCreate(t)}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#tZ}}const fi="oltb-info-window-marker",fn="oltb-func-btn",fr="commons",fs=function(t,i){let n=A2.toolbar.id,r=i.get(n),s=A3.getConfig().projection;return new fe({edit:!0,coordinates:i_(i.getGeometry().getCoordinates(),s.default,s.wgs84),title:r.title,description:r.description,marker:{fill:r.marker.fill,stroke:r.marker.stroke},icon:{key:r.icon.key,fill:r.icon.fill,stroke:r.icon.stroke},label:{text:r.label.text,fill:r.label.fill,stroke:r.label.stroke,strokeWidth:r.label.strokeWidth},onCreate:n=>{fa(t,i,n)}})},fo=function(t){dY.getActiveFeatureLayer({fallback:"Markers"}).getLayer().getSource().addFeature(t)},fa=function(t,i,n){t.hideOverlay(),dY.removeFeatureFromFeatureLayers(i);let r=c1.get(`${fr}.titles`),s=[n.longitude,n.latitude],o=ey(s),a={title:n.title,content:`
            <p>${n.description}</p>
        `,footer:`
            <span class="oltb-info-window__coordinates">${o}</span>
            <div class="oltb-info-window__buttons-wrapper">
                <button class="${fn} ${fn}--delete oltb-tippy" data-oltb-i18n="${fr}.titles.delete" title="${r.delete}" id="${fi}-remove"></button>
                <button class="${fn} ${fn}--crosshair oltb-tippy" data-oltb-i18n="${fr}.titles.copyCoordinates" title="${r.copyCoordinates}" id="${fi}-copy-coordinates" data-oltb-coordinates="${o}"></button>
                <button class="${fn} ${fn}--copy oltb-tippy" data-oltb-i18n="${fr}.titles.copyText" title="${r.copyText}" id="${fi}-copy-text" data-oltb-copy="${n.title} ${n.description}"></button>
                <button class="${fn} ${fn}--edit oltb-tippy" data-oltb-i18n="${fr}.titles.edit" title="${r.edit}" id="${fi}-edit"></button>
                <button class="${fn} ${fn}--layer oltb-tippy" data-oltb-i18n="${fr}.titles.showLayer" title="${r.showLayer}" id="${fi}-show-layer"></button>
            </div>
        `},l=dK.generateIconMarker({lon:s[0],lat:s[1],title:n.title,description:n.description,infoWindow:a,marker:{fill:n.markerFill,stroke:n.markerStroke},icon:{key:n.icon,fill:n.iconFill,stroke:n.iconStroke},label:{text:n.label,fill:n.labelFill,stroke:n.labelStroke,strokeWidth:n.labelStrokeWidth}});fo(l),cz.dispatchCustomEvent([window],A8.custom.featureEdited,{detail:{before:i,after:l}})};var an=I("f1q41");const fl="oltb-dialog-backdrop";class fA{constructor(){this.backdrop=A6.createElement({element:"div",class:`${fl} ${fl}--fixed`,attributes:{tabindex:"-1"},listeners:{click:this.#tY.bind(this),keydown:gW}}),window.addEventListener(A8.browser.keyUp,this.#tq.bind(this))}#tX(t){return t.target===this.backdrop}#tY(t){if(!this.#tX(t))return;let i=this.backdrop.firstElementChild;A6.runAnimation(i,"oltb-animation--bounce")}#tq(t){t.key===gj.valueEscape&&this.close()}close(){this.backdrop.removeEventListener(A8.browser.keyDown,gW),A6.removeElement(this.backdrop)}}const fh="oltb-dialog",fc=`${fh}--alert`,fu="oltb-animation",fd=`${fu}--bounce`,fg=Object.freeze({title:"Alert",message:"",confirmText:"Ok",onConfirm:void 0});class ff extends fA{constructor(t={}){super(),this.options=E(an).merge(E(an).cloneDeep(fg),t),this.#t2()}#t2(){let t=A6.createElement({element:"div",class:`${fh} ${fc} ${fu} ${fd}`}),i=A6.createElement({element:"h2",class:`${fh}__title`,text:this.options.title}),n=A6.createElement({element:"p",class:`${fh}__message`,html:this.options.message}),r=A6.createElement({element:"div",class:`${fh}__buttons-wrapper`}),s=A6.createElement({element:"button",text:this.options.confirmText,class:`${fh}__btn oltb-btn oltb-btn--blue-mid`,attributes:{type:"button"},listeners:{click:this.#t5.bind(this)}});A6.appendChildren(r,[s]),A6.appendChildren(t,[i,n,r]),A6.appendChildren(this.backdrop,[t]);let o=hr.getMapElement();A6.appendChildren(o,[this.backdrop]),this.buttons=[s],this.backdrop.focus()}#t5(){this.close(),this.options.onConfirm&&this.options.onConfirm()}getClassType(){return fc}}var an=I("f1q41");const fp="oltb-dialog",fm=`${fp}--prompt`,f_="oltb-animation",fy=`${f_}--bounce`,fw=Object.freeze({title:"Prompt",message:"",placeholder:void 0,value:void 0,confirmClass:"oltb-btn--green-mid",confirmText:"Confirm",cancelText:"Cancel",onConfirm:void 0,onCancel:void 0,onInput:void 0});class fv extends fA{constructor(t={}){super(),this.options=E(an).merge(E(an).cloneDeep(fw),t),this.#t2()}#t4(t){return null!=t}#t2(){let t=A6.createElement({element:"div",class:`${fp} ${fm} ${f_} ${fy}`}),i=A6.createElement({element:"h2",class:`${fp}__title`,text:this.options.title}),n=A6.createElement({element:"p",class:`${fp}__message`,html:this.options.message}),r=A6.createElement({element:"input",class:`${fp}__input oltb-input`,attributes:{type:"text"},listeners:{input:()=>{this.#t3(r)}}});this.#t4(this.options.placeholder)&&r.setAttribute("placeholder",this.options.placeholder),this.#t4(this.options.value)&&(r.value=this.options.value);let s=A6.createElement({element:"div",class:`${fp}__buttons-wrapper`}),o=A6.createElement({element:"button",text:this.options.confirmText,class:`${fp}__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:this.#t5.bind(this,r)}}),a=A6.createElement({element:"button",text:this.options.cancelText,class:`${fp}__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(s,[a,o]),A6.appendChildren(t,[i,n,r,s]),A6.appendChildren(this.backdrop,[t]);let l=hr.getMapElement();A6.appendChildren(l,[this.backdrop]),this.buttons=[a,o],this.backdrop.focus()}#t3(t){this.options.onInput&&this.options.onInput(t.value.trim())}#t5(t){this.close(),this.options.onConfirm&&this.options.onConfirm(t.value.trim())}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getClassType(){return fm}}var an=I("f1q41");const fb="oltb-dialog",fC=`${fb}--select`,fx="oltb-animation",fE=`${fx}--bounce`,fB=Object.freeze({title:"Select",message:"",value:void 0,options:[],confirmClass:"oltb-btn--green-mid",confirmText:"Confirm",cancelText:"Cancel",onConfirm:void 0,onCancel:void 0,onChange:void 0});class fS extends fA{constructor(t={}){super(),this.options=E(an).merge(E(an).cloneDeep(fB),t),this.#t2()}#t2(){let t=A6.createElement({element:"div",class:`${fb} ${fC} ${fx} ${fE}`}),i=A6.createElement({element:"h2",class:`${fb}__title`,text:this.options.title}),n=A6.createElement({element:"p",class:`${fb}__message`,html:this.options.message}),r=A6.createElement({element:"select",class:`${fb}__select oltb-select`,listeners:{change:()=>{this.#t6(r)}}});this.options.options.forEach(t=>{let i=A6.createElement({element:"option",text:t.text,value:t.value});A6.appendChildren(r,[i])}),this.options.value?r.value=this.options.value:this.options.options.length>0?r.value=this.options.options[0].value:r.value="";let s=A6.createElement({element:"div",class:`${fb}__buttons-wrapper`}),o=A6.createElement({element:"button",text:this.options.confirmText,class:`${fb}__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:this.#t5.bind(this,r)}}),a=A6.createElement({element:"button",text:this.options.cancelText,class:`${fb}__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(s,[a,o]),A6.appendChildren(t,[i,n,r,s]),A6.appendChildren(this.backdrop,[t]);let l=hr.getMapElement();A6.appendChildren(l,[this.backdrop]),this.buttons=[a,o],this.backdrop.focus()}#t6(t){this.options.onChange&&this.options.onChange({text:t.options[t.selectedIndex].text.trim(),value:t.value.trim()})}#t5(t){this.close();let i=this.options.value,n=this.options.options.find(t=>t.value===i),r=t.value,s=t.options[t.selectedIndex];this.options.onConfirm&&this.options.onConfirm({from:{text:n.text.trim(),value:i.trim()},to:{text:s.text.trim(),value:r.trim()}})}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getClassType(){return fC}}var an=I("f1q41");const fI="oltb-dialog",fL=`${fI}--confirm`,fF="oltb-animation",fM=`${fF}--bounce`,fT=Object.freeze({title:"Confirm",message:"",confirmClass:"oltb-btn--red-mid",confirmText:"Yes",cancelText:"Cancel",onConfirm:void 0,onCancel:void 0});class fR extends fA{constructor(t={}){super(),this.options=E(an).merge(E(an).cloneDeep(fT),t),this.#t2()}#t2(){let t=A6.createElement({element:"div",class:`${fI} ${fL} ${fF} ${fM}`}),i=A6.createElement({element:"h2",class:`${fI}__title`,text:this.options.title}),n=A6.createElement({element:"p",class:`${fI}__message`,html:this.options.message}),r=A6.createElement({element:"div",class:`${fI}__buttons-wrapper`}),s=A6.createElement({element:"button",text:this.options.confirmText,class:`${fI}__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:this.#t5.bind(this)}}),o=A6.createElement({element:"button",text:this.options.cancelText,class:`${fI}__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(r,[o,s]),A6.appendChildren(t,[i,n,r]),A6.appendChildren(this.backdrop,[t]);let a=hr.getMapElement();A6.appendChildren(a,[this.backdrop]),this.buttons=[o,s],this.backdrop.focus()}#t5(){this.close(),this.options.onConfirm&&this.options.onConfirm()}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getClassType(){return fL}}class fO{static alert(t){return new ff(t)}static confirm(t){return new fR(t)}static prompt(t){return new fv(t)}static select(t){return new fS(t)}static get Success(){return"oltb-btn--green-mid"}static get Danger(){return"oltb-btn--red-mid"}}const fD=function(t,i){let n=c1.get("managers.infoWindowManager.dialogs.confirms.deleteMarker");return fO.confirm({title:n.title,message:n.message,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:()=>{t.hideOverlay(),dY.removeFeatureFromFeatureLayers(i),cz.dispatchCustomEvent([window],A8.custom.featureRemoved,{detail:{feature:i}})}})},fP="show-marker-layer.js",fk=function(t,i){let n=dY.getLayerWrapperFromFeature(i);if(!n)return void A0.logWarning(fP,"showMarkerLayer","No layer found");let r=window.document.querySelector(`[data-oltb-id='${n.getId()}']`);if(!r)return void A0.logWarning(fP,"showMarkerLayer","No layer-element found");A6.flashClass(r,"oltb-toolbox-list__item--indicate")};function fN(t){let i;if(!(t.context instanceof CanvasRenderingContext2D))throw Error("Only works for render events from Canvas 2D layers");let n=t.inversePixelTransform[0],r=t.inversePixelTransform[1],s=Math.sqrt(n*n+r*r),o=t.frameState,a=function(t,i){let n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],A=i[0],h=i[1],c=i[2],u=i[3],d=i[4],g=i[5];return t[0]=n*A+s*h,t[1]=r*A+o*h,t[2]=n*c+s*u,t[3]=r*c+o*u,t[4]=n*d+s*g+a,t[5]=r*d+o*g+l,t}(t.inversePixelTransform.slice(),o.coordinateToPixelTransform),l=dm(o.viewState.resolution,s),A=iy();return A&&(i=ig(A,o.viewState.projection)),new dg(t.context,s,o.extent,a,o.viewState.rotation,l,i)}function fU(t,i){return iB(t.inversePixelTransform,i.slice(0))}const fQ=Object.freeze({100:"FF",99:"FC",98:"FA",97:"F7",96:"F5",95:"F2",94:"F0",93:"ED",92:"EB",91:"E8",90:"E6",89:"E3",88:"E0",87:"DE",86:"DB",85:"D9",84:"D6",83:"D4",82:"D1",81:"CF",80:"CC",79:"C9",78:"C7",77:"C4",76:"C2",75:"BF",74:"BD",73:"BA",72:"B8",71:"B5",70:"B3",69:"B0",68:"AD",67:"AB",66:"A8",65:"A6",64:"A3",63:"A1",62:"9E",61:"9C",60:"99",59:"96",58:"94",57:"91",56:"8F",55:"8C",54:"8A",53:"87",52:"85",51:"82",50:"80",49:"7D",48:"7A",47:"78",46:"75",45:"73",44:"70",43:"6E",42:"6B",41:"69",40:"66",39:"63",38:"61",37:"5E",36:"5C",35:"59",34:"57",33:"54",32:"52",31:"4F",30:"4D",29:"4A",28:"47",27:"45",26:"42",25:"40",24:"3D",23:"3B",22:"38",21:"36",20:"33",19:"30",18:"2E",17:"2B",16:"29",15:"26",14:"24",13:"21",12:"1F",11:"1C",10:"1A",9:"17",8:"14",7:"12",6:"0F",5:"0D",4:"0A",3:"08",2:"05",1:"03",0:"00"}),fH={copyAsync:async function(t=""){let i=t.trim();if(window.navigator.clipboard&&window.isSecureContext)await window.navigator.clipboard.writeText(i);else{let t=A6.createElement({element:"textarea",value:i,style:{position:"absolute",left:"-999999px",opacity:0}});window.document.body.prepend(t),t.select();try{window.document.execCommand("copy")}finally{t.remove()}}}},fG="managers.infoWindowManager",fV=async function(t,i){try{await fH.copyAsync(i),c9.info({i18nKey:`${fG}.toasts.infos.copyMarkerInfo`,autoremove:!0})}catch(t){A0.logError("copy-marker-info.js","copyMarkerInfoAsync",{message:"Failed to copy Marker info",error:t}),c9.error({i18nKey:`${fG}.toasts.errors.copyMarkerInfo`})}},fz="managers.infoWindowManager",fK=async function(t,i){try{await fH.copyAsync(i),c9.info({i18nKey:`${fz}.toasts.infos.copyMarkerCoordinates`,autoremove:!0})}catch(t){A0.logError("copy-marker-coordinates.js","copyMarkerCoordinatesAsync",{message:"Failed to copy Marker coordinates",error:t}),c9.error({i18nKey:`${fz}.toasts.errors.copyMarkerCoordinates`})}},fj="info-window-manager.js",fW="oltb-animation",f$=`${fW}--centered-bounce`,fY="oltb-info-window",fq="oltb-info-window-marker",fX=Object.freeze({default:"default",pointer:"pointer"}),fZ=[ud.type.iconMarker],fJ=new sz({fill:new sQ({color:"#254372AA"}),stroke:new sV({color:"#369ACDFF",width:1.5})});class f0 extends AX{static #tn;static #t8;static #t7;static #t9;static #et;static #ee;static #ei;static #en;static #er;static async initAsync(t={}){return A0.logDebug(fj,"initAsync","Initialization started"),this.#es(),new Promise(t=>{t({filename:fj,result:!0})})}static setMap(t){this.#tn=t,this.#tn.addOverlay(this.#t7),this.#tn.on(A8.openLayers.singleClick,this.#eo.bind(this)),this.#tn.on(A8.openLayers.pointerMove,this.#tD.bind(this))}static getName(){return fj}static #es(){this.#t8=A6.createElement({element:"div",class:`${fY} ${fW}`,attributes:{tabindex:"-1"},listeners:{keydown:gW}});let t=A6.createElement({element:"div",class:`${fY}__header`});this.#t9=A6.createElement({element:"h3",class:`${fY}__title`});let i=A6.createElement({element:"button",html:up({path:ug.close.stroked,fill:"none",stroke:"currentColor",strokeWidth:1}),class:`${fY}__close oltb-btn oltb-btn--blank`,listeners:{click:this.hideOverlay.bind(this)}});this.#et=A6.createElement({element:"div",class:`${fY}__content`}),this.#ee=A6.createElement({element:"div",class:`${fY}__footer oltb-hide-scrollbars`}),A6.appendChildren(t,[this.#t9,i]),A6.appendChildren(this.#t8,[t,this.#et,this.#ee]);let n=A3.getConfig();this.#t7=new uI({element:this.#t8,positioning:"bottom-center",offset:[n.overlayOffset.horizontal,n.overlayOffset.vertical],autoPan:!0,autoPanAnimation:{duration:n.animationDuration.normal}})}static #eo(t){let i=this.#tn.forEachFeatureAtPixel(t.pixel,function(t,i){return[t,i]});if(!i)return void this.#ea();this.#el(i)}static #tD(t){let i=this.#tn.forEachFeatureAtPixel(t.pixel,function(t){return t});if(this.#eA(i),!i)return void this.setViewportCursor(fX.default);this.#eh(t,i)}static #ea(){this.hideOverlay(),this.deselectFeature(),this.deselectHoveredVectorSection(),this.deselectVectorSection()}static #el(t){let[i,n]=t;this.tryPulseAnimation(i,n);let r=dK.hasInfoWindow(i);r?this.showOverlay(i):this.hideOverlay(),this.deselectVectorSection();let s=dK.shouldHighlightOnHover(i);r&&s&&this.selectVectorSection(i)}static #eh(t,i){dK.shouldHighlightOnHover(i)&&this.selectHoveredVectorSection(i);let n=t.originalEvent.target.nodeName;dK.hasInfoWindow(i)&&"CANVAS"===n?this.setViewportCursor(fX.pointer):this.setViewportCursor(fX.default)}static #eA(t){t||this.#en||(this.deselectHoveredVectorSection(),this.deselectVectorSection()),this.#er&&this.#er!==t&&this.#er!==this.#en&&this.deselectHoveredVectorSection()}static #ec(t,i,n,r){this.selectFeature(t);let s=Date.now(),o=this.getAnimationColor(n),a=this.getAnimationMin(n),l=this.getAnimationMax(n),A=r.duration,h=r.shouldLoop,c=r.strokeWidth,u=t.getGeometry().clone(),d=i.on(A8.openLayers.postRender,(function(g){let f=g.frameState.time-s;if(f>=A||!this.#ei){X(d),dK.isSameFeature(this.#ei,t)&&h&&this.#ec(t,i,n,r);return}let p=fN(g),m=f/A,_=eC(m)*l+a,y=eC(1-m),w=fQ[Math.round(100*y)],v=new sz({image:new sU({radius:_,stroke:new sV({color:`${o.slice(0,-2)}${w}`,width:c+y})})});p.setStyle(v),p.drawGeometry(u),this.#tn.render()}).bind(this));this.#tn.render()}static #eu(t){let i=this.#ee.querySelector(`#${fq}-remove`);i&&i.addEventListener(A8.browser.click,fD.bind(this,f0,t));let n=this.#ee.querySelector(`#${fq}-copy-coordinates`);if(n){let t=n.getAttribute("data-oltb-coordinates");n.addEventListener(A8.browser.click,fK.bind(this,f0,t))}let r=this.#ee.querySelector(`#${fq}-copy-text`);if(r){let t=r.getAttribute("data-oltb-copy");r.addEventListener(A8.browser.click,fV.bind(this,f0,t))}let s=this.#ee.querySelector(`#${fq}-edit`);s&&s.addEventListener(A8.browser.click,fs.bind(this,f0,t));let o=this.#ee.querySelector(`#${fq}-show-layer`);o&&o.addEventListener(A8.browser.click,fk.bind(this,f0,t))}static tryPulseAnimation(t,i){let n=A2.toolbar.id,r=t.get(n),s=A3.getConfig().marker.pulseAnimation;if(r&&fZ.includes(r.type)&&s.isEnabled){if(i||(i=dY.getLayerFromFeature(t)),!i)return void A0.logWarning(fj,"pulseAnimation",{info:"No layer found for feature",featureId:te(t)});this.#ei&&dK.isSameFeature(this.#ei,t)||this.#ec(t,i,r,s)}}static showOverlay(t,i){this.showOverlayDelayed(t,i,0)}static showOverlayDelayed(t,i,n=A3.getConfig().animationDuration.normal){window.setTimeout(()=>{let n=dK.getInfoWindow(t);n&&this.doShowOverlayWithResult(n,t,i)},n)}static doShowOverlayWithResult(t,i,n){this.#t9.innerHTML=t.title,this.#et.innerHTML=t.content,this.#ee.innerHTML=t.footer,n?this.#t7.setPosition(n):this.#t7.setPosition(t7(i.getGeometry().getExtent())),this.#eu(i),this.#t8.focus(),A6.runAnimation(this.#t8,f$)}static hideOverlay(){this.deselectFeature(),this.deselectHoveredVectorSection(),this.deselectVectorSection(),A6.clearElements([this.#t9,this.#et,this.#ee]),this.#t7.setPosition(void 0)}static getAnimationMin(t){return E(an).has(t,["marker"])?t.marker.radius:A2.marker.pulseAnimation.defaultStartSize}static getAnimationMax(t){return E(an).has(t,["marker"])?t.marker.radius+t.marker.radius/2:A2.marker.pulseAnimation.defaultEndSize}static getAnimationColor(t){return E(an).has(t,["marker"])?t.marker.fill:E(an).has(t,["icon"])?t.icon.stroke:A2.marker.pulseAnimation.defaultColor}static isContentEmpty(){return 0===this.#et.innerHTML.length}static getInfoWindow(){return this.#t8}static setViewportCursor(t){this.#tn.getViewport().style.cursor=t}static getViewportCursor(){return this.#tn.getViewport().style.cursor}static selectFeature(t){this.#ei=t,this.deselectVectorSection()}static deselectFeature(){this.#ei=void 0}static isFeatureSelected(){return!!this.#ei}static selectHoveredVectorSection(t){t?.setStyle(fJ),this.#er=t}static deselectHoveredVectorSection(){this.#er?.setStyle(null),this.#er=void 0}static isHoveredVectorSectionSelected(){return!!this.#er}static selectVectorSection(t){t?.setStyle(fJ),this.#en=t,this.deselectFeature()}static deselectVectorSection(){this.#en?.setStyle(null),this.#en=void 0}static isVectorSectionSelected(){return!!this.#en}}var f1=I("gyVUi"),f2={};f2.greenwich=0,f2.lisbon=-9.131906111111,f2.paris=2.337229166667,f2.bogota=-74.080916666667,f2.madrid=-3.687938888889,f2.rome=12.452333333333,f2.bern=7.439583333333,f2.jakarta=106.807719444444,f2.ferro=-17.666666666667,f2.brussels=4.367975,f2.stockholm=18.058277777778,f2.athens=23.7163375,f2.oslo=10.722916666667;var f5={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},f4=/[\s_\-\/\(\)]/g;function f3(t,i){if(t[i])return t[i];for(var n,r=Object.keys(t),s=i.toLowerCase().replace(f4,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(f4,"")===s)return t[n]}function f6(t){var i,n,r,s={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,i){var n=i.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*f1.D2R},lat_1:function(t){s.lat1=t*f1.D2R},lat_2:function(t){s.lat2=t*f1.D2R},lat_ts:function(t){s.lat_ts=t*f1.D2R},lon_0:function(t){s.long0=t*f1.D2R},lon_1:function(t){s.long1=t*f1.D2R},lon_2:function(t){s.long2=t*f1.D2R},alpha:function(t){s.alpha=parseFloat(t)*f1.D2R},gamma:function(t){s.rectified_grid_angle=parseFloat(t)},lonc:function(t){s.longc=t*f1.D2R},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r:function(t){s.a=s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var i=f3(f5,t);i&&(s.to_meter=i.to_meter)},from_greenwich:function(t){s.from_greenwich=t*f1.D2R},pm:function(t){s.from_greenwich=(f3(f2,t)||parseFloat(t))*f1.D2R},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var i="ewnsud";3===t.length&&-1!==i.indexOf(t.substr(0,1))&&-1!==i.indexOf(t.substr(1,1))&&-1!==i.indexOf(t.substr(2,1))&&(s.axis=t)},approx:function(){s.approx=!0}};for(i in o)n=o[i],i in a?"function"==typeof(r=a[i])?r(n):s[r]=n:s[i]=n;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var f8=/\s/,f7=/[A-Za-z]/,f9=/[A-Za-z84_]/,pt=/[,\]]/,pe=/[\d\.E\-\+]/;function pi(t){if("string"!=typeof t)throw Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function pn(t,i,n){Array.isArray(i)&&(n.unshift(i),i=null);var r=i?{}:t,s=n.reduce(function(t,i){return pr(i,t),t},r);i&&(t[i]=s)}function pr(t,i){if(!Array.isArray(t)){i[t]=!0;return}var n,r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length){if(Array.isArray(t[0])){i[r]={},pr(t[0],i[r]);return}i[r]=t[0];return}if(!t.length){i[r]=!0;return}if("TOWGS84"===r){i[r]=t;return}if("AXIS"===r){r in i||(i[r]=[]),i[r].push(t);return}switch(!Array.isArray(r)&&(i[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":i[r]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&pr(t[2],i[r]);return;case"SPHEROID":case"ELLIPSOID":i[r]={name:t[0],a:t[1],rf:t[2]},4===t.length&&pr(t[3],i[r]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],pn(i,r,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],pn(i,r,t),i[r].type=r;return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return pr(t,i[r]);return pn(i,r,t)}}pi.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;f8.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case -1:return}},pi.prototype.afterquote=function(t){if('"'===t){this.word+='"',this.state=4;return}if(pt.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},pi.prototype.afterItem=function(t){if(","===t){null!==this.word&&this.currentObject.push(this.word),this.word=null,this.state=1;return}if("]"===t){this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=-1);return}},pi.prototype.number=function(t){if(pe.test(t)){this.word+=t;return}if(pt.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw Error("havn't handled \""+t+'" in number yet, index '+this.place)},pi.prototype.quoted=function(t){if('"'===t){this.state=5;return}this.word+=t},pi.prototype.keyword=function(t){if(f9.test(t)){this.word+=t;return}if("["===t){var i=[];i.push(this.word),this.level++,null===this.root?this.root=i:this.currentObject.push(i),this.stack.push(this.currentObject),this.currentObject=i,this.state=1;return}if(pt.test(t))return void this.afterItem(t);throw Error("havn't handled \""+t+'" in keyword yet, index '+this.place)},pi.prototype.neutral=function(t){if(f7.test(t)){this.word=t,this.state=2;return}if('"'===t){this.word="",this.state=4;return}if(pe.test(t)){this.word=t,this.state=3;return}if(pt.test(t))return void this.afterItem(t);throw Error("havn't handled \""+t+'" in neutral yet, index '+this.place)},pi.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw Error('unable to parse string "'+this.text+'". State is '+this.state)};var ps=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function po(t){return .017453292519943295*t}function pa(t){var i=new pi(t).output(),n=i[0],r={};return pr(i,r),!function t(i){for(var n=Object.keys(i),r=0,s=n.length;r<s;++r){var o=n[r];-1!==ps.indexOf(o)&&function(t){if(t.AUTHORITY){var i=Object.keys(t.AUTHORITY)[0];i&&i in t.AUTHORITY&&(t.title=i+":"+t.AUTHORITY[i])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,s=t.AXIS.length;r<s;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?n+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?n+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?n+="e":(-1!==o[0].indexOf("west")||("x"===o[0]||"lon"===o[0])&&"west"===o[1])&&(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function l(i){return i*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",po],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",po],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",po],["lat0","latitude_of_origin",po],["lat0","standard_parallel_1",po],["lat1","standard_parallel_1",po],["lat2","standard_parallel_2",po],["azimuth","Azimuth"],["alpha","azimuth",po],["srsCode","name"]].forEach(function(i){var n,r;return n=i[0],r=i[1],void(!(n in t)&&r in t&&(t[n]=t[r],3===i.length&&(t[n]=i[2](t[n]))))}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&("Stereographic_South_Pole"===t.projName||"Polar Stereographic (variant B)"===t.projName)?(t.lat0=po(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=po(t.lat0>0?90:-90))}(i[o]),"object"==typeof i[o]&&t(i[o])}}(r),r[n]}function pl(t){var i=this;if(2==arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?pl[t]=f6(arguments[1]):pl[t]=pa(arguments[1]):pl[t]=n}else if(1==arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?pl.apply(i,t):pl(t)});if("string"==typeof t){if(t in pl)return pl[t]}else"EPSG"in t?pl["EPSG:"+t.EPSG]=t:"ESRI"in t?pl["ESRI:"+t.ESRI]=t:"IAU2000"in t?pl["IAU2000:"+t.IAU2000]=t:console.log(t);return}}pl("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),pl("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),pl("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var pA=1;pA<=60;++pA)pl("EPSG:"+(32600+pA),"+proj=utm +zone="+pA+" +datum=WGS84 +units=m"),pl("EPSG:"+(32700+pA),"+proj=utm +zone="+pA+" +south +datum=WGS84 +units=m");pl.WGS84=pl["EPSG:4326"],pl["EPSG:3785"]=pl["EPSG:3857"],pl.GOOGLE=pl["EPSG:3857"],pl["EPSG:900913"]=pl["EPSG:3857"],pl["EPSG:102113"]=pl["EPSG:3857"];var ph=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],pc=["3857","900913","3785","102113"],pu=function(t){if("string"!=typeof t)return t;if(t in pl)return pl[t];if(ph.some(function(i){return t.indexOf(i)>-1})){var i=pa(t);if(function(t){var i=f3(t,"authority");if(i){var n=f3(i,"epsg");return n&&pc.indexOf(n)>-1}}(i))return pl["EPSG:3857"];var n=function(t){var i=f3(t,"extension");if(i)return f3(i,"proj4")}(i);return n?f6(n):i}if("+"===t[0])return f6(t)};function pd(t,i){var n,r;if(t=t||{},!i)return t;for(r in i)void 0!==(n=i[r])&&(t[r]=n);return t}var pg=I("bi5ZC"),pf=I("a9oRf"),pp=I("3xC66"),pm=I("2AZR8"),f1=I("gyVUi");function p_(t){return t}var py=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,pg.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var i,n,r=t.x,s=t.y;if(s*f1.R2D>90&&s*f1.R2D<-90&&r*f1.R2D>180&&r*f1.R2D<-180||Math.abs(Math.abs(s)-f1.HALF_PI)<=f1.EPSLN)return null;if(this.sphere)i=this.x0+this.a*this.k0*(0,pf.default)(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(f1.FORTPI+.5*s));else{var o=Math.sin(s),a=(0,pp.default)(this.e,s,o);i=this.x0+this.a*this.k0*(0,pf.default)(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=i,t.y=n,t},inverse:function(t){var i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=f1.HALF_PI-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(i=(0,pm.default)(this.e,s)))return null}return t.x=(0,pf.default)(this.long0+n/(this.a*this.k0)),t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:p_,inverse:p_,names:["longlat","identity"]}],pw={},pv=[];function pb(t,i){var n=pv.length;return t.names?(pv[n]=t,t.names.forEach(function(t){pw[t.toLowerCase()]=n}),this):(console.log(i),!0)}var f1=I("gyVUi"),pC={};pC.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},pC.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},pC.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},pC.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},pC.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},pC.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},pC.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},pC.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},pC.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},pC.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},pC.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},pC.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},pC.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},pC.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},pC.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},pC.clrk80ign={a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},pC.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},pC.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},pC.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},pC.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},pC.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},pC.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},pC.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},pC.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},pC.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},pC.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},pC.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},pC.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},pC.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},pC.hough={a:6378270,rf:297,ellipseName:"Hough"},pC.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},pC.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},pC.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},pC.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},pC.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},pC.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},pC.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},pC.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},pC.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},pC.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},pC.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},pC.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var px=pC.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};pC.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var pE={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var pB in pE){var pS=pE[pB];pE[pS.datumName]=pS}var f1=I("gyVUi"),pI=function(t,i,n,r,s,o,a){var l={};return void 0===t||"none"===t?l.datum_type=f1.PJD_NODATUM:l.datum_type=f1.PJD_WGS84,i&&(l.datum_params=i.map(parseFloat),(0!==l.datum_params[0]||0!==l.datum_params[1]||0!==l.datum_params[2])&&(l.datum_type=f1.PJD_3PARAM),l.datum_params.length>3&&(0!==l.datum_params[3]||0!==l.datum_params[4]||0!==l.datum_params[5]||0!==l.datum_params[6])&&(l.datum_type=f1.PJD_7PARAM,l.datum_params[3]*=f1.SEC_TO_RAD,l.datum_params[4]*=f1.SEC_TO_RAD,l.datum_params[5]*=f1.SEC_TO_RAD,l.datum_params[6]=l.datum_params[6]/1e6+1)),a&&(l.datum_type=f1.PJD_GRIDSHIFT,l.grids=a),l.a=n,l.b=r,l.es=s,l.ep2=o,l},pL={};function pF(t){if(0===t.length)return null;var i="@"===t[0];return(i&&(t=t.slice(1)),"null"===t)?{name:"null",mandatory:!i,grid:null,isNull:!0}:{name:t,mandatory:!i,grid:pL[t]||null,isNull:!1}}function pM(t){return t/3600*Math.PI/180}function pT(t,i,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(i,n)))}function pR(t,i){if(!(this instanceof pR))return new pR(t);i=i||function(t){if(t)throw t};var n,r,s,o,a,l,A,h,c,u=pu(t);if("object"!=typeof u)return void i("Could not parse to valid json: "+t);var d=pR.projections.get(u.projName);if(!d)return void i("Could not get projection name from: "+t);if(u.datumCode&&"none"!==u.datumCode){var g=f3(pE,u.datumCode);g&&(u.datum_params=u.datum_params||(g.towgs84?g.towgs84.split(","):null),u.ellps=g.ellipse,u.datumName=g.datumName?g.datumName:u.datumCode)}u.k0=u.k0||1,u.axis=u.axis||"enu",u.ellps=u.ellps||"wgs84",u.lat1=u.lat1||u.lat0;var f=function(t,i,n,r,s){if(!t){var o=f3(pC,r);o||(o=px),t=o.a,i=o.b,n=o.rf}return n&&!i&&(i=(1-1/n)*t),(0===n||Math.abs(t-i)<f1.EPSLN)&&(s=!0,i=t),{a:t,b:i,rf:n,sphere:s}}(u.a,u.b,u.rf,u.ellps,u.sphere),p=(n=f.a,r=f.b,f.rf,o=u.R_A,A=((a=n*n)-(l=r*r))/a,h=0,o?(n*=1-A*(f1.SIXTH+A*(f1.RA4+A*f1.RA6)),a=n*n,A=0):h=Math.sqrt(A),{es:A,e:h,ep2:(a-l)/l}),m=void 0===(c=u.nadgrids)?null:c.split(",").map(pF),_=u.datum||pI(u.datumCode,u.datum_params,f.a,f.b,p.es,p.ep2,m);pd(this,u),pd(this,d),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=_,this.init(),i(null,this)}pR.projections={start:function(){py.forEach(pb)},add:pb,get:function(t){if(!t)return!1;var i=t.toLowerCase();if(void 0!==pw[i]&&pv[pw[i]])return pv[pw[i]]}},pR.projections.start();var f1=(I("gyVUi"),I("gyVUi"),I("gyVUi"));function pO(t,i,n){var r,s,o,a=t.x,l=t.y,A=t.z?t.z:0;if(l<-f1.HALF_PI&&l>-1.001*f1.HALF_PI)l=-f1.HALF_PI;else if(l>f1.HALF_PI&&l<1.001*f1.HALF_PI)l=f1.HALF_PI;else if(l<-f1.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};else if(l>f1.HALF_PI)return{x:1/0,y:1/0,z:t.z};return a>Math.PI&&(a-=2*Math.PI),s=Math.sin(l),o=Math.cos(l),{x:((r=n/Math.sqrt(1-s*s*i))+A)*o*Math.cos(a),y:(r+A)*o*Math.sin(a),z:(r*(1-i)+A)*s}}function pD(t,i,n,r){var s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v=1e-12*1e-12,b=t.x,C=t.y,x=t.z?t.z:0;if(s=Math.sqrt(b*b+C*C),o=Math.sqrt(b*b+C*C+x*x),s/n<1e-12){if(_=0,o/n<1e-12)return f1.HALF_PI,w=-r,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(C,b);a=x/o,A=1/Math.sqrt(1-i*(2-i)*(l=s/o)*l),u=l*(1-i)*A,d=a*A,m=0;do m++,c=n/Math.sqrt(1-i*d*d),w=s*u+x*d-c*(1-i*d*d),A=1/Math.sqrt(1-(h=i*c/(c+w))*(2-h)*l*l),g=l*(1-h)*A,p=(f=a*A)*u-g*d,u=g,d=f;while(p*p>v&&m<30)return{x:_,y:Math.atan(f/Math.abs(g)),z:w}}var pf=I("a9oRf");function pP(t){return t===f1.PJD_3PARAM||t===f1.PJD_7PARAM}function pk(t,i,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},o=[];t:for(var a=0;a<t.grids.length;a++){var l=t.grids[a];if(o.push(l.name),l.isNull){s=r;break}if(l.mandatory,null===l.grid){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var A=l.grid.subgrids,h=0,c=A.length;h<c;h++){var u=A[h],d=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,g=u.ll[0]-d,f=u.ll[1]-d,p=u.ll[0]+(u.lim[0]-1)*u.del[0]+d,m=u.ll[1]+(u.lim[1]-1)*u.del[1]+d;if(!(f>r.y)&&!(g>r.x)&&!(m<r.y)&&!(p<r.x)&&!isNaN((s=function(t,i,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=(0,pf.default)(s.x-Math.PI)+Math.PI;var o=pN(s,n);if(i){if(isNaN(o.x))return r;o.x=s.x-o.x,o.y=s.y-o.y;var a,l,A=9;do{if(isNaN((l=pN(o,n)).x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:s.x-(l.x+o.x),y:s.y-(l.y+o.y)},o.x+=a.x,o.y+=a.y}while(A--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12)if(A<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=(0,pf.default)(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}(r,i,u)).x))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*f1.R2D+" "+r.y*f1.R2D+" tried: '"+o+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function pN(t,i){var n,r={x:t.x/i.del[0],y:t.y/i.del[1]},s={x:Math.floor(r.x),y:Math.floor(r.y)},o={x:r.x-s.x,y:r.y-s.y},a={x:Number.NaN,y:Number.NaN};if(s.x<0||s.x>=i.lim[0]||s.y<0||s.y>=i.lim[1])return a;n=s.y*i.lim[0]+s.x;var l={x:i.cvs[n][0],y:i.cvs[n][1]};n++;var A={x:i.cvs[n][0],y:i.cvs[n][1]};n+=i.lim[0];var h={x:i.cvs[n][0],y:i.cvs[n][1]};n--;var c={x:i.cvs[n][0],y:i.cvs[n][1]},u=o.x*o.y,d=o.x*(1-o.y),g=(1-o.x)*(1-o.y),f=(1-o.x)*o.y;return a.x=g*l.x+d*A.x+f*c.x+u*h.x,a.y=g*l.y+d*A.y+f*c.y+u*h.y,a}function pU(t,i,n){var r,s,o,a=n.x,l=n.y,A=n.z||0,h={};for(o=0;o<3;o++)if(!i||2!==o||void 0!==n.z)switch(0===o?(r=a,s=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=l,s=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=A,s="z"),t.axis[o]){case"e":case"n":h[s]=r;break;case"w":case"s":h[s]=-r;break;case"u":void 0!==n[s]&&(h.z=r);break;case"d":void 0!==n[s]&&(h.z=-r);break;default:return null}return h}function pQ(t){var i={x:t[0],y:t[1]};return t.length>2&&(i.z=t[2]),t.length>3&&(i.m=t[3]),i}function pH(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw TypeError("coordinates must be finite numbers")}function pG(t,i,n,r){var s,o,a,l=void 0!==(n=Array.isArray(n)?pQ(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(pH((s=n).x),pH(s.y),t.datum&&i.datum&&(((o=t).datum.datum_type===f1.PJD_3PARAM||o.datum.datum_type===f1.PJD_7PARAM||o.datum.datum_type===f1.PJD_GRIDSHIFT)&&"WGS84"!==i.datumCode||(i.datum.datum_type===f1.PJD_3PARAM||i.datum.datum_type===f1.PJD_7PARAM||i.datum.datum_type===f1.PJD_GRIDSHIFT)&&"WGS84"!==o.datumCode)&&(n=pG(t,a=new pR("WGS84"),n,r),t=a),r&&"enu"!==t.axis&&(n=pU(t,!1,n)),"longlat"===t.projName)n={x:n.x*f1.D2R,y:n.y*f1.D2R,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,i,n){if(r=t,s=i,!(r.datum_type!==s.datum_type||r.a!==s.a||Math.abs(r.es-s.es)>5e-11)&&(r.datum_type===f1.PJD_3PARAM?r.datum_params[0]===s.datum_params[0]&&r.datum_params[1]===s.datum_params[1]&&r.datum_params[2]===s.datum_params[2]:r.datum_type!==f1.PJD_7PARAM||r.datum_params[0]===s.datum_params[0]&&r.datum_params[1]===s.datum_params[1]&&r.datum_params[2]===s.datum_params[2]&&r.datum_params[3]===s.datum_params[3]&&r.datum_params[4]===s.datum_params[4]&&r.datum_params[5]===s.datum_params[5]&&r.datum_params[6]===s.datum_params[6])||t.datum_type===f1.PJD_NODATUM||i.datum_type===f1.PJD_NODATUM)return n;var r,s,o=t.a,a=t.es;if(t.datum_type===f1.PJD_GRIDSHIFT){if(0!==pk(t,!1,n))return;o=f1.SRS_WGS84_SEMIMAJOR,a=f1.SRS_WGS84_ESQUARED}var l=i.a,A=i.b,h=i.es;if(i.datum_type===f1.PJD_GRIDSHIFT&&(l=f1.SRS_WGS84_SEMIMAJOR,A=f1.SRS_WGS84_SEMIMINOR,h=f1.SRS_WGS84_ESQUARED),a===h&&o===l&&!pP(t.datum_type)&&!pP(i.datum_type)||(n=pO(n,a,o),pP(t.datum_type)&&(n=function(t,i,n){if(i===f1.PJD_3PARAM)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(i===f1.PJD_7PARAM){var r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],A=n[5],h=n[6];return{x:h*(t.x-A*t.y+l*t.z)+r,y:h*(A*t.x+t.y-a*t.z)+s,z:h*(-l*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),pP(i.datum_type)&&(n=function(t,i,n){if(i===f1.PJD_3PARAM)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(i===f1.PJD_7PARAM){var r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],A=n[5],h=n[6],c=(t.x-r)/h,u=(t.y-s)/h,d=(t.z-o)/h;return{x:c+A*u-l*d,y:-A*c+u+a*d,z:l*c-a*u+d}}}(n,i.datum_type,i.datum_params)),n=pD(n,h,l,A),i.datum_type!==f1.PJD_GRIDSHIFT||0===pk(i,!0,n)))return n}(t.datum,i.datum,n))return(i.from_greenwich&&(n={x:n.x-i.from_greenwich,y:n.y,z:n.z||0}),"longlat"===i.projName?n={x:n.x*f1.R2D,y:n.y*f1.R2D,z:n.z||0}:(n=i.forward(n),i.to_meter&&(n={x:n.x/i.to_meter,y:n.y/i.to_meter,z:n.z||0})),r&&"enu"!==i.axis)?pU(i,!0,n):(n&&!l&&delete n.z,n)}var pV=pR("WGS84");function pz(t,i,n,r){var s,o,a;if(Array.isArray(n))return(s=pG(t,i,n,r)||{x:NaN,y:NaN},n.length>2)?(void 0===t.name||"geocent"!==t.name)&&(void 0===i.name||"geocent"!==i.name)?[s.x,s.y].concat(n.slice(2)):"number"==typeof s.z?[s.x,s.y,s.z].concat(n.slice(3)):[s.x,s.y,n[2]].concat(n.slice(3)):[s.x,s.y];return o=pG(t,i,n,r),2===(a=Object.keys(n)).length||a.forEach(function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==i.name&&"geocent"===i.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]}),o}function pK(t){return t instanceof pR?t:t.oProj?t.oProj:pR(t)}var pj=function(t,i,n){t=pK(t);var r,s=!1;return(void 0===i?(i=t,t=pV,s=!0):(void 0!==i.x||Array.isArray(i))&&(n=i,i=t,t=pV,s=!0),i=pK(i),n)?pz(t,i,n):(r={forward:function(n,r){return pz(t,i,n,r)},inverse:function(n,r){return pz(i,t,n,r)}},s&&(r.oProj=i),r)},pW="AJSAJS",p$="AFAFAF";function pY(t,i){var n,r,s,o,a,l,A,h,c,u,d,g,f,p,m;return i=i||5,n=function(t){var i,n,r,s,o,a,l,A,h=t.lat,c=t.lon,u=pX(h),d=pX(c);A=Math.floor((c+180)/6)+1,180===c&&(A=60),h>=56&&h<64&&c>=3&&c<12&&(A=32),h>=72&&h<84&&(c>=0&&c<9?A=31:c>=9&&c<21?A=33:c>=21&&c<33?A=35:c>=33&&c<42&&(A=37)),l=pX((A-1)*6-180+3),r=6378137/Math.sqrt(1-.00669438*Math.sin(u)*Math.sin(u)),s=Math.tan(u)*Math.tan(u),o=.006739496752268451*Math.cos(u)*Math.cos(u);var g=.9996*r*((a=Math.cos(u)*(d-l))+(1-s+o)*a*a*a/6+(5-18*s+s*s+72*o-.39089081163157013)*a*a*a*a*a/120)+5e5,f=.9996*(6378137*(.9983242984503243*u-.002514607064228144*Math.sin(2*u)+2639046602129982e-21*Math.sin(4*u)-3418046101696858e-24*Math.sin(6*u))+r*Math.tan(u)*(a*a/2+(5-s+9*o+4*o*o)*a*a*a*a/24+(61-58*s+s*s+600*o-2.2240339282485886)*a*a*a*a*a*a/720));return h<0&&(f+=1e7),{northing:Math.round(f),easting:Math.round(g),zoneNumber:A,zoneLetter:(n="Z",84>=(i=h)&&i>=72?n="X":72>i&&i>=64?n="W":64>i&&i>=56?n="V":56>i&&i>=48?n="U":48>i&&i>=40?n="T":40>i&&i>=32?n="S":32>i&&i>=24?n="R":24>i&&i>=16?n="Q":16>i&&i>=8?n="P":8>i&&i>=0?n="N":0>i&&i>=-8?n="M":-8>i&&i>=-16?n="L":-16>i&&i>=-24?n="K":-24>i&&i>=-32?n="J":-32>i&&i>=-40?n="H":-40>i&&i>=-48?n="G":-48>i&&i>=-56?n="F":-56>i&&i>=-64?n="E":-64>i&&i>=-72?n="D":-72>i&&i>=-80&&(n="C"),n)}}({lat:t[1],lon:t[0]}),r=i,s="00000"+n.easting,o="00000"+n.northing,n.zoneNumber+n.zoneLetter+(a=n.easting,l=n.northing,A=n.zoneNumber,h=Math.floor(a/1e5),c=Math.floor(l/1e5)%20,u=p0(A)-1,d=pW.charCodeAt(u),g=p$.charCodeAt(u),f=d+h-1,p=g+c,m=!1,f>90&&(f=f-90+65-1,m=!0),(73===f||d<73&&f>73||(f>73||d<73)&&m)&&f++,(79===f||d<79&&f>79||(f>79||d<79)&&m)&&73==++f&&f++,f>90&&(f=f-90+65-1),p>86?(p=p-86+65-1,m=!0):m=!1,(73===p||g<73&&p>73||(p>73||g<73)&&m)&&p++,(79===p||g<79&&p>79||(p>79||g<79)&&m)&&73==++p&&p++,p>86&&(p=p-86+65-1),String.fromCharCode(f)+String.fromCharCode(p))+s.substr(s.length-5,r)+o.substr(o.length-5,r)}function pq(t){var i=pJ(p1(t.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat]:[(i.left+i.right)/2,(i.top+i.bottom)/2]}function pX(t){return Math.PI/180*t}function pZ(t){return t/Math.PI*180}function pJ(t){var i,n,r,s,o,a,l,A,h=t.northing,c=t.easting,u=t.zoneLetter,d=t.zoneNumber;if(d<0||d>60)return null;var g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),f=h;u<"N"&&(f-=1e7),i=6378137/Math.sqrt(1-.00669438*Math.sin(l=(a=f/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*a)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*a)+151*g*g*g/96*Math.sin(6*a))*Math.sin(l)),n=Math.tan(l)*Math.tan(l),r=.006739496752268451*Math.cos(l)*Math.cos(l),s=6335439.32722994/Math.pow(1-.00669438*Math.sin(l)*Math.sin(l),1.5),o=(c-5e5)/(.9996*i);var p=l-i*Math.tan(l)/s*(o*o/2-(5+3*n+10*r-4*r*r-.06065547077041606)*o*o*o*o/24+(61+90*n+298*r+45*n*n-1.6983531815716497-3*r*r)*o*o*o*o*o*o/720);p=pZ(p);var m=(o-(1+2*n+r)*o*o*o/6+(5-2*r+28*n-3*r*r+.05391597401814761+24*n*n)*o*o*o*o*o/120)/Math.cos(l);if(m=(d-1)*6-180+3+pZ(m),t.accuracy){var _=pJ({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});A={top:_.lat,right:_.lon,bottom:p,left:m}}else A={lat:p,lon:m};return A}function p0(t){var i=t%6;return 0===i&&(i=6),i}function p1(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var i,n,r=t.length,s=null,o="",a=0;!/[A-Z]/.test(i=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;o+=i,a++}var l=parseInt(o,10);if(0===a||a+3>r)throw"MGRSPoint bad conversion from: "+t;var A=t.charAt(a++);if(A<="A"||"B"===A||"Y"===A||A>="Z"||"I"===A||"O"===A)throw"MGRSPoint zone letter "+A+" not handled: "+t;s=t.substring(a,a+=2);for(var h=p0(l),c=function(t,i){for(var n=pW.charCodeAt(i-1),r=1e5,s=!1;n!==t.charCodeAt(0);){if(73==++n&&n++,79===n&&n++,n>90){if(s)throw"Bad character: "+t;n=65,s=!0}r+=1e5}return r}(s.charAt(0),h),u=function(t,i){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=p$.charCodeAt(i-1),r=0,s=!1;n!==t.charCodeAt(0);){if(73==++n&&n++,79===n&&n++,n>86){if(s)throw"Bad character: "+t;n=65,s=!0}r+=1e5}return r}(s.charAt(1),h);u<function(t){var i;switch(t){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+t}(A);)u+=2e6;var d=r-a;if(d%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var g=d/2,f=0,p=0;return g>0&&(n=1e5/Math.pow(10,g),f=parseFloat(t.substring(a,a+g))*n,p=parseFloat(t.substring(a+g))*n),{easting:f+c,northing:p+u,zoneLetter:A,zoneNumber:l,accuracy:n}}function p2(t,i,n){if(!(this instanceof p2))return new p2(t,i,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=i,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}p2.fromMGRS=function(t){return new p2(pq(t))},p2.prototype.toMGRS=function(t){return pY([this.x,this.y],t)};var p5=I("9t3dO"),p4=I("9zr9G"),pf=I("a9oRf"),p4=I("9zr9G");function p3(t,i){return Math.pow((1-t)/(1+t),i)}var f1=(I("gyVUi"),I("gyVUi")),p6={init:function(){var t=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+f1.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+f1.FORTPI),this.C)*p3(this.e*t,this.ratexp))},forward:function(t){var i=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+f1.FORTPI),this.C)*p3(this.e*Math.sin(n),this.ratexp))-f1.HALF_PI,t.x=this.C*i,t},inverse:function(t){for(var i=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+f1.FORTPI)/this.K,1/this.C),s=20;s>0&&!(1e-14>Math.abs((n=2*Math.atan(r*p3(this.e*Math.sin(t.y),-.5*this.e))-f1.HALF_PI)-t.y));--s)t.y=n;return s?(t.x=i,t.y=n,t):null},names:["gauss"]},pf=I("a9oRf"),p8=I("jU5gu"),p7=I("llHto"),pp=I("3xC66"),pf=I("a9oRf"),pm=I("2AZR8"),f1=I("gyVUi"),pg=I("bi5ZC"),pp=I("3xC66"),p9=I("boTd3"),pf=I("a9oRf"),pm=I("2AZR8"),f1=I("gyVUi");function mt(t,i,n,r,s){return t*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)}function me(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function mi(t){return .375*t*(1+.25*t*(1+.46875*t))}function mn(t){return .05859375*t*t*(1+.75*t)}function mr(t){return t*t*t*(35/3072)}function ms(t,i,n){var r=i*n;return t/Math.sqrt(1-r*r)}var pf=(I("a9oRf"),I("a9oRf")),f1=I("gyVUi"),p9=I("boTd3");function mo(t){return Math.abs(t)<f1.HALF_PI?t:t-(0,p9.default)(t)*Math.PI}function ma(t,i,n,r,s){o=t/i;for(var o,a,l=0;l<15;l++)if(a=(t-(i*o-n*Math.sin(2*o)+r*Math.sin(4*o)-s*Math.sin(6*o)))/(i-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*s*Math.cos(6*o)),o+=a,1e-10>=Math.abs(a))return o;return NaN}var f1=I("gyVUi"),ml=I("deudM"),mA=I("8mhgZ"),pf=I("a9oRf"),mh=I("ljPJJ"),f1=I("gyVUi"),pf=I("a9oRf"),mc=I("874JP"),pg=I("bi5ZC"),f1=I("gyVUi"),pf=(I("a9oRf"),I("a9oRf")),f1=I("gyVUi"),mu=I("6Eu1X"),pf=(I("a9oRf"),I("a9oRf")),md=I("gqKpL"),mg=I("hpUQm"),mf=I("jQUK6"),f1=I("gyVUi"),mh=I("ljPJJ"),pf=I("a9oRf"),f1=I("gyVUi"),pg=I("bi5ZC"),pf=I("a9oRf"),f1=I("gyVUi"),pf=I("a9oRf"),f1=I("gyVUi"),mh=I("ljPJJ"),pf=I("a9oRf"),f1=I("gyVUi"),mh=I("ljPJJ"),pf=I("a9oRf"),mh=I("ljPJJ"),f1=(I("gyVUi"),I("gyVUi")),mp={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mm={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function m_(t,i,n,r){var s;return t<f1.EPSLN?(r.value=mm.AREA_0,s=0):Math.abs(s=Math.atan2(i,n))<=f1.FORTPI?r.value=mm.AREA_0:s>f1.FORTPI&&s<=f1.HALF_PI+f1.FORTPI?(r.value=mm.AREA_1,s-=f1.HALF_PI):s>f1.HALF_PI+f1.FORTPI||s<=-(f1.HALF_PI+f1.FORTPI)?(r.value=mm.AREA_2,s=s>=0?s-f1.SPI:s+f1.SPI):(r.value=mm.AREA_3,s+=f1.HALF_PI),s}function my(t,i){var n=t+i;return n<-f1.SPI?n+=f1.TWO_PI:n>+f1.SPI&&(n-=f1.TWO_PI),n}var f1=I("gyVUi"),pf=I("a9oRf"),mw=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],mv=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],mb=f1.R2D/5,mC=1/mb,mx=function(t,i){return t[0]+i*(t[1]+i*(t[2]+i*t[3]))},f1=I("gyVUi"),p8=I("jU5gu"),mE={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},mB={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},p8=I("jU5gu"),pf=I("a9oRf"),mS=Math.sqrt(3)/2,pf=I("a9oRf"),p8=I("jU5gu"),md=I("gqKpL"),mf=I("jQUK6"),mg=I("hpUQm"),f1=I("gyVUi");function mI(t){var i,n,r,s=(0,pf.default)(t.x-(this.long0||0)),o=t.y;return i=this.am1+this.m1-(0,mg.default)(o,n=Math.sin(o),r=Math.cos(o),this.en),n=r*s/(i*Math.sqrt(1-this.es*n*n)),t.x=i*Math.sin(n),t.y=this.am1-i*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function mL(t){var i,n,r,s;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,n=(0,p8.default)(t.x,t.y=this.am1-t.y),(i=Math.abs(s=(0,mf.default)(this.am1+this.m1-n,this.es,this.en)))<f1.HALF_PI)i=Math.sin(s),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*i*i)/Math.cos(s);else if(1e-10>=Math.abs(i-f1.HALF_PI))r=0;else throw Error();return t.x=(0,pf.default)(r+(this.long0||0)),t.y=mo(s),t}function mF(t){var i,n,r=(0,pf.default)(t.x-(this.long0||0)),s=t.y;return Math.abs(n=this.cphi1+this.phi1-s)>1e-10?(t.x=n*Math.sin(i=r*Math.cos(s)/n),t.y=this.cphi1-n*Math.cos(i)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function mM(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var i,n,r=(0,p8.default)(t.x,t.y=this.cphi1-t.y);if(Math.abs(n=this.cphi1+this.phi1-r)>f1.HALF_PI)throw Error();return i=1e-10>=Math.abs(Math.abs(n)-f1.HALF_PI)?0:r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=(0,pf.default)(i+(this.long0||0)),t.y=mo(n),t}function mT(t){let i,n,r=Object.keys(t.defs),s=r.length;for(i=0;i<s;++i){let n=r[i];if(!eV(n)){let i=t.defs(n),r=i.units;r||"longlat"!==i.projName||(r="degrees"),is(new eM({code:n,axisOrientation:i.axis,metersPerUnit:i.to_meter,units:r}))}}for(i=0;i<s;++i){let o=r[i],a=eV(o);for(n=0;n<s;++n){let i=r[n],s=eV(i);if(!ej(o,i))if(t.defs[o]===t.defs[i])il([a,s]);else{let n=t(o,i);!function(t,i,n,r){let s=io(t),o=io(i);eK(s,o,ih(n)),eK(o,s,ih(r))}(a,s,ix(a,s,n.forward),ix(s,a,n.inverse))}}}}pj.defaultDatum="WGS84",pj.Proj=pR,pj.WGS84=new pj.Proj("WGS84"),pj.Point=p2,pj.toPoint=pQ,pj.defs=pl,pj.nadgrid=function(t,i){var n,r,s,o,a=new DataView(i),l=11!==(r=(n=a).getInt32(8,!1))&&(11!==(r=n.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0),A=(s=a,o=l,{nFields:s.getInt32(8,o),nSubgridFields:s.getInt32(24,o),nSubgrids:s.getInt32(40,o),shiftType:pT(s,56,64).trim(),fromSemiMajorAxis:s.getFloat64(120,o),fromSemiMinorAxis:s.getFloat64(136,o),toSemiMajorAxis:s.getFloat64(152,o),toSemiMinorAxis:s.getFloat64(168,o)}),h=function(t,i,n){for(var r=176,s=[],o=0;o<i.nSubgrids;o++){var a,l,A,h=(a=t,l=r,A=n,{name:pT(a,l+8,l+16).trim(),parent:pT(a,l+24,l+24+8).trim(),lowerLatitude:a.getFloat64(l+72,A),upperLatitude:a.getFloat64(l+88,A),lowerLongitude:a.getFloat64(l+104,A),upperLongitude:a.getFloat64(l+120,A),latitudeInterval:a.getFloat64(l+136,A),longitudeInterval:a.getFloat64(l+152,A),gridNodeCount:a.getInt32(l+168,A)}),c=function(t,i,n,r){for(var s=i+176,o=[],a=0;a<n.gridNodeCount;a++){var l={latitudeShift:t.getFloat32(s+16*a,r),longitudeShift:t.getFloat32(s+16*a+4,r),latitudeAccuracy:t.getFloat32(s+16*a+8,r),longitudeAccuracy:t.getFloat32(s+16*a+12,r)};o.push(l)}return o}(t,r,h,n),u=Math.round(1+(h.upperLongitude-h.lowerLongitude)/h.longitudeInterval),d=Math.round(1+(h.upperLatitude-h.lowerLatitude)/h.latitudeInterval);s.push({ll:[pM(h.lowerLongitude),pM(h.lowerLatitude)],del:[pM(h.longitudeInterval),pM(h.latitudeInterval)],lim:[u,d],count:h.gridNodeCount,cvs:c.map(function(t){return[pM(t.longitudeShift),pM(t.latitudeShift)]})}),r+=176+16*h.gridNodeCount}return s}(a,A,l),c={header:A,subgrids:h};return pL[t]=c,c},pj.transform=pG,pj.mgrs={forward:pY,inverse:function(t){var i=pJ(p1(t.toUpperCase()));return i.lat&&i.lon?[i.lon,i.lat,i.lon,i.lat]:[i.left,i.bottom,i.right,i.top]},toPoint:pq},pj.version="__VERSION__",pj.Proj.projections.add(p5.default),pj.Proj.projections.add(p4.default),pj.Proj.projections.add({init:function(){var t=function(t,i){if(void 0===t){if((t=Math.floor(((0,pf.default)(i)+Math.PI)*30/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*f1.D2R,this.x0=5e5,this.y0=1e7*!!this.utmSouth,this.k0=.9996,p4.default.init.apply(this),this.forward=p4.default.forward,this.inverse=p4.default.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"}),pj.Proj.projections.add({init:function(){p6.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var i,n,r,s;return t.x=(0,pf.default)(t.x-this.long0),p6.forward.apply(this,[t]),i=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),t.x=(s=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*n*r))*n*Math.sin(t.x),t.y=s*(this.cosc0*i-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var i,n,r,s,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=(0,p8.default)(t.x,t.y)){var a=2*Math.atan2(o,this.R2);i=Math.sin(a),s=Math.asin((n=Math.cos(a))*this.sinc0+t.y*i*this.cosc0/o),r=Math.atan2(t.x*i,o*this.cosc0*n-t.y*this.sinc0*i)}else s=this.phic0,r=0;return t.x=r,t.y=s,p6.inverse.apply(this,[t]),t.x=(0,pf.default)(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]}),pj.Proj.projections.add(p7.default),pj.Proj.projections.add({init:function(){var t=this.lat0;this.lambda0=this.long0;var i=Math.sin(t),n=this.a,r=1/this.rf,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(i,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(i/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),A=Math.log((1+o*i)/(1-o*i));this.K=a-this.alpha*l+this.alpha*o/2*A},forward:function(t){var i=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=2*(Math.atan(Math.exp(-this.alpha*(i+n)+this.K))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var i=t.x-this.x0,n=t.y-this.y0,r=i/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(s))),l=this.lambda0+a/this.alpha,A=0,h=o,c=-1e3,u=0;Math.abs(h-c)>1e-7;){if(++u>20)return;A=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(A))-Math.PI/2}return t.x=l,t.y=h,t},names:["somerc"]}),pj.Proj.projections.add({init:function(){var t,i,n,r,s,o,a,l,A,h,c,u=0,d=0,g=0,f=0,p=0,m=0,_=0;this.no_off=(t="object"==typeof this.PROJECTION?Object.keys(this.PROJECTION)[0]:this.PROJECTION,"no_uoff"in this||"no_off"in this||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(t)),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),y&&(_=this.alpha),w&&(u=this.rectified_grid_angle*f1.D2R),y||w)d=this.longc;else if(g=this.long1,p=this.lat1,f=this.long2,1e-7>=Math.abs(p-(m=this.lat2))||(i=Math.abs(p))<=1e-7||1e-7>=Math.abs(i-f1.HALF_PI)||1e-7>=Math.abs(Math.abs(this.lat0)-f1.HALF_PI)||1e-7>=Math.abs(Math.abs(m)-f1.HALF_PI))throw Error();var v=1-this.es;(n=Math.sqrt(v),Math.abs(this.lat0)>f1.EPSLN?(A=Math.sin(this.lat0),r=Math.cos(this.lat0),i=1-this.es*A*A,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/v),this.A=this.B*this.k0*n/i,(o=(s=this.B*n/(r*Math.sqrt(i)))*s-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=s,this.E*=Math.pow((0,pp.default)(this.e,this.lat0,A),this.B)):(this.B=1/n,this.A=this.k0,this.E=s=o=1),y||w)?(y?(c=Math.asin(Math.sin(_)/s),w||(u=_)):_=Math.asin(s*Math.sin(c=u)),this.lam0=d-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(a=Math.pow((0,pp.default)(this.e,p,Math.sin(p)),this.B),l=Math.pow((0,pp.default)(this.e,m,Math.sin(m)),this.B),o=this.E/a,h=((h=this.E*this.E)-l*a)/(h+l*a),(i=g-f)<-Math.pi?f-=f1.TWO_PI:i>Math.pi&&(f+=f1.TWO_PI),this.lam0=(0,pf.default)(.5*(g+f)-Math.atan(h*Math.tan(.5*this.B*(g-f))/((l-a)/(l+a)))/this.B),u=_=Math.asin(s*Math.sin(c=Math.atan(2*Math.sin(this.B*(0,pf.default)(g-this.lam0))/(o-1/o))))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(f1.FORTPI-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(f1.FORTPI+o))},forward:function(t){var i,n,r,s,o,a,l,A,h={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-f1.HALF_PI)>f1.EPSLN){if(a=1/(o=this.E/Math.pow((0,pp.default)(this.e,t.y,Math.sin(t.y)),this.B)),i=.5*(o-a),n=.5*(o+a),s=Math.sin(this.B*t.x),Math.abs(Math.abs(r=(i*this.singam-s*this.cosgam)/n)-1)<f1.EPSLN)throw Error();A=.5*this.ArB*Math.log((1-r)/(1+r)),l=1e-7>Math.abs(a=Math.cos(this.B*t.x))?this.A*t.x:this.ArB*Math.atan2(i*this.cosgam+s*this.singam,a)}else A=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(h.x=l,h.y=A):(l-=this.u_0,h.x=A*this.cosrot+l*this.sinrot,h.y=l*this.cosrot-A*this.sinrot),h.x=this.a*h.x+this.x0,h.y=this.a*h.y+this.y0,h},inverse:function(t){var i,n,r,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,i=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,i=t.y*this.cosrot+t.x*this.sinrot+this.u_0),s=.5*((r=Math.exp(-this.BrA*n))-1/r),Math.abs(Math.abs(a=((o=Math.sin(this.BrA*i))*this.cosgam+s*this.singam)/(.5*(r+1/r)))-1)<f1.EPSLN)l.x=0,l.y=a<0?-f1.HALF_PI:f1.HALF_PI;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=(0,pm.default)(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw Error();l.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*i))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]}),pj.Proj.projections.add({init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<f1.EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var i=Math.sin(this.lat1),n=Math.cos(this.lat1),r=(0,pg.default)(this.e,i,n),s=(0,pp.default)(this.e,this.lat1,i),o=Math.sin(this.lat2),a=Math.cos(this.lat2),l=(0,pg.default)(this.e,o,a),A=(0,pp.default)(this.e,this.lat2,o),h=(0,pp.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>f1.EPSLN?this.ns=Math.log(r/l)/Math.log(s/A):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=r/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var i,n,r=t.x,s=t.y;Math.abs(2*Math.abs(s)-Math.PI)<=f1.EPSLN&&(s=(0,p9.default)(s)*(f1.HALF_PI-2*f1.EPSLN));var o=Math.abs(Math.abs(s)-f1.HALF_PI);if(o>f1.EPSLN)i=(0,pp.default)(this.e,s,Math.sin(s)),n=this.a*this.f0*Math.pow(i,this.ns);else{if((o=s*this.ns)<=0)return null;n=0}var a=this.ns*(0,pf.default)(r-this.long0);return t.x=this.k0*(n*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(a))+this.y0,t},inverse:function(t){var i,n,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(o*o+a*a),n=1):(i=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(0!==i&&(l=Math.atan2(n*o,n*a)),0!==i||this.ns>0){if(n=1/this.ns,r=Math.pow(i/(this.a*this.f0),n),-9999===(s=(0,pm.default)(this.e,r)))return null}else s=-f1.HALF_PI;return t.x=(0,pf.default)(l/this.ns+this.long0),t.y=s,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]}),pj.Proj.projections.add({init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var i,n,r,s,o,a,l,A=t.x,h=t.y,c=(0,pf.default)(A-this.long0);return i=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/i)-this.s45),r=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(s)),a=this.n*o,t.y=(l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n))*Math.cos(a)/1,t.x=l*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var i,n,r,s,o,a,l,A=t.x;t.x=t.y,t.y=A,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),n=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(i)),t.x=this.long0-n/this.alfa,a=i,l=0;var h=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),1e-10>Math.abs(a-t.y)&&(l=1),a=t.y,h+=1;while(0===l&&h<15)return h>=15?null:t},names:["Krovak","krovak"]}),pj.Proj.projections.add({init:function(){this.sphere||(this.e0=me(this.es),this.e1=mi(this.es),this.e2=mn(this.es),this.e3=mr(this.es),this.ml0=this.a*mt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var i,n,r=t.x,s=t.y;if(r=(0,pf.default)(r-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(s)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var o=Math.sin(s),a=Math.cos(s),l=ms(this.a,this.e,o),A=Math.tan(s)*Math.tan(s),h=r*Math.cos(s),c=h*h,u=this.es*a*a/(1-this.es),d=this.a*mt(this.e0,this.e1,this.e2,this.e3,s);i=l*h*(1-c*A*(1/6-(8-A+8*u)*c/120)),n=d-this.ml0+l*o/a*c*(.5+(5-A+6*u)*c/24)}return t.x=i+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i,n,r=t.x/this.a,s=t.y/this.a;if(this.sphere){var o=s+this.lat0;i=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=ma(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-f1.HALF_PI)<=f1.EPSLN)return t.x=this.long0,t.y=f1.HALF_PI,s<0&&(t.y*=-1),t;var l=ms(this.a,this.e,Math.sin(a)),A=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),c=r*this.a/l,u=c*c;i=a-l*Math.tan(a)/A*c*c*(.5-(1+3*h)*c*c/24),n=c*(1-u*(h/3+(1+3*h)*h*u/15))/Math.cos(a)}return t.x=(0,pf.default)(n+this.long0),t.y=mo(i),t},names:["Cassini","Cassini_Soldner","cass"]}),pj.Proj.projections.add(ml.default),pj.Proj.projections.add(mA.default),pj.Proj.projections.add({init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var i,n,r,s,o,a,l,A=t.x,h=t.y;return r=(0,pf.default)(A-this.long0),i=Math.sin(h),n=Math.cos(h),s=Math.cos(r),(o=this.sin_p14*i+this.cos_p14*n*s)>0||Math.abs(o)<=f1.EPSLN?(a=this.x0+this.a*n*Math.sin(r)/o,l=this.y0+this.a*(this.cos_p14*i-this.sin_p14*n*s)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*n*s)),t.x=a,t.y=l,t},inverse:function(t){var i,n,r,s,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(i=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.sin(s=Math.atan2(i,this.rc)),r=Math.cos(s),a=(0,mh.default)(r*this.sin_p14+t.y*n*this.cos_p14/i),o=Math.atan2(t.x*n,i*this.cos_p14*r-t.y*this.sin_p14*n),o=(0,pf.default)(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]}),pj.Proj.projections.add({init:function(){this.sphere||(this.k0=(0,pg.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var i,n,r=t.x,s=t.y,o=(0,pf.default)(r-this.long0);if(this.sphere)i=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var a=(0,mc.default)(this.e,Math.sin(s));i=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=i,t.y=n,t},inverse:function(t){var i,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(i=(0,pf.default)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,i){if(1e-6>Math.abs(Math.abs(i)-(1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t)))))if(i<0)return -1*f1.HALF_PI;else return f1.HALF_PI;for(var n,r,s,o,a=Math.asin(.5*i),l=0;l<30;l++)if(r=Math.sin(a),s=Math.cos(a),a+=n=Math.pow(1-(o=t*r)*o,2)/(2*s)*(i/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),1e-10>=Math.abs(n))return a;return NaN}(this.e,2*t.y*this.k0/this.a),i=(0,pf.default)(this.long0+t.x/(this.a*this.k0))),t.x=i,t.y=n,t},names:["cea"]}),pj.Proj.projections.add({init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var i=t.x,n=t.y,r=(0,pf.default)(i-this.long0),s=mo(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var i=t.x,n=t.y;return t.x=(0,pf.default)(this.long0+(i-this.x0)/(this.a*this.rc)),t.y=mo(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]}),pj.Proj.projections.add({init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=me(this.es),this.e1=mi(this.es),this.e2=mn(this.es),this.e3=mr(this.es),this.ml0=this.a*mt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var i,n,r,s=t.x,o=t.y,a=(0,pf.default)(s-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=f1.EPSLN?(i=this.a*a,n=-1*this.a*this.lat0):(i=this.a*Math.sin(r)/Math.tan(o),n=this.a*(mo(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=f1.EPSLN)i=this.a*a,n=-1*this.ml0;else{var l=ms(this.a,this.e,Math.sin(o))/Math.tan(o);i=l*Math.sin(r),n=this.a*mt(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+l*(1-Math.cos(r))}return t.x=i+this.x0,t.y=n+this.y0,t},inverse:function(t){var i,n,r,s,o,a,l,A,h,c,u,d,g,f,p;if(r=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=f1.EPSLN)i=(0,pf.default)(r/this.a+this.long0),n=0;else{for(o=20,a=this.lat0+s/this.a,l=r*r/this.a/this.a+a*a,A=a;o;--o)if(c=Math.tan(A),h=-1*(a*(A*c+1)-A-.5*(A*A+l)*c)/((A-a)/c-1),A+=h,Math.abs(h)<=f1.EPSLN){n=A;break}i=(0,pf.default)(this.long0+Math.asin(r*Math.tan(A)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=f1.EPSLN)n=0,i=(0,pf.default)(this.long0+r/this.a);else{for(o=20,a=(this.ml0+s)/this.a,l=r*r/this.a/this.a+a*a,A=a;o;--o)if(u=Math.sqrt(1-(p=this.e*Math.sin(A))*p)*Math.tan(A),d=this.a*mt(this.e0,this.e1,this.e2,this.e3,A),g=this.e0-2*this.e1*Math.cos(2*A)+4*this.e2*Math.cos(4*A)-6*this.e3*Math.cos(6*A),h=(a*(u*(f=d/this.a)+1)-f-.5*u*(f*f+l))/(this.es*Math.sin(2*A)*(f*f+l-2*a*f)/(4*u)+(a-f)*(u*g-2/Math.sin(2*A))-g),A-=h,Math.abs(h)<=f1.EPSLN){n=A;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),i=(0,pf.default)(this.long0+Math.asin(r*u/this.a)/Math.sin(n))}return t.x=i,t.y=n,t},names:["Polyconic","poly"]}),pj.Proj.projections.add(mu.default),pj.Proj.projections.add({init:function(){},forward:function(t){var i=t.x,n=t.y,r=(0,pf.default)(i-this.long0),s=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var i=(0,pf.default)(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=i,t.y=n,t},names:["Miller_Cylindrical","mill"]}),pj.Proj.projections.add({init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,md.default)(this.es)},forward:function(t){var i,n,r=t.x,s=t.y;if(r=(0,pf.default)(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(s),a=20;a;--a){var l=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=l,Math.abs(l)<f1.EPSLN)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;i=this.a*this.C_x*r*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var A=Math.sin(s),h=Math.cos(s);n=this.a*(0,mg.default)(s,A,h,this.en),i=this.a*r*h/Math.sqrt(1-this.es*A*A)}return t.x=i,t.y=n,t},inverse:function(t){var i,n,r,s;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,i=t.y/this.a,this.sphere?(i/=this.C_y,r/=this.C_x*(this.m+Math.cos(i)),this.m?i=(0,mh.default)((this.m*i+Math.sin(i))/this.n):1!==this.n&&(i=(0,mh.default)(Math.sin(i)/this.n)),r=(0,pf.default)(r+this.long0),i=mo(i)):(s=Math.abs(i=(0,mf.default)(t.y/this.a,this.es,this.en)))<f1.HALF_PI?(s=Math.sin(i),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(i)),r=(0,pf.default)(n)):s-f1.EPSLN<f1.HALF_PI&&(r=this.long0),t.x=r,t.y=i,t},names:["Sinusoidal","sinu"]}),pj.Proj.projections.add({init:function(){},forward:function(t){for(var i=t.x,n=t.y,r=(0,pf.default)(i-this.long0),s=n,o=Math.PI*Math.sin(n);;){var a=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=a,Math.abs(a)<f1.EPSLN)break}s/=2,Math.PI/2-Math.abs(n)<f1.EPSLN&&(r=0);var l=.900316316158*this.a*r*Math.cos(s)+this.x0,A=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=l,t.y=A,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0,Math.abs(i=t.y/(1.4142135623731*this.a))>.999999999999&&(i=.999999999999);var i,n=Math.asin(i),r=(0,pf.default)(this.long0+t.x/(.900316316158*this.a*Math.cos(n)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),Math.abs(i=(2*n+Math.sin(2*n))/Math.PI)>1&&(i=1);var s=Math.asin(i);return t.x=r,t.y=s,t},names:["Mollweide","moll"]}),pj.Proj.projections.add({init:function(){Math.abs(this.lat1+this.lat2)<f1.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=me(this.es),this.e1=mi(this.es),this.e2=mn(this.es),this.e3=mr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,pg.default)(this.e,this.sinphi,this.cosphi),this.ml1=mt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<f1.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,pg.default)(this.e,this.sinphi,this.cosphi),this.ml2=mt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var i,n=t.x,r=t.y;if(this.sphere)i=this.a*(this.g-r);else{var s=mt(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-s)}var o=this.ns*(0,pf.default)(n-this.long0),a=this.x0+i*Math.sin(o),l=this.y0+this.rh-i*Math.cos(o);return t.x=a,t.y=l,t},inverse:function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1);var i,n,r,s,o=0;return(0!==n&&(o=Math.atan2(i*t.x,i*t.y)),this.sphere)?(s=(0,pf.default)(this.long0+o/this.ns),r=mo(this.g-n/this.a),t.x=s):(r=ma(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),t.x=s=(0,pf.default)(this.long0+o/this.ns)),t.y=r,t},names:["Equidistant_Conic","eqdc"]}),pj.Proj.projections.add({init:function(){this.R=this.a},forward:function(t){var i,n,r=t.x,s=t.y,o=(0,pf.default)(r-this.long0);Math.abs(s)<=f1.EPSLN&&(i=this.x0+this.R*o,n=this.y0);var a=(0,mh.default)(2*Math.abs(s/Math.PI));(Math.abs(o)<=f1.EPSLN||Math.abs(Math.abs(s)-f1.HALF_PI)<=f1.EPSLN)&&(i=this.x0,n=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+-(Math.PI*this.R*Math.tan(.5*a)));var l=.5*Math.abs(Math.PI/o-o/Math.PI),A=l*l,h=Math.sin(a),c=Math.cos(a),u=c/(h+c-1),d=u*(2/h-1),g=d*d,f=Math.PI*this.R*(l*(u-g)+Math.sqrt(A*(u-g)*(u-g)-(g+A)*(u*u-g)))/(g+A);o<0&&(f=-f),i=this.x0+f;var p=A+u;return f=Math.PI*this.R*(d*p-l*Math.sqrt((g+A)*(A+1)-p*p))/(g+A),n=s>=0?this.y0+f:this.y0-f,t.x=i,t.y=n,t},inverse:function(t){var i,n,r,s,o,a,l,A,h,c,u,d,g;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,o=(r=t.x/u)*r+(s=t.y/u)*s,l=(a=-Math.abs(s)*(1+o))-2*s*s+r*r,A=-2*a+1+2*s*s+o*o,g=s*s/A+(2*l*l*l/A/A/A-9*a*l/A/A)/27,c=2*Math.sqrt(-(h=(a-l*l/3/A)/A)/3),Math.abs(u=3*g/h/c)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,n=t.y>=0?(-c*Math.cos(d+Math.PI/3)-l/3/A)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-l/3/A)*Math.PI,t.x=Math.abs(r)<f1.EPSLN?this.long0:(0,pf.default)(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-s*s)+o*o))/2/r),t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]}),pj.Proj.projections.add({init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var i,n,r,s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v,b,C,x=t.x,E=t.y,B=Math.sin(t.y),S=Math.cos(t.y),I=(0,pf.default)(x-this.long0);if(this.sphere)if(Math.abs(this.sin_p12-1)<=f1.EPSLN)return t.x=this.x0+this.a*(f1.HALF_PI-E)*Math.sin(I),t.y=this.y0-this.a*(f1.HALF_PI-E)*Math.cos(I),t;else if(Math.abs(this.sin_p12+1)<=f1.EPSLN)return t.x=this.x0+this.a*(f1.HALF_PI+E)*Math.sin(I),t.y=this.y0+this.a*(f1.HALF_PI+E)*Math.cos(I),t;else return _=(m=Math.acos(this.sin_p12*B+this.cos_p12*S*Math.cos(I)))?m/Math.sin(m):1,t.x=this.x0+this.a*_*S*Math.sin(I),t.y=this.y0+this.a*_*(this.cos_p12*B-this.sin_p12*S*Math.cos(I)),t;return(i=me(this.es),n=mi(this.es),r=mn(this.es),s=mr(this.es),Math.abs(this.sin_p12-1)<=f1.EPSLN)?(o=this.a*mt(i,n,r,s,f1.HALF_PI),a=this.a*mt(i,n,r,s,E),t.x=this.x0+(o-a)*Math.sin(I),t.y=this.y0-(o-a)*Math.cos(I)):Math.abs(this.sin_p12+1)<=f1.EPSLN?(o=this.a*mt(i,n,r,s,f1.HALF_PI),a=this.a*mt(i,n,r,s,E),t.x=this.x0+(o+a)*Math.sin(I),t.y=this.y0+(o+a)*Math.cos(I)):(l=B/S,A=ms(this.a,this.e,this.sin_p12),h=ms(this.a,this.e,B),c=Math.atan((1-this.es)*l+this.es*A*this.sin_p12/(h*S)),y=0===(u=Math.atan2(Math.sin(I),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(I)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=f1.EPSLN?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(I)*Math.cos(c)/Math.sin(u)),f=(d=this.e*this.sin_p12/Math.sqrt(1-this.es))*(g=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es)),p=g*g,C=(b=(v=(w=y*y)*y)*y)*y,m=A*y*(1-w*p*(1-p)/6+v/8*f*(1-2*p)+b/120*(p*(4-7*p)-3*d*d*(1-7*p))-C/48*f),t.x=this.x0+m*Math.sin(u),t.y=this.y0+m*Math.cos(u)),t},inverse:function(t){var i,n,r,s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v,b,C;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((i=Math.sqrt(t.x*t.x+t.y*t.y))>2*f1.HALF_PI*this.a)return;return r=Math.sin(n=i/this.a),s=Math.cos(n),o=this.long0,Math.abs(i)<=f1.EPSLN?a=this.lat0:(a=(0,mh.default)(s*this.sin_p12+t.y*r*this.cos_p12/i),o=Math.abs(Math.abs(this.lat0)-f1.HALF_PI)<=f1.EPSLN?this.lat0>=0?(0,pf.default)(this.long0+Math.atan2(t.x,-t.y)):(0,pf.default)(this.long0-Math.atan2(-t.x,t.y)):(0,pf.default)(this.long0+Math.atan2(t.x*r,i*this.cos_p12*s-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return(l=me(this.es),A=mi(this.es),h=mn(this.es),c=mr(this.es),Math.abs(this.sin_p12-1)<=f1.EPSLN)?(a=ma(((u=this.a*mt(l,A,h,c,f1.HALF_PI))-(i=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,A,h,c),o=(0,pf.default)(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=f1.EPSLN?(u=this.a*mt(l,A,h,c,f1.HALF_PI),a=ma(((i=Math.sqrt(t.x*t.x+t.y*t.y))-u)/this.a,l,A,h,c),o=(0,pf.default)(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(i=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.x,t.y),g=ms(this.a,this.e,this.sin_p12),m=Math.cos(p),y=-(_=this.e*this.cos_p12*m)*_/(1-this.es),w=3*this.es*(1-y)*this.sin_p12*this.cos_p12*m/(1-this.es),b=(v=i/g)-y*(1+y)*Math.pow(v,3)/6-w*(1+3*y)*Math.pow(v,4)/24,f=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*m),o=(0,pf.default)(this.long0+Math.asin(Math.sin(p)*Math.sin(b)/Math.cos(f))),a=Math.atan2(((C=Math.sin(f))-this.es*(1-y*b*b/2-v*b*b*b/6)*this.sin_p12)*Math.tan(f),C*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]}),pj.Proj.projections.add({init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var i,n,r,s,o,a,l,A=t.x,h=t.y;return r=(0,pf.default)(A-this.long0),i=Math.sin(h),n=Math.cos(h),s=Math.cos(r),((o=this.sin_p14*i+this.cos_p14*n*s)>0||Math.abs(o)<=f1.EPSLN)&&(a=this.a*n*Math.sin(r),l=this.y0+this.a*(this.cos_p14*i-this.sin_p14*n*s)),t.x=a,t.y=l,t},inverse:function(t){var i,n,r,s,o,a;return(t.x-=this.x0,t.y-=this.y0,i=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.sin(n=(0,mh.default)(i/this.a)),s=Math.cos(n),o=this.long0,Math.abs(i)<=f1.EPSLN)?a=this.lat0:(a=(0,mh.default)(s*this.sin_p14+t.y*r*this.cos_p14/i),Math.abs(Math.abs(this.lat0)-f1.HALF_PI)<=f1.EPSLN)?o=this.lat0>=0?(0,pf.default)(this.long0+Math.atan2(t.x,-t.y)):(0,pf.default)(this.long0-Math.atan2(-t.x,t.y)):o=(0,pf.default)(this.long0+Math.atan2(t.x*r,i*this.cos_p14*s-t.y*this.sin_p14*r)),t.x=o,t.y=a,t},names:["ortho"]}),pj.Proj.projections.add({init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=f1.HALF_PI-f1.FORTPI/2?this.face=mp.TOP:this.lat0<=-(f1.HALF_PI-f1.FORTPI/2)?this.face=mp.BOTTOM:Math.abs(this.long0)<=f1.FORTPI?this.face=mp.FRONT:Math.abs(this.long0)<=f1.HALF_PI+f1.FORTPI?this.face=this.long0>0?mp.RIGHT:mp.LEFT:this.face=mp.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var i,n,r,s,o,a,l,A,h,c,u,d={x:0,y:0},g={value:0};return(t.x-=this.long0,i=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===mp.TOP)?(s=f1.HALF_PI-i,n>=f1.FORTPI&&n<=f1.HALF_PI+f1.FORTPI?(g.value=mm.AREA_0,r=n-f1.HALF_PI):n>f1.HALF_PI+f1.FORTPI||n<=-(f1.HALF_PI+f1.FORTPI)?(g.value=mm.AREA_1,r=n>0?n-f1.SPI:n+f1.SPI):n>-(f1.HALF_PI+f1.FORTPI)&&n<=-f1.FORTPI?(g.value=mm.AREA_2,r=n+f1.HALF_PI):(g.value=mm.AREA_3,r=n)):this.face===mp.BOTTOM?(s=f1.HALF_PI+i,n>=f1.FORTPI&&n<=f1.HALF_PI+f1.FORTPI?(g.value=mm.AREA_0,r=-n+f1.HALF_PI):n<f1.FORTPI&&n>=-f1.FORTPI?(g.value=mm.AREA_1,r=-n):n<-f1.FORTPI&&n>=-(f1.HALF_PI+f1.FORTPI)?(g.value=mm.AREA_2,r=-n-f1.HALF_PI):(g.value=mm.AREA_3,r=n>0?-n+f1.SPI:-n-f1.SPI)):(this.face===mp.RIGHT?n=my(n,+f1.HALF_PI):this.face===mp.BACK?n=my(n,+f1.SPI):this.face===mp.LEFT&&(n=my(n,-f1.HALF_PI)),h=Math.sin(i),c=Math.cos(i),u=Math.sin(n),l=c*Math.cos(n),A=c*u,this.face===mp.FRONT?r=m_(s=Math.acos(l),h,A,g):this.face===mp.RIGHT?r=m_(s=Math.acos(A),h,-l,g):this.face===mp.BACK?r=m_(s=Math.acos(-l),h,-A,g):this.face===mp.LEFT?r=m_(s=Math.acos(-A),h,l,g):(s=r=0,g.value=mm.AREA_0)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a=Math.atan(12/f1.SPI*(r+Math.acos(Math.sin(r)*Math.cos(f1.FORTPI))-f1.HALF_PI)))*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),g.value===mm.AREA_1?a+=f1.HALF_PI:g.value===mm.AREA_2?a+=f1.SPI:g.value===mm.AREA_3&&(a+=1.5*f1.SPI),d.x=o*Math.cos(a),d.y=o*Math.sin(a),d.x=d.x*this.a+this.x0,d.y=d.y*this.a+this.y0,t.x=d.x,t.y=d.y,t},inverse:function(t){var i,n,r,s,o,a,l,A,h,c,u,d,g,f,p={lam:0,phi:0},m={value:0};return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=mm.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=mm.AREA_1,i-=f1.HALF_PI):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=mm.AREA_2,i=i<0?i+f1.SPI:i-f1.SPI):(m.value=mm.AREA_3,i+=f1.HALF_PI),o=Math.atan(Math.sin(A=f1.SPI/12*Math.tan(i))/(Math.cos(A)-1/Math.sqrt(2))),(a=1-(r=Math.cos(i))*r*(s=Math.tan(n))*s*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),this.face===mp.TOP?(l=Math.acos(a),p.phi=f1.HALF_PI-l,m.value===mm.AREA_0?p.lam=o+f1.HALF_PI:m.value===mm.AREA_1?p.lam=o<0?o+f1.SPI:o-f1.SPI:m.value===mm.AREA_2?p.lam=o-f1.HALF_PI:p.lam=o):this.face===mp.BOTTOM?(p.phi=(l=Math.acos(a))-f1.HALF_PI,m.value===mm.AREA_0?p.lam=-o+f1.HALF_PI:m.value===mm.AREA_1?p.lam=-o:m.value===mm.AREA_2?p.lam=-o-f1.HALF_PI:p.lam=o<0?-o-f1.SPI:-o+f1.SPI):(u=(A=(h=a)*h)>=1?0:Math.sqrt(1-A)*Math.sin(o),A+=u*u,c=A>=1?0:Math.sqrt(1-A),m.value===mm.AREA_1?(A=c,c=-u,u=A):m.value===mm.AREA_2?(c=-c,u=-u):m.value===mm.AREA_3&&(A=c,c=u,u=-A),this.face===mp.RIGHT?(A=h,h=-c,c=A):this.face===mp.BACK?(h=-h,c=-c):this.face===mp.LEFT&&(A=h,h=c,c=-A),p.phi=Math.acos(-u)-f1.HALF_PI,p.lam=Math.atan2(c,h),this.face===mp.RIGHT?p.lam=my(p.lam,-f1.HALF_PI):this.face===mp.BACK?p.lam=my(p.lam,-f1.SPI):this.face===mp.LEFT&&(p.lam=my(p.lam,+f1.HALF_PI))),0!==this.es&&(d=+(p.phi<0),g=Math.tan(p.phi),f=this.b/Math.sqrt(g*g+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),d&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]}),pj.Proj.projections.add({init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var i=(0,pf.default)(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*mb);r<0?r=0:r>=18&&(r=17),n=f1.R2D*(n-mC*r);var s={x:mx(mw[r],n)*i,y:mx(mv[r],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*.8487+this.x0,s.y=s.y*this.a*1.3523+this.y0,s},inverse:function(t){var i={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(i.y>=1)i.x/=mw[18][0],i.y=t.y<0?-f1.HALF_PI:f1.HALF_PI;else{var n=Math.floor(18*i.y);for(n<0?n=0:n>=18&&(n=17);;)if(mv[n][0]>i.y)--n;else if(mv[n+1][0]<=i.y)++n;else break;var r=mv[n],s=5*(i.y-r[0])/(mv[n+1][0]-r[0]);s=function(t,i,n,r){for(var s=i;r;--r){var o=t(s);if(s-=o,Math.abs(o)<n)break}return s}(function(t){return(mx(r,t)-i.y)/(r[1]+t*(2*r[2]+3*t*r[3]))},s,f1.EPSLN,100),i.x/=mx(mw[n],s),i.y=(5*n+s)*f1.D2R,t.y<0&&(i.y=-i.y)}return i.x=(0,pf.default)(i.x+this.long0),i},names:["Robinson","robin"]}),pj.Proj.projections.add({init:function(){this.name="geocent"},forward:function(t){return pO(t,this.es,this.a)},inverse:function(t){return pD(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]}),pj.Proj.projections.add({init:function(){if(Object.keys(mB).forEach((function(t){if(void 0===this[t])this[t]=mB[t].def;else if(mB[t].num&&isNaN(this[t]))throw Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);else mB[t].num&&(this[t]=parseFloat(this[t]));mB[t].degrees&&(this[t]=this[t]*f1.D2R)}).bind(this)),Math.abs(Math.abs(this.lat0)-f1.HALF_PI)<f1.EPSLN?this.mode=this.lat0<0?mE.S_POLE:mE.N_POLE:Math.abs(this.lat0)<f1.EPSLN?this.mode=mE.EQUIT:(this.mode=mE.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,i=this.azi;this.cg=Math.cos(i),this.sg=Math.sin(i),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var i,n,r,s,o=Math.sin(t.y),a=Math.cos(t.y),l=Math.cos(t.x);switch(this.mode){case mE.OBLIQ:n=this.sinph0*o+this.cosph0*a*l;break;case mE.EQUIT:n=a*l;break;case mE.S_POLE:n=-o;break;case mE.N_POLE:n=o}switch(i=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case mE.OBLIQ:n*=this.cosph0*o-this.sinph0*a*l;break;case mE.EQUIT:n*=o;break;case mE.N_POLE:n*=-(a*l);break;case mE.S_POLE:n*=a*l}return s=1/((r=n*this.cg+i*this.sg)*this.sw*this.h1+this.cw),i=(i*this.cg-n*this.sg)*this.cw*s,n=r*s,t.x=i*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var i,n,r,s,o,a={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=i*this.cg+n*this.sg,t.y=n*this.cg-i*this.sg;var l=(0,p8.default)(t.x,t.y);if(Math.abs(l)<f1.EPSLN)a.x=0,a.y=t.y;else{switch(o=1-l*l*this.pfact,s=Math.sqrt(1-(o=(this.p-Math.sqrt(o))/(this.pn1/l+l/this.pn1))*o),this.mode){case mE.OBLIQ:a.y=Math.asin(s*this.sinph0+t.y*o*this.cosph0/l),t.y=(s-this.sinph0*Math.sin(a.y))*l,t.x*=o*this.cosph0;break;case mE.EQUIT:a.y=Math.asin(t.y*o/l),t.y=s*l,t.x*=o;break;case mE.N_POLE:a.y=Math.asin(s),t.y=-t.y;break;case mE.S_POLE:a.y=-Math.asin(s)}a.x=Math.atan2(t.x,t.y)}return t.x=a.x+this.long0,t.y=a.y,t},names:["Tilted_Perspective","tpers"]}),pj.Proj.projections.add({init:function(){if(this.flip_axis=+("x"===this.sweep),this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw Error();if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=1/t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var i,n,r,s,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var l=this.radius_p/(0,p8.default)(this.radius_p*Math.cos(a),Math.sin(a));if(n=l*Math.cos(o)*Math.cos(a),r=l*Math.sin(o)*Math.cos(a),s=l*Math.sin(a),(this.radius_g-n)*n-r*r-s*s*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/(0,p8.default)(s,i)),t.y=this.radius_g_1*Math.atan(s/i)):(t.x=this.radius_g_1*Math.atan(r/i),t.y=this.radius_g_1*Math.atan(s/(0,p8.default)(r,i)))}else"sphere"===this.shape&&(n=Math.cos(o)*(i=Math.cos(a)),r=Math.sin(o)*i,s=Math.sin(a),i=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/(0,p8.default)(s,i)),t.y=this.radius_g_1*Math.atan(s/i)):(t.x=this.radius_g_1*Math.atan(r/i),t.y=this.radius_g_1*Math.atan(s/(0,p8.default)(r,i))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var i,n,r,s,o=-1,a=0,l=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*(0,p8.default)(1,l)):(a=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*(0,p8.default)(1,a));var A=l/this.radius_p;if(i=a*a+A*A+o*o,(r=(n=2*this.radius_g*o)*n-4*i*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-n-Math.sqrt(r))/(2*i),o=this.radius_g+s*o,a*=s,l*=s,t.x=Math.atan2(a,o),t.y=Math.atan(l*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+l*l)):(a=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),i=a*a+l*l+o*o,(r=(n=2*this.radius_g*o)*n-4*i*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-n-Math.sqrt(r))/(2*i),o=this.radius_g+s*o,a*=s,l*=s,t.x=Math.atan2(a,o),t.y=Math.atan(l*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]}),pj.Proj.projections.add({init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var i=(0,pf.default)(t.x-this.long0),n=Math.asin(mS*Math.sin(t.y)),r=n*n,s=r*r*r;return t.x=i*Math.cos(n)/(mS*(1.340264+-.24331799999999998*r+s*(.0062510000000000005+.034164*r))),t.y=n*(1.340264+-.081106*r+s*(893e-6+.003796*r)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var i,n,r,s,o,a=t.y;for(o=0;o<12&&(n=(i=a*a)*i*i,r=a*(1.340264+-.081106*i+n*(893e-6+.003796*i))-t.y,a-=s=r/(1.340264+-.24331799999999998*i+n*(.0062510000000000005+.034164*i)),!(1e-9>Math.abs(s)));++o);return n=(i=a*a)*i*i,t.x=mS*t.x*(1.340264+-.24331799999999998*i+n*(.0062510000000000005+.034164*i))/Math.cos(a),t.y=Math.asin(Math.sin(a)/mS),t.x=(0,pf.default)(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]}),pj.Proj.projections.add({init:function(){var t;if(this.phi1=this.lat1,1e-10>Math.abs(this.phi1))throw Error();this.es?(this.en=(0,md.default)(this.es),this.m1=(0,mg.default)(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=mL,this.forward=mI):(Math.abs(this.phi1)+1e-10>=f1.HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=mM,this.forward=mF)},names:["bonne","Bonne (Werner lat_1=90)"]});const mR="projection-manager.js";class mO extends AX{static #ed=[{isActive:!0,code:"EPSG:3857",name:"WGS 84 / Pseudo-Mercator",proj4def:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs"},{isActive:!0,code:"EPSG:4326",name:"WGS 84",proj4def:"+proj=longlat +datum=WGS84 +no_defs +type=crs"},{isActive:!0,code:"EPSG:7789",name:"ITRF2014",proj4def:"+proj=geocent +ellps=GRS80 +units=m +no_defs +type=crs"},{isActive:!0,code:"EPSG:3006",name:"SWEREF99 TM",proj4def:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"},{isActive:!0,code:"EPSG:3021",name:"RT90 2.5 gon V",proj4def:"+proj=tmerc +lat_0=0 +lon_0=15.8082777777778 +k=1 +x_0=1500000 +y_0=0 +ellps=bessel +towgs84=414.1,41.3,603.1,0.855,-2.141,7.023,0 +units=m +no_defs +type=crs"}];static async initAsync(t={}){A0.logDebug(mR,"initAsync","Adding default projections");let i=[];return this.#ed.forEach(t=>{if(!t.isActive)return void A0.logDebug(mR,"initAsync",`Skipping projection (${t.code} ${t.name})`);A0.logDebug(mR,"initAsync",`Adding projection (${t.code} ${t.name})`),i.push([t.code,t.proj4def])}),this.#eg(i),new Promise(t=>{t({filename:mR,result:!0})})}static setMap(t){}static getName(){return mR}static #eg(t){pj.defs(t),mT(pj)}static #ef(t,i){pj.defs(t,i),mT(pj)}static addProjection(t,i,n,r){this.#ed.push({active:r,code:t,name:i,proj4def:n}),this.#ef(t,n)}static getSize(){return this.#ed.length||0}static getProjections(){return this.#ed}static hasProjection(t){return!!this.#ed.find(i=>i.code===t?.toUpperCase())}}const mD="accessibility-manager.js",mP="oltb-using-keyboard";var an=I("f1q41");class mk extends nO{#tW="base-tool.js";constructor(t={}){super({element:t.element??hr.getToolbarElement()}),t.filename&&(this.#tW=t.filename)}detachGlobalListeners(){}getName(){return this.#tW}onClickTool(t){A0.logDebug(this.#tW,"onClickTool","User clicked tool")}}var an=I("f1q41");const mN=Object.freeze({map:void 0,coordinates:[0,0],zoom:void 0,rotation:void 0,duration:A3.getConfig().animationDuration.normal,onDone:void 0}),mU=function(t){if(!(t=E(an).merge(E(an).cloneDeep(mN),t)).map)return;let i=t.map.getView();i&&(i.getAnimating()&&i.cancelAnimations(),i.animate({rotation:t.rotation,center:ic(t.coordinates),zoom:t.zoom,duration:t.duration,easing:eC},function(i){t.onDone&&t.onDone(i)}))},mQ=Object.freeze({overviewTool:"A",bookmarkTool:"B",coordinatesTool:"C",directionTool:"D",exportPngTool:"E",fullscreenTool:"F",myLocationTool:"G",homeTool:"H",infoTool:"I",graticuleTool:"J",scaleLineTool:"K",layerTool:"L",measureTool:"M",resetNorthTool:"N",importVectorLayerTool:"O",drawTool:"P",zoomInTool:"Q",refreshPageTool:"R",splitViewTool:"S",themeTool:"T",zoomboxTool:"U",editTool:"V",zoomOutTool:"W",scissorsTool:"X",toolboxTool:"Y",magnifyTool:"Z",helpTool:"1",settingsTool:"2",translationTool:"3",debugInfoTool:"4"});var an=I("f1q41");const mH="context-menu-tool.js",mG="oltb-context-menu",mV=Object.freeze({name:"MainContextMenu"});class mz extends mk{static #ep=!1;static #th=[];#em=[];static addItem(t){this.#th.push(t)}constructor(t={}){super({filename:mH,element:A6.createElement({element:"ul",class:mG,attributes:{tabindex:"-1"},listeners:{keydown:gW}})}),this.options=E(an).merge(E(an).cloneDeep(mV),t),this.menu=this.element;let i=A3.getConfig().urlParameter.debug;mz.#ep="true"===gm.getParameter(i),mz.#th.forEach(t=>{this.addMenuItem(t)});let n=hr.getMapElement();A6.appendChildren(n,[this.menu]),n.addEventListener(A8.browser.contextMenu,this.#e_.bind(this)),n.addEventListener(A8.browser.click,this.#ey.bind(this)),n.addEventListener(A8.browser.keyUp,this.#ew.bind(this)),this.uiRefMapElement=n}getName(){return super.getName()}#ev(t,i){let n=hr.getMapElement().offsetHeight,r=this.menu.offsetHeight,s=n-i,o=r-s,a=i-o-16,l=o<0,A=l?i:a;return A0.logDebug(mH,"getMenuCoordinatesInView",{mapHeight:n,menuHeight:r,distanceAvailable:s,distanceOutBounds:o,isMenuInBounds:l,originalX:t,originalY:i,menuX:t,menuY:A,dY:a}),{x:t,y:A}}#eb(t){return E(an).has(t,["i18nKey"])}#e_(t){this.show(t)}#ey(t){this.hide(t)}#ew(t){t.key===gj.valueEscape&&this.hide()}getSize(){return this.#em.length||0}addMenuSeparator(){let t=A6.createElement({element:"li",class:`${mG}__divider`});return A6.appendChildren(this.menu,[t]),t}addMenuItem(t){if(!this.#eb(t))return this.addMenuSeparator();this.#em.push(t);let i=c1.get(t.i18nKey),n=A6.createElement({element:"li",class:`${mG}__item`,attributes:{tabindex:"0"},listeners:{click:this.click.bind(this,t),keyup:i=>{i.key===gj.valueEnter&&this.click(t)}}}),r=A6.createElement({element:"span",html:t.icon,class:`${mG}__icon`}),s=A6.createElement({element:"span",text:i,class:`${mG}__text`,attributes:{"data-oltb-i18n":t.i18nKey}});return A6.appendChildren(n,[r,s]),A6.appendChildren(this.menu,[n]),n}show(t){mz.#ep||t.preventDefault();let i=this.getMap();if(!i)return;let n=A3.getConfig().projection;this.coordinates=i_(i.getEventCoordinate(t),n.default,n.wgs84),this.menu.classList.add(`${mG}--show`);let r=this.#ev(t.clientX,t.clientY);this.menu.style.left=`${r.x}px`,this.menu.style.top=`${r.y}px`,this.menu.focus()}hide(){this.menu.classList.remove(`${mG}--show`)}click(t){t.fn(this.getMap(),this.coordinates,this.target),this.hide()}}const mK=function(t,i){return"TEXTAREA"!==window.document.activeElement.nodeName&&"INPUT"!==window.document.activeElement.nodeName&&!t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey&&t.key.toUpperCase()!==gj.valueOperatingSystem&&t.key.toUpperCase()===i},mj="oltb-tool-button",mW="tools.homeTool",m$=A3.getConfig().location.default,mY=Object.freeze({lon:m$.lon,lat:m$.lat,zoom:m$.zoom,rotation:m$.rotation,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onNavigatedHome:void 0}),mq=he.homeTool,mX=Object.freeze({lon:m$.lon,lat:m$.lat,zoom:m$.zoom,rotation:m$.rotation});class mZ extends mk{constructor(t={}){super({filename:"home-tool.js"}),this.icon=up({path:ug.house.stroked,class:`${mj}__icon`});let i=c1.get(mW),n=A6.createElement({element:"button",html:this.icon,class:mj,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.homeTool})`,"data-tippy-content-post":`(${mQ.homeTool})`,"data-oltb-i18n":`${mW}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[n]),this.button=n,this.options=E(an).merge(E(an).cloneDeep(mY),t),this.localStorage=ht.getAndMergeStateObject(mq,mX),this.#eC(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#eC(){mz.addItem({icon:this.icon,i18nKey:`${mW}.contextItems.setHome`,fn:this.#ex.bind(this)})}momentaryActivation(){this.doNavigateHome()}#tq(t){mK(t,mQ.homeTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.doNavigateHome(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#ex(t,i,n){this.doCreateNewHome(i)}getZoom(){return this.localStorage.zoom!==this.options.zoom?this.localStorage.zoom:this.options.zoom}getRotation(){return this.localStorage.rotation!==this.options.rotation?this.localStorage.rotation:this.options.rotation}getLocation(){return this.localStorage.lon!==this.options.lon||this.localStorage.lat!==this.options.lat?[this.localStorage.lon,this.localStorage.lat]:[this.options.lon,this.options.lat]}doClearState(){this.localStorage=E(an).cloneDeep(mX),ht.setStateObject(mq,mX)}doCreateNewHome(t){let i=this.getMap();if(!i)return;let n=i.getView(),r=n.getZoom(),s=n.getRotation();this.localStorage.zoom=r,this.localStorage.rotation=s,this.localStorage.lon=t[0],this.localStorage.lat=t[1],ht.setStateObject(mq,this.localStorage),c9.success({i18nKey:`${mW}.toasts.infos.setHomeLocation`,autoremove:!0})}doNavigateHome(){let t=this.getMap();if(!t)return;let i=this.getZoom(),n=this.getRotation();mU({map:t,coordinates:this.getLocation(),zoom:i,rotation:n,onDone:t=>{this.options.onNavigatedHome&&this.options.onNavigatedHome(t)}})}}var an=I("f1q41");const mJ=function(t,i){return t!==ud.type.iconMarker&&t!==ud.type.windBarb&&t!==ud.type.measurement&&t!==ud.type.layer&&i.getType()!==dG.LineString&&i.getType()!==dG.Point},m0="oltb-tool-button",m1="oltb-toolbox-section",m2="oltb-draw",m5="tools.drawTool",m4="commons",m3=Object.freeze({circleSize:5,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onAbort:void 0,onError:void 0,onIntersected:void 0,onSnapped:void 0,onUnSnapped:void 0}),m6=he.drawTool,m8=Object.freeze({isActive:!1,isCollapsed:!1,toolType:dG.Polygon,strokeWidth:"2.5",strokeColor:"#0166A5FF",fillColor:"#D7E3FA80"});class m7 extends mk{constructor(t={}){super({filename:"draw-tool.js"});let i=up({path:ug.vectorPen.mixed,class:`${m0}__icon`}),n=c1.get(m5),r=A6.createElement({element:"button",html:i,class:m0,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.drawTool})`,"data-tippy-content-post":`(${mQ.drawTool})`,"data-oltb-i18n":`${m5}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.intersectedFeatures=[],this.options=E(an).merge(E(an).cloneDeep(m3),t),this.localStorage=ht.getAndMergeStateObject(m6,m8),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${m2}-toolbox`),this.#eB(),this.uiRefToolType=this.uiRefToolboxSection.querySelector(`#${m2}-type`),this.uiRefToolType.addEventListener(A8.browser.change,this.updateTool.bind(this)),this.uiRefIntersectionEnable=this.uiRefToolboxSection.querySelector(`#${m2}-intersection-enable`),this.uiRefIntersectionEnable.addEventListener(A8.browser.change,this.updateTool.bind(this)),this.uiRefFillColor=this.uiRefToolboxSection.querySelector(`#${m2}-fill-color`),this.uiRefFillColor.addEventListener(A8.custom.colorChange,this.updateTool.bind(this)),this.uiRefStrokeWidth=this.uiRefToolboxSection.querySelector(`#${m2}-stroke-width`),this.uiRefStrokeWidth.addEventListener(A8.browser.change,this.updateTool.bind(this)),this.uiRefStrokeColor=this.uiRefToolboxSection.querySelector(`#${m2}-stroke-color`),this.uiRefStrokeColor.addEventListener(A8.custom.colorChange,this.updateTool.bind(this)),this.#eS(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${m5}.toolbox`),i=c1.get(`${m4}.titles`),n=`
            <div id="${m2}-toolbox" class="${m1}">
                <div class="${m1}__header oltb-toggleable" data-oltb-toggleable-target="${m2}-toolbox-collapsed">
                    <h4 class="${m1}__title" data-oltb-i18n="${m5}.toolbox.titles.draw">${t.titles.draw}</h4>
                    <span class="${m1}__icon oltb-tippy" data-oltb-i18n="${m4}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${m1}__groups" id="${m2}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${m1}__group">
                        <label class="oltb-label" for="${m2}-type" data-oltb-i18n="${m5}.toolbox.groups.shapes.title">${t.groups.shapes.title}</label>
                        <select id="${m2}-type" class="oltb-select">
                            <option value="Circle" data-oltb-i18n="${m5}.toolbox.groups.shapes.circle">${t.groups.shapes.circle}</option>
                            <option value="Square" data-oltb-i18n="${m5}.toolbox.groups.shapes.square">${t.groups.shapes.square}</option>
                            <option value="Rectangle" data-oltb-i18n="${m5}.toolbox.groups.shapes.rectangle">${t.groups.shapes.rectangle}</option>
                            <option value="LineString" data-oltb-i18n="${m5}.toolbox.groups.shapes.lineString">${t.groups.shapes.lineString}</option>
                            <option value="Point" data-oltb-i18n="${m5}.toolbox.groups.shapes.point">${t.groups.shapes.point}</option>
                            <option value="Polygon" data-oltb-i18n="${m5}.toolbox.groups.shapes.polygon">${t.groups.shapes.polygon}</option>
                        </select>
                    </div>
                    <div class="${m1}__group ${m1}__group--split-group">
                        <div class="${m1}__group-part">
                            <label class="oltb-label" for="${m2}-intersection-enable" data-oltb-i18n="${m5}.toolbox.groups.intersectable.title">${t.groups.intersectable.title}</label>
                            <select id="${m2}-intersection-enable" class="oltb-select">
                                <option value="false" data-oltb-i18n="${m5}.toolbox.groups.intersectable.false">${t.groups.intersectable.false}</option>
                                <option value="true" data-oltb-i18n="${m5}.toolbox.groups.intersectable.true">${t.groups.intersectable.true}</option>
                            </select>
                        </div>
                        <div class="${m1}__group-part">
                            <label class="oltb-label" for="${m2}-stroke-width" data-oltb-i18n="${m5}.toolbox.groups.strokeWidth.title">${t.groups.strokeWidth.title}</label>
                            <select id="${m2}-stroke-width" class="oltb-select">
                                <option value="1">1</option>
                                <option value="1.25">1.25</option>
                                <option value="1.5">1.5</option>
                                <option value="2">2</option>
                                <option value="2.5">2.5</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                    </div>
                    <div class="${m1}__group ${m1}__group--split-group">
                        <div class="${m1}__group-part">
                            <label class="oltb-label" for="${m2}-stroke-color" data-oltb-i18n="${m5}.toolbox.groups.strokeColor.title">${t.groups.strokeColor.title}</label>
                            <div id="${m2}-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${m2}-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">
                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>
                            </div>
                        </div>
                        <div class="${m1}__group-part">
                            <label class="oltb-label" for="${m2}-fill-color" data-oltb-i18n="${m5}.toolbox.groups.fillColor.title">${t.groups.fillColor.title}</label>
                            <div id="${m2}-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${m2}-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">
                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#eS(){this.uiRefToolType.value=this.localStorage.toolType,this.uiRefStrokeWidth.value=this.localStorage.strokeWidth,this.uiRefIntersectionEnable.value="false"}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${m1}--show`),this.button.classList.add(`${m0}--active`),gC.setActiveTool(this),this.shouldAlwaysCreateNewLayer()&&dY.addFeatureLayer({name:c1.get(`${m5}.layers.defaultName`)}),cz.dispatchEvent([this.uiRefToolType],A8.browser.change),this.localStorage.isActive=!0,ht.setStateObject(m6,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.getMap()&&(this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${m1}--show`),this.button.classList.remove(`${m0}--active`),this.doRemoveDrawInteraction(),gC.removeActiveTool(),gU.removeSnap(),this.localStorage.isActive=!1,ht.setStateObject(m6,this.localStorage))}deselectTool(){this.deactivateTool()}updateTool(){this.localStorage.toolType=this.uiRefToolType.value,this.localStorage.strokeWidth=this.uiRefStrokeWidth.value,this.localStorage.fillColor=this.uiRefFillColor.getAttribute("data-oltb-color"),this.localStorage.strokeColor=this.uiRefStrokeColor.getAttribute("data-oltb-color"),ht.setStateObject(m6,this.localStorage),this.isIntersectionModeAvailable()?(this.uiRefIntersectionEnable.value="false",this.uiRefIntersectionEnable.disabled=!0):this.uiRefIntersectionEnable.disabled=!1,this.doUpdateTool(this.uiRefToolType.value,this.uiRefStrokeWidth.value,this.uiRefFillColor.getAttribute("data-oltb-color"),this.uiRefStrokeColor.getAttribute("data-oltb-color"))}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){let i=t.key;i===gj.valueEscape?this.interactionDraw&&this.interactionDraw.abortDrawing():t.ctrlKey&&i===gj.valueZ?this.interactionDraw&&this.interactionDraw.removeLastPoint():mK(t,mQ.drawTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.doClearColors(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#eL(t){this.doDrawStart(t)}#eF(t){this.doDrawEnd(t)}#eM(t){this.doDrawAbort(t)}#eT(t){this.doDrawError(t)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}shouldAlwaysCreateNewLayer(){return gP.getSetting(gf.alwaysNewLayers)}isIntersectionModeAvailable(){return this.uiRefToolType.value===dG.LineString||this.uiRefToolType.value===dG.Point}isIntersectionEnabled(){return"true"===this.uiRefIntersectionEnable.value.toLowerCase()}#eR(t,i){return new dQ({type:t,style:this.style,stopClick:!0,geometryFunction:i})}#eO(t,i,n){return new sz({image:new sU({fill:new sQ({color:i}),stroke:new sV({color:n,width:t}),radius:this.options.circleSize}),fill:new sQ({color:i}),stroke:new sV({color:n,width:t})})}doClearState(){this.localStorage=E(an).cloneDeep(m8),ht.setStateObject(m6,m8)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(m6,this.localStorage)})}doDrawStart(t){this.options.onStart&&this.options.onStart(t)}doDrawEnd(t){let i=dY.getActiveFeatureLayer({fallback:c1.get(`${m5}.layers.defaultName`)});this.isIntersectionEnabled()?this.doDrawEndIntersection(t):this.doDrawEndNormal(i,t)}doDrawEndNormal(t,i){let n=i.feature;n&&(n.setStyle(this.style),n.setProperties({oltb:{type:ud.type.drawing}}),dY.addFeatureToLayer(n,t,`${m5}.toasts.infos.drawInHiddenLayer`)),this.options.onEnd&&this.options.onEnd(i)}doDrawEndIntersection(t){let i=t.feature.getGeometry(),n=A2.toolbar.id;dY.getFeatureLayers().forEach(t=>{let r=t.getLayer();r.getVisible()&&r.getSource().forEachFeatureIntersectingExtent(i.getExtent(),t=>{mJ(t.getProperties(n)?.type,t.getGeometry())&&this.intersectedFeatures.push(t)})}),this.intersectedFeatures.forEach(t=>{let n=t.getGeometry().getCoordinates(),r=new nA(n.slice(0,n.length)),s=new i5(i.getCoordinates()[0]);r.appendLinearRing(s),t.setGeometry(r)}),0===this.intersectedFeatures.length&&c9.info({i18nKey:`${m5}.toasts.infos.missingIntersections`,autoremove:!0}),this.options.onIntersected&&this.options.onIntersected(t,this.intersectedFeatures),this.intersectedFeatures=[]}doDrawAbort(t){this.options.onAbort&&this.options.onAbort(t)}doDrawError(t){this.options.onError&&this.options.onError(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doClearColors(){this.uiRefFillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.uiRefFillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.uiRefStrokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.uiRefStrokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}doUpdateTool(t,i,n,r){if(!this.getMap())return;this.interactionDraw&&(this.doRemoveDrawInteraction(),gU.removeSnap()),this.style=this.#eO(i,n,r);let[s,o]=dV(t);this.interactionDraw=this.#eR(s,o),this.interactionDraw.on(A8.openLayers.drawStart,this.#eL.bind(this)),this.interactionDraw.on(A8.openLayers.drawEnd,this.#eF.bind(this)),this.interactionDraw.on(A8.openLayers.drawAbort,this.#eM.bind(this)),this.interactionDraw.on(A8.openLayers.error,this.#eT.bind(this)),this.doAddDrawInteraction(),gU.addSnap(this)}doAddDrawInteraction(){this.getMap().addInteraction(this.interactionDraw)}doRemoveDrawInteraction(){this.getMap().removeInteraction(this.interactionDraw)}}var an=I("f1q41"),m9={};(function(t){class i{static equalsWithTolerance(t,i,n){return Math.abs(t-i)<=n}}class n extends Error{constructor(t){super(t),this.name="Exception"}toString(){return this.message}}class r extends n{constructor(t){super(t),this.name="IllegalArgumentException"}}class s{constructor(t,i){this.low=i||0,this.high=t||0}static toBinaryString(t){let i,n="";for(i=0x80000000;i>0;i>>>=1)n+=(t.high&i)===i?"1":"0";for(i=0x80000000;i>0;i>>>=1)n+=(t.low&i)===i?"1":"0";return n}}function o(){}function a(){}function l(){}o.NaN=NaN,o.isNaN=t=>Number.isNaN(t),o.isInfinite=t=>!Number.isFinite(t),o.MAX_VALUE=Number.MAX_VALUE,o.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,o.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){let t=new Float64Array(1),i=new Int32Array(t.buffer);o.doubleToLongBits=function(n){t[0]=n;let r=0|i[0],o=0|i[1];return(0x7ff00000&o)==0x7ff00000&&1048575&o&&0!==r&&(r=0,o=0x7ff80000),new s(o,r)},o.longBitsToDouble=function(n){return i[0]=n.low,i[1]=n.high,t[0]}}():function(){let t=Math.log2,i=Math.floor,n=Math.pow,r=function(){for(let r=53;r>0;r--){let s=n(2,r)-1;if(i(t(s))+1===r)return s}return 0}();o.doubleToLongBits=function(o){let a,l,A,h,c,u,d,g,f;if(o<0||1/o===Number.NEGATIVE_INFINITY?(u=-0x80000000,o=-o):u=0,0===o)return f=0,new s(g=u,f);if(o===1/0)return f=0,new s(g=0x7ff00000|u,f);if(o!=o)return new s(g=0x7ff80000,f=0);if(h=0,f=0,(a=i(o))>1)if(a<=r)(h=i(t(a)))<=20?(f=0,g=a<<20-h&1048575):(f=a%(l=n(2,A=h-20))<<32-A,g=a/l&1048575);else for(A=a,f=0;0!==(A=i(l=A/2));)h++,f>>>=1,f|=(1&g)<<31,g>>>=1,l!==A&&(g|=524288);if(d=h+1023,c=0===a,a=o-a,h<52&&0!==a)for(A=0;;){if((l=2*a)>=1?(a=l-1,c?(d--,c=!1):(A<<=1,A|=1,h++)):(a=l,c?0==--d&&(h++,c=!1):(A<<=1,h++)),20===h)g|=A,A=0;else if(52===h){f|=A;break}if(1===l){h<20?g|=A<<20-h:h<52&&(f|=A<<52-h);break}}return g|=d<<20,new s(g|=u,f)},o.longBitsToDouble=function(t){let i,r,s,o,a=t.high,l=t.low,A=-0x80000000&a?-1:1;for(s=((0x7ff00000&a)>>20)-1023,o=0,r=524288,i=1;i<=20;i++)a&r&&(o+=n(2,-i)),r>>>=1;for(r=-0x80000000,i=21;i<=52;i++)l&r&&(o+=n(2,-i)),r>>>=1;if(-1023===s){if(0===o)return 0*A;s=-1022}else{if(1024===s)return 0===o?A/0:NaN;o+=1}return A*o*n(2,s)}}();class A extends n{constructor(t){super(t),this.name="RuntimeException"}}class h extends A{constructor(){super(),h.constructor_.apply(this,arguments)}static constructor_(){if(0==arguments.length)A.constructor_.call(this);else if(1==arguments.length){let t=arguments[0];A.constructor_.call(this,t)}}}class c{static isTrue(){if(1==arguments.length){let t=arguments[0];c.isTrue(t,null)}else if(2==arguments.length){let t=arguments[1];if(!arguments[0])throw null===t?new h:new h(t)}}static shouldNeverReachHere(){if(0==arguments.length)c.shouldNeverReachHere(null);else if(1==arguments.length){let t=arguments[0];throw new h("Should never reach here"+(null!==t?": "+t:""))}}static equals(){if(2==arguments.length){let t=arguments[0],i=arguments[1];c.equals(t,i,null)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(!i.equals(t))throw new h("Expected "+t+" but encountered "+i+(null!==n?": "+n:""))}}}function u(){}function d(){}let g=new ArrayBuffer(8),f=new Float64Array(g),p=new Int32Array(g);class m{constructor(){m.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0==arguments.length)m.constructor_.call(this,0,0);else if(1==arguments.length){let t=arguments[0];m.constructor_.call(this,t.x,t.y,t.getZ())}else if(2==arguments.length){let t=arguments[0],i=arguments[1];m.constructor_.call(this,t,i,m.NULL_ORDINATE)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this.x=t,this.y=i,this.z=n}}static hashCode(t){return f[0]=t,p[0]^p[1]}equals2D(){if(1==arguments.length){let t=arguments[0];return this.x===t.x&&this.y===t.y}if(2==arguments.length){let t=arguments[0],n=arguments[1];return!!i.equalsWithTolerance(this.x,t.x,n)&&!!i.equalsWithTolerance(this.y,t.y,n)}}setM(t){throw new r("Invalid ordinate index: "+m.M)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||o.isNaN(this.getZ())&&o.isNaN(t.getZ()))}setX(t){this.x=t}compareTo(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:+(this.y>t.y)}getX(){return this.x}copy(){return new m(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){let i=this.x-t.x,n=this.y-t.y,r=this.getZ()-t.getZ();return Math.sqrt(i*i+n*n+r*r)}getY(){return this.y}getM(){return o.NaN}setOrdinate(t,i){switch(t){case m.X:this.x=i;break;case m.Y:this.y=i;break;case m.Z:this.setZ(i);break;default:throw new r("Invalid ordinate index: "+t)}}getZ(){return this.z}getOrdinate(t){switch(t){case m.X:return this.x;case m.Y:return this.y;case m.Z:return this.getZ()}throw new r("Invalid ordinate index: "+t)}equals(t){return t instanceof m&&this.equals2D(t)}equalInZ(t,n){return i.equalsWithTolerance(this.getZ(),t.getZ(),n)}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return c.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}setY(t){this.y=t}distance(t){let i=this.x-t.x,n=this.y-t.y;return Math.sqrt(i*i+n*n)}hashCode(){let t=17;return 37*(629+m.hashCode(this.x))+m.hashCode(this.y)}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[a,u,l]}}class _{constructor(){_.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0==arguments.length)_.constructor_.call(this,2);else if(1==arguments.length){let t=arguments[0];if(2!==t&&3!==t)throw new r("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,i){return t<i?-1:t>i?1:o.isNaN(t)?o.isNaN(i)?0:-1:+!!o.isNaN(i)}compare(t,i){let n=_.compare(t.x,i.x);if(0!==n)return n;let r=_.compare(t.y,i.y);return 0!==r?r:this._dimensionsToTest<=2?0:_.compare(t.getZ(),i.getZ())}get interfaces_(){return[d]}}m.DimensionalComparator=_,m.NULL_ORDINATE=o.NaN,m.X=0,m.Y=1,m.Z=2,m.M=3;class y extends m{constructor(){super(),y.constructor_.apply(this,arguments)}static constructor_(){if(0==arguments.length)m.constructor_.call(this);else if(1==arguments.length){if(arguments[0]instanceof y){let t=arguments[0];m.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof m){let t=arguments[0];m.constructor_.call(this,t.x,t.y)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];m.constructor_.call(this,t,i,m.NULL_ORDINATE)}}setOrdinate(t,i){switch(t){case y.X:this.x=i;break;case y.Y:this.y=i;break;default:throw new r("Invalid ordinate index: "+t)}}setZ(t){throw new r("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new y(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}getZ(){return m.NULL_ORDINATE}getOrdinate(t){switch(t){case y.X:return this.x;case y.Y:return this.y}throw new r("Invalid ordinate index: "+t)}}y.X=0,y.Y=1,y.Z=-1,y.M=-1;class w extends m{constructor(){super(),w.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0==arguments.length)m.constructor_.call(this),this._m=0;else if(1==arguments.length){if(arguments[0]instanceof w){let t=arguments[0];m.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof m){let t=arguments[0];m.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];m.constructor_.call(this,t,i,m.NULL_ORDINATE),this._m=n}}setM(t){this._m=t}setZ(t){throw new r("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new w(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}getM(){return this._m}setOrdinate(t,i){switch(t){case w.X:this.x=i;break;case w.Y:this.y=i;break;case w.M:this._m=i;break;default:throw new r("Invalid ordinate index: "+t)}}getZ(){return m.NULL_ORDINATE}getOrdinate(t){switch(t){case w.X:return this.x;case w.Y:return this.y;case w.M:return this._m}throw new r("Invalid ordinate index: "+t)}}w.X=0,w.Y=1,w.Z=-1,w.M=2;class v extends m{constructor(){super(),v.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0==arguments.length)m.constructor_.call(this),this._m=0;else if(1==arguments.length){if(arguments[0]instanceof v){let t=arguments[0];m.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof m){let t=arguments[0];m.constructor_.call(this,t),this._m=this.getM()}}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];m.constructor_.call(this,t,i,n),this._m=r}}setM(t){this._m=t}getOrdinate(t){switch(t){case m.X:return this.x;case m.Y:return this.y;case m.Z:return this.getZ();case m.M:return this.getM()}throw new r("Invalid ordinate index: "+t)}copy(){return new v(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}getM(){return this._m}setOrdinate(t,i){switch(t){case m.X:this.x=i;break;case m.Y:this.y=i;break;case m.Z:this.z=i;break;case m.M:this._m=i;break;default:throw new r("Invalid ordinate index: "+t)}}}function b(t,i){return t.interfaces_&&t.interfaces_.indexOf(i)>-1}class C{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class x extends n{constructor(t){super(t),this.name="IndexOutOfBoundsException"}}class E extends C{get(){}set(){}isEmpty(){}}class B extends n{constructor(t){super(t),this.name="NoSuchElementException"}}class S extends E{constructor(t){super(),this.array=[],t instanceof C&&this.addAll(t)}get interfaces_(){return[E,C]}ensureCapacity(){}add(t){return 1==arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(let i of t)this.array.push(i)}set(t,i){let n=this.array[t];return this.array[t]=i,n}iterator(){return new I(this)}get(t){if(t<0||t>=this.size())throw new x;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort((i,n)=>t.compare(i,n)):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let i=0,n=this.array.length;i<n;i++)if(this.array[i]===t)return!!this.array.splice(i,1);return!1}[Symbol.iterator](){return this.array.values()}}let I=class{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new B;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}};class L extends S{constructor(){super(),L.constructor_.apply(this,arguments)}static constructor_(){if(0==arguments.length);else if(1==arguments.length){let t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.ensureCapacity(t.length),this.add(t,i)}}getCoordinate(t){return this.get(t)}addAll(){if(2==arguments.length&&"boolean"==typeof arguments[1]&&b(arguments[0],C)){let t=arguments[1],i=!1;for(let n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),i=!0;return i}return super.addAll.apply(this,arguments)}clone(){let t=super.clone.call(this);for(let i=0;i<this.size();i++)t.add(i,this.get(i).clone());return t}closeRing(){if(this.size()>0){let t=this.get(0).copy();this.add(t,!1)}}toCoordinateArray(){if(0==arguments.length)return this.toArray(L.coordArrayType);if(1==arguments.length){if(arguments[0])return this.toArray(L.coordArrayType);let t=this.size(),i=Array(t).fill(null);for(let n=0;n<t;n++)i[n]=this.get(t-n-1);return i}}add(){if(1==arguments.length){let t=arguments[0];return super.add.call(this,t)}if(2==arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let t=arguments[0],i=arguments[1];return this.add(t,i,!0),!0}if(arguments[0]instanceof m&&"boolean"==typeof arguments[1]){let t=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){let t=arguments[0],i=arguments[1];return this.add(t,i),!0}}else if(3==arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){let t=arguments[0],i=arguments[1];if(arguments[2])for(let n=0;n<t.length;n++)this.add(t[n],i);else for(let n=t.length-1;n>=0;n--)this.add(t[n],i);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1];if(!arguments[2]){let n=this.size();if(n>0&&(t>0&&this.get(t-1).equals2D(i)||t<n&&this.get(t).equals2D(i)))return null}super.add.call(this,t,i)}}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=1;n>r&&(s=-1);for(let o=n;o!==r;o+=s)this.add(t[o],i);return!0}}}L.coordArrayType=[].fill(null);class F{filter(t,i){}isGeometryChanged(){}isDone(){}}class M{constructor(){M.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0==arguments.length)this.init();else if(1==arguments.length){if(arguments[0]instanceof m){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){let t=arguments[0];this.init(t)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.init(t.x,i.x,t.y,i.y)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this.init(t,i,n,r)}}static intersects(){if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return n.x>=(t.x<i.x?t.x:i.x)&&n.x<=(t.x>i.x?t.x:i.x)&&n.y>=(t.y<i.y?t.y:i.y)&&n.y<=(t.y>i.y?t.y:i.y)}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=Math.min(n.x,r.x),o=Math.max(n.x,r.x),a=Math.min(t.x,i.x),l=Math.max(t.x,i.x);return!(a>o)&&!(l<s)&&(s=Math.min(n.y,r.y),o=Math.max(n.y,r.y),a=Math.min(t.y,i.y),l=Math.max(t.y,i.y),!(a>o)&&!(l<s))}}getArea(){return this.getWidth()*this.getHeight()}getMinX(){return this._minx}expandToInclude(){if(1==arguments.length){if(arguments[0]instanceof m){let t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof M){let t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=i,this._maxy=i):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}}compareTo(t){return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:+(this._maxy>t._maxy)}translate(t,i){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+i,this.getMaxY()+i)}copy(){return new M(this)}expandBy(){if(1==arguments.length){let t=arguments[0];this.expandBy(t,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1==arguments.length){if(arguments[0]instanceof M||arguments[0]instanceof m){let t=arguments[0];return this.covers(t)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.covers(t,i)}}hashCode(){let t=17;return 37*(37*(37*(629+m.hashCode(this._minx))+m.hashCode(this._maxx))+m.hashCode(this._miny))+m.hashCode(this._maxy)}equals(t){return t instanceof M&&(this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY())}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new M;let i=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new M(i,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1==arguments.length){if(arguments[0]instanceof m){let t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof M){let t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];return!this.isNull()&&t>=this._minx&&t<=this._maxx&&i>=this._miny&&i<=this._maxy}}intersects(){if(1==arguments.length){if(arguments[0]instanceof M){let t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof m){let t=arguments[0];return this.intersects(t.x,t.y)}}else if(2==arguments.length){if(arguments[0]instanceof m&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1];return!this.isNull()&&!((t.x<i.x?t.x:i.x)>this._maxx)&&!((t.x>i.x?t.x:i.x)<this._minx)&&!((t.y<i.y?t.y:i.y)>this._maxy)&&!((t.y>i.y?t.y:i.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||i>this._maxy||i<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;let t=this.getWidth(),i=this.getHeight();return Math.sqrt(t*t+i*i)}minExtent(){if(this.isNull())return 0;let t=this.getWidth(),i=this.getHeight();return t<i?t:i}getWidth(){return this.isNull()?0:this._maxx-this._minx}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;let t=this.getWidth(),i=this.getHeight();return t>i?t:i}centre(){return this.isNull()?null:new m((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0==arguments.length)this.setToNull();else if(1==arguments.length){if(arguments[0]instanceof m){let t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof M){let t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.init(t.x,i.x,t.y,i.y)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];t<i?(this._minx=t,this._maxx=i):(this._minx=i,this._maxx=t),n<r?(this._miny=n,this._maxy=r):(this._miny=r,this._maxy=n)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let i=0;this._maxx<t._minx?i=t._minx-this._maxx:this._minx>t._maxx&&(i=this._minx-t._maxx);let n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===i?n:0===n?i:Math.sqrt(i*i+n*n)}get interfaces_(){return[a,l]}}class T{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,i){this.str=this.str.substr(0,t)+i+this.str.substr(t+1)}toString(){return this.str}}class R{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:+(this.value>t)}static compare(t,i){return t<i?-1:+(t>i)}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new R(t)}}class O{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class D extends n{constructor(t){super(t),this.name="IllegalStateException"}}class P{constructor(){P.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0==arguments.length)this.init(0);else if(1==arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this.init(t)}else if(arguments[0]instanceof P){let t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){let t=arguments[0];P.constructor_.call(this,P.parse(t))}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.init(t,i)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];return P.determinant(P.valueOf(t),P.valueOf(i),P.valueOf(n),P.valueOf(r))}if(arguments[3]instanceof P&&arguments[2]instanceof P&&arguments[0]instanceof P&&arguments[1]instanceof P){let t=arguments[1],i=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(i))}}static sqr(t){return P.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){let t=arguments[0];return P.parse(t)}if("number"==typeof arguments[0])return new P(arguments[0])}static sqrt(t){return P.valueOf(t).sqrt()}static parse(t){let i=0,n=t.length;for(;O.isWhitespace(t.charAt(i));)i++;let r=!1;if(i<n){let n=t.charAt(i);"-"!==n&&"+"!==n||(i++,"-"===n&&(r=!0))}let s=new P,o=0,a=0,l=0,A=!1;for(;!(i>=n);){let n=t.charAt(i);if(i++,O.isDigit(n)){let t=n-0;s.selfMultiply(P.TEN),s.selfAdd(t),o++}else{if("."!==n){if("e"===n||"E"===n){let n=t.substring(i);try{l=R.parseInt(n)}catch(i){throw i instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+n+" in string "+t):i}break}throw new NumberFormatException("Unexpected character '"+n+"' at position "+i+" in string "+t)}a=o,A=!0}}let h=s;A||(a=o);let c=o-a-l;if(0===c)h=s;else if(c>0){let t=P.TEN.pow(c);h=s.divide(t)}else if(c<0){let t=P.TEN.pow(-c);h=s.multiply(t)}return r?h.negate():h}static createNaN(){return new P(o.NaN,o.NaN)}static copy(t){return new P(t)}static magnitude(t){let i=Math.abs(t),n=Math.trunc(Math.floor(Math.log(i)/Math.log(10)));return 10*Math.pow(10,n)<=i&&(n+=1),n}static stringOfChar(t,i){let n=new T;for(let r=0;r<i;r++)n.append(t);return n.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,i){let n=this.abs(),r=P.magnitude(n._hi),s=P.TEN.pow(r);(n=n.divide(s)).gt(P.TEN)?(n=n.divide(P.TEN),r+=1):n.lt(P.ONE)&&(n=n.multiply(P.TEN),r-=1);let o=r+1,a=new T,l=P.MAX_PRINT_DIGITS-1;for(let i=0;i<=l;i++){t&&i===o&&a.append(".");let r=Math.trunc(n._hi);if(r<0)break;let s=!1,A=0;r>9?(s=!0,A="9"):A="0"+r,a.append(A),n=n.subtract(P.valueOf(r)).multiply(P.TEN),s&&n.selfAdd(P.TEN);let h=!0,c=P.magnitude(n._hi);if(c<0&&Math.abs(c)>=l-i&&(h=!1),!h)break}return i[0]=r,a.toString()}sqr(){return this.multiply(this)}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}setValue(){if(arguments[0]instanceof P||"number"==typeof arguments[0]){let t=arguments[0];return this.init(t),this}}multiply(){if(arguments[0]instanceof P){let t=arguments[0];return t.isNaN()?P.createNaN():P.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){let t=arguments[0];return o.isNaN(t)?P.createNaN():P.copy(this).selfMultiply(t,0)}}isNaN(){return o.isNaN(this._hi)}reciprocal(){let t=null,i=null,n=null,r=null,s=null,o=null,a=null,l=null;s=1/this._hi,t=(o=P.SPLIT*s)-s,l=P.SPLIT*this._hi,i=s-(t=o-t),n=l-this._hi,a=s*this._hi,n=l-n,r=this._hi-n,l=t*n-a+t*r+i*n+i*r,o=(1-a-l-s*this._lo)/this._hi;let A=s+o;return new P(A,s-A+o)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof P){let t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){let t=arguments[0];return this.add(-t)}}equals(){if(1==arguments.length&&arguments[0]instanceof P){let t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof P){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}min(t){return this.le(t)?this:t}selfDivide(){if(1==arguments.length){if(arguments[0]instanceof P){let t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfDivide(t,0)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=null,r=null,s=null,o=null,a=null,l=null,A=null,h=null;return a=this._hi/t,n=(l=P.SPLIT*a)-a,h=P.SPLIT*t,r=a-(n=l-n),s=h-t,A=a*t,o=t-(s=h-s),h=n*s-A+n*o+r*s+r*o,l=(this._hi-A-h+this._lo-a*i)/t,h=a+l,this._hi=h,this._lo=a-h+l,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof P){let t=arguments[0],i=null,n=null,r=null,s=null,o=null,a=null,l=null,A=null;return o=this._hi/t._hi,i=(a=P.SPLIT*o)-o,A=P.SPLIT*t._hi,n=o-(i=a-i),r=A-t._hi,l=o*t._hi,r=A-r,s=t._hi-r,A=i*r-l+i*s+n*r+n*s,a=(this._hi-l-A+this._lo-o*t._lo)/t._hi,new P(A=o+a,o-A+a)}if("number"==typeof arguments[0]){let t=arguments[0];return o.isNaN(t)?P.createNaN():P.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return P.valueOf(1);let i=new P(this),n=P.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(i),(r/=2)>0&&(i=i.sqr());else n=i;return t<0?n.reciprocal():n}ceil(){if(this.isNaN())return P.NaN;let t=Math.ceil(this._hi),i=0;return t===this._hi&&(i=Math.ceil(this._lo)),new P(t,i)}compareTo(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:+(this._lo>t._lo)}rint(){return this.isNaN()?this:this.add(.5).floor()}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return P.valueOf(0);if(this.isNegative())return P.NaN;let t=1/Math.sqrt(this._hi),i=this._hi*t,n=P.valueOf(i),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)}selfAdd(){if(1==arguments.length){if(arguments[0]instanceof P){let t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0],i=null,n=null,r=null,s=null,o=null,a=null;return o=(r=this._hi+t)-this._hi,s=r-o,i=r+(a=(s=t-o+(this._hi-s))+this._lo),n=a+(r-i),this._hi=i+n,this._lo=n+(i-this._hi),this}}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=null,r=null,s=null,o=null,a=null,l=null,A=null,h=null;a=this._hi+t,s=this._lo+i,A=a-this._hi,h=s-this._lo,l=a-A,o=s-h,l=t-A+(this._hi-l),o=i-h+(this._lo-o),n=a+(A=l+s),A=o+(A+(a-n));let c=n+A,u=A+(n-c);return this._hi=c,this._lo=u,this}}selfMultiply(){if(1==arguments.length){if(arguments[0]instanceof P){let t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){let t=arguments[0];return this.selfMultiply(t,0)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=null,r=null,s=null,o=null,a=null,l=null;n=(a=P.SPLIT*this._hi)-this._hi,l=P.SPLIT*t,n=a-n,r=this._hi-n,s=l-t,a=this._hi*t,o=t-(s=l-s),l=n*s-a+n*o+r*s+r*o+(this._hi*i+this._lo*t);let A=a+l,h=l+(n=a-A);return this._hi=A,this._lo=h,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return P.NaN;let t=Math.floor(this._hi),i=0;return t===this._hi&&(i=Math.floor(this._lo)),new P(t,i)}negate(){return this.isNaN()?this:new P(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}intValue(){return Math.trunc(this._hi)}toString(){let t=P.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){let t=this.getSpecialNumberString();if(null!==t)return t;let i=[,].fill(null),n=this.extractSignificantDigits(!0,i),r=i[0]+1,s=n;if("."===n.charAt(0))s="0"+n;else if(r<0)s="0."+P.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){let t=r-n.length;s=n+P.stringOfChar("0",t)+".0"}return this.isNegative()?"-"+s:s}toSciNotation(){if(this.isZero())return P.SCI_NOT_ZERO;let t=this.getSpecialNumberString();if(null!==t)return t;let i=[,].fill(null),n=this.extractSignificantDigits(!1,i),r=P.SCI_NOT_EXPONENT_CHAR+i[0];if("0"===n.charAt(0))throw new D("Found leading zero: "+n);let s="";n.length>1&&(s=n.substring(1));let o=n.charAt(0)+"."+s;return this.isNegative()?"-"+o+r:o+r}abs(){return this.isNaN()?P.NaN:this.isNegative()?this.negate():new P(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof P||"number"==typeof arguments[0]){let t=arguments[0];return P.copy(this).selfAdd(t)}}init(){if(1==arguments.length){if("number"==typeof arguments[0]){let t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof P){let t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._hi=t,this._lo=i}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?P.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[l,a,u]}}P.PI=new P(3.141592653589793,12246467991473532e-32),P.TWO_PI=new P(6.283185307179586,24492935982947064e-32),P.PI_2=new P(1.5707963267948966,6123233995736766e-32),P.E=new P(2.718281828459045,14456468917292502e-32),P.NaN=new P(o.NaN,o.NaN),P.EPS=123259516440783e-46,P.SPLIT=0x8000001,P.MAX_PRINT_DIGITS=32,P.TEN=P.valueOf(10),P.ONE=P.valueOf(1),P.SCI_NOT_EXPONENT_CHAR="E",P.SCI_NOT_ZERO="0.0E0";class k{static orientationIndex(t,i,n){let r=k.orientationIndexFilter(t,i,n);if(r<=1)return r;let s=P.valueOf(i.x).selfAdd(-t.x),o=P.valueOf(i.y).selfAdd(-t.y),a=P.valueOf(n.x).selfAdd(-i.x),l=P.valueOf(n.y).selfAdd(-i.y);return s.selfMultiply(l).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[3]instanceof P&&arguments[2]instanceof P&&arguments[0]instanceof P&&arguments[1]instanceof P){let t=arguments[1],i=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(i)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=P.valueOf(t),o=P.valueOf(i),a=P.valueOf(n),l=P.valueOf(r);return s.multiply(l).selfSubtract(o.multiply(a)).signum()}}static intersection(t,i,n,r){let s=new P(t.y).selfSubtract(i.y),a=new P(i.x).selfSubtract(t.x),l=new P(t.x).selfMultiply(i.y).selfSubtract(new P(i.x).selfMultiply(t.y)),A=new P(n.y).selfSubtract(r.y),h=new P(r.x).selfSubtract(n.x),c=new P(n.x).selfMultiply(r.y).selfSubtract(new P(r.x).selfMultiply(n.y)),u=a.multiply(c).selfSubtract(h.multiply(l)),d=A.multiply(l).selfSubtract(s.multiply(c)),g=s.multiply(h).selfSubtract(A.multiply(a)),f=u.selfDivide(g).doubleValue(),p=d.selfDivide(g).doubleValue();return o.isNaN(f)||o.isInfinite(f)||o.isNaN(p)||o.isInfinite(p)?null:new m(f,p)}static orientationIndexFilter(t,i,n){let r=null,s=(t.x-n.x)*(i.y-n.y),o=(t.y-n.y)*(i.x-n.x),a=s-o;if(s>0){if(o<=0)return k.signum(a);r=s+o}else{if(!(s<0)||o>=0)return k.signum(a);r=-s-o}let l=k.DP_SAFE_EPSILON*r;return a>=l||-a>=l?k.signum(a):2}static signum(t){return t>0?1:t<0?-1:0}}k.DP_SAFE_EPSILON=1e-15;class N{getCoordinate(){}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getM(t){if(this.hasM()){let i=this.getDimension()-this.getMeasures();return this.getOrdinate(t,i)}return o.NaN}setOrdinate(t,i,n){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):o.NaN}size(){}getOrdinate(t,i){}get interfaces_(){return[u]}}N.X=0,N.Y=1,N.Z=2,N.M=3;class U{static isCCW(){if(arguments[0]instanceof Array){let t=arguments[0],i=t.length-1;if(i<3)throw new r("Ring has fewer than 4 points, so orientation cannot be determined");let n=t[0],s=0;for(let r=1;r<=i;r++){let i=t[r];i.y>n.y&&(n=i,s=r)}let o=s;do(o-=1)<0&&(o=i);while(t[o].equals2D(n)&&o!==s)let a=s;do a=(a+1)%i;while(t[a].equals2D(n)&&a!==s)let l=t[o],A=t[a];if(l.equals2D(n)||A.equals2D(n)||l.equals2D(A))return!1;let h=U.index(l,n,A);return 0===h?l.x>A.x:h>0}if(b(arguments[0],N)){let t=arguments[0],i=t.size()-1;if(i<3)throw new r("Ring has fewer than 4 points, so orientation cannot be determined");let n=t.getCoordinate(0),s=0;for(let r=1;r<=i;r++){let i=t.getCoordinate(r);i.y>n.y&&(n=i,s=r)}let o=null,a=s;do(a-=1)<0&&(a=i),o=t.getCoordinate(a);while(o.equals2D(n)&&a!==s)let l=null,A=s;do A=(A+1)%i,l=t.getCoordinate(A);while(l.equals2D(n)&&A!==s)if(o.equals2D(n)||l.equals2D(n)||o.equals2D(l))return!1;let h=U.index(o,n,l);return 0===h?o.x>l.x:h>0}}static index(t,i,n){return k.orientationIndex(t,i,n)}}U.CLOCKWISE=-1,U.RIGHT=U.CLOCKWISE,U.COUNTERCLOCKWISE=1,U.LEFT=U.COUNTERCLOCKWISE,U.COLLINEAR=0,U.STRAIGHT=U.COLLINEAR;class Q{static intersection(t,i,n,r){let s=t.x<i.x?t.x:i.x,a=t.y<i.y?t.y:i.y,l=t.x>i.x?t.x:i.x,A=t.y>i.y?t.y:i.y,h=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,u=n.x>r.x?n.x:r.x,d=n.y>r.y?n.y:r.y,g=((s>h?s:h)+(l<u?l:u))/2,f=((a>c?a:c)+(A<d?A:d))/2,p=t.x-g,_=t.y-f,y=i.x-g,w=i.y-f,v=n.x-g,b=n.y-f,C=r.x-g,x=r.y-f,E=_-w,B=y-p,S=p*w-y*_,I=b-x,L=C-v,F=v*x-C*b,M=E*L-I*B,T=(B*F-L*S)/M,R=(I*S-E*F)/M;return o.isNaN(T)||o.isInfinite(T)||o.isNaN(R)||o.isInfinite(R)?null:new m(T+g,R+f)}}class H{static arraycopy(t,i,n,r,s){let o=0;for(let a=i;a<i+s;a++)n[r+o]=t[a],o++}static getProperty(t){return({"line.separator":"\n"})[t]}}class G{static log10(t){let i=Math.log(t);return o.isInfinite(i)||o.isNaN(i)?i:i/G.LOG_10}static min(t,i,n,r){let s=t;return i<s&&(s=i),n<s&&(s=n),r<s&&(s=r),s}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]||Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1],n=arguments[2];return t<i?i:t>n?n:t}}static average(t,i){return(t+i)/2}static wrap(t,i){return t<0?i- -t%i:t%i}static max(){if(3==arguments.length){let t=arguments[1],i=arguments[2],n=arguments[0];return t>n&&(n=t),i>n&&(n=i),n}if(4==arguments.length){let t=arguments[1],i=arguments[2],n=arguments[3],r=arguments[0];return t>r&&(r=t),i>r&&(r=i),n>r&&(r=n),r}}}G.LOG_10=Math.log(10);class V{static pointToSegmentString(t,i){if(0===i.length)throw new r("Line array must contain at least one vertex");let n=t.distance(i[0]);for(let r=0;r<i.length-1;r++){let s=V.pointToSegment(t,i[r],i[r+1]);s<n&&(n=s)}return n}static segmentToSegment(t,i,n,r){if(t.equals(i))return V.pointToSegment(t,n,r);if(n.equals(r))return V.pointToSegment(r,t,i);let s=!1;if(M.intersects(t,i,n,r)){let o=(i.x-t.x)*(r.y-n.y)-(i.y-t.y)*(r.x-n.x);if(0===o)s=!0;else{let a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),l=((t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y))/o,A=a/o;(A<0||A>1||l<0||l>1)&&(s=!0)}}else s=!0;return s?G.min(V.pointToSegment(t,n,r),V.pointToSegment(i,n,r),V.pointToSegment(n,t,i),V.pointToSegment(r,t,i)):0}static pointToLinePerpendicular(t,i,n){let r=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y);return Math.abs(((i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y))/r)*Math.sqrt(r)}static pointToSegment(t,i,n){if(i.x===n.x&&i.y===n.y)return t.distance(i);let r=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y),s=((t.x-i.x)*(n.x-i.x)+(t.y-i.y)*(n.y-i.y))/r;return s<=0?t.distance(i):s>=1?t.distance(n):Math.abs(((i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y))/r)*Math.sqrt(r)}}class z{static ofLine(t){let i=t.size();if(i<=1)return 0;let n=0,r=new m;t.getCoordinate(0,r);let s=r.x,o=r.y;for(let a=1;a<i;a++){t.getCoordinate(a,r);let i=r.x,l=r.y,A=i-s,h=l-o;n+=Math.sqrt(A*A+h*h),s=i,o=l}return n}}class K{filter(t){}}class j extends n{constructor(t){super(t),this.name="UnsupportedOperationException"}}class W{static measures(t){return t instanceof y?0:+(t instanceof w||t instanceof v)}static create(){if(1==arguments.length){let t=arguments[0];return W.create(t,0)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return 2===t?new y:3===t&&0===i?new m:3===t&&1===i?new w:4===t&&1===i?new v:new m}}static dimension(t){return t instanceof y?2:t instanceof w?3:t instanceof v?4:3}}class ${static scroll(t,i){let n=$.indexOf(i,t);if(n<0)return null;let r=Array(t.length).fill(null);H.arraycopy(t,n,r,0,t.length-n),H.arraycopy(t,0,r,t.length-n,n),H.arraycopy(r,0,t,0,t.length)}static removeRepeatedPoints(t){return $.hasRepeatedPoints(t)?new L(t,!1).toCoordinateArray():t}static reverse(t){let i=t.length-1,n=Math.trunc(i/2);for(let r=0;r<=n;r++){let n=t[r];t[r]=t[i-r],t[i-r]=n}}static removeNull(t){let i=0;for(let n=0;n<t.length;n++)null!==t[n]&&i++;let n=Array(i).fill(null);if(0===i)return n;let r=0;for(let i=0;i<t.length;i++)null!==t[i]&&(n[r++]=t[i]);return n}static copyDeep(){if(1==arguments.length){let t=arguments[0],i=Array(t.length).fill(null);for(let n=0;n<t.length;n++)i[n]=t[n].copy();return i}if(5==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4];for(let o=0;o<s;o++)n[r+o]=t[i+o].copy()}}static isEqualReversed(t,i){for(let n=0;n<t.length;n++){let r=t[n],s=i[t.length-n-1];if(0!==r.compareTo(s))return!1}return!0}static envelope(t){let i=new M;for(let n=0;n<t.length;n++)i.expandToInclude(t[n]);return i}static extract(t,i,n){i=G.clamp(i,0,t.length);let r=(n=G.clamp(n,-1,t.length))-i+1;n<0&&(r=0),i>=t.length&&(r=0),n<i&&(r=0);let s=Array(r).fill(null);if(0===r)return s;let o=0;for(let r=i;r<=n;r++)s[o++]=t[r];return s}static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,i){for(let n=0;n<t.length;n++){let r=t[n];if(0>$.indexOf(r,i))return r}return null}static equals(){if(2==arguments.length){let t=arguments[0],i=arguments[1];if(t===i)return!0;if(null===t||null===i||t.length!==i.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].equals(i[n]))return!1;return!0}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(t===i)return!0;if(null===t||null===i||t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(0!==n.compare(t[r],i[r]))return!1;return!0}}static intersection(t,i){let n=new L;for(let r=0;r<t.length;r++)i.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let i=0;for(let n of t)i=Math.max(i,W.measures(n));return i}static hasRepeatedPoints(t){for(let i=1;i<t.length;i++)if(t[i-1].equals(t[i]))return!0;return!1}static toCoordinateArray(t){return t.toArray($.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let i=0;for(let n of t)i=Math.max(i,W.dimension(n));return i}static atLeastNCoordinatesOrNothing(t,i){return i.length>=t?i:[]}static indexOf(t,i){for(let n=0;n<i.length;n++)if(t.equals(i[n]))return n;return -1}static increasingDirection(t){for(let i=0;i<Math.trunc(t.length/2);i++){let n=t.length-1-i,r=t[i].compareTo(t[n]);if(0!==r)return r}return 1}static compare(t,i){let n=0;for(;n<t.length&&n<i.length;){let r=t[n].compareTo(i[n]);if(0!==r)return r;n++}return n<i.length?-1:+(n<t.length)}static minCoordinate(t){let i=null;for(let n=0;n<t.length;n++)(null===i||i.compareTo(t[n])>0)&&(i=t[n]);return i}}$.ForwardComparator=class{compare(t,i){return $.compare(t,i)}get interfaces_(){return[d]}},$.BidirectionalComparator=class{compare(t,i){if(t.length<i.length)return -1;if(t.length>i.length)return 1;if(0===t.length)return 0;let n=$.compare(t,i);return $.isEqualReversed(t,i)?0:n}OLDcompare(t,i){if(t.length<i.length)return -1;if(t.length>i.length)return 1;if(0===t.length)return 0;let n=$.increasingDirection(t),r=$.increasingDirection(i),s=n>0?0:t.length-1,o=r>0?0:t.length-1;for(let a=0;a<t.length;a++){let a=t[s].compareTo(i[o]);if(0!==a)return a;s+=n,o+=r}return 0}get interfaces_(){return[d]}},$.coordArrayType=[].fill(null);class Y{static toDimensionSymbol(t){switch(t){case Y.FALSE:return Y.SYM_FALSE;case Y.TRUE:return Y.SYM_TRUE;case Y.DONTCARE:return Y.SYM_DONTCARE;case Y.P:return Y.SYM_P;case Y.L:return Y.SYM_L;case Y.A:return Y.SYM_A}throw new r("Unknown dimension value: "+t)}static toDimensionValue(t){switch(O.toUpperCase(t)){case Y.SYM_FALSE:return Y.FALSE;case Y.SYM_TRUE:return Y.TRUE;case Y.SYM_DONTCARE:return Y.DONTCARE;case Y.SYM_P:return Y.P;case Y.SYM_L:return Y.L;case Y.SYM_A:return Y.A}throw new r("Unknown dimension symbol: "+t)}}Y.P=0,Y.L=1,Y.A=2,Y.FALSE=-1,Y.TRUE=-2,Y.DONTCARE=-3,Y.SYM_FALSE="F",Y.SYM_TRUE="T",Y.SYM_DONTCARE="*",Y.SYM_P="0",Y.SYM_L="1",Y.SYM_A="2";class q{constructor(){q.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===q.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(q.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1==arguments.length){let i=arguments[0];return t=i,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(i)}if(2==arguments.length){let i=arguments[0],n=arguments[1];return t=i,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(i,n)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(t){if(t.getTypeCode()===q.TYPECODE_GEOMETRYCOLLECTION)throw new r("This method does not support GeometryCollection arguments")}equal(t,i,n){return 0===n?t.equals(i):t.distance(i)<=n}norm(){let t=this.copy();return t.normalize(),t}reverse(){let t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){let t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new M(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,i){let n=t.iterator(),r=i.iterator();for(;n.hasNext()&&r.hasNext();){let t=n.next(),i=r.next(),s=t.compareTo(i);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getTypeCode()==t.getTypeCode()}get interfaces_(){return[u,a,l]}getClass(){return q}static hasNonEmptyElements(t){for(let i=0;i<t.length;i++)if(!t[i].isEmpty())return!0;return!1}static hasNullElements(t){for(let i=0;i<t.length;i++)if(null===t[i])return!0;return!1}}q.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},q.TYPECODE_POINT=0,q.TYPECODE_MULTIPOINT=1,q.TYPECODE_LINESTRING=2,q.TYPECODE_LINEARRING=3,q.TYPECODE_MULTILINESTRING=4,q.TYPECODE_POLYGON=5,q.TYPECODE_MULTIPOLYGON=6,q.TYPECODE_GEOMETRYCOLLECTION=7,q.TYPENAME_POINT="Point",q.TYPENAME_MULTIPOINT="MultiPoint",q.TYPENAME_LINESTRING="LineString",q.TYPENAME_LINEARRING="LinearRing",q.TYPENAME_MULTILINESTRING="MultiLineString",q.TYPENAME_POLYGON="Polygon",q.TYPENAME_MULTIPOLYGON="MultiPolygon",q.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",q.geometryChangedFilter={get interfaces_(){return[K]},filter(t){t.geometryChangedAction()}};class X{filter(t){}}class Z{}class J{static scroll(){if(2==arguments.length){if(b(arguments[0],N)&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1];J.scroll(t,i,J.isRing(t))}else if(b(arguments[0],N)&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=J.indexOf(i,t);if(n<=0)return null;J.scroll(t,n)}}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(i<=0)return null;let r=t.copy(),s=n?t.size()-1:t.size();for(let n=0;n<s;n++)for(let o=0;o<t.getDimension();o++)t.setOrdinate(n,o,r.getOrdinate((i+n)%s,o));if(n)for(let i=0;i<t.getDimension();i++)t.setOrdinate(s,i,t.getOrdinate(0,i))}}static isEqual(t,i){let n=t.size();if(n!==i.size())return!1;let r=Math.min(t.getDimension(),i.getDimension());for(let s=0;s<n;s++)for(let n=0;n<r;n++){let r=t.getOrdinate(s,n),a=i.getOrdinate(s,n);if(t.getOrdinate(s,n)!==i.getOrdinate(s,n)&&(!o.isNaN(r)||!o.isNaN(a)))return!1}return!0}static minCoordinateIndex(){if(1==arguments.length){let t=arguments[0];return J.minCoordinateIndex(t,0,t.size()-1)}if(3==arguments.length){let t=arguments[0],i=arguments[2],n=-1,r=null;for(let s=arguments[1];s<=i;s++){let i=t.getCoordinate(s);(null===r||r.compareTo(i)>0)&&(r=i,n=s)}return n}}static extend(t,i,n){let r=t.create(n,i.getDimension()),s=i.size();if(J.copy(i,0,r,0,s),s>0)for(let t=s;t<n;t++)J.copy(i,s-1,r,t,1);return r}static reverse(t){let i=t.size()-1,n=Math.trunc(i/2);for(let r=0;r<=n;r++)J.swap(t,r,i-r)}static ensureValidRing(t,i){let n=i.size();return 0===n?i:n<=3?J.createClosedRing(t,i,4):i.getOrdinate(0,N.X)===i.getOrdinate(n-1,N.X)&&i.getOrdinate(0,N.Y)===i.getOrdinate(n-1,N.Y)?i:J.createClosedRing(t,i,n+1)}static minCoordinate(t){let i=null;for(let n=0;n<t.size();n++){let r=t.getCoordinate(n);(null===i||i.compareTo(r)>0)&&(i=r)}return i}static copyCoord(t,i,n,r){let s=Math.min(t.getDimension(),n.getDimension());for(let o=0;o<s;o++)n.setOrdinate(r,o,t.getOrdinate(i,o))}static isRing(t){let i=t.size();return 0===i||!(i<=3)&&t.getOrdinate(0,N.X)===t.getOrdinate(i-1,N.X)&&t.getOrdinate(0,N.Y)===t.getOrdinate(i-1,N.Y)}static swap(t,i,n){if(i===n)return null;for(let r=0;r<t.getDimension();r++){let s=t.getOrdinate(i,r);t.setOrdinate(i,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,s)}}static copy(t,i,n,r,s){for(let o=0;o<s;o++)J.copyCoord(t,i+o,n,r+o)}static indexOf(t,i){for(let n=0;n<i.size();n++)if(t.x===i.getOrdinate(n,N.X)&&t.y===i.getOrdinate(n,N.Y))return n;return -1}static createClosedRing(t,i,n){let r=t.create(n,i.getDimension()),s=i.size();J.copy(i,0,r,0,s);for(let t=s;t<n;t++)J.copy(i,0,r,t,1);return r}}class tt{filter(t){}}class te extends q{constructor(){super(),te.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0==arguments.length);else if(2==arguments.length){let t=arguments[0],i=arguments[1];q.constructor_.call(this,i),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new M:this._points.expandEnvelope(new M)}isRing(){return this.isClosed()&&$.isRing(this.getCoordinates())}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new te(this._points.copy(),this._factory)}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];if(!this.isEquivalentClass(t)||this._points.size()!==t._points.size())return!1;for(let n=0;n<this._points.size();n++)if(!this.equal(this._points.getCoordinate(n),t._points.getCoordinate(n),i))return!1;return!0}return super.equalsExact.apply(this,arguments)}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){let t=this._points.copy();return J.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return q.TYPECODE_LINESTRING}getDimension(){return 1}getBoundary(){throw new j}isEquivalentClass(t){return t instanceof te}getCoordinateSequence(){return this._points}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){let i=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(i))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(i))>0){let t=this._points.copy();J.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?Y.FALSE:0}getLength(){return z.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1==arguments.length){let t=arguments[0],i=0,n=0;for(;i<this._points.size()&&n<t._points.size();){let r=this._points.getCoordinate(i).compareTo(t._points.getCoordinate(n));if(0!==r)return r;i++,n++}return i<this._points.size()?1:n<t._points.size()?-1:0}if(2==arguments.length){let t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(b(arguments[0],X)){let t=arguments[0];for(let i=0;i<this._points.size();i++)t.filter(this._points.getCoordinate(i))}else if(b(arguments[0],F)){let t=arguments[0];if(0===this._points.size())return null;for(let i=0;i<this._points.size()&&(t.filter(this._points,i),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else b(arguments[0],tt)?arguments[0].filter(this):b(arguments[0],K)&&arguments[0].filter(this)}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return q.TYPENAME_LINESTRING}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new r("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let i=0;i<this._points.size();i++)if(this._points.getCoordinate(i).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}get interfaces_(){return[Z]}}class ti extends te{constructor(){super(),ti.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];te.constructor_.call(this,t,i),this.validateConstruction()}copyInternal(){return new ti(this._points.copy(),this._factory)}getBoundaryDimension(){return Y.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){let t=this._points.copy();return J.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return q.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new r("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<ti.MINIMUM_VALID_SIZE)throw new r("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return q.TYPENAME_LINEARRING}}ti.MINIMUM_VALID_SIZE=4;class tn{create(){if(1==arguments.length)arguments[0]instanceof Array||b(arguments[0],N);else if(2==arguments.length);else if(3==arguments.length){let t=arguments[0],i=arguments[1];return this.create(t,i)}}}class tr{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,i){this.str=this.str.substr(0,t)+i+this.str.substr(t+1)}toString(){return this.str}}class ts{constructor(){ts.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1==arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];ts.constructor_.call(this,t,$.dimension(t),$.measures(t))}else if(Number.isInteger(arguments[0])){let t=arguments[0];this._coordinates=Array(t).fill(null);for(let i=0;i<t;i++)this._coordinates[i]=new m}else if(b(arguments[0],N)){let t=arguments[0];if(null===t)return this._coordinates=[].fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=Array(t.size()).fill(null);for(let i=0;i<this._coordinates.length;i++)this._coordinates[i]=t.getCoordinateCopy(i)}}else if(2==arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1];ts.constructor_.call(this,t,i,$.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1];this._coordinates=Array(t).fill(null),this._dimension=i;for(let n=0;n<t;n++)this._coordinates[n]=W.create(i)}}else if(3==arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1],n=arguments[2];this._dimension=i,this._measures=n,this._coordinates=null===t?[].fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1],n=arguments[2];this._coordinates=Array(t).fill(null),this._dimension=i,this._measures=n;for(let i=0;i<t;i++)this._coordinates[i]=this.createCoordinate()}}}getCoordinate(){if(1==arguments.length){let t=arguments[0];return this._coordinates[t]}if(2==arguments.length){let t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}getCoordinateCopy(t){let i=this.createCoordinate();return i.setCoordinate(this._coordinates[t]),i}createCoordinate(){return W.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let i=0;i<this._coordinates.length;i++)t.expandToInclude(this._coordinates[i]);return t}copy(){let t=Array(this.size()).fill(null);for(let i=0;i<this._coordinates.length;i++){let n=this.createCoordinate();n.setCoordinate(this._coordinates[i]),t[i]=n}return new ts(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){let t=new tr(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let i=1;i<this._coordinates.length;i++)t.append(", "),t.append(this._coordinates[i]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}getM(t){return this.hasM()?this._coordinates[t].getM():o.NaN}setOrdinate(t,i,n){switch(i){case N.X:this._coordinates[t].x=n;break;case N.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(i,n)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():o.NaN}size(){return this._coordinates.length}getOrdinate(t,i){switch(i){case N.X:return this._coordinates[t].x;case N.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(i)}}get interfaces_(){return[N,l]}}class to{static instance(){return to.instanceObject}readResolve(){return to.instance()}create(){if(1==arguments.length){if(arguments[0]instanceof Array||b(arguments[0],N))return new ts(arguments[0])}else{if(2==arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new ts(arguments[0],t)}if(3==arguments.length){let t=arguments[2],i=arguments[1]-t;return t>1&&(t=1),i>3&&(i=3),i<2&&(i=2),new ts(arguments[0],i+t,t)}}}get interfaces_(){return[tn,l]}}to.instanceObject=new to;class ta extends C{contains(){}}class tl extends ta{}class tA extends tl{constructor(t){super(),this.array=[],t instanceof C&&this.addAll(t)}contains(t){for(let i of this.array)if(0===i.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let i=0,n=this.array.length;i<n;i++)if(1===this.array[i].compareTo(t))return!!this.array.splice(i,0,t);return this.array.push(t),!0}addAll(t){for(let i of t)this.add(i);return!0}remove(){throw new j}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new th(this.array)}}let th=class{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new B;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new j}};class tc{static sort(){let t=arguments[0];if(1==arguments.length)t.sort((t,i)=>t.compareTo(i));else if(2==arguments.length)t.sort((t,i)=>arguments[1].compare(t,i));else if(3==arguments.length){let i=t.slice(arguments[1],arguments[2]);i.sort();let n=t.slice(0,arguments[1]).concat(i,t.slice(arguments[2],t.length));for(let i of(t.splice(0,t.length),n))t.push(i)}else if(4==arguments.length){let i=t.slice(arguments[1],arguments[2]);i.sort((t,i)=>arguments[3].compare(t,i));let n=t.slice(0,arguments[1]).concat(i,t.slice(arguments[2],t.length));for(let i of(t.splice(0,t.length),n))t.push(i)}}static asList(t){let i=new S;for(let n of t)i.add(n);return i}static copyOf(t,i){return t.slice(0,i)}}class tu extends q{constructor(){super(),tu.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0==arguments.length);else if(2==arguments.length){let t=arguments[0],i=arguments[1];if(q.constructor_.call(this,i),null===t&&(t=[]),q.hasNullElements(t))throw new r("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){let t=new M;for(let i=0;i<this._geometries.length;i++)t.expandToInclude(this._geometries[i].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){let t=Array(this.getNumPoints()).fill(null),i=-1;for(let n=0;n<this._geometries.length;n++){let r=this._geometries[n].getCoordinates();for(let n=0;n<r.length;n++)t[++i]=r[n]}return t}getArea(){let t=0;for(let i=0;i<this._geometries.length;i++)t+=this._geometries[i].getArea();return t}copyInternal(){let t=Array(this._geometries.length).fill(null);for(let i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new tu(t,this._factory)}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];if(!this.isEquivalentClass(t)||this._geometries.length!==t._geometries.length)return!1;for(let n=0;n<this._geometries.length;n++)if(!this._geometries[n].equalsExact(t._geometries[n],i))return!1;return!0}return super.equalsExact.apply(this,arguments)}reverseInternal(){let t=this._geometries.length,i=new S(t);for(let n=0;n<t;n++)i.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(i)}getTypeCode(){return q.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=Y.FALSE;for(let i=0;i<this._geometries.length;i++)t=Math.max(t,this._geometries[i].getDimension());return t}getNumGeometries(){return this._geometries.length}getBoundary(){return q.checkNotGeometryCollection(this),c.shouldNeverReachHere(),null}getGeometryType(){return q.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();tc.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=Y.FALSE;for(let i=0;i<this._geometries.length;i++)t=Math.max(t,this._geometries[i].getBoundaryDimension());return t}getLength(){let t=0;for(let i=0;i<this._geometries.length;i++)t+=this._geometries[i].getLength();return t}getNumPoints(){let t=0;for(let i=0;i<this._geometries.length;i++)t+=this._geometries[i].getNumPoints();return t}compareToSameClass(){if(1==arguments.length){let t=arguments[0],i=new tA(tc.asList(this._geometries)),n=new tA(tc.asList(t._geometries));return this.compare(i,n)}if(2==arguments.length){let t=arguments[1],i=arguments[0],n=this.getNumGeometries(),r=i.getNumGeometries(),s=0;for(;s<n&&s<r;){let n=this.getGeometryN(s),r=i.getGeometryN(s),o=n.compareToSameClass(r,t);if(0!==o)return o;s++}return s<n?1:s<r?-1:0}}apply(){if(b(arguments[0],X)){let t=arguments[0];for(let i=0;i<this._geometries.length;i++)this._geometries[i].apply(t)}else if(b(arguments[0],F)){let t=arguments[0];if(0===this._geometries.length)return null;for(let i=0;i<this._geometries.length&&(this._geometries[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(b(arguments[0],tt)){let t=arguments[0];t.filter(this);for(let i=0;i<this._geometries.length;i++)this._geometries[i].apply(t)}else if(b(arguments[0],K)){let t=arguments[0];t.filter(this);for(let i=0;i<this._geometries.length;i++)this._geometries[i].apply(t)}}}class td{}class tg extends tu{constructor(){super(),tg.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];tu.constructor_.call(this,t,i)}copyInternal(){let t=Array(this._geometries.length).fill(null);for(let i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new tg(t,this._factory)}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,i)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return q.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();let t=new S;for(let i=0;i<this._geometries.length;i++){let n=this._geometries[i].getBoundary();for(let i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i))}let i=Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}getGeometryType(){return q.TYPENAME_MULTIPOLYGON}get interfaces_(){return[td]}}let tf=class{get(){}put(){}size(){}values(){}entrySet(){}};class tp extends ta{constructor(t){super(),this.map=new Map,t instanceof C&&this.addAll(t)}contains(t){let i=t.hashCode?t.hashCode():t;return!!this.map.has(i)}add(t){let i=t.hashCode?t.hashCode():t;return!this.map.has(i)&&!!this.map.set(i,t)}addAll(t){for(let i of t)this.add(i);return!0}remove(){throw new j}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new tm(this.map)}[Symbol.iterator](){return this.map}}let tm=class{constructor(t){this.iterator=t.values();let{done:i,value:n}=this.iterator.next();this.done=i,this.value=n}next(){if(this.done)throw new B;let t=this.value,{done:i,value:n}=this.iterator.next();return this.done=i,this.value=n,t}hasNext(){return!this.done}remove(){throw new j}};class t_ extends tf{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,i){return this.map.set(t,i),i}values(){let t=new S,i=this.map.values(),n=i.next();for(;!n.done;)t.add(n.value),n=i.next();return t}entrySet(){let t=new tp;return this.map.entries().forEach(i=>t.add(i)),t}size(){return this.map.size()}}class ty{constructor(){ty.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0==arguments.length)this._modelType=ty.FLOATING;else if(1==arguments.length){if(arguments[0]instanceof tw){let t=arguments[0];this._modelType=t,t===ty.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){let t=arguments[0];this._modelType=ty.FIXED,this.setScale(t)}else if(arguments[0]instanceof ty){let t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}}static mostPrecise(t,i){return t.compareTo(i)>=0?t:i}equals(t){return t instanceof ty&&this._modelType===t._modelType&&this._scale===t._scale}compareTo(t){let i=this.getMaximumSignificantDigits(),n=t.getMaximumSignificantDigits();return R.compare(i,n)}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===ty.FLOATING?t="Floating":this._modelType===ty.FLOATING_SINGLE?t="Floating-Single":this._modelType===ty.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){let t=arguments[0];return o.isNaN(t)||this._modelType===ty.FLOATING_SINGLE?t:this._modelType===ty.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof m){let t=arguments[0];if(this._modelType===ty.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===ty.FLOATING?t=16:this._modelType===ty.FLOATING_SINGLE?t=6:this._modelType===ty.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}getScale(){return this._scale}isFloating(){return this._modelType===ty.FLOATING||this._modelType===ty.FLOATING_SINGLE}get interfaces_(){return[l,a]}}class tw{constructor(){tw.constructor_.apply(this,arguments)}static constructor_(){this._name=null;let t=arguments[0];this._name=t,tw.nameToTypeMap.put(t,this)}readResolve(){return tw.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[l]}}tw.nameToTypeMap=new t_,ty.Type=tw,ty.FIXED=new tw("FIXED"),ty.FLOATING=new tw("FLOATING"),ty.FLOATING_SINGLE=new tw("FLOATING SINGLE"),ty.maximumPreciseValue=0x20000000000000;class tv extends tu{constructor(){super(),tv.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];tu.constructor_.call(this,t,i)}copyInternal(){let t=Array(this._geometries.length).fill(null);for(let i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new tv(t,this._factory)}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,i)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?Y.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return q.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new j}getGeometryType(){return q.TYPENAME_MULTILINESTRING}get interfaces_(){return[Z]}}class tb{}class tC extends q{constructor(){super(),tC.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;let t=arguments[0],i=arguments[1];q.constructor_.call(this,i),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new M;let t=new M;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new tC(this._coordinates.copy(),this._factory)}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),i))}return super.equalsExact.apply(this,arguments)}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return q.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return+!this.isEmpty()}getX(){if(null===this.getCoordinate())throw new D("getX called on empty Point");return this.getCoordinate().x}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return q.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new D("getY called on empty Point");return this.getCoordinate().y}isSimple(){return!0}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return Y.FALSE}compareToSameClass(){if(1==arguments.length){let t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2==arguments.length){let t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(b(arguments[0],X)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(b(arguments[0],F)){let t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else b(arguments[0],tt)?arguments[0].filter(this):b(arguments[0],K)&&arguments[0].filter(this)}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),c.isTrue(1>=t.size()),this._coordinates=t}get interfaces_(){return[tb]}}class tx{static ofRingSigned(){if(arguments[0]instanceof Array){let t=arguments[0];if(t.length<3)return 0;let i=0,n=t[0].x;for(let r=1;r<t.length-1;r++){let s=t[r].x-n,o=t[r+1].y;i+=s*(t[r-1].y-o)}return i/2}if(b(arguments[0],N)){let t=arguments[0],i=t.size();if(i<3)return 0;let n=new m,r=new m,s=new m;t.getCoordinate(0,r),t.getCoordinate(1,s);let o=r.x;s.x-=o;let a=0;for(let l=1;l<i-1;l++)n.y=r.y,r.x=s.x,r.y=s.y,t.getCoordinate(l+1,s),s.x-=o,a+=r.x*(n.y-s.y);return a/2}}static ofRing(){if(arguments[0]instanceof Array||b(arguments[0],N)){let t=arguments[0];return Math.abs(tx.ofRingSigned(t))}}}class tE extends q{constructor(){super(),tE.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],i=arguments[1],n=arguments[2];if(q.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===i&&(i=[]),q.hasNullElements(i))throw new r("holes must not contain null elements");if(t.isEmpty()&&q.hasNonEmptyElements(i))throw new r("shell is empty but holes are not");this._shell=t,this._holes=i}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];let t=Array(this.getNumPoints()).fill(null),i=-1,n=this._shell.getCoordinates();for(let r=0;r<n.length;r++)t[++i]=n[r];for(let n=0;n<this._holes.length;n++){let r=this._holes[n].getCoordinates();for(let n=0;n<r.length;n++)t[++i]=r[n]}return t}getArea(){let t;t=0+tx.ofRing(this._shell.getCoordinateSequence());for(let i=0;i<this._holes.length;i++)t-=tx.ofRing(this._holes[i].getCoordinateSequence());return t}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];if(!this.isEquivalentClass(t))return!1;let n=this._shell,r=t._shell;if(!n.equalsExact(r,i)||this._holes.length!==t._holes.length)return!1;for(let n=0;n<this._holes.length;n++)if(!this._holes[n].equalsExact(t._holes[n],i))return!1;return!0}return super.equalsExact.apply(this,arguments)}reverseInternal(){let t=this.getExteriorRing().reverse(),i=Array(this.getNumInteriorRing()).fill(null);for(let t=0;t<i.length;t++)i[t]=this.getInteriorRingN(t).reverse();return this.getFactory().createPolygon(t,i)}getTypeCode(){return q.TYPECODE_POLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();let t=Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let i=0;i<this._holes.length;i++)t[i+1]=this._holes[i];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return q.TYPENAME_POLYGON}getExteriorRing(){return this._shell}copyInternal(){let t=this._shell.copy(),i=Array(this._holes.length).fill(null);for(let t=0;t<this._holes.length;t++)i[t]=this._holes[t].copy();return new tE(t,i,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;let t=this._shell.getCoordinateSequence(),i=this.getEnvelopeInternal();for(let n=0;n<5;n++){let r=t.getX(n);if(r!==i.getMinX()&&r!==i.getMaxX())return!1;let s=t.getY(n);if(s!==i.getMinY()&&s!==i.getMaxY())return!1}let n=t.getX(0),r=t.getY(0);for(let i=1;i<=4;i++){let s=t.getX(i),o=t.getY(i);if(s!==n==(o!==r))return!1;n=s,r=o}return!0}normalize(){if(0==arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);tc.sort(this._holes)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];if(t.isEmpty())return null;let n=t.getCoordinateSequence(),r=J.minCoordinateIndex(n,0,n.size()-2);J.scroll(n,r,!0),U.isCCW(n)===i&&J.reverse(n)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getLength(){let t;t=0+this._shell.getLength();for(let i=0;i<this._holes.length;i++)t+=this._holes[i].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let i=0;i<this._holes.length;i++)t+=this._holes[i].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,i){let n=t.copy();return this.normalize(n,i),n}compareToSameClass(){if(1==arguments.length){let t=arguments[0],i=this._shell,n=t._shell;return i.compareToSameClass(n)}if(2==arguments.length){let t=arguments[1],i=arguments[0],n=this._shell,r=i._shell,s=n.compareToSameClass(r,t);if(0!==s)return s;let o=this.getNumInteriorRing(),a=i.getNumInteriorRing(),l=0;for(;l<o&&l<a;){let n=this.getInteriorRingN(l),r=i.getInteriorRingN(l),s=n.compareToSameClass(r,t);if(0!==s)return s;l++}return l<o?1:l<a?-1:0}}apply(){if(b(arguments[0],X)){let t=arguments[0];this._shell.apply(t);for(let i=0;i<this._holes.length;i++)this._holes[i].apply(t)}else if(b(arguments[0],F)){let t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let i=0;i<this._holes.length&&(this._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(b(arguments[0],tt))arguments[0].filter(this);else if(b(arguments[0],K)){let t=arguments[0];t.filter(this),this._shell.apply(t);for(let i=0;i<this._holes.length;i++)this._holes[i].apply(t)}}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[td]}}class tB extends tu{constructor(){super(),tB.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];tu.constructor_.call(this,t,i)}equalsExact(){if(2==arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof q){let t=arguments[0],i=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,i)}return super.equalsExact.apply(this,arguments)}getTypeCode(){return q.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return q.TYPENAME_MULTIPOINT}copyInternal(){let t=Array(this._geometries.length).fill(null);for(let i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new tB(t,this._factory)}isValid(){return!0}getCoordinate(){if(1==arguments.length&&Number.isInteger(arguments[0])){let t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return Y.FALSE}get interfaces_(){return[tb]}}class tS{constructor(){tS.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0==arguments.length)tS.constructor_.call(this,new ty,0);else if(1==arguments.length){if(b(arguments[0],tn)){let t=arguments[0];tS.constructor_.call(this,new ty,0,t)}else if(arguments[0]instanceof ty){let t=arguments[0];tS.constructor_.call(this,t,0,tS.getDefaultCoordinateSequenceFactory())}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];tS.constructor_.call(this,t,i,tS.getDefaultCoordinateSequenceFactory())}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=n,this._SRID=i}}static toMultiPolygonArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static toGeometryArray(t){if(null===t)return null;let i=Array(t.size()).fill(null);return t.toArray(i)}static getDefaultCoordinateSequenceFactory(){return to.instance()}static toMultiLineStringArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static toLineStringArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static toMultiPointArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static toLinearRingArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static toPointArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static toPolygonArray(t){let i=Array(t.size()).fill(null);return t.toArray(i)}static createPointFromInternalCoord(t,i){return i.getPrecisionModel().makePrecise(t),i.getFactory().createPoint(t)}createEmpty(t){switch(t){case -1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new r("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new m(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new m(t.getMinX(),t.getMinY()),new m(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new m(t.getMinX(),t.getMinY()),new m(t.getMinX(),t.getMaxY()),new m(t.getMaxX(),t.getMaxY()),new m(t.getMaxX(),t.getMinY()),new m(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0==arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(b(arguments[0],N))return new te(arguments[0],this)}}createMultiLineString(){return 0==arguments.length?new tv(null,this):1==arguments.length?new tv(arguments[0],this):void 0}createPolygon(){if(0==arguments.length)return this.createPolygon(null,null);if(1==arguments.length){if(b(arguments[0],N)||arguments[0]instanceof Array){let t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof ti){let t=arguments[0];return this.createPolygon(t,null)}}else if(2==arguments.length)return new tE(arguments[0],arguments[1],this)}getSRID(){return this._SRID}createGeometryCollection(){return 0==arguments.length?new tu(null,this):1==arguments.length?new tu(arguments[0],this):void 0}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0==arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(b(arguments[0],N))return new ti(arguments[0],this)}}createMultiPolygon(){return 0==arguments.length?new tg(null,this):1==arguments.length?new tg(arguments[0],this):void 0}createMultiPoint(){if(0==arguments.length)return new tB(null,this);if(1==arguments.length){if(arguments[0]instanceof Array)return new tB(arguments[0],this);if(b(arguments[0],N)){let t=arguments[0];if(null===t)return this.createMultiPoint([].fill(null));let i=Array(t.size()).fill(null);for(let n=0;n<t.size();n++){let r=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());J.copy(t,n,r,0,1),i[n]=this.createPoint(r)}return this.createMultiPoint(i)}}}buildGeometry(t){let i=null,n=!1,r=!1;for(let s=t.iterator();s.hasNext();){let t=s.next(),o=t.getTypeCode();null===i&&(i=o),o!==i&&(n=!0),t instanceof tu&&(r=!0)}if(null===i)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(tS.toGeometryArray(t));let s=t.iterator().next();if(t.size()>1){if(s instanceof tE)return this.createMultiPolygon(tS.toPolygonArray(t));if(s instanceof te)return this.createMultiLineString(tS.toLineStringArray(t));if(s instanceof tC)return this.createMultiPoint(tS.toPointArray(t));c.shouldNeverReachHere("Unhandled geometry type: "+s.getGeometryType())}return s}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0==arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1==arguments.length){if(arguments[0]instanceof m){let t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(b(arguments[0],N))return new tC(arguments[0],this)}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}get interfaces_(){return[l]}}let tI={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},tL="EMPTY";for(let t in tI)tI[t].toUpperCase();class tF{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,i){return t>="0"&&t<="9"||"."==t&&!(void 0!==i&&i)}isWhiteSpace_(t){return" "==t||"	"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let t=this.nextChar_(),i=this.index_,n,r=t;if("("==t)n=2;else if(","==t)n=5;else if(")"==t)n=3;else if(this.isNumeric_(t)||"-"==t)n=4,r=this.readNumber_();else if(this.isAlpha_(t))n=1,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw Error("Unexpected character: "+t);n=6}return{position:i,value:r,type:n}}readNumber_(){let t,i=this.index_,n=!1,r=!1;do"."==t?n=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_();while(this.isNumeric_(t,n)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t))return parseFloat(this.wkt.substring(i,this.index_--))}readText_(){let t,i=this.index_;do t=this.nextChar_();while(this.isAlpha_(t))return this.wkt.substring(i,this.index_--).toUpperCase()}}class tM{constructor(t,i){this.lexer_=t,this.token_,this.layout_="XY",this.factory=i}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){let i=this.isTokenType(t);return i&&this.consume_(),i}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY",i=this.token_;if(this.isTokenType(1)){let n=i.value;"Z"===n?t="XYZ":"M"===n?t="XYM":"ZM"===n&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(2)){let t=[];do t.push(this.parseGeometry_());while(this.match(5))if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(2)){let t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(2)){let t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(2)){let t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(2)){let t;if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(2)){let t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(2)){let t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw Error(this.formatErrorMessage_())}parsePoint_(){let t=[],i=this.layout_.length;for(let n=0;n<i;++n){let i=this.token_;if(!this.match(4))break;t.push(i.value)}if(t.length==i)return t;throw Error(this.formatErrorMessage_())}parsePointList_(){let t=[this.parsePoint_()];for(;this.match(5);)t.push(this.parsePoint_());return t}parsePointTextList_(){let t=[this.parsePointText_()];for(;this.match(5);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){let t=[this.parseLineStringText_()];for(;this.match(5);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){let t=[this.parsePolygonText_()];for(;this.match(5);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){let t=this.isTokenType(1)&&this.token_.value==tL;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let t=this.factory,i=t=>t?new m(...t):new m,n=n=>{let r=n.map(n=>t.createLinearRing(n.map(i)));return r.length>1?t.createPolygon(r[0],r.slice(1)):1===r.length?t.createPolygon(r[0]):t.createPolygon()},r=this.token_;if(this.match(1)){let s=r.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==s){let i=this.parseGeometryCollectionText_();return t.createGeometryCollection(i)}switch(s){case"POINT":{let i=this.parsePointText_();return i?t.createPoint(new m(...i)):t.createPoint()}case"LINESTRING":{let n=this.parseLineStringText_().map(i);return t.createLineString(n)}case"LINEARRING":{let n=this.parseLineStringText_().map(i);return t.createLinearRing(n)}case"POLYGON":{let i=this.parsePolygonText_();return i&&0!==i.length?n(i):t.createPolygon()}case"MULTIPOINT":{let n=this.parseMultiPointText_();if(!n||0===n.length)return t.createMultiPoint();let r=n.map(i).map(i=>t.createPoint(i));return t.createMultiPoint(r)}case"MULTILINESTRING":{let n=this.parseMultiLineStringText_().map(n=>t.createLineString(n.map(i)));return t.createMultiLineString(n)}case"MULTIPOLYGON":{let i=this.parseMultiPolygonText_();if(!i||0===i.length)return t.createMultiPolygon();let r=i.map(n);return t.createMultiPolygon(r)}default:throw Error("Invalid geometry type: "+s)}}throw Error(this.formatErrorMessage_())}}function tT(t){if(t.isEmpty())return"";let i=t.getCoordinate(),n=[i.x,i.y];return void 0===i.z||Number.isNaN(i.z)||n.push(i.z),void 0===i.m||Number.isNaN(i.m)||n.push(i.m),n.join(" ")}function tR(t){let i=t.getCoordinates().map(t=>{let i=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||i.push(t.z),void 0===t.m||Number.isNaN(t.m)||i.push(t.m),i}),n=[];for(let t=0,r=i.length;t<r;++t)n.push(i[t].join(" "));return n.join(", ")}function tO(t){let i=[];i.push("("+tR(t.getExteriorRing())+")");for(let n=0,r=t.getNumInteriorRing();n<r;++n)i.push("("+tR(t.getInteriorRingN(n))+")");return i.join(", ")}let tD={Point:tT,LineString:tR,LinearRing:tR,Polygon:tO,MultiPoint:function(t){let i=[];for(let n=0,r=t.getNumGeometries();n<r;++n)i.push("("+tT(t.getGeometryN(n))+")");return i.join(", ")},MultiLineString:function(t){let i=[];for(let n=0,r=t.getNumGeometries();n<r;++n)i.push("("+tR(t.getGeometryN(n))+")");return i.join(", ")},MultiPolygon:function(t){let i=[];for(let n=0,r=t.getNumGeometries();n<r;++n)i.push("("+tO(t.getGeometryN(n))+")");return i.join(", ")},GeometryCollection:function(t){let i=[];for(let n=0,r=t.getNumGeometries();n<r;++n)i.push(tP(t.getGeometryN(n)));return i.join(", ")}};function tP(t){let i=t.getGeometryType(),n=tD[i];i=i.toUpperCase();let r=function(t){let i="";if(t.isEmpty())return i;let n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(i+="Z"),void 0===n.m||Number.isNaN(n.m)||(i+="M"),i}(t);return(r.length>0&&(i+=" "+r),t.isEmpty())?i+" "+tL:i+" ("+n(t)+")"}class tk{constructor(t){this.geometryFactory=t||new tS,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){return new tM(new tF(t),this.geometryFactory).parse()}write(t){return tP(t)}}class tN{constructor(t){this.parser=new tk(t)}write(t){return this.parser.write(t)}static toLineString(t,i){if(2!=arguments.length)throw Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+i.x+" "+i.y+" )"}}class tU{constructor(){tU.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=[,,].fill().map(()=>[,,]),this._intPt=[,,].fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new m,this._intPt[1]=new m,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static nonRobustComputeEdgeDistance(t,i,n){let r=t.x-i.x,s=t.y-i.y,o=Math.sqrt(r*r+s*s);return c.isTrue(!(0===o&&!t.equals(i)),"Invalid distance calculation"),o}static computeEdgeDistance(t,i,n){let r=Math.abs(n.x-i.x),s=Math.abs(n.y-i.y),o=-1;if(t.equals(i))o=0;else if(t.equals(n))o=r>s?r:s;else{let n=Math.abs(t.x-i.x),a=Math.abs(t.y-i.y);0!==(o=r>s?n:a)||t.equals(i)||(o=Math.max(n,a))}return c.isTrue(!(0===o&&!t.equals(i)),"Bad distance calculation"),o}computeIntersection(t,i,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=i,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,i,n,r)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0==arguments.length)null===this._intLineIndex&&(this._intLineIndex=[,,].fill().map(()=>[,,]),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1==arguments.length){let t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isInteriorIntersection(){if(0==arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1==arguments.length){let t=arguments[0];for(let i=0;i<this._result;i++)if(!this._intPt[i].equals2D(this._inputLines[t][0])&&!this._intPt[i].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}getEdgeDistance(t,i){return tU.computeEdgeDistance(this._intPt[i],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===tU.COLLINEAR_INTERSECTION}toString(){return tN.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+tN.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,i){return this._inputLines[t][i]}getIndexAlongSegment(t,i){return this.computeIntLineIndex(),this._intLineIndex[t][i]}getTopologySummary(){let t=new tr;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==tU.NO_INTERSECTION}isIntersection(t){for(let i=0;i<this._result;i++)if(this._intPt[i].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,i){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][i]]}}tU.DONT_INTERSECT=0,tU.DO_INTERSECT=1,tU.COLLINEAR=2,tU.NO_INTERSECTION=0,tU.POINT_INTERSECTION=1,tU.COLLINEAR_INTERSECTION=2;class tQ extends tU{constructor(){super()}static nearestEndpoint(t,i,n,r){let s=t,o=V.pointToSegment(t,n,r),a=V.pointToSegment(i,n,r);return a<o&&(o=a,s=i),(a=V.pointToSegment(n,t,i))<o&&(o=a,s=n),(a=V.pointToSegment(r,t,i))<o&&(o=a,s=r),s}isInSegmentEnvelopes(t){let i=new M(this._inputLines[0][0],this._inputLines[0][1]),n=new M(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(t)&&n.contains(t)}computeIntersection(){if(3!=arguments.length)return super.computeIntersection.apply(this,arguments);{let t=arguments[0],i=arguments[1],n=arguments[2];if(this._isProper=!1,M.intersects(i,n,t)&&0===U.index(i,n,t)&&0===U.index(n,i,t))return this._isProper=!0,(t.equals(i)||t.equals(n))&&(this._isProper=!1),this._result=tU.POINT_INTERSECTION,null;this._result=tU.NO_INTERSECTION}}intersection(t,i,n,r){let s=this.intersectionSafe(t,i,n,r);return this.isInSegmentEnvelopes(s)||(s=new m(tQ.nearestEndpoint(t,i,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(s),s}checkDD(t,i,n,r,s){let o=k.intersection(t,i,n,r),a=this.isInSegmentEnvelopes(o);H.out.println("DD in env = "+a+"  --------------------- "+o),s.distance(o)>1e-4&&H.out.println("Distance = "+s.distance(o))}intersectionSafe(t,i,n,r){let s=Q.intersection(t,i,n,r);return null===s&&(s=tQ.nearestEndpoint(t,i,n,r)),s}computeCollinearIntersection(t,i,n,r){let s=M.intersects(t,i,n),o=M.intersects(t,i,r),a=M.intersects(n,r,t),l=M.intersects(n,r,i);return s&&o?(this._intPt[0]=n,this._intPt[1]=r,tU.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=t,this._intPt[1]=i,tU.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||l?tU.COLLINEAR_INTERSECTION:tU.POINT_INTERSECTION):s&&l?(this._intPt[0]=n,this._intPt[1]=i,!n.equals(i)||o||a?tU.COLLINEAR_INTERSECTION:tU.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||s||l?tU.COLLINEAR_INTERSECTION:tU.POINT_INTERSECTION):o&&l?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||s||a?tU.COLLINEAR_INTERSECTION:tU.POINT_INTERSECTION):tU.NO_INTERSECTION}computeIntersect(t,i,n,r){if(this._isProper=!1,!M.intersects(t,i,n,r))return tU.NO_INTERSECTION;let s=U.index(t,i,n),o=U.index(t,i,r);if(s>0&&o>0||s<0&&o<0)return tU.NO_INTERSECTION;let a=U.index(n,r,t),l=U.index(n,r,i);return a>0&&l>0||a<0&&l<0?tU.NO_INTERSECTION:0===s&&0===o&&0===a&&0===l?this.computeCollinearIntersection(t,i,n,r):(0===s||0===o||0===a||0===l?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:i.equals2D(n)||i.equals2D(r)?this._intPt[0]=i:0===s?this._intPt[0]=new m(n):0===o?this._intPt[0]=new m(r):0===a?this._intPt[0]=new m(t):0===l&&(this._intPt[0]=new m(i))):(this._isProper=!0,this._intPt[0]=this.intersection(t,i,n,r)),tU.POINT_INTERSECTION)}}class tH{constructor(){tH.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0==arguments.length)tH.constructor_.call(this,new m,new m);else if(1==arguments.length){let t=arguments[0];tH.constructor_.call(this,t.p0,t.p1)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.p0=t,this.p1=i}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];tH.constructor_.call(this,new m(t,i),new m(n,r))}}static midPoint(t,i){return new m((t.x+i.x)/2,(t.y+i.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof tH){let t=arguments[0],i=U.index(this.p0,this.p1,t.p0),n=U.index(this.p0,this.p1,t.p1);return i>=0&&n>=0||i<=0&&n<=0?Math.max(i,n):0}if(arguments[0]instanceof m){let t=arguments[0];return U.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return tH.midPoint(this.p0,this.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,i){let n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(s*s+o*o),l=0,A=0;if(0!==i){if(a<=0)throw new D("Cannot compute offset from zero-length line segment");l=i*s/a,A=i*o/a}return new m(n-A,r+l)}setCoordinates(){if(1==arguments.length){let t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=i.x,this.p1.y=i.y}}segmentFraction(t){let i=this.projectionFactor(t);return i<0?i=0:(i>1||o.isNaN(i))&&(i=1),i}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}distance(){if(arguments[0]instanceof tH){let t=arguments[0];return V.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof m){let t=arguments[0];return V.pointToSegment(t,this.p0,this.p1)}}equals(t){return t instanceof tH&&this.p0.equals(t.p0)&&this.p1.equals(t.p1)}intersection(t){let i=new tQ;return i.computeIntersection(this.p0,this.p1,t.p0,t.p1),i.hasIntersection()?i.getIntersection(0):null}project(){if(arguments[0]instanceof m){let t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new m(t);let i=this.projectionFactor(t),n=new m;return n.x=this.p0.x+i*(this.p1.x-this.p0.x),n.y=this.p0.y+i*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof tH){let t=arguments[0],i=this.projectionFactor(t.p0),n=this.projectionFactor(t.p1);if(i>=1&&n>=1||i<=0&&n<=0)return null;let r=this.project(t.p0);i<0&&(r=this.p0),i>1&&(r=this.p1);let s=this.project(t.p1);return n<0&&(s=this.p0),n>1&&(s=this.p1),new tH(r,s)}}normalize(){0>this.p1.compareTo(this.p0)&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return V.pointToLinePerpendicular(t,this.p0,this.p1)}closestPoint(t){let i=this.projectionFactor(t);return i>0&&i<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;let i=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=i*i+n*n;return r<=0?o.NaN:((t.x-this.p0.x)*i+(t.y-this.p0.y)*n)/r}closestPoints(t){let i=this.intersection(t);if(null!==i)return[i,i];let n=[,,].fill(null),r=o.MAX_VALUE,s=null,a=this.closestPoint(t.p0);r=a.distance(t.p0),n[0]=a,n[1]=t.p0;let l=this.closestPoint(t.p1);(s=l.distance(t.p1))<r&&(r=s,n[0]=l,n[1]=t.p1);let A=t.closestPoint(this.p0);(s=A.distance(this.p0))<r&&(r=s,n[0]=this.p0,n[1]=A);let h=t.closestPoint(this.p1);return(s=h.distance(this.p1))<r&&(r=s,n[0]=this.p1,n[1]=h),n}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){let i=this.p0.compareTo(t.p0);return 0!==i?i:this.p1.compareTo(t.p1)}reverse(){let t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return Q.intersection(this.p0,this.p1,t.p0,t.p1)}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){let i=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),s=i*i+n*n,o=i*i-n*n,a=t.getX(),l=t.getY();return new m((-o*a-2*i*n*l-2*i*r)/s,(o*l-2*i*n*a-2*n*r)/s)}pointAlong(t){let i=new m;return i.x=this.p0.x+t*(this.p1.x-this.p0.x),i.y=this.p0.y+t*(this.p1.y-this.p0.y),i}hashCode(){let t=o.doubleToLongBits(this.p0.x),i=Math.trunc(t^=31*o.doubleToLongBits(this.p0.y))^Math.trunc(t>>32),n=o.doubleToLongBits(this.p1.x);return Math.trunc(n^=31*o.doubleToLongBits(this.p1.y))^Math.trunc(n>>32)^i}get interfaces_(){return[a,l]}}class tG{static toLocationSymbol(t){switch(t){case tG.EXTERIOR:return"e";case tG.BOUNDARY:return"b";case tG.INTERIOR:return"i";case tG.NONE:return"-"}throw new r("Unknown location value: "+t)}}tG.INTERIOR=0,tG.BOUNDARY=1,tG.EXTERIOR=2,tG.NONE=-1;class tV{constructor(){tV.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0==arguments.length)this._matrix=[,,,].fill().map(()=>[,,,]),this.setAll(Y.FALSE);else if(1==arguments.length){if("string"==typeof arguments[0]){let t=arguments[0];tV.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof tV){let t=arguments[0];tV.constructor_.call(this),this._matrix[tG.INTERIOR][tG.INTERIOR]=t._matrix[tG.INTERIOR][tG.INTERIOR],this._matrix[tG.INTERIOR][tG.BOUNDARY]=t._matrix[tG.INTERIOR][tG.BOUNDARY],this._matrix[tG.INTERIOR][tG.EXTERIOR]=t._matrix[tG.INTERIOR][tG.EXTERIOR],this._matrix[tG.BOUNDARY][tG.INTERIOR]=t._matrix[tG.BOUNDARY][tG.INTERIOR],this._matrix[tG.BOUNDARY][tG.BOUNDARY]=t._matrix[tG.BOUNDARY][tG.BOUNDARY],this._matrix[tG.BOUNDARY][tG.EXTERIOR]=t._matrix[tG.BOUNDARY][tG.EXTERIOR],this._matrix[tG.EXTERIOR][tG.INTERIOR]=t._matrix[tG.EXTERIOR][tG.INTERIOR],this._matrix[tG.EXTERIOR][tG.BOUNDARY]=t._matrix[tG.EXTERIOR][tG.BOUNDARY],this._matrix[tG.EXTERIOR][tG.EXTERIOR]=t._matrix[tG.EXTERIOR][tG.EXTERIOR]}}}static isTrue(t){return t>=0||t===Y.TRUE}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){let t=arguments[0],i=arguments[1];return i===Y.SYM_DONTCARE||i===Y.SYM_TRUE&&(t>=0||t===Y.TRUE)||i===Y.SYM_FALSE&&t===Y.FALSE||i===Y.SYM_P&&t===Y.P||i===Y.SYM_L&&t===Y.L||i===Y.SYM_A&&t===Y.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){let t=arguments[1];return new tV(arguments[0]).matches(t)}}isIntersects(){return!this.isDisjoint()}set(){if(1==arguments.length){let t=arguments[0];for(let i=0;i<t.length;i++){let n=Math.trunc(i/3),r=i%3;this._matrix[n][r]=Y.toDimensionValue(t.charAt(i))}}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._matrix[t][i]=n}}isContains(){return tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])&&this._matrix[tG.EXTERIOR][tG.INTERIOR]===Y.FALSE&&this._matrix[tG.EXTERIOR][tG.BOUNDARY]===Y.FALSE}isWithin(){return tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])&&this._matrix[tG.INTERIOR][tG.EXTERIOR]===Y.FALSE&&this._matrix[tG.BOUNDARY][tG.EXTERIOR]===Y.FALSE}isTouches(t,i){return t>i?this.isTouches(i,t):(t===Y.A&&i===Y.A||t===Y.L&&i===Y.L||t===Y.L&&i===Y.A||t===Y.P&&i===Y.A||t===Y.P&&i===Y.L)&&this._matrix[tG.INTERIOR][tG.INTERIOR]===Y.FALSE&&(tV.isTrue(this._matrix[tG.INTERIOR][tG.BOUNDARY])||tV.isTrue(this._matrix[tG.BOUNDARY][tG.INTERIOR])||tV.isTrue(this._matrix[tG.BOUNDARY][tG.BOUNDARY]))}isOverlaps(t,i){return t===Y.P&&i===Y.P||t===Y.A&&i===Y.A?tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])&&tV.isTrue(this._matrix[tG.INTERIOR][tG.EXTERIOR])&&tV.isTrue(this._matrix[tG.EXTERIOR][tG.INTERIOR]):t===Y.L&&i===Y.L&&1===this._matrix[tG.INTERIOR][tG.INTERIOR]&&tV.isTrue(this._matrix[tG.INTERIOR][tG.EXTERIOR])&&tV.isTrue(this._matrix[tG.EXTERIOR][tG.INTERIOR])}isEquals(t,i){return t===i&&tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])&&this._matrix[tG.INTERIOR][tG.EXTERIOR]===Y.FALSE&&this._matrix[tG.BOUNDARY][tG.EXTERIOR]===Y.FALSE&&this._matrix[tG.EXTERIOR][tG.INTERIOR]===Y.FALSE&&this._matrix[tG.EXTERIOR][tG.BOUNDARY]===Y.FALSE}matches(t){if(9!==t.length)throw new r("Should be length 9: "+t);for(let i=0;i<3;i++)for(let n=0;n<3;n++)if(!tV.matches(this._matrix[i][n],t.charAt(3*i+n)))return!1;return!0}add(t){for(let i=0;i<3;i++)for(let n=0;n<3;n++)this.setAtLeast(i,n,t.get(i,n))}isDisjoint(){return this._matrix[tG.INTERIOR][tG.INTERIOR]===Y.FALSE&&this._matrix[tG.INTERIOR][tG.BOUNDARY]===Y.FALSE&&this._matrix[tG.BOUNDARY][tG.INTERIOR]===Y.FALSE&&this._matrix[tG.BOUNDARY][tG.BOUNDARY]===Y.FALSE}isCrosses(t,i){return t===Y.P&&i===Y.L||t===Y.P&&i===Y.A||t===Y.L&&i===Y.A?tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])&&tV.isTrue(this._matrix[tG.INTERIOR][tG.EXTERIOR]):t===Y.L&&i===Y.P||t===Y.A&&i===Y.P||t===Y.A&&i===Y.L?tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])&&tV.isTrue(this._matrix[tG.EXTERIOR][tG.INTERIOR]):t===Y.L&&i===Y.L&&0===this._matrix[tG.INTERIOR][tG.INTERIOR]}isCovers(){return(tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])||tV.isTrue(this._matrix[tG.INTERIOR][tG.BOUNDARY])||tV.isTrue(this._matrix[tG.BOUNDARY][tG.INTERIOR])||tV.isTrue(this._matrix[tG.BOUNDARY][tG.BOUNDARY]))&&this._matrix[tG.EXTERIOR][tG.INTERIOR]===Y.FALSE&&this._matrix[tG.EXTERIOR][tG.BOUNDARY]===Y.FALSE}isCoveredBy(){return(tV.isTrue(this._matrix[tG.INTERIOR][tG.INTERIOR])||tV.isTrue(this._matrix[tG.INTERIOR][tG.BOUNDARY])||tV.isTrue(this._matrix[tG.BOUNDARY][tG.INTERIOR])||tV.isTrue(this._matrix[tG.BOUNDARY][tG.BOUNDARY]))&&this._matrix[tG.INTERIOR][tG.EXTERIOR]===Y.FALSE&&this._matrix[tG.BOUNDARY][tG.EXTERIOR]===Y.FALSE}setAtLeast(){if(1==arguments.length){let t=arguments[0];for(let i=0;i<t.length;i++){let n=Math.trunc(i/3),r=i%3;this.setAtLeast(n,r,Y.toDimensionValue(t.charAt(i)))}}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._matrix[t][i]<n&&(this._matrix[t][i]=n)}}setAtLeastIfValid(t,i,n){t>=0&&i>=0&&this.setAtLeast(t,i,n)}toString(){let t=new tr("123456789");for(let i=0;i<3;i++)for(let n=0;n<3;n++)t.setCharAt(3*i+n,Y.toDimensionSymbol(this._matrix[i][n]));return t.toString()}setAll(t){for(let i=0;i<3;i++)for(let n=0;n<3;n++)this._matrix[i][n]=t}get(t,i){return this._matrix[t][i]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}get interfaces_(){return[u]}}class tz{static toDegrees(t){return 180*t/Math.PI}static isAcute(t,i,n){let r=t.x-i.x,s=t.y-i.y;return r*(n.x-i.x)+s*(n.y-i.y)>0}static isObtuse(t,i,n){let r=t.x-i.x,s=t.y-i.y;return r*(n.x-i.x)+s*(n.y-i.y)<0}static interiorAngle(t,i,n){let r=tz.angle(i,t);return Math.abs(tz.angle(i,n)-r)}static normalizePositive(t){if(t<0){for(;t<0;)t+=tz.PI_TIMES_2;t>=tz.PI_TIMES_2&&(t=0)}else{for(;t>=tz.PI_TIMES_2;)t-=tz.PI_TIMES_2;t<0&&(t=0)}return t}static angleBetween(t,i,n){let r=tz.angle(i,t),s=tz.angle(i,n);return tz.diff(r,s)}static diff(t,i){let n=null;return(n=t<i?i-t:t-i)>Math.PI&&(n=2*Math.PI-n),n}static toRadians(t){return t*Math.PI/180}static normalize(t){for(;t>Math.PI;)t-=tz.PI_TIMES_2;for(;t<=-Math.PI;)t+=tz.PI_TIMES_2;return t}static angle(){if(1==arguments.length){let t=arguments[0];return Math.atan2(t.y,t.x)}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=i.x-t.x;return Math.atan2(i.y-t.y,n)}}static getTurn(t,i){let n=Math.sin(i-t);return n>0?tz.COUNTERCLOCKWISE:n<0?tz.CLOCKWISE:tz.NONE}static angleBetweenOriented(t,i,n){let r=tz.angle(i,t),s=tz.angle(i,n)-r;return s<=-Math.PI?s+tz.PI_TIMES_2:s>Math.PI?s-tz.PI_TIMES_2:s}}tz.PI_TIMES_2=2*Math.PI,tz.PI_OVER_2=Math.PI/2,tz.PI_OVER_4=Math.PI/4,tz.COUNTERCLOCKWISE=U.COUNTERCLOCKWISE,tz.CLOCKWISE=U.CLOCKWISE,tz.NONE=U.COLLINEAR;class tK extends n{constructor(){super(),tK.constructor_.apply(this,arguments)}static constructor_(){n.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}class tj{constructor(){tj.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.w=null,0==arguments.length)this.x=0,this.y=0,this.w=1;else if(1==arguments.length){let t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2==arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1];this.x=t,this.y=i,this.w=1}else if(arguments[0]instanceof tj&&arguments[1]instanceof tj){let t=arguments[0],i=arguments[1];this.x=t.y*i.w-i.y*t.w,this.y=i.x*t.w-t.x*i.w,this.w=t.x*i.y-i.x*t.y}else if(arguments[0]instanceof m&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1];this.x=t.y-i.y,this.y=i.x-t.x,this.w=t.x*i.y-i.x*t.y}}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this.x=t,this.y=i,this.w=n}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=t.y-i.y,o=i.x-t.x,a=t.x*i.y-i.x*t.y,l=n.y-r.y,A=r.x-n.x,h=n.x*r.y-r.x*n.y;this.x=o*h-A*a,this.y=l*a-s*h,this.w=s*A-l*o}}getCoordinate(){let t=new m;return t.x=this.getX(),t.y=this.getY(),t}getX(){let t=this.x/this.w;if(o.isNaN(t)||o.isInfinite(t))throw new tK;return t}getY(){let t=this.y/this.w;if(o.isNaN(t)||o.isInfinite(t))throw new tK;return t}}class tW{constructor(){tW.constructor_.apply(this,arguments)}static constructor_(){this.p0=null,this.p1=null,this.p2=null;let t=arguments[0],i=arguments[1],n=arguments[2];this.p0=t,this.p1=i,this.p2=n}static isAcute(t,i,n){return!!tz.isAcute(t,i,n)&&!!tz.isAcute(i,n,t)&&!!tz.isAcute(n,t,i)}static circumcentre(t,i,n){let r=n.x,s=n.y,o=t.x-r,a=t.y-s,l=i.x-r,A=i.y-s,h=2*tW.det(o,a,l,A);return new m(r-tW.det(a,o*o+a*a,A,l*l+A*A)/h,s+tW.det(o,o*o+a*a,l,l*l+A*A)/h)}static perpendicularBisector(t,i){let n=i.x-t.x,r=i.y-t.y,s=new tj(t.x+n/2,t.y+r/2,1),o=new tj(t.x-r+n/2,t.y+n+r/2,1);return new tj(s,o)}static angleBisector(t,i,n){let r=i.distance(t),s=r/(r+i.distance(n)),o=n.x-t.x,a=n.y-t.y;return new m(t.x+s*o,t.y+s*a)}static inCentre(t,i,n){let r=i.distance(n),s=t.distance(n),o=t.distance(i),a=r+s+o;return new m((r*t.x+s*i.x+o*n.x)/a,(r*t.y+s*i.y+o*n.y)/a)}static area(t,i,n){return Math.abs(((n.x-t.x)*(i.y-t.y)-(i.x-t.x)*(n.y-t.y))/2)}static signedArea(t,i,n){return((n.x-t.x)*(i.y-t.y)-(i.x-t.x)*(n.y-t.y))/2}static det(t,i,n,r){return t*r-i*n}static interpolateZ(t,i,n,r){let s=i.x,o=i.y,a=n.x-s,l=r.x-s,A=n.y-o,h=r.y-o,c=a*h-l*A,u=t.x-s,d=t.y-o;return i.getZ()+(h*u-l*d)/c*(n.getZ()-i.getZ())+(-A*u+a*d)/c*(r.getZ()-i.getZ())}static longestSideLength(t,i,n){let r=t.distance(i),s=i.distance(n),o=n.distance(t),a=r;return s>a&&(a=s),o>a&&(a=o),a}static circumcentreDD(t,i,n){let r=P.valueOf(t.x).subtract(n.x),s=P.valueOf(t.y).subtract(n.y),o=P.valueOf(i.x).subtract(n.x),a=P.valueOf(i.y).subtract(n.y),l=P.determinant(r,s,o,a).multiply(2),A=r.sqr().add(s.sqr()),h=o.sqr().add(a.sqr()),c=P.determinant(s,A,a,h),u=P.determinant(r,A,o,h);return new m(P.valueOf(n.x).subtract(c.divide(l)).doubleValue(),P.valueOf(n.y).add(u.divide(l)).doubleValue())}static area3D(t,i,n){let r=i.x-t.x,s=i.y-t.y,o=i.getZ()-t.getZ(),a=n.x-t.x,l=n.y-t.y,A=n.getZ()-t.getZ(),h=s*A-o*l,c=o*a-r*A,u=r*l-s*a;return Math.sqrt(h*h+c*c+u*u)/2}static centroid(t,i,n){return new m((t.x+i.x+n.x)/3,(t.y+i.y+n.y)/3)}interpolateZ(t){if(null===t)throw new r("Supplied point is null.");return tW.interpolateZ(t,this.p0,this.p1,this.p2)}longestSideLength(){return tW.longestSideLength(this.p0,this.p1,this.p2)}isAcute(){return tW.isAcute(this.p0,this.p1,this.p2)}circumcentre(){return tW.circumcentre(this.p0,this.p1,this.p2)}inCentre(){return tW.inCentre(this.p0,this.p1,this.p2)}area(){return tW.area(this.p0,this.p1,this.p2)}signedArea(){return tW.signedArea(this.p0,this.p1,this.p2)}area3D(){return tW.area3D(this.p0,this.p1,this.p2)}centroid(){return tW.centroid(this.p0,this.p1,this.p2)}}class t$ extends n{constructor(){super(),t$.constructor_.apply(this,arguments)}static constructor_(){if(0==arguments.length)n.constructor_.call(this);else if(1==arguments.length){let t=arguments[0];n.constructor_.call(this,t)}}}class tY{constructor(){tY.constructor_.apply(this,arguments)}static constructor_(){if(this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null,0==arguments.length)this.setToIdentity();else if(1==arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];this._m00=t[0],this._m01=t[1],this._m02=t[2],this._m10=t[3],this._m11=t[4],this._m12=t[5]}else if(arguments[0]instanceof tY){let t=arguments[0];this.setTransformation(t)}}else if(6==arguments.length&&"number"==typeof arguments[5]&&"number"==typeof arguments[4]&&"number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];this.setTransformation(t,i,n,r,s,o)}}static translationInstance(t,i){let n=new tY;return n.setToTranslation(t,i),n}static shearInstance(t,i){let n=new tY;return n.setToShear(t,i),n}static reflectionInstance(){if(2==arguments.length){let t=arguments[0],i=arguments[1],n=new tY;return n.setToReflection(t,i),n}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=new tY;return s.setToReflection(t,i,n,r),s}}static rotationInstance(){if(1==arguments.length){let t=arguments[0];return tY.rotationInstance(Math.sin(t),Math.cos(t))}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=new tY;return n.setToRotation(t,i),n}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return tY.rotationInstance(Math.sin(t),Math.cos(t),i,n)}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=new tY;return s.setToRotation(t,i,n,r),s}}static scaleInstance(){if(2==arguments.length){let t=arguments[0],i=arguments[1],n=new tY;return n.setToScale(t,i),n}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=new tY;return s.translate(-n,-r),s.scale(t,i),s.translate(n,r),s}}setToReflectionBasic(t,i,n,s){if(t===n&&i===s)throw new r("Reflection line points must be distinct");let o=n-t,a=s-i,l=Math.sqrt(o*o+a*a),A=a/l,h=o/l,c=2*A*h,u=h*h-A*A;return this._m00=u,this._m01=c,this._m02=0,this._m10=c,this._m11=-u,this._m12=0,this}setToRotation(){if(1==arguments.length){let t=arguments[0];return this.setToRotation(Math.sin(t),Math.cos(t)),this}if(2==arguments.length){let t=arguments[0],i=arguments[1];return this._m00=i,this._m01=-t,this._m02=0,this._m10=t,this._m11=i,this._m12=0,this}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return this.setToRotation(Math.sin(t),Math.cos(t),i,n),this}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];return this._m00=i,this._m01=-t,this._m02=n-n*i+r*t,this._m10=t,this._m11=i,this._m12=r-n*t-r*i,this}}getMatrixEntries(){return[this._m00,this._m01,this._m02,this._m10,this._m11,this._m12]}filter(t,i){this.transform(t,i)}composeBefore(t){let i=this._m00*t._m00+this._m01*t._m10,n=this._m00*t._m01+this._m01*t._m11,r=this._m00*t._m02+this._m01*t._m12+this._m02,s=this._m10*t._m00+this._m11*t._m10,o=this._m10*t._m01+this._m11*t._m11,a=this._m10*t._m02+this._m11*t._m12+this._m12;return this._m00=i,this._m01=n,this._m02=r,this._m10=s,this._m11=o,this._m12=a,this}clone(){return null}translate(t,i){return this.compose(tY.translationInstance(t,i)),this}setToReflection(){if(2==arguments.length){let t=arguments[0],i=arguments[1];if(0===t&&0===i)throw new r("Reflection vector must be non-zero");if(t===i)return this._m00=0,this._m01=1,this._m02=0,this._m10=1,this._m11=0,this._m12=0,this;let n=Math.sqrt(t*t+i*i),s=i/n,o=t/n;return this.rotate(-s,o),this.scale(1,-1),this.rotate(s,o),this}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];if(t===n&&i===s)throw new r("Reflection line points must be distinct");this.setToTranslation(-t,-i);let o=n-t,a=s-i,l=Math.sqrt(o*o+a*a),A=a/l,h=o/l;return this.rotate(-A,h),this.scale(1,-1),this.rotate(A,h),this.translate(t,i),this}}shear(t,i){return this.compose(tY.shearInstance(t,i)),this}getInverse(){let t=this.getDeterminant();if(0===t)throw new t$("Transformation is non-invertible");let i=this._m11/t,n=-this._m10/t,r=-this._m01/t,s=this._m00/t;return new tY(i,r,(this._m01*this._m12-this._m02*this._m11)/t,n,s,(-this._m00*this._m12+this._m10*this._m02)/t)}compose(t){let i=t._m00*this._m00+t._m01*this._m10,n=t._m00*this._m01+t._m01*this._m11,r=t._m00*this._m02+t._m01*this._m12+t._m02,s=t._m10*this._m00+t._m11*this._m10,o=t._m10*this._m01+t._m11*this._m11,a=t._m10*this._m02+t._m11*this._m12+t._m12;return this._m00=i,this._m01=n,this._m02=r,this._m10=s,this._m11=o,this._m12=a,this}equals(t){return null!==t&&t instanceof tY&&this._m00===t._m00&&this._m01===t._m01&&this._m02===t._m02&&this._m10===t._m10&&this._m11===t._m11&&this._m12===t._m12}setToScale(t,i){return this._m00=t,this._m01=0,this._m02=0,this._m10=0,this._m11=i,this._m12=0,this}isIdentity(){return 1===this._m00&&0===this._m01&&0===this._m02&&0===this._m10&&1===this._m11&&0===this._m12}scale(t,i){return this.compose(tY.scaleInstance(t,i)),this}setToIdentity(){return this._m00=1,this._m01=0,this._m02=0,this._m10=0,this._m11=1,this._m12=0,this}isGeometryChanged(){return!0}setTransformation(){if(1==arguments.length){let t=arguments[0];return this._m00=t._m00,this._m01=t._m01,this._m02=t._m02,this._m10=t._m10,this._m11=t._m11,this._m12=t._m12,this}if(6==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];return this._m00=t,this._m01=i,this._m02=n,this._m10=r,this._m11=s,this._m12=o,this}}rotate(){if(1==arguments.length){let t=arguments[0];return this.compose(tY.rotationInstance(t)),this}if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.compose(tY.rotationInstance(t,i)),this}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return this.compose(tY.rotationInstance(t,i,n)),this}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];return this.compose(tY.rotationInstance(t,i,n,r)),this}}getDeterminant(){return this._m00*this._m11-this._m01*this._m10}setToShear(t,i){return this._m00=1,this._m01=t,this._m02=0,this._m10=i,this._m11=1,this._m12=0,this}isDone(){return!1}toString(){return"AffineTransformation[["+this._m00+", "+this._m01+", "+this._m02+"], ["+this._m10+", "+this._m11+", "+this._m12+"]]"}setToTranslation(t,i){return this._m00=1,this._m01=0,this._m02=t,this._m10=0,this._m11=1,this._m12=i,this}transform(){if(1==arguments.length){let t=arguments[0].copy();return t.apply(this),t}if(2==arguments.length){if(arguments[0]instanceof m&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=this._m00*t.x+this._m01*t.y+this._m02,r=this._m10*t.x+this._m11*t.y+this._m12;return i.x=n,i.y=r,i}if(b(arguments[0],N)&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1],n=this._m00*t.getOrdinate(i,0)+this._m01*t.getOrdinate(i,1)+this._m02,r=this._m10*t.getOrdinate(i,0)+this._m11*t.getOrdinate(i,1)+this._m12;t.setOrdinate(i,0,n),t.setOrdinate(i,1,r)}}}reflect(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.compose(tY.reflectionInstance(t,i)),this}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];return this.compose(tY.reflectionInstance(t,i,n,r)),this}}get interfaces_(){return[u,F]}}class tq{static solve(t,i){let n=i.length;if(t.length!==n||t[0].length!==n)throw new r("Matrix A is incorrectly sized");for(let r=0;r<n;r++){let s=r;for(let i=r+1;i<n;i++)Math.abs(t[i][r])>Math.abs(t[s][r])&&(s=i);if(0===t[s][r])return null;tq.swapRows(t,r,s),tq.swapRows(i,r,s);for(let s=r+1;s<n;s++){let o=t[s][r]/t[r][r];for(let i=n-1;i>=r;i--)t[s][i]-=t[r][i]*o;i[s]-=i[r]*o}}let s=Array(n).fill(null);for(let r=n-1;r>=0;r--){let o=0;for(let i=r+1;i<n;i++)o+=t[r][i]*s[i];s[r]=(i[r]-o)/t[r][r]}return s}static swapRows(){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1],n=arguments[2];if(i===n)return null;for(let r=0;r<t[0].length;r++){let s=t[i][r];t[i][r]=t[n][r],t[n][r]=s}}else if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){let t=arguments[0],i=arguments[1],n=arguments[2];if(i===n)return null;let r=t[i];t[i]=t[n],t[n]=r}}}class tX{constructor(){tX.constructor_.apply(this,arguments)}static constructor_(){this._src0=null,this._src1=null,this._src2=null,this._dest0=null,this._dest1=null,this._dest2=null,this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null;let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];this._src0=t,this._src1=i,this._src2=n,this._dest0=r,this._dest1=s,this._dest2=o}compute(){let t=[this._dest0.x,this._dest1.x,this._dest2.x],i=this.solve(t);if(null===i)return!1;this._m00=i[0],this._m01=i[1],this._m02=i[2];let n=[this._dest0.y,this._dest1.y,this._dest2.y],r=this.solve(n);return null!==r&&(this._m10=r[0],this._m11=r[1],this._m12=r[2],!0)}getTransformation(){return this.compute()?new tY(this._m00,this._m01,this._m02,this._m10,this._m11,this._m12):null}solve(t){let i=[[this._src0.x,this._src0.y,1],[this._src1.x,this._src1.y,1],[this._src2.x,this._src2.y,1]];return tq.solve(i,t)}}class tZ{static createFromBaseLines(t,i,n,r){let s=new m(t.x+r.x-n.x,t.y+r.y-n.y),o=tz.angleBetweenOriented(i,t,s),a=i.distance(t),l=r.distance(n);if(0===a)return new tY;let A=l/a,h=tY.translationInstance(-t.x,-t.y);return h.rotate(o),h.scale(A,A),h.translate(n.x,n.y),h}static createFromControlVectors(){if(2==arguments.length){if(arguments[0]instanceof m&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=i.x-t.x,r=i.y-t.y;return tY.translationInstance(n,r)}if(arguments[0]instanceof Array&&arguments[1]instanceof Array){let t=arguments[0],i=arguments[1];if(t.length!==i.length)throw new r("Src and Dest arrays are not the same length");if(t.length<=0)throw new r("Too few control points");if(t.length>3)throw new r("Too many control points");return 1===t.length?tZ.createFromControlVectors(t[0],i[0]):2===t.length?tZ.createFromControlVectors(t[0],t[1],i[0],i[1]):tZ.createFromControlVectors(t[0],t[1],t[2],i[0],i[1],i[2])}}else{if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=new m(r.x-n.x,r.y-n.y),o=tz.angleBetweenOriented(i,t,s),a=i.distance(t),l=r.distance(n);if(0===a)return null;let A=l/a,h=tY.translationInstance(-t.x,-t.y);return h.rotate(o),h.scale(A,A),h.translate(n.x,n.y),h}if(6==arguments.length)return new tX(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]).getTransformation()}}}class tJ{constructor(){tJ.constructor_.apply(this,arguments)}static constructor_(){this._coords=null;let t=arguments[0];this._coords=t}static getCoordinates(t){let i=new S;return t.apply(new tJ(i)),i}filter(t){(t instanceof te||t instanceof tC)&&this._coords.add(t.getCoordinate())}get interfaces_(){return[K]}}class t0{constructor(){t0.constructor_.apply(this,arguments)}static constructor_(){this._mapOp=null;let t=arguments[0];this._mapOp=t}static map(t,i){return new t0(i).map(t)}map(t){let i=new S;for(let n=0;n<t.getNumGeometries();n++){let r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||i.add(r)}return t.getFactory().createGeometryCollection(tS.toGeometryArray(i))}}class t1{constructor(){t1.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;let t=arguments[0];this._geomFactory=t1.extractFactory(t),this._inputGeoms=t}static extractFactory(t){return t.isEmpty()?null:t.iterator().next().getFactory()}static createList(){if(2==arguments.length){let t=arguments[0],i=arguments[1],n=new S;return n.add(t),n.add(i),n}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=new S;return r.add(t),r.add(i),r.add(n),r}}static combine(){if(1==arguments.length)return new t1(arguments[0]).combine();if(2==arguments.length){let t=arguments[0],i=arguments[1];return new t1(t1.createList(t,i)).combine()}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return new t1(t1.createList(t,i,n)).combine()}}extractElements(t,i){if(null===t)return null;for(let n=0;n<t.getNumGeometries();n++){let r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||i.add(r)}}combine(){let t=new S;for(let i=this._inputGeoms.iterator();i.hasNext();){let n=i.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(t)}}class t2{constructor(){t2.constructor_.apply(this,arguments)}static constructor_(){if(this._factory=null,this._isUserDataCopied=!1,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this._factory=t}}setCopyUserData(t){this._isUserDataCopied=t}edit(t,i){if(null===t)return null;let n=this.editInternal(t,i);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n}editInternal(t,i){return null===this._factory&&(this._factory=t.getFactory()),t instanceof tu?this.editGeometryCollection(t,i):t instanceof tE?this.editPolygon(t,i):t instanceof tC||t instanceof te?i.edit(t,this._factory):(c.shouldNeverReachHere("Unsupported Geometry type: "+t.getGeometryType()),null)}editGeometryCollection(t,i){let n=i.edit(t,this._factory),r=new S;for(let t=0;t<n.getNumGeometries();t++){let s=this.edit(n.getGeometryN(t),i);null===s||s.isEmpty()||r.add(s)}return n.getGeometryType()===q.TYPENAME_MULTIPOINT?this._factory.createMultiPoint(r.toArray([])):n.getGeometryType()===q.TYPENAME_MULTILINESTRING?this._factory.createMultiLineString(r.toArray([])):n.getGeometryType()===q.TYPENAME_MULTIPOLYGON?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))}editPolygon(t,i){let n=i.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon()),n.isEmpty())return n;let r=this.edit(n.getExteriorRing(),i);if(null===r||r.isEmpty())return this._factory.createPolygon();let s=new S;for(let t=0;t<n.getNumInteriorRing();t++){let r=this.edit(n.getInteriorRingN(t),i);null===r||r.isEmpty()||s.add(r)}return this._factory.createPolygon(r,s.toArray([]))}}function t5(){}t2.GeometryEditorOperation=t5,t2.NoOpGeometryOperation=class{edit(t,i){return t}get interfaces_(){return[t5]}},t2.CoordinateOperation=class{edit(t,i){let n=this.edit(t.getCoordinates(),t);return t instanceof ti?null===n?i.createLinearRing():i.createLinearRing(n):t instanceof te?null===n?i.createLineString():i.createLineString(n):t instanceof tC?null===n||0===n.length?i.createPoint():i.createPoint(n[0]):t}get interfaces_(){return[t5]}},t2.CoordinateSequenceOperation=class{edit(t,i){return t instanceof ti?i.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof te?i.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof tC?i.createPoint(this.edit(t.getCoordinateSequence(),t)):t}get interfaces_(){return[t5]}};class t4{constructor(){t4.constructor_.apply(this,arguments)}static constructor_(){this._geometryType=null,this._comps=null;let t=arguments[0],i=arguments[1];this._geometryType=t,this._comps=i}static extract(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return t4.extract(t,i,new S)}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return t.getGeometryType()===i?n.add(t):t instanceof tu&&t.apply(new t4(i,n)),n}}static isOfType(t,i){return t.getGeometryType()===i||i===q.TYPENAME_LINESTRING&&t.getGeometryType()===q.TYPENAME_LINEARRING}filter(t){(null===this._geometryType||t4.isOfType(t,this._geometryType))&&this._comps.add(t)}get interfaces_(){return[tt]}}class t3{static map(){if(arguments[0]instanceof q&&b(arguments[1],t6)){let t=arguments[0],i=arguments[1],n=new S;for(let r=0;r<t.getNumGeometries();r++){let s=i.map(t.getGeometryN(r));null!==s&&n.add(s)}return t.getFactory().buildGeometry(n)}if(b(arguments[0],C)&&b(arguments[1],t6)){let t=arguments[0],i=arguments[1],n=new S;for(let r=t.iterator();r.hasNext();){let t=r.next(),s=i.map(t);null!==s&&n.add(s)}return n}}}function t6(){}t3.MapOp=t6;class t8{constructor(){t8.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}transformPoint(t,i){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}transformPolygon(t,i){let n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ti&&!r.isEmpty()||(n=!1);let s=new S;for(let i=0;i<t.getNumInteriorRing();i++){let r=this.transformLinearRing(t.getInteriorRingN(i),t);null===r||r.isEmpty()||(r instanceof ti||(n=!1),s.add(r))}if(n)return this._factory.createPolygon(r,s.toArray([]));{let t=new S;return null!==r&&t.add(r),t.addAll(s),this._factory.buildGeometry(t)}}createCoordinateSequence(t){return this._factory.getCoordinateSequenceFactory().create(t)}getInputGeometry(){return this._inputGeom}transformMultiLineString(t,i){let n=new S;for(let i=0;i<t.getNumGeometries();i++){let r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}transformCoordinates(t,i){return this.copy(t)}transformLineString(t,i){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}transformMultiPoint(t,i){let n=new S;for(let i=0;i<t.getNumGeometries();i++){let r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}transformMultiPolygon(t,i){let n=new S;for(let i=0;i<t.getNumGeometries();i++){let r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)}copy(t){return t.copy()}transformLinearRing(t,i){let n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);let r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)}transformGeometryCollection(t,i){let n=new S;for(let i=0;i<t.getNumGeometries();i++){let r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(tS.toGeometryArray(n)):this._factory.buildGeometry(n)}transform(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof tC)return this.transformPoint(t,null);if(t instanceof tB)return this.transformMultiPoint(t,null);if(t instanceof ti)return this.transformLinearRing(t,null);if(t instanceof te)return this.transformLineString(t,null);if(t instanceof tv)return this.transformMultiLineString(t,null);if(t instanceof tE)return this.transformPolygon(t,null);if(t instanceof tg)return this.transformMultiPolygon(t,null);if(t instanceof tu)return this.transformGeometryCollection(t,null);throw new r("Unknown Geometry subtype: "+t.getGeometryType())}}class t7{constructor(){t7.constructor_.apply(this,arguments)}static constructor_(){this._comps=null;let t=arguments[0];this._comps=t}static getLines(){if(1==arguments.length){let t=arguments[0];return t7.getLines(t,new S)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return t instanceof te?i.add(t):t instanceof tu&&t.apply(new t7(i)),i}}static getGeometry(t){return t.getFactory().buildGeometry(t7.getLines(t))}filter(t){t instanceof te&&this._comps.add(t)}get interfaces_(){return[tt]}}class t9{constructor(){t9.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1==arguments.length){let t=arguments[0];this._lines=t}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._lines=t,this._isForcedToLineString=i}}static getLines(){if(1==arguments.length){let t=arguments[0];return t9.getLines(t,!1)}if(2==arguments.length){if(b(arguments[0],C)&&b(arguments[1],C)){let t=arguments[1];for(let i=arguments[0].iterator();i.hasNext();){let n=i.next();t9.getLines(n,t)}return t}if(arguments[0]instanceof q&&"boolean"==typeof arguments[1]){let t=arguments[0],i=arguments[1],n=new S;return t.apply(new t9(n,i)),n}if(arguments[0]instanceof q&&b(arguments[1],C)){let t=arguments[0],i=arguments[1];return t instanceof te?i.add(t):t.apply(new t9(i)),i}}else if(3==arguments.length){if("boolean"==typeof arguments[2]&&b(arguments[0],C)&&b(arguments[1],C)){let t=arguments[1],i=arguments[2];for(let n=arguments[0].iterator();n.hasNext();){let r=n.next();t9.getLines(r,t,i)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof q&&b(arguments[1],C)){let t=arguments[1],i=arguments[2];return arguments[0].apply(new t9(t,i)),t}}}static getGeometry(){if(1==arguments.length){let t=arguments[0];return t.getFactory().buildGeometry(t9.getLines(t))}if(2==arguments.length){let t=arguments[0],i=arguments[1];return t.getFactory().buildGeometry(t9.getLines(t,i))}}filter(t){if(this._isForcedToLineString&&t instanceof ti){let i=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(i),null}t instanceof te&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[K]}}let et={reverseOrder:function(){return{compare:(t,i)=>i.compareTo(t)}},min:function(t){return et.sort(t),t.get(0)},sort:function(t,i){let n=t.toArray();i?tc.sort(n,i):tc.sort(n);let r=t.iterator();for(let t=0,i=n.length;t<i;t++)r.next(),r.set(n[t])},singletonList:function(t){let i=new S;return i.add(t),i}};class ee{constructor(){ee.constructor_.apply(this,arguments)}static constructor_(){this._pts=null;let t=arguments[0];this._pts=t}static getPoints(){if(1==arguments.length){let t=arguments[0];return t instanceof tC?et.singletonList(t):ee.getPoints(t,new S)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return t instanceof tC?i.add(t):t instanceof tu&&t.apply(new ee(i)),i}}filter(t){t instanceof tC&&this._pts.add(t)}get interfaces_(){return[tt]}}class ei{constructor(){ei.constructor_.apply(this,arguments)}static constructor_(){this._comps=null;let t=arguments[0];this._comps=t}static getPolygons(){if(1==arguments.length){let t=arguments[0];return ei.getPolygons(t,new S)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return t instanceof tE?i.add(t):t instanceof tu&&t.apply(new ei(i)),i}}filter(t){t instanceof tE&&this._comps.add(t)}get interfaces_(){return[tt]}}class en{constructor(){en.constructor_.apply(this,arguments)}static constructor_(){this._isDone=!1}applyTo(t){for(let i=0;i<t.getNumGeometries()&&!this._isDone;i++){let n=t.getGeometryN(i);if(n instanceof tu)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}}}class er{constructor(){er.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFact=null,this._precModel=null,this._dim=new es,this._nPts=100,this._rotationAngle=0,0==arguments.length)er.constructor_.call(this,new tS);else if(1==arguments.length){let t=arguments[0];this._geomFact=t,this._precModel=t.getPrecisionModel()}}setBase(t){this._dim.setBase(t)}setRotation(t){this._rotationAngle=t}setWidth(t){this._dim.setWidth(t)}createEllipse(){let t=this._dim.getEnvelope(),i=t.getWidth()/2,n=t.getHeight()/2,r=t.getMinX()+i,s=t.getMinY()+n,o=Array(this._nPts+1).fill(null),a=0;for(let t=0;t<this._nPts;t++){let l=t*(2*Math.PI/this._nPts),A=i*Math.cos(l)+r,h=n*Math.sin(l)+s;o[a++]=this.coord(A,h)}o[a]=new m(o[0]);let l=this._geomFact.createLinearRing(o),A=this._geomFact.createPolygon(l);return this.rotate(A)}createArc(t,i){let n=this._dim.getEnvelope(),r=n.getWidth()/2,s=n.getHeight()/2,o=n.getMinX()+r,a=n.getMinY()+s,l=i;(l<=0||l>2*Math.PI)&&(l=2*Math.PI);let A=l/(this._nPts-1),h=Array(this._nPts).fill(null),c=0;for(let i=0;i<this._nPts;i++){let n=t+i*A,l=r*Math.cos(n)+o,u=s*Math.sin(n)+a;h[c++]=this.coord(l,u)}let u=this._geomFact.createLineString(h);return this.rotate(u)}rotate(t){if(0!==this._rotationAngle){let i=tY.rotationInstance(this._rotationAngle,this._dim.getCentre().x,this._dim.getCentre().y);t.apply(i)}return t}coord(t,i){let n=new m(t,i);return this._precModel.makePrecise(n),n}createArcPolygon(t,i){let n=this._dim.getEnvelope(),r=n.getWidth()/2,s=n.getHeight()/2,o=n.getMinX()+r,a=n.getMinY()+s,l=i;(l<=0||l>2*Math.PI)&&(l=2*Math.PI);let A=l/(this._nPts-1),h=Array(this._nPts+2).fill(null),c=0;h[c++]=this.coord(o,a);for(let i=0;i<this._nPts;i++){let n=t+A*i,l=r*Math.cos(n)+o,u=s*Math.sin(n)+a;h[c++]=this.coord(l,u)}h[c++]=this.coord(o,a);let u=this._geomFact.createLinearRing(h),d=this._geomFact.createPolygon(u);return this.rotate(d)}createRectangle(){let t=null,i=0,n=Math.trunc(this._nPts/4);n<1&&(n=1);let r=this._dim.getEnvelope().getWidth()/n,s=this._dim.getEnvelope().getHeight()/n,o=Array(4*n+1).fill(null),a=this._dim.getEnvelope();for(t=0;t<n;t++){let n=a.getMinX()+t*r,s=a.getMinY();o[i++]=this.coord(n,s)}for(t=0;t<n;t++){let n=a.getMaxX(),r=a.getMinY()+t*s;o[i++]=this.coord(n,r)}for(t=0;t<n;t++){let n=a.getMaxX()-t*r,s=a.getMaxY();o[i++]=this.coord(n,s)}for(t=0;t<n;t++){let n=a.getMinX(),r=a.getMaxY()-t*s;o[i++]=this.coord(n,r)}o[i++]=new m(o[0]);let l=this._geomFact.createLinearRing(o),A=this._geomFact.createPolygon(l);return this.rotate(A)}createCircle(){return this.createEllipse()}setHeight(t){this._dim.setHeight(t)}setSize(t){this._dim.setSize(t)}createSupercircle(t){let i=1/t,n=this._dim.getMinSize()/2,r=this._dim.getCentre(),s=Math.pow(n,t),o=Math.pow(s/2,i),a=Math.trunc(this._nPts/8),l=Array(8*a+1).fill(null),A=o/a;for(let o=0;o<=a;o++){let h=0,c=n;0!==o&&(c=Math.pow(s-Math.pow(h=A*o,t),i)),l[o]=this.coordTrans(h,c,r),l[2*a-o]=this.coordTrans(c,h,r),l[2*a+o]=this.coordTrans(c,-h,r),l[4*a-o]=this.coordTrans(h,-c,r),l[4*a+o]=this.coordTrans(-h,-c,r),l[6*a-o]=this.coordTrans(-c,-h,r),l[6*a+o]=this.coordTrans(-c,h,r),l[8*a-o]=this.coordTrans(-h,c,r)}l[l.length-1]=new m(l[0]);let h=this._geomFact.createLinearRing(l),c=this._geomFact.createPolygon(h);return this.rotate(c)}setNumPoints(t){this._nPts=t}coordTrans(t,i,n){return this.coord(t+n.x,i+n.y)}createSquircle(){return this.createSupercircle(4)}setEnvelope(t){this._dim.setEnvelope(t)}setCentre(t){this._dim.setCentre(t)}}class es{constructor(){es.constructor_.apply(this,arguments)}static constructor_(){this.base=null,this.centre=null,this.width=null,this.height=null}setBase(t){this.base=t}setWidth(t){this.width=t}getBase(){return this.base}getWidth(){return this.width}getEnvelope(){return null!==this.base?new M(this.base.x,this.base.x+this.width,this.base.y,this.base.y+this.height):null!==this.centre?new M(this.centre.x-this.width/2,this.centre.x+this.width/2,this.centre.y-this.height/2,this.centre.y+this.height/2):new M(0,this.width,0,this.height)}getCentre(){return null===this.centre&&(this.centre=new m(this.base.x+this.width/2,this.base.y+this.height/2)),this.centre}getHeight(){return this.height}setHeight(t){this.height=t}setSize(t){this.height=t,this.width=t}setEnvelope(t){this.width=t.getWidth(),this.height=t.getHeight(),this.base=new m(t.getMinX(),t.getMinY()),this.centre=new m(t.centre())}setCentre(t){this.centre=t}getMinSize(){return Math.min(this.width,this.height)}}er.Dimensions=es;class eo extends er{constructor(){super(),eo.constructor_.apply(this,arguments)}static constructor_(){if(this._numArms=8,this._armLengthRatio=.5,0==arguments.length)er.constructor_.call(this);else if(1==arguments.length){let t=arguments[0];er.constructor_.call(this,t)}}static create(t,i,n,r,s){let o=new eo;return o.setCentre(t),o.setSize(i),o.setNumPoints(n),o.setArmLengthRatio(s),o.setNumArms(r),o.createSineStar()}setArmLengthRatio(t){this._armLengthRatio=t}createSineStar(){let t=this._dim.getEnvelope(),i=t.getWidth()/2,n=this._armLengthRatio;n<0&&(n=0),n>1&&(n=1);let r=n*i,s=(1-n)*i,o=t.getMinX()+i,a=t.getMinY()+i,l=Array(this._nPts+1).fill(null),A=0;for(let t=0;t<this._nPts;t++){let i=t/this._nPts*this._numArms,n=s+(Math.cos(2*Math.PI*(i-Math.floor(i)))+1)/2*r,h=t*(2*Math.PI/this._nPts),c=n*Math.cos(h)+o,u=n*Math.sin(h)+a;l[A++]=this.coord(c,u)}l[A]=new m(l[0]);let h=this._geomFact.createLinearRing(l);return this._geomFact.createPolygon(h)}setNumArms(t){this._numArms=t}}var ea,el,eA,eh=Object.freeze({__proto__:null,Coordinate:m,CoordinateList:L,CoordinateSequenceFilter:F,CoordinateXY:y,CoordinateXYM:w,CoordinateXYZM:v,Dimension:Y,Envelope:M,Geometry:q,GeometryCollection:tu,GeometryFactory:tS,IntersectionMatrix:tV,LineSegment:tH,LineString:te,LinearRing:ti,Location:tG,MultiLineString:tv,MultiPoint:tB,MultiPolygon:tg,Point:tC,Polygon:tE,PrecisionModel:ty,Triangle:tW,util:Object.freeze({__proto__:null,AffineTransformation:tY,AffineTransformationBuilder:tX,AffineTransformationFactory:tZ,ComponentCoordinateExtracter:tJ,GeometryCollectionMapper:t0,GeometryCombiner:t1,GeometryEditor:t2,GeometryExtracter:t4,GeometryMapper:t3,GeometryTransformer:t8,LineStringExtracter:t7,LinearComponentExtracter:t9,PointExtracter:ee,PolygonExtracter:ei,ShortCircuitedGeometryVisitor:en,SineStarFactory:eo})});class ec{constructor(){ec.constructor_.apply(this,arguments)}static constructor_(){this._pt=[new m,new m],this._distance=o.NaN,this._isNull=!0}getCoordinates(){return this._pt}getCoordinate(t){return this._pt[t]}setMinimum(){if(1==arguments.length){let t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2==arguments.length){let t=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(t,i),null;let n=t.distance(i);n<this._distance&&this.initialize(t,i,n)}}initialize(){if(0==arguments.length)this._isNull=!0;else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(i),this._distance=t.distance(i),this._isNull=!1}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(i),this._distance=n,this._isNull=!1}}toString(){return tN.toLineString(this._pt[0],this._pt[1])}getDistance(){return this._distance}setMaximum(){if(1==arguments.length){let t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2==arguments.length){let t=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(t,i),null;let n=t.distance(i);n>this._distance&&this.initialize(t,i,n)}}}class eu{static computeDistance(){if(arguments[2]instanceof ec&&arguments[0]instanceof te&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=arguments[2],r=new tH,s=t.getCoordinates();for(let t=0;t<s.length-1;t++){r.setCoordinates(s[t],s[t+1]);let o=r.closestPoint(i);n.setMinimum(o,i)}}else if(arguments[2]instanceof ec&&arguments[0]instanceof tE&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=arguments[2];eu.computeDistance(t.getExteriorRing(),i,n);for(let r=0;r<t.getNumInteriorRing();r++)eu.computeDistance(t.getInteriorRingN(r),i,n)}else if(arguments[2]instanceof ec&&arguments[0]instanceof q&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=arguments[2];if(t instanceof te)eu.computeDistance(t,i,n);else if(t instanceof tE)eu.computeDistance(t,i,n);else if(t instanceof tu)for(let r=0;r<t.getNumGeometries();r++){let s=t.getGeometryN(r);eu.computeDistance(s,i,n)}else n.setMinimum(t.getCoordinate(),i)}else if(arguments[2]instanceof ec&&arguments[0]instanceof tH&&arguments[1]instanceof m){let t=arguments[1],i=arguments[2],n=arguments[0].closestPoint(t);i.setMinimum(n,t)}}}class ed{constructor(){ed.constructor_.apply(this,arguments)}static constructor_(){this._g0=null,this._g1=null,this._ptDist=new ec,this._densifyFrac=0;let t=arguments[0],i=arguments[1];this._g0=t,this._g1=i}static distance(){if(2==arguments.length)return new ed(arguments[0],arguments[1]).distance();if(3==arguments.length){let t=arguments[2],i=new ed(arguments[0],arguments[1]);return i.setDensifyFraction(t),i.distance()}}getCoordinates(){return this._ptDist.getCoordinates()}setDensifyFraction(t){if(t>1||t<=0)throw new r("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t}compute(t,i){this.computeOrientedDistance(t,i,this._ptDist),this.computeOrientedDistance(i,t,this._ptDist)}distance(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()}computeOrientedDistance(t,i,n){let r=new eg(i);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){let r=new ef(i,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}}orientedDistance(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()}}class eg{constructor(){eg.constructor_.apply(this,arguments)}static constructor_(){this._maxPtDist=new ec,this._minPtDist=new ec,this._euclideanDist=new eu,this._geom=null;let t=arguments[0];this._geom=t}filter(t){this._minPtDist.initialize(),eu.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}getMaxPointDistance(){return this._maxPtDist}get interfaces_(){return[X]}}class ef{constructor(){ef.constructor_.apply(this,arguments)}static constructor_(){this._maxPtDist=new ec,this._minPtDist=new ec,this._geom=null,this._numSubSegs=0;let t=arguments[0],i=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/i))}filter(t,i){if(0===i)return null;let n=t.getCoordinate(i-1),r=t.getCoordinate(i),s=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs;for(let t=0;t<this._numSubSegs;t++){let i=new m(n.x+t*s,n.y+t*o);this._minPtDist.initialize(),eu.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}}isGeometryChanged(){return!1}getMaxPointDistance(){return this._maxPtDist}isDone(){return!1}get interfaces_(){return[F]}}ed.MaxPointDistanceFilter=eg,ed.MaxDensifiedByFractionDistanceFilter=ef;var ep=Object.freeze({__proto__:null,DiscreteHausdorffDistance:ed,DistanceToPoint:eu,PointPairDistance:ec});class em{visitItem(t){}}class e_{locate(t){}}class ey{constructor(){ey.constructor_.apply(this,arguments)}static constructor_(){this._min=o.POSITIVE_INFINITY,this._max=o.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,i){return!(this._min>i||this._max<t)}getMax(){return this._max}toString(){return tN.toLineString(new m(this._min,0),new m(this._max,0))}}ey.NodeComparator=class{compare(t,i){let n=(t._min+t._max)/2,r=(i._min+i._max)/2;return n<r?-1:+(n>r)}get interfaces_(){return[d]}};class ew extends ey{constructor(){super(),ew.constructor_.apply(this,arguments)}static constructor_(){this._item=null;let t=arguments[0],i=arguments[1],n=arguments[2];this._min=t,this._max=i,this._item=n}query(t,i,n){if(!this.intersects(t,i))return null;n.visitItem(this._item)}}class ev extends ey{constructor(){super(),ev.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;let t=arguments[0],i=arguments[1];this._node1=t,this._node2=i,this.buildExtent(this._node1,this._node2)}buildExtent(t,i){this._min=Math.min(t._min,i._min),this._max=Math.max(t._max,i._max)}query(t,i,n){if(!this.intersects(t,i))return null;null!==this._node1&&this._node1.query(t,i,n),null!==this._node2&&this._node2.query(t,i,n)}}class eb{constructor(){eb.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new S,this._root=null,this._level=0}buildTree(){et.sort(this._leaves,new ey.NodeComparator);let t=this._leaves,i=null,n=new S;for(;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);i=t,t=n,n=i}}insert(t,i,n){if(null!==this._root)throw new D("Index cannot be added to once it has been queried");this._leaves.add(new ew(t,i,n))}query(t,i,n){if(this.init(),null===this._root)return null;this._root.query(t,i,n)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){H.out.println(tN.toLineString(new m(t._min,this._level),new m(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,i){this._level++,i.clear();for(let n=0;n<t.size();n+=2){let r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))i.add(r);else{let r=new ev(t.get(n),t.get(n+1));i.add(r)}}}}class eC{constructor(){eC.constructor_.apply(this,arguments)}static constructor_(){this._items=new S}getItems(){return this._items}visitItem(t){this._items.add(t)}get interfaces_(){return[em]}}class ex{constructor(){ex.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;let t=arguments[0];this._p=t}static locatePointInRing(){if(arguments[0]instanceof m&&b(arguments[1],N)){let t=arguments[1],i=new ex(arguments[0]),n=new m,r=new m;for(let s=1;s<t.size()&&(t.getCoordinate(s,n),t.getCoordinate(s-1,r),i.countSegment(n,r),!i.isOnSegment());s++);return i.getLocation()}if(arguments[0]instanceof m&&arguments[1]instanceof Array){let t=arguments[1],i=new ex(arguments[0]);for(let n=1;n<t.length;n++){let r=t[n],s=t[n-1];if(i.countSegment(r,s),i.isOnSegment())break}return i.getLocation()}}getLocation(){return this._isPointOnSegment?tG.BOUNDARY:this._crossingCount%2==1?tG.INTERIOR:tG.EXTERIOR}isPointInPolygon(){return this.getLocation()!==tG.EXTERIOR}isOnSegment(){return this._isPointOnSegment}countSegment(t,i){if(t.x<this._p.x&&i.x<this._p.x)return null;if(this._p.x===i.x&&this._p.y===i.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&i.y===this._p.y){let n=t.x,r=i.x;return n>r&&(n=i.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&i.y<=this._p.y||i.y>this._p.y&&t.y<=this._p.y){let n=U.index(t,i,this._p);if(n===U.COLLINEAR)return this._isPointOnSegment=!0,null;i.y<t.y&&(n=-n),n===U.LEFT&&this._crossingCount++}}}class eE{constructor(){eE.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;let t=arguments[0];if(!(b(t,td)||t instanceof ti))throw new r("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new eS(this._geom),this._geom=null);let i=new ex(t),n=new eB(i);return this._index.query(t.y,t.y,n),i.getLocation()}get interfaces_(){return[e_]}}class eB{constructor(){eB.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;let t=arguments[0];this._counter=t}visitItem(t){this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}get interfaces_(){return[em]}}class eS{constructor(){eS.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new eb;let t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let i=t9.getLines(t).iterator();i.hasNext();){let t=i.next().getCoordinates();this.addLine(t)}}addLine(t){for(let i=1;i<t.length;i++){let n=new tH(t[i-1],t[i]),r=Math.min(n.p0.y,n.p1.y),s=Math.max(n.p0.y,n.p1.y);this._index.insert(r,s,n)}}query(){if(2==arguments.length){let t=arguments[0],i=arguments[1];if(this._isEmpty)return new S;let n=new eC;return this._index.query(t,i,n),n.getItems()}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(this._isEmpty)return null;this._index.query(t,i,n)}}}eE.SegmentVisitor=eB,eE.IntervalIndexedGeometry=eS;class eI{static isInRing(t,i){return eI.locateInRing(t,i)!==tG.EXTERIOR}static locateInRing(t,i){return ex.locatePointInRing(t,i)}static isOnLine(){if(arguments[0]instanceof m&&b(arguments[1],N)){let t=arguments[0],i=arguments[1],n=new tQ,r=new m,s=new m,o=i.size();for(let a=1;a<o;a++)if(i.getCoordinate(a-1,r),i.getCoordinate(a,s),n.computeIntersection(t,r,s),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof m&&arguments[1]instanceof Array){let t=arguments[0],i=arguments[1],n=new tQ;for(let r=1;r<i.length;r++){let s=i[r-1],o=i[r];if(n.computeIntersection(t,s,o),n.hasIntersection())return!0}return!1}}}class eL{hasNext(){}next(){}remove(){}}class eF{constructor(){eF.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;let t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof tu)}next(){if(this._atStart)return this._atStart=!1,eF.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new B;let t=this._parent.getGeometryN(this._index++);return t instanceof tu?(this._subcollectionIterator=new eF(t),this._subcollectionIterator.next()):t}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}remove(){throw new j(this.getClass().getName())}get interfaces_(){return[eL]}}class eM{constructor(){eM.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;let t=arguments[0];this._geom=t}static locatePointInPolygon(t,i){if(i.isEmpty())return tG.EXTERIOR;let n=i.getExteriorRing(),r=eM.locatePointInRing(t,n);if(r!==tG.INTERIOR)return r;for(let n=0;n<i.getNumInteriorRing();n++){let r=i.getInteriorRingN(n),s=eM.locatePointInRing(t,r);if(s===tG.BOUNDARY)return tG.BOUNDARY;if(s===tG.INTERIOR)return tG.EXTERIOR}return tG.INTERIOR}static locatePointInRing(t,i){return i.getEnvelopeInternal().intersects(t)?eI.locateInRing(t,i.getCoordinates()):tG.EXTERIOR}static isContained(t,i){return tG.EXTERIOR!==eM.locate(t,i)}static locate(t,i){return i.isEmpty()?tG.EXTERIOR:i.getEnvelopeInternal().intersects(t)?eM.locateInGeometry(t,i):tG.EXTERIOR}static containsPointInPolygon(t,i){return tG.EXTERIOR!==eM.locatePointInPolygon(t,i)}static locateInGeometry(t,i){if(i instanceof tE)return eM.locatePointInPolygon(t,i);if(i instanceof tu){let n=new eF(i);for(;n.hasNext();){let r=n.next();if(r!==i){let i=eM.locateInGeometry(t,r);if(i!==tG.EXTERIOR)return i}}}return tG.EXTERIOR}locate(t){return eM.locate(t,this._geom)}get interfaces_(){return[e_]}}var eT=Object.freeze({__proto__:null,IndexedPointInAreaLocator:eE,PointOnGeometryLocator:e_,SimplePointInAreaLocator:eM});class eR{measure(t,i){}}class eO{constructor(){eO.constructor_.apply(this,arguments)}static constructor_(){if(this._quadrantSegments=eO.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=eO.CAP_ROUND,this._joinStyle=eO.JOIN_ROUND,this._mitreLimit=eO.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=eO.DEFAULT_SIMPLIFY_FACTOR,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this.setQuadrantSegments(t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(i)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this.setQuadrantSegments(t),this.setEndCapStyle(i),this.setJoinStyle(n),this.setMitreLimit(r)}}static bufferDistanceError(t){return 1-Math.cos(Math.PI/2/t/2)}getEndCapStyle(){return this._endCapStyle}isSingleSided(){return this._isSingleSided}setQuadrantSegments(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=eO.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=eO.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==eO.JOIN_ROUND&&(this._quadrantSegments=eO.DEFAULT_QUADRANT_SEGMENTS)}getJoinStyle(){return this._joinStyle}setJoinStyle(t){this._joinStyle=t}setSimplifyFactor(t){this._simplifyFactor=t<0?0:t}getSimplifyFactor(){return this._simplifyFactor}getQuadrantSegments(){return this._quadrantSegments}setEndCapStyle(t){this._endCapStyle=t}getMitreLimit(){return this._mitreLimit}setMitreLimit(t){this._mitreLimit=t}setSingleSided(t){this._isSingleSided=t}}eO.CAP_ROUND=1,eO.CAP_FLAT=2,eO.CAP_SQUARE=3,eO.JOIN_ROUND=1,eO.JOIN_MITRE=2,eO.JOIN_BEVEL=3,eO.DEFAULT_QUADRANT_SEGMENTS=8,eO.DEFAULT_MITRE_LIMIT=5,eO.DEFAULT_SIMPLIFY_FACTOR=.01;class eD{static relativeSign(t,i){return t<i?-1:+(t>i)}static compareValue(t,i){return t<0?-1:t>0?1:i<0?-1:+(i>0)}static compare(t,i,n){if(i.equals2D(n))return 0;let r=eD.relativeSign(i.x,n.x),s=eD.relativeSign(i.y,n.y);switch(t){case 0:return eD.compareValue(r,s);case 1:return eD.compareValue(s,r);case 2:return eD.compareValue(s,-r);case 3:return eD.compareValue(-r,s);case 4:return eD.compareValue(-r,-s);case 5:return eD.compareValue(-s,-r);case 6:return eD.compareValue(-s,r);case 7:return eD.compareValue(r,-s)}return c.shouldNeverReachHere("invalid octant value"),0}}class eP{constructor(){eP.constructor_.apply(this,arguments)}static constructor_(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new m(i),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!i.equals2D(t.getCoordinate(n))}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}compareTo(t){return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?eD.compare(this._segmentOctant,this.coord,t.coord):1:-1}isEndPoint(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}toString(){return this.segmentIndex+":"+this.coord.toString()}isInterior(){return this._isInterior}get interfaces_(){return[a]}}class ek extends tf{}function eN(t){return null==t?0:t.color}function eU(t){return null==t?null:t.parent}function eQ(t,i){null!==t&&(t.color=i)}function eH(t){return null==t?null:t.left}function eG(t){return null==t?null:t.right}class eV extends ek{constructor(){super(),this.root_=null,this.size_=0}get(t){let i=this.root_;for(;null!==i;){let n=t.compareTo(i.key);if(n<0)i=i.left;else{if(!(n>0))return i.value;i=i.right}}return null}put(t,i){if(null===this.root_)return this.root_={key:t,value:i,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let n,r,s=this.root_;do if(n=s,(r=t.compareTo(s.key))<0)s=s.left;else{if(!(r>0)){let t=s.value;return s.value=i,t}s=s.right}while(null!==s)let o={key:t,left:null,right:null,value:i,parent:n,color:0,getValue(){return this.value},getKey(){return this.key}};return r<0?n.left=o:n.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(t){let i;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)eU(t)===eH(eU(eU(t)))?1===eN(i=eG(eU(eU(t))))?(eQ(eU(t),0),eQ(i,0),eQ(eU(eU(t)),1),t=eU(eU(t))):(t===eG(eU(t))&&(t=eU(t),this.rotateLeft(t)),eQ(eU(t),0),eQ(eU(eU(t)),1),this.rotateRight(eU(eU(t)))):1===eN(i=eH(eU(eU(t))))?(eQ(eU(t),0),eQ(i,0),eQ(eU(eU(t)),1),t=eU(eU(t))):(t===eH(eU(t))&&(t=eU(t),this.rotateRight(t)),eQ(eU(t),0),eQ(eU(eU(t)),1),this.rotateLeft(eU(eU(t))));this.root_.color=0}values(){let t=new S,i=this.getFirstEntry();if(null!==i)for(t.add(i.value);null!==(i=eV.successor(i));)t.add(i.value);return t}entrySet(){let t=new tp,i=this.getFirstEntry();if(null!==i)for(t.add(i);null!==(i=eV.successor(i));)t.add(i);return t}rotateLeft(t){if(null!=t){let i=t.right;t.right=i.left,null!=i.left&&(i.left.parent=t),i.parent=t.parent,null==t.parent?this.root_=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}}rotateRight(t){if(null!=t){let i=t.left;t.left=i.right,null!=i.right&&(i.right.parent=t),i.parent=t.parent,null==t.parent?this.root_=i:t.parent.right===t?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let i;if(null===t)return null;if(null!==t.right){for(i=t.right;null!==i.left;)i=i.left;return i}{i=t.parent;let n=t;for(;null!==i&&n===i.right;)n=i,i=i.parent;return i}}size(){return this.size_}containsKey(t){let i=this.root_;for(;null!==i;){let n=t.compareTo(i.key);if(n<0)i=i.left;else{if(!(n>0))return!0;i=i.right}}return!1}}class ez{constructor(){ez.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new eV,this._edge=null;let t=arguments[0];this._edge=t}getSplitCoordinates(){let t=new L;this.addEndpoints();let i=this.iterator(),n=i.next();for(;i.hasNext();){let r=i.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()}print(t){t.println("Intersections:");for(let i=this.iterator();i.hasNext();)i.next().print(t)}findCollapsesFromExistingVertices(t){for(let i=0;i<this._edge.size()-2;i++){let n=this._edge.getCoordinate(i);this._edge.getCoordinate(i+1);let r=this._edge.getCoordinate(i+2);n.equals2D(r)&&t.add(R.valueOf(i+1))}}addEdgeCoordinates(t,i,n){let r=this.createSplitEdgePts(t,i);n.add(r,!1)}findCollapseIndex(t,i,n){if(!t.coord.equals2D(i.coord))return!1;let r=i.segmentIndex-t.segmentIndex;return i.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(t){let i=[,].fill(null),n=this.iterator(),r=n.next();for(;n.hasNext();){let s=n.next();this.findCollapseIndex(r,s,i)&&t.add(R.valueOf(i[0])),r=s}}getEdge(){return this._edge}addEndpoints(){let t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}createSplitEdge(t,i){return new e$(this.createSplitEdgePts(t,i),this._edge.getData())}add(t,i){let n=new eP(this._edge,t,i,this._edge.getSegmentOctant(i)),r=this._nodeMap.get(n);return null!==r?(c.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)}checkSplitEdgesCorrectness(t){let i=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(i[0]))throw new A("bad split edge start point at "+n);let r=t.get(t.size()-1).getCoordinates(),s=r[r.length-1];if(!s.equals2D(i[i.length-1]))throw new A("bad split edge end point at "+s)}addCollapsedNodes(){let t=new S;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(let i=t.iterator();i.hasNext();){let t=i.next().intValue();this.add(this._edge.getCoordinate(t),t)}}createSplitEdgePts(t,i){let n=i.segmentIndex-t.segmentIndex+2;if(2===n)return[new m(t.coord),new m(i.coord)];let r=this._edge.getCoordinate(i.segmentIndex),s=i.isInterior()||!i.coord.equals2D(r);s||n--;let o=Array(n).fill(null),a=0;o[a++]=new m(t.coord);for(let n=t.segmentIndex+1;n<=i.segmentIndex;n++)o[a++]=this._edge.getCoordinate(n);return s&&(o[a]=new m(i.coord)),o}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints(),this.addCollapsedNodes();let i=this.iterator(),n=i.next();for(;i.hasNext();){let r=i.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}}}class eK{static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1];if(0===t&&0===i)throw new r("Cannot compute the octant for point ( "+t+", "+i+" )");let n=Math.abs(t),s=Math.abs(i);return t>=0?i>=0?n>=s?0:1:n>=s?7:6:i>=0?n>=s?3:2:n>=s?4:5}if(arguments[0]instanceof m&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1],n=i.x-t.x,s=i.y-t.y;if(0===n&&0===s)throw new r("Cannot compute the octant for two identical points "+t);return eK.octant(n,s)}}}class ej{getCoordinates(){}size(){}getCoordinate(t){}isClosed(){}setData(t){}getData(){}}class eW{addIntersection(t,i){}get interfaces_(){return[ej]}}class e${constructor(){e$.constructor_.apply(this,arguments)}static constructor_(){this._nodeList=new ez(this),this._pts=null,this._data=null;let t=arguments[0],i=arguments[1];this._pts=t,this._data=i}static getNodedSubstrings(){if(1==arguments.length){let t=arguments[0],i=new S;return e$.getNodedSubstrings(t,i),i}if(2==arguments.length){let t=arguments[1];for(let i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(t)}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}toString(){return tN.toLineString(new ts(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(t,i){let n=i,r=n+1;if(r<this._pts.length){let i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)}addIntersections(t,i,n){for(let r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,i,n,r)}setData(t){this._data=t}safeOctant(t,i){return t.equals2D(i)?0:eK.octant(t,i)}getData(){return this._data}addIntersection(){if(2==arguments.length){let t=arguments[0],i=arguments[1];this.addIntersectionNode(t,i)}else if(4==arguments.length){let t=arguments[1],i=arguments[3],n=new m(arguments[0].getIntersection(i));this.addIntersection(n,t)}}get interfaces_(){return[eW]}}class eY{getNodedSubstrings(){}computeNodes(t){}}class eq{constructor(){eq.constructor_.apply(this,arguments)}static constructor_(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2==arguments.length){let t=arguments[0],i=arguments[1];eq.constructor_.call(this,t,i,0,0)}else if(4==arguments.length){let t=arguments[0],i=arguments[1];this._noder=t,this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}}rescale(){if(b(arguments[0],C))for(let t=arguments[0].iterator();t.hasNext();){let i=t.next();this.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){let t=arguments[0];for(let i=0;i<t.length;i++)t[i].x=t[i].x/this._scaleFactor+this._offsetX,t[i].y=t[i].y/this._scaleFactor+this._offsetY;2===t.length&&t[0].equals2D(t[1])&&H.out.println(t)}}scale(){if(b(arguments[0],C)){let t=arguments[0],i=new S(t.size());for(let n=t.iterator();n.hasNext();){let t=n.next();i.add(new e$(this.scale(t.getCoordinates()),t.getData()))}return i}if(arguments[0]instanceof Array){let t=arguments[0],i=Array(t.length).fill(null);for(let n=0;n<t.length;n++)i[n]=new m(Math.round((t[n].x-this._offsetX)*this._scaleFactor),Math.round((t[n].y-this._offsetY)*this._scaleFactor),t[n].getZ());return $.removeRepeatedPoints(i)}}isIntegerPrecision(){return 1===this._scaleFactor}getNodedSubstrings(){let t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}computeNodes(t){let i=t;this._isScaled&&(i=this.scale(t)),this._noder.computeNodes(i)}get interfaces_(){return[eY]}}class eX extends A{constructor(t,i){super(i?t+" [ "+i+" ]":t),this.pt=i?new m(i):void 0,this.name="TopologyException"}getCoordinate(){return this.pt}}class eZ{constructor(){eZ.constructor_.apply(this,arguments)}static constructor_(){this._li=new tQ,this._segStrings=null;let t=arguments[0];this._segStrings=t}checkEndPtVertexIntersections(){if(0==arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){let i=t.next().getCoordinates();this.checkEndPtVertexIntersections(i[0],this._segStrings),this.checkEndPtVertexIntersections(i[i.length-1],this._segStrings)}else if(2==arguments.length){let t=arguments[0];for(let i=arguments[1].iterator();i.hasNext();){let n=i.next().getCoordinates();for(let i=1;i<n.length-1;i++)if(n[i].equals(t))throw new A("found endpt/interior pt intersection at index "+i+" :pt "+t)}}}checkInteriorIntersections(){if(0==arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){let i=t.next();for(let t=this._segStrings.iterator();t.hasNext();){let n=t.next();this.checkInteriorIntersections(i,n)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=t.getCoordinates(),r=i.getCoordinates();for(let s=0;s<n.length-1;s++)for(let n=0;n<r.length-1;n++)this.checkInteriorIntersections(t,s,i,n)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];if(t===n&&i===r)return null;let s=t.getCoordinates()[i],o=t.getCoordinates()[i+1],a=n.getCoordinates()[r],l=n.getCoordinates()[r+1];if(this._li.computeIntersection(s,o,a,l),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,s,o)||this.hasInteriorIntersection(this._li,a,l)))throw new A("found non-noded intersection at "+s+"-"+o+" and "+a+"-"+l)}}checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}checkCollapses(){if(0==arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){let i=t.next();this.checkCollapses(i)}else if(1==arguments.length){let t=arguments[0].getCoordinates();for(let i=0;i<t.length-2;i++)this.checkCollapse(t[i],t[i+1],t[i+2])}}hasInteriorIntersection(t,i,n){for(let r=0;r<t.getIntersectionNum();r++){let s=t.getIntersection(r);if(!s.equals(i)&&!s.equals(n))return!0}return!1}checkCollapse(t,i,n){if(t.equals(n))throw new A("found non-noded collapse at "+eZ.fact.createLineString([t,i,n]))}}eZ.fact=new tS;class eJ{getBounds(){}}class e0{constructor(){e0.constructor_.apply(this,arguments)}static constructor_(){this._bounds=null,this._item=null;let t=arguments[0],i=arguments[1];this._bounds=t,this._item=i}getItem(){return this._item}getBounds(){return this._bounds}get interfaces_(){return[eJ,l]}}var e1=(ea=function(){if(eA)return el;eA=1;var t=function(t,i){return t<i};function i(n){if(!(this instanceof i))return new i(n);this.array=[],this.size=0,this.compare=n||t}return i.prototype.clone=function(){var t=new i(this.compare);return t.size=this.size,t.array=this.array.slice(0,this.size),t},i.prototype.add=function(t){var i,n,r=this.size;for(this.array[this.size]=t,this.size+=1;r>0&&(i=r-1>>1,n=this.array[i],this.compare(t,n));)this.array[r]=n,r=i;this.array[r]=t},i.prototype.heapify=function(t){var i;for(this.array=t,this.size=t.length,i=this.size>>1;i>=0;i--)this._percolateDown(i)},i.prototype._percolateUp=function(t,i){for(var n,r,s=this.array[t];t>0&&(n=t-1>>1,r=this.array[n],i||this.compare(s,r));)this.array[t]=r,t=n;this.array[t]=s},i.prototype._percolateDown=function(t){for(var i,n,r,s=this.size,o=this.size>>>1,a=this.array[t];t<o&&(n=(i=1+(t<<1))+1,r=this.array[i],n<s&&this.compare(this.array[n],r)&&(i=n,r=this.array[n]),this.compare(r,a));)this.array[t]=r,t=i;this.array[t]=a},i.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},i.prototype.remove=function(t){for(var i=0;i<this.size;i++)if(!this.compare(this.array[i],t)&&!this.compare(t,this.array[i]))return this._removeAt(i),!0;return!1},i.prototype.removeOne=function(t){if("function"==typeof t){for(var i=0;i<this.size;i++)if(t(this.array[i]))return this._removeAt(i)}},i.prototype.removeMany=function(t,i){if("function"!=typeof t||this.size<1)return[];i=i?Math.min(i,this.size):this.size;for(var n=0,r=Array(i),s=0,o=Array(this.size);n<i&&!this.isEmpty();){var a=this.poll();t(a)?r[n++]=a:o[s++]=a}r.length=n;for(var l=0;l<s;)this.add(o[l++]);return r},i.prototype.peek=function(){if(0!=this.size)return this.array[0]},i.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},i.prototype.replaceTop=function(t){if(0!=this.size){var i=this.array[0];return this.array[0]=t,this._percolateDown(0),i}},i.prototype.trim=function(){this.array=this.array.slice(0,this.size)},i.prototype.isEmpty=function(){return 0===this.size},i.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var i=0,n=this.clone();!n.isEmpty();)t(n.poll(),i++)},i.prototype.kSmallest=function(t){if(0==this.size||t<=0)return[];t=Math.min(this.size,t);let n=Math.min(this.size,2**(t-1)+1);if(n<2)return[this.peek()];let r=new i(this.compare);r.size=n,r.array=this.array.slice(0,n);let s=Array(t);for(let i=0;i<t;i++)s[i]=r.poll();return s},el=i}())&&ea.__esModule&&Object.prototype.hasOwnProperty.call(ea,"default")?ea.default:ea;let e2=class{constructor(){this._fpQueue=new e1((t,i)=>0>t.compareTo(i))}poll(){return this._fpQueue.poll()}size(){return this._fpQueue.size}clear(){this._fpQueue=new e1}peek(){return this._fpQueue.peek()}remove(){return this._fpQueue.poll()}isEmpty(){return this._fpQueue.isEmpty()}add(t){this._fpQueue.add(t)}};class e5{query(){}insert(t,i){}remove(t,i){}}class e4{constructor(){e4.constructor_.apply(this,arguments)}static constructor_(){if(this._childBoundables=new S,this._bounds=null,this._level=null,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this._level=t}}getLevel(){return this._level}addChildBoundable(t){c.isTrue(null===this._bounds),this._childBoundables.add(t)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}get interfaces_(){return[eJ,l]}}class e3{static distance(t,i,n,r){let s=n-t,o=r-i;return Math.sqrt(s*s+o*o)}static maximumDistance(t,i){let n=Math.min(t.getMinX(),i.getMinX()),r=Math.min(t.getMinY(),i.getMinY()),s=Math.max(t.getMaxX(),i.getMaxX()),o=Math.max(t.getMaxY(),i.getMaxY());return e3.distance(n,r,s,o)}static minMaxDistance(t,i){let n=t.getMinX(),r=t.getMinY(),s=t.getMaxX(),o=t.getMaxY(),a=i.getMinX(),l=i.getMinY(),A=i.getMaxX(),h=i.getMaxY(),c=e3.maxDistance(n,r,n,o,a,l,a,h);return Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c=Math.min(c,e3.maxDistance(n,r,n,o,a,l,A,l)),e3.maxDistance(n,r,n,o,A,h,a,h)),e3.maxDistance(n,r,n,o,A,h,A,l)),e3.maxDistance(n,r,s,r,a,l,a,h)),e3.maxDistance(n,r,s,r,a,l,A,l)),e3.maxDistance(n,r,s,r,A,h,a,h)),e3.maxDistance(n,r,s,r,A,h,A,l)),e3.maxDistance(s,o,n,o,a,l,a,h)),e3.maxDistance(s,o,n,o,a,l,A,l)),e3.maxDistance(s,o,n,o,A,h,a,h)),e3.maxDistance(s,o,n,o,A,h,A,l)),e3.maxDistance(s,o,s,r,a,l,a,h)),e3.maxDistance(s,o,s,r,a,l,A,l)),e3.maxDistance(s,o,s,r,A,h,a,h)),e3.maxDistance(s,o,s,r,A,h,A,l))}static maxDistance(t,i,n,r,s,o,a,l){let A=e3.distance(t,i,s,o);return Math.max(A=Math.max(A=Math.max(A,e3.distance(t,i,a,l)),e3.distance(n,r,s,o)),e3.distance(n,r,a,l))}}class e6{constructor(){e6.constructor_.apply(this,arguments)}static constructor_(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;let t=arguments[0],i=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=i,this._itemDistance=n,this._distance=this.distance()}static area(t){return t.getBounds().getArea()}static isComposite(t){return t instanceof e4}maximumDistance(){return e3.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}expandToQueue(t,i){let n=e6.isComposite(this._boundable1),s=e6.isComposite(this._boundable2);if(n&&s)return e6.area(this._boundable1)>e6.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,!1,t,i):this.expand(this._boundable2,this._boundable1,!0,t,i),null;if(n)return this.expand(this._boundable1,this._boundable2,!1,t,i),null;if(s)return this.expand(this._boundable2,this._boundable1,!0,t,i),null;throw new r("neither boundable is composite")}isLeaves(){return!(e6.isComposite(this._boundable1)||e6.isComposite(this._boundable2))}getBoundable(t){return 0===t?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}compareTo(t){return this._distance<t._distance?-1:+(this._distance>t._distance)}expand(t,i,n,r,s){for(let o=t.getChildBoundables().iterator();o.hasNext();){let t=o.next(),a=null;(a=n?new e6(i,t,this._itemDistance):new e6(t,i,this._itemDistance)).getDistance()<s&&r.add(a)}}get interfaces_(){return[a]}}class e8{constructor(){e8.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._built=!1,this._itemBoundables=new S,this._nodeCapacity=null,0==arguments.length)e8.constructor_.call(this,e8.DEFAULT_NODE_CAPACITY);else if(1==arguments.length){let t=arguments[0];c.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}static compareDoubles(t,i){return t>i?1:t<i?-1:0}queryInternal(){if(b(arguments[2],em)&&arguments[0]instanceof Object&&arguments[1]instanceof e4){let t=arguments[0],i=arguments[2],n=arguments[1].getChildBoundables();for(let r=0;r<n.size();r++){let s=n.get(r);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof e4?this.queryInternal(t,s,i):s instanceof e0?i.visitItem(s.getItem()):c.shouldNeverReachHere())}}else if(b(arguments[2],E)&&arguments[0]instanceof Object&&arguments[1]instanceof e4){let t=arguments[0],i=arguments[2],n=arguments[1].getChildBoundables();for(let r=0;r<n.size();r++){let s=n.get(r);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof e4?this.queryInternal(t,s,i):s instanceof e0?i.add(s.getItem()):c.shouldNeverReachHere())}}}insert(t,i){c.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new e0(t,i))}boundablesAtLevel(){if(1==arguments.length){let t=arguments[0],i=new S;return this.boundablesAtLevel(t,this._root,i),i}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(c.isTrue(t>-2),i.getLevel()===t)return n.add(i),null;for(let r=i.getChildBoundables().iterator();r.hasNext();){let i=r.next();i instanceof e4?this.boundablesAtLevel(t,i,n):(c.isTrue(i instanceof e0),-1===t&&n.add(i))}return null}}getRoot(){return this.build(),this._root}remove(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,i)}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=this.removeItem(i,n);if(r)return!0;let s=null;for(let o=i.getChildBoundables().iterator();o.hasNext();){let i=o.next();if(this.getIntersectsOp().intersects(i.getBounds(),t)&&i instanceof e4&&(r=this.remove(t,i,n))){s=i;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),r}}createHigherLevels(t,i){c.isTrue(!t.isEmpty());let n=this.createParentBoundables(t,i+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,i+1)}depth(){if(0==arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1==arguments.length){let t=0;for(let i=arguments[0].getChildBoundables().iterator();i.hasNext();){let n=i.next();if(n instanceof e4){let i=this.depth(n);i>t&&(t=i)}}return t+1}}createParentBoundables(t,i){c.isTrue(!t.isEmpty());let n=new S;n.add(this.createNode(i));let r=new S(t);et.sort(r,this.getComparator());for(let t=r.iterator();t.hasNext();){let r=t.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(i)),this.lastNode(n).addChildBoundable(r)}return n}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}getNodeCapacity(){return this._nodeCapacity}lastNode(t){return t.get(t.size()-1)}size(){if(0==arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1==arguments.length){let t=0;for(let i=arguments[0].getChildBoundables().iterator();i.hasNext();){let n=i.next();n instanceof e4?t+=this.size(n):n instanceof e0&&(t+=1)}return t}}removeItem(t,i){let n=null;for(let r=t.getChildBoundables().iterator();r.hasNext();){let t=r.next();t instanceof e0&&t.getItem()===i&&(n=t)}return null!==n&&(t.getChildBoundables().remove(n),!0)}itemsTree(){if(0==arguments.length){this.build();let t=this.itemsTree(this._root);return null===t?new S:t}if(1==arguments.length){let t=arguments[0],i=new S;for(let n=t.getChildBoundables().iterator();n.hasNext();){let t=n.next();if(t instanceof e4){let n=this.itemsTree(t);null!==n&&i.add(n)}else t instanceof e0?i.add(t.getItem()):c.shouldNeverReachHere()}return 0>=i.size()?null:i}}query(){if(1==arguments.length){let t=arguments[0];this.build();let i=new S;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,i),i}if(2==arguments.length){let t=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,i)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}get interfaces_(){return[l]}}e8.IntersectsOp=function(){},e8.DEFAULT_NODE_CAPACITY=10;class e7{distance(t,i){}}class e9 extends e8{constructor(){super(),e9.constructor_.apply(this,arguments)}static constructor_(){if(0==arguments.length)e9.constructor_.call(this,e9.DEFAULT_NODE_CAPACITY);else if(1==arguments.length){let t=arguments[0];e8.constructor_.call(this,t)}}static getItems(t){let i=Array(t.size()).fill(null),n=0;for(;!t.isEmpty();){let r=t.poll();i[n]=r.getBoundable(0).getItem(),n++}return i}static avg(t,i){return(t+i)/2}static centreY(t){return e9.avg(t.getMinY(),t.getMaxY())}static centreX(t){return e9.avg(t.getMinX(),t.getMaxX())}size(){return 0==arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2==arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof M))return super.insert.apply(this,arguments);{let t=arguments[0],i=arguments[1];if(t.isNull())return null;super.insert.call(this,t,i)}}getIntersectsOp(){return e9.intersectsOp}verticalSlices(t,i){let n=Math.trunc(Math.ceil(t.size()/i)),r=Array(i).fill(null),s=t.iterator();for(let t=0;t<i;t++){r[t]=new S;let i=0;for(;s.hasNext()&&i<n;){let n=s.next();r[t].add(n),i++}}return r}query(){if(1==arguments.length){let t=arguments[0];return super.query.call(this,t)}if(2==arguments.length){let t=arguments[0],i=arguments[1];super.query.call(this,t,i)}}getComparator(){return e9.yComparator}createParentBoundablesFromVerticalSlice(t,i){return super.createParentBoundables.call(this,t,i)}remove(){if(2==arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof M){let t=arguments[0],i=arguments[1];return super.remove.call(this,t,i)}return super.remove.apply(this,arguments)}depth(){return 0==arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(t,i){c.isTrue(!t.isEmpty());let n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new S(t);et.sort(r,e9.xComparator);let s=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,i)}nearestNeighbour(){if(1==arguments.length){if(b(arguments[0],e7)){let t=arguments[0];if(this.isEmpty())return null;let i=new e6(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(i)}if(arguments[0]instanceof e6){let t=arguments[0],i=o.POSITIVE_INFINITY,n=null,r=new e2;for(r.add(t);!r.isEmpty()&&i>0;){let t=r.poll(),s=t.getDistance();if(s>=i)break;t.isLeaves()?(i=s,n=t):t.expandToQueue(r,i)}return null===n?null:[n.getBoundable(0).getItem(),n.getBoundable(1).getItem()]}}else{if(2==arguments.length){let t=arguments[0],i=arguments[1];if(this.isEmpty()||t.isEmpty())return null;let n=new e6(this.getRoot(),t.getRoot(),i);return this.nearestNeighbour(n)}if(3==arguments.length){let t=arguments[2],i=new e0(arguments[0],arguments[1]),n=new e6(this.getRoot(),i,t);return this.nearestNeighbour(n)[0]}if(4==arguments.length){let t=arguments[2],i=arguments[3],n=new e0(arguments[0],arguments[1]),r=new e6(this.getRoot(),n,t);return this.nearestNeighbourK(r,i)}}}isWithinDistance(){if(2==arguments.length){let t=arguments[0],i=arguments[1],n=o.POSITIVE_INFINITY,r=new e2;for(r.add(t);!r.isEmpty();){let t=r.poll(),s=t.getDistance();if(s>i)break;if(t.maximumDistance()<=i)return!0;if(t.isLeaves()){if((n=s)<=i)return!0}else t.expandToQueue(r,n)}return!1}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=new e6(this.getRoot(),t.getRoot(),i);return this.isWithinDistance(r,n)}}createParentBoundablesFromVerticalSlices(t,i){c.isTrue(t.length>0);let n=new S;for(let r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],i));return n}nearestNeighbourK(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.nearestNeighbourK(t,o.POSITIVE_INFINITY,i)}if(3==arguments.length){let t=arguments[0],i=arguments[2],n=arguments[1],r=new e2;r.add(t);let s=new e2;for(;!r.isEmpty()&&n>=0;){let t=r.poll(),o=t.getDistance();if(o>=n)break;t.isLeaves()?s.size()<i?s.add(t):(s.peek().getDistance()>o&&(s.poll(),s.add(t)),n=s.peek().getDistance()):t.expandToQueue(r,n)}return e9.getItems(s)}}createNode(t){return new it(t)}get interfaces_(){return[e5,l]}}class it extends e4{constructor(){super(),it.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0];e4.constructor_.call(this,t)}computeBounds(){let t=null;for(let i=this.getChildBoundables().iterator();i.hasNext();){let n=i.next();null===t?t=new M(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}e9.STRtreeNode=it,e9.xComparator=new class{get interfaces_(){return[d]}compare(t,i){return e8.compareDoubles(e9.centreX(t.getBounds()),e9.centreX(i.getBounds()))}},e9.yComparator=new class{get interfaces_(){return[d]}compare(t,i){return e8.compareDoubles(e9.centreY(t.getBounds()),e9.centreY(i.getBounds()))}},e9.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(t,i){return t.intersects(i)}},e9.DEFAULT_NODE_CAPACITY=10;class ie{constructor(){ie.constructor_.apply(this,arguments)}static constructor_(){this._overlapSeg1=new tH,this._overlapSeg2=new tH}overlap(){if(2==arguments.length);else if(4==arguments.length){let t=arguments[1],i=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),i.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}let ii=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=i,this._end=n,this._context=r}computeOverlaps(){if(2==arguments.length){let t=arguments[0],i=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,i)}else if(6==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];if(i-t==1&&s-r==1)return o.overlap(this,t,n,r),null;if(!this.overlaps(t,i,n,r,s))return null;let a=Math.trunc((t+i)/2),l=Math.trunc((r+s)/2);t<a&&(r<l&&this.computeOverlaps(t,a,n,r,l,o),l<s&&this.computeOverlaps(t,a,n,l,s,o)),a<i&&(r<l&&this.computeOverlaps(a,i,n,r,l,o),l<s&&this.computeOverlaps(a,i,n,l,s,o))}}setId(t){this._id=t}select(t,i){this.computeSelect(t,this._start,this._end,i)}getEnvelope(){if(null===this._env){let t=this._pts[this._start],i=this._pts[this._end];this._env=new M(t,i)}return this._env}overlaps(t,i,n,r,s){return M.intersects(this._pts[t],this._pts[i],n._pts[r],n._pts[s])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}getLineSegment(t,i){i.p0=this._pts[t],i.p1=this._pts[t+1]}computeSelect(t,i,n,r){let s=this._pts[i],o=this._pts[n];if(n-i==1)return r.select(this,i),null;if(!t.intersects(s,o))return null;let a=Math.trunc((i+n)/2);i<a&&this.computeSelect(t,i,a,r),a<n&&this.computeSelect(t,a,n,r)}getCoordinates(){let t=Array(this._end-this._start+1).fill(null),i=0;for(let n=this._start;n<=this._end;n++)t[i++]=this._pts[n];return t}};class ir{static isNorthern(t){return t===ir.NE||t===ir.NW}static isOpposite(t,i){return t!==i&&2==(t-i+4)%4}static commonHalfPlane(t,i){if(t===i)return t;if(2==(t-i+4)%4)return -1;let n=t<i?t:i;return 0===n&&3===(t>i?t:i)?3:n}static isInHalfPlane(t,i){return i===ir.SE?t===ir.SE||t===ir.SW:t===i||t===i+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1];if(0===t&&0===i)throw new r("Cannot compute the quadrant for point ( "+t+", "+i+" )");return t>=0?i>=0?ir.NE:ir.SE:i>=0?ir.NW:ir.SW}if(arguments[0]instanceof m&&arguments[1]instanceof m){let t=arguments[0],i=arguments[1];if(i.x===t.x&&i.y===t.y)throw new r("Cannot compute the quadrant for two identical points "+t);return i.x>=t.x?i.y>=t.y?ir.NE:ir.SE:i.y>=t.y?ir.NW:ir.SW}}}ir.NE=0,ir.NW=1,ir.SW=2,ir.SE=3;class is{static findChainEnd(t,i){let n=i;for(;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;let r=ir.quadrant(t[n],t[n+1]),s=i+1;for(;s<t.length&&(t[s-1].equals2D(t[s])||ir.quadrant(t[s-1],t[s])===r);)s++;return s-1}static getChains(){if(1==arguments.length){let t=arguments[0];return is.getChains(t,null)}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=new S,r=0;do{let s=is.findChainEnd(t,r),o=new ii(t,r,s,i);n.add(o),r=s}while(r<t.length-1)return n}}}class io{constructor(){io.constructor_.apply(this,arguments)}static constructor_(){if(this._segInt=null,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this.setSegmentIntersector(t)}}setSegmentIntersector(t){this._segInt=t}get interfaces_(){return[eY]}}class ia extends io{constructor(){super(),ia.constructor_.apply(this,arguments)}static constructor_(){if(this._monoChains=new S,this._index=new e9,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0==arguments.length);else if(1==arguments.length){let t=arguments[0];io.constructor_.call(this,t)}}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return e$.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(t){for(let i=is.getChains(t.getCoordinates(),t).iterator();i.hasNext();){let t=i.next();t.setId(this._idCounter++),this._index.insert(t.getEnvelope(),t),this._monoChains.add(t)}}computeNodes(t){this._nodedSegStrings=t;for(let i=t.iterator();i.hasNext();)this.add(i.next());this.intersectChains()}intersectChains(){let t=new il(this._segInt);for(let i=this._monoChains.iterator();i.hasNext();){let n=i.next();for(let i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){let r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}}}}class il extends ie{constructor(){super(),il.constructor_.apply(this,arguments)}static constructor_(){this._si=null;let t=arguments[0];this._si=t}overlap(){if(4!=arguments.length)return super.overlap.apply(this,arguments);{let t=arguments[1],i=arguments[2],n=arguments[3],r=arguments[0].getContext(),s=i.getContext();this._si.processIntersections(r,t,s,n)}}}ia.SegmentOverlapAction=il;class iA{constructor(){iA.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=[,,,,].fill(null),this._safeEnv=null;let t=arguments[0],i=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=i,this._li=n,i<=0)throw new r("Scale factor must be non-zero");1!==i&&(this._pt=new m(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new m,this._p1Scaled=new m),this.initCorners(this._pt)}intersectsScaled(t,i){let n=Math.min(t.x,i.x),r=Math.max(t.x,i.x),s=Math.min(t.y,i.y),o=Math.max(t.y,i.y),a=this._maxx<n||this._minx>r||this._maxy<s||this._miny>o;if(a)return!1;let l=this.intersectsToleranceSquare(t,i);return c.isTrue(!(a&&l),"Found bad envelope test"),l}copyScaled(t,i){i.x=this.scale(t.x),i.y=this.scale(t.y)}getSafeEnvelope(){if(null===this._safeEnv){let t=iA.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new M(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}intersectsPixelClosure(t,i){return this._li.computeIntersection(t,i,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,i,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,i,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,i,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}intersectsToleranceSquare(t,i){let n=!1,r=!1;return this._li.computeIntersection(t,i,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,i,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,i,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,i,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!i.equals(this._pt))))}addSnappedNode(t,i){let n=t.getCoordinate(i),r=t.getCoordinate(i+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),i),!0)}initCorners(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new m(this._maxx,this._maxy),this._corner[1]=new m(this._minx,this._maxy),this._corner[2]=new m(this._minx,this._miny),this._corner[3]=new m(this._maxx,this._miny)}intersects(t,i){return 1===this._scaleFactor?this.intersectsScaled(t,i):(this.copyScaled(t,this._p0Scaled),this.copyScaled(i,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}scale(t){return Math.round(t*this._scaleFactor)}getCoordinate(){return this._originalPt}}iA.SAFE_ENV_EXPANSION_FACTOR=.75;class ih{constructor(){ih.constructor_.apply(this,arguments)}static constructor_(){this.selectedSegment=new tH}select(){if(1==arguments.length);else if(2==arguments.length){let t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}class ic{constructor(){ic.constructor_.apply(this,arguments)}static constructor_(){this._index=null;let t=arguments[0];this._index=t}snap(){if(1==arguments.length){let t=arguments[0];return this.snap(t,null,-1)}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=t.getSafeEnvelope(),s=new iu(t,i,n);return this._index.query(r,new class{get interfaces_(){return[em]}visitItem(t){t.select(r,s)}}),s.isNodeAdded()}}}class iu extends ih{constructor(){super(),iu.constructor_.apply(this,arguments)}static constructor_(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;let t=arguments[0],i=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=i,this._hotPixelVertexIndex=n}select(){if(!(2==arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof ii))return super.select.apply(this,arguments);{let t=arguments[1],i=arguments[0].getContext();if(this._parentEdge===i&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(i,t)}}isNodeAdded(){return this._isNodeAdded}}ic.HotPixelSnapAction=iu;let id=class{isDone(){}processIntersections(t,i,n,r){}};class ig{constructor(){ig.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._interiorIntersections=null;let t=arguments[0];this._li=t,this._interiorIntersections=new S}isDone(){return!1}processIntersections(t,i,n,r){if(t===n&&i===r)return null;let s=t.getCoordinates()[i],o=t.getCoordinates()[i+1],a=n.getCoordinates()[r],l=n.getCoordinates()[r+1];if(this._li.computeIntersection(s,o,a,l),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(let t=0;t<this._li.getIntersectionNum();t++)this._interiorIntersections.add(this._li.getIntersection(t));t.addIntersections(this._li,i,0),n.addIntersections(this._li,r,1)}}getInteriorIntersections(){return this._interiorIntersections}get interfaces_(){return[id]}}class ip{constructor(){ip.constructor_.apply(this,arguments)}static constructor_(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;let t=arguments[0];this._pm=t,this._li=new tQ,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}checkCorrectness(t){let i=new eZ(e$.getNodedSubstrings(t));try{i.checkValid()}catch(t){if(!(t instanceof n))throw t;t.printStackTrace()}}getNodedSubstrings(){return e$.getNodedSubstrings(this._nodedSegStrings)}snapRound(t,i){let n=this.findInteriorIntersections(t,i);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}findInteriorIntersections(t,i){let n=new ig(i);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}computeVertexSnaps(){if(b(arguments[0],C))for(let t=arguments[0].iterator();t.hasNext();){let i=t.next();this.computeVertexSnaps(i)}else if(arguments[0]instanceof e$){let t=arguments[0],i=t.getCoordinates();for(let n=0;n<i.length;n++){let r=new iA(i[n],this._scaleFactor,this._li);this._pointSnapper.snap(r,t,n)&&t.addIntersection(i[n],n)}}}computeNodes(t){this._nodedSegStrings=t,this._noder=new ia,this._pointSnapper=new ic(this._noder.getIndex()),this.snapRound(t,this._li)}computeIntersectionSnaps(t){for(let i=t.iterator();i.hasNext();){let t=new iA(i.next(),this._scaleFactor,this._li);this._pointSnapper.snap(t)}}get interfaces_(){return[eY]}}class im{static opposite(t){return t===im.LEFT?im.RIGHT:t===im.RIGHT?im.LEFT:t}}im.ON=0,im.LEFT=1,im.RIGHT=2;class i_ extends n{constructor(t){super(t),this.name="EmptyStackException"}}class iy extends E{constructor(){super(),this.array=[]}add(t){return this.array.push(t),!0}get(t){if(t<0||t>=this.size())throw new x;return this.array[t]}push(t){return this.array.push(t),t}pop(){if(0===this.array.length)throw new i_;return this.array.pop()}peek(){if(0===this.array.length)throw new i_;return this.array[this.array.length-1]}empty(){return 0===this.array.length}isEmpty(){return this.empty()}search(t){return this.array.indexOf(t)}size(){return this.array.length}toArray(){return this.array.slice()}}class iw{constructor(){iw.constructor_.apply(this,arguments)}static constructor_(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}getCoordinate(){return this._minCoord}getRightmostSide(t,i){let n=this.getRightmostSideOfSegment(t,i);return n<0&&(n=this.getRightmostSideOfSegment(t,i-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}findRightmostEdgeAtVertex(){let t=this._minDe.getEdge().getCoordinates();c.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");let i=t[this._minIndex-1],n=t[this._minIndex+1],r=U.index(this._minCoord,n,i),s=!1;(i.y<this._minCoord.y&&n.y<this._minCoord.y&&r===U.COUNTERCLOCKWISE||i.y>this._minCoord.y&&n.y>this._minCoord.y&&r===U.CLOCKWISE)&&(s=!0),s&&(this._minIndex=this._minIndex-1)}getRightmostSideOfSegment(t,i){let n=t.getEdge().getCoordinates();if(i<0||i+1>=n.length||n[i].y===n[i+1].y)return -1;let r=im.LEFT;return n[i].y<n[i+1].y&&(r=im.RIGHT),r}getEdge(){return this._orientedDe}checkForRightmostCoordinate(t){let i=t.getEdge().getCoordinates();for(let n=0;n<i.length-1;n++)(null===this._minCoord||i[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=i[n])}findRightmostEdgeAtNode(){let t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}findEdge(t){for(let i=t.iterator();i.hasNext();){let t=i.next();t.isForward()&&this.checkForRightmostCoordinate(t)}c.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===im.LEFT&&(this._orientedDe=this._minDe.getSym())}}class iv{constructor(){this.array=[]}addLast(t){this.array.push(t)}removeFirst(){return this.array.shift()}isEmpty(){return 0===this.array.length}}class ib{constructor(){ib.constructor_.apply(this,arguments)}static constructor_(){this._finder=null,this._dirEdgeList=new S,this._nodes=new S,this._rightMostCoord=null,this._env=null,this._finder=new iw}clearVisitedEdges(){for(let t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}compareTo(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:+(this._rightMostCoord.x>t._rightMostCoord.x)}getEnvelope(){if(null===this._env){let t=new M;for(let i=this._dirEdgeList.iterator();i.hasNext();){let n=i.next().getEdge().getCoordinates();for(let i=0;i<n.length-1;i++)t.expandToInclude(n[i])}this._env=t}return this._env}addReachable(t){let i=new iy;for(i.add(t);!i.empty();){let t=i.pop();this.add(t,i)}}copySymDepths(t){let i=t.getSym();i.setDepth(im.LEFT,t.getDepth(im.RIGHT)),i.setDepth(im.RIGHT,t.getDepth(im.LEFT))}add(t,i){t.setVisited(!0),this._nodes.add(t);for(let n=t.getEdges().iterator();n.hasNext();){let t=n.next();this._dirEdgeList.add(t);let r=t.getSym().getNode();r.isVisited()||i.push(r)}}getRightmostCoordinate(){return this._rightMostCoord}computeNodeDepth(t){let i=null;for(let n=t.getEdges().iterator();n.hasNext();){let t=n.next();if(t.isVisited()||t.getSym().isVisited()){i=t;break}}if(null===i)throw new eX("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(i);for(let i=t.getEdges().iterator();i.hasNext();){let t=i.next();t.setVisited(!0),this.copySymDepths(t)}}computeDepth(t){this.clearVisitedEdges();let i=this._finder.getEdge();i.getNode(),i.getLabel(),i.setEdgeDepths(im.RIGHT,t),this.copySymDepths(i),this.computeDepths(i)}create(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}findResultEdges(){for(let t=this._dirEdgeList.iterator();t.hasNext();){let i=t.next();i.getDepth(im.RIGHT)>=1&&0>=i.getDepth(im.LEFT)&&!i.isInteriorAreaEdge()&&i.setInResult(!0)}}computeDepths(t){let i=new tp,n=new iv,r=t.getNode();for(n.addLast(r),i.add(r),t.setVisited(!0);!n.isEmpty();){let t=n.removeFirst();i.add(t),this.computeNodeDepth(t);for(let r=t.getEdges().iterator();r.hasNext();){let t=r.next().getSym();if(t.isVisited())continue;let s=t.getNode();i.contains(s)||(n.addLast(s),i.add(s))}}}getNodes(){return this._nodes}getDirectedEdges(){return this._dirEdgeList}get interfaces_(){return[a]}}class iC{constructor(){iC.constructor_.apply(this,arguments)}static constructor_(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=U.COUNTERCLOCKWISE;let t=arguments[0];this._inputLine=t}static simplify(t,i){return new iC(t).simplify(i)}isDeletable(t,i,n,r){let s=this._inputLine[t],o=this._inputLine[i],a=this._inputLine[n];return!!this.isConcave(s,o,a)&&!!this.isShallow(s,o,a,r)&&this.isShallowSampled(s,o,t,n,r)}deleteShallowConcavities(){let t=1,i=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(i),r=!1;for(;n<this._inputLine.length;){let s=!1;this.isDeletable(t,i,n,this._distanceTol)&&(this._isDeleted[i]=iC.DELETE,s=!0,r=!0),t=s?n:i,i=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(i)}return r}isShallowConcavity(t,i,n,r){return U.index(t,i,n)===this._angleOrientation&&V.pointToSegment(i,t,n)<r}isShallowSampled(t,i,n,r,s){let o=Math.trunc((r-n)/iC.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(let a=n;a<r;a+=o)if(!this.isShallow(t,i,this._inputLine[a],s))return!1;return!0}isConcave(t,i,n){return U.index(t,i,n)===this._angleOrientation}simplify(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=U.CLOCKWISE),this._isDeleted=Array(this._inputLine.length).fill(null);let i=!1;do i=this.deleteShallowConcavities();while(i)return this.collapseLine()}findNextNonDeletedIndex(t){let i=t+1;for(;i<this._inputLine.length&&this._isDeleted[i]===iC.DELETE;)i++;return i}isShallow(t,i,n,r){return V.pointToSegment(i,t,n)<r}collapseLine(){let t=new L;for(let i=0;i<this._inputLine.length;i++)this._isDeleted[i]!==iC.DELETE&&t.add(this._inputLine[i]);return t.toCoordinateArray()}}iC.INIT=0,iC.DELETE=1,iC.KEEP=1,iC.NUM_PTS_TO_CHECK=10;class ix{constructor(){ix.constructor_.apply(this,arguments)}static constructor_(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new S}getCoordinates(){return this._ptList.toArray(ix.COORDINATE_ARRAY_TYPE)}setPrecisionModel(t){this._precisionModel=t}addPt(t){let i=new m(t);if(this._precisionModel.makePrecise(i),this.isRedundant(i))return null;this._ptList.add(i)}reverse(){}addPts(t,i){if(i)for(let i=0;i<t.length;i++)this.addPt(t[i]);else for(let i=t.length-1;i>=0;i--)this.addPt(t[i])}isRedundant(t){if(1>this._ptList.size())return!1;let i=this._ptList.get(this._ptList.size()-1);return t.distance(i)<this._minimimVertexDistance}toString(){return(new tS).createLineString(this.getCoordinates()).toString()}closeRing(){if(1>this._ptList.size())return null;let t=new m(this._ptList.get(0)),i=this._ptList.get(this._ptList.size()-1);if(t.equals(i))return null;this._ptList.add(t)}setMinimumVertexDistance(t){this._minimimVertexDistance=t}}ix.COORDINATE_ARRAY_TYPE=[].fill(null);class iE{constructor(){iE.constructor_.apply(this,arguments)}static constructor_(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new tH,this._seg1=new tH,this._offset0=new tH,this._offset1=new tH,this._side=0,this._hasNarrowConcaveAngle=!1;let t=arguments[0],i=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=i,this._li=new tQ,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===eO.JOIN_ROUND&&(this._closingSegLengthFactor=iE.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}getCoordinates(){return this._segList.getCoordinates()}addMitreJoin(t,i,n,r){let s=Q.intersection(i.p0,i.p1,n.p0,n.p1);if(null!==s&&(r<=0?1:s.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(s),null;this.addLimitedMitreJoin(i,n,r,this._bufParams.getMitreLimit())}addLastSegment(){this._segList.addPt(this._offset1.p1)}initSideSegments(t,i,n){this._s1=t,this._s2=i,this._side=n,this._seg1.setCoordinates(t,i),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}addLimitedMitreJoin(t,i,n,r){let s=this._seg0.p1,o=tz.angle(s,this._seg0.p0),a=tz.angleBetweenOriented(this._seg0.p0,s,this._seg1.p1)/2,l=tz.normalize(o+a),A=tz.normalize(l+Math.PI),h=r*n,c=n-h*Math.abs(Math.sin(a)),u=new m(s.x+h*Math.cos(A),s.y+h*Math.sin(A)),d=new tH(s,u),g=d.pointAlongOffset(1,c),f=d.pointAlongOffset(1,-c);this._side===im.LEFT?(this._segList.addPt(g),this._segList.addPt(f)):(this._segList.addPt(f),this._segList.addPt(g))}addDirectedFillet(t,i,n,r,s){let o=r===U.CLOCKWISE?-1:1,a=Math.abs(i-n),l=Math.trunc(a/this._filletAngleQuantum+.5);if(l<1)return null;let A=a/l,h=new m;for(let n=0;n<l;n++){let r=i+o*n*A;h.x=t.x+s*Math.cos(r),h.y=t.y+s*Math.sin(r),this._segList.addPt(h)}}computeOffsetSegment(t,i,n,r){let s=i===im.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,l=Math.sqrt(o*o+a*a),A=s*n*o/l,h=s*n*a/l;r.p0.x=t.p0.x-h,r.p0.y=t.p0.y+A,r.p1.x=t.p1.x-h,r.p1.y=t.p1.y+A}addInsideTurn(t,i){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*iE.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){let t=new m((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(t);let i=new m((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}createCircle(t){let i=new m(t.x+this._distance,t.y);this._segList.addPt(i),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}addBevelJoin(t,i){this._segList.addPt(t.p1),this._segList.addPt(i.p0)}init(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new ix,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*iE.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}addCollinear(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===eO.JOIN_BEVEL||this._bufParams.getJoinStyle()===eO.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,U.CLOCKWISE,this._distance))}addNextSegment(t,i){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;let n=U.index(this._s0,this._s1,this._s2),r=n===U.CLOCKWISE&&this._side===im.LEFT||n===U.COUNTERCLOCKWISE&&this._side===im.RIGHT;0===n?this.addCollinear(i):r?this.addOutsideTurn(n,i):this.addInsideTurn(n,i)}addLineEndCap(t,i){let n=new tH(t,i),r=new tH;this.computeOffsetSegment(n,im.LEFT,this._distance,r);let s=new tH;this.computeOffsetSegment(n,im.RIGHT,this._distance,s);let o=i.x-t.x,a=Math.atan2(i.y-t.y,o);switch(this._bufParams.getEndCapStyle()){case eO.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(i,a+Math.PI/2,a-Math.PI/2,U.CLOCKWISE,this._distance),this._segList.addPt(s.p1);break;case eO.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(s.p1);break;case eO.CAP_SQUARE:let l=new m;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);let A=new m(r.p1.x+l.x,r.p1.y+l.y),h=new m(s.p1.x+l.x,s.p1.y+l.y);this._segList.addPt(A),this._segList.addPt(h)}}addOutsideTurn(t,i){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*iE.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===eO.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===eO.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(i&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}createSquare(t){this._segList.addPt(new m(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new m(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new m(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new m(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}addSegments(t,i){this._segList.addPts(t,i)}addFirstSegment(){this._segList.addPt(this._offset1.p0)}addCornerFillet(t,i,n,r,s){let o=i.x-t.x,a=Math.atan2(i.y-t.y,o),l=n.x-t.x,A=Math.atan2(n.y-t.y,l);r===U.CLOCKWISE?a<=A&&(a+=2*Math.PI):a>=A&&(a-=2*Math.PI),this._segList.addPt(i),this.addDirectedFillet(t,a,A,r,s),this._segList.addPt(n)}closeRing(){this._segList.closeRing()}hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle}}iE.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,iE.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,iE.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,iE.MAX_CLOSING_SEG_LEN_FACTOR=80;class iB{constructor(){iB.constructor_.apply(this,arguments)}static constructor_(){this._distance=0,this._precisionModel=null,this._bufParams=null;let t=arguments[0],i=arguments[1];this._precisionModel=t,this._bufParams=i}static copyCoordinates(t){let i=Array(t.length).fill(null);for(let n=0;n<i.length;n++)i[n]=new m(t[n]);return i}getOffsetCurve(t,i){if(this._distance=i,0===i)return null;let n=i<0,r=Math.abs(i),s=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,n,s);let o=s.getCoordinates();return n&&$.reverse(o),o}computeSingleSidedBufferCurve(t,i,n){let r=this.simplifyTolerance(this._distance);if(i){n.addSegments(t,!0);let i=iC.simplify(t,-r),s=i.length-1;n.initSideSegments(i[s],i[s-1],im.LEFT),n.addFirstSegment();for(let t=s-2;t>=0;t--)n.addNextSegment(i[t],!0)}else{n.addSegments(t,!1);let i=iC.simplify(t,r),s=i.length-1;n.initSideSegments(i[0],i[1],im.LEFT),n.addFirstSegment();for(let t=2;t<=s;t++)n.addNextSegment(i[t],!0)}n.addLastSegment(),n.closeRing()}computeRingBufferCurve(t,i,n){let r=this.simplifyTolerance(this._distance);i===im.RIGHT&&(r=-r);let s=iC.simplify(t,r),o=s.length-1;n.initSideSegments(s[o-1],s[0],i);for(let t=1;t<=o;t++){let i=1!==t;n.addNextSegment(s[t],i)}n.closeRing()}computeLineBufferCurve(t,i){let n=this.simplifyTolerance(this._distance),r=iC.simplify(t,n),s=r.length-1;i.initSideSegments(r[0],r[1],im.LEFT);for(let t=2;t<=s;t++)i.addNextSegment(r[t],!0);i.addLastSegment(),i.addLineEndCap(r[s-1],r[s]);let o=iC.simplify(t,-n),a=o.length-1;i.initSideSegments(o[a],o[a-1],im.LEFT);for(let t=a-2;t>=0;t--)i.addNextSegment(o[t],!0);i.addLastSegment(),i.addLineEndCap(o[1],o[0]),i.closeRing()}computePointCurve(t,i){switch(this._bufParams.getEndCapStyle()){case eO.CAP_ROUND:i.createCircle(t);break;case eO.CAP_SQUARE:i.createSquare(t)}}getLineCurve(t,i){if(this._distance=i,this.isLineOffsetEmpty(i))return null;let n=Math.abs(i),r=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],r):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,i<0,r):this.computeLineBufferCurve(t,r),r.getCoordinates()}getBufferParameters(){return this._bufParams}simplifyTolerance(t){return t*this._bufParams.getSimplifyFactor()}getRingCurve(t,i,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return iB.copyCoordinates(t);let r=this.getSegGen(n);return this.computeRingBufferCurve(t,i,r),r.getCoordinates()}computeOffsetCurve(t,i,n){let r=this.simplifyTolerance(this._distance);if(i){let i=iC.simplify(t,-r),s=i.length-1;n.initSideSegments(i[s],i[s-1],im.LEFT),n.addFirstSegment();for(let t=s-2;t>=0;t--)n.addNextSegment(i[t],!0)}else{let i=iC.simplify(t,r),s=i.length-1;n.initSideSegments(i[0],i[1],im.LEFT),n.addFirstSegment();for(let t=2;t<=s;t++)n.addNextSegment(i[t],!0)}n.addLastSegment()}isLineOffsetEmpty(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}getSegGen(t){return new iE(this._precisionModel,this._bufParams,t)}}class iS{constructor(){iS.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1==arguments.length){if(arguments[0]instanceof Array){let t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){let t=arguments[0];this.init(1),this.location[im.ON]=t}else if(arguments[0]instanceof iS){let t=arguments[0];if(this.init(t.location.length),null!==t)for(let i=0;i<this.location.length;i++)this.location[i]=t.location[i]}}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this.init(3),this.location[im.ON]=t,this.location[im.LEFT]=i,this.location[im.RIGHT]=n}}setAllLocations(t){for(let i=0;i<this.location.length;i++)this.location[i]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==tG.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let i=0;i<this.location.length;i++)this.location[i]===tG.NONE&&(this.location[i]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){let t=[,,,].fill(null);t[im.ON]=this.location[im.ON],t[im.LEFT]=tG.NONE,t[im.RIGHT]=tG.NONE,this.location=t}for(let i=0;i<this.location.length;i++)this.location[i]===tG.NONE&&i<t.location.length&&(this.location[i]=t.location[i])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;let t=this.location[im.LEFT];this.location[im.LEFT]=this.location[im.RIGHT],this.location[im.RIGHT]=t}get(t){return t<this.location.length?this.location[t]:tG.NONE}isEqualOnSide(t,i){return this.location[i]===t.location[i]}allPositionsEqual(t){for(let i=0;i<this.location.length;i++)if(this.location[i]!==t)return!1;return!0}toString(){let t=new T;return this.location.length>1&&t.append(tG.toLocationSymbol(this.location[im.LEFT])),t.append(tG.toLocationSymbol(this.location[im.ON])),this.location.length>1&&t.append(tG.toLocationSymbol(this.location[im.RIGHT])),t.toString()}setLocations(t,i,n){this.location[im.ON]=t,this.location[im.LEFT]=i,this.location[im.RIGHT]=n}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===tG.NONE)return!0;return!1}setLocation(){if(1==arguments.length){let t=arguments[0];this.setLocation(im.ON,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.location[t]=i}}init(t){this.location=Array(t).fill(null),this.setAllLocations(tG.NONE)}}class iI{constructor(){iI.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=[,,].fill(null),1==arguments.length){if(Number.isInteger(arguments[0])){let t=arguments[0];this.elt[0]=new iS(t),this.elt[1]=new iS(t)}else if(arguments[0]instanceof iI){let t=arguments[0];this.elt[0]=new iS(t.elt[0]),this.elt[1]=new iS(t.elt[1])}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.elt[0]=new iS(tG.NONE),this.elt[1]=new iS(tG.NONE),this.elt[t].setLocation(i)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this.elt[0]=new iS(t,i,n),this.elt[1]=new iS(t,i,n)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this.elt[0]=new iS(tG.NONE,tG.NONE,tG.NONE),this.elt[1]=new iS(tG.NONE,tG.NONE,tG.NONE),this.elt[t].setLocations(i,n,r)}}static toLineLabel(t){let i=new iI(tG.NONE);for(let n=0;n<2;n++)i.setLocation(n,t.getLocation(n));return i}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,i){this.elt[t].setAllLocations(i)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1==arguments.length){let t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.elt[t].setAllLocationsIfNull(i)}}isLine(t){return this.elt[t].isLine()}merge(t){for(let i=0;i<2;i++)null===this.elt[i]&&null!==t.elt[i]?this.elt[i]=new iS(t.elt[i]):this.elt[i].merge(t.elt[i])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1==arguments.length){let t=arguments[0];return this.elt[t].get(im.ON)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.elt[t].get(i)}}toString(){let t=new T;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}setLocation(){if(2==arguments.length){let t=arguments[0],i=arguments[1];this.elt[t].setLocation(im.ON,i)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this.elt[t].setLocation(i,n)}}isEqualOnSide(t,i){return this.elt[0].isEqualOnSide(t.elt[0],i)&&this.elt[1].isEqualOnSide(t.elt[1],i)}allPositionsEqual(t,i){return this.elt[t].allPositionsEqual(i)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new iS(this.elt[t].location[0]))}isArea(){if(0==arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1==arguments.length){let t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}}let iL=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this._label=t}}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){c.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}isInResult(){return this._isInResult}isVisited(){return this._isVisited}},iF=class t extends iL{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;let t=arguments[0],i=arguments[1];this._coord=t,this._edges=i,this._label=new iI(0,tG.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}computeMergedLocation(t,i){let n=tG.NONE;if(n=this._label.getLocation(i),!t.isNull(i)){let r=t.getLocation(i);n!==tG.BOUNDARY&&(n=r)}return n}setLabel(){if(2!=arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{let t=arguments[0],i=arguments[1];null===this._label?this._label=new iI(t,i):this._label.setLocation(t,i)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof t){let t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof iI){let t=arguments[0];for(let i=0;i<2;i++){let n=this.computeMergedLocation(t,i);this._label.getLocation(i)===tG.NONE&&this._label.setLocation(i,n)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let i=tG.NONE;null!==this._label&&(i=this._label.getLocation(t));let n=null;switch(i){case tG.BOUNDARY:n=tG.INTERIOR;break;case tG.INTERIOR:default:n=tG.BOUNDARY}this._label.setLocation(t,n)}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}},iM=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new eV,this.nodeFact=null;let t=arguments[0];this.nodeFact=t}print(t){for(let i=this.iterator();i.hasNext();)i.next().print(t)}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){let i=new S;for(let n=this.iterator();n.hasNext();){let r=n.next();r.getLabel().getLocation(t)===tG.BOUNDARY&&i.add(r)}return i}add(t){let i=t.getCoordinate();this.addNode(i).add(t)}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof m){let t=arguments[0],i=this.nodeMap.get(t);return null===i&&(i=this.nodeFact.createNode(t),this.nodeMap.put(t,i)),i}if(arguments[0]instanceof iF){let t=arguments[0],i=this.nodeMap.get(t.getCoordinate());return null===i?(this.nodeMap.put(t.getCoordinate(),t),t):(i.mergeLabel(t),i)}}};class iT{createNode(t){return new iF(t,null)}}class iR{constructor(){iR.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1==arguments.length){let t=arguments[0];this._edge=t}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];iR.constructor_.call(this,t,i,n,null)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];iR.constructor_.call(this,t),this.init(i,n),this._label=r}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:U.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}print(t){let i=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);t.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+i+"   "+this._label)}getLabel(){return this._label}getEdge(){return this._edge}toString(){let t=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),n=i.lastIndexOf(".");return"  "+i.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,i){this._p0=t,this._p1=i,this._dx=i.x-t.x,this._dy=i.y-t.y,this._quadrant=ir.quadrant(this._dx,this._dy),c.isTrue(0!==this._dx||0!==this._dy,"EdgeEnd with identical endpoints found")}getCoordinate(){return this._p0}setNode(t){this._node=t}compareTo(t){return this.compareDirection(t)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getQuadrant(){return this._quadrant}getNode(){return this._node}get interfaces_(){return[a]}}let iO=class t extends iR{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];let t=arguments[0],i=arguments[1];if(iR.constructor_.call(this,t),this._isForward=i,i)this.init(t.getCoordinate(0),t.getCoordinate(1));else{let i=t.getNumPoints()-1;this.init(t.getCoordinate(i),t.getCoordinate(i-1))}this.computeDirectedLabel()}static depthFactor(t,i){return t===tG.EXTERIOR&&i===tG.INTERIOR?1:t===tG.INTERIOR&&i===tG.EXTERIOR?-1:0}setVisited(t){this._isVisited=t}setDepth(t,i){if(-999!==this._depth[t]&&this._depth[t]!==i)throw new eX("assigned depths do not match",this.getCoordinate());this._depth[t]=i}isInteriorAreaEdge(){let t=!0;for(let i=0;i<2;i++)this._label.isArea(i)&&this._label.getLocation(i,im.LEFT)===tG.INTERIOR&&this._label.getLocation(i,im.RIGHT)===tG.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[im.LEFT]+"/"+this._depth[im.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}getSym(){return this._sym}isForward(){return this._isForward}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}computeDirectedLabel(){this._label=new iI(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}isLineEdge(){let t=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,tG.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,tG.EXTERIOR);return t&&i&&n}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setEdgeDepths(t,i){let n=this.getEdge().getDepthDelta();this._isForward||(n=-n);let r=1;t===im.LEFT&&(r=-1);let s=im.opposite(t),o=i+n*r;this.setDepth(t,i),this.setDepth(s,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}},iD=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new S,this._nodes=null,this._edgeEndList=new S,0==arguments.length)this._nodes=new iM(new iT);else if(1==arguments.length){let t=arguments[0];this._nodes=new iM(t)}}static linkResultDirectedEdges(t){for(let i=t.iterator();i.hasNext();)i.next().getEdges().linkResultDirectedEdges()}printEdges(t){t.println("Edges:");for(let i=0;i<this._edges.size();i++){t.println("edge "+i+":");let n=this._edges.get(i);n.print(t),n.eiList.print(t)}}debugPrintln(t){H.out.println(t)}isBoundaryNode(t,i){let n=this._nodes.find(i);if(null===n)return!1;let r=n.getLabel();return null!==r&&r.getLocation(t)===tG.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}debugPrint(t){H.out.print(t)}findEdgeEnd(t){for(let i=this.getEdgeEnds().iterator();i.hasNext();){let n=i.next();if(n.getEdge()===t)return n}return null}getNodes(){return this._nodes.values()}findEdge(t,i){for(let n=0;n<this._edges.size();n++){let r=this._edges.get(n),s=r.getCoordinates();if(t.equals(s[0])&&i.equals(s[1]))return r}return null}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof iF||arguments[0]instanceof m){let t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}matchInSameDirection(t,i,n,r){return!!t.equals(n)&&U.index(t,i,r)===U.COLLINEAR&&ir.quadrant(t,i)===ir.quadrant(n,r)}getEdgeEnds(){return this._edgeEndList}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,i){for(let n=0;n<this._edges.size();n++){let r=this._edges.get(n),s=r.getCoordinates();if(this.matchInSameDirection(t,i,s[0],s[1])||this.matchInSameDirection(t,i,s[s.length-1],s[s.length-2]))return r}return null}insertEdge(t){this._edges.add(t)}addEdges(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this._edges.add(t);let n=new iO(t,!0),r=new iO(t,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}},iP=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new S,this._pts=new S,this._label=new iI(tG.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new S,this._geometryFactory=null,0==arguments.length);else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._geometryFactory=i,this.computePoints(t),this.computeRing()}}computeRing(){if(null!==this._ring)return null;let t=Array(this._pts.size()).fill(null);for(let i=0;i<this._pts.size();i++)t[i]=this._pts.get(i);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=U.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(t){this._startDe=t;let i=t,n=!0;do{if(null===i)throw new eX("Found null DirectedEdge");if(i.getEdgeRing()===this)throw new eX("Directed Edge visited twice during ring-building at "+i.getCoordinate());this._edges.add(i);let t=i.getLabel();c.isTrue(t.isArea()),this.mergeLabel(t),this.addPoints(i.getEdge(),i.isForward(),n),n=!1,this.setEdgeRing(i,this),i=this.getNext(i)}while(i!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(t){return this._pts.get(t)}computeMaxNodeDegree(){this._maxNodeDegree=0;let t=this._startDe;do{let i=t.getNode().getEdges().getOutgoingDegree(this);i>this._maxNodeDegree&&(this._maxNodeDegree=i),t=this.getNext(t)}while(t!==this._startDe)this._maxNodeDegree*=2}addPoints(t,i,n){let r=t.getCoordinates();if(i){let t=1;n&&(t=0);for(let i=t;i<r.length;i++)this._pts.add(r[i])}else{let t=r.length-2;n&&(t=r.length-1);for(let i=t;i>=0;i--)this._pts.add(r[i])}}containsPoint(t){let i=this.getLinearRing();if(!i.getEnvelopeInternal().contains(t)||!eI.isInRing(t,i.getCoordinates()))return!1;for(let i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}setShell(t){this._shell=t,null!==t&&t.addHole(this)}toPolygon(t){let i=Array(this._holes.size()).fill(null);for(let t=0;t<this._holes.size();t++)i[t]=this._holes.get(t).getLinearRing();return t.createPolygon(this.getLinearRing(),i)}isHole(){return this._isHole}setInResult(){let t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)}addHole(t){this._holes.add(t)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getShell(){return this._shell}mergeLabel(){if(1==arguments.length){let t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2==arguments.length){let t=arguments[1],i=arguments[0].getLocation(t,im.RIGHT);if(i===tG.NONE)return null;if(this._label.getLocation(t)===tG.NONE)return this._label.setLocation(t,i),null}}};class ik extends iP{constructor(){super(),ik.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];iP.constructor_.call(this,t,i)}getNext(t){return t.getNextMin()}setEdgeRing(t,i){t.setMinEdgeRing(i)}}class iN extends iP{constructor(){super(),iN.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];iP.constructor_.call(this,t,i)}linkDirectedEdgesForMinimalEdgeRings(){let t=this._startDe;do t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext();while(t!==this._startDe)}buildMinimalRings(){let t=new S,i=this._startDe;do{if(null===i.getMinEdgeRing()){let n=new ik(i,this._geometryFactory);t.add(n)}i=i.getNext()}while(i!==this._startDe)return t}getNext(t){return t.getNext()}setEdgeRing(t,i){t.setEdgeRing(i)}}class iU{constructor(){iU.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=null,this._shellList=new S;let t=arguments[0];this._geometryFactory=t}static findEdgeRingContaining(t,i){let n=t.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,a=null;for(let t=i.iterator();t.hasNext();){let i=t.next(),l=i.getLinearRing(),A=l.getEnvelopeInternal();if(A.equals(r)||!A.contains(r))continue;s=$.ptNotInList(n.getCoordinates(),l.getCoordinates());let h=!1;eI.isInRing(s,l.getCoordinates())&&(h=!0),h&&(null===o||a.contains(A))&&(a=(o=i).getLinearRing().getEnvelopeInternal())}return o}sortShellsAndHoles(t,i,n){for(let r=t.iterator();r.hasNext();){let t=r.next();t.isHole()?n.add(t):i.add(t)}}computePolygons(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next().toPolygon(this._geometryFactory);i.add(t)}return i}placeFreeHoles(t,i){for(let n=i.iterator();n.hasNext();){let i=n.next();if(null===i.getShell()){let n=iU.findEdgeRingContaining(i,t);if(null===n)throw new eX("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(n)}}}buildMinimalEdgeRings(t,i,n){let r=new S;for(let s=t.iterator();s.hasNext();){let t=s.next();if(t.getMaxNodeDegree()>2){t.linkDirectedEdgesForMinimalEdgeRings();let r=t.buildMinimalRings(),s=this.findShell(r);null!==s?(this.placePolygonHoles(s,r),i.add(s)):n.addAll(r)}else r.add(t)}return r}buildMaximalEdgeRings(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next();if(t.isInResult()&&t.getLabel().isArea()&&null===t.getEdgeRing()){let n=new iN(t,this._geometryFactory);i.add(n),n.setInResult()}}return i}placePolygonHoles(t,i){for(let n=i.iterator();n.hasNext();){let i=n.next();i.isHole()&&i.setShell(t)}}getPolygons(){return this.computePolygons(this._shellList)}findShell(t){let i=0,n=null;for(let r=t.iterator();r.hasNext();){let t=r.next();t.isHole()||(n=t,i++)}return c.isTrue(i<=1,"found two shells in MinimalEdgeRing list"),n}add(){if(1==arguments.length){let t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2==arguments.length){let t=arguments[0],i=arguments[1];iD.linkResultDirectedEdges(i);let n=this.buildMaximalEdgeRings(t),r=new S,s=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(s,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}}class iQ{constructor(){iQ.constructor_.apply(this,arguments)}static constructor_(){this._subgraphs=null,this._seg=new tH;let t=arguments[0];this._subgraphs=t}findStabbedSegments(){if(1==arguments.length){let t=arguments[0],i=new S;for(let n=this._subgraphs.iterator();n.hasNext();){let r=n.next(),s=r.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),i)}return i}if(3==arguments.length){if(b(arguments[2],E)&&arguments[0]instanceof m&&arguments[1]instanceof iO){let t=arguments[0],i=arguments[1],n=arguments[2],r=i.getEdge().getCoordinates();for(let s=0;s<r.length-1;s++){if(this._seg.p0=r[s],this._seg.p1=r[s+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<t.x||this._seg.isHorizontal()||t.y<this._seg.p0.y||t.y>this._seg.p1.y||U.index(this._seg.p0,this._seg.p1,t)===U.RIGHT)continue;let o=i.getDepth(im.LEFT);this._seg.p0.equals(r[s])||(o=i.getDepth(im.RIGHT));let a=new iH(this._seg,o);n.add(a)}}else if(b(arguments[2],E)&&arguments[0]instanceof m&&b(arguments[1],E)){let t=arguments[0],i=arguments[2];for(let n=arguments[1].iterator();n.hasNext();){let r=n.next();r.isForward()&&this.findStabbedSegments(t,r,i)}}}}getDepth(t){let i=this.findStabbedSegments(t);return 0===i.size()?0:et.min(i)._leftDepth}}class iH{constructor(){iH.constructor_.apply(this,arguments)}static constructor_(){this._upwardSeg=null,this._leftDepth=null;let t=arguments[0],i=arguments[1];this._upwardSeg=new tH(t),this._leftDepth=i}compareX(t,i){let n=t.p0.compareTo(i.p0);return 0!==n?n:t.p1.compareTo(i.p1)}toString(){return this._upwardSeg.toString()}compareTo(t){if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return -1;let i=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==i||0!=(i=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(t._upwardSeg)}get interfaces_(){return[a]}}iQ.DepthSegment=iH;class iG{constructor(){iG.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new S;let t=arguments[0],i=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=i,this._curveBuilder=n}addRingSide(t,i,n,r,s){if(0===i&&t.length<ti.MINIMUM_VALID_SIZE)return null;let o=r,a=s;t.length>=ti.MINIMUM_VALID_SIZE&&U.isCCW(t)&&(o=s,a=r,n=im.opposite(n));let l=this._curveBuilder.getRingCurve(t,n,i);this.addCurve(l,o,a)}addRingBothSides(t,i){this.addRingSide(t,i,im.LEFT,tG.EXTERIOR,tG.INTERIOR),this.addRingSide(t,i,im.RIGHT,tG.INTERIOR,tG.EXTERIOR)}addPoint(t){if(this._distance<=0)return null;let i=t.getCoordinates(),n=this._curveBuilder.getLineCurve(i,this._distance);this.addCurve(n,tG.EXTERIOR,tG.INTERIOR)}addPolygon(t){let i=this._distance,n=im.LEFT;this._distance<0&&(i=-this._distance,n=im.RIGHT);let r=t.getExteriorRing(),s=$.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance)||this._distance<=0&&s.length<3)return null;this.addRingSide(s,i,n,tG.EXTERIOR,tG.INTERIOR);for(let r=0;r<t.getNumInteriorRing();r++){let s=t.getInteriorRingN(r),o=$.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(o,i,im.opposite(n),tG.INTERIOR,tG.EXTERIOR)}}isTriangleErodedCompletely(t,i){let n=new tW(t[0],t[1],t[2]),r=n.inCentre();return V.pointToSegment(r,n.p0,n.p1)<Math.abs(i)}addLineString(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;let i=$.removeRepeatedPoints(t.getCoordinates());if($.isRing(i)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(i,this._distance);else{let t=this._curveBuilder.getLineCurve(i,this._distance);this.addCurve(t,tG.EXTERIOR,tG.INTERIOR)}}add(t){if(t.isEmpty())return null;if(t instanceof tE)this.addPolygon(t);else if(t instanceof te)this.addLineString(t);else if(t instanceof tC)this.addPoint(t);else if(t instanceof tB)this.addCollection(t);else if(t instanceof tv)this.addCollection(t);else if(t instanceof tg)this.addCollection(t);else{if(!(t instanceof tu))throw new j(t.getGeometryType());this.addCollection(t)}}addCurve(t,i,n){if(null===t||t.length<2)return null;let r=new e$(t,new iI(0,tG.BOUNDARY,i,n));this._curveList.add(r)}getCurves(){return this.add(this._inputGeom),this._curveList}isErodedCompletely(t,i){let n=t.getCoordinates();if(n.length<4)return i<0;if(4===n.length)return this.isTriangleErodedCompletely(n,i);let r=t.getEnvelopeInternal(),s=Math.min(r.getHeight(),r.getWidth());return i<0&&2*Math.abs(i)>s}addCollection(t){for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);this.add(n)}}}class iV{constructor(){iV.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new eV,this._edgeList=null,this._ptInAreaLocation=[tG.NONE,tG.NONE]}getNextCW(t){this.getEdges();let i=this._edgeList.indexOf(t),n=i-1;return 0===i&&(n=this._edgeList.size()-1),this._edgeList.get(n)}propagateSideLabels(t){let i=tG.NONE;for(let n=this.iterator();n.hasNext();){let r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,im.LEFT)!==tG.NONE&&(i=r.getLocation(t,im.LEFT))}if(i===tG.NONE)return null;let n=i;for(let i=this.iterator();i.hasNext();){let r=i.next(),s=r.getLabel();if(s.getLocation(t,im.ON)===tG.NONE&&s.setLocation(t,im.ON,n),s.isArea(t)){let i=s.getLocation(t,im.LEFT),o=s.getLocation(t,im.RIGHT);if(o!==tG.NONE){if(o!==n)throw new eX("side location conflict",r.getCoordinate());i===tG.NONE&&c.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),n=i}else c.isTrue(s.getLocation(t,im.LEFT)===tG.NONE,"found single null side"),s.setLocation(t,im.RIGHT,n),s.setLocation(t,im.LEFT,n)}}}getCoordinate(){let t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}checkAreaLabelsConsistent(t){let i=this.getEdges();if(0>=i.size())return!0;let n=i.size()-1,r=i.get(n).getLabel().getLocation(t,im.LEFT);c.isTrue(r!==tG.NONE,"Found unlabelled area edge");let s=r;for(let i=this.iterator();i.hasNext();){let n=i.next().getLabel();c.isTrue(n.isArea(t),"Found non-area edge");let r=n.getLocation(t,im.LEFT),o=n.getLocation(t,im.RIGHT);if(r===o||o!==s)return!1;s=r}return!0}findIndex(t){this.iterator();for(let i=0;i<this._edgeList.size();i++)if(this._edgeList.get(i)===t)return i;return -1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new S(this._edgeMap.values())),this._edgeList}getLocation(t,i,n){return this._ptInAreaLocation[t]===tG.NONE&&(this._ptInAreaLocation[t]=eM.locate(i,n[t].getGeometry())),this._ptInAreaLocation[t]}toString(){let t=new T;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let i=this.iterator();i.hasNext();){let n=i.next();t.append(n),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let i=this.iterator();i.hasNext();)i.next().computeLabel(t)}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);let i=[!1,!1];for(let t=this.iterator();t.hasNext();){let n=t.next().getLabel();for(let t=0;t<2;t++)n.isLine(t)&&n.getLocation(t)===tG.BOUNDARY&&(i[t]=!0)}for(let n=this.iterator();n.hasNext();){let r=n.next(),s=r.getLabel();for(let n=0;n<2;n++)if(s.isAnyNull(n)){let o=tG.NONE;if(i[n])o=tG.EXTERIOR;else{let i=r.getCoordinate();o=this.getLocation(n,i,t)}s.setAllLocationsIfNull(n,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,i){this._edgeMap.put(t,i),this._edgeList=null}print(t){H.out.println("EdgeEndStar:   "+this.getCoordinate());for(let i=this.iterator();i.hasNext();)i.next().print(t)}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}}let iz=class t extends iV{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}linkResultDirectedEdges(){this.getResultAreaEdges();let t=null,i=null,n=this._SCANNING_FOR_INCOMING;for(let r=0;r<this._resultAreaEdgeList.size();r++){let s=this._resultAreaEdgeList.get(r),o=s.getSym();if(s.getLabel().isArea())switch(null===t&&s.isInResult()&&(t=s),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;i=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!s.isInResult())continue;i.setNext(s),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new eX("no outgoing dirEdge found",this.getCoordinate());c.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),i.setNext(t)}}insert(t){this.insertEdgeEnd(t,t)}getRightmostEdge(){let t=this.getEdges(),i=t.size();if(i<1)return null;let n=t.get(0);if(1===i)return n;let r=t.get(i-1),s=n.getQuadrant(),o=r.getQuadrant();return ir.isNorthern(s)&&ir.isNorthern(o)?n:ir.isNorthern(s)||ir.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(c.shouldNeverReachHere("found two horizontal edges incident on node"),null):r}updateLabelling(t){for(let i=this.iterator();i.hasNext();){let n=i.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();let t=null,i=null;for(let n=this._edgeList.size()-1;n>=0;n--){let r=this._edgeList.get(n),s=r.getSym();null===i&&(i=s),null!==t&&s.setNext(t),t=r}i.setNext(t)}computeDepths(){if(1==arguments.length){let t=arguments[0],i=this.findIndex(t),n=t.getDepth(im.LEFT),r=t.getDepth(im.RIGHT),s=this.computeDepths(i+1,this._edgeList.size(),n);if(this.computeDepths(0,i,s)!==r)throw new eX("depth mismatch at "+t.getCoordinate())}else if(3==arguments.length){let t=arguments[1],i=arguments[2];for(let n=arguments[0];n<t;n++){let t=this._edgeList.get(n);t.setEdgeDepths(im.RIGHT,i),i=t.getDepth(im.LEFT)}return i}}mergeSymLabels(){for(let t=this.iterator();t.hasNext();){let i=t.next();i.getLabel().merge(i.getSym().getLabel())}}linkMinimalDirectedEdges(t){let i=null,n=null,r=this._SCANNING_FOR_INCOMING;for(let s=this._resultAreaEdgeList.size()-1;s>=0;s--){let o=this._resultAreaEdgeList.get(s),a=o.getSym();switch(null===i&&o.getEdgeRing()===t&&(i=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(c.isTrue(null!==i,"found null for first outgoing dirEdge"),c.isTrue(i.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(i))}getOutgoingDegree(){if(0==arguments.length){let t=0;for(let i=this.iterator();i.hasNext();)i.next().isInResult()&&t++;return t}if(1==arguments.length){let t=arguments[0],i=0;for(let n=this.iterator();n.hasNext();)n.next().getEdgeRing()===t&&i++;return i}}getLabel(){return this._label}findCoveredLineEdges(){let t=tG.NONE;for(let i=this.iterator();i.hasNext();){let n=i.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=tG.INTERIOR;break}if(r.isInResult()){t=tG.EXTERIOR;break}}}if(t===tG.NONE)return null;let i=t;for(let t=this.iterator();t.hasNext();){let n=t.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(i===tG.INTERIOR):(n.isInResult()&&(i=tG.EXTERIOR),r.isInResult()&&(i=tG.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new iI(tG.NONE);for(let t=this.iterator();t.hasNext();){let i=t.next().getEdge().getLabel();for(let t=0;t<2;t++){let n=i.getLocation(t);n!==tG.INTERIOR&&n!==tG.BOUNDARY||this._label.setLocation(t,tG.INTERIOR)}}}print(t){H.out.println("DirectedEdgeStar: "+this.getCoordinate());for(let i=this.iterator();i.hasNext();){let n=i.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new S;for(let t=this.iterator();t.hasNext();){let i=t.next();(i.isInResult()||i.getSym().isInResult())&&this._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList}};class iK extends iT{constructor(){super()}createNode(t){return new iF(t,new iz)}}class ij{constructor(){ij.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._orientation=null;let t=arguments[0];this._pts=t,this._orientation=ij.orientation(t)}static orientation(t){return 1===$.increasingDirection(t)}static compareOriented(t,i,n,r){let s=i?1:-1,o=r?1:-1,a=i?t.length:-1,l=r?n.length:-1,A=i?0:t.length-1,h=r?0:n.length-1;for(;;){let i=t[A].compareTo(n[h]);if(0!==i)return i;A+=s,h+=o;let r=A===a,c=h===l;if(r&&!c)return -1;if(!r&&c)return 1;if(r&&c)return 0}}compareTo(t){return ij.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}get interfaces_(){return[a]}}class iW{constructor(){iW.constructor_.apply(this,arguments)}static constructor_(){this._edges=new S,this._ocaMap=new eV}print(t){t.print("MULTILINESTRING ( ");for(let i=0;i<this._edges.size();i++){let n=this._edges.get(i);i>0&&t.print(","),t.print("(");let r=n.getCoordinates();for(let i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")}addAll(t){for(let i=t.iterator();i.hasNext();)this.add(i.next())}findEdgeIndex(t){for(let i=0;i<this._edges.size();i++)if(this._edges.get(i).equals(t))return i;return -1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(t){return this._edges.get(t)}findEqualEdge(t){let i=new ij(t.getCoordinates());return this._ocaMap.get(i)}add(t){this._edges.add(t);let i=new ij(t.getCoordinates());this._ocaMap.put(i,t)}}class i${constructor(){i$.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;let t=arguments[0];this._li=t}static isAdjacentSegments(t,i){return 1===Math.abs(t-i)}isTrivialIntersection(t,i,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(i$.isAdjacentSegments(i,r))return!0;if(t.isClosed()){let n=t.size()-1;if(0===i&&r===n||0===r&&i===n)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}hasProperInteriorIntersection(){return this._hasProperInterior}getLineIntersector(){return this._li}hasProperIntersection(){return this._hasProper}processIntersections(t,i,n,r){if(t===n&&i===r)return null;this.numTests++;let s=t.getCoordinates()[i],o=t.getCoordinates()[i+1],a=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this._li.computeIntersection(s,o,a,l),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,i,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,i,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}hasIntersection(){return this._hasIntersection}isDone(){return!1}hasInteriorIntersection(){return this._hasInterior}get interfaces_(){return[id]}}class iY{constructor(){iY.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;let t=arguments[0],i=arguments[1],n=arguments[2];this.coord=new m(t),this.segmentIndex=i,this.dist=n}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){return this.compare(t.segmentIndex,t.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,i){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<i?-1:+(this.dist>i)}get interfaces_(){return[a]}}class iq{constructor(){iq.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new eV,this.edge=null;let t=arguments[0];this.edge=t}print(t){t.println("Intersections:");for(let i=this.iterator();i.hasNext();)i.next().print(t)}addEndpoints(){let t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,i){let n=i.segmentIndex-t.segmentIndex+2,r=this.edge.pts[i.segmentIndex],s=i.dist>0||!i.coord.equals2D(r);s||n--;let o=Array(n).fill(null),a=0;o[a++]=new m(t.coord);for(let n=t.segmentIndex+1;n<=i.segmentIndex;n++)o[a++]=this.edge.pts[n];return s&&(o[a]=i.coord),new i1(o,new iI(this.edge._label))}add(t,i,n){let r=new iY(t,i,n),s=this._nodeMap.get(r);return null!==s?s:(this._nodeMap.put(r,r),r)}isIntersection(t){for(let i=this.iterator();i.hasNext();)if(i.next().coord.equals(t))return!0;return!1}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();let i=this.iterator(),n=i.next();for(;i.hasNext();){let r=i.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}}}class iX{constructor(){iX.constructor_.apply(this,arguments)}static constructor_(){this._depth=[,,].fill().map(()=>[,,,]);for(let t=0;t<2;t++)for(let i=0;i<3;i++)this._depth[t][i]=iX.NULL_VALUE}static depthAtLocation(t){return t===tG.EXTERIOR?0:t===tG.INTERIOR?1:iX.NULL_VALUE}getDepth(t,i){return this._depth[t][i]}setDepth(t,i,n){this._depth[t][i]=n}isNull(){if(0==arguments.length){for(let t=0;t<2;t++)for(let i=0;i<3;i++)if(this._depth[t][i]!==iX.NULL_VALUE)return!1;return!0}if(1==arguments.length){let t=arguments[0];return this._depth[t][1]===iX.NULL_VALUE}if(2==arguments.length){let t=arguments[0],i=arguments[1];return this._depth[t][i]===iX.NULL_VALUE}}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let i=this._depth[t][1];this._depth[t][2]<i&&(i=this._depth[t][2]),i<0&&(i=0);for(let n=1;n<3;n++){let r=0;this._depth[t][n]>i&&(r=1),this._depth[t][n]=r}}}getDelta(t){return this._depth[t][im.RIGHT]-this._depth[t][im.LEFT]}getLocation(t,i){return this._depth[t][i]<=0?tG.EXTERIOR:tG.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1==arguments.length){let t=arguments[0];for(let i=0;i<2;i++)for(let n=1;n<3;n++){let r=t.getLocation(i,n);r!==tG.EXTERIOR&&r!==tG.INTERIOR||(this.isNull(i,n)?this._depth[i][n]=iX.depthAtLocation(r):this._depth[i][n]+=iX.depthAtLocation(r))}}else if(3==arguments.length){let t=arguments[0],i=arguments[1];arguments[2]===tG.INTERIOR&&this._depth[t][i]++}}}iX.NULL_VALUE=-1;class iZ{constructor(){iZ.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0==arguments.length)iZ.constructor_.call(this,10);else if(1==arguments.length){let t=arguments[0];this._data=Array(t).fill(null)}}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),H.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;let i=Math.max(t,2*this._data.length);this._data=tc.copyOf(this._data,i)}toArray(){let t=Array(this._size).fill(null);return H.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class iJ{static toIntArray(t){let i=Array(t.size()).fill(null);for(let n=0;n<i.length;n++)i[n]=t.get(n).intValue();return i}findChainEnd(t,i){let n=ir.quadrant(t[i],t[i+1]),r=i+1;for(;r<t.length&&ir.quadrant(t[r-1],t[r])===n;)r++;return r-1}OLDgetChainStartIndices(t){let i=0,n=new S;n.add(i);do{let r=this.findChainEnd(t,i);n.add(r),i=r}while(i<t.length-1)return iJ.toIntArray(n)}getChainStartIndices(t){let i=0,n=new iZ(Math.trunc(t.length/2));n.add(i);do{let r=this.findChainEnd(t,i);n.add(r),i=r}while(i<t.length-1)return n.toArray()}}class i0{constructor(){i0.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;let t=arguments[0];this.e=t,this.pts=t.getCoordinates();let i=new iJ;this.startIndex=i.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){let i=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return i>n?i:n}getMinX(t){let i=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return i<n?i:n}computeIntersectsForChain(){if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],i,i.startIndex[n],i.startIndex[n+1],r)}else if(6==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];if(i-t==1&&s-r==1)return o.addIntersections(this.e,t,n.e,r),null;if(!this.overlaps(t,i,n,r,s))return null;let a=Math.trunc((t+i)/2),l=Math.trunc((r+s)/2);t<a&&(r<l&&this.computeIntersectsForChain(t,a,n,r,l,o),l<s&&this.computeIntersectsForChain(t,a,n,l,s,o)),a<i&&(r<l&&this.computeIntersectsForChain(a,i,n,r,l,o),l<s&&this.computeIntersectsForChain(a,i,n,l,s,o))}}overlaps(t,i,n,r,s){return M.intersects(this.pts[t],this.pts[i],n.pts[r],n.pts[s])}getStartIndexes(){return this.startIndex}computeIntersects(t,i){for(let n=0;n<this.startIndex.length-1;n++)for(let r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,i)}}let i1=class t extends iL{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new iq(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new iX,this._depthDelta=0,1==arguments.length){let i=arguments[0];t.constructor_.call(this,i,null)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.pts=t,this._label=i}}static updateIM(){if(!(2==arguments.length&&arguments[1]instanceof tV&&arguments[0]instanceof iI))return super.updateIM.apply(this,arguments);{let t=arguments[0],i=arguments[1];i.setAtLeastIfValid(t.getLocation(0,im.ON),t.getLocation(1,im.ON),1),t.isArea()&&(i.setAtLeastIfValid(t.getLocation(0,im.LEFT),t.getLocation(1,im.LEFT),2),i.setAtLeastIfValid(t.getLocation(0,im.RIGHT),t.getLocation(1,im.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){let i=[,,].fill(null);return i[0]=this.pts[0],i[1]=this.pts[1],new t(i,iI.toLineLabel(this._label))}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(i){if(!(i instanceof t)||this.pts.length!==i.pts.length)return!1;let n=!0,r=!0,s=this.pts.length;for(let t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(i.pts[t])||(n=!1),this.pts[t].equals2D(i.pts[--s])||(r=!1),!n&&!r)return!1;return!0}getCoordinate(){if(0==arguments.length)return this.pts.length>0?this.pts[0]:null;if(1==arguments.length){let t=arguments[0];return this.pts[t]}}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,i,n){for(let r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,i,n,r)}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let i=0;i<this.pts.length;i++)i>0&&t.print(","),t.print(this.pts[i].x+" "+this.pts[i].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(i){t.updateIM(this._label,i)}isCollapsed(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let i=this.pts.length-1;i>=0;i--)t.print(this.pts[i]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new i0(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new M;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,i,n,r){let s=new m(t.getIntersection(r)),o=i,a=t.getEdgeDistance(n,r),l=o+1;if(l<this.pts.length){let t=this.pts[l];s.equals2D(t)&&(o=l,a=0)}this.eiList.add(s,o,a)}toString(){let t=new tr;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let i=0;i<this.pts.length;i++)i>0&&t.append(","),t.append(this.pts[i].x+" "+this.pts[i].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let i=0;i<this.pts.length;i++)if(!this.pts[i].equals2D(t.pts[i]))return!1;return!0}};class i2{constructor(){i2.constructor_.apply(this,arguments)}static constructor_(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new iW;let t=arguments[0];this._bufParams=t}static convertSegStrings(t){let i=new tS,n=new S;for(;t.hasNext();){let r=t.next(),s=i.createLineString(r.getCoordinates());n.add(s)}return i.buildGeometry(n)}static depthDelta(t){let i=t.getLocation(0,im.LEFT),n=t.getLocation(0,im.RIGHT);return i===tG.INTERIOR&&n===tG.EXTERIOR?1:i===tG.EXTERIOR&&n===tG.INTERIOR?-1:0}createEmptyResultGeometry(){return this._geomFact.createPolygon()}getNoder(t){if(null!==this._workingNoder)return this._workingNoder;let i=new ia,n=new tQ;return n.setPrecisionModel(t),i.setSegmentIntersector(new i$(n)),i}buffer(t,i){let n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();let r=new iG(t,i,new iB(n,this._bufParams)).getCurves();if(0>=r.size())return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new iD(new iK),this._graph.addEdges(this._edgeList.getEdges());let s=this.createSubgraphs(this._graph),o=new iU(this._geomFact);this.buildSubgraphs(s,o);let a=o.getPolygons();return 0>=a.size()?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}computeNodedEdges(t,i){let n=this.getNoder(i);n.computeNodes(t);for(let t=n.getNodedSubstrings().iterator();t.hasNext();){let i=t.next(),n=i.getCoordinates();if(2===n.length&&n[0].equals2D(n[1]))continue;let r=i.getData(),s=new i1(i.getCoordinates(),new iI(r));this.insertUniqueEdge(s)}}setNoder(t){this._workingNoder=t}setWorkingPrecisionModel(t){this._workingPrecisionModel=t}insertUniqueEdge(t){let i=this._edgeList.findEqualEdge(t);if(null!==i){let n=i.getLabel(),r=t.getLabel();i.isPointwiseEqual(t)||(r=new iI(t.getLabel())).flip(),n.merge(r);let s=i2.depthDelta(r),o=i.getDepthDelta()+s;i.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(i2.depthDelta(t.getLabel()))}buildSubgraphs(t,i){let n=new S;for(let r=t.iterator();r.hasNext();){let t=r.next(),s=t.getRightmostCoordinate(),o=new iQ(n).getDepth(s);t.computeDepth(o),t.findResultEdges(),n.add(t),i.add(t.getDirectedEdges(),t.getNodes())}}createSubgraphs(t){let i=new S;for(let n=t.getNodes().iterator();n.hasNext();){let t=n.next();if(!t.isVisited()){let n=new ib;n.create(t),i.add(n)}}return et.sort(i,et.reverseOrder()),i}}class i5{constructor(){i5.constructor_.apply(this,arguments)}static constructor_(){if(this._argGeom=null,this._distance=null,this._bufParams=new eO,this._resultGeometry=null,this._saveException=null,1==arguments.length){let t=arguments[0];this._argGeom=t}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._argGeom=t,this._bufParams=i}}static bufferOp(){if(2==arguments.length){let t=arguments[1];return new i5(arguments[0]).getResultGeometry(t)}if(3==arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof q&&"number"==typeof arguments[1]){let t=arguments[1],i=arguments[2],n=new i5(arguments[0]);return n.setQuadrantSegments(i),n.getResultGeometry(t)}if(arguments[2]instanceof eO&&arguments[0]instanceof q&&"number"==typeof arguments[1]){let t=arguments[1];return new i5(arguments[0],arguments[2]).getResultGeometry(t)}}else if(4==arguments.length){let t=arguments[1],i=arguments[2],n=arguments[3],r=new i5(arguments[0]);return r.setQuadrantSegments(i),r.setEndCapStyle(n),r.getResultGeometry(t)}}static precisionScaleFactor(t,i,n){let r=t.getEnvelopeInternal();return Math.pow(10,n-Math.trunc(Math.log(G.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(i>0?i:0))/Math.log(10)+1))}bufferFixedPrecision(t){let i=new eq(new ip(new ty(1)),t.getScale()),n=new i2(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(i),this._resultGeometry=n.buffer(this._argGeom,this._distance)}bufferReducedPrecision(){if(0==arguments.length){for(let t=i5.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof eX))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1==arguments.length){let t=arguments[0],i=new ty(i5.precisionScaleFactor(this._argGeom,this._distance,t));this.bufferFixedPrecision(i)}}bufferOriginalPrecision(){try{let t=new i2(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof A))throw t;this._saveException=t}}getResultGeometry(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}setEndCapStyle(t){this._bufParams.setEndCapStyle(t)}computeGeometry(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;let t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ty.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}setQuadrantSegments(t){this._bufParams.setQuadrantSegments(t)}}i5.CAP_ROUND=eO.CAP_ROUND,i5.CAP_BUTT=eO.CAP_FLAT,i5.CAP_FLAT=eO.CAP_FLAT,i5.CAP_SQUARE=eO.CAP_SQUARE,i5.MAX_PRECISION_DIGITS=12;class i4{constructor(){i4.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new tH,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof te&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1];i4.constructor_.call(this,t.getCoordinates(),i)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){let t=arguments[0],i=arguments[1];this._srcPts=t,this._isClosed=i4.isClosed(t),this._snapTolerance=i}}static isClosed(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}snapVertices(t,i){let n=this._isClosed?t.size()-1:t.size();for(let r=0;r<n;r++){let n=t.get(r),s=this.findSnapForVertex(n,i);null!==s&&(t.set(r,new m(s)),0===r&&this._isClosed&&t.set(t.size()-1,new m(s)))}}findSnapForVertex(t,i){for(let n=0;n<i.length&&!t.equals2D(i[n]);n++)if(t.distance(i[n])<this._snapTolerance)return i[n];return null}snapTo(t){let i=new L(this._srcPts);return this.snapVertices(i,t),this.snapSegments(i,t),i.toCoordinateArray()}snapSegments(t,i){if(0===i.length)return null;let n=i.length;i[0].equals2D(i[i.length-1])&&(n=i.length-1);for(let r=0;r<n;r++){let n=i[r],s=this.findSegmentIndexToSnap(n,t);s>=0&&t.add(s+1,new m(n),!1)}}findSegmentIndexToSnap(t,i){let n=o.MAX_VALUE,r=-1;for(let s=0;s<i.size()-1;s++){if(this._seg.p0=i.get(s),this._seg.p1=i.get(s+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return -1}let o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=s)}return r}setAllowSnappingToSourceVertices(t){this._allowSnappingToSourceVertices=t}}class i3{constructor(){i3.constructor_.apply(this,arguments)}static constructor_(){this._srcGeom=null;let t=arguments[0];this._srcGeom=t}static computeSizeBasedSnapTolerance(t){let i=t.getEnvelopeInternal();return Math.min(i.getHeight(),i.getWidth())*i3.SNAP_PRECISION_FACTOR}static computeOverlaySnapTolerance(){if(1==arguments.length){let t=arguments[0],i=i3.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ty.FIXED){let t=1/n.getScale()*2/1.415;t>i&&(i=t)}return i}if(2==arguments.length){let t=arguments[0],i=arguments[1];return Math.min(i3.computeOverlaySnapTolerance(t),i3.computeOverlaySnapTolerance(i))}}static snapToSelf(t,i,n){return new i3(t).snapToSelf(i,n)}static snap(t,i,n){let r=[,,].fill(null),s=new i3(t);r[0]=s.snapTo(i,n);let o=new i3(i);return r[1]=o.snapTo(r[0],n),r}computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10}snapTo(t,i){return new i6(i,this.extractTargetCoordinates(t)).transform(this._srcGeom)}snapToSelf(t,i){let n=new i6(t,this.extractTargetCoordinates(this._srcGeom),!0).transform(this._srcGeom),r=n;return i&&b(r,td)&&(r=i5.bufferOp(n,0)),r}extractTargetCoordinates(t){let i=new tA,n=t.getCoordinates();for(let t=0;t<n.length;t++)i.add(n[t]);return i.toArray([].fill(null))}computeMinimumSegmentLength(t){let i=o.MAX_VALUE;for(let n=0;n<t.length-1;n++){let r=t[n].distance(t[n+1]);r<i&&(i=r)}return i}}i3.SNAP_PRECISION_FACTOR=1e-9;class i6 extends t8{constructor(){super(),i6.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2==arguments.length){let t=arguments[0],i=arguments[1];this._snapTolerance=t,this._snapPts=i}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._snapTolerance=t,this._snapPts=i,this._isSelfSnap=n}}transformCoordinates(t,i){let n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)}snapLine(t,i){let n=new i4(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(i)}}class i8{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new s,this._commonSignExp=null}getCommon(){return o.longBitsToDouble(this._commonBits)}add(t){let i=o.doubleToLongBits(t);return this._isFirst?(this._commonBits=i,this._commonSignExp=i8.signExpBits(this._commonBits),this._isFirst=!1,null):i8.signExpBits(i)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):void(this._commonMantissaBitsCount=i8.numCommonMostSigMantissaBits(this._commonBits,i),this._commonBits=i8.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount)))}toString(){if(1==arguments.length){let t=arguments[0],i=o.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+s.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+i+" ]"}}getClass(){return i8}get interfaces_(){return[]}static getBit(t,i){let n=1<<i%32;return i<32?t.low&n?1:0:t.high&n?1:0}static signExpBits(t){return t.high>>>20}static zeroLowerBits(t,i){let n="low";if(i>32&&(t.low=0,i%=32,n="high"),i>0){let r=i<32?~((1<<i)-1):0;t[n]&=r}return t}static numCommonMostSigMantissaBits(t,i){let n=0;for(let r=52;r>=0;r--){if(i8.getBit(t,r)!==i8.getBit(i,r))return n;n++}return 52}}class i7{constructor(){i7.constructor_.apply(this,arguments)}static constructor_(){this._commonCoord=null,this._ccFilter=new i9}add(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}removeCommonBits(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;let i=new m(this._commonCoord);i.x=-i.x,i.y=-i.y;let n=new nt(i);return t.apply(n),t.geometryChanged(),t}addCommonBits(t){let i=new nt(this._commonCoord);t.apply(i),t.geometryChanged()}getCommonCoordinate(){return this._commonCoord}}class i9{constructor(){i9.constructor_.apply(this,arguments)}static constructor_(){this._commonBitsX=new i8,this._commonBitsY=new i8}filter(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)}getCommonCoordinate(){return new m(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}get interfaces_(){return[X]}}class nt{constructor(){nt.constructor_.apply(this,arguments)}static constructor_(){this.trans=null;let t=arguments[0];this.trans=t}filter(t,i){let n=t.getOrdinate(i,0)+this.trans.x,r=t.getOrdinate(i,1)+this.trans.y;t.setOrdinate(i,0,n),t.setOrdinate(i,1,r)}isGeometryChanged(){return!0}isDone(){return!1}get interfaces_(){return[F]}}i7.CommonCoordinateFilter=i9,i7.Translater=nt;class ne{constructor(){ne.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new S,this._resultLineList=new S;let t=arguments[0],i=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=i,this._ptLocator=n}collectLines(t){for(let i=this._op.getGraph().getEdgeEnds().iterator();i.hasNext();){let n=i.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}}labelIsolatedLine(t,i){let n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(i));t.getLabel().setLocation(i,n)}build(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList}collectLineEdge(t,i,n){let r=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!nw.isResultOfOp(r,i)||s.isCovered()||(n.add(s),t.setVisitedEdge(!0)))}findCoveredLineEdges(){for(let t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(let t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){let i=t.next(),n=i.getEdge();if(i.isLineEdge()&&!n.isCoveredSet()){let t=this._op.isCoveredByA(i.getCoordinate());n.setCovered(t)}}}labelIsolatedLines(t){for(let i=t.iterator();i.hasNext();){let t=i.next(),n=t.getLabel();t.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(t,0):this.labelIsolatedLine(t,1))}}buildLines(t){for(let t=this._lineEdgesList.iterator();t.hasNext();){let i=t.next(),n=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(n),i.setInResult(!0)}}collectBoundaryTouchEdge(t,i,n){let r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(c.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(nw.isResultOfOp(r,i)&&i===nw.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))}}class ni{constructor(){ni.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._resultPointList=new S;let t=arguments[0],i=arguments[1];this._op=t,this._geometryFactory=i}build(t){return this.extractNonCoveredResultNodes(t),this._resultPointList}extractNonCoveredResultNodes(t){for(let i=this._op.getGraph().getNodes().iterator();i.hasNext();){let n=i.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===nw.INTERSECTION)){let i=n.getLabel();nw.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}}filterCoveredNodeToPoint(t){let i=t.getCoordinate();if(!this._op.isCoveredByLA(i)){let t=this._geometryFactory.createPoint(i);this._resultPointList.add(t)}}}class nn{isInBoundary(t){}}class nr{isInBoundary(t){return t%2==1}get interfaces_(){return[nn]}}class ns{isInBoundary(t){return t>0}get interfaces_(){return[nn]}}class no{isInBoundary(t){return t>1}get interfaces_(){return[nn]}}class na{isInBoundary(t){return 1===t}get interfaces_(){return[nn]}}nn.Mod2BoundaryNodeRule=nr,nn.EndPointBoundaryNodeRule=ns,nn.MultiValentEndPointBoundaryNodeRule=no,nn.MonoValentEndPointBoundaryNodeRule=na,nn.MOD2_BOUNDARY_RULE=new nr,nn.ENDPOINT_BOUNDARY_RULE=new ns,nn.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new no,nn.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new na,nn.OGC_SFS_BOUNDARY_RULE=nn.MOD2_BOUNDARY_RULE;class nl{constructor(){nl.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=nn.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0==arguments.length);else if(1==arguments.length){let t=arguments[0];if(null===t)throw new r("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,i){return i.getEnvelopeInternal().intersects(t)?eI.locateInRing(t,i.getCoordinates()):tG.EXTERIOR}intersects(t,i){return this.locate(t,i)!==tG.EXTERIOR}updateLocationInfo(t){t===tG.INTERIOR&&(this._isIn=!0),t===tG.BOUNDARY&&this._numBoundaries++}computeLocation(t,i){if(i instanceof tC&&this.updateLocationInfo(this.locateOnPoint(t,i)),i instanceof te)this.updateLocationInfo(this.locateOnLineString(t,i));else if(i instanceof tE)this.updateLocationInfo(this.locateInPolygon(t,i));else if(i instanceof tv)for(let n=0;n<i.getNumGeometries();n++){let r=i.getGeometryN(n);this.updateLocationInfo(this.locateOnLineString(t,r))}else if(i instanceof tg)for(let n=0;n<i.getNumGeometries();n++){let r=i.getGeometryN(n);this.updateLocationInfo(this.locateInPolygon(t,r))}else if(i instanceof tu){let n=new eF(i);for(;n.hasNext();){let r=n.next();r!==i&&this.computeLocation(t,r)}}}locateOnPoint(t,i){return i.getCoordinate().equals2D(t)?tG.INTERIOR:tG.EXTERIOR}locateOnLineString(t,i){if(!i.getEnvelopeInternal().intersects(t))return tG.EXTERIOR;let n=i.getCoordinateSequence();return!i.isClosed()&&(t.equals(n.getCoordinate(0))||t.equals(n.getCoordinate(n.size()-1)))?tG.BOUNDARY:eI.isOnLine(t,n)?tG.INTERIOR:tG.EXTERIOR}locateInPolygon(t,i){if(i.isEmpty())return tG.EXTERIOR;let n=i.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===tG.EXTERIOR)return tG.EXTERIOR;if(r===tG.BOUNDARY)return tG.BOUNDARY;for(let n=0;n<i.getNumInteriorRing();n++){let r=i.getInteriorRingN(n),s=this.locateInPolygonRing(t,r);if(s===tG.INTERIOR)return tG.EXTERIOR;if(s===tG.BOUNDARY)return tG.BOUNDARY}return tG.INTERIOR}locate(t,i){return i.isEmpty()?tG.EXTERIOR:i instanceof te?this.locateOnLineString(t,i):i instanceof tE?this.locateInPolygon(t,i):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,i),this._boundaryRule.isInBoundary(this._numBoundaries)?tG.BOUNDARY:this._numBoundaries>0||this._isIn?tG.INTERIOR:tG.EXTERIOR)}}class nA{constructor(){nA.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._data=null;let t=arguments[0],i=arguments[1];this._pts=t,this._data=i}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:eK.octant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}getData(){return this._data}toString(){return tN.toLineString(new ts(this._pts))}get interfaces_(){return[ej]}}class nh{constructor(){nh.constructor_.apply(this,arguments)}static constructor_(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._keepIntersections=!0,this._isInteriorIntersectionsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new S,this._intersectionCount=0;let t=arguments[0];this._li=t,this._interiorIntersection=null}static createAllIntersectionsFinder(t){let i=new nh(t);return i.setFindAllIntersections(!0),i}static isInteriorVertexIntersection(){if(4==arguments.length){let t=arguments[1];return(!arguments[2]||!arguments[3])&&!!arguments[0].equals2D(t)}if(8==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5],a=arguments[6],l=arguments[7];return!!nh.isInteriorVertexIntersection(t,n,s,a)||!!nh.isInteriorVertexIntersection(t,r,s,l)||!!nh.isInteriorVertexIntersection(i,n,o,a)||!!nh.isInteriorVertexIntersection(i,r,o,l)}}static createInteriorIntersectionCounter(t){let i=new nh(t);return i.setInteriorIntersectionsOnly(!0),i.setFindAllIntersections(!0),i.setKeepIntersections(!1),i}static createIntersectionCounter(t){let i=new nh(t);return i.setFindAllIntersections(!0),i.setKeepIntersections(!1),i}static isEndSegment(t,i){return 0===i||i>=t.size()-2}static createAnyIntersectionFinder(t){return new nh(t)}static createInteriorIntersectionsFinder(t){let i=new nh(t);return i.setFindAllIntersections(!0),i.setInteriorIntersectionsOnly(!0),i}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(t){this._findAllIntersections=t}setKeepIntersections(t){this._keepIntersections=t}getIntersection(){return this._interiorIntersection}processIntersections(t,i,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;let s=t===n;if(s&&i===r||this._isCheckEndSegmentsOnly&&!(nh.isEndSegment(t,i)||nh.isEndSegment(n,r)))return null;let o=t.getCoordinate(i),a=t.getCoordinate(i+1),l=n.getCoordinate(r),A=n.getCoordinate(r+1),h=0===i,c=i+2===t.size(),u=0===r,d=r+2===n.size();this._li.computeIntersection(o,a,l,A);let g=this._li.hasIntersection()&&this._li.isInteriorIntersection(),f=!1;this._isInteriorIntersectionsOnly||(f=!(s&&1>=Math.abs(r-i))&&nh.isInteriorVertexIntersection(o,a,l,A,h,c,u,d)),(g||f)&&(this._intSegments=[,,,,].fill(null),this._intSegments[0]=o,this._intSegments[1]=a,this._intSegments[2]=l,this._intSegments[3]=A,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}setInteriorIntersectionsOnly(t){this._isInteriorIntersectionsOnly=t}setCheckEndSegmentsOnly(t){this._isCheckEndSegmentsOnly=t}getIntersectionSegments(){return this._intSegments}get interfaces_(){return[id]}}class nc{constructor(){nc.constructor_.apply(this,arguments)}static constructor_(){this._li=new tQ,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;let t=arguments[0];this._segStrings=t}static computeIntersections(t){let i=new nc(t);return i.setFindAllIntersections(!0),i.isValid(),i.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(t){this._findAllIntersections=t}checkInteriorIntersections(){this._isValid=!0,this._segInt=new nh(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);let t=new ia;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new eX(this.getErrorMessage(),this._segInt.getIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";let t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+tN.toLineString(t[0],t[1])+" and "+tN.toLineString(t[2],t[3])}execute(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}getIntersections(){return this._segInt.getIntersections()}}class nu{constructor(){nu.constructor_.apply(this,arguments)}static constructor_(){this._nv=null;let t=arguments[0];this._nv=new nc(nu.toSegmentStrings(t))}static toSegmentStrings(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next();i.add(new nA(t.getCoordinates(),t))}return i}static checkValid(t){new nu(t).checkValid()}checkValid(){this._nv.checkValid()}}class nd{}class ng{constructor(){ng.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;let t=arguments[0],i=arguments[1],n=arguments[2];this._li=t,this._includeProper=i,this._recordIsolated=n}static isAdjacentSegments(t,i){return 1===Math.abs(t-i)}isTrivialIntersection(t,i,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ng.isAdjacentSegments(i,r))return!0;if(t.isClosed()){let n=t.getNumPoints()-1;if(0===i&&r===n||0===r&&i===n)return!0}}return!1}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,i){for(let n=i.iterator();n.hasNext();){let i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,i){return null!==i&&(!!this.isBoundaryPointInternal(t,i[0])||!!this.isBoundaryPointInternal(t,i[1]))}setBoundaryNodes(t,i){this._bdyNodes=[,,].fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=i}addIntersections(t,i,n,r){if(t===n&&i===r)return null;this.numTests++;let s=t.getCoordinates()[i],o=t.getCoordinates()[i+1],a=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this._li.computeIntersection(s,o,a,l),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,i,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,i,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}}class nf{constructor(){nf.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;let t=arguments[0],i=arguments[1];this.mce=t,this.chainIndex=i}computeIntersections(t,i){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,i)}}class np{constructor(){np.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2==arguments.length){let t=arguments[0],i=arguments[1];this._eventType=np.DELETE,this._xValue=t,this._insertEvent=i}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._eventType=np.INSERT,this._label=t,this._xValue=i,this._obj=n}}getObject(){return this._obj}getDeleteEventIndex(){return this._deleteEventIndex}isDelete(){return this._eventType===np.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}compareTo(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:+(this._eventType>t._eventType)}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===np.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}get interfaces_(){return[a]}}np.INSERT=1,np.DELETE=2;class nm extends nd{constructor(){super(),nm.constructor_.apply(this,arguments)}static constructor_(){this.events=new S,this.nOverlaps=null}prepareEvents(){et.sort(this.events);for(let t=0;t<this.events.size();t++){let i=this.events.get(t);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1==arguments.length){let t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let i=0;i<this.events.size();i++){let n=this.events.get(i);if(n.isInsert()&&this.processOverlaps(i,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3==arguments.length){if(arguments[2]instanceof ng&&b(arguments[0],E)&&b(arguments[1],E)){let t=arguments[0],i=arguments[1],n=arguments[2];this.addEdges(t,t),this.addEdges(i,i),this.computeIntersections(n)}else if("boolean"==typeof arguments[2]&&b(arguments[0],E)&&arguments[1]instanceof ng){let t=arguments[0],i=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(i)}}}addEdge(t,i){let n=t.getMonotoneChainEdge(),r=n.getStartIndexes();for(let t=0;t<r.length-1;t++){let r=new nf(n,t),s=new np(i,n.getMinX(t),r);this.events.add(s),this.events.add(new np(n.getMaxX(t),s))}}processOverlaps(t,i,n,r){let s=n.getObject();for(let o=t;o<i;o++){let t=this.events.get(o);if(t.isInsert()){let i=t.getObject();n.isSameLabel(t)||(s.computeIntersections(i,r),this.nOverlaps++)}}}addEdges(){if(1==arguments.length)for(let t=arguments[0].iterator();t.hasNext();){let i=t.next();this.addEdge(i,i)}else if(2==arguments.length){let t=arguments[1];for(let i=arguments[0].iterator();i.hasNext();){let n=i.next();this.addEdge(n,t)}}}}class n_ extends iD{constructor(){super(),n_.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new t_,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new nl,2==arguments.length){let t=arguments[0],i=arguments[1];n_.constructor_.call(this,t,i,nn.OGC_SFS_BOUNDARY_RULE)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._argIndex=t,this._parentGeom=i,this._boundaryNodeRule=n,null!==i&&this.add(i)}}static determineBoundary(t,i){return t.isInBoundary(i)?tG.BOUNDARY:tG.INTERIOR}insertBoundaryPoint(t,i){let n=this._nodes.addNode(i).getLabel(),r=1,s=tG.NONE;n.getLocation(t,im.ON)===tG.BOUNDARY&&r++;let o=n_.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,o)}computeSelfNodes(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return this.computeSelfNodes(t,i,!1)}if(3==arguments.length){let t=arguments[1],i=arguments[2],n=new ng(arguments[0],!0,!1);n.setIsDoneIfProperInt(i);let r=this.createEdgeSetIntersector(),s=this._parentGeom instanceof ti||this._parentGeom instanceof tE||this._parentGeom instanceof tg;return r.computeIntersections(this._edges,n,t||!s),this.addSelfIntersectionNodes(this._argIndex),n}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),tG.EXTERIOR,tG.INTERIOR);for(let i=0;i<t.getNumInteriorRing();i++){let n=t.getInteriorRingN(i);this.addPolygonRing(n,tG.INTERIOR,tG.EXTERIOR)}}addEdge(t){this.insertEdge(t);let i=t.getCoordinates();this.insertPoint(this._argIndex,i[0],tG.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],tG.BOUNDARY)}addLineString(t){let i=$.removeRepeatedPoints(t.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;let n=new i1(i,new iI(this._argIndex,tG.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),c.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){let t=this.getBoundaryNodes(),i=Array(t.size()).fill(null),n=0;for(let r=t.iterator();r.hasNext();){let t=r.next();i[n++]=t.getCoordinate().copy()}return i}addSelfIntersectionNodes(t){for(let i=this._edges.iterator();i.hasNext();){let n=i.next(),r=n.getLabel().getLocation(t);for(let i=n.eiList.iterator();i.hasNext();){let n=i.next();this.addSelfIntersectionNode(t,n.coord,r)}}}add(){if(!(1==arguments.length&&arguments[0]instanceof q))return super.add.apply(this,arguments);{let t=arguments[0];if(t.isEmpty())return null;if(t instanceof tg&&(this._useBoundaryDeterminationRule=!1),t instanceof tE)this.addPolygon(t);else if(t instanceof te)this.addLineString(t);else if(t instanceof tC)this.addPoint(t);else if(t instanceof tB)this.addCollection(t);else if(t instanceof tv)this.addCollection(t);else if(t instanceof tg)this.addCollection(t);else{if(!(t instanceof tu))throw new j(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);this.add(n)}}locate(t){return b(this._parentGeom,td)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new eE(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1==arguments.length&&arguments[0]instanceof te){let t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}computeSplitEdges(t){for(let i=this._edges.iterator();i.hasNext();)i.next().eiList.addSplitEdges(t)}computeEdgeIntersections(t,i,n){let r=new ng(i,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof tC){let t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,tG.INTERIOR)}else if(arguments[0]instanceof m){let t=arguments[0];this.insertPoint(this._argIndex,t,tG.INTERIOR)}}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,i,n){if(this.isBoundaryNode(t,i))return null;n===tG.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,i):this.insertPoint(t,i,n)}addPolygonRing(t,i,n){if(t.isEmpty())return null;let r=$.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;let s=i,o=n;U.isCCW(r)&&(s=n,o=i);let a=new i1(r,new iI(this._argIndex,tG.BOUNDARY,s,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],tG.BOUNDARY)}insertPoint(t,i,n){let r=this._nodes.addNode(i),s=r.getLabel();null===s?r._label=new iI(t,n):s.setLocation(t,n)}createEdgeSetIntersector(){return new nm}}class ny{constructor(){ny.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new tQ,this._resultPrecisionModel=null,this._arg=null,1==arguments.length){let t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=[,].fill(null),this._arg[0]=new n_(0,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];ny.constructor_.call(this,t,i,nn.OGC_SFS_BOUNDARY_RULE)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];t.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=[,,].fill(null),this._arg[0]=new n_(0,t,n),this._arg[1]=new n_(1,i,n)}}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}getArgGeometry(t){return this._arg[t].getGeometry()}}class nw extends ny{constructor(){super(),nw.constructor_.apply(this,arguments)}static constructor_(){this._ptLocator=new nl,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new iW,this._resultPolyList=new S,this._resultLineList=new S,this._resultPointList=new S;let t=arguments[0],i=arguments[1];ny.constructor_.call(this,t,i),this._graph=new iD(new iK),this._geomFact=t.getFactory()}static overlayOp(t,i,n){return new nw(t,i).getResultGeometry(n)}static union(t,i){if(t.isEmpty()||i.isEmpty()){if(t.isEmpty()&&i.isEmpty())return nw.createEmptyResult(nw.UNION,t,i,t.getFactory());if(t.isEmpty())return i.copy();if(i.isEmpty())return t.copy()}if(t.isGeometryCollection()||i.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return nb.overlayOp(t,i,nw.UNION)}static intersection(t,i){return t.isEmpty()||i.isEmpty()?nw.createEmptyResult(nw.INTERSECTION,t,i,t.getFactory()):t.isGeometryCollection()?t0.map(t,new class{get interfaces_(){return[MapOp]}map(t){return nw.intersection(t,i)}}):nb.overlayOp(t,i,nw.INTERSECTION)}static symDifference(t,i){if(t.isEmpty()||i.isEmpty()){if(t.isEmpty()&&i.isEmpty())return nw.createEmptyResult(nw.SYMDIFFERENCE,t,i,t.getFactory());if(t.isEmpty())return i.copy();if(i.isEmpty())return t.copy()}if(t.isGeometryCollection()||i.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return nb.overlayOp(t,i,nw.SYMDIFFERENCE)}static resultDimension(t,i,n){let r=i.getDimension(),s=n.getDimension(),o=-1;switch(t){case nw.INTERSECTION:o=Math.min(r,s);break;case nw.UNION:o=Math.max(r,s);break;case nw.DIFFERENCE:o=r;break;case nw.SYMDIFFERENCE:o=Math.max(r,s)}return o}static createEmptyResult(t,i,n,r){let s=nw.resultDimension(t,i,n);return r.createEmpty(s)}static difference(t,i){if(t.isEmpty())return nw.createEmptyResult(nw.DIFFERENCE,t,i,t.getFactory());if(i.isEmpty())return t.copy();if(t.isGeometryCollection()||i.isGeometryCollection())throw new r("This method does not support GeometryCollection arguments");return nb.overlayOp(t,i,nw.DIFFERENCE)}static isResultOfOp(){if(2==arguments.length){let t=arguments[0],i=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return nw.isResultOfOp(n,r,i)}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];switch(t===tG.BOUNDARY&&(t=tG.INTERIOR),i===tG.BOUNDARY&&(i=tG.INTERIOR),n){case nw.INTERSECTION:return t===tG.INTERIOR&&i===tG.INTERIOR;case nw.UNION:return t===tG.INTERIOR||i===tG.INTERIOR;case nw.DIFFERENCE:return t===tG.INTERIOR&&i!==tG.INTERIOR;case nw.SYMDIFFERENCE:return t===tG.INTERIOR&&i!==tG.INTERIOR||t!==tG.INTERIOR&&i===tG.INTERIOR}return!1}}insertUniqueEdge(t){let i=this._edgeList.findEqualEdge(t);if(null!==i){let n=i.getLabel(),r=t.getLabel();i.isPointwiseEqual(t)||(r=new iI(t.getLabel())).flip();let s=i.getDepth();s.isNull()&&s.add(n),s.add(r),n.merge(r)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(let t=this._graph.getEdgeEnds().iterator();t.hasNext();){let i=t.next(),n=i.getSym();i.isInResult()&&n.isInResult()&&(i.setInResult(!1),n.setInResult(!1))}}mergeSymLabels(){for(let t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()}computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);let i=new S;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),nu.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();let n=new iU(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();let r=new ne(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);let s=new ni(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}findResultAreaEdges(t){for(let i=this._graph.getEdgeEnds().iterator();i.hasNext();){let n=i.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&nw.isResultOfOp(r.getLocation(0,im.RIGHT),r.getLocation(1,im.RIGHT),t)&&n.setInResult(!0)}}computeLabelsFromDepths(){for(let t=this._edgeList.iterator();t.hasNext();){let i=t.next(),n=i.getLabel(),r=i.getDepth();if(!r.isNull()){r.normalize();for(let t=0;t<2;t++)n.isNull(t)||!n.isArea()||r.isNull(t)||(0===r.getDelta(t)?n.toLine(t):(c.isTrue(!r.isNull(t,im.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(t,im.LEFT,r.getLocation(t,im.LEFT)),c.isTrue(!r.isNull(t,im.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(t,im.RIGHT,r.getLocation(t,im.RIGHT))))}}}isCoveredByA(t){return!!this.isCovered(t,this._resultPolyList)}isCoveredByLA(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)}computeGeometry(t,i,n,r){let s=new S;return s.addAll(t),s.addAll(i),s.addAll(n),s.isEmpty()?nw.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)}isCovered(t,i){for(let n=i.iterator();n.hasNext();){let i=n.next();if(this._ptLocator.locate(t,i)!==tG.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){let t=new S;for(let i=this._edgeList.iterator();i.hasNext();){let n=i.next();n.isCollapsed()&&(i.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)}updateNodeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){let i=t.next(),n=i.getEdges().getLabel();i.getLabel().merge(n)}}getResultGeometry(t){return this.computeOverlay(t),this._resultGeom}insertUniqueEdges(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this.insertUniqueEdge(t)}}labelIncompleteNode(t,i){let n=this._ptLocator.locate(t.getCoordinate(),this._arg[i].getGeometry());t.getLabel().setLocation(i,n)}copyPoints(t){for(let i=this._arg[t].getNodeIterator();i.hasNext();){let n=i.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}}computeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){let i=t.next(),n=i.getLabel();i.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(i,0):this.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(n)}}}nw.INTERSECTION=1,nw.UNION=2,nw.DIFFERENCE=3,nw.SYMDIFFERENCE=4;class nv{constructor(){nv.constructor_.apply(this,arguments)}static constructor_(){this._geom=[,,].fill(null),this._snapTolerance=null,this._cbr=null;let t=arguments[0],i=arguments[1];this._geom[0]=t,this._geom[1]=i,this.computeSnapTolerance()}static overlayOp(t,i,n){return new nv(t,i).getResultGeometry(n)}static union(t,i){return nv.overlayOp(t,i,nw.UNION)}static intersection(t,i){return nv.overlayOp(t,i,nw.INTERSECTION)}static symDifference(t,i){return nv.overlayOp(t,i,nw.SYMDIFFERENCE)}static difference(t,i){return nv.overlayOp(t,i,nw.DIFFERENCE)}selfSnap(t){return new i3(t).snapTo(t,this._snapTolerance)}removeCommonBits(t){this._cbr=new i7,this._cbr.add(t[0]),this._cbr.add(t[1]);let i=[,,].fill(null);return i[0]=this._cbr.removeCommonBits(t[0].copy()),i[1]=this._cbr.removeCommonBits(t[1].copy()),i}prepareResult(t){return this._cbr.addCommonBits(t),t}getResultGeometry(t){let i=this.snap(this._geom),n=nw.overlayOp(i[0],i[1],t);return this.prepareResult(n)}checkValid(t){t.isValid()||H.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=i3.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(t){let i=this.removeCommonBits(t);return i3.snap(i[0],i[1],this._snapTolerance)}}class nb{constructor(){nb.constructor_.apply(this,arguments)}static constructor_(){this._geom=[,,].fill(null);let t=arguments[0],i=arguments[1];this._geom[0]=t,this._geom[1]=i}static overlayOp(t,i,n){return new nb(t,i).getResultGeometry(n)}static union(t,i){return nb.overlayOp(t,i,nw.UNION)}static intersection(t,i){return nb.overlayOp(t,i,nw.INTERSECTION)}static symDifference(t,i){return nb.overlayOp(t,i,nw.SYMDIFFERENCE)}static difference(t,i){return nb.overlayOp(t,i,nw.DIFFERENCE)}getResultGeometry(t){let i=null,n=!1,r=null;try{i=nw.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof A))throw t;r=t}if(!n)try{i=nv.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof A?r:t}return i}}class nC{static union(t,i){if(t.isEmpty()||i.isEmpty()){if(t.isEmpty()&&i.isEmpty())return nw.createEmptyResult(nw.UNION,t,i,t.getFactory());if(t.isEmpty())return i.copy();if(i.isEmpty())return t.copy()}return q.checkNotGeometryCollection(t),q.checkNotGeometryCollection(i),nb.overlayOp(t,i,nw.UNION)}}class nx{static diagonalSize(t){if(t.isNull())return 0;let i=t.getWidth(),n=t.getHeight();return Math.sqrt(i*i+n*n)}measure(t,i){let n=ed.distance(t,i,nx.DENSIFY_FRACTION),r=new M(t.getEnvelopeInternal());return r.expandToInclude(i.getEnvelopeInternal()),1-n/nx.diagonalSize(r)}get interfaces_(){return[eR]}}nx.DENSIFY_FRACTION=.25;var nE=Object.freeze({__proto__:null,AreaSimilarityMeasure:class{measure(t,i){return nw.intersection(t,i).getArea()/nC.union(t,i).getArea()}get interfaces_(){return[eR]}},HausdorffSimilarityMeasure:nx,SimilarityMeasure:eR,SimilarityMeasureCombiner:class{static combine(t,i){return Math.min(t,i)}}});class nB{constructor(){nB.constructor_.apply(this,arguments)}static constructor_(){this._areaBasePt=null,this._triangleCent3=new m,this._areasum2=0,this._cg3=new m,this._lineCentSum=new m,this._totalLength=0,this._ptCount=0,this._ptCentSum=new m;let t=arguments[0];this._areaBasePt=null,this.add(t)}static centroid3(t,i,n,r){return r.x=t.x+i.x+n.x,r.y=t.y+i.y+n.y,null}static getCentroid(t){return new nB(t).getCentroid()}static area2(t,i,n){return(i.x-t.x)*(n.y-t.y)-(n.x-t.x)*(i.y-t.y)}setAreaBasePoint(t){this._areaBasePt=t}addPoint(t){this._ptCount+=1,this._ptCentSum.x+=t.x,this._ptCentSum.y+=t.y}addLineSegments(t){let i=0;for(let n=0;n<t.length-1;n++){let r=t[n].distance(t[n+1]);if(0===r)continue;i+=r;let s=(t[n].x+t[n+1].x)/2;this._lineCentSum.x+=r*s;let o=(t[n].y+t[n+1].y)/2;this._lineCentSum.y+=r*o}this._totalLength+=i,0===i&&t.length>0&&this.addPoint(t[0])}addHole(t){let i=U.isCCW(t);for(let n=0;n<t.length-1;n++)this.addTriangle(this._areaBasePt,t[n],t[n+1],i);this.addLineSegments(t)}getCentroid(){let t=new m;if(Math.abs(this._areasum2)>0)t.x=this._cg3.x/3/this._areasum2,t.y=this._cg3.y/3/this._areasum2;else if(this._totalLength>0)t.x=this._lineCentSum.x/this._totalLength,t.y=this._lineCentSum.y/this._totalLength;else{if(!(this._ptCount>0))return null;t.x=this._ptCentSum.x/this._ptCount,t.y=this._ptCentSum.y/this._ptCount}return t}add(){if(arguments[0]instanceof tE){let t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(let i=0;i<t.getNumInteriorRing();i++)this.addHole(t.getInteriorRingN(i).getCoordinates())}else if(arguments[0]instanceof q){let t=arguments[0];if(t.isEmpty())return null;if(t instanceof tC)this.addPoint(t.getCoordinate());else if(t instanceof te)this.addLineSegments(t.getCoordinates());else if(t instanceof tE)this.add(t);else if(t instanceof tu)for(let i=0;i<t.getNumGeometries();i++)this.add(t.getGeometryN(i))}}addShell(t){t.length>0&&this.setAreaBasePoint(t[0]);let i=!U.isCCW(t);for(let n=0;n<t.length-1;n++)this.addTriangle(this._areaBasePt,t[n],t[n+1],i);this.addLineSegments(t)}addTriangle(t,i,n,r){let s=r?1:-1;nB.centroid3(t,i,n,this._triangleCent3);let o=nB.area2(t,i,n);this._cg3.x+=s*o*this._triangleCent3.x,this._cg3.y+=s*o*this._triangleCent3.y,this._areasum2+=s*o}}class nS{constructor(){nS.constructor_.apply(this,arguments)}static constructor_(){this._coordSet=new tp,this._list=new S}static filterCoordinates(t){let i=new nS;for(let n=0;n<t.length;n++)i.filter(t[n]);return i.getCoordinates()}filter(t){this._coordSet.add(t)&&this._list.add(t)}getCoordinates(){let t=Array(this._list.size()).fill(null);return this._list.toArray(t)}get interfaces_(){return[X]}}class nI{constructor(){nI.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFactory=null,this._inputPts=null,1==arguments.length){let t=arguments[0];nI.constructor_.call(this,nI.extractCoordinates(t),t.getFactory())}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._inputPts=nS.filterCoordinates(t),this._geomFactory=i}}static extractCoordinates(t){let i=new nS;return t.apply(i),i.getCoordinates()}lineOrPolygon(t){if(3===(t=this.cleanRing(t)).length)return this._geomFactory.createLineString([t[0],t[1]]);let i=this._geomFactory.createLinearRing(t);return this._geomFactory.createPolygon(i)}cleanRing(t){c.equals(t[0],t[t.length-1]);let i=new S,n=null;for(let r=0;r<=t.length-2;r++){let s=t[r],o=t[r+1];s.equals(o)||null!==n&&this.isBetween(n,s,o)||(i.add(s),n=s)}i.add(t[t.length-1]);let r=Array(i.size()).fill(null);return i.toArray(r)}isBetween(t,i,n){return 0===U.index(t,i,n)&&(t.x!==n.x&&(!!(t.x<=i.x)&&!!(i.x<=n.x)||!!(n.x<=i.x)&&!!(i.x<=t.x))||t.y!==n.y&&(!!(t.y<=i.y)&&!!(i.y<=n.y)||!!(n.y<=i.y)&&!!(i.y<=t.y))||!1)}reduce(t){let i=this.computeOctRing(t);if(null===i)return t;let n=new tA;for(let t=0;t<i.length;t++)n.add(i[t]);for(let r=0;r<t.length;r++)eI.isInRing(t[r],i)||n.add(t[r]);let r=$.toCoordinateArray(n);return r.length<3?this.padArray3(r):r}getConvexHull(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);let t=this._inputPts;this._inputPts.length>50&&(t=this.reduce(this._inputPts));let i=this.preSort(t),n=this.grahamScan(i),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)}padArray3(t){let i=[,,,].fill(null);for(let n=0;n<i.length;n++)n<t.length?i[n]=t[n]:i[n]=t[0];return i}computeOctPts(t){let i=Array(8).fill(null);for(let n=0;n<i.length;n++)i[n]=t[0];for(let n=1;n<t.length;n++)t[n].x<i[0].x&&(i[0]=t[n]),t[n].x-t[n].y<i[1].x-i[1].y&&(i[1]=t[n]),t[n].y>i[2].y&&(i[2]=t[n]),t[n].x+t[n].y>i[3].x+i[3].y&&(i[3]=t[n]),t[n].x>i[4].x&&(i[4]=t[n]),t[n].x-t[n].y>i[5].x-i[5].y&&(i[5]=t[n]),t[n].y<i[6].y&&(i[6]=t[n]),t[n].x+t[n].y<i[7].x+i[7].y&&(i[7]=t[n]);return i}toCoordinateArray(t){let i=Array(t.size()).fill(null);for(let n=0;n<t.size();n++){let r=t.get(n);i[n]=r}return i}grahamScan(t){let i=null,n=new iy;n.push(t[0]),n.push(t[1]),n.push(t[2]);for(let r=3;r<t.length;r++){for(i=n.pop();!n.empty()&&U.index(n.peek(),i,t[r])>0;)i=n.pop();n.push(i),n.push(t[r])}return n.push(t[0]),n}preSort(t){let i=null;for(let n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(i=t[0],t[0]=t[n],t[n]=i);return tc.sort(t,1,t.length,new nL(t[0])),t}computeOctRing(t){let i=this.computeOctPts(t),n=new L;return n.add(i,!1),3>n.size()?null:(n.closeRing(),n.toCoordinateArray())}}class nL{constructor(){nL.constructor_.apply(this,arguments)}static constructor_(){this._origin=null;let t=arguments[0];this._origin=t}static polarCompare(t,i,n){let r=i.x-t.x,s=i.y-t.y,o=n.x-t.x,a=n.y-t.y,l=U.index(t,i,n);if(l===U.COUNTERCLOCKWISE)return 1;if(l===U.CLOCKWISE)return -1;let A=r*r+s*s,h=o*o+a*a;return A<h?-1:+(A>h)}compare(t,i){return nL.polarCompare(this._origin,t,i)}get interfaces_(){return[d]}}nI.RadialComparator=nL;class nF{constructor(){nF.constructor_.apply(this,arguments)}static constructor_(){this._interiorPoint=null,this._maxWidth=-1;let t=arguments[0];this.process(t)}static avg(t,i){return(t+i)/2}static getInteriorPoint(t){return new nF(t).getInteriorPoint()}process(t){if(t.isEmpty())return null;if(t instanceof tE)this.processPolygon(t);else if(t instanceof tu)for(let i=0;i<t.getNumGeometries();i++)this.process(t.getGeometryN(i))}getInteriorPoint(){return this._interiorPoint}processPolygon(t){let i=new nM(t);i.process();let n=i.getWidth();n>this._maxWidth&&(this._maxWidth=n,this._interiorPoint=i.getInteriorPoint())}}class nM{constructor(){nM.constructor_.apply(this,arguments)}static constructor_(){this._polygon=null,this._interiorPointY=null,this._interiorSectionWidth=0,this._interiorPoint=null;let t=arguments[0];this._polygon=t,this._interiorPointY=nR.getScanLineY(t)}static isEdgeCrossingCounted(t,i,n){let r=t.getY(),s=i.getY();return r!==s&&!(r===n&&s<n)&&!(s===n&&r<n)}static intersectsHorizontalLine(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return!(i<t.getMinY())&&!(i>t.getMaxY())}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return!(t.getY()>n&&i.getY()>n)&&!(t.getY()<n&&i.getY()<n)}}static intersection(t,i,n){let r=t.getX(),s=i.getX();if(r===s)return r;let o=(i.getY()-t.getY())/(s-r);return r+(n-t.getY())/o}findBestMidpoint(t){if(0===t.size())return null;c.isTrue(0==t.size()%2,"Interior Point robustness failure: odd number of scanline crossings"),t.sort(new nT);for(let i=0;i<t.size();i+=2){let n=t.get(i),r=t.get(i+1),s=r-n;if(s>this._interiorSectionWidth){this._interiorSectionWidth=s;let t=nF.avg(n,r);this._interiorPoint=new m(t,this._interiorPointY)}}}getWidth(){return this._interiorSectionWidth}getInteriorPoint(){return this._interiorPoint}addEdgeCrossing(t,i,n,r){if(!nM.intersectsHorizontalLine(t,i,n)||!nM.isEdgeCrossingCounted(t,i,n))return null;let s=nM.intersection(t,i,n);r.add(s)}process(){if(this._polygon.isEmpty())return null;this._interiorPoint=new m(this._polygon.getCoordinate());let t=new S;this.scanRing(this._polygon.getExteriorRing(),t);for(let i=0;i<this._polygon.getNumInteriorRing();i++)this.scanRing(this._polygon.getInteriorRingN(i),t);this.findBestMidpoint(t)}scanRing(t,i){if(!nM.intersectsHorizontalLine(t.getEnvelopeInternal(),this._interiorPointY))return null;let n=t.getCoordinateSequence();for(let t=1;t<n.size();t++){let r=n.getCoordinate(t-1),s=n.getCoordinate(t);this.addEdgeCrossing(r,s,this._interiorPointY,i)}}}class nT{compare(t,i){return t<i?-1:+(t>i)}get interfaces_(){return[d]}}nM.DoubleComparator=nT;class nR{constructor(){nR.constructor_.apply(this,arguments)}static constructor_(){this._poly=null,this._centreY=null,this._hiY=o.MAX_VALUE,this._loY=-o.MAX_VALUE;let t=arguments[0];this._poly=t,this._hiY=t.getEnvelopeInternal().getMaxY(),this._loY=t.getEnvelopeInternal().getMinY(),this._centreY=nF.avg(this._loY,this._hiY)}static getScanLineY(t){return new nR(t).getScanLineY()}process(t){let i=t.getCoordinateSequence();for(let t=0;t<i.size();t++){let n=i.getY(t);this.updateInterval(n)}}getScanLineY(){this.process(this._poly.getExteriorRing());for(let t=0;t<this._poly.getNumInteriorRing();t++)this.process(this._poly.getInteriorRingN(t));return nF.avg(this._hiY,this._loY)}updateInterval(t){t<=this._centreY?t>this._loY&&(this._loY=t):t>this._centreY&&t<this._hiY&&(this._hiY=t)}}nF.InteriorPointPolygon=nM,nF.ScanLineYOrdinateFinder=nR;class nO{constructor(){nO.constructor_.apply(this,arguments)}static constructor_(){this._centroid=null,this._minDistance=o.MAX_VALUE,this._interiorPoint=null;let t=arguments[0];t.isEmpty()?this._centroid=null:(this._centroid=nB.getCentroid(t),t.getPrecisionModel().makePrecise(this._centroid)),this.addInterior(t),null===this._interiorPoint&&this.addEndpoints(t)}static getInteriorPoint(t){return new nO(t).getInteriorPoint()}add(t){let i=t.distance(this._centroid);i<this._minDistance&&(this._interiorPoint=new m(t),this._minDistance=i)}getInteriorPoint(){return this._interiorPoint}addEndpoints(){if(arguments[0]instanceof q){let t=arguments[0];if(t instanceof te)this.addEndpoints(t.getCoordinates());else if(t instanceof tu)for(let i=0;i<t.getNumGeometries();i++)this.addEndpoints(t.getGeometryN(i))}else if(arguments[0]instanceof Array){let t=arguments[0];this.add(t[0]),this.add(t[t.length-1])}}addInterior(){if(arguments[0]instanceof q){let t=arguments[0];if(t instanceof te)this.addInterior(t.getCoordinates());else if(t instanceof tu)for(let i=0;i<t.getNumGeometries();i++)this.addInterior(t.getGeometryN(i))}else if(arguments[0]instanceof Array){let t=arguments[0];for(let i=1;i<t.length-1;i++)this.add(t[i])}}}class nD{constructor(){nD.constructor_.apply(this,arguments)}static constructor_(){this._centroid=null,this._minDistance=o.MAX_VALUE,this._interiorPoint=null;let t=arguments[0];this._centroid=nB.getCentroid(t),this.add(t)}static getInteriorPoint(t){return new nD(t).getInteriorPoint()}add(){if(arguments[0]instanceof q){let t=arguments[0];if(t instanceof tC)this.add(t.getCoordinate());else if(t instanceof tu)for(let i=0;i<t.getNumGeometries();i++)this.add(t.getGeometryN(i))}else if(arguments[0]instanceof m){let t=arguments[0],i=t.distance(this._centroid);i<this._minDistance&&(this._interiorPoint=new m(t),this._minDistance=i)}}getInteriorPoint(){return this._interiorPoint}}class nP{constructor(){nP.constructor_.apply(this,arguments)}static constructor_(){this._input=null,this._extremalPts=null,this._centre=null,this._radius=0;let t=arguments[0];this._input=t}static pointWithMinAngleWithSegment(t,i,n){let r=o.MAX_VALUE,s=null;for(let o=0;o<t.length;o++){let a=t[o];if(a===i||a===n)continue;let l=tz.angleBetween(i,a,n);l<r&&(r=l,s=a)}return s}static pointWitMinAngleWithX(t,i){let n=o.MAX_VALUE,r=null;for(let s=0;s<t.length;s++){let o=t[s];if(o===i)continue;let a=o.x-i.x,l=o.y-i.y;l<0&&(l=-l);let A=l/Math.sqrt(a*a+l*l);A<n&&(n=A,r=o)}return r}static lowestPoint(t){let i=t[0];for(let n=1;n<t.length;n++)t[n].y<i.y&&(i=t[n]);return i}static farthestPoints(t){let i=t[0].distance(t[1]),n=t[1].distance(t[2]),r=t[2].distance(t[0]);return i>=n&&i>=r?[t[0],t[1]]:n>=i&&n>=r?[t[1],t[2]]:[t[2],t[0]]}getRadius(){return this.compute(),this._radius}getDiameter(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}let t=this._extremalPts[0],i=this._extremalPts[1];return this._input.getFactory().createLineString([t,i])}getExtremalPoints(){return this.compute(),this._extremalPts}computeCirclePoints(){if(this._input.isEmpty())return this._extremalPts=[].fill(null),null;if(1===this._input.getNumPoints()){let t=this._input.getCoordinates();return this._extremalPts=[new m(t[0])],null}let t=this._input.convexHull().getCoordinates(),i=t;if(t[0].equals2D(t[t.length-1])&&(i=Array(t.length-1).fill(null),$.copyDeep(t,0,i,0,t.length-1)),i.length<=2)return this._extremalPts=$.copyDeep(i),null;let n=nP.lowestPoint(i),r=nP.pointWitMinAngleWithX(i,n);for(let t=0;t<i.length;t++){let t=nP.pointWithMinAngleWithSegment(i,n,r);if(tz.isObtuse(n,t,r))return this._extremalPts=[new m(n),new m(r)],null;if(tz.isObtuse(t,n,r))n=t;else{if(!tz.isObtuse(t,r,n))return this._extremalPts=[new m(n),new m(r),new m(t)],null;r=t}}c.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")}compute(){if(null!==this._extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))}getCircle(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();let t=this._input.getFactory().createPoint(this._centre);return 0===this._radius?t:i5.bufferOp(t,this._radius)}getCentre(){return this.compute(),this._centre}getMaximumDiameter(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre);case 2:return this._input.getFactory().createLineString([this._extremalPts[0],this._extremalPts[1]]);default:let t=nP.farthestPoints(this._extremalPts);return this._input.getFactory().createLineString(t)}}computeCentre(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new m((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=tW.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2])}}}class nk{constructor(){nk.constructor_.apply(this,arguments)}static constructor_(){if(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new tH,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1==arguments.length){let t=arguments[0];nk.constructor_.call(this,t,!1)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._inputGeom=t,this._isConvex=i}}static nextIndex(t,i){return++i>=t.length&&(i=0),i}static computeC(t,i,n){return t*n.y-i*n.x}static getMinimumDiameter(t){return new nk(t).getDiameter()}static getMinimumRectangle(t){return new nk(t).getMinimumRectangle()}static computeSegmentForLine(t,i,n){let r=null,s=null;return Math.abs(i)>Math.abs(t)?(r=new m(0,n/i),s=new m(1,n/i-t/i)):(r=new m(n/t,0),s=new m(n/t-i/t,1)),new tH(r,s)}getWidthCoordinate(){return this.computeMinimumDiameter(),this._minWidthPt}getSupportingSegment(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])}getDiameter(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();let t=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([t,this._minWidthPt])}computeWidthConvex(t){this._convexHullPts=t instanceof tE?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)}computeConvexRingMinDiameter(t){this._minWidth=o.MAX_VALUE;let i=1,n=new tH;for(let r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],i=this.findMaxPerpDistance(t,n,i)}findMaxPerpDistance(t,i,n){let r=i.distancePerpendicular(t[n]),s=r,o=n,a=o;for(;s>=r;)r=s,o=a,a=nk.nextIndex(t,o),s=i.distancePerpendicular(t[a]);return r<this._minWidth&&(this._minPtIndex=o,this._minWidth=r,this._minWidthPt=t[this._minPtIndex],this._minBaseSeg=new tH(i)),o}getMinimumRectangle(){if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());let t=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,i=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y,n=o.MAX_VALUE,r=-o.MAX_VALUE,s=o.MAX_VALUE,a=-o.MAX_VALUE;for(let o=0;o<this._convexHullPts.length;o++){let l=nk.computeC(t,i,this._convexHullPts[o]);l>r&&(r=l),l<n&&(n=l);let A=nk.computeC(-i,t,this._convexHullPts[o]);A>a&&(a=A),A<s&&(s=A)}let l=nk.computeSegmentForLine(-t,-i,a),A=nk.computeSegmentForLine(-t,-i,s),h=nk.computeSegmentForLine(-i,t,r),c=nk.computeSegmentForLine(-i,t,n),u=h.lineIntersection(l),d=c.lineIntersection(l),g=c.lineIntersection(A),f=h.lineIntersection(A),p=this._inputGeom.getFactory().createLinearRing([u,d,g,f,u]);return this._inputGeom.getFactory().createPolygon(p)}computeMinimumDiameter(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{let t=new nI(this._inputGeom).getConvexHull();this.computeWidthConvex(t)}}getLength(){return this.computeMinimumDiameter(),this._minWidth}}var nN=Object.freeze({__proto__:null,Angle:tz,Area:tx,Centroid:nB,ConvexHull:nI,Distance:V,InteriorPointArea:nF,InteriorPointLine:nO,InteriorPointPoint:nD,Length:z,MinimumBoundingCircle:nP,MinimumDiameter:nk,Orientation:U,PointLocation:eI,PointLocator:nl,RobustLineIntersector:tQ,distance:ep,locate:eT,match:nE});class nU{constructor(){nU.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distanceTolerance=null;let t=arguments[0];this._inputGeom=t}static densify(t,i){let n=new nU(t);return n.setDistanceTolerance(i),n.getResultGeometry()}static densifyPoints(t,i,n){let r=new tH,s=new L;for(let o=0;o<t.length-1;o++){r.p0=t[o],r.p1=t[o+1],s.add(r.p0,!1);let a=r.getLength(),l=Math.trunc(a/i)+1;if(l>1){let t=a/l;for(let i=1;i<l;i++){let o=i*t/a,l=r.pointAlong(o);n.makePrecise(l),s.add(l,!1)}}}return s.add(t[t.length-1],!1),s.toCoordinateArray()}setDistanceTolerance(t){if(t<=0)throw new r("Tolerance must be positive");this._distanceTolerance=t}getResultGeometry(){return new nQ(this._distanceTolerance).transform(this._inputGeom)}}class nQ extends t8{constructor(){super(),nQ.constructor_.apply(this,arguments)}static constructor_(){this.distanceTolerance=null;let t=arguments[0];this.distanceTolerance=t}transformCoordinates(t,i){let n=t.toCoordinateArray(),r=nU.densifyPoints(n,this.distanceTolerance,i.getPrecisionModel());return i instanceof te&&1===r.length&&(r=[].fill(null)),this._factory.getCoordinateSequenceFactory().create(r)}transformPolygon(t,i){let n=super.transformPolygon.call(this,t,i);return i instanceof tg?n:this.createValidArea(n)}createValidArea(t){return i5.bufferOp(t,0)}transformMultiPolygon(t,i){let n=super.transformMultiPolygon.call(this,t,i);return this.createValidArea(n)}}nU.DensifyTransformer=nQ;var nH=Object.freeze({__proto__:null,Densifier:nU});class nG{constructor(){nG.constructor_.apply(this,arguments)}static constructor_(){this._orig=null,this._sym=null,this._next=null;let t=arguments[0];this._orig=t}static create(t,i){let n=new nG(t),r=new nG(i);return n.link(r),n}oNext(){return this._sym._next}directionY(){return this.directionPt().getY()-this._orig.getY()}equals(){if(2==arguments.length&&arguments[1]instanceof m&&arguments[0]instanceof m){let t=arguments[0],i=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(i)}}findLowest(){let t=this,i=this.oNext();do 0>i.compareTo(t)&&(t=i),i=i.oNext();while(i!==this)return t}compareTo(t){return this.compareAngularDirection(t)}toStringNode(){let t=this.orig();this.dest();let i=new tr;i.append("Node( "+tN.format(t)+" )\n");let n=this;do i.append("  -> "+n),i.append("\n"),n=n.oNext();while(n!==this)return i.toString()}link(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)}orig(){return this._orig}setNext(t){this._next=t}find(t){let i=this;do{if(null===i)break;if(i.dest().equals2D(t))return i;i=i.oNext()}while(i!==this)return null}dest(){return this._sym._orig}isEdgesSorted(){let t=this.findLowest(),i=t;do{let n=i.oNext();if(n===t)break;if(!(n.compareTo(i)>0))return!1;i=n}while(i!==t)return!0}insert(t){if(this.oNext()===this)return this.insertAfter(t),null;this.insertionEdge(t).insertAfter(t)}insertAfter(t){c.equals(this._orig,t.orig());let i=this.oNext();this._sym.setNext(t),t.sym().setNext(i)}degree(){let t=0,i=this;do t++,i=i.oNext();while(i!==this)return t}directionPt(){return this.dest()}sym(){return this._sym}prev(){return this._sym.next()._sym}compareAngularDirection(t){let i=this.directionX(),n=this.directionY(),r=t.directionX(),s=t.directionY();if(i===r&&n===s)return 0;let o=ir.quadrant(i,n),a=ir.quadrant(r,s);if(o>a)return 1;if(o<a)return -1;let l=this.directionPt(),A=t.directionPt();return U.index(t._orig,A,l)}prevNode(){let t=this;for(;2===t.degree();)if((t=t.prev())===this)return null;return t}directionX(){return this.directionPt().getX()-this._orig.getX()}insertionEdge(t){let i=this;do{let n=i.oNext();if(n.compareTo(i)>0&&t.compareTo(i)>=0&&0>=t.compareTo(n)||0>=n.compareTo(i)&&(0>=t.compareTo(n)||t.compareTo(i)>=0))return i;i=n}while(i!==this)return c.shouldNeverReachHere(),null}next(){return this._next}setSym(t){this._sym=t}toString(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}toStringNodeEdge(){return"  -> ("+tN.format(this.dest())}}class nV extends nG{constructor(){super(),nV.constructor_.apply(this,arguments)}static constructor_(){this._isMarked=!1;let t=arguments[0];nG.constructor_.call(this,t)}static setMarkBoth(t,i){t.setMark(i),t.sym().setMark(i)}static isMarked(t){return t.isMarked()}static setMark(t,i){t.setMark(i)}static markBoth(t){t.mark(),t.sym().mark()}static mark(t){t.mark()}setMark(t){this._isMarked=t}mark(){this._isMarked=!0}isMarked(){return this._isMarked}}class nz{constructor(){nz.constructor_.apply(this,arguments)}static constructor_(){this._vertexMap=new t_}static isValidEdge(t,i){return 0!==i.compareTo(t)}insert(t,i,n){let r=this.create(t,i);null!==n?n.insert(r):this._vertexMap.put(t,r);let s=this._vertexMap.get(i);return null!==s?s.insert(r.sym()):this._vertexMap.put(i,r.sym()),r}create(t,i){let n=this.createEdge(t),r=this.createEdge(i);return n.link(r),n}createEdge(t){return new nG(t)}addEdge(t,i){if(!nz.isValidEdge(t,i))return null;let n=this._vertexMap.get(t),r=null;return(null!==n&&(r=n.find(i)),null!==r)?r:this.insert(t,i,n)}getVertexEdges(){return this._vertexMap.values()}findEdge(t,i){let n=this._vertexMap.get(t);return null===n?null:n.find(i)}}class nK extends nV{constructor(){super(),nK.constructor_.apply(this,arguments)}static constructor_(){this._isStart=!1;let t=arguments[0];nV.constructor_.call(this,t)}setStart(){this._isStart=!0}isStart(){return this._isStart}}class nj extends nz{constructor(){super()}createEdge(t){return new nK(t)}}class nW{constructor(){nW.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._factory=null,this._graph=null,this._lines=new S,this._nodeEdgeStack=new iy,this._ringStartEdge=null,this._graph=new nj}static dissolve(t){let i=new nW;return i.add(t),i.getResult()}addLine(t){this._lines.add(this._factory.createLineString(t.toCoordinateArray()))}updateRingStartEdge(t){return t.isStart()||(t=t.sym()).isStart()?null===this._ringStartEdge?(this._ringStartEdge=t,null):void(0>t.orig().compareTo(this._ringStartEdge.orig())&&(this._ringStartEdge=t)):null}getResult(){return null===this._result&&this.computeResult(),this._result}process(t){let i=t.prevNode();null===i&&(i=t),this.stackEdges(i),this.buildLines()}stackEdges(t){let i=t;do nV.isMarked(i)||this._nodeEdgeStack.add(i),i=i.oNext();while(i!==t)}computeResult(){for(let t=this._graph.getVertexEdges().iterator();t.hasNext();){let i=t.next();nV.isMarked(i)||this.process(i)}this._result=this._factory.buildGeometry(this._lines)}buildLines(){for(;!this._nodeEdgeStack.empty();){let t=this._nodeEdgeStack.pop();nV.isMarked(t)||this.buildLine(t)}}add(){if(arguments[0]instanceof q)arguments[0].apply(new class{get interfaces_(){return[K]}filter(t){t instanceof te&&this.add(t)}});else if(b(arguments[0],C))for(let t=arguments[0].iterator();t.hasNext();){let i=t.next();this.add(i)}else if(arguments[0]instanceof te){let t=arguments[0];null===this._factory&&(this._factory=t.getFactory());let i=t.getCoordinateSequence(),n=!1;for(let t=1;t<i.size();t++){let r=this._graph.addEdge(i.getCoordinate(t-1),i.getCoordinate(t));null!==r&&(n||(r.setStart(),n=!0))}}}buildRing(t){let i=new L,n=t;for(i.add(n.orig().copy(),!1);2===n.sym().degree();){let r=n.next();if(r===t)break;i.add(r.orig().copy(),!1),n=r}i.add(n.dest().copy(),!1),this.addLine(i)}buildLine(t){let i=new L,n=t;for(this._ringStartEdge=null,nV.markBoth(n),i.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);let r=n.next();if(r===t)return this.buildRing(this._ringStartEdge),null;i.add(r.orig().copy(),!1),n=r,nV.markBoth(n)}i.add(n.dest().clone(),!1),this.stackEdges(n.sym()),this.addLine(i)}}var n$=Object.freeze({__proto__:null,LineDissolver:nW}),nY=Object.freeze({__proto__:null,GeometryGraph:n_});class nq{visit(t){}}class nX{constructor(){nX.constructor_.apply(this,arguments)}static constructor_(){if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2==arguments.length){let t=arguments[0],i=arguments[1];this._p=new m(t),this._left=null,this._right=null,this._count=1,this._data=i}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._p=new m(t,i),this._left=null,this._right=null,this._count=1,this._data=n}}isRepeated(){return this._count>1}getRight(){return this._right}getCoordinate(){return this._p}setLeft(t){this._left=t}getX(){return this._p.x}getData(){return this._data}getCount(){return this._count}increment(){this._count=this._count+1}setRight(t){this._right=t}getLeft(){return this._left}getY(){return this._p.y}}class nZ{constructor(){nZ.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0==arguments.length)nZ.constructor_.call(this,0);else if(1==arguments.length){let t=arguments[0];this._tolerance=t}}static toCoordinates(){if(1==arguments.length){let t=arguments[0];return nZ.toCoordinates(t,!1)}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=new L;for(let r=t.iterator();r.hasNext();){let t=r.next(),s=i?t.getCount():1;for(let i=0;i<s;i++)n.add(t.getCoordinate(),!0)}return n.toCoordinateArray()}}insert(){if(1==arguments.length){let t=arguments[0];return this.insert(t,null)}if(2==arguments.length){let t=arguments[0],i=arguments[1];if(null===this._root)return this._root=new nX(t,i),this._root;if(this._tolerance>0){let i=this.findBestMatchNode(t);if(null!==i)return i.increment(),i}return this.insertExact(t,i)}}query(){if(1==arguments.length){let t=arguments[0],i=new S;return this.query(t,i),i}if(2==arguments.length){if(arguments[0]instanceof M&&b(arguments[1],E)){let t=arguments[0],i=arguments[1];this.queryNode(this._root,t,!0,new class{get interfaces_(){return[nq]}visit(t){i.add(t)}})}else if(arguments[0]instanceof M&&b(arguments[1],nq)){let t=arguments[0],i=arguments[1];this.queryNode(this._root,t,!0,i)}}}queryNode(t,i,n,r){if(null===t)return null;let s=null,o=null,a=null;n?(s=i.getMinX(),o=i.getMaxX(),a=t.getX()):(s=i.getMinY(),o=i.getMaxY(),a=t.getY());let l=a<=o;s<a&&this.queryNode(t.getLeft(),i,!n,r),i.contains(t.getCoordinate())&&r.visit(t),l&&this.queryNode(t.getRight(),i,!n,r)}findBestMatchNode(t){let i=new nJ(t,this._tolerance);return this.query(i.queryEnvelope(),i),i.getNode()}isEmpty(){return null===this._root}insertExact(t,i){let n=this._root,r=this._root,s=!0,o=!0;for(;null!==n;){if(null!==n&&t.distance(n.getCoordinate())<=this._tolerance)return n.increment(),n;o=s?t.x<n.getX():t.y<n.getY(),r=n,n=o?n.getLeft():n.getRight(),s=!s}this._numberOfNodes=this._numberOfNodes+1;let a=new nX(t,i);return o?r.setLeft(a):r.setRight(a),a}}class nJ{constructor(){nJ.constructor_.apply(this,arguments)}static constructor_(){this._tolerance=null,this._matchNode=null,this._matchDist=0,this._p=null;let t=arguments[0],i=arguments[1];this._p=t,this._tolerance=i}queryEnvelope(){let t=new M(this._p);return t.expandBy(this._tolerance),t}getNode(){return this._matchNode}visit(t){let i=this._p.distance(t.getCoordinate());if(!(i<=this._tolerance))return null;let n=!1;(null===this._matchNode||i<this._matchDist||null!==this._matchNode&&i===this._matchDist&&1>t.getCoordinate().compareTo(this._matchNode.getCoordinate()))&&(n=!0),n&&(this._matchNode=t,this._matchDist=i)}get interfaces_(){return[nq]}}nZ.BestMatchVisitor=nJ;var n0=Object.freeze({__proto__:null,KdTree:nZ});class n1{constructor(){n1.constructor_.apply(this,arguments)}static constructor_(){this._items=new S,this._subnode=[,,,,].fill(null)}static getSubnodeIndex(t,i,n){let r=-1;return t.getMinX()>=i&&(t.getMinY()>=n&&(r=3),t.getMaxY()<=n&&(r=1)),t.getMaxX()<=i&&(t.getMinY()>=n&&(r=2),t.getMaxY()<=n&&(r=0)),r}size(){let t=0;for(let i=0;i<4;i++)null!==this._subnode[i]&&(t+=this._subnode[i].size());return t+this._items.size()}addAllItemsFromOverlapping(t,i){if(!this.isSearchMatch(t))return null;i.addAll(this._items);for(let n=0;n<4;n++)null!==this._subnode[n]&&this._subnode[n].addAllItemsFromOverlapping(t,i)}visitItems(t,i){for(let t=this._items.iterator();t.hasNext();)i.visitItem(t.next())}hasItems(){return!this._items.isEmpty()}remove(t,i){if(!this.isSearchMatch(t))return!1;let n=!1;for(let r=0;r<4;r++)if(null!==this._subnode[r]&&(n=this._subnode[r].remove(t,i))){this._subnode[r].isPrunable()&&(this._subnode[r]=null);break}return n||(n=this._items.remove(i))}visit(t,i){if(!this.isSearchMatch(t))return null;this.visitItems(t,i);for(let n=0;n<4;n++)null!==this._subnode[n]&&this._subnode[n].visit(t,i)}getItems(){return this._items}depth(){let t=0;for(let i=0;i<4;i++)if(null!==this._subnode[i]){let n=this._subnode[i].depth();n>t&&(t=n)}return t+1}hasChildren(){for(let t=0;t<4;t++)if(null!==this._subnode[t])return!0;return!1}isPrunable(){return!(this.hasChildren()||this.hasItems())}addAllItems(t){t.addAll(this._items);for(let i=0;i<4;i++)null!==this._subnode[i]&&this._subnode[i].addAllItems(t);return t}getNodeCount(){let t=0;for(let i=0;i<4;i++)null!==this._subnode[i]&&(t+=this._subnode[i].size());return t+1}isEmpty(){let t=!0;if(this._items.isEmpty()){for(let i=0;i<4;i++)if(null!==this._subnode[i]&&!this._subnode[i].isEmpty()){t=!1;break}}else t=!1;return t}add(t){this._items.add(t)}get interfaces_(){return[l]}}function n2(){}n2.exponent=function(t){return function(t,i){let n,r,s;if(s||isFinite(i)||(s={d:32752,c:0,b:0,a:0},(i<0||1/i<0)&&(s.d+=32768),n=Math.pow(2,{64:11}[t])-1,r=0),!s){for(n=({64:1023})[t],r=Math.abs(i);r>=2;)n++,r/=2;for(;r<1&&n>0;)n--,r*=2;n<=0&&(r/=2)}return n}(64,t)-1023},n2.powerOf2=function(t){return Math.pow(2,t)};class n5{constructor(){n5.constructor_.apply(this,arguments)}static constructor_(){this._pt=new m,this._level=0,this._env=null;let t=arguments[0];this.computeKey(t)}static computeQuadLevel(t){let i=t.getWidth(),n=t.getHeight();return n2.exponent(i>n?i:n)+1}getLevel(){return this._level}computeKey(){if(1==arguments.length){let t=arguments[0];for(this._level=n5.computeQuadLevel(t),this._env=new M,this.computeKey(this._level,t);!this._env.contains(t);)this._level+=1,this.computeKey(this._level,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=n2.powerOf2(t);this._pt.x=Math.floor(i.getMinX()/n)*n,this._pt.y=Math.floor(i.getMinY()/n)*n,this._env.init(this._pt.x,this._pt.x+n,this._pt.y,this._pt.y+n)}}getEnvelope(){return this._env}getCentre(){return new m((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)}getPoint(){return this._pt}}let n4=class t extends n1{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._env=null,this._centrex=null,this._centrey=null,this._level=null;let t=arguments[0],i=arguments[1];this._env=t,this._level=i,this._centrex=(t.getMinX()+t.getMaxX())/2,this._centrey=(t.getMinY()+t.getMaxY())/2}static createNode(i){let n=new n5(i);return new t(n.getEnvelope(),n.getLevel())}static createExpanded(i,n){let r=new M(n);null!==i&&r.expandToInclude(i._env);let s=t.createNode(r);return null!==i&&s.insertNode(i),s}find(t){let i=n1.getSubnodeIndex(t,this._centrex,this._centrey);return -1===i?this:null!==this._subnode[i]?this._subnode[i].find(t):this}isSearchMatch(t){return null!==t&&this._env.intersects(t)}getSubnode(t){return null===this._subnode[t]&&(this._subnode[t]=this.createSubnode(t)),this._subnode[t]}getEnvelope(){return this._env}getNode(t){let i=n1.getSubnodeIndex(t,this._centrex,this._centrey);return -1!==i?this.getSubnode(i).getNode(t):this}createSubnode(i){let n=0,r=0,s=0,o=0;switch(i){case 0:n=this._env.getMinX(),r=this._centrex,s=this._env.getMinY(),o=this._centrey;break;case 1:n=this._centrex,r=this._env.getMaxX(),s=this._env.getMinY(),o=this._centrey;break;case 2:n=this._env.getMinX(),r=this._centrex,s=this._centrey,o=this._env.getMaxY();break;case 3:n=this._centrex,r=this._env.getMaxX(),s=this._centrey,o=this._env.getMaxY()}return new t(new M(n,r,s,o),this._level-1)}insertNode(t){c.isTrue(null===this._env||this._env.contains(t._env));let i=n1.getSubnodeIndex(t._env,this._centrex,this._centrey);if(t._level===this._level-1)this._subnode[i]=t;else{let n=this.createSubnode(i);n.insertNode(t),this._subnode[i]=n}}};class n3{static isZeroWidth(t,i){let n=i-t;if(0===n)return!0;let r=n/Math.max(Math.abs(t),Math.abs(i));return n2.exponent(r)<=n3.MIN_BINARY_EXPONENT}}n3.MIN_BINARY_EXPONENT=-50;class n6 extends n1{constructor(){super()}insertContained(t,i,n){c.isTrue(t.getEnvelope().contains(i));let r=n3.isZeroWidth(i.getMinX(),i.getMaxX()),s=n3.isZeroWidth(i.getMinY(),i.getMaxY()),o=null;(r||s?t.find(i):t.getNode(i)).add(n)}isSearchMatch(t){return!0}insert(t,i){let n=n1.getSubnodeIndex(t,n6.origin.x,n6.origin.y);if(-1===n)return this.add(i),null;let r=this._subnode[n];if(null===r||!r.getEnvelope().contains(t)){let i=n4.createExpanded(r,t);this._subnode[n]=i}this.insertContained(this._subnode[n],t,i)}}n6.origin=new m(0,0);class n8{constructor(){n8.constructor_.apply(this,arguments)}static constructor_(){this._root=null,this._minExtent=1,this._root=new n6}static ensureExtent(t,i){let n=t.getMinX(),r=t.getMaxX(),s=t.getMinY(),o=t.getMaxY();return n!==r&&s!==o?t:(n===r&&(n-=i/2,r+=i/2),s===o&&(s-=i/2,o+=i/2),new M(n,r,s,o))}size(){return null!==this._root?this._root.size():0}insert(t,i){this.collectStats(t);let n=n8.ensureExtent(t,this._minExtent);this._root.insert(n,i)}query(){if(1==arguments.length){let t=arguments[0],i=new eC;return this.query(t,i),i.getItems()}if(2==arguments.length){let t=arguments[0],i=arguments[1];this._root.visit(t,i)}}queryAll(){let t=new S;return this._root.addAllItems(t),t}remove(t,i){let n=n8.ensureExtent(t,this._minExtent);return this._root.remove(n,i)}collectStats(t){let i=t.getWidth();i<this._minExtent&&i>0&&(this._minExtent=i);let n=t.getHeight();n<this._minExtent&&n>0&&(this._minExtent=n)}depth(){return null!==this._root?this._root.depth():0}isEmpty(){return null===this._root||this._root.isEmpty()}get interfaces_(){return[e5,l]}}var n7=Object.freeze({__proto__:null,kdtree:n0,quadtree:Object.freeze({__proto__:null,Quadtree:n8}),strtree:Object.freeze({__proto__:null,STRtree:e9})});let n9=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class rt{constructor(t){this.geometryFactory=t||new tS}read(t){let i,n=(i="string"==typeof t?JSON.parse(t):t).type;if(!re[n])throw Error("Unknown GeoJSON type: "+i.type);return -1!==n9.indexOf(n)?re[n].call(this,i.coordinates):"GeometryCollection"===n?re[n].call(this,i.geometries):re[n].call(this,i)}write(t){let i=t.getGeometryType();if(!ri[i])throw Error("Geometry is not supported");return ri[i].call(this,t)}}let re={Feature:function(t){let i={};for(let n in t)i[n]=t[n];if(t.geometry){if(!re[t.geometry.type])throw Error("Unknown GeoJSON type: "+t.type);i.geometry=this.read(t.geometry)}return t.bbox&&(i.bbox=re.bbox.call(this,t.bbox)),i},FeatureCollection:function(t){let i={};if(t.features){i.features=[];for(let n=0;n<t.features.length;++n)i.features.push(this.read(t.features[n]))}return t.bbox&&(i.bbox=this.parse.bbox.call(this,t.bbox)),i},coordinates:function(t){let i=[];for(let n=0;n<t.length;++n){let r=t[n];i.push(new m(...r))}return i},bbox:function(t){return this.geometryFactory.createLinearRing([new m(t[0],t[1]),new m(t[2],t[1]),new m(t[2],t[3]),new m(t[0],t[3]),new m(t[0],t[1])])},Point:function(t){let i=new m(...t);return this.geometryFactory.createPoint(i)},MultiPoint:function(t){let i=[];for(let n=0;n<t.length;++n)i.push(re.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(i)},LineString:function(t){let i=re.coordinates.call(this,t);return this.geometryFactory.createLineString(i)},MultiLineString:function(t){let i=[];for(let n=0;n<t.length;++n)i.push(re.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(i)},Polygon:function(t){let i=re.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(i),r=[];for(let i=1;i<t.length;++i){let n=t[i],s=re.coordinates.call(this,n),o=this.geometryFactory.createLinearRing(s);r.push(o)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){let i=[];for(let n=0;n<t.length;++n){let r=t[n];i.push(re.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(i)},GeometryCollection:function(t){let i=[];for(let n=0;n<t.length;++n){let r=t[n];i.push(this.read(r))}return this.geometryFactory.createGeometryCollection(i)}},ri={coordinate:function(t){let i=[t.x,t.y];return t.z&&i.push(t.z),t.m&&i.push(t.m),i},Point:function(t){return{type:"Point",coordinates:ri.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){let i=[];for(let n=0;n<t._geometries.length;++n){let r=t._geometries[n],s=ri.Point.call(this,r);i.push(s.coordinates)}return{type:"MultiPoint",coordinates:i}},LineString:function(t){let i=[],n=t.getCoordinates();for(let t=0;t<n.length;++t){let r=n[t];i.push(ri.coordinate.call(this,r))}return{type:"LineString",coordinates:i}},MultiLineString:function(t){let i=[];for(let n=0;n<t._geometries.length;++n){let r=t._geometries[n],s=ri.LineString.call(this,r);i.push(s.coordinates)}return{type:"MultiLineString",coordinates:i}},Polygon:function(t){let i=[],n=ri.LineString.call(this,t._shell);i.push(n.coordinates);for(let n=0;n<t._holes.length;++n){let r=t._holes[n],s=ri.LineString.call(this,r);i.push(s.coordinates)}return{type:"Polygon",coordinates:i}},MultiPolygon:function(t){let i=[];for(let n=0;n<t._geometries.length;++n){let r=t._geometries[n],s=ri.Polygon.call(this,r);i.push(s.coordinates)}return{type:"MultiPolygon",coordinates:i}},GeometryCollection:function(t){let i=[];for(let n=0;n<t._geometries.length;++n){let r=t._geometries[n],s=r.getGeometryType();i.push(ri[s].call(this,r))}return{type:"GeometryCollection",geometries:i}}};function rn(t){return[t.x,t.y]}var rr=Object.freeze({__proto__:null,GeoJSONReader:class{constructor(t){this.parser=new rt(t||new tS)}read(t){return this.parser.read(t)}},GeoJSONWriter:class{constructor(){this.parser=new rt(this.geometryFactory)}write(t){return this.parser.write(t)}},OL3Parser:class{constructor(t,i){this.geometryFactory=t||new tS,this.ol=i||"undefined"!=typeof ol&&ol}inject(t,i,n,r,s,o,a,l){this.ol={geom:{Point:t,LineString:i,LinearRing:n,Polygon:r,MultiPoint:s,MultiLineString:o,MultiPolygon:a,GeometryCollection:l}}}read(t){let i=this.ol;return t instanceof i.geom.Point?this.convertFromPoint(t):t instanceof i.geom.LineString?this.convertFromLineString(t):t instanceof i.geom.LinearRing?this.convertFromLinearRing(t):t instanceof i.geom.Polygon?this.convertFromPolygon(t):t instanceof i.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof i.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof i.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof i.geom.GeometryCollection?this.convertFromCollection(t):void 0}convertFromPoint(t){let i=t.getCoordinates();return this.geometryFactory.createPoint(new m(i[0],i[1]))}convertFromLineString(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new m(t[0],t[1])}))}convertFromLinearRing(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new m(t[0],t[1])}))}convertFromPolygon(t){let i=t.getLinearRings(),n=null,r=[];for(let t=0;t<i.length;t++){let s=this.convertFromLinearRing(i[t]);0===t?n=s:r.push(s)}return this.geometryFactory.createPolygon(n,r)}convertFromMultiPoint(t){let i=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(i)}convertFromMultiLineString(t){let i=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(i)}convertFromMultiPolygon(t){let i=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(i)}convertFromCollection(t){let i=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(i)}write(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}convertToPoint(t){return new this.ol.geom.Point([t.x,t.y])}convertToLineString(t){let i=t._points._coordinates.map(rn);return new this.ol.geom.LineString(i)}convertToLinearRing(t){let i=t._points._coordinates.map(rn);return new this.ol.geom.LinearRing(i)}convertToPolygon(t){let i=[t._shell._points._coordinates.map(rn)];for(let n=0;n<t._holes.length;n++)i.push(t._holes[n]._points._coordinates.map(rn));return new this.ol.geom.Polygon(i)}convertToMultiPoint(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(rn))}convertToMultiLineString(t){let i=[];for(let n=0;n<t._geometries.length;n++)i.push(this.convertToLineString(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(i)}convertToMultiPolygon(t){let i=[];for(let n=0;n<t._geometries.length;n++)i.push(this.convertToPolygon(t._geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(i)}convertToCollection(t){let i=[];for(let n=0;n<t._geometries.length;n++){let r=t._geometries[n];i.push(this.write(r))}return new this.ol.geom.GeometryCollection(i)}},WKTReader:class{constructor(t){this.parser=new tk(t||new tS)}read(t){return this.parser.read(t)}},WKTWriter:tN}),rs=Object.freeze({__proto__:null,MCIndexNoder:ia,ScaledNoder:eq,SegmentString:ej});class ro{constructor(){ro.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1==arguments.length){let t=arguments[0];ro.constructor_.call(this,t,nn.MOD2_BOUNDARY_RULE)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._geom=t,this._geomFact=t.getFactory(),this._bnRule=i}}static getBoundary(){return 1==arguments.length?new ro(arguments[0]).getBoundary():2==arguments.length?new ro(arguments[0],arguments[1]).getBoundary():void 0}boundaryMultiLineString(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();let i=this.computeBoundaryCoordinates(t);return 1===i.length?this._geomFact.createPoint(i[0]):this._geomFact.createMultiPointFromCoords(i)}getBoundary(){return this._geom instanceof te?this.boundaryLineString(this._geom):this._geom instanceof tv?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(t){let i=new S;this._endpointMap=new eV;for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(let t=this._endpointMap.entrySet().iterator();t.hasNext();){let n=t.next(),r=n.getValue().count;this._bnRule.isInBoundary(r)&&i.add(n.getKey())}return $.toCoordinateArray(i)}addEndpoint(t){let i=this._endpointMap.get(t);null===i&&(i=new ra,this._endpointMap.put(t,i)),i.count++}}let ra=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){this.count=null}};class rl{constructor(){rl.constructor_.apply(this,arguments)}static constructor_(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1==arguments.length){let t=arguments[0];this._inputGeom=t}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._inputGeom=t,this._isClosedEndpointsInInterior=!i.isInBoundary(2)}}static isSimple(){return 1==arguments.length?new rl(arguments[0]).isSimple():2==arguments.length?new rl(arguments[0],arguments[1]).isSimple():void 0}isSimpleMultiPoint(t){if(t.isEmpty())return!0;let i=new tA;for(let n=0;n<t.getNumGeometries();n++){let r=t.getGeometryN(n).getCoordinate();if(i.contains(r))return this._nonSimpleLocation=r,!1;i.add(r)}return!0}isSimplePolygonal(t){for(let i=t9.getLines(t).iterator();i.hasNext();){let t=i.next();if(!this.isSimpleLinearGeometry(t))return!1}return!0}hasClosedEndpointIntersection(t){let i=new eV;for(let n=t.getEdgeIterator();n.hasNext();){let t=n.next(),r=t.isClosed(),s=t.getCoordinate(0);this.addEndpoint(i,s,r);let o=t.getCoordinate(t.getNumPoints()-1);this.addEndpoint(i,o,r)}for(let t=i.values().iterator();t.hasNext();){let i=t.next();if(i.isClosed&&2!==i.degree)return this._nonSimpleLocation=i.getCoordinate(),!0}return!1}getNonSimpleLocation(){return this._nonSimpleLocation}isSimpleLinearGeometry(t){if(t.isEmpty())return!0;let i=new n_(0,t),n=new tQ,r=i.computeSelfNodes(n,!0);return!r.hasIntersection()||(r.hasProperIntersection()?(this._nonSimpleLocation=r.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(i)&&(!this._isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(i)))}hasNonEndpointIntersection(t){for(let i=t.getEdgeIterator();i.hasNext();){let t=i.next(),n=t.getMaximumSegmentIndex();for(let i=t.getEdgeIntersectionList().iterator();i.hasNext();){let t=i.next();if(!t.isEndPoint(n))return this._nonSimpleLocation=t.getCoordinate(),!0}}return!1}addEndpoint(t,i,n){let r=t.get(i);null===r&&(r=new rA(i),t.put(i,r)),r.addEndpoint(n)}computeSimple(t){return this._nonSimpleLocation=null,!!t.isEmpty()||(t instanceof te||t instanceof tv?this.isSimpleLinearGeometry(t):t instanceof tB?this.isSimpleMultiPoint(t):b(t,td)?this.isSimplePolygonal(t):!(t instanceof tu)||this.isSimpleGeometryCollection(t))}isSimple(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)}isSimpleGeometryCollection(t){for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);if(!this.computeSimple(n))return!1}return!0}}class rA{constructor(){rA.constructor_.apply(this,arguments)}static constructor_(){this.pt=null,this.isClosed=null,this.degree=null;let t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}getCoordinate(){return this.pt}addEndpoint(t){this.degree++,this.isClosed|=t}}rl.EndpointInfo=rA;var rh=Object.freeze({__proto__:null,BufferOp:i5,BufferParameters:eO});class rc{constructor(){rc.constructor_.apply(this,arguments)}static constructor_(){if(this._component=null,this._segIndex=null,this._pt=null,2==arguments.length){let t=arguments[0],i=arguments[1];rc.constructor_.call(this,t,rc.INSIDE_AREA,i)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._component=t,this._segIndex=i,this._pt=n}}getSegmentIndex(){return this._segIndex}getCoordinate(){return this._pt}isInsideArea(){return this._segIndex===rc.INSIDE_AREA}toString(){return this._component.getGeometryType()+"["+this._segIndex+"]-"+tN.toPoint(this._pt)}getGeometryComponent(){return this._component}}rc.INSIDE_AREA=-1;class ru{constructor(){ru.constructor_.apply(this,arguments)}static constructor_(){this._locations=null;let t=arguments[0];this._locations=t}static getLocations(t){let i=new S;return t.apply(new ru(i)),i}filter(t){if(t.isEmpty())return null;(t instanceof tC||t instanceof te||t instanceof tE)&&this._locations.add(new rc(t,0,t.getCoordinate()))}get interfaces_(){return[tt]}}class rd{constructor(){rd.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new nl,this._minDistanceLocation=null,this._minDistance=o.MAX_VALUE,2==arguments.length){let t=arguments[0],i=arguments[1];rd.constructor_.call(this,t,i,0)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._geom=[,,].fill(null),this._geom[0]=t,this._geom[1]=i,this._terminateDistance=n}}static distance(t,i){return new rd(t,i).distance()}static isWithinDistance(t,i,n){return!(t.getEnvelopeInternal().distance(i.getEnvelopeInternal())>n)&&new rd(t,i,n).distance()<=n}static nearestPoints(t,i){return new rd(t,i).nearestPoints()}computeContainmentDistance(){if(0==arguments.length){let t=[,,].fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=this._geom[t];if(2>n.getDimension())return null;let r=1-t,s=ei.getPolygons(n);if(s.size()>0){let n=ru.getLocations(this._geom[r]);if(this.computeContainmentDistance(n,s,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=i[0],this._minDistanceLocation[t]=i[1],null}}else if(3==arguments.length){if(arguments[2]instanceof Array&&b(arguments[0],E)&&b(arguments[1],E)){let t=arguments[0],i=arguments[1],n=arguments[2];for(let r=0;r<t.size();r++){let s=t.get(r);for(let t=0;t<i.size();t++)if(this.computeContainmentDistance(s,i.get(t),n),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof rc&&arguments[1]instanceof tE){let t=arguments[0],i=arguments[1],n=arguments[2],r=t.getCoordinate();if(tG.EXTERIOR!==this._ptLocator.locate(r,i))return this._minDistance=0,n[0]=t,n[1]=new rc(i,r),null}}}computeMinDistanceLinesPoints(t,i,n){for(let r=0;r<t.size();r++){let s=t.get(r);for(let t=0;t<i.size();t++){let r=i.get(t);if(this.computeMinDistance(s,r,n),this._minDistance<=this._terminateDistance)return null}}}computeFacetDistance(){let t=[,,].fill(null),i=t9.getLines(this._geom[0]),n=t9.getLines(this._geom[1]),r=ee.getPoints(this._geom[0]),s=ee.getPoints(this._geom[1]);return this.computeMinDistanceLines(i,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,s,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,s,t),void this.updateMinDistance(t,!1))))}nearestLocations(){return this.computeMinDistance(),this._minDistanceLocation}updateMinDistance(t,i){if(null===t[0])return null;i?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])}nearestPoints(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]}computeMinDistance(){if(0==arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=[,,].fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3==arguments.length){if(arguments[2]instanceof Array&&arguments[0]instanceof te&&arguments[1]instanceof tC){let t=arguments[0],i=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this._minDistance)return null;let r=t.getCoordinates(),s=i.getCoordinate();for(let o=0;o<r.length-1;o++){let a=V.pointToSegment(s,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;let l=new tH(r[o],r[o+1]).closestPoint(s);n[0]=new rc(t,o,l),n[1]=new rc(i,0,s)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof te&&arguments[1]instanceof te){let t=arguments[0],i=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(i.getEnvelopeInternal())>this._minDistance)return null;let r=t.getCoordinates(),s=i.getCoordinates();for(let o=0;o<r.length-1;o++){let a=new M(r[o],r[o+1]);if(!(a.distance(i.getEnvelopeInternal())>this._minDistance))for(let l=0;l<s.length-1;l++){let A=new M(s[l],s[l+1]);if(a.distance(A)>this._minDistance)continue;let h=V.segmentToSegment(r[o],r[o+1],s[l],s[l+1]);if(h<this._minDistance){this._minDistance=h;let a=new tH(r[o],r[o+1]),A=new tH(s[l],s[l+1]),c=a.closestPoints(A);n[0]=new rc(t,o,c[0]),n[1]=new rc(i,l,c[1])}if(this._minDistance<=this._terminateDistance)return null}}}}}computeMinDistancePoints(t,i,n){for(let r=0;r<t.size();r++){let s=t.get(r);for(let t=0;t<i.size();t++){let r=i.get(t),o=s.getCoordinate().distance(r.getCoordinate());if(o<this._minDistance&&(this._minDistance=o,n[0]=new rc(s,0,s.getCoordinate()),n[1]=new rc(r,0,r.getCoordinate())),this._minDistance<=this._terminateDistance)return null}}}distance(){if(null===this._geom[0]||null===this._geom[1])throw new r("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)}computeMinDistanceLines(t,i,n){for(let r=0;r<t.size();r++){let s=t.get(r);for(let t=0;t<i.size();t++){let r=i.get(t);if(this.computeMinDistance(s,r,n),this._minDistance<=this._terminateDistance)return null}}}}var rg=Object.freeze({__proto__:null,DistanceOp:rd});class rf{constructor(){rf.constructor_.apply(this,arguments)}static constructor_(){this._factory=null,this._directedEdges=new S,this._coordinates=null;let t=arguments[0];this._factory=t}add(t){this._directedEdges.add(t)}toLineString(){return this._factory.createLineString(this.getCoordinates())}getCoordinates(){if(null===this._coordinates){let t=0,i=0,n=new L;for(let r=this._directedEdges.iterator();r.hasNext();){let s=r.next();s.getEdgeDirection()?t++:i++,n.add(s.getEdge().getLine().getCoordinates(),!1,s.getEdgeDirection())}this._coordinates=n.toCoordinateArray(),i>t&&$.reverse(this._coordinates)}return this._coordinates}}class rp{constructor(){rp.constructor_.apply(this,arguments)}static constructor_(){this._isMarked=!1,this._isVisited=!1,this._data=null}static setMarked(t,i){for(;t.hasNext();)t.next().setMarked(i)}static setVisited(t,i){for(;t.hasNext();)t.next().setVisited(i)}static getComponentWithVisitedState(t,i){for(;t.hasNext();){let n=t.next();if(n.isVisited()===i)return n}return null}setVisited(t){this._isVisited=t}isMarked(){return this._isMarked}setData(t){this._data=t}getData(){return this._data}setMarked(t){this._isMarked=t}getContext(){return this._data}isVisited(){return this._isVisited}setContext(t){this._data=t}}class rm extends rp{constructor(){super(),rm.constructor_.apply(this,arguments)}static constructor_(){if(this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null,0==arguments.length);else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this._from=t,this._to=i,this._edgeDirection=r,this._p0=t.getCoordinate(),this._p1=n;let s=this._p1.x-this._p0.x,o=this._p1.y-this._p0.y;this._quadrant=ir.quadrant(s,o),this._angle=Math.atan2(o,s)}}static toEdges(t){let i=new S;for(let n=t.iterator();n.hasNext();)i.add(n.next()._parentEdge);return i}isRemoved(){return null===this._parentEdge}compareDirection(t){return this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:U.index(t._p0,t._p1,this._p1)}getCoordinate(){return this._from.getCoordinate()}print(t){let i=this.getClass().getName(),n=i.lastIndexOf("."),r=i.substring(n+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)}getDirectionPt(){return this._p1}getAngle(){return this._angle}getSym(){return this._sym}getEdge(){return this._parentEdge}getToNode(){return this._to}getEdgeDirection(){return this._edgeDirection}compareTo(t){return this.compareDirection(t)}getFromNode(){return this._from}setEdge(t){this._parentEdge=t}remove(){this._sym=null,this._parentEdge=null}getQuadrant(){return this._quadrant}setSym(t){this._sym=t}get interfaces_(){return[a]}}class r_ extends rm{constructor(){super(),r_.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];rm.constructor_.call(this,t,i,n,r)}getNext(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(c.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}}class ry extends rp{constructor(){super(),ry.constructor_.apply(this,arguments)}static constructor_(){if(this._dirEdge=null,0==arguments.length);else if(2==arguments.length){let t=arguments[0],i=arguments[1];this.setDirectedEdges(t,i)}}isRemoved(){return null===this._dirEdge}setDirectedEdges(t,i){this._dirEdge=[t,i],t.setEdge(this),i.setEdge(this),t.setSym(i),i.setSym(t),t.getFromNode().addOutEdge(t),i.getFromNode().addOutEdge(i)}getDirEdge(){if(Number.isInteger(arguments[0])){let t=arguments[0];return this._dirEdge[t]}if(arguments[0]instanceof rv){let t=arguments[0];return this._dirEdge[0].getFromNode()===t?this._dirEdge[0]:this._dirEdge[1].getFromNode()===t?this._dirEdge[1]:null}}remove(){this._dirEdge=null}getOppositeNode(t){return this._dirEdge[0].getFromNode()===t?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===t?this._dirEdge[1].getToNode():null}}class rw{constructor(){rw.constructor_.apply(this,arguments)}static constructor_(){this._outEdges=new S,this._sorted=!1}getNextEdge(t){let i=this.getIndex(t);return this._outEdges.get(this.getIndex(i+1))}getCoordinate(){let t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}iterator(){return this.sortEdges(),this._outEdges.iterator()}sortEdges(){this._sorted||(et.sort(this._outEdges),this._sorted=!0)}remove(t){this._outEdges.remove(t)}getEdges(){return this.sortEdges(),this._outEdges}getNextCWEdge(t){let i=this.getIndex(t);return this._outEdges.get(this.getIndex(i-1))}getIndex(){if(arguments[0]instanceof ry){let t=arguments[0];this.sortEdges();for(let i=0;i<this._outEdges.size();i++)if(this._outEdges.get(i).getEdge()===t)return i;return -1}if(arguments[0]instanceof rm){let t=arguments[0];this.sortEdges();for(let i=0;i<this._outEdges.size();i++)if(this._outEdges.get(i)===t)return i;return -1}if(Number.isInteger(arguments[0])){let t=arguments[0]%this._outEdges.size();return t<0&&(t+=this._outEdges.size()),t}}add(t){this._outEdges.add(t),this._sorted=!1}getDegree(){return this._outEdges.size()}}class rv extends rp{constructor(){super(),rv.constructor_.apply(this,arguments)}static constructor_(){if(this._pt=null,this._deStar=null,1==arguments.length){let t=arguments[0];rv.constructor_.call(this,t,new rw)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._pt=t,this._deStar=i}}static getEdgesBetween(t,i){let n=new tp(rm.toEdges(t.getOutEdges().getEdges())),r=rm.toEdges(i.getOutEdges().getEdges());return n.retainAll(r),n}isRemoved(){return null===this._pt}addOutEdge(t){this._deStar.add(t)}getCoordinate(){return this._pt}getOutEdges(){return this._deStar}remove(){if(0==arguments.length)this._pt=null;else if(1==arguments.length){let t=arguments[0];this._deStar.remove(t)}}getIndex(t){return this._deStar.getIndex(t)}getDegree(){return this._deStar.getDegree()}}class rb extends ry{constructor(){super(),rb.constructor_.apply(this,arguments)}static constructor_(){this._line=null;let t=arguments[0];this._line=t}getLine(){return this._line}}class rC{constructor(){rC.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new eV}find(t){return this._nodeMap.get(t)}iterator(){return this._nodeMap.values().iterator()}remove(t){return this._nodeMap.remove(t)}values(){return this._nodeMap.values()}add(t){return this._nodeMap.put(t.getCoordinate(),t),t}}class rx{constructor(){rx.constructor_.apply(this,arguments)}static constructor_(){this._edges=new tp,this._dirEdges=new tp,this._nodeMap=new rC}findNodesOfDegree(t){let i=new S;for(let n=this.nodeIterator();n.hasNext();){let r=n.next();r.getDegree()===t&&i.add(r)}return i}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}getEdges(){return this._edges}nodeIterator(){return this._nodeMap.iterator()}contains(){if(arguments[0]instanceof ry){let t=arguments[0];return this._edges.contains(t)}if(arguments[0]instanceof rm){let t=arguments[0];return this._dirEdges.contains(t)}}add(){if(arguments[0]instanceof rv){let t=arguments[0];this._nodeMap.add(t)}else if(arguments[0]instanceof ry){let t=arguments[0];this._edges.add(t),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))}else if(arguments[0]instanceof rm){let t=arguments[0];this._dirEdges.add(t)}}getNodes(){return this._nodeMap.values()}remove(){if(arguments[0]instanceof ry){let t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this._edges.remove(t),t.remove()}else if(arguments[0]instanceof rm){let t=arguments[0],i=t.getSym();null!==i&&i.setSym(null),t.getFromNode().remove(t),t.remove(),this._dirEdges.remove(t)}else if(arguments[0]instanceof rv){let t=arguments[0];for(let i=t.getOutEdges().getEdges().iterator();i.hasNext();){let t=i.next(),n=t.getSym();null!==n&&this.remove(n),this._dirEdges.remove(t);let r=t.getEdge();null!==r&&this._edges.remove(r)}this._nodeMap.remove(t.getCoordinate()),t.remove()}}findNode(t){return this._nodeMap.find(t)}}class rE extends rx{constructor(){super()}getNode(t){let i=this.findNode(t);return null===i&&(i=new rv(t),this.add(i)),i}addEdge(t){if(t.isEmpty())return null;let i=$.removeRepeatedPoints(t.getCoordinates());if(i.length<=1)return null;let n=i[0],r=i[i.length-1],s=this.getNode(n),o=this.getNode(r),a=new r_(s,o,i[1],!0),l=new r_(o,s,i[i.length-2],!1),A=new rb(t);A.setDirectedEdges(a,l),this.add(A)}}class rB{constructor(){rB.constructor_.apply(this,arguments)}static constructor_(){this._graph=new rE,this._mergedLineStrings=null,this._factory=null,this._edgeStrings=null}buildEdgeStringsForUnprocessedNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){let i=t.next();i.isMarked()||(c.isTrue(2===i.getDegree()),this.buildEdgeStringsStartingAt(i),i.setMarked(!0))}}buildEdgeStringsForNonDegree2Nodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){let i=t.next();2!==i.getDegree()&&(this.buildEdgeStringsStartingAt(i),i.setMarked(!0))}}buildEdgeStringsStartingAt(t){for(let i=t.getOutEdges().iterator();i.hasNext();){let t=i.next();t.getEdge().isMarked()||this._edgeStrings.add(this.buildEdgeStringStartingWith(t))}}merge(){if(null!==this._mergedLineStrings)return null;rp.setMarked(this._graph.nodeIterator(),!1),rp.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new S,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new S;for(let t=this._edgeStrings.iterator();t.hasNext();){let i=t.next();this._mergedLineStrings.add(i.toLineString())}}addLineString(t){null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t)}buildEdgeStringStartingWith(t){let i=new rf(this._factory),n=t;do i.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(null!==n&&n!==t)return i}add(){if(arguments[0]instanceof q){let t=arguments[0];for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);n instanceof te&&this.addLineString(n)}}else if(b(arguments[0],C)){let t=arguments[0];this._mergedLineStrings=null;for(let i=t.iterator();i.hasNext();){let t=i.next();this.add(t)}}}buildEdgeStringsForIsolatedLoops(){this.buildEdgeStringsForUnprocessedNodes()}buildEdgeStringsForObviousStartNodes(){this.buildEdgeStringsForNonDegree2Nodes()}getMergedLineStrings(){return this.merge(),this._mergedLineStrings}}class rS{constructor(){rS.constructor_.apply(this,arguments)}static constructor_(){this._parentGraph=null,this._edges=new tp,this._dirEdges=new S,this._nodeMap=new rC;let t=arguments[0];this._parentGraph=t}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}getParent(){return this._parentGraph}nodeIterator(){return this._nodeMap.iterator()}contains(t){return this._edges.contains(t)}add(t){if(this._edges.contains(t))return null;this._edges.add(t),this._dirEdges.add(t.getDirEdge(0)),this._dirEdges.add(t.getDirEdge(1)),this._nodeMap.add(t.getDirEdge(0).getFromNode()),this._nodeMap.add(t.getDirEdge(1).getFromNode())}}class rI{constructor(){rI.constructor_.apply(this,arguments)}static constructor_(){this._graph=null;let t=arguments[0];this._graph=t}findSubgraph(t){let i=new rS(this._graph);return this.addReachable(t,i),i}addEdges(t,i,n){t.setVisited(!0);for(let r=t.getOutEdges().iterator();r.hasNext();){let t=r.next();n.add(t.getEdge());let s=t.getToNode();s.isVisited()||i.push(s)}}addReachable(t,i){let n=new iy;for(n.add(t);!n.empty();){let t=n.pop();this.addEdges(t,n,i)}}getConnectedSubgraphs(){let t=new S;rp.setVisited(this._graph.nodeIterator(),!1);for(let i=this._graph.edgeIterator();i.hasNext();){let n=i.next().getDirEdge(0).getFromNode();n.isVisited()||t.add(this.findSubgraph(n))}return t}}class rL{constructor(){rL.constructor_.apply(this,arguments)}static constructor_(){this._graph=new rE,this._factory=new tS,this._lineCount=0,this._isRun=!1,this._sequencedGeometry=null,this._isSequenceable=!1}static findUnvisitedBestOrientedDE(t){let i=null,n=null;for(let r=t.getOutEdges().iterator();r.hasNext();){let t=r.next();t.getEdge().isVisited()||(n=t,t.getEdgeDirection()&&(i=t))}return null!==i?i:n}static findLowestDegreeNode(t){let i=R.MAX_VALUE,n=null;for(let r=t.nodeIterator();r.hasNext();){let t=r.next();(null===n||t.getDegree()<i)&&(i=t.getDegree(),n=t)}return n}static isSequenced(t){if(!(t instanceof tv))return!0;let i=new tA,n=null,r=new S;for(let s=0;s<t.getNumGeometries();s++){let o=t.getGeometryN(s),a=o.getCoordinateN(0),l=o.getCoordinateN(o.getNumPoints()-1);if(i.contains(a)||i.contains(l))return!1;null!==n&&(a.equals(n)||(i.addAll(r),r.clear())),r.add(a),r.add(l),n=l}return!0}static reverse(t){let i=t.getCoordinates(),n=Array(i.length).fill(null),r=i.length;for(let t=0;t<r;t++)n[r-1-t]=new m(i[t]);return t.getFactory().createLineString(n)}static sequence(t){let i=new rL;return i.add(t),i.getSequencedLineStrings()}computeSequence(){if(this._isRun)return null;this._isRun=!0;let t=this.findSequences();if(null===t)return null;this._sequencedGeometry=this.buildSequencedGeometry(t),this._isSequenceable=!0;let i=this._sequencedGeometry.getNumGeometries();c.isTrue(this._lineCount===i,"Lines were missing from result"),c.isTrue(this._sequencedGeometry instanceof te||this._sequencedGeometry instanceof tv,"Result is not lineal")}findSequences(){let t=new S;for(let i=new rI(this._graph).getConnectedSubgraphs().iterator();i.hasNext();){let n=i.next();if(!this.hasSequence(n))return null;{let i=this.findSequence(n);t.add(i)}}return t}addReverseSubpath(t,i,n){let r=t.getToNode(),s=null;for(;;){i.add(t.getSym()),t.getEdge().setVisited(!0),s=t.getFromNode();let n=rL.findUnvisitedBestOrientedDE(s);if(null===n)break;t=n.getSym()}n&&c.isTrue(s===r,"path not contiguous")}findSequence(t){rp.setVisited(t.edgeIterator(),!1);let i=rL.findLowestDegreeNode(t).getOutEdges().iterator().next().getSym(),n=new iv,r=n.listIterator();for(this.addReverseSubpath(i,r,!1);r.hasPrevious();){let t=r.previous(),i=rL.findUnvisitedBestOrientedDE(t.getFromNode());null!==i&&this.addReverseSubpath(i.getSym(),r,!0)}return this.orient(n)}reverse(t){let i=new iv;for(let n=t.iterator();n.hasNext();){let t=n.next();i.addFirst(t.getSym())}return i}add(){if(b(arguments[0],C))for(let t=arguments[0].iterator();t.hasNext();){let i=t.next();this.add(i)}else arguments[0]instanceof q&&arguments[0].apply(new class{get interfaces_(){return[K]}filter(t){t instanceof te&&this.addLine(t)}})}addLine(t){null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t),this._lineCount++}hasSequence(t){let i=0;for(let n=t.nodeIterator();n.hasNext();)n.next().getDegree()%2==1&&i++;return i<=2}orient(t){let i=t.get(0),n=t.get(t.size()-1),r=i.getFromNode(),s=n.getToNode(),o=!1;if(1===r.getDegree()||1===s.getDegree()){let t=!1;1===n.getToNode().getDegree()&&!1===n.getEdgeDirection()&&(t=!0,o=!0),1===i.getFromNode().getDegree()&&!0===i.getEdgeDirection()&&(t=!0,o=!1),t||1===i.getFromNode().getDegree()&&(o=!0)}return o?this.reverse(t):t}buildSequencedGeometry(t){let i=new S;for(let n=t.iterator();n.hasNext();)for(let t=n.next().iterator();t.hasNext();){let n=t.next(),r=n.getEdge().getLine(),s=r;n.getEdgeDirection()||r.isClosed()||(s=rL.reverse(r)),i.add(s)}return 0===i.size()?this._factory.createMultiLineString([].fill(null)):this._factory.buildGeometry(i)}getSequencedLineStrings(){return this.computeSequence(),this._sequencedGeometry}isSequenceable(){return this.computeSequence(),this._isSequenceable}}var rF=Object.freeze({__proto__:null,LineMerger:rB,LineSequencer:rL}),rM=Object.freeze({__proto__:null,OverlayOp:nw,snap:Object.freeze({__proto__:null,GeometrySnapper:i3,LineStringSnapper:i4})});class rT{constructor(){rT.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=new tS,this._geomGraph=null,this._disconnectedRingcoord=null;let t=arguments[0];this._geomGraph=t}static findDifferentPoint(t,i){for(let n=0;n<t.length;n++)if(!t[n].equals(i))return t[n];return null}visitInteriorRing(t,i){if(t.isEmpty())return null;let n=t.getCoordinates(),r=n[0],s=rT.findDifferentPoint(n,r),o=i.findEdgeInSameDirection(r,s),a=i.findEdgeEnd(o),l=null;a.getLabel().getLocation(0,im.RIGHT)===tG.INTERIOR?l=a:a.getSym().getLabel().getLocation(0,im.RIGHT)===tG.INTERIOR&&(l=a.getSym()),c.isTrue(null!==l,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(l)}visitShellInteriors(t,i){if(t instanceof tE&&this.visitInteriorRing(t.getExteriorRing(),i),t instanceof tg)for(let n=0;n<t.getNumGeometries();n++){let r=t.getGeometryN(n);this.visitInteriorRing(r.getExteriorRing(),i)}}getCoordinate(){return this._disconnectedRingcoord}setInteriorEdgesInResult(t){for(let i=t.getEdgeEnds().iterator();i.hasNext();){let t=i.next();t.getLabel().getLocation(0,im.RIGHT)===tG.INTERIOR&&t.setInResult(!0)}}visitLinkedDirectedEdges(t){let i=t;do c.isTrue(null!==i,"found null Directed Edge"),i.setVisited(!0),i=i.getNext();while(i!==t)}buildEdgeRings(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next();if(t.isInResult()&&null===t.getEdgeRing()){let n=new iN(t,this._geometryFactory);n.linkDirectedEdgesForMinimalEdgeRings();let r=n.buildMinimalRings();i.addAll(r)}}return i}hasUnvisitedShellEdge(t){for(let i=0;i<t.size();i++){let n=t.get(i);if(n.isHole())continue;let r=n.getEdges(),s=r.get(0);if(s.getLabel().getLocation(0,im.RIGHT)===tG.INTERIOR){for(let t=0;t<r.size();t++)if(!(s=r.get(t)).isVisited())return this._disconnectedRingcoord=s.getCoordinate(),!0}}return!1}isInteriorsConnected(){let t=new S;this._geomGraph.computeSplitEdges(t);let i=new iD(new iK);i.addEdges(t),this.setInteriorEdgesInResult(i),i.linkResultDirectedEdges();let n=this.buildEdgeRings(i.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),i),!this.hasUnvisitedShellEdge(n)}}class rR{computeEdgeEnds(){if(1==arguments.length){let t=arguments[0],i=new S;for(;t.hasNext();){let n=t.next();this.computeEdgeEnds(n,i)}return i}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=t.getEdgeIntersectionList();n.addEndpoints();let r=n.iterator(),s=null,o=null;if(!r.hasNext())return null;let a=r.next();do s=o,o=a,a=null,r.hasNext()&&(a=r.next()),null!==o&&(this.createEdgeEndForPrev(t,i,o,s),this.createEdgeEndForNext(t,i,o,a));while(null!==o)}}createEdgeEndForNext(t,i,n,r){let s=n.segmentIndex+1;if(s>=t.getNumPoints()&&null===r)return null;let o=t.getCoordinate(s);null!==r&&r.segmentIndex===n.segmentIndex&&(o=r.coord);let a=new iR(t,n.coord,o,new iI(t.getLabel()));i.add(a)}createEdgeEndForPrev(t,i,n,r){let s=n.segmentIndex;if(0===n.dist){if(0===s)return null;s--}let o=t.getCoordinate(s);null!==r&&r.segmentIndex>=s&&(o=r.coord);let a=new iI(t.getLabel());a.flip();let l=new iR(t,n.coord,o,a);i.add(l)}}class rO extends iR{constructor(){super(),rO.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new S,1==arguments.length){let t=arguments[0];rO.constructor_.call(this,null,t)}else if(2==arguments.length){let t=arguments[1];iR.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new iI(t.getLabel())),this.insert(t)}}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(let i=this.iterator();i.hasNext();)i.next().print(t),t.println()}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,i){let n=0,r=!1;for(let i=this.iterator();i.hasNext();){let s=i.next().getLabel().getLocation(t);s===tG.BOUNDARY&&n++,s===tG.INTERIOR&&(r=!0)}let s=tG.NONE;r&&(s=tG.INTERIOR),n>0&&(s=n_.determineBoundary(i,n)),this._label.setLocation(t,s)}computeLabelSide(t,i){for(let n=this.iterator();n.hasNext();){let r=n.next();if(r.getLabel().isArea()){let n=r.getLabel().getLocation(t,i);if(n===tG.INTERIOR)return this._label.setLocation(t,i,tG.INTERIOR),null;n===tG.EXTERIOR&&this._label.setLocation(t,i,tG.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,im.LEFT),this.computeLabelSide(t,im.RIGHT)}updateIM(t){i1.updateIM(this._label,t)}computeLabel(t){let i=!1;for(let t=this.iterator();t.hasNext();)t.next().getLabel().isArea()&&(i=!0);this._label=i?new iI(tG.NONE,tG.NONE,tG.NONE):new iI(tG.NONE);for(let n=0;n<2;n++)this.computeLabelOn(n,t),i&&this.computeLabelSides(n)}}class rD extends iV{constructor(){super()}updateIM(t){for(let i=this.iterator();i.hasNext();)i.next().updateIM(t)}insert(t){let i=this._edgeMap.get(t);null===i?(i=new rO(t),this.insertEdgeEnd(t,i)):i.insert(t)}}class rP extends iF{constructor(){super(),rP.constructor_.apply(this,arguments)}static constructor_(){let t=arguments[0],i=arguments[1];iF.constructor_.call(this,t,i)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}updateIMFromEdges(t){this._edges.updateIM(t)}}class rk extends iT{constructor(){super()}createNode(t){return new rP(t,new rD)}}class rN{constructor(){rN.constructor_.apply(this,arguments)}static constructor_(){this._nodes=new iM(new rk)}insertEdgeEnds(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this._nodes.add(t)}}getNodeIterator(){return this._nodes.iterator()}copyNodesAndLabels(t,i){for(let n=t.getNodeIterator();n.hasNext();){let t=n.next();this._nodes.addNode(t.getCoordinate()).setLabel(i,t.getLabel().getLocation(i))}}build(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);let i=(new rR).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(i)}computeIntersectionNodes(t,i){for(let n=t.getEdgeIterator();n.hasNext();){let t=n.next(),r=t.getLabel().getLocation(i);for(let n=t.getEdgeIntersectionList().iterator();n.hasNext();){let t=n.next(),s=this._nodes.addNode(t.coord);r===tG.BOUNDARY?s.setLabelBoundary(i):s.getLabel().isNull(i)&&s.setLabel(i,tG.INTERIOR)}}}}class rU{constructor(){rU.constructor_.apply(this,arguments)}static constructor_(){this._li=new tQ,this._geomGraph=null,this._nodeGraph=new rN,this._invalidPoint=null;let t=arguments[0];this._geomGraph=t}isNodeEdgeAreaLabelsConsistent(){for(let t=this._nodeGraph.getNodeIterator();t.hasNext();){let i=t.next();if(!i.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=i.getCoordinate().copy(),!1}return!0}hasDuplicateRings(){for(let t=this._nodeGraph.getNodeIterator();t.hasNext();)for(let i=t.next().getEdges().iterator();i.hasNext();){let t=i.next();if(t.getEdgeEnds().size()>1)return this._invalidPoint=t.getEdge().getCoordinate(0),!0}return!1}isNodeConsistentArea(){let t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}getInvalidPoint(){return this._invalidPoint}}class rQ{constructor(){rQ.constructor_.apply(this,arguments)}static constructor_(){this._graph=null,this._rings=new S,this._totalEnv=new M,this._index=null,this._nestedPt=null;let t=arguments[0];this._graph=t}add(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())}getNestedPoint(){return this._nestedPt}buildIndex(){this._index=new e9;for(let t=0;t<this._rings.size();t++){let i=this._rings.get(t),n=i.getEnvelopeInternal();this._index.insert(n,i)}}isNonNested(){this.buildIndex();for(let t=0;t<this._rings.size();t++){let i=this._rings.get(t),n=i.getCoordinates(),r=this._index.query(i.getEnvelopeInternal());for(let t=0;t<r.size();t++){let s=r.get(t),o=s.getCoordinates();if(i===s||!i.getEnvelopeInternal().intersects(s.getEnvelopeInternal()))continue;let a=rG.findPtNotNode(n,s,this._graph);if(null!==a&&eI.isInRing(a,o))return this._nestedPt=a,!1}}return!0}}class rH{constructor(){rH.constructor_.apply(this,arguments)}static constructor_(){if(this._errorType=null,this._pt=null,1==arguments.length){let t=arguments[0];rH.constructor_.call(this,t,null)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._errorType=t,null!==i&&(this._pt=i.copy())}}getCoordinate(){return this._pt}getMessage(){return rH.errMsg[this._errorType]}toString(){let t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}getErrorType(){return this._errorType}}rH.ERROR=0,rH.REPEATED_POINT=1,rH.HOLE_OUTSIDE_SHELL=2,rH.NESTED_HOLES=3,rH.DISCONNECTED_INTERIOR=4,rH.SELF_INTERSECTION=5,rH.RING_SELF_INTERSECTION=6,rH.NESTED_SHELLS=7,rH.DUPLICATE_RINGS=8,rH.TOO_FEW_POINTS=9,rH.INVALID_COORDINATE=10,rH.RING_NOT_CLOSED=11,rH.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];class rG{constructor(){rG.constructor_.apply(this,arguments)}static constructor_(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null;let t=arguments[0];this._parentGeometry=t}static findPtNotNode(t,i,n){let r=n.findEdge(i).getEdgeIntersectionList();for(let i=0;i<t.length;i++){let n=t[i];if(!r.isIntersection(n))return n}return null}static isValid(){if(arguments[0]instanceof q)return new rG(arguments[0]).isValid();if(arguments[0]instanceof m){let t=arguments[0];return!o.isNaN(t.x)&&!o.isInfinite(t.x)&&!o.isNaN(t.y)&&!o.isInfinite(t.y)}}checkInvalidCoordinates(){if(arguments[0]instanceof Array){let t=arguments[0];for(let i=0;i<t.length;i++)if(!rG.isValid(t[i]))return this._validErr=new rH(rH.INVALID_COORDINATE,t[i]),null}else if(arguments[0]instanceof tE){let t=arguments[0];if(this.checkInvalidCoordinates(t.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(let i=0;i<t.getNumInteriorRing();i++)if(this.checkInvalidCoordinates(t.getInteriorRingN(i).getCoordinates()),null!==this._validErr)return null}}checkHolesNotNested(t,i){if(0>=t.getNumInteriorRing())return null;let n=new rQ(i);for(let i=0;i<t.getNumInteriorRing();i++){let r=t.getInteriorRingN(i);r.isEmpty()||n.add(r)}n.isNonNested()||(this._validErr=new rH(rH.NESTED_HOLES,n.getNestedPoint()))}checkConsistentArea(t){let i=new rU(t);if(!i.isNodeConsistentArea())return this._validErr=new rH(rH.SELF_INTERSECTION,i.getInvalidPoint()),null;i.hasDuplicateRings()&&(this._validErr=new rH(rH.DUPLICATE_RINGS,i.getInvalidPoint()))}isValid(){return this.checkValid(this._parentGeometry),null===this._validErr}checkShellInsideHole(t,i,n){let r=t.getCoordinates(),s=i.getCoordinates(),o=rG.findPtNotNode(r,i,n);if(null!==o&&!eI.isInRing(o,s))return o;let a=rG.findPtNotNode(s,t,n);return null!==a?eI.isInRing(a,r)?a:null:(c.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}checkNoSelfIntersectingRings(t){for(let i=t.getEdgeIterator();i.hasNext();){let t=i.next();if(this.checkNoSelfIntersectingRing(t.getEdgeIntersectionList()),null!==this._validErr)return null}}checkHolesInShell(t,i){if(0>=t.getNumInteriorRing())return null;let n=t.getExteriorRing(),r=n.isEmpty(),s=new eE(n);for(let o=0;o<t.getNumInteriorRing();o++){let a=t.getInteriorRingN(o),l=null;if(!a.isEmpty()){if(null===(l=rG.findPtNotNode(a.getCoordinates(),n,i)))return null;if(r||tG.EXTERIOR===s.locate(l))return this._validErr=new rH(rH.HOLE_OUTSIDE_SHELL,l),null}}}checkShellNotNested(t,i,n){let r=t.getCoordinates(),s=i.getExteriorRing();if(s.isEmpty())return null;let o=s.getCoordinates(),a=rG.findPtNotNode(r,s,n);if(null===a||!eI.isInRing(a,o))return null;if(0>=i.getNumInteriorRing())return this._validErr=new rH(rH.NESTED_SHELLS,a),null;let l=null;for(let r=0;r<i.getNumInteriorRing();r++){let s=i.getInteriorRingN(r);if(null===(l=this.checkShellInsideHole(t,s,n)))return null}this._validErr=new rH(rH.NESTED_SHELLS,l)}checkClosedRings(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(let i=0;i<t.getNumInteriorRing();i++)if(this.checkClosedRing(t.getInteriorRingN(i)),null!==this._validErr)return null}checkConnectedInteriors(t){let i=new rT(t);i.isInteriorsConnected()||(this._validErr=new rH(rH.DISCONNECTED_INTERIOR,i.getCoordinate()))}checkNoSelfIntersectingRing(t){let i=new tA,n=!0;for(let r=t.iterator();r.hasNext();){let t=r.next();if(n)n=!1;else{if(i.contains(t.coord))return this._validErr=new rH(rH.RING_SELF_INTERSECTION,t.coord),null;i.add(t.coord)}}}checkTooFewPoints(t){if(t.hasTooFewPoints())return this._validErr=new rH(rH.TOO_FEW_POINTS,t.getInvalidPoint()),null}getValidationError(){return this.checkValid(this._parentGeometry),this._validErr}checkValid(){if(arguments[0]instanceof tC){let t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof tB){let t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof ti){let t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr||(this.checkClosedRing(t),null!==this._validErr))return null;let i=new n_(0,t);if(this.checkTooFewPoints(i),null!==this._validErr)return null;let n=new tQ;i.computeSelfNodes(n,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof te){let t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;let i=new n_(0,t);this.checkTooFewPoints(i)}else if(arguments[0]instanceof tE){let t=arguments[0];if(this.checkInvalidCoordinates(t),null!==this._validErr||(this.checkClosedRings(t),null!==this._validErr))return null;let i=new n_(0,t);if(this.checkTooFewPoints(i),null!==this._validErr||(this.checkConsistentArea(i),null!==this._validErr)||!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this._validErr)||(this.checkHolesInShell(t,i),null!==this._validErr)||(this.checkHolesNotNested(t,i),null!==this._validErr))return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof tg){let t=arguments[0];for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);if(this.checkInvalidCoordinates(n),null!==this._validErr||(this.checkClosedRings(n),null!==this._validErr))return null}let i=new n_(0,t);if(this.checkTooFewPoints(i),null!==this._validErr||(this.checkConsistentArea(i),null!==this._validErr)||!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this._validErr))return null;for(let n=0;n<t.getNumGeometries();n++){let r=t.getGeometryN(n);if(this.checkHolesInShell(r,i),null!==this._validErr)return null}for(let n=0;n<t.getNumGeometries();n++){let r=t.getGeometryN(n);if(this.checkHolesNotNested(r,i),null!==this._validErr)return null}if(this.checkShellsNotNested(t,i),null!==this._validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof tu){let t=arguments[0];for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);if(this.checkValid(n),null!==this._validErr)return null}}else if(arguments[0]instanceof q){let t=arguments[0];if(this._validErr=null,t.isEmpty())return null;if(t instanceof tC)this.checkValid(t);else if(t instanceof tB)this.checkValid(t);else if(t instanceof ti)this.checkValid(t);else if(t instanceof te)this.checkValid(t);else if(t instanceof tE)this.checkValid(t);else if(t instanceof tg)this.checkValid(t);else{if(!(t instanceof tu))throw new j(t.getGeometryType());this.checkValid(t)}}}setSelfTouchingRingFormingHoleValid(t){this._isSelfTouchingRingFormingHoleValid=t}checkClosedRing(t){if(t.isEmpty())return null;if(!t.isClosed()){let i=null;t.getNumPoints()>=1&&(i=t.getCoordinateN(0)),this._validErr=new rH(rH.RING_NOT_CLOSED,i)}}checkShellsNotNested(t,i){for(let n=0;n<t.getNumGeometries();n++){let r=t.getGeometryN(n).getExteriorRing();for(let s=0;s<t.getNumGeometries();s++){if(n===s)continue;let o=t.getGeometryN(s);if(this.checkShellNotNested(r,o,i),null!==this._validErr)return null}}}}class rV{constructor(){rV.constructor_.apply(this,arguments)}static constructor_(){this._factory=null,this._deList=new S,this._lowestEdge=null,this._ring=null,this._locator=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;let t=arguments[0];this._factory=t}static findEdgeRingContaining(t,i){let n=t.getRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,a=null;for(let t=i.iterator();t.hasNext();){let i=t.next(),l=i.getRing().getEnvelopeInternal();!l.equals(r)&&l.contains(r)&&(s=$.ptNotInList(n.getCoordinates(),i.getCoordinates()),i.isInRing(s)&&(null===o||a.contains(l))&&(a=(o=i).getRing().getEnvelopeInternal()))}return o}static addEdge(t,i,n){if(i)for(let i=0;i<t.length;i++)n.add(t[i],!1);else for(let i=t.length-1;i>=0;i--)n.add(t[i],!1)}static findDirEdgesInRing(t){let i=t,n=new S;do n.add(i),i=i.getNext(),c.isTrue(null!==i,"found null DE in ring"),c.isTrue(i===t||!i.isInRing(),"found DE already in ring");while(i!==t)return n}isIncluded(){return this._isIncluded}getCoordinates(){if(null===this._ringPts){let t=new L;for(let i=this._deList.iterator();i.hasNext();){let n=i.next(),r=n.getEdge();rV.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),t)}this._ringPts=t.toCoordinateArray()}return this._ringPts}build(t){let i=t;do this.add(i),i.setRing(this),i=i.getNext(),c.isTrue(null!==i,"found null DE in ring"),c.isTrue(i===t||!i.isInRing(),"found DE already in ring");while(i!==t)}isInRing(t){return tG.EXTERIOR!==this.getLocator().locate(t)}addHole(){if(arguments[0]instanceof ti){let t=arguments[0];null===this._holes&&(this._holes=new S),this._holes.add(t)}else if(arguments[0]instanceof rV){let t=arguments[0];t.setShell(this);let i=t.getRing();null===this._holes&&(this._holes=new S),this._holes.add(i)}}computeHole(){let t=this.getRing();this._isHole=U.isCCW(t.getCoordinates())}getLocator(){return null===this._locator&&(this._locator=new eE(this.getRing())),this._locator}getShell(){return this.isHole()?this._shell:this}updateIncluded(){if(this.isHole())return null;for(let t=0;t<this._deList.size();t++){let i=this._deList.get(t).getSym().getRing().getShell();if(null!==i&&i.isIncludedSet())return this.setIncluded(!i.isIncluded()),null}}setShell(t){this._shell=t}setProcessed(t){this._isProcessed=t}isIncludedSet(){return this._isIncludedSet}isValid(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),rG.isValid(this._ring))}isOuterHole(){return!!this._isHole&&!this.hasShell()}getPolygon(){let t=null;if(null!==this._holes){t=Array(this._holes.size()).fill(null);for(let i=0;i<this._holes.size();i++)t[i]=this._holes.get(i)}return this._factory.createPolygon(this._ring,t)}isHole(){return this._isHole}isProcessed(){return this._isProcessed}setIncluded(t){this._isIncluded=t,this._isIncludedSet=!0}getOuterHole(){if(this.isHole())return null;for(let t=0;t<this._deList.size();t++){let i=this._deList.get(t).getSym().getRing();if(i.isOuterHole())return i}return null}hasShell(){return null!==this._shell}isOuterShell(){return null!==this.getOuterHole()}getLineString(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)}toString(){return tN.toLineString(new ts(this.getCoordinates()))}add(t){this._deList.add(t)}getRing(){if(null!==this._ring)return this._ring;this.getCoordinates(),this._ringPts.length<3&&H.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(t){if(!(t instanceof n))throw t;H.out.println(this._ringPts)}return this._ring}}rV.EnvelopeComparator=class{compare(t,i){return t.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())}get interfaces_(){return[d]}};class rz{constructor(){rz.constructor_.apply(this,arguments)}static constructor_(){this._shells=null,this._shellIndex=null;let t=arguments[0];this._shells=t,this.buildIndex()}static assignHolesToShells(t,i){new rz(i).assignHolesToShells(t)}assignHolesToShells(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this.assignHoleToShell(t)}}buildIndex(){for(let t of(this._shellIndex=new e9,this._shells))this._shellIndex.insert(t.getRing().getEnvelopeInternal(),t)}queryOverlappingShells(t){return this._shellIndex.query(t)}findShellContaining(t){let i=t.getRing().getEnvelopeInternal(),n=this.queryOverlappingShells(i);return rV.findEdgeRingContaining(t,n)}assignHoleToShell(t){let i=this.findShellContaining(t);null!==i&&i.addHole(t)}}class rK extends rm{constructor(){super(),rK.constructor_.apply(this,arguments)}static constructor_(){this._edgeRing=null,this._next=null,this._label=-1;let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];rm.constructor_.call(this,t,i,n,r)}getNext(){return this._next}isInRing(){return null!==this._edgeRing}setRing(t){this._edgeRing=t}setLabel(t){this._label=t}getLabel(){return this._label}setNext(t){this._next=t}getRing(){return this._edgeRing}}class rj extends ry{constructor(){super(),rj.constructor_.apply(this,arguments)}static constructor_(){this._line=null;let t=arguments[0];this._line=t}getLine(){return this._line}}class rW extends rx{constructor(){super(),rW.constructor_.apply(this,arguments)}static constructor_(){this._factory=null;let t=arguments[0];this._factory=t}static findLabeledEdgeRings(t){let i=new S,n=1;for(let r=t.iterator();r.hasNext();){let t=r.next();if(t.isMarked()||t.getLabel()>=0)continue;i.add(t);let s=rV.findDirEdgesInRing(t);rW.label(s,n),n++}return i}static getDegreeNonDeleted(t){let i=0;for(let n=t.getOutEdges().getEdges().iterator();n.hasNext();)n.next().isMarked()||i++;return i}static deleteAllEdges(t){for(let i=t.getOutEdges().getEdges().iterator();i.hasNext();){let t=i.next();t.setMarked(!0);let n=t.getSym();null!==n&&n.setMarked(!0)}}static label(t,i){for(let n=t.iterator();n.hasNext();)n.next().setLabel(i)}static computeNextCWEdges(t){let i=null,n=null;for(let r=t.getOutEdges().getEdges().iterator();r.hasNext();){let t=r.next();t.isMarked()||(null===i&&(i=t),null!==n&&n.getSym().setNext(t),n=t)}null!==n&&n.getSym().setNext(i)}static computeNextCCWEdges(t,i){let n=null,r=null,s=t.getOutEdges().getEdges();for(let t=s.size()-1;t>=0;t--){let o=s.get(t),a=o.getSym(),l=null;o.getLabel()===i&&(l=o);let A=null;a.getLabel()===i&&(A=a),null===l&&null===A||(null!==A&&(r=A),null!==l&&(null!==r&&(r.setNext(l),r=null),null===n&&(n=l)))}null!==r&&(c.isTrue(null!==n),r.setNext(n))}static getDegree(t,i){let n=0;for(let r=t.getOutEdges().getEdges().iterator();r.hasNext();)r.next().getLabel()===i&&n++;return n}static findIntersectionNodes(t,i){let n=t,r=null;do{let s=n.getFromNode();rW.getDegree(s,i)>1&&(null===r&&(r=new S),r.add(s)),n=n.getNext(),c.isTrue(null!==n,"found null DE in ring"),c.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t)return r}findEdgeRing(t){let i=new rV(this._factory);return i.build(t),i}computeDepthParity(){if(0==arguments.length)for(;;)return null}computeNextCWEdges(){for(let t=this.nodeIterator();t.hasNext();){let i=t.next();rW.computeNextCWEdges(i)}}addEdge(t){if(t.isEmpty())return null;let i=$.removeRepeatedPoints(t.getCoordinates());if(i.length<2)return null;let n=i[0],r=i[i.length-1],s=this.getNode(n),o=this.getNode(r),a=new rK(s,o,i[1],!0),l=new rK(o,s,i[i.length-2],!1),A=new rj(t);A.setDirectedEdges(a,l),this.add(A)}deleteCutEdges(){this.computeNextCWEdges(),rW.findLabeledEdgeRings(this._dirEdges);let t=new S;for(let i=this._dirEdges.iterator();i.hasNext();){let n=i.next();if(n.isMarked())continue;let r=n.getSym();if(n.getLabel()===r.getLabel()){n.setMarked(!0),r.setMarked(!0);let i=n.getEdge();t.add(i.getLine())}}return t}getEdgeRings(){this.computeNextCWEdges(),rW.label(this._dirEdges,-1);let t=rW.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(t);let i=new S;for(let t=this._dirEdges.iterator();t.hasNext();){let n=t.next();if(n.isMarked()||n.isInRing())continue;let r=this.findEdgeRing(n);i.add(r)}return i}getNode(t){let i=this.findNode(t);return null===i&&(i=new rv(t),this.add(i)),i}convertMaximalToMinimalEdgeRings(t){for(let i=t.iterator();i.hasNext();){let t=i.next(),n=t.getLabel(),r=rW.findIntersectionNodes(t,n);if(null!==r)for(let t=r.iterator();t.hasNext();){let i=t.next();rW.computeNextCCWEdges(i,n)}}}deleteDangles(){let t=this.findNodesOfDegree(1),i=new tp,n=new iy;for(let i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){let t=n.pop();rW.deleteAllEdges(t);for(let r=t.getOutEdges().getEdges().iterator();r.hasNext();){let t=r.next();t.setMarked(!0);let s=t.getSym();null!==s&&s.setMarked(!0);let o=t.getEdge();i.add(o.getLine());let a=t.getToNode();1===rW.getDegreeNonDeleted(a)&&n.push(a)}}return i}}class r${constructor(){r$.constructor_.apply(this,arguments)}static constructor_(){if(this._lineStringAdder=new rY(this),this._graph=null,this._dangles=new S,this._cutEdges=new S,this._invalidRingLines=new S,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0==arguments.length)r$.constructor_.call(this,!1);else if(1==arguments.length){let t=arguments[0];this._extractOnlyPolygonal=t}}static findOuterShells(t){for(let i=t.iterator();i.hasNext();){let t=i.next(),n=t.getOuterHole();null===n||n.isProcessed()||(t.setIncluded(!0),n.setProcessed(!0))}}static extractPolygons(t,i){let n=new S;for(let r=t.iterator();r.hasNext();){let t=r.next();(i||t.isIncluded())&&n.add(t.getPolygon())}return n}static findDisjointShells(t){r$.findOuterShells(t);let i=null;do{i=!1;for(let n=t.iterator();n.hasNext();){let t=n.next();t.isIncludedSet()||(t.updateIncluded(),t.isIncludedSet()||(i=!0))}}while(i)}getGeometry(){return null===this._geomFactory&&(this._geomFactory=new tS),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(tS.toGeometryArray(this._polyList))}getInvalidRingLines(){return this.polygonize(),this._invalidRingLines}findValidRings(t,i,n){for(let r=t.iterator();r.hasNext();){let t=r.next();t.isValid()?i.add(t):n.add(t.getLineString())}}polygonize(){if(null!==this._polyList||(this._polyList=new S,null===this._graph))return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();let t=this._graph.getEdgeRings(),i=new S;this._invalidRingLines=new S,this._isCheckingRingsValid?this.findValidRings(t,i,this._invalidRingLines):i=t,this.findShellsAndHoles(i),rz.assignHolesToShells(this._holeList,this._shellList),et.sort(this._shellList,new rV.EnvelopeComparator);let n=!0;this._extractOnlyPolygonal&&(r$.findDisjointShells(this._shellList),n=!1),this._polyList=r$.extractPolygons(this._shellList,n)}getDangles(){return this.polygonize(),this._dangles}add(){if(b(arguments[0],C))for(let t=arguments[0].iterator();t.hasNext();){let i=t.next();this.add(i)}else if(arguments[0]instanceof te){let t=arguments[0];this._geomFactory=t.getFactory(),null===this._graph&&(this._graph=new rW(this._geomFactory)),this._graph.addEdge(t)}else arguments[0]instanceof q&&arguments[0].apply(this._lineStringAdder)}setCheckRingsValid(t){this._isCheckingRingsValid=t}findShellsAndHoles(t){this._holeList=new S,this._shellList=new S;for(let i=t.iterator();i.hasNext();){let t=i.next();t.computeHole(),t.isHole()?this._holeList.add(t):this._shellList.add(t)}}getCutEdges(){return this.polygonize(),this._cutEdges}getPolygons(){return this.polygonize(),this._polyList}}class rY{constructor(){rY.constructor_.apply(this,arguments)}static constructor_(){this.p=null;let t=arguments[0];this.p=t}filter(t){t instanceof te&&this.p.add(t)}get interfaces_(){return[K]}}r$.LineStringAdder=rY;var rq=Object.freeze({__proto__:null,Polygonizer:r$});class rX{constructor(){rX.constructor_.apply(this,arguments)}static constructor_(){this._li=new tQ,this._ptLocator=new nl,this._arg=null,this._nodes=new iM(new rk),this._im=null,this._isolatedEdges=new S,this._invalidPoint=null;let t=arguments[0];this._arg=t}insertEdgeEnds(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this._nodes.add(t)}}computeProperIntersectionIM(t,i){let n=this._arg[0].getGeometry().getDimension(),r=this._arg[1].getGeometry().getDimension(),s=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===r?s&&i.setAtLeast("212101212"):2===n&&1===r?(s&&i.setAtLeast("FFF0FFFF2"),o&&i.setAtLeast("1FFFFF1FF")):1===n&&2===r?(s&&i.setAtLeast("F0FFFFFF2"),o&&i.setAtLeast("1F1FFFFFF")):1===n&&1===r&&o&&i.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,i){for(let n=this._arg[t].getEdgeIterator();n.hasNext();){let t=n.next();t.isIsolated()&&(this.labelIsolatedEdge(t,i,this._arg[i].getGeometry()),this._isolatedEdges.add(t))}}labelIsolatedEdge(t,i,n){if(n.getDimension()>0){let r=this._ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(i,r)}else t.getLabel().setAllLocations(i,tG.EXTERIOR)}computeIM(){let t=new tV;if(t.set(tG.EXTERIOR,tG.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);let i=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(i,t);let n=new rR,r=n.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(r);let s=n.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg)}copyNodesAndLabels(t){for(let i=this._arg[t].getNodeIterator();i.hasNext();){let n=i.next();this._nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(let i=this._arg[t].getEdgeIterator();i.hasNext();){let n=i.next(),r=n.getLabel().getLocation(t);for(let i=n.getEdgeIntersectionList().iterator();i.hasNext();){let n=i.next(),s=this._nodes.find(n.coord);s.getLabel().isNull(t)&&(r===tG.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,tG.INTERIOR))}}}labelIsolatedNode(t,i){let n=this._ptLocator.locate(t.getCoordinate(),this._arg[i].getGeometry());t.getLabel().setAllLocations(i,n)}computeIntersectionNodes(t){for(let i=this._arg[t].getEdgeIterator();i.hasNext();){let n=i.next(),r=n.getLabel().getLocation(t);for(let i=n.getEdgeIntersectionList().iterator();i.hasNext();){let n=i.next(),s=this._nodes.addNode(n.coord);r===tG.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,tG.INTERIOR)}}}labelIsolatedNodes(){for(let t=this._nodes.iterator();t.hasNext();){let i=t.next(),n=i.getLabel();c.isTrue(n.getGeometryCount()>0,"node with empty label found"),i.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(i,0):this.labelIsolatedNode(i,1))}}updateIM(t){for(let i=this._isolatedEdges.iterator();i.hasNext();)i.next().updateIM(t);for(let i=this._nodes.iterator();i.hasNext();){let n=i.next();n.updateIM(t),n.updateIMFromEdges(t)}}computeDisjointIM(t){let i=this._arg[0].getGeometry();i.isEmpty()||(t.set(tG.INTERIOR,tG.EXTERIOR,i.getDimension()),t.set(tG.BOUNDARY,tG.EXTERIOR,i.getBoundaryDimension()));let n=this._arg[1].getGeometry();n.isEmpty()||(t.set(tG.EXTERIOR,tG.INTERIOR,n.getDimension()),t.set(tG.EXTERIOR,tG.BOUNDARY,n.getBoundaryDimension()))}}class rZ{constructor(){rZ.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal()}static contains(t,i){return new rZ(t).contains(i)}isContainedInBoundary(t){if(t instanceof tE)return!1;if(t instanceof tC)return this.isPointContainedInBoundary(t);if(t instanceof te)return this.isLineStringContainedInBoundary(t);for(let i=0;i<t.getNumGeometries();i++){let n=t.getGeometryN(i);if(!this.isContainedInBoundary(n))return!1}return!0}isLineSegmentContainedInBoundary(t,i){if(t.equals(i))return this.isPointContainedInBoundary(t);if(t.x===i.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===i.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){let i=t.getCoordinateSequence(),n=new m,r=new m;for(let t=0;t<i.size()-1;t++)if(i.getCoordinate(t,n),i.getCoordinate(t+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof tC){let t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof m){let t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}}class rJ{constructor(){rJ.constructor_.apply(this,arguments)}static constructor_(){this._li=new tQ,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;let t=arguments[0];this._rectEnv=t,this._diagUp0=new m(t.getMinX(),t.getMinY()),this._diagUp1=new m(t.getMaxX(),t.getMaxY()),this._diagDown0=new m(t.getMinX(),t.getMaxY()),this._diagDown1=new m(t.getMaxX(),t.getMinY())}intersects(t,i){let n=new M(t,i);if(!this._rectEnv.intersects(n))return!1;if(this._rectEnv.intersects(t)||this._rectEnv.intersects(i))return!0;if(t.compareTo(i)>0){let n=t;t=i,i=n}let r=!1;return i.y>t.y&&(r=!0),r?this._li.computeIntersection(t,i,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,i,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}}class r0{constructor(){r0.constructor_.apply(this,arguments)}static constructor_(){this._rectangle=null,this._rectEnv=null;let t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()}static intersects(t,i){return new r0(t).intersects(i)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;let i=new r1(this._rectEnv);if(i.applyTo(t),i.intersects())return!0;let n=new r2(this._rectangle);if(n.applyTo(t),n.containsPoint())return!0;let r=new r5(this._rectangle);return r.applyTo(t),!!r.intersects()}}class r1 extends en{constructor(){super(),r1.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._intersects=!1;let t=arguments[0];this._rectEnv=t}intersects(){return this._intersects}visit(t){let i=t.getEnvelopeInternal();return this._rectEnv.intersects(i)?this._rectEnv.contains(i)||i.getMinX()>=this._rectEnv.getMinX()&&i.getMaxX()<=this._rectEnv.getMaxX()||i.getMinY()>=this._rectEnv.getMinY()&&i.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}isDone(){return!0===this._intersects}}class r2 extends en{constructor(){super(),r2.constructor_.apply(this,arguments)}static constructor_(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;let t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()}visit(t){if(!(t instanceof tE))return null;let i=t.getEnvelopeInternal();if(!this._rectEnv.intersects(i))return null;let n=new m;for(let r=0;r<4;r++)if(this._rectSeq.getCoordinate(r,n),i.contains(n)&&eM.containsPointInPolygon(n,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}isDone(){return!0===this._containsPoint}}class r5 extends en{constructor(){super(),r5.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new m,this._p1=new m;let t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new rJ(this._rectEnv)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){let i=t.getEnvelopeInternal();if(!this._rectEnv.intersects(i))return null;let n=t9.getLines(t);this.checkIntersectionWithLineStrings(n)}checkIntersectionWithLineStrings(t){for(let i=t.iterator();i.hasNext();){let t=i.next();if(this.checkIntersectionWithSegments(t),this._hasIntersection)return null}}checkIntersectionWithSegments(t){let i=t.getCoordinateSequence();for(let t=1;t<i.size();t++)if(i.getCoordinate(t-1,this._p0),i.getCoordinate(t,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}}class r4 extends ny{constructor(){super(),r4.constructor_.apply(this,arguments)}static constructor_(){if(this._relate=null,2==arguments.length){let t=arguments[0],i=arguments[1];ny.constructor_.call(this,t,i),this._relate=new rX(this._arg)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];ny.constructor_.call(this,t,i,n),this._relate=new rX(this._arg)}}static equalsTopo(t,i){return!!t.getEnvelopeInternal().equals(i.getEnvelopeInternal())&&r4.relate(t,i).isEquals(t.getDimension(),i.getDimension())}static relate(){return 2==arguments.length?new r4(arguments[0],arguments[1]).getIntersectionMatrix():3==arguments.length?new r4(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0}static overlaps(t,i){return!!t.getEnvelopeInternal().intersects(i.getEnvelopeInternal())&&new r4(t,i).getIntersectionMatrix().isOverlaps(t.getDimension(),i.getDimension())}static disjoint(t,i){return!r4.intersects(t,i)}static covers(t,i){return!(2===i.getDimension()&&2>t.getDimension())&&!(1===i.getDimension()&&1>t.getDimension()&&i.getLength()>0)&&!!t.getEnvelopeInternal().covers(i.getEnvelopeInternal())&&(!!t.isRectangle()||new r4(t,i).getIntersectionMatrix().isCovers())}static intersects(t,i){if(!t.getEnvelopeInternal().intersects(i.getEnvelopeInternal()))return!1;if(t.isRectangle())return r0.intersects(t,i);if(i.isRectangle())return r0.intersects(i,t);if(t.isGeometryCollection()||i.isGeometryCollection()){for(let n=0;n<t.getNumGeometries();n++)for(let r=0;r<i.getNumGeometries();r++)if(r4.intersects(t.getGeometryN(n),i.getGeometryN(r)))return!0;return!1}return new r4(t,i).getIntersectionMatrix().isIntersects()}static touches(t,i){return!!t.getEnvelopeInternal().intersects(i.getEnvelopeInternal())&&new r4(t,i).getIntersectionMatrix().isTouches(t.getDimension(),i.getDimension())}static crosses(t,i){return!!t.getEnvelopeInternal().intersects(i.getEnvelopeInternal())&&new r4(t,i).getIntersectionMatrix().isCrosses(t.getDimension(),i.getDimension())}static contains(t,i){return!(2===i.getDimension()&&2>t.getDimension())&&!(1===i.getDimension()&&1>t.getDimension()&&i.getLength()>0)&&!!t.getEnvelopeInternal().contains(i.getEnvelopeInternal())&&(t.isRectangle()?rZ.contains(t,i):new r4(t,i).getIntersectionMatrix().isContains())}getIntersectionMatrix(){return this._relate.computeIM()}}var r3=Object.freeze({__proto__:null,RelateOp:r4});class r6{constructor(){r6.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._polygons=new S,this._lines=new S,this._points=new S,this._dimension=Y.FALSE}static extract(){if(b(arguments[0],C)||arguments[0]instanceof q){let t=arguments[0],i=new r6;return i.add(t),i}}getFactory(){return this._geomFactory}filter(t){return this.recordDimension(t.getDimension()),t instanceof tu||t.isEmpty()?null:t instanceof tE?(this._polygons.add(t),null):t instanceof te?(this._lines.add(t),null):t instanceof tC?(this._points.add(t),null):void c.shouldNeverReachHere("Unhandled geometry type: "+t.getGeometryType())}getExtract(t){switch(t){case 0:return this._points;case 1:return this._lines;case 2:return this._polygons}return c.shouldNeverReachHere("Invalid dimension: "+t),null}recordDimension(t){t>this._dimension&&(this._dimension=t)}getDimension(){return this._dimension}isEmpty(){return this._polygons.isEmpty()&&this._lines.isEmpty()&&this._points.isEmpty()}add(){if(b(arguments[0],C)){let t=arguments[0];for(let i of t)this.add(i)}else if(arguments[0]instanceof q){let t=arguments[0];null===this._geomFactory&&(this._geomFactory=t.getFactory()),t.apply(this)}}get interfaces_(){return[tt]}}class r8{constructor(){r8.constructor_.apply(this,arguments)}static constructor_(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;let t=arguments[0],i=arguments[1];this._pointGeom=t,this._otherGeom=i,this._geomFact=i.getFactory()}static union(t,i){return new r8(t,i).union()}union(){let t=new nl,i=new tA;for(let n=0;n<this._pointGeom.getNumGeometries();n++){let r=this._pointGeom.getGeometryN(n).getCoordinate();t.locate(r,this._otherGeom)===tG.EXTERIOR&&i.add(r)}if(0===i.size())return this._otherGeom;let n=null,r=$.toCoordinateArray(i);return n=1===r.length?this._geomFact.createPoint(r[0]):this._geomFact.createMultiPointFromCoords(r),t1.combine(n,this._otherGeom)}}class r7{constructor(){r7.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._g0=null,this._g1=null,this._isUnionSafe=null;let t=arguments[0],i=arguments[1];this._g0=t,this._g1=i,this._geomFactory=t.getFactory()}static containsProperly(){if(2==arguments.length){let t=arguments[0],i=arguments[1];return!t.isNull()&&i.getX()>t.getMinX()&&i.getX()<t.getMaxX()&&i.getY()>t.getMinY()&&i.getY()<t.getMaxY()}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return r7.containsProperly(t,i)&&r7.containsProperly(t,n)}}static union(t,i){return new r7(t,i).union()}static intersects(t,i,n){return t.intersects(i)||t.intersects(n)}static overlapEnvelope(t,i){let n=t.getEnvelopeInternal(),r=i.getEnvelopeInternal();return n.intersection(r)}static extractBorderSegments(t,i,n){t.apply(new class{get interfaces_(){return[F]}filter(t,r){if(r<=0)return null;let s=t.getCoordinate(r-1),o=t.getCoordinate(r);if(r7.intersects(i,s,o)&&!r7.containsProperly(i,s,o)){let t=new tH(s,o);n.add(t)}}isDone(){return!1}isGeometryChanged(){return!1}})}static unionBuffer(t,i){let n=t.getFactory().createGeometryCollection([t,i]);return i5.bufferOp(n,0)}isBorderSegmentsSame(t,i){let n=this.extractBorderSegments(this._g0,this._g1,i),r=new S;return r7.extractBorderSegments(t,i,r),this.isEqual(n,r)}union(){let t=r7.overlapEnvelope(this._g0,this._g1);if(t.isNull()){let t=this._g0.copy(),i=this._g1.copy();return t1.combine(t,i)}let i=new S,n=this.extractByEnvelope(t,this._g0,i),r=this.extractByEnvelope(t,this._g1,i),s=this.unionFull(n,r);return this._isUnionSafe=this.isBorderSegmentsSame(s,t),this._isUnionSafe?this.combine(s,i):this.unionFull(this._g0,this._g1)}extractBorderSegments(t,i,n){let r=new S;return r7.extractBorderSegments(t,n,r),null!==i&&r7.extractBorderSegments(i,n,r),r}isUnionOptimized(){return this._isUnionSafe}extractByEnvelope(t,i,n){let r=new S;for(let s=0;s<i.getNumGeometries();s++){let o=i.getGeometryN(s);if(o.getEnvelopeInternal().intersects(t))r.add(o);else{let t=o.copy();n.add(t)}}return this._geomFactory.buildGeometry(r)}isEqual(t,i){if(t.size()!==i.size())return!1;let n=new tp(t);for(let t of i)if(!n.contains(t))return!1;return!0}combine(t,i){return 0>=i.size()?t:(i.add(t),t1.combine(i))}unionFull(t,i){try{return nC.union(t,i)}catch(n){if(n instanceof eX)return r7.unionBuffer(t,i);throw n}}}class r9{constructor(){r9.constructor_.apply(this,arguments)}static constructor_(){this._inputPolys=null,this._geomFactory=null;let t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new S)}static getGeometry(t,i){return i>=t.size()?null:t.get(i)}static union(t){return new r9(t).union()}static restrictToPolygons(t){if(b(t,td))return t;let i=ei.getPolygons(t);return 1===i.size()?i.get(0):t.getFactory().createMultiPolygon(tS.toPolygonArray(i))}reduceToGeometries(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next(),r=null;b(t,E)?r=this.unionTree(t):t instanceof q&&(r=t),i.add(r)}return i}union(){if(null===this._inputPolys)throw new D("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();let t=new e9(r9.STRTREE_NODE_CAPACITY);for(let i=this._inputPolys.iterator();i.hasNext();){let n=i.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;let i=t.itemsTree();return this.unionTree(i)}binaryUnion(){if(1==arguments.length){let t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(n-i<=1){let n=r9.getGeometry(t,i);return this.unionSafe(n,null)}if(n-i==2)return this.unionSafe(r9.getGeometry(t,i),r9.getGeometry(t,i+1));{let r=Math.trunc((n+i)/2),s=this.binaryUnion(t,i,r),o=this.binaryUnion(t,r,n);return this.unionSafe(s,o)}}}unionSafe(t,i){return null===t&&null===i?null:null===t?i.copy():null===i?t.copy():this.unionActual(t,i)}unionActual(t,i){let n=r7.union(t,i);return r9.restrictToPolygons(n)}unionTree(t){let i=this.reduceToGeometries(t);return this.binaryUnion(i)}}r9.STRTREE_NODE_CAPACITY=4;class st{constructor(){st.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFact=null,this._extracter=null,1==arguments.length){if(b(arguments[0],C)){let t=arguments[0];this.extract(t)}else if(arguments[0]instanceof q){let t=arguments[0];this.extract(t)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._geomFact=i,this.extract(t)}}static union(){if(1==arguments.length){if(b(arguments[0],C)||arguments[0]instanceof q)return new st(arguments[0]).union()}else if(2==arguments.length)return new st(arguments[0],arguments[1]).union()}extract(){if(b(arguments[0],C)){let t=arguments[0];this._extracter=r6.extract(t)}else if(arguments[0]instanceof q){let t=arguments[0];this._extracter=r6.extract(t)}}unionWithNull(t,i){return null===t&&null===i?null:null===i?t:null===t?i:nw.union(t,i)}unionNoOpt(t){let i=this._geomFact.createPoint();return nb.overlayOp(t,i,nw.UNION)}union(){if(null===this._geomFact&&(this._geomFact=this._extracter.getFactory()),null===this._geomFact)return null;if(this._extracter.isEmpty())return this._geomFact.createEmpty(this._extracter.getDimension());let t=this._extracter.getExtract(0),i=this._extracter.getExtract(1),n=this._extracter.getExtract(2),r=null;if(t.size()>0){let i=this._geomFact.buildGeometry(t);r=this.unionNoOpt(i)}let s=null;if(i.size()>0){let t=this._geomFact.buildGeometry(i);s=this.unionNoOpt(t)}let o=null;n.size()>0&&(o=r9.union(n));let a=this.unionWithNull(s,o),l=null;return null===(l=null===r?a:null===a?r:r8.union(r,a))?this._geomFact.createGeometryCollection():l}}var se=Object.freeze({__proto__:null,BoundaryOp:ro,IsSimpleOp:rl,buffer:rh,distance:rg,linemerge:rF,overlay:rM,polygonize:rq,relate:r3,union:Object.freeze({__proto__:null,UnaryUnionOp:st}),valid:Object.freeze({__proto__:null,ConsistentAreaTester:rU,IsValidOp:rG})});class si{constructor(){si.constructor_.apply(this,arguments)}static constructor_(){if(this._returnToOriginalPrecision=!0,this._cbr=null,0==arguments.length)si.constructor_.call(this,!0);else if(1==arguments.length){let t=arguments[0];this._returnToOriginalPrecision=t}}computeResultPrecision(t){return this._returnToOriginalPrecision&&this._cbr.addCommonBits(t),t}union(t,i){let n=this.removeCommonBits(t,i);return this.computeResultPrecision(nC.union(n[0],n[1]))}intersection(t,i){let n=this.removeCommonBits(t,i);return this.computeResultPrecision(nw.intersection(n[0],n[1]))}removeCommonBits(){if(1==arguments.length){let t=arguments[0];return this._cbr=new i7,this._cbr.add(t),this._cbr.removeCommonBits(t.copy())}if(2==arguments.length){let t=arguments[0],i=arguments[1];this._cbr=new i7,this._cbr.add(t),this._cbr.add(i);let n=[,,].fill(null);return n[0]=this._cbr.removeCommonBits(t.copy()),n[1]=this._cbr.removeCommonBits(i.copy()),n}}buffer(t,i){let n=this.removeCommonBits(t);return this.computeResultPrecision(i5.bufferOp(n,i))}symDifference(t,i){let n=this.removeCommonBits(t,i);return this.computeResultPrecision(nw.symDifference(n[0],n[1]))}difference(t,i){let n=this.removeCommonBits(t,i);return this.computeResultPrecision(nw.difference(n[0],n[1]))}}class sn extends t2.CoordinateOperation{constructor(){super(),sn.constructor_.apply(this,arguments)}static constructor_(){this._targetPM=null,this._removeCollapsed=!0;let t=arguments[0],i=arguments[1];this._targetPM=t,this._removeCollapsed=i}edit(){if(2==arguments.length&&arguments[1]instanceof q&&arguments[0]instanceof Array){let t=arguments[0],i=arguments[1];if(0===t.length)return null;let n=Array(t.length).fill(null);for(let i=0;i<t.length;i++){let r=new m(t[i]);this._targetPM.makePrecise(r),n[i]=r}let r=new L(n,!1).toCoordinateArray(),s=0;i instanceof te&&(s=2),i instanceof ti&&(s=4);let o=n;return this._removeCollapsed&&(o=null),r.length<s?o:r}return super.edit.apply(this,arguments)}}class sr{constructor(){sr.constructor_.apply(this,arguments)}static constructor_(){this._targetPM=null,this._removeCollapsed=!0,this._changePrecisionModel=!1,this._isPointwise=!1;let t=arguments[0];this._targetPM=t}static reduce(t,i){return new sr(i).reduce(t)}static reducePointwise(t,i){let n=new sr(i);return n.setPointwise(!0),n.reduce(t)}fixPolygonalTopology(t){let i=t;return this._changePrecisionModel||(i=this.changePM(t,this._targetPM)),i5.bufferOp(i,0)}reducePointwise(t){let i=null;i=this._changePrecisionModel?new t2(this.createFactory(t.getFactory(),this._targetPM)):new t2;let n=this._removeCollapsed;return t.getDimension()>=2&&(n=!0),i.edit(t,new sn(this._targetPM,n))}changePM(t,i){return this.createEditor(t.getFactory(),i).edit(t,new t2.NoOpGeometryOperation)}setRemoveCollapsedComponents(t){this._removeCollapsed=t}createFactory(t,i){return new tS(i,t.getSRID(),t.getCoordinateSequenceFactory())}setChangePrecisionModel(t){this._changePrecisionModel=t}reduce(t){let i=this.reducePointwise(t);return this._isPointwise?i:b(i,td)?rG.isValid(i)?i:this.fixPolygonalTopology(i):i}setPointwise(t){this._isPointwise=t}createEditor(t,i){return t.getPrecisionModel()===i?new t2:new t2(this.createFactory(t,i))}}class ss{constructor(){ss.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._pts=null,this._start=null,this._end=null,2==arguments.length){let t=arguments[0],i=arguments[1];this._pts=t,this._start=i,this._end=i+1}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._pts=t,this._start=i,this._end=n}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this._geom=t,this._pts=i,this._start=n,this._end=r}}size(){return this._end-this._start}getCoordinate(t){return this._pts.getCoordinate(this._start+t)}updateNearestLocationsLineLine(t,i,n,r,s,o,a,l){let A=new tH(i,n),h=new tH(o,a),c=A.closestPoints(h);l[0]=new rc(this._geom,t,new m(c[0])),l[1]=new rc(r._geom,s,new m(c[1]))}toString(){let t=new T;t.append("LINESTRING ( ");let i=new m;for(let n=this._start;n<this._end;n++)n>this._start&&t.append(", "),this._pts.getCoordinate(n,i),t.append(i.x+" "+i.y);return t.append(" )"),t.toString()}computeDistancePointLine(t,i,n){let r=o.MAX_VALUE;for(let s=i._start;s<i._end-1;s++){let o=i._pts.getCoordinate(s),a=i._pts.getCoordinate(s+1),l=V.pointToSegment(t,o,a);if(l<r&&(r=l,null!==n&&this.updateNearestLocationsPointLine(t,i,s,o,a,n),r<=0))break}return r}isPoint(){return this._end-this._start==1}distance(t){let i=this.isPoint(),n=t.isPoint(),r=null;if(i&&n){let i=this._pts.getCoordinate(this._start),n=t._pts.getCoordinate(t._start);r=i.distance(n)}else if(i){let i=this._pts.getCoordinate(this._start);r=this.computeDistancePointLine(i,t,null)}else if(n){let i=t._pts.getCoordinate(t._start);r=this.computeDistancePointLine(i,this,null)}else r=this.computeDistanceLineLine(t,null);return r}computeDistanceLineLine(t,i){let n=o.MAX_VALUE;for(let r=this._start;r<this._end-1;r++){let s=this._pts.getCoordinate(r),o=this._pts.getCoordinate(r+1);for(let a=t._start;a<t._end-1;a++){let l=t._pts.getCoordinate(a),A=t._pts.getCoordinate(a+1),h=V.segmentToSegment(s,o,l,A);if(h<n&&(n=h,null!==i&&this.updateNearestLocationsLineLine(r,s,o,t,a,l,A,i),n<=0))return n}}return n}updateNearestLocationsPointLine(t,i,n,r,s,o){o[0]=new rc(this._geom,this._start,new m(t));let a=new tH(r,s).closestPoint(t);o[1]=new rc(i._geom,n,new m(a))}nearestLocations(t){let i=this.isPoint(),n=t.isPoint(),r=[,,].fill(null);if(i&&n){let i=this._pts.getCoordinate(this._start),n=t._pts.getCoordinate(t._start);r[0]=new rc(this._geom,this._start,new m(i)),r[1]=new rc(t._geom,t._start,new m(n))}else if(i){let i=this._pts.getCoordinate(this._start);this.computeDistancePointLine(i,t,r)}else if(n){let i=t._pts.getCoordinate(t._start);this.computeDistancePointLine(i,this,r);let n=r[0];r[0]=r[1],r[1]=n}else this.computeDistanceLineLine(t,r);return r}getEnvelope(){let t=new M;for(let i=this._start;i<this._end;i++)t.expandToInclude(this._pts.getX(i),this._pts.getY(i));return t}}class so{static addFacetSequences(t,i,n){let r=0,s=i.size();for(;r<=s-1;){let o=r+so.FACET_SEQUENCE_SIZE+1;o>=s-1&&(o=s);let a=new ss(t,i,r,o);n.add(a),r+=so.FACET_SEQUENCE_SIZE}}static build(t){let i=new e9(so.STR_TREE_NODE_CAPACITY);for(let n=so.computeFacetSequences(t).iterator();n.hasNext();){let t=n.next();i.insert(t.getEnvelope(),t)}return i.build(),i}static computeFacetSequences(t){let i=new S;return t.apply(new class{get interfaces_(){return[K]}filter(t){let n=null;(t instanceof te||t instanceof tC)&&(n=t.getCoordinateSequence(),so.addFacetSequences(t,n,i))}}),i}}so.FACET_SEQUENCE_SIZE=6,so.STR_TREE_NODE_CAPACITY=4;class sa{constructor(){sa.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._minClearance=null,this._minClearancePts=null;let t=arguments[0];this._inputGeom=t}static getDistance(t){return new sa(t).getDistance()}static getLine(t){return new sa(t).getLine()}getDistance(){return this.compute(),this._minClearance}compute(){if(null!==this._minClearancePts||(this._minClearancePts=[,,].fill(null),this._minClearance=o.MAX_VALUE,this._inputGeom.isEmpty()))return null;let t=so.build(this._inputGeom).nearestNeighbour(new sl),i=new sl;this._minClearance=i.distance(t[0],t[1]),this._minClearancePts=i.getCoordinates()}getLine(){return this.compute(),null===this._minClearancePts||null===this._minClearancePts[0]?this._inputGeom.getFactory().createLineString():this._inputGeom.getFactory().createLineString(this._minClearancePts)}}class sl{constructor(){sl.constructor_.apply(this,arguments)}static constructor_(){this._minDist=o.MAX_VALUE,this._minPts=[,,].fill(null)}vertexDistance(t,i){for(let n=0;n<t.size();n++)for(let r=0;r<i.size();r++){let s=t.getCoordinate(n),o=i.getCoordinate(r);if(!s.equals2D(o)){let t=s.distance(o);if(t<this._minDist&&(this._minDist=t,this._minPts[0]=s,this._minPts[1]=o,0===t))return t}}return this._minDist}getCoordinates(){return this._minPts}segmentDistance(t,i){for(let n=0;n<t.size();n++)for(let r=1;r<i.size();r++){let s=t.getCoordinate(n),o=i.getCoordinate(r-1),a=i.getCoordinate(r);if(!s.equals2D(o)&&!s.equals2D(a)){let t=V.pointToSegment(s,o,a);if(t<this._minDist&&(this._minDist=t,this.updatePts(s,o,a),0===t))return t}}return this._minDist}distance(){if(arguments[0]instanceof e0&&arguments[1]instanceof e0){let t=arguments[1],i=arguments[0].getItem(),n=t.getItem();return this._minDist=o.MAX_VALUE,this.distance(i,n)}if(arguments[0]instanceof ss&&arguments[1]instanceof ss){let t=arguments[0],i=arguments[1];return this.vertexDistance(t,i),1===t.size()&&1===i.size()||this._minDist<=0||(this.segmentDistance(t,i),this._minDist<=0||this.segmentDistance(i,t)),this._minDist}}updatePts(t,i,n){this._minPts[0]=t;let r=new tH(i,n);this._minPts[1]=new m(r.closestPoint(t))}get interfaces_(){return[e7]}}sa.MinClearanceDistance=sl;class sA{constructor(){sA.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._minClearance=null,this._minClearancePts=null;let t=arguments[0];this._inputGeom=t}static getDistance(t){return new sA(t).getDistance()}static getLine(t){return new sA(t).getLine()}getDistance(){return this.compute(),this._minClearance}compute(){if(null!==this._minClearancePts)return null;this._minClearancePts=[,,].fill(null),this._minClearance=o.MAX_VALUE,this._inputGeom.apply(new sh(this))}updateClearance(){if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];t<this._minClearance&&(this._minClearance=t,this._minClearancePts[0]=new m(i),this._minClearancePts[1]=new m(n))}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];if(t<this._minClearance){this._minClearance=t,this._minClearancePts[0]=new m(i);let s=new tH(n,r);this._minClearancePts[1]=new m(s.closestPoint(i))}}}getLine(){return this.compute(),this._inputGeom.getFactory().createLineString(this._minClearancePts)}}class sh{constructor(){sh.constructor_.apply(this,arguments)}static constructor_(){this.smc=null;let t=arguments[0];this.smc=t}filter(t){this.smc._inputGeom.apply(new sc(this.smc,t))}get interfaces_(){return[X]}}class sc{constructor(){sc.constructor_.apply(this,arguments)}static constructor_(){this.smc=null,this._queryPt=null;let t=arguments[0],i=arguments[1];this.smc=t,this._queryPt=i}filter(t,i){this.checkVertexDistance(t.getCoordinate(i)),i>0&&this.checkSegmentDistance(t.getCoordinate(i-1),t.getCoordinate(i))}checkSegmentDistance(t,i){if(this._queryPt.equals2D(t)||this._queryPt.equals2D(i))return null;let n=V.pointToSegment(this._queryPt,i,t);n>0&&this.smc.updateClearance(n,this._queryPt,i,t)}isDone(){return!1}isGeometryChanged(){return!1}checkVertexDistance(t){let i=t.distance(this._queryPt);i>0&&this.smc.updateClearance(i,this._queryPt,t)}get interfaces_(){return[F]}}sA.VertexCoordinateFilter=sh,sA.ComputeMCCoordinateSequenceFilter=sc;var su=Object.freeze({__proto__:null,CommonBits:i8,CommonBitsOp:si,CommonBitsRemover:i7,EnhancedPrecisionOp:class{static union(t,i){let n=null;try{return nC.union(t,i)}catch(t){if(!(t instanceof A))throw t;n=t}try{let r=new si(!0).union(t,i);if(!r.isValid())throw n;return r}catch(t){throw t instanceof A?n:t}}static intersection(t,i){let n=null;try{return nw.intersection(t,i)}catch(t){if(!(t instanceof A))throw t;n=t}try{let r=new si(!0).intersection(t,i);if(!r.isValid())throw n;return r}catch(t){throw t instanceof A?n:t}}static buffer(t,i){let n=null;try{return i5.bufferOp(t,i)}catch(t){if(!(t instanceof A))throw t;n=t}try{let r=new si(!0).buffer(t,i);if(!r.isValid())throw n;return r}catch(t){throw t instanceof A?n:t}}static symDifference(t,i){let n=null;try{return nw.symDifference(t,i)}catch(t){if(!(t instanceof A))throw t;n=t}try{let r=new si(!0).symDifference(t,i);if(!r.isValid())throw n;return r}catch(t){throw t instanceof A?n:t}}static difference(t,i){let n=null;try{return nw.difference(t,i)}catch(t){if(!(t instanceof A))throw t;n=t}try{let r=new si(!0).difference(t,i);if(!r.isValid())throw n;return r}catch(t){throw t instanceof A?n:t}}},GeometryPrecisionReducer:sr,MinimumClearance:sa,SimpleMinimumClearance:sA});class sd{constructor(){sd.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._usePt=null,this._distanceTolerance=null,this._seg=new tH;let t=arguments[0];this._pts=t}static simplify(t,i){let n=new sd(t);return n.setDistanceTolerance(i),n.simplify()}setDistanceTolerance(t){this._distanceTolerance=t}simplifySection(t,i){if(t+1===i)return null;this._seg.p0=this._pts[t],this._seg.p1=this._pts[i];let n=-1,r=t;for(let s=t+1;s<i;s++){let t=this._seg.distance(this._pts[s]);t>n&&(n=t,r=s)}if(n<=this._distanceTolerance)for(let n=t+1;n<i;n++)this._usePt[n]=!1;else this.simplifySection(t,r),this.simplifySection(r,i)}simplify(){this._usePt=Array(this._pts.length).fill(null);for(let t=0;t<this._pts.length;t++)this._usePt[t]=!0;this.simplifySection(0,this._pts.length-1);let t=new L;for(let i=0;i<this._pts.length;i++)this._usePt[i]&&t.add(new m(this._pts[i]));return t.toCoordinateArray()}}class sg{constructor(){sg.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;let t=arguments[0];this._inputGeom=t}static simplify(t,i){let n=new sg(t);return n.setDistanceTolerance(i),n.getResultGeometry()}setDistanceTolerance(t){if(t<0)throw new r("Tolerance must be non-negative");this._distanceTolerance=t}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new sf(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}setEnsureValid(t){this._isEnsureValidTopology=t}}class sf extends t8{constructor(){super(),sf.constructor_.apply(this,arguments)}static constructor_(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;let t=arguments[0],i=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=i}transformPolygon(t,i){if(t.isEmpty())return null;let n=super.transformPolygon.call(this,t,i);return i instanceof tg?n:this.createValidArea(n)}createValidArea(t){return this._isEnsureValidTopology?i5.bufferOp(t,0):t}transformCoordinates(t,i){let n=t.toCoordinateArray(),r=null;return r=0===n.length?[].fill(null):sd.simplify(n,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(r)}transformMultiPolygon(t,i){let n=super.transformMultiPolygon.call(this,t,i);return this.createValidArea(n)}transformLinearRing(t,i){let n=i instanceof tE,r=super.transformLinearRing.call(this,t,i);return!n||r instanceof ti?r:null}}sg.DPTransformer=sf;class sp extends tH{constructor(){super(),sp.constructor_.apply(this,arguments)}static constructor_(){if(this._parent=null,this._index=null,2==arguments.length){let t=arguments[0],i=arguments[1];sp.constructor_.call(this,t,i,null,-1)}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];tH.constructor_.call(this,t,i),this._parent=n,this._index=r}}getParent(){return this._parent}getIndex(){return this._index}}class sm{constructor(){sm.constructor_.apply(this,arguments)}static constructor_(){if(this._parentLine=null,this._segs=null,this._resultSegs=new S,this._minimumSize=null,1==arguments.length){let t=arguments[0];sm.constructor_.call(this,t,2)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._parentLine=t,this._minimumSize=i,this.init()}}static extractCoordinates(t){let i=Array(t.size()+1).fill(null),n=null;for(let r=0;r<t.size();r++)n=t.get(r),i[r]=n.p0;return i[i.length-1]=n.p1,i}addToResult(t){this._resultSegs.add(t)}asLineString(){return this._parentLine.getFactory().createLineString(sm.extractCoordinates(this._resultSegs))}getResultSize(){let t=this._resultSegs.size();return 0===t?0:t+1}getParentCoordinates(){return this._parentLine.getCoordinates()}getMinimumSize(){return this._minimumSize}asLinearRing(){return this._parentLine.getFactory().createLinearRing(sm.extractCoordinates(this._resultSegs))}getSegments(){return this._segs}init(){let t=this._parentLine.getCoordinates();this._segs=Array(t.length-1).fill(null);for(let i=0;i<t.length-1;i++){let n=new sp(t[i],t[i+1],this._parentLine,i);this._segs[i]=n}}getResultCoordinates(){return sm.extractCoordinates(this._resultSegs)}getParent(){return this._parentLine}getSegment(t){return this._segs[t]}}class s_{constructor(){s_.constructor_.apply(this,arguments)}static constructor_(){this._index=new n8}add(){if(arguments[0]instanceof sm){let t=arguments[0].getSegments();for(let i=0;i<t.length;i++){let n=t[i];this.add(n)}}else if(arguments[0]instanceof tH){let t=arguments[0];this._index.insert(new M(t.p0,t.p1),t)}}query(t){let i=new M(t.p0,t.p1),n=new sy(t);return this._index.query(i,n),n.getItems()}remove(t){this._index.remove(new M(t.p0,t.p1),t)}}class sy{constructor(){sy.constructor_.apply(this,arguments)}static constructor_(){this._querySeg=null,this._items=new S;let t=arguments[0];this._querySeg=t}getItems(){return this._items}visitItem(t){M.intersects(t.p0,t.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(t)}get interfaces_(){return[em]}}class sw{constructor(){sw.constructor_.apply(this,arguments)}static constructor_(){this._li=new tQ,this._inputIndex=new s_,this._outputIndex=new s_,this._line=null,this._linePts=null,this._distanceTolerance=0;let t=arguments[0],i=arguments[1];this._inputIndex=t,this._outputIndex=i}static isInLineSection(t,i,n){if(n.getParent()!==t.getParent())return!1;let r=n.getIndex();return r>=i[0]&&r<i[1]}flatten(t,i){let n=new tH(this._linePts[t],this._linePts[i]);return this.remove(this._line,t,i),this._outputIndex.add(n),n}hasBadIntersection(t,i,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,i,n)}setDistanceTolerance(t){this._distanceTolerance=t}simplifySection(t,i,n){n+=1;let r=[,,].fill(null);if(t+1===i){let i=this._line.getSegment(t);return this._line.addToResult(i),null}let s=!0;this._line.getResultSize()<this._line.getMinimumSize()&&n+1<this._line.getMinimumSize()&&(s=!1);let o=[,].fill(null),a=this.findFurthestPoint(this._linePts,t,i,o);o[0]>this._distanceTolerance&&(s=!1);let l=new tH;if(l.p0=this._linePts[t],l.p1=this._linePts[i],r[0]=t,r[1]=i,this.hasBadIntersection(this._line,r,l)&&(s=!1),s){let n=this.flatten(t,i);return this._line.addToResult(n),null}this.simplifySection(t,a,n),this.simplifySection(a,i,n)}hasBadOutputIntersection(t){for(let i=this._outputIndex.query(t).iterator();i.hasNext();){let n=i.next();if(this.hasInteriorIntersection(n,t))return!0}return!1}hasInteriorIntersection(t,i){return this._li.computeIntersection(t.p0,t.p1,i.p0,i.p1),this._li.isInteriorIntersection()}hasBadInputIntersection(t,i,n){for(let r=this._inputIndex.query(n).iterator();r.hasNext();){let s=r.next();if(this.hasInteriorIntersection(s,n)){if(sw.isInLineSection(t,i,s))continue;return!0}}return!1}findFurthestPoint(t,i,n,r){let s=new tH;s.p0=t[i],s.p1=t[n];let o=-1,a=i;for(let r=i+1;r<n;r++){let i=t[r],n=s.distance(i);n>o&&(o=n,a=r)}return r[0]=o,a}simplify(t){this._line=t,this._linePts=t.getParentCoordinates(),this.simplifySection(0,this._linePts.length-1,0)}remove(t,i,n){for(let r=i;r<n;r++){let i=t.getSegment(r);this._inputIndex.remove(i)}}}class sv{constructor(){sv.constructor_.apply(this,arguments)}static constructor_(){this._inputIndex=new s_,this._outputIndex=new s_,this._distanceTolerance=0}setDistanceTolerance(t){this._distanceTolerance=t}simplify(t){for(let i=t.iterator();i.hasNext();)this._inputIndex.add(i.next());for(let i=t.iterator();i.hasNext();){let t=new sw(this._inputIndex,this._outputIndex);t.setDistanceTolerance(this._distanceTolerance),t.simplify(i.next())}}}class sb{constructor(){sb.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._lineSimplifier=new sv,this._linestringMap=null;let t=arguments[0];this._inputGeom=t}static simplify(t,i){let n=new sb(t);return n.setDistanceTolerance(i),n.getResultGeometry()}setDistanceTolerance(t){if(t<0)throw new r("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(t)}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():(this._linestringMap=new t_,this._inputGeom.apply(new sx(this)),this._lineSimplifier.simplify(this._linestringMap.values()),new sC(this._linestringMap).transform(this._inputGeom))}}class sC extends t8{constructor(){super(),sC.constructor_.apply(this,arguments)}static constructor_(){this._linestringMap=null;let t=arguments[0];this._linestringMap=t}transformCoordinates(t,i){if(0===t.size())return null;if(i instanceof te){let t=this._linestringMap.get(i);return this.createCoordinateSequence(t.getResultCoordinates())}return super.transformCoordinates.call(this,t,i)}}class sx{constructor(){sx.constructor_.apply(this,arguments)}static constructor_(){this.tps=null;let t=arguments[0];this.tps=t}filter(t){if(t instanceof te){if(t.isEmpty())return null;let i=t.isClosed()?4:2,n=new sm(t,i);this.tps._linestringMap.put(t,n)}}get interfaces_(){return[K]}}sb.LineStringTransformer=sC,sb.LineStringMapBuilderFilter=sx;class sE{constructor(){sE.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._tolerance=null;let t=arguments[0],i=arguments[1];this._pts=t,this._tolerance=i*i}static simplify(t,i){return new sE(t,i).simplify()}simplifyVertex(t){let i=t,n=i.getArea(),r=null;for(;null!==i;){let t=i.getArea();t<n&&(n=t,r=i),i=i._next}return null!==r&&n<this._tolerance&&r.remove(),t.isLive()?n:-1}simplify(){let t=sB.buildLine(this._pts),i=this._tolerance;do i=this.simplifyVertex(t);while(i<this._tolerance)let n=t.getCoordinates();return n.length<2?[n[0],new m(n[0])]:n}}class sB{constructor(){sB.constructor_.apply(this,arguments)}static constructor_(){this._pt=null,this._prev=null,this._next=null,this._area=sB.MAX_AREA,this._isLive=!0;let t=arguments[0];this._pt=t}static buildLine(t){let i=null,n=null;for(let r=0;r<t.length;r++){let s=new sB(t[r]);null===i&&(i=s),s.setPrev(n),null!==n&&(n.setNext(s),n.updateArea()),n=s}return i}getCoordinates(){let t=new L,i=this;do t.add(i._pt,!1),i=i._next;while(null!==i)return t.toCoordinateArray()}getArea(){return this._area}updateArea(){if(null===this._prev||null===this._next)return this._area=sB.MAX_AREA,null;this._area=Math.abs(tW.area(this._prev._pt,this._pt,this._next._pt))}remove(){let t=this._prev,i=this._next,n=null;return null!==this._prev&&(this._prev.setNext(i),this._prev.updateArea(),n=this._prev),null!==this._next&&(this._next.setPrev(t),this._next.updateArea(),null===n&&(n=this._next)),this._isLive=!1,n}isLive(){return this._isLive}setPrev(t){this._prev=t}setNext(t){this._next=t}}sB.MAX_AREA=o.MAX_VALUE,sE.VWVertex=sB;class sS{constructor(){sS.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;let t=arguments[0];this._inputGeom=t}static simplify(t,i){let n=new sS(t);return n.setDistanceTolerance(i),n.getResultGeometry()}setDistanceTolerance(t){if(t<0)throw new r("Tolerance must be non-negative");this._distanceTolerance=t}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new sI(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}setEnsureValid(t){this._isEnsureValidTopology=t}}class sI extends t8{constructor(){super(),sI.constructor_.apply(this,arguments)}static constructor_(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;let t=arguments[0],i=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=i}transformPolygon(t,i){if(t.isEmpty())return null;let n=super.transformPolygon.call(this,t,i);return i instanceof tg?n:this.createValidArea(n)}createValidArea(t){return this._isEnsureValidTopology?i5.bufferOp(t,0):t}transformCoordinates(t,i){let n=t.toCoordinateArray(),r=null;return r=0===n.length?[].fill(null):sE.simplify(n,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(r)}transformMultiPolygon(t,i){let n=super.transformMultiPolygon.call(this,t,i);return this.createValidArea(n)}transformLinearRing(t,i){let n=i instanceof tE,r=super.transformLinearRing.call(this,t,i);return!n||r instanceof ti?r:null}}sS.VWTransformer=sI;var sL=Object.freeze({__proto__:null,DouglasPeuckerSimplifier:sg,TopologyPreservingSimplifier:sb,VWSimplifier:sS});class sF{locate(t){}}class sM{constructor(){sM.constructor_.apply(this,arguments)}static constructor_(){this._subdiv=null,this._lastEdge=null;let t=arguments[0];this._subdiv=t,this.init()}init(){this._lastEdge=this.findEdge()}locate(t){this._lastEdge.isLive()||this.init();let i=this._subdiv.locateFromEdge(t,this._lastEdge);return this._lastEdge=i,i}findEdge(){return this._subdiv.getEdges().iterator().next()}get interfaces_(){return[sF]}}class sT{constructor(){sT.constructor_.apply(this,arguments)}static constructor_(){if(this._ls=null,this._data=null,2==arguments.length){let t=arguments[0],i=arguments[1];this._ls=new tH(t,i)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._ls=new tH(t,i),this._data=n}else if(6==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5];sT.constructor_.call(this,new m(t,i,n),new m(r,s,o))}else if(7==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5],a=arguments[6];sT.constructor_.call(this,new m(t,i,n),new m(r,s,o),a)}}getStartZ(){return this._ls.getCoordinate(0).getZ()}intersection(t){return this._ls.intersection(t.getLineSegment())}getStart(){return this._ls.getCoordinate(0)}getEnd(){return this._ls.getCoordinate(1)}getEndY(){return this._ls.getCoordinate(1).y}getStartX(){return this._ls.getCoordinate(0).x}setData(t){this._data=t}getData(){return this._data}getEndX(){return this._ls.getCoordinate(1).x}toString(){return this._ls.toString()}getLineSegment(){return this._ls}getEndZ(){return this._ls.getCoordinate(1).getZ()}equalsTopo(t){return this._ls.equalsTopo(t.getLineSegment())}getStartY(){return this._ls.getCoordinate(0).y}}class sR{constructor(){sR.constructor_.apply(this,arguments)}static constructor_(){this._seg=null,this._segLen=null,this._splitPt=null,this._minimumLen=0;let t=arguments[0];this._seg=t,this._segLen=t.getLength()}static pointAlongReverse(t,i){let n=new m;return n.x=t.p1.x-i*(t.p1.x-t.p0.x),n.y=t.p1.y-i*(t.p1.y-t.p0.y),n}splitAt(){if(1==arguments.length){let t=arguments[0],i=this._minimumLen/this._segLen;if(t.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(i),null;if(t.distance(this._seg.p1)<this._minimumLen)return this._splitPt=sR.pointAlongReverse(this._seg,i),null;this._splitPt=t}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=this.getConstrainedLength(t)/this._segLen;i.equals2D(this._seg.p0)?this._splitPt=this._seg.pointAlong(n):this._splitPt=sR.pointAlongReverse(this._seg,n)}}getSplitPoint(){return this._splitPt}getConstrainedLength(t){return t<this._minimumLen?this._minimumLen:t}setMinimumLength(t){this._minimumLen=t}}class sO{findSplitPoint(t,i){}}class sD{static projectedSplitPoint(t,i){return t.getLineSegment().project(i)}findSplitPoint(t,i){let n=t.getLineSegment(),r=n.getLength()/2,s=new sR(n),o=sD.projectedSplitPoint(t,i),a=2*o.distance(i)*.8;return a>r&&(a=r),s.setMinimumLength(a),s.splitAt(o),s.getSplitPoint()}get interfaces_(){return[sO]}}class sP{static checkRobustInCircle(t,i,n,r){let s=sP.isInCircleNonRobust(t,i,n,r),o=sP.isInCircleDDSlow(t,i,n,r),a=sP.isInCircleCC(t,i,n,r),l=tW.circumcentre(t,i,n);H.out.println("p radius diff a = "+Math.abs(r.distance(l)-t.distance(l))/t.distance(l)),s===o&&s===a||(H.out.println("inCircle robustness failure (double result = "+s+", DD result = "+o+", CC result = "+a+")"),H.out.println(tN.toLineString(new ts([t,i,n,r]))),H.out.println("Circumcentre = "+tN.toPoint(l)+" radius = "+t.distance(l)),H.out.println("p radius diff a = "+Math.abs(r.distance(l)/t.distance(l)-1)),H.out.println("p radius diff b = "+Math.abs(r.distance(l)/i.distance(l)-1)),H.out.println("p radius diff c = "+Math.abs(r.distance(l)/n.distance(l)-1)),H.out.println())}static isInCircleDDFast(t,i,n,r){let s=P.sqr(t.x).selfAdd(P.sqr(t.y)).selfMultiply(sP.triAreaDDFast(i,n,r)),o=P.sqr(i.x).selfAdd(P.sqr(i.y)).selfMultiply(sP.triAreaDDFast(t,n,r)),a=P.sqr(n.x).selfAdd(P.sqr(n.y)).selfMultiply(sP.triAreaDDFast(t,i,r)),l=P.sqr(r.x).selfAdd(P.sqr(r.y)).selfMultiply(sP.triAreaDDFast(t,i,n));return s.selfSubtract(o).selfAdd(a).selfSubtract(l).doubleValue()>0}static isInCircleCC(t,i,n,r){let s=tW.circumcentre(t,i,n),o=t.distance(s);return r.distance(s)-o<=0}static isInCircleNormalized(t,i,n,r){let s=t.x-r.x,o=t.y-r.y,a=i.x-r.x,l=i.y-r.y,A=n.x-r.x,h=n.y-r.y;return(s*s+o*o)*(a*h-A*l)+(a*a+l*l)*(A*o-s*h)+(A*A+h*h)*(s*l-a*o)>0}static isInCircleDDSlow(t,i,n,r){let s=P.valueOf(r.x),o=P.valueOf(r.y),a=P.valueOf(t.x),l=P.valueOf(t.y),A=P.valueOf(i.x),h=P.valueOf(i.y),c=P.valueOf(n.x),u=P.valueOf(n.y),d=a.multiply(a).add(l.multiply(l)).multiply(sP.triAreaDDSlow(A,h,c,u,s,o)),g=A.multiply(A).add(h.multiply(h)).multiply(sP.triAreaDDSlow(a,l,c,u,s,o)),f=c.multiply(c).add(u.multiply(u)).multiply(sP.triAreaDDSlow(a,l,A,h,s,o)),p=s.multiply(s).add(o.multiply(o)).multiply(sP.triAreaDDSlow(a,l,A,h,c,u));return d.subtract(g).add(f).subtract(p).doubleValue()>0}static isInCircleNonRobust(t,i,n,r){return(t.x*t.x+t.y*t.y)*sP.triArea(i,n,r)-(i.x*i.x+i.y*i.y)*sP.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*sP.triArea(t,i,r)-(r.x*r.x+r.y*r.y)*sP.triArea(t,i,n)>0}static isInCircleRobust(t,i,n,r){return sP.isInCircleNormalized(t,i,n,r)}static triAreaDDSlow(t,i,n,r,s,o){return n.subtract(t).multiply(o.subtract(i)).subtract(r.subtract(i).multiply(s.subtract(t)))}static triAreaDDFast(t,i,n){let r=P.valueOf(i.x).selfSubtract(t.x).selfMultiply(P.valueOf(n.y).selfSubtract(t.y)),s=P.valueOf(i.y).selfSubtract(t.y).selfMultiply(P.valueOf(n.x).selfSubtract(t.x));return r.selfSubtract(s)}static triArea(t,i,n){return(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x)}static isInCircleDDNormalized(t,i,n,r){let s=P.valueOf(t.x).selfSubtract(r.x),o=P.valueOf(t.y).selfSubtract(r.y),a=P.valueOf(i.x).selfSubtract(r.x),l=P.valueOf(i.y).selfSubtract(r.y),A=P.valueOf(n.x).selfSubtract(r.x),h=P.valueOf(n.y).selfSubtract(r.y),c=s.multiply(l).selfSubtract(a.multiply(o)),u=a.multiply(h).selfSubtract(A.multiply(l)),d=A.multiply(o).selfSubtract(s.multiply(h)),g=s.multiply(s).selfAdd(o.multiply(o)),f=a.multiply(a).selfAdd(l.multiply(l)),p=A.multiply(A).selfAdd(h.multiply(h));return g.selfMultiply(u).selfAdd(f.selfMultiply(d)).selfAdd(p.selfMultiply(c)).doubleValue()>0}}class sk{constructor(){sk.constructor_.apply(this,arguments)}static constructor_(){if(this._p=null,1==arguments.length){let t=arguments[0];this._p=new m(t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];this._p=new m(t,i)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._p=new m(t,i,n)}}static interpolateZ(){if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=i.distance(n),s=t.distance(i),o=n.getZ()-i.getZ();return i.getZ()+s/r*o}if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],s=i.x,o=i.y,a=n.x-s,l=r.x-s,A=n.y-o,h=r.y-o,c=a*h-l*A,u=t.x-s,d=t.y-o;return i.getZ()+(h*u-l*d)/c*(n.getZ()-i.getZ())+(-A*u+a*d)/c*(r.getZ()-i.getZ())}}magn(){return Math.sqrt(this._p.x*this._p.x+this._p.y*this._p.y)}equals(){if(1==arguments.length){let t=arguments[0];return this._p.x===t.getX()&&this._p.y===t.getY()}if(2==arguments.length){let t=arguments[0],i=arguments[1];return this._p.distance(t.getCoordinate())<i}}rightOf(t){return this.isCCW(t.dest(),t.orig())}isCCW(t,i){return(t._p.x-this._p.x)*(i._p.y-this._p.y)-(t._p.y-this._p.y)*(i._p.x-this._p.x)>0}getX(){return this._p.x}crossProduct(t){return this._p.x*t.getY()-this._p.y*t.getX()}setZ(t){this._p.setZ(t)}times(t){return new sk(t*this._p.x,t*this._p.y)}cross(){return new sk(this._p.y,-this._p.x)}leftOf(t){return this.isCCW(t.orig(),t.dest())}getY(){return this._p.y}classify(t,i){let n=i.sub(t),r=this.sub(t),s=n.crossProduct(r);return s>0?sk.LEFT:s<0?sk.RIGHT:n.getX()*r.getX()<0||n.getY()*r.getY()<0?sk.BEHIND:n.magn()<r.magn()?sk.BEYOND:t.equals(this)?sk.ORIGIN:i.equals(this)?sk.DESTINATION:sk.BETWEEN}circumRadiusRatio(t,i){let n=this.circleCenter(t,i),r=this.distance(n,t),s=this.distance(this,t),o=this.distance(t,i);return o<s&&(s=o),(o=this.distance(i,this))<s&&(s=o),r/s}circleCenter(t,i){let n=new sk(this.getX(),this.getY()),r=new tj(this.bisector(n,t),this.bisector(t,i)),s=null;try{s=new sk(r.getX(),r.getY())}catch(r){if(!(r instanceof tK))throw r;H.err.println("a: "+n+"  b: "+t+"  c: "+i),H.err.println(r)}return s}dot(t){return this._p.x*t.getX()+this._p.y*t.getY()}getZ(){return this._p.getZ()}bisector(t,i){let n=i.getX()-t.getX(),r=i.getY()-t.getY(),s=new tj(t.getX()+n/2,t.getY()+r/2,1),o=new tj(t.getX()-r+n/2,t.getY()+n+r/2,1);return new tj(s,o)}getCoordinate(){return this._p}isInCircle(t,i,n){return sP.isInCircleRobust(t._p,i._p,n._p,this._p)}interpolateZValue(t,i,n){let r=t.getX(),s=t.getY(),o=i.getX()-r,a=n.getX()-r,l=i.getY()-s,A=n.getY()-s,h=o*A-a*l,c=this.getX()-r,u=this.getY()-s;return t.getZ()+(A*c-a*u)/h*(i.getZ()-t.getZ())+(-l*c+o*u)/h*(n.getZ()-t.getZ())}midPoint(t){let i=(this._p.x+t.getX())/2;return new sk(i,(this._p.y+t.getY())/2,(this._p.getZ()+t.getZ())/2)}toString(){return"POINT ("+this._p.x+" "+this._p.y+")"}sub(t){return new sk(this._p.x-t.getX(),this._p.y-t.getY())}sum(t){return new sk(this._p.x+t.getX(),this._p.y+t.getY())}distance(t,i){return Math.sqrt(Math.pow(i.getX()-t.getX(),2)+Math.pow(i.getY()-t.getY(),2))}}sk.LEFT=0,sk.RIGHT=1,sk.BEYOND=2,sk.BEHIND=3,sk.BETWEEN=4,sk.ORIGIN=5,sk.DESTINATION=6;class sN extends sk{constructor(){super(),sN.constructor_.apply(this,arguments)}static constructor_(){this._isOnConstraint=null,this._constraint=null;let t=arguments[0];sk.constructor_.call(this,t)}getConstraint(){return this._constraint}setOnConstraint(t){this._isOnConstraint=t}setConstraint(t){this._isOnConstraint=!0,this._constraint=t}merge(t){t._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=t._constraint)}isOnConstraint(){return this._isOnConstraint}}class sU{constructor(){sU.constructor_.apply(this,arguments)}static constructor_(){this._rot=null,this._vertex=null,this._next=null,this._data=null}static swap(t){let i=t.oPrev(),n=t.sym().oPrev();sU.splice(t,i),sU.splice(t.sym(),n),sU.splice(t,i.lNext()),sU.splice(t.sym(),n.lNext()),t.setOrig(i.dest()),t.setDest(n.dest())}static splice(t,i){let n=t.oNext().rot(),r=i.oNext().rot(),s=i.oNext(),o=t.oNext(),a=r.oNext(),l=n.oNext();t.setNext(s),i.setNext(o),n.setNext(a),r.setNext(l)}static makeEdge(t,i){let n=new sU,r=new sU,s=new sU,o=new sU;return n._rot=r,r._rot=s,s._rot=o,o._rot=n,n.setNext(n),r.setNext(o),s.setNext(s),o.setNext(r),n.setOrig(t),n.setDest(i),n}static connect(t,i){let n=sU.makeEdge(t.dest(),i.orig());return sU.splice(n,t.lNext()),sU.splice(n.sym(),i),n}equalsNonOriented(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())}oNext(){return this._next}equalsOriented(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))}dNext(){return this.sym().oNext().sym()}lPrev(){return this._next.sym()}rPrev(){return this.sym().oNext()}rot(){return this._rot}oPrev(){return this._rot._next._rot}sym(){return this._rot._rot}setOrig(t){this._vertex=t}lNext(){return this.invRot().oNext().rot()}getLength(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())}setData(t){this._data=t}getData(){return this._data}delete(){this._rot=null}toString(){let t=this._vertex.getCoordinate(),i=this.dest().getCoordinate();return tN.toLineString(t,i)}isLive(){return null!==this._rot}getPrimary(){return 0>=this.orig().getCoordinate().compareTo(this.dest().getCoordinate())?this:this.sym()}toLineSegment(){return new tH(this._vertex.getCoordinate(),this.dest().getCoordinate())}dest(){return this.sym().orig()}invRot(){return this._rot.sym()}setDest(t){this.sym().setOrig(t)}orig(){return this._vertex}rNext(){return this._rot._next.invRot()}dPrev(){return this.invRot().oNext().invRot()}setNext(t){this._next=t}}class sQ{constructor(){sQ.constructor_.apply(this,arguments)}static constructor_(){this._subdiv=null,this._isUsingTolerance=!1;let t=arguments[0];this._subdiv=t,this._isUsingTolerance=t.getTolerance()>0}insertSite(t){let i=this._subdiv.locate(t);if(this._subdiv.isVertexOfEdge(i,t))return i;this._subdiv.isOnEdge(i,t.getCoordinate())&&(i=i.oPrev(),this._subdiv.delete(i.oNext()));let n=this._subdiv.makeEdge(i.orig(),t);sU.splice(n,i);let r=n;do i=(n=this._subdiv.connect(i,n.sym())).oPrev();while(i.lNext()!==r)for(;;){let s=i.oPrev();if(s.dest().rightOf(i)&&t.isInCircle(i.orig(),s.dest(),i.dest()))sU.swap(i),i=i.oPrev();else{if(i.oNext()===r)return n;i=i.oNext().lPrev()}}}insertSites(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this.insertSite(t)}}}class sH extends A{constructor(){super(),sH.constructor_.apply(this,arguments)}static constructor_(){if(this._seg=null,1==arguments.length){if("string"==typeof arguments[0]){let t=arguments[0];A.constructor_.call(this,t)}else if(arguments[0]instanceof tH){let t=arguments[0];A.constructor_.call(this,"Locate failed to converge (at edge: "+t+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new tH(t)}}else if(2==arguments.length){let t=arguments[0],i=arguments[1];A.constructor_.call(this,sH.msgWithSpatial(t,i)),this._seg=new tH(i)}}static msgWithSpatial(t,i){return null!==i?t+" [ "+i+" ]":t}getSegment(){return this._seg}}class sG{visit(t){}}class sV{constructor(){sV.constructor_.apply(this,arguments)}static constructor_(){this._visitedKey=0,this._quadEdges=new S,this._startingEdge=null,this._tolerance=null,this._edgeCoincidenceTolerance=null,this._frameVertex=[,,,].fill(null),this._frameEnv=null,this._locator=null,this._seg=new tH,this._triEdges=[,,,].fill(null);let t=arguments[0],i=arguments[1];this._tolerance=i,this._edgeCoincidenceTolerance=i/sV.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this._startingEdge=this.initSubdiv(),this._locator=new sM(this)}static getTriangleEdges(t,i){if(i[0]=t,i[1]=i[0].lNext(),i[2]=i[1].lNext(),i[2].lNext()!==i[0])throw new r("Edges do not form a triangle")}getTriangleVertices(t){let i=new sj;return this.visitTriangles(i,t),i.getTriangleVertices()}isFrameVertex(t){return!!t.equals(this._frameVertex[0])||!!t.equals(this._frameVertex[1])||!!t.equals(this._frameVertex[2])}isVertexOfEdge(t,i){return!(!i.equals(t.orig(),this._tolerance)&&!i.equals(t.dest(),this._tolerance))}connect(t,i){let n=sU.connect(t,i);return this._quadEdges.add(n),n}visitTriangles(t,i){this._visitedKey++;let n=new iy;n.push(this._startingEdge);let r=new tp;for(;!n.empty();){let s=n.pop();if(!r.contains(s)){let o=this.fetchTriangleToVisit(s,n,i,r);null!==o&&t.visit(o)}}}isFrameEdge(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))}isOnEdge(t,i){return this._seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this._seg.distance(i)<this._edgeCoincidenceTolerance}getEnvelope(){return new M(this._frameEnv)}getVertexUniqueEdges(t){let i=new S,n=new tp;for(let r=this._quadEdges.iterator();r.hasNext();){let s=r.next(),o=s.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||i.add(s));let a=s.sym(),l=a.orig();n.contains(l)||(n.add(l),!t&&this.isFrameVertex(l)||i.add(a))}return i}locateFromEdge(t,i){let n=0,r=this._quadEdges.size(),s=i;for(;;){if(++n>r)throw new sH(s.toLineSegment());if(t.equals(s.orig())||t.equals(s.dest()))break;if(t.rightOf(s))s=s.sym();else if(t.rightOf(s.oNext())){if(t.rightOf(s.dPrev()))break;s=s.dPrev()}else s=s.oNext()}return s}getVoronoiDiagram(t){let i=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(tS.toGeometryArray(i))}getTriangles(t){let i=this.getTriangleCoordinates(!1),n=Array(i.size()).fill(null),r=0;for(let s=i.iterator();s.hasNext();){let i=s.next();n[r++]=t.createPolygon(t.createLinearRing(i))}return t.createGeometryCollection(n)}getVoronoiCellPolygon(t,i){let n=new S,r=t;do{let i=t.rot().orig().getCoordinate();n.add(i),t=t.oPrev()}while(t!==r)let s=new L;s.addAll(n,!1),s.closeRing(),4>s.size()&&(H.out.println(s),s.add(s.get(s.size()-1),!0));let o=s.toCoordinateArray(),a=i.createPolygon(i.createLinearRing(o)),l=r.orig();return a.setUserData(l.getCoordinate()),a}setLocator(t){this._locator=t}initSubdiv(){let t=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),i=this.makeEdge(this._frameVertex[1],this._frameVertex[2]);sU.splice(t.sym(),i);let n=this.makeEdge(this._frameVertex[2],this._frameVertex[0]);return sU.splice(i.sym(),n),sU.splice(n.sym(),t),t}isFrameBorderEdge(t){let i=[,,,].fill(null);sV.getTriangleEdges(t,i);let n=[,,,].fill(null);sV.getTriangleEdges(t.sym(),n);let r=t.lNext().dest();if(this.isFrameVertex(r))return!0;let s=t.sym().lNext().dest();return!!this.isFrameVertex(s)}makeEdge(t,i){let n=sU.makeEdge(t,i);return this._quadEdges.add(n),n}createFrame(t){let i=t.getWidth(),n=t.getHeight(),r=0;r=i>n?10*i:10*n,this._frameVertex[0]=new sk((t.getMaxX()+t.getMinX())/2,t.getMaxY()+r),this._frameVertex[1]=new sk(t.getMinX()-r,t.getMinY()-r),this._frameVertex[2]=new sk(t.getMaxX()+r,t.getMinY()-r),this._frameEnv=new M(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate()),this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())}getTriangleCoordinates(t){let i=new sW;return this.visitTriangles(i,t),i.getTriangles()}getVertices(t){let i=new tp;for(let n=this._quadEdges.iterator();n.hasNext();){let r=n.next(),s=r.orig();!t&&this.isFrameVertex(s)||i.add(s);let o=r.dest();!t&&this.isFrameVertex(o)||i.add(o)}return i}fetchTriangleToVisit(t,i,n,r){let s=t,o=0,a=!1;do{this._triEdges[o]=s,this.isFrameEdge(s)&&(a=!0);let t=s.sym();r.contains(t)||i.push(t),r.add(s),o++,s=s.lNext()}while(s!==t)return a&&!n?null:this._triEdges}getEdges(){if(0==arguments.length)return this._quadEdges;if(1==arguments.length){let t=arguments[0],i=this.getPrimaryEdges(!1),n=Array(i.size()).fill(null),r=0;for(let s=i.iterator();s.hasNext();){let i=s.next();n[r++]=t.createLineString([i.orig().getCoordinate(),i.dest().getCoordinate()])}return t.createMultiLineString(n)}}getTriangleEdges(t){let i=new sK;return this.visitTriangles(i,t),i.getTriangleEdges()}getPrimaryEdges(t){this._visitedKey++;let i=new S,n=new iy;n.push(this._startingEdge);let r=new tp;for(;!n.empty();){let s=n.pop();if(!r.contains(s)){let o=s.getPrimary();!t&&this.isFrameEdge(o)||i.add(o),n.push(s.oNext()),n.push(s.sym().oNext()),r.add(s),r.add(s.sym())}}return i}delete(t){sU.splice(t,t.oPrev()),sU.splice(t.sym(),t.sym().oPrev());let i=t.sym(),n=t.rot(),r=t.rot().sym();this._quadEdges.remove(t),this._quadEdges.remove(i),this._quadEdges.remove(n),this._quadEdges.remove(r),t.delete(),i.delete(),n.delete(),r.delete()}getTolerance(){return this._tolerance}getVoronoiCellPolygons(t){this.visitTriangles(new sz,!0);let i=new S;for(let n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){let r=n.next();i.add(this.getVoronoiCellPolygon(r,t))}return i}insertSite(t){let i=this.locate(t);if(t.equals(i.orig(),this._tolerance)||t.equals(i.dest(),this._tolerance))return i;let n=this.makeEdge(i.orig(),t);sU.splice(n,i);let r=n;do i=(n=this.connect(i,n.sym())).oPrev();while(i.lNext()!==r)return r}locate(){if(1==arguments.length){if(arguments[0]instanceof sk){let t=arguments[0];return this._locator.locate(t)}if(arguments[0]instanceof m){let t=arguments[0];return this._locator.locate(new sk(t))}}else if(2==arguments.length){let t=arguments[0],i=arguments[1],n=this._locator.locate(new sk(t));if(null===n)return null;let r=n;n.dest().getCoordinate().equals2D(t)&&(r=n.sym());let s=r;do{if(s.dest().getCoordinate().equals2D(i))return s;s=s.oNext()}while(s!==r)return null}}}class sz{visit(t){let i=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),s=new sk(tW.circumcentreDD(i,n,r));for(let i=0;i<3;i++)t[i].rot().setOrig(s)}get interfaces_(){return[sG]}}class sK{constructor(){sK.constructor_.apply(this,arguments)}static constructor_(){this._triList=new S}getTriangleEdges(){return this._triList}visit(t){this._triList.add(t)}get interfaces_(){return[sG]}}class sj{constructor(){sj.constructor_.apply(this,arguments)}static constructor_(){this._triList=new S}getTriangleVertices(){return this._triList}visit(t){this._triList.add([t[0].orig(),t[1].orig(),t[2].orig()])}get interfaces_(){return[sG]}}class sW{constructor(){sW.constructor_.apply(this,arguments)}static constructor_(){this._coordList=new L,this._triCoords=new S}checkTriangleSize(t){t.length>=2?tN.toLineString(t[0],t[1]):t.length>=1&&tN.toPoint(t[0])}visit(t){this._coordList.clear();for(let i=0;i<3;i++){let n=t[i].orig();this._coordList.add(n.getCoordinate())}if(this._coordList.size()>0){this._coordList.closeRing();let t=this._coordList.toCoordinateArray();if(4!==t.length)return null;this._triCoords.add(t)}}getTriangles(){return this._triCoords}get interfaces_(){return[sG]}}sV.TriangleCircumcentreVisitor=sz,sV.TriangleEdgesListVisitor=sK,sV.TriangleVertexListVisitor=sj,sV.TriangleCoordinatesVisitor=sW,sV.EDGE_COINCIDENCE_TOL_FACTOR=1e3;class s$ extends A{constructor(){super(),s$.constructor_.apply(this,arguments)}static constructor_(){if(this._pt=null,1==arguments.length){let t=arguments[0];A.constructor_.call(this,t)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];A.constructor_.call(this,s$.msgWithCoord(t,i)),this._pt=new m(i)}}static msgWithCoord(t,i){return null!==i?t+" [ "+tN.toPoint(i)+" ]":t}getCoordinate(){return this._pt}}class sY{constructor(){sY.constructor_.apply(this,arguments)}static constructor_(){this._initialVertices=null,this._segVertices=null,this._segments=new S,this._subdiv=null,this._incDel=null,this._convexHull=null,this._splitFinder=new sD,this._kdt=null,this._vertexFactory=null,this._computeAreaEnv=null,this._splitPt=null,this._tolerance=null;let t=arguments[0],i=arguments[1];this._initialVertices=new S(t),this._tolerance=i,this._kdt=new nZ(i)}static computeVertexEnvelope(t){let i=new M;for(let n=t.iterator();n.hasNext();){let t=n.next();i.expandToInclude(t.getCoordinate())}return i}getInitialVertices(){return this._initialVertices}getKDT(){return this._kdt}setConstraints(t,i){this._segments=t,this._segVertices=i}computeConvexHull(){let t=new tS,i=new nI(this.getPointArray(),t);this._convexHull=i.getConvexHull()}addConstraintVertices(){this.computeConvexHull(),this.insertSites(this._segVertices)}getTolerance(){return this._tolerance}setVertexFactory(t){this._vertexFactory=t}formInitialDelaunay(){this.computeBoundingBox(),this._subdiv=new sV(this._computeAreaEnv,this._tolerance),this._subdiv.setLocator(new sM(this._subdiv)),this._incDel=new sQ(this._subdiv),this.insertSites(this._initialVertices)}insertSite(){if(arguments[0]instanceof sN){let t=arguments[0],i=this._kdt.insert(t.getCoordinate(),t);if(i.isRepeated()){let n=i.getData();return n.merge(t),n}return this._incDel.insertSite(t),t}if(arguments[0]instanceof m){let t=arguments[0];this.insertSite(this.createVertex(t))}}enforceConstraints(){this.addConstraintVertices();let t=0,i=0;do i=this.enforceGabriel(this._segments),t++;while(i>0&&t<sY.MAX_SPLIT_ITER)if(t===sY.MAX_SPLIT_ITER)throw new s$("Too many splitting iterations while enforcing constraints.  Last split point was at: ",this._splitPt)}insertSites(t){for(let i=t.iterator();i.hasNext();){let t=i.next();this.insertSite(t)}}getVertexFactory(){return this._vertexFactory}getPointArray(){let t=Array(this._initialVertices.size()+this._segVertices.size()).fill(null),i=0;for(let n=this._initialVertices.iterator();n.hasNext();){let r=n.next();t[i++]=r.getCoordinate()}for(let n=this._segVertices.iterator();n.hasNext();){let r=n.next();t[i++]=r.getCoordinate()}return t}findNonGabrielPoint(t){let i=t.getStart(),n=t.getEnd(),r=new m((i.x+n.x)/2,(i.y+n.y)/2),s=i.distance(r),a=new M(r);a.expandBy(s);let l=this._kdt.query(a),A=null,h=o.MAX_VALUE;for(let t=l.iterator();t.hasNext();){let o=t.next().getCoordinate();if(o.equals2D(i)||o.equals2D(n))continue;let a=r.distance(o);a<s&&(null===A||a<h)&&(A=o,h=a)}return A}getConstraintSegments(){return this._segments}setSplitPointFinder(t){this._splitFinder=t}getConvexHull(){return this._convexHull}enforceGabriel(t){let i=new S,n=0,r=new S;for(let s=t.iterator();s.hasNext();){let t=s.next(),o=this.findNonGabrielPoint(t);if(null===o)continue;this._splitPt=this._splitFinder.findSplitPoint(t,o);let a=this.createVertex(this._splitPt,t);this.insertSite(a).getCoordinate().equals2D(this._splitPt);let l=new sT(t.getStartX(),t.getStartY(),t.getStartZ(),a.getX(),a.getY(),a.getZ(),t.getData()),A=new sT(a.getX(),a.getY(),a.getZ(),t.getEndX(),t.getEndY(),t.getEndZ(),t.getData());i.add(l),i.add(A),r.add(t),n+=1}return t.removeAll(r),t.addAll(i),n}createVertex(){if(1==arguments.length){let t=arguments[0];return null!==this._vertexFactory?this._vertexFactory.createVertex(t,null):new sN(t)}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=null;return(n=null!==this._vertexFactory?this._vertexFactory.createVertex(t,i):new sN(t)).setOnConstraint(!0),n}}getSubdivision(){return this._subdiv}computeBoundingBox(){let t=sY.computeVertexEnvelope(this._initialVertices),i=sY.computeVertexEnvelope(this._segVertices),n=new M(t);n.expandToInclude(i);let r=Math.max(.2*n.getWidth(),.2*n.getHeight());this._computeAreaEnv=new M(n),this._computeAreaEnv.expandBy(r)}}sY.MAX_SPLIT_ITER=99;class sq{constructor(){sq.constructor_.apply(this,arguments)}static constructor_(){this._siteCoords=null,this._tolerance=0,this._subdiv=null}static envelope(t){let i=new M;for(let n=t.iterator();n.hasNext();){let t=n.next();i.expandToInclude(t)}return i}static unique(t){let i=$.copyDeep(t);return tc.sort(i),new L(i,!1)}static extractUniqueCoordinates(t){if(null===t)return new L;let i=t.getCoordinates();return sq.unique(i)}static toVertices(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next();i.add(new sk(t))}return i}create(){if(null!==this._subdiv)return null;let t=sq.envelope(this._siteCoords),i=sq.toVertices(this._siteCoords);this._subdiv=new sV(t,this._tolerance),new sQ(this._subdiv).insertSites(i)}setTolerance(t){this._tolerance=t}setSites(){if(arguments[0]instanceof q){let t=arguments[0];this._siteCoords=sq.extractUniqueCoordinates(t)}else if(b(arguments[0],C)){let t=arguments[0];this._siteCoords=sq.unique($.toCoordinateArray(t))}}getEdges(t){return this.create(),this._subdiv.getEdges(t)}getSubdivision(){return this.create(),this._subdiv}getTriangles(t){return this.create(),this._subdiv.getTriangles(t)}}class sX{constructor(){sX.constructor_.apply(this,arguments)}static constructor_(){this._siteCoords=null,this._constraintLines=null,this._tolerance=0,this._subdiv=null,this._constraintVertexMap=new eV}static createConstraintSegments(){if(1==arguments.length){let t=arguments[0],i=t9.getLines(t),n=new S;for(let t=i.iterator();t.hasNext();){let i=t.next();sX.createConstraintSegments(i,n)}return n}if(2==arguments.length){let t=arguments[1],i=arguments[0].getCoordinates();for(let n=1;n<i.length;n++)t.add(new sT(i[n-1],i[n]))}}createSiteVertices(t){let i=new S;for(let n=t.iterator();n.hasNext();){let t=n.next();this._constraintVertexMap.containsKey(t)||i.add(new sN(t))}return i}create(){if(null!==this._subdiv)return null;let t=sq.envelope(this._siteCoords),i=new S;null!==this._constraintLines&&(t.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),i=sX.createConstraintSegments(this._constraintLines));let n=new sY(this.createSiteVertices(this._siteCoords),this._tolerance);n.setConstraints(i,new S(this._constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this._subdiv=n.getSubdivision()}setTolerance(t){this._tolerance=t}setConstraints(t){this._constraintLines=t}setSites(t){this._siteCoords=sq.extractUniqueCoordinates(t)}getEdges(t){return this.create(),this._subdiv.getEdges(t)}getSubdivision(){return this.create(),this._subdiv}getTriangles(t){return this.create(),this._subdiv.getTriangles(t)}createVertices(t){let i=t.getCoordinates();for(let t=0;t<i.length;t++){let n=new sN(i[t]);this._constraintVertexMap.put(i[t],n)}}}class sZ{constructor(){sZ.constructor_.apply(this,arguments)}static constructor_(){this._siteCoords=null,this._tolerance=0,this._subdiv=null,this._clipEnv=null,this._diagramEnv=null}static clipGeometryCollection(t,i){let n=t.getFactory().toGeometry(i),r=new S;for(let s=0;s<t.getNumGeometries();s++){let o=t.getGeometryN(s),a=null;i.contains(o.getEnvelopeInternal())?a=o:i.intersects(o.getEnvelopeInternal())&&(a=nw.intersection(n,o)).setUserData(o.getUserData()),null===a||a.isEmpty()||r.add(a)}return t.getFactory().createGeometryCollection(tS.toGeometryArray(r))}create(){if(null!==this._subdiv)return null;let t=sq.envelope(this._siteCoords);if(this._diagramEnv=this._clipEnv,null===this._diagramEnv){this._diagramEnv=t;let i=this._diagramEnv.getDiameter();this._diagramEnv.expandBy(i)}let i=sq.toVertices(this._siteCoords);this._subdiv=new sV(t,this._tolerance),new sQ(this._subdiv).insertSites(i)}setSites(){if(arguments[0]instanceof q){let t=arguments[0];this._siteCoords=sq.extractUniqueCoordinates(t)}else if(b(arguments[0],C)){let t=arguments[0];this._siteCoords=sq.unique($.toCoordinateArray(t))}}setClipEnvelope(t){this._clipEnv=t}getSubdivision(){return this.create(),this._subdiv}getDiagram(t){this.create();let i=this._subdiv.getVoronoiDiagram(t);return sZ.clipGeometryCollection(i,this._diagramEnv)}setTolerance(t){this._tolerance=t}}var sJ=Object.freeze({__proto__:null,ConformingDelaunayTriangulationBuilder:sX,DelaunayTriangulationBuilder:sq,VoronoiDiagramBuilder:sZ,quadedge:Object.freeze({__proto__:null,Vertex:sk})});class s0{constructor(){s0.constructor_.apply(this,arguments)}static constructor_(){if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1==arguments.length){let t=arguments[0];s0.constructor_.call(this,t,0,0)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];s0.constructor_.call(this,t,i.getComponentIndex(),s0.segmentEndVertexIndex(i))}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];if(!b(t,Z))throw new r("Lineal geometry is required");this._linearGeom=t,this._numLines=t.getNumGeometries(),this._componentIndex=i,this._vertexIndex=n,this.loadCurrentLine()}}static segmentEndVertexIndex(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()}getComponentIndex(){return this._componentIndex}getLine(){return this._currentLine}getVertexIndex(){return this._vertexIndex}getSegmentEnd(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null}next(){if(!this.hasNext())return null;this._vertexIndex++,this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)}loadCurrentLine(){if(this._componentIndex>=this._numLines)return this._currentLine=null,null;this._currentLine=this._linearGeom.getGeometryN(this._componentIndex)}getSegmentStart(){return this._currentLine.getCoordinateN(this._vertexIndex)}isEndOfLine(){return!(this._componentIndex>=this._numLines)&&!(this._vertexIndex<this._currentLine.getNumPoints()-1)}hasNext(){return!(this._componentIndex>=this._numLines)&&!(this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())}}class s1{constructor(){s1.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t}static indexOf(t,i){return new s1(t).indexOf(i)}static indexOfAfter(t,i,n){return new s1(t).indexOfAfter(i,n)}segmentNearestMeasure(t,i,n){let r=t.projectionFactor(i);return r<=0?n:r<=1?n+r*t.getLength():n+t.getLength()}indexOfFromStart(t,i){let n=o.MAX_VALUE,r=i,s=0,a=new tH,l=new s0(this._linearGeom);for(;l.hasNext();){if(!l.isEndOfLine()){a.p0=l.getSegmentStart(),a.p1=l.getSegmentEnd();let o=a.distance(t),A=this.segmentNearestMeasure(a,t,s);o<n&&A>i&&(r=A,n=o),s+=a.getLength()}l.next()}return r}indexOf(t){return this.indexOfFromStart(t,-1)}indexOfAfter(t,i){if(i<0)return this.indexOf(t);let n=this._linearGeom.getLength();if(n<i)return n;let r=this.indexOfFromStart(t,i);return c.isTrue(r>=i,"computed index is before specified minimum index"),r}}class s2{constructor(){s2.constructor_.apply(this,arguments)}static constructor_(){this._geomFact=null,this._lines=new S,this._coordList=null,this._ignoreInvalidLines=!1,this._fixInvalidLines=!1,this._lastPt=null;let t=arguments[0];this._geomFact=t}getGeometry(){return this.endLine(),this._geomFact.buildGeometry(this._lines)}getLastCoordinate(){return this._lastPt}endLine(){if(null===this._coordList)return null;if(this._ignoreInvalidLines&&2>this._coordList.size())return this._coordList=null,null;let t=this._coordList.toCoordinateArray(),i=t;this._fixInvalidLines&&(i=this.validCoordinateSequence(t)),this._coordList=null;let n=null;try{n=this._geomFact.createLineString(i)}catch(t){if(!(t instanceof r)||!this._ignoreInvalidLines)throw t}null!==n&&this._lines.add(n)}setFixInvalidLines(t){this._fixInvalidLines=t}add(){if(1==arguments.length){let t=arguments[0];this.add(t,!0)}else if(2==arguments.length){let t=arguments[0],i=arguments[1];null===this._coordList&&(this._coordList=new L),this._coordList.add(t,i),this._lastPt=t}}setIgnoreInvalidLines(t){this._ignoreInvalidLines=t}validCoordinateSequence(t){return t.length>=2?t:[t[0],t[0]]}}class s5{constructor(){s5.constructor_.apply(this,arguments)}static constructor_(){this._line=null;let t=arguments[0];this._line=t}static extract(t,i,n){return new s5(t).extract(i,n)}extract(t,i){return 0>i.compareTo(t)?this.reverse(this.computeLinear(i,t)):this.computeLinear(t,i)}computeLine(t,i){let n=this._line.getCoordinates(),r=new L,s=t.getSegmentIndex();t.getSegmentFraction()>0&&(s+=1);let o=i.getSegmentIndex();1===i.getSegmentFraction()&&(o+=1),o>=n.length&&(o=n.length-1),t.isVertex()||r.add(t.getCoordinate(this._line));for(let t=s;t<=o;t++)r.add(n[t]);i.isVertex()||r.add(i.getCoordinate(this._line)),0>=r.size()&&r.add(t.getCoordinate(this._line));let a=r.toCoordinateArray();return a.length<=1&&(a=[a[0],a[0]]),this._line.getFactory().createLineString(a)}reverse(t){return b(t,Z)?t.reverse():(c.shouldNeverReachHere("non-linear geometry encountered"),null)}computeLinear(t,i){let n=new s2(this._line.getFactory());n.setFixInvalidLines(!0),t.isVertex()||n.add(t.getCoordinate(this._line));for(let r=new s0(this._line,t);r.hasNext()&&!(0>i.compareLocationValues(r.getComponentIndex(),r.getVertexIndex(),0));r.next()){let t=r.getSegmentStart();n.add(t),r.isEndOfLine()&&n.endLine()}return i.isVertex()||n.add(i.getCoordinate(this._line)),n.getGeometry()}}class s4{constructor(){s4.constructor_.apply(this,arguments)}static constructor_(){if(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this._componentIndex=t._componentIndex,this._segmentIndex=t._segmentIndex,this._segmentFraction=t._segmentFraction}else if(2==arguments.length){let t=arguments[0],i=arguments[1];s4.constructor_.call(this,0,t,i)}else if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];this._componentIndex=t,this._segmentIndex=i,this._segmentFraction=n,this.normalize()}else if(4==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this._componentIndex=t,this._segmentIndex=i,this._segmentFraction=n,r&&this.normalize()}}static numSegments(t){let i=t.getNumPoints();return i<=1?0:i-1}static compareLocationValues(t,i,n,r,s,o){return t<r?-1:t>r?1:i<s?-1:i>s?1:n<o?-1:+(n>o)}static pointAlongSegmentByFraction(t,i,n){if(n<=0)return t;if(n>=1)return i;let r=(i.x-t.x)*n+t.x;return new m(r,(i.y-t.y)*n+t.y,(i.getZ()-t.getZ())*n+t.getZ())}static getEndLocation(t){let i=new s4;return i.setToEnd(t),i}getSegmentIndex(){return this._segmentIndex}getComponentIndex(){return this._componentIndex}getSegmentFraction(){return this._segmentFraction}setToEnd(t){this._componentIndex=t.getNumGeometries()-1;let i=t.getGeometryN(this._componentIndex);this._segmentIndex=s4.numSegments(i),this._segmentFraction=0}compareTo(t){return this._componentIndex<t._componentIndex?-1:this._componentIndex>t._componentIndex?1:this._segmentIndex<t._segmentIndex?-1:this._segmentIndex>t._segmentIndex?1:this._segmentFraction<t._segmentFraction?-1:+(this._segmentFraction>t._segmentFraction)}copy(){return new s4(this._componentIndex,this._segmentIndex,this._segmentFraction)}toString(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"}compareLocationValues(t,i,n){return this._componentIndex<t?-1:this._componentIndex>t?1:this._segmentIndex<i?-1:this._segmentIndex>i?1:this._segmentFraction<n?-1:+(this._segmentFraction>n)}getSegmentLength(t){let i=t.getGeometryN(this._componentIndex),n=this._segmentIndex;this._segmentIndex>=s4.numSegments(i)&&(n=i.getNumPoints()-2);let r=i.getCoordinateN(n),s=i.getCoordinateN(n+1);return r.distance(s)}isVertex(){return this._segmentFraction<=0||this._segmentFraction>=1}isEndpoint(t){let i=t.getGeometryN(this._componentIndex),n=s4.numSegments(i);return this._segmentIndex>=n||this._segmentIndex===n-1&&this._segmentFraction>=1}isValid(t){if(this._componentIndex<0||this._componentIndex>=t.getNumGeometries())return!1;let i=t.getGeometryN(this._componentIndex);return!(this._segmentIndex<0||this._segmentIndex>i.getNumPoints())&&(this._segmentIndex!==i.getNumPoints()||0===this._segmentFraction)&&!(this._segmentFraction<0||this._segmentFraction>1)}normalize(){this._segmentFraction<0&&(this._segmentFraction=0),this._segmentFraction>1&&(this._segmentFraction=1),this._componentIndex<0&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0),this._segmentIndex<0&&(this._segmentIndex=0,this._segmentFraction=0),1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)}toLowest(t){let i=t.getGeometryN(this._componentIndex),n=s4.numSegments(i);return this._segmentIndex<n?this:new s4(this._componentIndex,n-1,1,!1)}getCoordinate(t){let i=t.getGeometryN(this._componentIndex),n=i.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=s4.numSegments(i))return n;let r=i.getCoordinateN(this._segmentIndex+1);return s4.pointAlongSegmentByFraction(n,r,this._segmentFraction)}getSegment(t){let i=t.getGeometryN(this._componentIndex),n=i.getCoordinateN(this._segmentIndex);return this._segmentIndex>=s4.numSegments(i)?new tH(i.getCoordinateN(i.getNumPoints()-2),n):new tH(n,i.getCoordinateN(this._segmentIndex+1))}clamp(t){if(this._componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this._segmentIndex>=t.getNumPoints()){let i=t.getGeometryN(this._componentIndex);this._segmentIndex=s4.numSegments(i),this._segmentFraction=1}}isOnSameSegment(t){return this._componentIndex===t._componentIndex&&(this._segmentIndex===t._segmentIndex||t._segmentIndex-this._segmentIndex==1&&0===t._segmentFraction||this._segmentIndex-t._segmentIndex==1&&0===this._segmentFraction)}snapToVertex(t,i){if(this._segmentFraction<=0||this._segmentFraction>=1)return null;let n=this.getSegmentLength(t),r=this._segmentFraction*n,s=n-r;r<=s&&r<i?this._segmentFraction=0:s<=r&&s<i&&(this._segmentFraction=1)}get interfaces_(){return[a]}}class s3{constructor(){s3.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t}static indexOf(t,i){return new s3(t).indexOf(i)}static indexOfAfter(t,i,n){return new s3(t).indexOfAfter(i,n)}indexOfFromStart(t,i){let n=o.MAX_VALUE,r=0,s=0,a=-1,l=new tH;for(let o=new s0(this._linearGeom);o.hasNext();o.next())if(!o.isEndOfLine()){l.p0=o.getSegmentStart(),l.p1=o.getSegmentEnd();let A=l.distance(t),h=l.segmentFraction(t),c=o.getComponentIndex(),u=o.getVertexIndex();A<n&&(null===i||0>i.compareLocationValues(c,u,h))&&(r=c,s=u,a=h,n=A)}return n===o.MAX_VALUE?new s4(i):new s4(r,s,a)}indexOf(t){return this.indexOfFromStart(t,null)}indexOfAfter(t,i){if(null===i)return this.indexOf(t);let n=s4.getEndLocation(this._linearGeom);if(0>=n.compareTo(i))return n;let r=this.indexOfFromStart(t,i);return c.isTrue(r.compareTo(i)>=0,"computed location is before specified minimum location"),r}}class s6{constructor(){s6.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t}static indicesOf(t,i){return new s6(t).indicesOf(i)}indicesOf(t){let i=t.getGeometryN(0).getCoordinateN(0),n=t.getGeometryN(t.getNumGeometries()-1),r=n.getCoordinateN(n.getNumPoints()-1),s=new s3(this._linearGeom),o=[,,].fill(null);return o[0]=s.indexOf(i),0===t.getLength()?o[1]=o[0].copy():o[1]=s.indexOfAfter(r,o[0]),o}}class s8{constructor(){s8.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t}static getLocation(){if(2==arguments.length){let t=arguments[1];return new s8(arguments[0]).getLocation(t)}if(3==arguments.length){let t=arguments[1],i=arguments[2];return new s8(arguments[0]).getLocation(t,i)}}static getLength(t,i){return new s8(t).getLength(i)}getLocation(){if(1==arguments.length){let t=arguments[0];return this.getLocation(t,!0)}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=t;t<0&&(n=this._linearGeom.getLength()+t);let r=this.getLocationForward(n);return i?r:this.resolveHigher(r)}}getLocationForward(t){if(t<=0)return new s4;let i=0,n=new s0(this._linearGeom);for(;n.hasNext();){if(n.isEndOfLine()){if(i===t)return new s4(n.getComponentIndex(),n.getVertexIndex(),0)}else{let r=n.getSegmentStart(),s=n.getSegmentEnd().distance(r);if(i+s>t){let r=(t-i)/s;return new s4(n.getComponentIndex(),n.getVertexIndex(),r)}i+=s}n.next()}return s4.getEndLocation(this._linearGeom)}getLength(t){let i=0,n=new s0(this._linearGeom);for(;n.hasNext();){if(!n.isEndOfLine()){let r=n.getSegmentStart(),s=n.getSegmentEnd().distance(r);if(t.getComponentIndex()===n.getComponentIndex()&&t.getSegmentIndex()===n.getVertexIndex())return i+s*t.getSegmentFraction();i+=s}n.next()}return i}resolveHigher(t){if(!t.isEndpoint(this._linearGeom))return t;let i=t.getComponentIndex();if(i>=this._linearGeom.getNumGeometries()-1)return t;do i++;while(i<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(i).getLength())return new s4(i,0,0)}}class s7{constructor(){s7.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t}clampIndex(t){let i=this.positiveIndex(t),n=this.getStartIndex();if(i<n)return n;let r=this.getEndIndex();return i>r?r:i}locationOf(){if(1==arguments.length){let t=arguments[0];return s8.getLocation(this._linearGeom,t)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return s8.getLocation(this._linearGeom,t,i)}}project(t){return s1.indexOf(this._linearGeom,t)}positiveIndex(t){return t>=0?t:this._linearGeom.getLength()+t}extractPoint(){if(1==arguments.length){let t=arguments[0];return s8.getLocation(this._linearGeom,t).getCoordinate(this._linearGeom)}if(2==arguments.length){let t=arguments[0],i=arguments[1],n=s8.getLocation(this._linearGeom,t).toLowest(this._linearGeom);return n.getSegment(this._linearGeom).pointAlongOffset(n.getSegmentFraction(),i)}}getStartIndex(){return 0}indexOfAfter(t,i){return s1.indexOfAfter(this._linearGeom,t,i)}extractLine(t,i){let n=this.clampIndex(t),r=this.clampIndex(i),s=this.locationOf(n,n===r),o=this.locationOf(r);return s5.extract(this._linearGeom,s,o)}isValidIndex(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()}getEndIndex(){return this._linearGeom.getLength()}indexOf(t){return s1.indexOf(this._linearGeom,t)}indicesOf(t){let i=s6.indicesOf(this._linearGeom,t);return[s8.getLength(this._linearGeom,i[0]),s8.getLength(this._linearGeom,i[1])]}}class s9{constructor(){s9.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;let t=arguments[0];this._linearGeom=t,this.checkGeometryType()}clampIndex(t){let i=t.copy();return i.clamp(this._linearGeom),i}project(t){return s3.indexOf(this._linearGeom,t)}checkGeometryType(){if(!(this._linearGeom instanceof te||this._linearGeom instanceof tv))throw new r("Input geometry must be linear")}extractPoint(){if(1==arguments.length)return arguments[0].getCoordinate(this._linearGeom);if(2==arguments.length){let t=arguments[1],i=arguments[0].toLowest(this._linearGeom);return i.getSegment(this._linearGeom).pointAlongOffset(i.getSegmentFraction(),t)}}getStartIndex(){return new s4}indexOfAfter(t,i){return s3.indexOfAfter(this._linearGeom,t,i)}extractLine(t,i){return s5.extract(this._linearGeom,t,i)}isValidIndex(t){return t.isValid(this._linearGeom)}getEndIndex(){return s4.getEndLocation(this._linearGeom)}indexOf(t){return s3.indexOf(this._linearGeom,t)}indicesOf(t){return s6.indicesOf(this._linearGeom,t)}}var ot=Object.freeze({__proto__:null,LengthIndexedLine:s7,LengthLocationMap:s8,LinearGeometryBuilder:s2,LinearIterator:s0,LinearLocation:s4,LocationIndexedLine:s9});class oe{static transform(t,i){let n=new S;for(let r=t.iterator();r.hasNext();)n.add(i.execute(r.next()));return n}static select(t,i){let n=new S;for(let r=t.iterator();r.hasNext();){let t=r.next();Boolean.TRUE.equals(i.execute(t))&&n.add(t)}return n}static apply(t,i){for(let n=t.iterator();n.hasNext();)i.execute(n.next())}}oe.Function=function(){};class oi{constructor(){oi.constructor_.apply(this,arguments)}static constructor_(){this.pts=null,this.n=0;let t=arguments[0];this.pts=Array(t).fill(null)}filter(t){this.pts[this.n++]=t}getCoordinates(){return this.pts}get interfaces_(){return[X]}}class on{constructor(){on.constructor_.apply(this,arguments)}static constructor_(){this._n=0}filter(t){this._n++}getCount(){return this._n}get interfaces_(){return[X]}}class or{constructor(){or.constructor_.apply(this,arguments)}static constructor_(){this._counts=new t_}add(t){let i=this._counts.get(t);null===i?this._counts.put(t,new os(1)):i.increment()}count(t){let i=this._counts.get(t);return null===i?0:i.count()}}class os{constructor(){os.constructor_.apply(this,arguments)}static constructor_(){if(this.count=0,0==arguments.length);else if(1==arguments.length){let t=arguments[0];this.count=t}}count(){return this.count}increment(){this.count++}}or.Counter=os;class oo{constructor(){oo.constructor_.apply(this,arguments)}static constructor_(){this._size=null,this._items=null,this._size=0,this._items=new S,this._items.add(null)}poll(){if(this.isEmpty())return null;let t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}size(){return this._size}reorder(t){let i=null,n=this._items.get(t);for(;2*t<=this._size&&((i=2*t)!==this._size&&0>this._items.get(i+1).compareTo(this._items.get(i))&&i++,0>this._items.get(i).compareTo(n));t=i)this._items.set(t,this._items.get(i));this._items.set(t,n)}clear(){this._size=0,this._items.clear()}peek(){return this.isEmpty()?null:this._items.get(1)}isEmpty(){return 0===this._size}add(t){this._items.add(null),this._size+=1;let i=this._size;for(this._items.set(0,t);0>t.compareTo(this._items.get(Math.trunc(i/2)));i/=2)this._items.set(i,this._items.get(Math.trunc(i/2)));this._items.set(i,t)}}function oa(){}function oA(){}function oh(){}function oc(){}class ou extends n{}class od{static split(t,i){let n=i.length,r=new S,s=""+t,o=s.indexOf(i);for(;o>=0;){let t=s.substring(0,o);r.add(t),o=(s=s.substring(o+n)).indexOf(i)}s.length>0&&r.add(s);let a=Array(r.size()).fill(null);for(let t=0;t<a.length;t++)a[t]=r.get(t);return a}static getStackTrace(){if(1==arguments.length){let t=arguments[0],i=new oc,n=new oa;return t.printStackTrace(n),i.toString()}if(2==arguments.length){let t=arguments[0],i=arguments[1],n="";new oA(od.getStackTrace(t));let r=new oh;for(let t=0;t<i;t++)try{n+=r.readLine()+od.NEWLINE}catch(t){if(!(t instanceof ou))throw t;c.shouldNeverReachHere()}return n}}static spaces(t){return od.chars(" ",t)}static chars(t,i){let n=Array(i).fill(null);for(let r=0;r<i;r++)n[r]=t;return new String(n)}}od.NEWLINE=H.getProperty("line.separator");var og=Object.freeze({__proto__:null,CollectionUtil:oe,CoordinateArrayFilter:oi,CoordinateCountFilter:on,GeometricShapeFactory:er,NumberUtil:i,ObjectCounter:or,PriorityQueue:oo,StringUtil:od,UniqueCoordinateArrayFilter:nS});te.prototype.getBoundary=function(){return ro.getBoundary(this)},tv.prototype.getBoundary=function(){return ro.getBoundary(this)},q.prototype.equalsTopo=function(t){return r4.equalsTopo(this,t)},q.prototype.equals=function(t){return null!==t&&r4.equalsTopo(this,t)},q.prototype.union=function(){if(0==arguments.length)return st.union(this);if(1==arguments.length){let t=arguments[0];return nC.union(this,t)}},q.prototype.isValid=function(){return rG.isValid(this)},q.prototype.intersection=function(t){return nw.intersection(this,t)},q.prototype.covers=function(t){return r4.covers(this,t)},q.prototype.coveredBy=function(t){return r4.covers(t,this)},q.prototype.touches=function(t){return r4.touches(this,t)},q.prototype.intersects=function(t){return r4.intersects(this,t)},q.prototype.within=function(t){return r4.contains(t,this)},q.prototype.overlaps=function(t){return r4.overlaps(this,t)},q.prototype.disjoint=function(t){return r4.disjoint(this,t)},q.prototype.crosses=function(t){return r4.crosses(this,t)},q.prototype.buffer=function(){if(1==arguments.length){let t=arguments[0];return i5.bufferOp(this,t)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return i5.bufferOp(this,t,i)}if(3==arguments.length){let t=arguments[0],i=arguments[1],n=arguments[2];return i5.bufferOp(this,t,i,n)}},q.prototype.convexHull=function(){return new nI(this).getConvexHull()},q.prototype.relate=function(){if(1==arguments.length){let t=arguments[0];return r4.relate(this,t)}if(2==arguments.length){let t=arguments[0],i=arguments[1];return r4.relate(this,t).matches(i)}},q.prototype.getCentroid=function(){if(this.isEmpty())return this._factory.createPoint();let t=nB.getCentroid(this);return this.createPointFromInternalCoord(t,this)},q.prototype.getInteriorPoint=function(){if(this.isEmpty())return this._factory.createPoint();let t=null,i=this.getDimension(),n=(0===i?new nD(this):1===i?new nO(this):new nF(this)).getInteriorPoint();return this.createPointFromInternalCoord(n,this)},q.prototype.symDifference=function(t){return nw.symDifference(this,t)},q.prototype.createPointFromInternalCoord=function(t,i){return i.getPrecisionModel().makePrecise(t),i.getFactory().createPoint(t)},q.prototype.toText=function(){return(new tN).write(this)},q.prototype.toString=function(){return this.toText()},q.prototype.contains=function(t){return r4.contains(this,t)},q.prototype.difference=function(t){return nw.difference(this,t)},q.prototype.isSimple=function(){return new rl(this).isSimple()},q.prototype.isWithinDistance=function(t,i){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>i)&&rd.isWithinDistance(this,t,i)},q.prototype.distance=function(t){return rd.distance(this,t)},t.algorithm=nN,t.densify=nH,t.dissolve=n$,t.geom=eh,t.geomgraph=nY,t.index=n7,t.io=rr,t.linearref=ot,t.noding=rs,t.operation=se,t.precision=su,t.simplify=sL,t.triangulate=sJ,t.util=og,t.version="2.12.1"})(m9);var an=I("f1q41");const _t="modalExtensions.geometryDataModal",_e=Object.freeze({data:{}});class _i extends gJ{#tZ=[];constructor(t={}){super({filename:"geometry-data-modal.js",title:c1.get(`${_t}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(_e),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=A6.createElement({element:"div",class:"oltb-modal__content"}),i=A6.createElement({element:"table",class:"oltb-table oltb-table--vertical"}),n=A6.createElement({element:"tbody"});for(let[t,r]of(A6.appendChildren(i,[n]),Object.entries(this.options.data))){let i=A6.createElement({element:"tr"}),s=c1.get(`${_t}.data`),o=A6.createElement({element:"th",text:s[t]}),a=A6.createElement({element:"td",html:r});A6.appendChildren(i,[o,a]),A6.appendChildren(n,[i])}A6.appendChildren(t,[i]),this.show(t)}}const _n=[0,0,0,0],_r=[],_s={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class _o extends K{constructor(t,i,n){super(t),this.features=i,this.mapBrowserEvent=n}}function _a(t,i){return t.index-i.index}function _l(t,i,n){let r=i.geometry;if("Circle"===r.getType()){let s=r;if(1===i.index){let i=iy();i&&(s=s.clone().transform(i,n));let r=Math.sqrt(em(s.getCenter(),iv(t,n)))-s.getRadius();return r*r}}let s=iv(t,n);return _r[0]=iv(i.segment[0],n),_r[1]=iv(i.segment[1],n),em(s,ed(s,_r))}function _A(t,i,n){var r,s,o,a;let l=i.geometry;if("Circle"===l.getType()&&1===i.index){let i=l,o=iy();return o&&(i=i.clone().transform(o,n)),r=i.getClosestPoint(iv(t,n)),s=0,r}let A=iv(t,n);return _r[0]=iv(i.segment[0],n),_r[1]=iv(i.segment[1],n),o=ed(A,_r),a=0,o}var _h=class extends n6{constructor(t){let i;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:n4,this.defaultDeleteCondition_=function(t){return nK(t)&&nX(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:U,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new dE,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new dw({source:new dI({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){let t=sW();return function(i,n){return t.Point}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?i=t.features:t.source&&(this.source_=t.source,i=new to(this.source_.getFeatures()),this.source_.addEventListener(dB.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(dB.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!i)throw Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(F.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(F.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){let i=t.getGeometry();if(i){let n=this.SEGMENT_WRITERS_[i.getType()];n&&n(t,i)}let n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(n.getCoordinateFromPixel(this.lastPixel_)),t.addEventListener(T.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,i){if(!this.featuresBeingModified_){this.featuresBeingModified_=new to;let n=this.featuresBeingModified_.getArray();for(let t=0,r=i.length;t<r;++t){let r=i[t].feature;r&&!n.includes(r)&&this.featuresBeingModified_.push(r)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new _o(_s.MODIFYSTART,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(T.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){let i=this.rBush_,n=[];i.forEach(function(i){t===i.feature&&n.push(i)});for(let t=n.length-1;t>=0;--t){let r=n[t];for(let t=this.dragSegments_.length-1;t>=0;--t)this.dragSegments_[t][0]===r&&this.dragSegments_.splice(t,1);i.remove(r)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){let i=t.target;this.removeFeature_(i),this.addFeature_(i)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,i){let n=i.getCoordinates();this.rBush_.insert(i.getExtent(),{feature:t,geometry:i,segment:[n,n]})}writeMultiPointGeometry_(t,i){let n=i.getCoordinates();for(let r=0,s=n.length;r<s;++r){let s=n[r],o={feature:t,geometry:i,depth:[r],index:r,segment:[s,s]};this.rBush_.insert(i.getExtent(),o)}}writeLineStringGeometry_(t,i){let n=i.getCoordinates();for(let r=0,s=n.length-1;r<s;++r){let s=n.slice(r,r+2),o={feature:t,geometry:i,index:r,segment:s};this.rBush_.insert(tG(s),o)}}writeMultiLineStringGeometry_(t,i){let n=i.getCoordinates();for(let r=0,s=n.length;r<s;++r){let s=n[r];for(let n=0,o=s.length-1;n<o;++n){let o=s.slice(n,n+2),a={feature:t,geometry:i,depth:[r],index:n,segment:o};this.rBush_.insert(tG(o),a)}}}writePolygonGeometry_(t,i){let n=i.getCoordinates();for(let r=0,s=n.length;r<s;++r){let s=n[r];for(let n=0,o=s.length-1;n<o;++n){let o=s.slice(n,n+2),a={feature:t,geometry:i,depth:[r],index:n,segment:o};this.rBush_.insert(tG(o),a)}}}writeMultiPolygonGeometry_(t,i){let n=i.getCoordinates();for(let r=0,s=n.length;r<s;++r){let s=n[r];for(let n=0,o=s.length;n<o;++n){let o=s[n];for(let s=0,a=o.length-1;s<a;++s){let a=o.slice(s,s+2),l={feature:t,geometry:i,depth:[n,r],index:s,segment:a};this.rBush_.insert(tG(a),l)}}}}writeCircleGeometry_(t,i){let n=i.getCenter(),r={feature:t,geometry:i,index:0,segment:[n,n]},s={feature:t,geometry:i,index:1,segment:[n,n]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(tJ(n),r);let a=i,l=iy();if(l&&this.getMap()){let t=this.getMap().getView().getProjection();a=nc(a=a.clone().transform(l,t)).transform(t,l)}this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(t,i){let n=i.getGeometriesArray();for(let i=0;i<n.length;++i){let r=n[i];(0,this.SEGMENT_WRITERS_[r.getType()])(t,r)}}createOrUpdateVertexFeature_(t,i,n,r){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(t):(s=new uE(new i4(t)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",i),s.set("geometries",n),s.set("existing",r),s}handleEvent(t){let i;return!t.originalEvent||(this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=tA.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(i=t.type==tA.SINGLECLICK&&!!this.ignoreNextSingleClick_||this.removePoint()),t.type==tA.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!i)}findInsertVerticesAndUpdateDragSegments_(t){this.handlePointerAtPixel_(t),this.dragSegments_.length=0,this.featuresBeingModified_=null;let i=this.vertexFeature_;if(!i)return;let n=this.getMap().getView().getProjection(),r=[],s=i.getGeometry().getCoordinates(),o=tG([s]),a=this.rBush_.getInExtent(o),l={};a.sort(_a);for(let i=0,o=a.length;i<o;++i){let o=a[i],A=o.segment,h=te(o.geometry),c=o.depth;if(c&&(h+="-"+c.join("-")),l[h]||(l[h]=[,,]),"Circle"===o.geometry.getType()&&1===o.index){ef(_A(t,o,n),s)&&!l[h][0]&&(this.dragSegments_.push([o,0]),l[h][0]=o);continue}if(ef(A[0],s)&&!l[h][0]){this.dragSegments_.push([o,0]),l[h][0]=o;continue}if(ef(A[1],s)&&!l[h][1]){if(l[h][0]&&0===l[h][0].index){let t=o.geometry.getCoordinates();switch(o.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[c[1]];case"Polygon":if(o.index!==t[c[0]].length-2)continue}}this.dragSegments_.push([o,1]),l[h][1]=o;continue}te(A)in this.vertexSegments_&&!l[h][0]&&!l[h][1]&&r.push(o)}return r}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_.map(([t])=>t));let i=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){let o,a=this.dragSegments_[s],l=a[0],A=l.feature;n.includes(A)||n.push(A);let h=l.geometry;r.includes(h)||r.push(h);let c=l.depth,u=l.segment,d=a[1];for(;i.length<h.getStride();)i.push(u[d][i.length]);switch(h.getType()){case"Point":o=i,u[0]=i,u[1]=i;break;case"MultiPoint":(o=h.getCoordinates())[l.index]=i,u[0]=i,u[1]=i;break;case"LineString":(o=h.getCoordinates())[l.index+d]=i,u[d]=i;break;case"MultiLineString":case"Polygon":(o=h.getCoordinates())[c[0]][l.index+d]=i,u[d]=i;break;case"MultiPolygon":(o=h.getCoordinates())[c[1]][c[0]][l.index+d]=i,u[d]=i;break;case"Circle":if(u[0]=i,u[1]=i,0===l.index)this.changingFeature_=!0,h.setCenter(i),this.changingFeature_=!1;else{this.changingFeature_=!0;let n=t.map.getView().getProjection(),r=e_(iv(h.getCenter(),n),iv(i,n)),s=iy();if(s){let t=h.clone().transform(s,n);t.setRadius(r),r=t.transform(n,s).getRadius()}h.setRadius(r),this.changingFeature_=!1}}o&&this.setGeometryCoordinates_(h,o)}this.createOrUpdateVertexFeature_(i,n,r,!0)}handleDownEvent(t){if(!this.condition_(t))return!1;let i=t.coordinate,n=this.findInsertVerticesAndUpdateDragSegments_(i);if(n?.length&&this.insertVertexCondition_(t)&&(this.willModifyFeatures_(t,n),this.vertexFeature_)){let t=this.vertexFeature_.getGeometry().getCoordinates();for(let i=n.length-1;i>=0;--i)this.insertVertex_(n[i],t);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(t){for(let i=this.dragSegments_.length-1;i>=0;--i){let n=this.dragSegments_[i][0],r=n.geometry;if("Circle"===r.getType()){let i=r.getCenter(),s=n.featureSegments[0],o=n.featureSegments[1];s.segment[0]=i,s.segment[1]=i,o.segment[0]=i,o.segment[1]=i,this.rBush_.update(tJ(i),s);let a=r,l=iy();if(l){let i=t.map.getView().getProjection();a=nc(a=a.clone().transform(l,i)).transform(i,l)}this.rBush_.update(a.getExtent(),o)}else this.rBush_.update(tG(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new _o(_s.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.coordinate)}handlePointerAtPixel_(t){let i,n,r=this.getMap(),s=r.getPixelFromCoordinate(t),o=r.getView().getProjection();if(this.hitDetection_){let t="object"==typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;r.forEachFeatureAtPixel(s,(t,r,s)=>{var o,a;s&&"Point"===s.getType()&&(s=new i4((o=s.getCoordinates(),a=0,o)));let l=s||t.getGeometry();if(l&&"Point"===l.getType()&&t instanceof uE&&this.features_.getArray().includes(t)){n=l;let r=t.getGeometry().getFlatCoordinates().slice(0,2);i=[{feature:t,geometry:n,segment:[r,r]}]}return!0},{layerFilter:t})}if(!i){var a,l,A,h;let n=(A=tV((a=tJ(t,_n),l=0,a),r.getView().getResolution()*this.pixelTolerance_,_n),h=0,A);i=this.rBush_.getInExtent(n)}if(i&&i.length>0){let a=i.sort(function(i,n){return _l(t,i,o)-_l(t,n,o)})[0],l=a.segment,A=_A(t,a,o),h=r.getPixelFromCoordinate(A),c=e_(s,h);if(n||c<=this.pixelTolerance_){let n={};if(n[te(l)]=!0,this.snapToPointer_||(this.delta_[0]=A[0]-t[0],this.delta_[1]=A[1]-t[1]),"Circle"===a.geometry.getType()&&1===a.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(A,[a.feature],[a.geometry],this.snappedToVertex_);else{let t=r.getPixelFromCoordinate(l[0]),s=r.getPixelFromCoordinate(l[1]),o=em(h,t),u=em(h,s);if(c=Math.sqrt(Math.min(o,u)),this.snappedToVertex_=c<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(A=o>u?l[1]:l[0]),this.createOrUpdateVertexFeature_(A,[a.feature],[a.geometry],this.snappedToVertex_);let d={};d[te(a.geometry)]=!0;for(let t=1,r=i.length;t<r;++t){let r=i[t].segment;if(ef(l[0],r[0])&&ef(l[1],r[1])||ef(l[0],r[1])&&ef(l[1],r[0])){let s=te(i[t].geometry);s in d||(d[s]=!0,n[te(r)]=!0)}else break}}this.vertexSegments_=n;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,i){let n,r=t.segment,s=t.feature,o=t.geometry,a=t.depth,l=t.index;for(;i.length<o.getStride();)i.push(0);switch(o.getType()){case"MultiLineString":case"Polygon":(n=o.getCoordinates())[a[0]].splice(l+1,0,i);break;case"MultiPolygon":(n=o.getCoordinates())[a[1]][a[0]].splice(l+1,0,i);break;case"LineString":(n=o.getCoordinates()).splice(l+1,0,i);break;default:return!1}this.setGeometryCoordinates_(o,n);let A=this.rBush_;A.remove(t),this.updateSegmentIndices_(o,l,a,1);let h={segment:[r[0],i],feature:s,geometry:o,depth:a,index:l};A.insert(tG(h.segment),h),this.dragSegments_.push([h,1]);let c={segment:[i,r[1]],feature:s,geometry:o,depth:a,index:l+1};return A.insert(tG(c.segment),c),this.dragSegments_.push([c,0]),!0}updatePointer_(t){return t&&this.findInsertVerticesAndUpdateDragSegments_(t),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){var t,i;let n=this.vertexFeature_?.getGeometry().getCoordinates();return n?(t=n,i=this.getMap().getView().getProjection(),t):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(t=>"Circle"===t.getType()||t.getType().endsWith("Point")))return!1;let t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(tG([t])).some(({segment:i})=>ef(i[0],t)||ef(i[1],t))}removePoint(t){if(t&&(t=iv(t,this.getMap().getView().getProjection()),this.updatePointer_(t)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=tA.POINTERDRAG){let t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([t])=>t));let i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new _o(_s.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){let t,i,n,r,s,o,a,l,A,h,c,u=this.dragSegments_,d={},g=!1;for(s=u.length-1;s>=0;--s)c=te((h=(n=u[s])[0]).feature),h.depth&&(c+="-"+h.depth.join("-")),c in d||(d[c]={}),0===n[1]?(d[c].right=h,d[c].index=h.index):1==n[1]&&(d[c].left=h,d[c].index=h.index+1);for(c in d){switch(A=d[c].right,a=d[c].left,(l=(o=d[c].index)-1)<0&&(l=0),t=i=(r=(h=void 0!==a?a:A).geometry).getCoordinates(),g=!1,r.getType()){case"MultiLineString":i[h.depth[0]].length>2&&(i[h.depth[0]].splice(o,1),g=!0);break;case"LineString":i.length>2&&(i.splice(o,1),g=!0);break;case"MultiPolygon":t=t[h.depth[1]];case"Polygon":(t=t[h.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),g=!0,0===o&&(t.pop(),t.push(t[0]),l=t.length-1))}if(g){this.setGeometryCoordinates_(r,i);let t=[];if(void 0!==a&&(this.rBush_.remove(a),t.push(a.segment[0])),void 0!==A&&(this.rBush_.remove(A),t.push(A.segment[1])),void 0!==a&&void 0!==A){let i={depth:h.depth,feature:h.feature,geometry:h.geometry,index:l,segment:t};this.rBush_.insert(tG(i.segment),i)}this.updateSegmentIndices_(r,o,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),u.length=0}}return g}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(t=>"Circle"===t.getType()||t.getType().endsWith("Point")))return!1;let t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(tG([t])).some(({segment:i})=>!(ef(i[0],t)||ef(i[1],t)))}insertPoint(t){let i=t?iv(t,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return!!i&&this.findInsertVerticesAndUpdateDragSegments_(i).reduce((t,n)=>t||this.insertVertex_(n,i),!1)}setGeometryCoordinates_(t,i){this.changingFeature_=!0,t.setCoordinates(i),this.changingFeature_=!1}updateSegmentIndices_(t,i,n,r){this.rBush_.forEachInExtent(t.getExtent(),function(s){s.geometry===t&&(void 0===n||void 0===s.depth||N(s.depth,n))&&s.index>i&&(s.index+=r)})}};const _c={SELECT:"select"};class _u extends K{constructor(t,i,n,r){super(t),this.selected=i,this.deselected=n,this.mapBrowserEvent=r}}const _d={};class _g extends nG{constructor(t){let i;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:nX,this.addCondition_=t.addCondition?t.addCondition:Q,this.removeCondition_=t.removeCondition?t.removeCondition:Q,this.toggleCondition_=t.toggleCondition?t.toggleCondition:n1,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:U,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){let t=sW();return k(t.Polygon,t.LineString),k(t.GeometryCollection,t.LineString),function(i){return i.getGeometry()?t[i.getGeometry().getType()]:null}}(),this.features_=t.features||new to,t.layers)if("function"==typeof t.layers)i=t.layers;else{let n=t.layers;i=function(t){return n.includes(t)}}else i=U;this.layerFilter_=i,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,i){this.featureLayerAssociation_[te(t)]=i}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[te(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(F.ADD,this.boundAddFeature_),this.features_.addEventListener(F.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(F.ADD,this.boundAddFeature_),this.features_.removeEventListener(F.REMOVE,this.boundRemoveFeature_))}addFeature_(t){let i=t.element;if(this.style_&&this.applySelectedStyle_(i),!this.getLayer(i)){let t=this.getMap().getAllLayers().find(function(t){if(t instanceof dw&&t.getSource()&&t.getSource().hasFeature(i))return t});t&&this.addFeatureLayerAssociation_(i,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){let i=te(t);i in _d||(_d[i]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){let i=this.getMap().getInteractions().getArray();for(let n=i.length-1;n>=0;--n){let r=i[n];if(r!==this&&r instanceof _g&&r.getStyle()&&-1!==r.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(r.getStyle())}let n=te(t);t.setStyle(_d[n]),delete _d[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[(0,te)(t)]}handleEvent(t){if(!this.condition_(t))return!0;let i=this.addCondition_(t),n=this.removeCondition_(t),r=this.toggleCondition_(t),s=t.map,o=this.getFeatures(),a=[],l=[];if(i||n||r){s.forEachFeatureAtPixel(t.pixel,(t,s)=>{if(t instanceof uE&&this.filter_(t,s))return(i||r)&&!o.getArray().includes(t)?(this.addFeatureLayerAssociation_(t,s),l.push(t)):(n||r)&&o.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)o.remove(a[t]);o.extend(l)}else{V(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,(t,i)=>{if(t instanceof uE&&this.filter_(t,i))return this.addFeatureLayerAssociation_(t,i),l.push(t),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=o.getLength()-1;t>=0;--t){let i=o.item(t),n=l.indexOf(i);n>-1?l.splice(n,1):(o.remove(i),a.push(i))}0!==l.length&&o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new _u(_c.SELECT,l,a,t)),!0}}const _f={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"};class _p extends K{constructor(t,i,n,r,s){super(t),this.features=i,this.coordinate=n,this.startCoordinate=r,this.mapBrowserEvent=s}}var _m=class extends n6{constructor(t){let i;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)i=t.layers;else{let n=t.layers;i=function(t){return n.includes(t)}}else i=U;this.layerFilter_=i,this.filter_=t.filter&&!this.features_?t.filter:U,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:U,this.lastFeature_=null,this.addChangeListener(nQ,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);let i=this.features_||new to([this.lastFeature_]);return this.dispatchEvent(new _p(_f.TRANSLATESTART,i,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);let i=this.features_||new to([this.lastFeature_]);return this.dispatchEvent(new _p(_f.TRANSLATEEND,i,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){let i=t.coordinate,n=t.map.getView().getProjection(),r=iv(i,n),s=iv(this.lastCoordinate_,n),o=r[0]-s[0],a=r[1]-s[1],l=this.features_||new to([this.lastFeature_]),A=iy();l.forEach(function(t){let i=t.getGeometry();A?(i.transform(A,n),i.translate(o,a),i.transform(n,A)):i.translate(o,a),t.setGeometry(i)}),this.lastCoordinate_=i,this.dispatchEvent(new _p(_f.TRANSLATING,l,i,this.startCoordinate_,t))}}handleMoveEvent(t){let i=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(i.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),i.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):i.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,i){return i.forEachFeatureAtPixel(t,(t,i)=>{if(t instanceof uE&&this.filter_(t,i)&&(!this.features_||this.features_.getArray().includes(t)))return t},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){let i=this.getMap();super.setMap(t),this.updateState_(i)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let i=this.getMap(),n=this.getActive();(!i||!n)&&(i=i||t)&&i.getViewport().classList.remove("ol-grab","ol-grabbing")}};const __="edit-tool.js",_y="oltb-tool-button",_w="oltb-toolbox-section",_v="oltb-edit",_b="tools.editTool",_C="tools.editTool",_x="commons",_E=Object.freeze({hitTolerance:5,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStyleChange:void 0,onCutFeatures:void 0,onCopyFeatures:void 0,onPasteFeatures:void 0,onShapeOperation:void 0,onSelectAdd:void 0,onSelectRemove:void 0,onModifyStart:void 0,onModifyEnd:void 0,onTranslateStart:void 0,onTranslateEnd:void 0,onRemovedFeatures:void 0,onError:void 0,onSnapped:void 0,onUnSnapped:void 0}),_B=he.editTool,_S=Object.freeze({isActive:!1,isCollapsed:!1,strokeColor:"#0166A5FF",fillColor:"#D7E3FA80"}),_I=Object.freeze({width:20,height:20,fill:"#FFFFFFFF",stroke:"none",class:"oltb-btn__icon"});class _L extends mk{constructor(t={}){super({filename:__});let i=up({path:ug.cursor.stroked,class:`${_y}__icon`}),n=c1.get(_C),r=A6.createElement({element:"button",html:i,class:_y,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.editTool})`,"data-tippy-content-post":`(${mQ.editTool})`,"data-oltb-i18n":`${_C}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.lastStyle=void 0,this.options=E(an).merge(E(an).cloneDeep(_E),t),this.localStorage=ht.getAndMergeStateObject(_B,_S),this.originalFeatureStyles={},this.featureClipboard=[],this.parser=new m9.io.OL3Parser,this.parser.inject(i4,uV,i5,nA,ua,uz,uj,uN),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${_v}-toolbox`),this.#eB(),this.#eD(),this.uiRefDeleteSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-delete-selected-button`),this.uiRefDeleteSelectedButton.addEventListener(A8.browser.click,this.#eP.bind(this)),this.uiRefRotateSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-rotate-selected-button`),this.uiRefRotateSelectedButton.addEventListener(A8.browser.click,this.#ek.bind(this)),this.uiRefInfoSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-info-button`),this.uiRefInfoSelectedButton.addEventListener(A8.browser.click,this.#eN.bind(this)),this.uiRefConvertSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-convert-button`),this.uiRefConvertSelectedButton.addEventListener(A8.browser.click,this.#eU.bind(this)),this.uiRefCutSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-cut-selected-button`),this.uiRefCutSelectedButton.addEventListener(A8.browser.click,this.#eQ.bind(this)),this.uiRefCopySelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-copy-selected-button`),this.uiRefCopySelectedButton.addEventListener(A8.browser.click,this.#eH.bind(this)),this.uiRefPasteSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-paste-selected-button`),this.uiRefPasteSelectedButton.addEventListener(A8.browser.click,this.#eG.bind(this)),this.uiRefUnionSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-union-selected-button`),this.uiRefUnionSelectedButton.addEventListener(A8.browser.click,this.#eV.bind(this,this.unionFeatures,"union")),this.uiRefIntersectSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-intersect-selected-button`),this.uiRefIntersectSelectedButton.addEventListener(A8.browser.click,this.#eV.bind(this,this.intersectFeatures,"intersect")),this.uiRefExcludeSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-exclude-selected-button`),this.uiRefExcludeSelectedButton.addEventListener(A8.browser.click,this.#eV.bind(this,this.excludeFeatures,"exclude")),this.uiRefDifferenceSelectedButton=this.uiRefToolboxSection.querySelector(`#${_v}-difference-selected-button`),this.uiRefDifferenceSelectedButton.addEventListener(A8.browser.click,this.#eV.bind(this,this.differenceFeatures,"difference")),this.uiRefFillColor=this.uiRefToolboxSection.querySelector(`#${_v}-fill-color`),this.uiRefFillColor.addEventListener(A8.custom.colorChange,this.#ez.bind(this)),this.uiRefStrokeColor=this.uiRefToolboxSection.querySelector(`#${_v}-stroke-color`),this.uiRefStrokeColor.addEventListener(A8.custom.colorChange,this.#ez.bind(this)),this.interactionSelect=this.#eK(),this.interactionModify=this.#ej(),this.interactionTranslate=this.#eW(),this.interactionSelect.getFeatures().on(A8.openLayers.add,this.#e$.bind(this)),this.interactionSelect.getFeatures().on(A8.openLayers.remove,this.#eY.bind(this)),this.interactionModify.addEventListener(A8.openLayers.modifyStart,this.#eq.bind(this)),this.interactionModify.addEventListener(A8.openLayers.modifyEnd,this.#eX.bind(this)),this.interactionTranslate.addEventListener(A8.openLayers.translateStart,this.#eZ.bind(this)),this.interactionTranslate.addEventListener(A8.openLayers.translateEnd,this.#eJ.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),this.onWindowFeatureLayerRemovedBind=this.#e0.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind),window.addEventListener(A8.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind),window.removeEventListener(A8.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${_C}.toolbox`),i=c1.get(`${_x}.titles`),n='class="oltb-btn oltb-btn--blue-mid oltb-tippy"',r=`
            <div id="${_v}-toolbox" class="${_w}">
                <div class="${_w}__header oltb-toggleable" data-oltb-toggleable-target="${_v}-toolbox-collapsed">
                    <h4 class="${_w}__title" data-oltb-i18n="${_C}.toolbox.titles.edit">${t.titles.edit}</h4>
                    <span class="${_w}__icon oltb-tippy" data-oltb-i18n="${_x}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${_w}__groups" id="${_v}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${_w}__group ${_w}__group--sub-toolbar">
                        <label class="oltb-label" data-oltb-i18n="${_C}.toolbox.groups.misc.title">${t.groups.misc.title}</label>
                        <button type="button" id="${_v}-delete-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.misc.delete" title="${t.groups.misc.delete}">
                            ${up({..._I,path:ug.trash.stroked})}
                        </button>
                        <button type="button" id="${_v}-rotate-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.misc.rotate" title="${t.groups.misc.rotate}">
                            ${up({..._I,path:ug.arrowRepeat.stroked})}
                        </button>
                        <button type="button" id="${_v}-info-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.misc.geometryData" title="${t.groups.misc.geometryData}">
                            ${up({..._I,path:ug.infoCircle.stroked})}
                        </button>
                        <button type="button" id="${_v}-convert-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.misc.convertFeature" title="${t.groups.misc.convertFeature}">
                            ${up({..._I,path:ug.shuffle.stroked})}
                        </button>
                    </div>
                    <div class="${_w}__group ${_w}__group--sub-toolbar">
                        <label class="oltb-label" data-oltb-i18n="${_C}.toolbox.groups.copying.title">${t.groups.copying.title}</label>
                        <button type="button" id="${_v}-cut-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.copying.cut" title="${t.groups.copying.cut}">
                            ${up({..._I,path:ug.scissors.filled})}
                        </button>
                        <button type="button" id="${_v}-copy-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.copying.copy" title="${t.groups.copying.copy}">
                            ${up({..._I,path:ug.copy.stroked})}
                        </button>
                        <button type="button" id="${_v}-paste-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.copying.paste" title="${t.groups.copying.paste}">
                            ${up({..._I,path:ug.clipboard.stroked})}
                        </button>
                    </div>
                    <div class="${_w}__group ${_w}__group--sub-toolbar ${_w}__group--split-group">
                        <label class="oltb-label" data-oltb-i18n="${_C}.toolbox.groups.shapes.title">${t.groups.shapes.title}</label>
                        <button type="button" id="${_v}-union-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.shapes.union" title="${t.groups.shapes.union}">
                            ${up({..._I,path:ug.union.mixed})}
                        </button>
                        <button type="button" id="${_v}-intersect-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.shapes.intersect" title="${t.groups.shapes.intersect}">
                            ${up({..._I,path:ug.intersect.mixed})}
                        </button>
                        <button type="button" id="${_v}-exclude-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.shapes.exclude" title="${t.groups.shapes.exclude}">
                            ${up({..._I,path:ug.exclude.mixed})}
                        </button>
                        <button type="button" id="${_v}-difference-selected-button" ${n} data-oltb-i18n="${_C}.toolbox.groups.shapes.difference" title="${t.groups.shapes.difference}">
                            ${up({..._I,path:ug.subtract.mixed})}
                        </button>
                    </div>
                    <div class="${_w}__group ${_w}__group--split-group">
                        <div class="${_w}__group-part">
                            <label class="oltb-label" for="${_v}-stroke-color" data-oltb-i18n="${_C}.toolbox.groups.strokeColor.title">${t.groups.strokeColor.title}</label>
                            <div id="${_v}-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${_v}-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">
                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>
                            </div>
                        </div>
                        <div class="${_w}__group-part">
                            <label class="oltb-label" for="${_v}-fill-color" data-oltb-i18n="${_C}.toolbox.groups.fillColor.title">${t.groups.fillColor.title}</label>
                            <div id="${_v}-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${_v}-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">
                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",r)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#eD(){gP.addSetting(gf.mouseOnlyToEditVectorShapes,{state:!0,i18nBase:`${_C}.settings`,i18nKey:"mouseOnlyToEditVectorShapes"})}#eK(){return new _g({hitTolerance:this.options.hitTolerance,style:(t,i)=>ux.getSelectedStyle(t,i),filter:(t,i)=>{if(dK.isIconMarkerType(t)||dK.isWindBarbType(t))return!1;if(dY.belongsToFeatureLayer(t))return!0;let n=gP.getSetting(gf.selectVectorMapShapes);return!!dY.belongsToMapLayer(t)&&!!n}})}#ej(){return new _h({features:this.interactionSelect.getFeatures(),condition:t=>n1(t)||this.useMouseOnlyToEditVectorShapes()})}#eW(){return new _m({features:this.interactionSelect.getFeatures()})}activateTool(){let t=this.getMap();t&&([this.interactionSelect,this.interactionTranslate,this.interactionModify].forEach(i=>{t.addInteraction(i)}),gC.setActiveTool(this),gU.addSnap(this),this.isActive=!0,this.uiRefToolboxSection.classList.add(`${_w}--show`),this.button.classList.add(`${_y}--active`),this.localStorage.isActive=!0,ht.setStateObject(_B,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}deactivateTool(){[this.interactionSelect,this.interactionTranslate,this.interactionModify].forEach(t=>{this.getMap().removeInteraction(t)}),this.interactionSelect.getFeatures().clear(),gC.removeActiveTool(),gU.removeSnap(),this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${_w}--show`),this.button.classList.remove(`${_y}--active`),this.localStorage.isActive=!1,ht.setStateObject(_B,this.localStorage)}deselectTool(){this.deactivateTool()}#e1(t){let i=dY.getFeatureLayers();t.forEach(t=>{i.forEach(i=>{void 0!==i.getLayer().getSource().hasFeature&&i.getLayer().getSource().hasFeature(t)&&(dY.removeFeatureFromLayer(t,i),this.interactionSelect.getFeatures().remove(t))})})}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.editTool)?this.onClickTool(t):this.isActive&&t.key===gj.valueDelete&&this.#eP()}#b(){this.doClearState(),this.doClearColors(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#e0(t){this.interactionSelect.getFeatures().clear()}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#e$(t){this.doSelectFeatureAdd(t)}#eY(t){this.doSelectFeatureRemove(t)}#eq(t){this.doModifyStart(t)}#eX(t){this.doModifyEnd(t)}#eZ(t){this.doTranslateStart(t)}#eJ(t){this.doTranslateEnd(t)}#eP(){let t=[...this.interactionSelect.getFeatures().getArray()];if(0===t.length)return void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0});this.askToDeleteFeatures(t)}#ek(){let t=[...this.interactionSelect.getFeatures().getArray()];if(0===t.length)return void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0});this.askToRotateSelectedFeatures(t)}#eN(){let t=[...this.interactionSelect.getFeatures().getArray()];return 0===t.length?void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0}):t.length>=2?void c9.info({i18nKey:`${_C}.toasts.infos.strictOneFeature`,autoremove:!0}):void this.doShowFeatureInfo(t[0])}#eU(){let t=[...this.interactionSelect.getFeatures().getArray()];if(0===t.length)return void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0});this.askToConvertSelectedFeatures(t)}#eQ(t){let i=[...this.interactionSelect.getFeatures().getArray()];if(0===i.length)return void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0});this.doCutFeatures(i)}#eH(t){let i=[...this.interactionSelect.getFeatures().getArray()];if(0===i.length)return void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0});this.doCopyFeatures(i)}#eG(t){if(0===this.featureClipboard.length)return void c9.info({i18nKey:`${_C}.toasts.infos.missingFeatures`,autoremove:!0});this.doPasteFeatures()}#ez(t){this.doFeatureColorChange(t)}#e2(t){this.doFeatureChange(t)}#eV(t,i){let n=[...this.interactionSelect.getFeatures().getArray()];if(!this.isTwoAndOnlyTwoShapes(n))return void c9.info({i18nKey:`${_C}.toasts.infos.strictTwoFeatures`,autoremove:!0});this.doShapeOperation(n,t,i)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}attachOnChange(t){let i=this.interactionSelect.getFeatures().getArray(),n=!gV.isEmpty();n&&1===i.length&&(this.tooltipItem=gV.push(_b));let r=A2.toolbar.id,s=t.get(r),o=n&&1===i.length;s.onChangeListener=t.getGeometry().on(A8.openLayers.change,this.#e2.bind(this,t)),s.tooltip.getElement().className=`oltb-overlay-tooltip ${o?"oltb-overlay-tooltip--hidden":""}`}detachOnChange(t){let i=this.interactionSelect.getFeatures().getArray();gV.isEmpty()||1!==i.length||gV.pop(_b);let n=A2.toolbar.id,r=t.get(n),s=t.getGeometry();X(r.onChangeListener);let o=r.tooltip,a=o.getElement(),l=uO(s),A=uR(s);o.setPosition(l),a.className="oltb-overlay-tooltip",a.firstElementChild.innerHTML=`${A.value} ${A.unit}`}unionFeatures(t,i){return m9.operation.overlay.OverlayOp.union(t,i)}intersectFeatures(t,i){return m9.operation.overlay.OverlayOp.intersection(t,i)}excludeFeatures(t,i){return m9.operation.overlay.OverlayOp.symDifference(t,i)}differenceFeatures(t,i){return m9.operation.overlay.OverlayOp.difference(t,i)}useMouseOnlyToEditVectorShapes(){return gP.getSetting(gf.mouseOnlyToEditVectorShapes)}isTwoAndOnlyTwoShapes(t){return 2===t.length}getNumSelectedFeatures(){return this.interactionSelect.getFeatures().getLength()}askToDeleteFeatures(t){let i=c1.get(`${_C}.dialogs.confirms.deleteFeatures`);return fO.confirm({title:i.title,message:`${i.message} ${t.length}st?`,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:()=>{this.doDeleteFeatures(t)}})}askToRotateSelectedFeatures(t,i="0"){let n=c1.get(`${_C}.dialogs.prompts.rotateFeatures`);return fO.prompt({title:n.title,message:`${n.message}`,value:i,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:i=>{i.isDigitsOnly()?this.doRotateFeatures(t,i):(A0.logError(__,"askToRotateSelectedFeatures",{message:"Only digits are allowed as input",result:i}),c9.error({i18nKey:`${_C}.toasts.errors.invalidValue`}))}})}askToConvertSelectedFeatures(t){let i=c1.get(`${_C}.dialogs.prompts.convertFeatures`),n=c1.get(`${_x}.types.convertable`);return fO.select({title:i.title,message:i.message,value:ud.type.measurement,options:[{text:n.drawing,value:ud.type.drawing},{text:n.measurement,value:ud.type.measurement}],confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:i=>{this.doConvertFeatures(t,i)}})}doPushFeatureStyle(t){let i=te(t);this.originalFeatureStyles[i]=t.getStyle()}doPopFeatureStyle(t){let i=te(t);t.setStyle(this.originalFeatureStyles[i]),delete this.originalFeatureStyles[i]}doClearState(){this.localStorage=E(an).cloneDeep(_S),ht.setStateObject(_B,_S)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(_B,this.localStorage)})}doSelectFeatureAdd(t){let i=t.element;this.doPushFeatureStyle(i),this.options.onSelectAdd&&this.options.onSelectAdd(t)}doSelectFeatureRemove(t){let i=t.element;i&&window.setTimeout(()=>{if(this.colorHasChanged){if(i.setStyle(this.lastStyle),dK.isMeasurementType(i)){let t=new sz({fill:new sQ({color:this.lastStyle.getFill().getColor()}),stroke:new sV({color:this.lastStyle.getStroke().getColor(),width:this.lastStyle.getStroke().getWidth(),lineDash:[2,5]})});i.setStyle(t)}this.options.onStyleChange&&this.options.onStyleChange(t,this.lastStyle),0===t.index&&(this.colorHasChanged=!1)}}),this.options.onSelectRemove&&this.options.onSelectRemove(t)}doModifyStart(t){(t.features||[]).forEach(t=>{dK.hasTooltip(t)&&this.attachOnChange(t)}),this.options.onModifyStart&&this.options.onModifyStart(t)}doModifyEnd(t){(t.features||[]).forEach(t=>{dK.hasTooltip(t)&&this.detachOnChange(t)}),this.options.onModifyEnd&&this.options.onModifyEnd(t)}doTranslateStart(t){(t.features||[]).forEach(t=>{dK.hasTooltip(t)&&this.attachOnChange(t)}),this.options.onTranslateStart&&this.options.onTranslateStart(t)}doTranslateEnd(t){(t.features||[]).forEach(t=>{dK.hasTooltip(t)&&this.detachOnChange(t)}),this.options.onTranslateEnd&&this.options.onTranslateEnd(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doFeatureColorChange(t){this.colorHasChanged=!0;let i=this.uiRefFillColor.getAttribute("data-oltb-color"),n=this.uiRefStrokeColor.getAttribute("data-oltb-color"),r=[...this.interactionSelect.getFeatures().getArray()];this.lastStyle=new sz({fill:new sQ({color:i}),stroke:new sV({color:n,width:2.5})}),r.forEach(t=>{t.setStyle(this.lastStyle)}),this.localStorage.fillColor=this.lastStyle.getFill().getColor(),this.localStorage.strokeColor=this.lastStyle.getStroke().getColor(),ht.setStateObject(_B,this.localStorage)}doFeatureChange(t){let i=this.interactionSelect.getFeatures().getArray(),n=!gV.isEmpty(),r=t.getGeometry(),s=uR(r);if(n&&1===i.length)this.tooltipItem.innerHTML=`${s.value} ${s.unit}`;else{let i=dK.getTooltip(t);i.setPosition(uO(r)),i.getElement().firstElementChild.innerHTML=`${s.value} ${s.unit}`}}doShapeOperation(t,i,n){try{let r=t[0],s=t[1],o=this.parser.read(r.getGeometry()),a=this.parser.read(s.getGeometry()),l=i(o,a),A=new uE({geometry:new nA(this.parser.write(l).getCoordinates())});dK.isMeasurementType(r)||dK.isMeasurementType(s)?(dK.applyMeasurementProperties(A),A.setStyle(ux.getDefaultMeasurementStyle())):A.setStyle(ux.getDefaultDrawingStyle());let h=dY.getActiveFeatureLayer();dY.addFeatureToLayer(A,h),this.doDeleteFeatures(t),this.options.onShapeOperation&&this.options.onShapeOperation(n,r,s,A)}catch(t){A0.logError(__,"onShapeOperator",{message:"Failed to perform shape operation",error:t}),c9.error({i18nKey:`${_C}.toasts.operationFailed`}),this.options.onError&&this.options.onError(t)}}doClearColors(){this.uiRefFillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.uiRefFillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.uiRefStrokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.uiRefStrokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}doDeleteFeatures(t){this.#e1(t),this.options.onRemovedFeatures&&this.options.onRemovedFeatures(t)}doRotateFeatures(t,i){let n=uh.degreesToRadians(i);t.forEach(t=>{let i=t.getGeometry(),r=t7(i.getExtent());i.rotate(n,r)})}doCutFeatures(t){t.forEach(t=>{let i=dK.deepCopyVectorFeatureWithStyle(t,this.originalFeatureStyles);this.featureClipboard.push(i)}),this.#e1(t),c9.info({prefix:t.length,i18nKey:`${_C}.toasts.infos.cutFeatures`,autoremove:!0}),this.options.onCutFeatures&&this.options.onCutFeatures(t)}doCopyFeatures(t){t.forEach(t=>{let i=dK.deepCopyVectorFeatureWithStyle(t,this.originalFeatureStyles);this.featureClipboard.push(i)}),c9.info({prefix:t.length,i18nKey:`${_C}.toasts.infos.copiedFeatures`,autoremove:!0}),this.options.onCopyFeatures&&this.options.onCopyFeatures(t)}doPasteFeatures(){let t=[...this.featureClipboard];this.featureClipboard=[];let i=dY.getActiveFeatureLayer();t.forEach(t=>{dY.addFeatureToLayer(t,i)}),c9.info({prefix:t.length,i18nKey:`${_C}.toasts.infos.pastedFeatures`,autoremove:!0}),this.options.onPasteFeatures&&this.options.onPasteFeatures(t,i)}doAddSelectedFeature(t){this.interactionSelect.getFeatures().push(t)}doRemoveSelectedFeature(t){this.interactionSelect.getFeatures().remove(t)}doClearSelectedFeatures(){this.interactionSelect.getFeatures().clear()}doConvertFeatures(t,i){this.doClearSelectedFeatures(),dK.convertFeaturesTo(t,i.to)}doShowFeatureInfo(t){let i=te(t),n=t.getGeometry(),r=uR(n),s=n.getCoordinates()[0],o=s.length,a=JSON.stringify(JSON.decycle(s),uB,4),l=A2.toolbar.id,A=JSON.stringify(JSON.decycle(t.get(l)),uB,4);return new _i({data:{id:i,measurement:`${r.value} ${r.unit}`,oltbProperties:`<pre><code>${A}</code></pre>`,vertices:o,coordinates:`<pre><code>${a}</code></pre>`}})}}var an=I("f1q41");class _F{static create(t={}){return new gJ({title:t.title,maximized:t.maximized,pushWidth:t.pushWidth,onClose:t.onClose,content:t.content})}}const _M="oltb-tool-button",_T="tools.infoTool",_R=Object.freeze({title:"Hey!",content:"This is the default content, try adding some content of your own.",onInitiated:void 0,onClicked:void 0});class _O extends mk{constructor(t={}){super({filename:"info-tool.js"});let i=up({path:ug.infoCircle.stroked,class:`${_M}__icon`}),n=c1.get(_T),r=A6.createElement({element:"button",html:i,class:_M,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.infoTool})`,"data-tippy-content-post":`(${mQ.infoTool})`,"data-oltb-i18n":`${_T}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.infoModal=void 0,this.options=E(an).merge(E(an).cloneDeep(_R),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doShowInfoModal()}#tq(t){mK(t,mQ.infoTool)&&this.onClickTool(t)}doShowInfoModal(){this.infoModal||(this.infoModal=_F.create({title:this.options.title,content:this.options.content,onClose:()=>{this.infoModal=void 0}}))}}var an=I("f1q41");const _D="help-tool.js",_P="oltb-tool-button",_k="tools.helpTool",_N=Object.freeze({url:"https://github.com/qulle/oltb",target:"_blank",onInitiated:void 0,onClicked:void 0});class _U extends mk{constructor(t={}){super({filename:_D});let i=up({path:ug.questionCircle.stroked,class:`${_P}__icon`}),n=c1.get(_k),r=A6.createElement({element:"button",html:i,class:_P,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.helpTool})`,"data-tippy-content-post":`(${mQ.helpTool})`,"data-oltb-i18n":`${_k}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.helpDialog=void 0,this.options=E(an).merge(E(an).cloneDeep(_N),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.askToOpenTabOrWindow()}#tq(t){mK(t,mQ.helpTool)&&this.onClickTool()}askToOpenTabOrWindow(){if(this.helpDialog)return;let t=c1.get(`${_k}.dialogs.confirms.openHelp`);this.helpDialog=fO.confirm({title:t.title,message:t.message,confirmClass:fO.Success,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:()=>{this.doOpenTabOrWindow(),this.helpDialog=void 0},onCancel:()=>{this.helpDialog=void 0}})}doOpenTabOrWindow(){try{window.open(this.options.url,this.options.target).focus()}catch(t){A0.logError(_D,"doOpenTabOrWindow",{message:"Action was restricted by browser settings",error:t}),c9.error({i18nKey:`${_k}.toasts.errors.blockedByBrowser`})}}}var an=I("f1q41");const _Q="oltb-tool-button",_H="tools.themeTool",_G=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onChanged:void 0}),_V=Object.freeze({light:{class:"light",icon:up({path:ug.moonStars.stroked,class:`${_Q}__icon`})},dark:{class:"dark",icon:up({path:ug.sun.stroked,class:`${_Q}__icon`})}}),_z=he.themeTool,_K=Object.freeze({theme:_V.light.class});class _j extends mk{constructor(t={}){super({filename:"theme-tool.js"});let i=c1.get(_H),n=A6.createElement({element:"button",html:this.getToolIcon(),class:_Q,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.themeTool})`,"data-tippy-content-post":`(${mQ.themeTool})`,"data-oltb-i18n":`${_H}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});A6.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(_G),t),this.localStorage=ht.getAndMergeStateObject(_z,_K),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doToggleTheme()}#tq(t){mK(t,mQ.themeTool)&&this.onClickTool(t)}#b(){let t=this.getActiveTheme();this.doSwitchThemeFromTo(t,_V.light),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}getToolIcon(){return g0()?_V.dark.icon:_V.light.icon}getInActiveThem(){return g0()?_V.light:_V.dark}getActiveTheme(){return g0()?_V.dark:_V.light}doToggleTheme(){let t=this.getActiveTheme(),i=this.getInActiveThem();this.doSwitchThemeFromTo(t,i),this.options.onChanged&&this.options.onChanged(i.class)}doSwitchThemeFromTo(t,i){this.localStorage.theme=i.class,ht.setStateObject(_z,this.localStorage);let n="oltb",r=hr.getToolbarElement();r.classList.remove(t.class),window.document.body.classList.remove(`${n}-${t.class}`),r.classList.add(i.class),window.document.body.classList.add(`${n}-${i.class}`),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",i.icon)}}var an=I("f1q41");function _W(t,i){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _$(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?_W(Object(n),!0).forEach(function(i){var r,s,o;r=t,s=i,o=n[i],s in r?Object.defineProperty(r,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[s]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_W(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _Y(t){return(_Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _q(){return(_q=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function _X(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var _Z=_X(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_J=_X(/Edge/i),_0=_X(/firefox/i),_1=_X(/safari/i)&&!_X(/chrome/i)&&!_X(/android/i),_2=_X(/iP(ad|od|hone)/i),_5=_X(/chrome/i)&&_X(/android/i),_4={capture:!1,passive:!1};function _3(t,i,n){t.addEventListener(i,n,!_Z&&_4)}function _6(t,i,n){t.removeEventListener(i,n,!_Z&&_4)}function _8(t,i){if(i){if(">"===i[0]&&(i=i.substring(1)),t)try{if(t.matches)return t.matches(i);if(t.msMatchesSelector)return t.msMatchesSelector(i);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(i)}catch(t){}return!1}}function _7(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function _9(t,i,n,r){if(t){n=n||document;do{if(null!=i&&(">"===i[0]?t.parentNode===n&&_8(t,i):_8(t,i))||r&&t===n)return t;if(t===n)break}while(t=_7(t))}return null}var yt=/\s+/g;function ye(t,i,n){if(t&&i)if(t.classList)t.classList[n?"add":"remove"](i);else{var r=(" "+t.className+" ").replace(yt," ").replace(" "+i+" "," ");t.className=(r+(n?" "+i:"")).replace(yt," ")}}function yi(t,i,n){var r=t&&t.style;if(r)if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===i?n:n[i];else i in r||-1!==i.indexOf("webkit")||(i="-webkit-"+i),r[i]=n+("string"==typeof n?"":"px")}function yn(t,i){var n="";if("string"==typeof t)n=t;else do{var r=yi(t,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!i&&(t=t.parentNode))var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function yr(t,i,n){if(t){var r=t.getElementsByTagName(i),s=0,o=r.length;if(n)for(;s<o;s++)n(r[s],s);return r}return[]}function ys(){var t=document.scrollingElement;return t||document.documentElement}function yo(t,i,n,r,s){if(t.getBoundingClientRect||t===window){if(t!==window&&t.parentNode&&t!==ys()?(a=(o=t.getBoundingClientRect()).top,l=o.left,A=o.bottom,h=o.right,c=o.height,u=o.width):(a=0,l=0,A=window.innerHeight,h=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(i||n)&&t!==window&&(s=s||t.parentNode,!_Z))do if(s&&s.getBoundingClientRect&&("none"!==yi(s,"transform")||n&&"static"!==yi(s,"position"))){var o,a,l,A,h,c,u,d=s.getBoundingClientRect();a-=d.top+parseInt(yi(s,"border-top-width")),l-=d.left+parseInt(yi(s,"border-left-width")),A=a+o.height,h=l+o.width;break}while(s=s.parentNode)if(r&&t!==window){var g=yn(s||t),f=g&&g.a,p=g&&g.d;g&&(a/=p,l/=f,u/=f,c/=p,A=a+c,h=l+u)}return{top:a,left:l,bottom:A,right:h,width:u,height:c}}}function ya(t,i,n){for(var r=yu(t,!0),s=yo(t)[i];r;){var o=yo(r)[n],a=void 0;if(!("top"===n||"left"===n?s>=o:s<=o))return r;if(r===ys())break;r=yu(r,!1)}return!1}function yl(t,i,n,r){for(var s=0,o=0,a=t.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==wC.ghost&&(r||a[o]!==wC.dragged)&&_9(a[o],n.draggable,t,!1)){if(s===i)return a[o];s++}o++}return null}function yA(t,i){for(var n=t.lastElementChild;n&&(n===wC.ghost||"none"===yi(n,"display")||i&&!_8(n,i));)n=n.previousElementSibling;return n||null}function yh(t,i){var n=0;if(!t||!t.parentNode)return -1;for(;t=t.previousElementSibling;)"TEMPLATE"!==t.nodeName.toUpperCase()&&t!==wC.clone&&(!i||_8(t,i))&&n++;return n}function yc(t){var i=0,n=0,r=ys();if(t)do{var s=yn(t),o=s.a,a=s.d;i+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==r&&(t=t.parentNode))return[i,n]}function yu(t,i){if(!t||!t.getBoundingClientRect)return ys();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=yi(n);if(n.clientWidth<n.scrollWidth&&("auto"==s.overflowX||"scroll"==s.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==s.overflowY||"scroll"==s.overflowY)){if(!n.getBoundingClientRect||n===document.body)return ys();if(r||i)return n;r=!0}}while(n=n.parentNode)return ys()}function yd(t,i){return Math.round(t.top)===Math.round(i.top)&&Math.round(t.left)===Math.round(i.left)&&Math.round(t.height)===Math.round(i.height)&&Math.round(t.width)===Math.round(i.width)}function yg(t,i){return function(){if(!yH){var n=arguments;1===n.length?t.call(this,n[0]):t.apply(this,n),yH=setTimeout(function(){yH=void 0},i)}}}function yf(t,i,n){t.scrollLeft+=i,t.scrollTop+=n}function yp(t){var i=window.Polymer,n=window.jQuery||window.Zepto;return i&&i.dom?i.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function ym(t,i,n){var r={};return Array.from(t.children).forEach(function(s){if(_9(s,i.draggable,t,!1)&&!s.animated&&s!==n){var o,a,l,A,h=yo(s);r.left=Math.min(null!=(o=r.left)?o:1/0,h.left),r.top=Math.min(null!=(a=r.top)?a:1/0,h.top),r.right=Math.max(null!=(l=r.right)?l:-1/0,h.right),r.bottom=Math.max(null!=(A=r.bottom)?A:-1/0,h.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var y_="Sortable"+new Date().getTime(),yy=[],yw={initializeByDefault:!0},yv={mount:function(t){for(var i in yw)!yw.hasOwnProperty(i)||i in t||(t[i]=yw[i]);yy.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),yy.push(t)},pluginEvent:function(t,i,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var s=t+"Global";yy.forEach(function(r){i[r.pluginName]&&(i[r.pluginName][s]&&i[r.pluginName][s](_$({sortable:i},n)),i.options[r.pluginName]&&i[r.pluginName][t]&&i[r.pluginName][t](_$({sortable:i},n)))})},initializePlugins:function(t,i,n,r){for(var s in yy.forEach(function(r){var s=r.pluginName;if(t.options[s]||r.initializeByDefault){var o=new r(t,i,t.options);o.sortable=t,o.options=t.options,t[s]=o,_q(n,o.defaults)}}),t.options)if(t.options.hasOwnProperty(s)){var o=this.modifyOption(t,s,t.options[s]);void 0!==o&&(t.options[s]=o)}},getEventProperties:function(t,i){var n={};return yy.forEach(function(r){"function"==typeof r.eventProperties&&_q(n,r.eventProperties.call(i[r.pluginName],t))}),n},modifyOption:function(t,i,n){var r;return yy.forEach(function(s){t[s.pluginName]&&s.optionListeners&&"function"==typeof s.optionListeners[i]&&(r=s.optionListeners[i].call(t[s.pluginName],n))}),r}},yb=["evt"],yC=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,s=function(t,i){if(null==t)return{};var n,r,s=function(t,i){if(null==t)return{};var n,r,s={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],i.indexOf(n)>=0||(s[n]=t[n]);return s}(t,i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],!(i.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}(n,yb);yv.pluginEvent.bind(wC)(t,i,_$({dragEl:yG,parentEl:yV,ghostEl:yz,rootEl:yK,nextEl:yj,lastDownEl:yW,cloneEl:y$,cloneHidden:yY,dragStarted:y7,putSortable:y1,activeSortable:wC.active,originalEvent:r,oldIndex:yq,oldDraggableIndex:yZ,newIndex:yX,newDraggableIndex:yJ,hideGhostForTarget:wy,unhideGhostForTarget:ww,cloneNowHidden:function(){yY=!0},cloneNowShown:function(){yY=!1},dispatchSortableEvent:function(t){yx({sortable:i,name:t,originalEvent:r})}},s))};function yx(t){!function(t){var i=t.sortable,n=t.rootEl,r=t.name,s=t.targetEl,o=t.cloneEl,a=t.toEl,l=t.fromEl,A=t.oldIndex,h=t.newIndex,c=t.oldDraggableIndex,u=t.newDraggableIndex,d=t.originalEvent,g=t.putSortable,f=t.extraEventProperties;if(i=i||n&&n[y_]){var p,m=i.options,_="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||_Z||_J?(p=document.createEvent("Event")).initEvent(r,!0,!0):p=new CustomEvent(r,{bubbles:!0,cancelable:!0}),p.to=a||n,p.from=l||n,p.item=s||n,p.clone=o,p.oldIndex=A,p.newIndex=h,p.oldDraggableIndex=c,p.newDraggableIndex=u,p.originalEvent=d,p.pullMode=g?g.lastPutMode:void 0;var y=_$(_$({},f),yv.getEventProperties(r,i));for(var w in y)p[w]=y[w];n&&n.dispatchEvent(p),m[_]&&m[_].call(i,p)}}(_$({putSortable:y1,cloneEl:y$,targetEl:yG,rootEl:yK,oldIndex:yq,oldDraggableIndex:yZ,newIndex:yX,newDraggableIndex:yJ},t))}var yE,yB,yS,yI,yL,yF,yM,yT,yR,yO,yD,yP,yk,yN,yU,yQ,yH,yG,yV,yz,yK,yj,yW,y$,yY,yq,yX,yZ,yJ,y0,y1,y2,y5,y4,y3,y6,y8,y7,y9,wt,we,wi,wn=!1,wr=!1,ws=[],wo=!1,wa=!1,wl=[],wA=!1,wh=[],wc="undefined"!=typeof document,wu=_J||_Z?"cssFloat":"float",wd=wc&&!_5&&!_2&&"draggable"in document.createElement("div"),wg=function(){if(wc){if(_Z)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),wf=function(t,i){var n=yi(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=yl(t,0,i),o=yl(t,1,i),a=s&&yi(s),l=o&&yi(o),A=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+yo(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+yo(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return o&&("both"===l.clear||l.clear===c)?"vertical":"horizontal"}return s&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||A>=r&&"none"===n[wu]||o&&"none"===n[wu]&&A+h>r)?"vertical":"horizontal"},wp=function(t,i,n){var r=n?t.left:t.top,s=n?t.right:t.bottom,o=n?t.width:t.height,a=n?i.left:i.top,l=n?i.right:i.bottom,A=n?i.width:i.height;return r===a||s===l||r+o/2===a+A/2},wm=function(t,i){var n;return ws.some(function(r){var s=r[y_].options.emptyInsertThreshold;if(!(!s||yA(r))){var o=yo(r),a=t>=o.left-s&&t<=o.right+s,l=i>=o.top-s&&i<=o.bottom+s;if(a&&l)return n=r}}),n},w_=function(t){function i(t,n){return function(r,s,o,a){var l=r.options.group.name&&s.options.group.name&&r.options.group.name===s.options.group.name;if(null==t&&(n||l))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return i(t(r,s,o,a),n)(r,s,o,a);var A=(n?r:s).options.group.name;return!0===t||"string"==typeof t&&t===A||t.join&&t.indexOf(A)>-1}}var n={},r=t.group;r&&"object"==_Y(r)||(r={name:r}),n.name=r.name,n.checkPull=i(r.pull,!0),n.checkPut=i(r.put),n.revertClone=r.revertClone,t.group=n},wy=function(){!wg&&yz&&yi(yz,"display","none")},ww=function(){!wg&&yz&&yi(yz,"display","")};wc&&!_5&&document.addEventListener("click",function(t){if(wr)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),wr=!1,!1},!0);var wv=function(t){if(yG){var i=wm((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(i){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=i,n.preventDefault=void 0,n.stopPropagation=void 0,i[y_]._onDragOver(n)}}},wb=function(t){yG&&yG.parentNode[y_]._isOutsideThisEl(t.target)};function wC(t,i){if(!(t&&t.nodeType&&1===t.nodeType))throw"Sortable: `el` must be an HTMLElement, not ".concat(({}).toString.call(t));this.el=t,this.options=i=_q({},i),t[y_]=this;var n,r,s={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wf(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,i){t.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==wC.supportPointer&&"PointerEvent"in window&&(!_1||_2),emptyInsertThreshold:5};for(var o in yv.initializePlugins(this,t,s),s)o in i||(i[o]=s[o]);for(var a in w_(i),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!i.forceFallback&&wd,this.nativeDraggable&&(this.options.touchStartThreshold=1),i.supportPointer?_3(t,"pointerdown",this._onTapStart):(_3(t,"mousedown",this._onTapStart),_3(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(_3(t,"dragover",this),_3(t,"dragenter",this)),ws.push(this.el),i.store&&i.store.get&&this.sort(i.store.get(this)||[]),_q(this,(r=[],{captureAnimationState:function(){r=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==yi(t,"display")&&t!==wC.ghost){r.push({target:t,rect:yo(t)});var i=_$({},r[r.length-1].rect);if(t.thisAnimationDuration){var n=yn(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}})},addAnimationState:function(t){r.push(t)},removeAnimationState:function(t){r.splice(function(t,i){for(var n in t)if(t.hasOwnProperty(n)){for(var r in i)if(i.hasOwnProperty(r)&&i[r]===t[n][r])return Number(n)}return -1}(r,{target:t}),1)},animateAll:function(t){var i=this;if(!this.options.animation){clearTimeout(n),"function"==typeof t&&t();return}var s=!1,o=0;r.forEach(function(t){var n,r,a,l,A=0,h=t.target,c=h.fromRect,u=yo(h),d=h.prevFromRect,g=h.prevToRect,f=t.rect,p=yn(h,!0);p&&(u.top-=p.f,u.left-=p.e),h.toRect=u,h.thisAnimationDuration&&yd(d,u)&&!yd(c,u)&&(f.top-u.top)/(f.left-u.left)==(c.top-u.top)/(c.left-u.left)&&(n=f,r=d,a=g,l=i.options,A=Math.sqrt(Math.pow(r.top-n.top,2)+Math.pow(r.left-n.left,2))/Math.sqrt(Math.pow(r.top-a.top,2)+Math.pow(r.left-a.left,2))*l.animation),yd(u,c)||(h.prevFromRect=c,h.prevToRect=u,A||(A=i.options.animation),i.animate(h,f,u,A)),A&&(s=!0,o=Math.max(o,A),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},A),h.thisAnimationDuration=A)}),clearTimeout(n),s?n=setTimeout(function(){"function"==typeof t&&t()},o):"function"==typeof t&&t(),r=[]},animate:function(t,i,n,r){if(r){yi(t,"transition",""),yi(t,"transform","");var s=yn(this.el),o=s&&s.a,a=s&&s.d,l=(i.left-n.left)/(o||1),A=(i.top-n.top)/(a||1);t.animatingX=!!l,t.animatingY=!!A,yi(t,"transform","translate3d("+l+"px,"+A+"px,0)"),this.forRepaintDummy=t.offsetWidth,yi(t,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),yi(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){yi(t,"transition",""),yi(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},r)}}}))}function wx(t,i,n,r,s,o,a,l){var A,h,c=t[y_],u=c.options.onMove;return!window.CustomEvent||_Z||_J?(A=document.createEvent("Event")).initEvent("move",!0,!0):A=new CustomEvent("move",{bubbles:!0,cancelable:!0}),A.to=i,A.from=t,A.dragged=n,A.draggedRect=r,A.related=s||i,A.relatedRect=o||yo(i),A.willInsertAfter=l,A.originalEvent=a,t.dispatchEvent(A),u&&(h=u.call(c,A,a)),h}function wE(t){t.draggable=!1}function wB(){wA=!1}function wS(t){return setTimeout(t,0)}function wI(t){return clearTimeout(t)}wC.prototype={constructor:wC,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(y9=null)},_getDirection:function(t,i){return"function"==typeof this.options.direction?this.options.direction.call(this,t,i,yG):this.options.direction},_onTapStart:function(t){if(t.cancelable){var i=this,n=this.el,r=this.options,s=r.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(a||t).target,A=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,h=r.filter;if(function(t){wh.length=0;for(var i=t.getElementsByTagName("input"),n=i.length;n--;){var r=i[n];r.checked&&wh.push(r)}}(n),!(yG||/mousedown|pointerdown/.test(o)&&0!==t.button||r.disabled||A.isContentEditable||!this.nativeDraggable&&_1&&l&&"SELECT"===l.tagName.toUpperCase()||(l=_9(l,r.draggable,n,!1))&&l.animated)&&yW!==l){if(yq=yh(l),yZ=yh(l,r.draggable),"function"==typeof h){if(h.call(this,t,l,this)){yx({sortable:i,rootEl:A,name:"filter",targetEl:l,toEl:n,fromEl:n}),yC("filter",i,{evt:t}),s&&t.preventDefault();return}}else if(h&&(h=h.split(",").some(function(r){if(r=_9(A,r.trim(),n,!1))return yx({sortable:i,rootEl:r,name:"filter",targetEl:l,fromEl:n,toEl:n}),yC("filter",i,{evt:t}),!0}))){s&&t.preventDefault();return}(!r.handle||_9(A,r.handle,n,!1))&&this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,i,n){var r,s=this,o=s.el,a=s.options,l=o.ownerDocument;if(n&&!yG&&n.parentNode===o){var A=yo(n);if(yK=o,yV=(yG=n).parentNode,yj=yG.nextSibling,yW=n,y0=a.group,wC.dragged=yG,y6=(y2={target:yG,clientX:(i||t).clientX,clientY:(i||t).clientY}).clientX-A.left,y8=y2.clientY-A.top,this._lastX=(i||t).clientX,this._lastY=(i||t).clientY,yG.style["will-change"]="all",r=function(){if(yC("delayEnded",s,{evt:t}),wC.eventCanceled)return void s._onDrop();s._disableDelayedDragEvents(),!_0&&s.nativeDraggable&&(yG.draggable=!0),s._triggerDragStart(t,i),yx({sortable:s,name:"choose",originalEvent:t}),ye(yG,a.chosenClass,!0)},a.ignore.split(",").forEach(function(t){yr(yG,t.trim(),wE)}),_3(l,"dragover",wv),_3(l,"mousemove",wv),_3(l,"touchmove",wv),a.supportPointer?(_3(l,"pointerup",s._onDrop),this.nativeDraggable||_3(l,"pointercancel",s._onDrop)):(_3(l,"mouseup",s._onDrop),_3(l,"touchend",s._onDrop),_3(l,"touchcancel",s._onDrop)),_0&&this.nativeDraggable&&(this.options.touchStartThreshold=4,yG.draggable=!0),yC("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!i||this.nativeDraggable&&(_J||_Z))r();else{if(wC.eventCanceled)return void this._onDrop();a.supportPointer?(_3(l,"pointerup",s._disableDelayedDrag),_3(l,"pointercancel",s._disableDelayedDrag)):(_3(l,"mouseup",s._disableDelayedDrag),_3(l,"touchend",s._disableDelayedDrag),_3(l,"touchcancel",s._disableDelayedDrag)),_3(l,"mousemove",s._delayedDragTouchMoveHandler),_3(l,"touchmove",s._delayedDragTouchMoveHandler),a.supportPointer&&_3(l,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var i=t.touches?t.touches[0]:t;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){yG&&wE(yG),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;_6(t,"mouseup",this._disableDelayedDrag),_6(t,"touchend",this._disableDelayedDrag),_6(t,"touchcancel",this._disableDelayedDrag),_6(t,"pointerup",this._disableDelayedDrag),_6(t,"pointercancel",this._disableDelayedDrag),_6(t,"mousemove",this._delayedDragTouchMoveHandler),_6(t,"touchmove",this._delayedDragTouchMoveHandler),_6(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,i){i=i||"touch"==t.pointerType&&t,!this.nativeDraggable||i?this.options.supportPointer?_3(document,"pointermove",this._onTouchMove):i?_3(document,"touchmove",this._onTouchMove):_3(document,"mousemove",this._onTouchMove):(_3(yG,"dragend",this),_3(yK,"dragstart",this._onDragStart));try{document.selection?wS(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,i){if(wn=!1,yK&&yG){yC("dragStarted",this,{evt:i}),this.nativeDraggable&&_3(document,"dragover",wb);var n=this.options;t||ye(yG,n.dragClass,!1),ye(yG,n.ghostClass,!0),wC.active=this,t&&this._appendGhost(),yx({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(y5){this._lastX=y5.clientX,this._lastY=y5.clientY,wy();for(var t=document.elementFromPoint(y5.clientX,y5.clientY),i=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(y5.clientX,y5.clientY))!==i;)i=t;if(yG.parentNode[y_]._isOutsideThisEl(t),i)do{if(i[y_]){var n=void 0;if(i[y_]._onDragOver({clientX:y5.clientX,clientY:y5.clientY,target:t,rootEl:i})&&!this.options.dragoverBubble)break}t=i}while(i=_7(i))ww()}},_onTouchMove:function(t){if(y2){var i=this.options,n=i.fallbackTolerance,r=i.fallbackOffset,s=t.touches?t.touches[0]:t,o=yz&&yn(yz,!0),a=yz&&o&&o.a,l=yz&&o&&o.d,A=_2&&wi&&yc(wi),h=(s.clientX-y2.clientX+r.x)/(a||1)+(A?A[0]-wl[0]:0)/(a||1),c=(s.clientY-y2.clientY+r.y)/(l||1)+(A?A[1]-wl[1]:0)/(l||1);if(!wC.active&&!wn){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(yz){o?(o.e+=h-(y4||0),o.f+=c-(y3||0)):o={a:1,b:0,c:0,d:1,e:h,f:c};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");yi(yz,"webkitTransform",u),yi(yz,"mozTransform",u),yi(yz,"msTransform",u),yi(yz,"transform",u),y4=h,y3=c,y5=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!yz){var t=this.options.fallbackOnBody?document.body:yK,i=yo(yG,!0,_2,!0,t),n=this.options;if(_2){for(wi=t;"static"===yi(wi,"position")&&"none"===yi(wi,"transform")&&wi!==document;)wi=wi.parentNode;wi!==document.body&&wi!==document.documentElement?(wi===document&&(wi=ys()),i.top+=wi.scrollTop,i.left+=wi.scrollLeft):wi=ys(),wl=yc(wi)}ye(yz=yG.cloneNode(!0),n.ghostClass,!1),ye(yz,n.fallbackClass,!0),ye(yz,n.dragClass,!0),yi(yz,"transition",""),yi(yz,"transform",""),yi(yz,"box-sizing","border-box"),yi(yz,"margin",0),yi(yz,"top",i.top),yi(yz,"left",i.left),yi(yz,"width",i.width),yi(yz,"height",i.height),yi(yz,"opacity","0.8"),yi(yz,"position",_2?"absolute":"fixed"),yi(yz,"zIndex","100000"),yi(yz,"pointerEvents","none"),wC.ghost=yz,t.appendChild(yz),yi(yz,"transform-origin",y6/parseInt(yz.style.width)*100+"% "+y8/parseInt(yz.style.height)*100+"%")}},_onDragStart:function(t,i){var n=this,r=t.dataTransfer,s=n.options;if(yC("dragStart",this,{evt:t}),wC.eventCanceled)return void this._onDrop();yC("setupClone",this),wC.eventCanceled||((y$=yp(yG)).removeAttribute("id"),y$.draggable=!1,y$.style["will-change"]="",this._hideClone(),ye(y$,this.options.chosenClass,!1),wC.clone=y$),n.cloneId=wS(function(){yC("clone",n),wC.eventCanceled||(n.options.removeCloneOnHide||yK.insertBefore(y$,yG),n._hideClone(),yx({sortable:n,name:"clone"}))}),i||ye(yG,s.dragClass,!0),i?(wr=!0,n._loopId=setInterval(n._emulateDragOver,50)):(_6(document,"mouseup",n._onDrop),_6(document,"touchend",n._onDrop),_6(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(n,r,yG)),_3(document,"drop",n),yi(yG,"transform","translateZ(0)")),wn=!0,n._dragStartId=wS(n._dragStarted.bind(n,i,t)),_3(document,"selectstart",n),y7=!0,window.getSelection().removeAllRanges(),_1&&yi(document.body,"user-select","none")},_onDragOver:function(t){var i,n,r,s,o=this.el,a=t.target,l=this.options,A=l.group,h=wC.active,c=y0===A,u=l.sort,d=y1||h,g=this,f=!1;if(!wA){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=_9(a,l.draggable,o,!0),Q("dragOver"),wC.eventCanceled)return f;if(yG.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||g._ignoreWhileAnimating===a)return G(!1);if(wr=!1,h&&!l.disabled&&(c?u||(r=yV!==yK):y1===this||(this.lastPutMode=y0.checkPull(this,h,yG,t))&&A.checkPut(this,h,yG,t))){if(s="vertical"===this._getDirection(t,a),i=yo(yG),Q("dragOverValid"),wC.eventCanceled)return f;if(r)return yV=yK,H(),this._hideClone(),Q("revert"),wC.eventCanceled||(yj?yK.insertBefore(yG,yj):yK.appendChild(yG)),G(!0);var p=yA(o,l.draggable);if(!p||(_=t,y=s,w=this,v=yo(yA(w.el,w.options.draggable)),b=ym(w.el,w.options,yz),(y?_.clientX>b.right+10||_.clientY>v.bottom&&_.clientX>v.left:_.clientY>b.bottom+10||_.clientX>v.right&&_.clientY>v.top)&&!p.animated)){if(p===yG)return G(!1);if(p&&o===t.target&&(a=p),a&&(n=yo(a)),!1!==wx(yK,o,yG,i,a,n,t,!!a))return H(),p&&p.nextSibling?o.insertBefore(yG,p.nextSibling):o.appendChild(yG),yV=o,V(),G(!0)}else if(p&&(C=t,x=s,E=this,B=yo(yl(E.el,0,E.options,!0)),S=ym(E.el,E.options,yz),x?C.clientX<S.left-10||C.clientY<B.top&&C.clientX<B.right:C.clientY<S.top-10||C.clientY<B.bottom&&C.clientX<B.left)){var m=yl(o,0,l,!0);if(m===yG)return G(!1);if(n=yo(a=m),!1!==wx(yK,o,yG,i,a,n,t,!1))return H(),o.insertBefore(yG,m),yV=o,V(),G(!0)}else if(a.parentNode===o){n=yo(a);var _,y,w,v,b,C,x,E,B,S,I,L,F=0,M=yG.parentNode!==o,T=!wp(yG.animated&&yG.toRect||i,a.animated&&a.toRect||n,s),R=s?"top":"left",O=ya(a,"top","top")||ya(yG,"top","top"),D=O?O.scrollTop:void 0;if(y9!==a&&(L=n[R],wo=!1,wa=!T&&l.invertSwap||M),0!==(F=function(t,i,n,r,s,o,a,l){var A,h=r?t.clientY:t.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,g=!1;if(!a){if(l&&we<c*s){if(!wo&&(1===wt?h>u+c*o/2:h<d-c*o/2)&&(wo=!0),wo)g=!0;else if(1===wt?h<u+we:h>d-we)return-wt}else if(h>u+c*(1-s)/2&&h<d-c*(1-s)/2){return A=i,yh(yG)<yh(A)?1:-1}}return(g=g||a)&&(h<u+c*o/2||h>d-c*o/2)?h>u+c/2?1:-1:0}(t,a,n,s,T?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,wa,y9===a))){var P=yh(yG);do P-=F,I=yV.children[P];while(I&&("none"===yi(I,"display")||I===yz))}if(0===F||I===a)return G(!1);y9=a,wt=F;var k=a.nextElementSibling,N=!1,U=wx(yK,o,yG,i,a,n,t,N=1===F);if(!1!==U)return(1===U||-1===U)&&(N=1===U),wA=!0,setTimeout(wB,30),H(),N&&!k?o.appendChild(yG):a.parentNode.insertBefore(yG,N?k:a),O&&yf(O,0,D-O.scrollTop),yV=yG.parentNode,void 0===L||wa||(we=Math.abs(L-yo(a)[R])),V(),G(!0)}if(o.contains(yG))return G(!1)}return!1}function Q(l,A){yC(l,g,_$({evt:t,isOwner:c,axis:s?"vertical":"horizontal",revert:r,dragRect:i,targetRect:n,canSort:u,fromSortable:d,target:a,completed:G,onMove:function(n,r){return wx(yK,o,yG,i,n,yo(n),t,r)},changed:V},A))}function H(){Q("dragOverAnimationCapture"),g.captureAnimationState(),g!==d&&d.captureAnimationState()}function G(i){return Q("dragOverCompleted",{insertion:i}),i&&(c?h._hideClone():h._showClone(g),g!==d&&(ye(yG,y1?y1.options.ghostClass:h.options.ghostClass,!1),ye(yG,l.ghostClass,!0)),y1!==g&&g!==wC.active?y1=g:g===wC.active&&y1&&(y1=null),d===g&&(g._ignoreWhileAnimating=a),g.animateAll(function(){Q("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(a!==yG||yG.animated)&&(a!==o||a.animated)||(y9=null),l.dragoverBubble||t.rootEl||a===document||(yG.parentNode[y_]._isOutsideThisEl(t.target),i||wv(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function V(){yX=yh(yG),yJ=yh(yG,l.draggable),yx({sortable:g,name:"change",toEl:o,newIndex:yX,newDraggableIndex:yJ,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){_6(document,"mousemove",this._onTouchMove),_6(document,"touchmove",this._onTouchMove),_6(document,"pointermove",this._onTouchMove),_6(document,"dragover",wv),_6(document,"mousemove",wv),_6(document,"touchmove",wv)},_offUpEvents:function(){var t=this.el.ownerDocument;_6(t,"mouseup",this._onDrop),_6(t,"touchend",this._onDrop),_6(t,"pointerup",this._onDrop),_6(t,"pointercancel",this._onDrop),_6(t,"touchcancel",this._onDrop),_6(document,"selectstart",this)},_onDrop:function(t){var i=this.el,n=this.options;if(yX=yh(yG),yJ=yh(yG,n.draggable),yC("drop",this,{evt:t}),yV=yG&&yG.parentNode,yX=yh(yG),yJ=yh(yG,n.draggable),wC.eventCanceled)return void this._nulling();wn=!1,wa=!1,wo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wI(this.cloneId),wI(this._dragStartId),this.nativeDraggable&&(_6(document,"drop",this),_6(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_1&&yi(document.body,"user-select",""),yi(yG,"transform",""),t&&(y7&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),yz&&yz.parentNode&&yz.parentNode.removeChild(yz),(yK===yV||y1&&"clone"!==y1.lastPutMode)&&y$&&y$.parentNode&&y$.parentNode.removeChild(y$),yG&&(this.nativeDraggable&&_6(yG,"dragend",this),wE(yG),yG.style["will-change"]="",y7&&!wn&&ye(yG,y1?y1.options.ghostClass:this.options.ghostClass,!1),ye(yG,this.options.chosenClass,!1),yx({sortable:this,name:"unchoose",toEl:yV,newIndex:null,newDraggableIndex:null,originalEvent:t}),yK!==yV?(yX>=0&&(yx({rootEl:yV,name:"add",toEl:yV,fromEl:yK,originalEvent:t}),yx({sortable:this,name:"remove",toEl:yV,originalEvent:t}),yx({rootEl:yV,name:"sort",toEl:yV,fromEl:yK,originalEvent:t}),yx({sortable:this,name:"sort",toEl:yV,originalEvent:t})),y1&&y1.save()):yX!==yq&&yX>=0&&(yx({sortable:this,name:"update",toEl:yV,originalEvent:t}),yx({sortable:this,name:"sort",toEl:yV,originalEvent:t})),wC.active&&((null==yX||-1===yX)&&(yX=yq,yJ=yZ),yx({sortable:this,name:"end",toEl:yV,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){yC("nulling",this),yK=yG=yV=yz=yj=y$=yW=yY=y2=y5=y7=yX=yJ=yq=yZ=y9=wt=y1=y0=wC.dragged=wC.ghost=wC.clone=wC.active=null,wh.forEach(function(t){t.checked=!0}),wh.length=y4=y3=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":var i;yG&&(this._onDragOver(t),(i=t).dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault());break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,i=[],n=this.el.children,r=0,s=n.length,o=this.options;r<s;r++)_9(t=n[r],o.draggable,this.el,!1)&&i.push(t.getAttribute(o.dataIdAttr)||function(t){for(var i=t.tagName+t.className+t.src+t.href+t.textContent,n=i.length,r=0;n--;)r+=i.charCodeAt(n);return r.toString(36)}(t));return i},sort:function(t,i){var n={},r=this.el;this.toArray().forEach(function(t,i){var s=r.children[i];_9(s,this.options.draggable,r,!1)&&(n[t]=s)},this),i&&this.captureAnimationState(),t.forEach(function(t){n[t]&&(r.removeChild(n[t]),r.appendChild(n[t]))}),i&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,i){return _9(t,i||this.options.draggable,this.el,!1)},option:function(t,i){var n=this.options;if(void 0===i)return n[t];var r=yv.modifyOption(this,t,i);void 0!==r?n[t]=r:n[t]=i,"group"===t&&w_(n)},destroy:function(){yC("destroy",this);var t=this.el;t[y_]=null,_6(t,"mousedown",this._onTapStart),_6(t,"touchstart",this._onTapStart),_6(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(_6(t,"dragover",this),_6(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ws.splice(ws.indexOf(this.el),1),this.el=null},_hideClone:function(){!yY&&(yC("hideClone",this),wC.eventCanceled||(yi(y$,"display","none"),this.options.removeCloneOnHide&&y$.parentNode&&y$.parentNode.removeChild(y$),yY=!0))},_showClone:function(t){if("clone"!==t.lastPutMode)return void this._hideClone();if(yY){if(yC("showClone",this),wC.eventCanceled)return;yG.parentNode!=yK||this.options.group.revertClone?yj?yK.insertBefore(y$,yj):yK.appendChild(y$):yK.insertBefore(y$,yG),this.options.group.revertClone&&this.animate(yG,y$),yi(y$,"display",""),yY=!1}}},wc&&_3(document,"touchmove",function(t){(wC.active||wn)&&t.cancelable&&t.preventDefault()}),wC.utils={on:_3,off:_6,css:yi,find:yr,is:function(t,i){return!!_9(t,i,t,!1)},extend:function(t,i){if(t&&i)for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t},throttle:yg,closest:_9,toggleClass:ye,clone:yp,index:yh,nextTick:wS,cancelNextTick:wI,detectDirection:wf,getChild:yl,expando:y_},wC.get=function(t){return t[y_]},wC.mount=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];i[0].constructor===Array&&(i=i[0]),i.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat(({}).toString.call(t));t.utils&&(wC.utils=_$(_$({},wC.utils),t.utils)),yv.mount(t)})},wC.create=function(t,i){return new wC(t,i)},wC.version="1.15.6";var wL,wF,wM,wT,wR,wO,wD=[],wP=!1;function wk(){wD.forEach(function(t){clearInterval(t.pid)}),wD=[]}function wN(){clearInterval(wO)}var wU=yg(function(t,i,n,r){if(i.scroll){var s,o=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,l=i.scrollSensitivity,A=i.scrollSpeed,h=ys(),c=!1;wF!==n&&(wF=n,wk(),wL=i.scroll,s=i.scrollFn,!0===wL&&(wL=yu(n,!0)));var u=0,d=wL;do{var g=d,f=yo(g),p=f.top,m=f.bottom,_=f.left,y=f.right,w=f.width,v=f.height,b=void 0,C=void 0,x=g.scrollWidth,E=g.scrollHeight,B=yi(g),S=g.scrollLeft,I=g.scrollTop;g===h?(b=w<x&&("auto"===B.overflowX||"scroll"===B.overflowX||"visible"===B.overflowX),C=v<E&&("auto"===B.overflowY||"scroll"===B.overflowY||"visible"===B.overflowY)):(b=w<x&&("auto"===B.overflowX||"scroll"===B.overflowX),C=v<E&&("auto"===B.overflowY||"scroll"===B.overflowY));var L=b&&(Math.abs(y-o)<=l&&S+w<x)-(Math.abs(_-o)<=l&&!!S),F=C&&(Math.abs(m-a)<=l&&I+v<E)-(Math.abs(p-a)<=l&&!!I);if(!wD[u])for(var M=0;M<=u;M++)wD[M]||(wD[M]={});(wD[u].vx!=L||wD[u].vy!=F||wD[u].el!==g)&&(wD[u].el=g,wD[u].vx=L,wD[u].vy=F,clearInterval(wD[u].pid),(0!=L||0!=F)&&(c=!0,wD[u].pid=setInterval((function(){r&&0===this.layer&&wC.active._onTouchMove(wR);var i=wD[this.layer].vy?wD[this.layer].vy*A:0,n=wD[this.layer].vx?wD[this.layer].vx*A:0;("function"!=typeof s||"continue"===s.call(wC.dragged.parentNode[y_],n,i,t,wR,wD[this.layer].el))&&yf(wD[this.layer].el,n,i)}).bind({layer:u}),24))),u++}while(i.bubbleScroll&&d!==h&&(d=yu(d,!1)))wP=c}},30),wQ=function(t){var i=t.originalEvent,n=t.putSortable,r=t.dragEl,s=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(i){var A=n||s;a();var h=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,c=document.elementFromPoint(h.clientX,h.clientY);l(),A&&!A.el.contains(c)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function wH(){}function wG(){}wH.prototype={startIndex:null,dragStart:function(t){var i=t.oldDraggableIndex;this.startIndex=i},onSpill:function(t){var i=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=yl(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(i,r):this.sortable.el.appendChild(i),this.sortable.animateAll(),n&&n.animateAll()},drop:wQ},_q(wH,{pluginName:"revertOnSpill"}),wG.prototype={onSpill:function(t){var i=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),n.animateAll()},drop:wQ},_q(wG,{pluginName:"removeOnSpill"}),wC.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?_3(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_3(document,"pointermove",this._handleFallbackAutoScroll):i.touches?_3(document,"touchmove",this._handleFallbackAutoScroll):_3(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;this.options.dragOverBubble||i.rootEl||this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?_6(document,"dragover",this._handleAutoScroll):(_6(document,"pointermove",this._handleFallbackAutoScroll),_6(document,"touchmove",this._handleFallbackAutoScroll),_6(document,"mousemove",this._handleFallbackAutoScroll)),wN(),wk(),clearTimeout(yH),yH=void 0},nulling:function(){wR=wF=wL=wP=wO=wM=wT=null,wD.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var n=this,r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(r,s);if(wR=t,i||this.options.forceAutoScrollFallback||_J||_Z||_1){wU(t,this.options,o,i);var a=yu(o,!0);wP&&(!wO||r!==wM||s!==wT)&&(wO&&wN(),wO=setInterval(function(){var o=yu(document.elementFromPoint(r,s),!0);o!==a&&(a=o,wk()),wU(t,n.options,o,i)},10),wM=r,wT=s)}else{if(!this.options.bubbleScroll||yu(o,!0)===ys())return void wk();wU(t,this.options,yu(o,!1),!1)}}},_q(t,{pluginName:"scroll",initializeByDefault:!0})}),wC.mount(wG,wH);var an=I("f1q41");const wV=Object.freeze([{text:"Tile",value:"Tile"},{text:"Vector",value:"Vector"}]),wz=Object.freeze({Tile:oK,Vector:dw}),wK="1.3.0";function wj(t,i){return Object.assign({REQUEST:i,SERVICE:"WMS",VERSION:wK,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}var wW=class extends at{constructor(t){let i=Object.assign({},(t=t||{}).params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=tq(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,i,n,r){let s=io(n),o=this.getProjection()||s,a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));let l=i_(t,s,o),A=oS(o,s,t,i),h=a.getZForResolution(A,this.zDirection),c=a.getResolution(h),u=a.getTileCoordForCoordAndZ(l,h);if(a.getResolutions().length<=u[0])return;let d=a.getTileCoordExtent(u,this.tmpExtent_),g=this.gutter_;0!==g&&(d=tV(d,c*g,d));let f={QUERY_LAYERS:this.params_.LAYERS};Object.assign(f,wj(this.params_,"GetFeatureInfo"),r);let p=Math.floor((l[0]-d[0])/c),m=Math.floor((d[3]-l[1])/c);return f[this.v13_?"I":"X"]=p,f[this.v13_?"J":"Y"]=m,this.getRequestUrl_(u,d,1,o||s,f)}getLegendUrl(t,i){if(void 0===this.urls[0])return;let n={SERVICE:"WMS",VERSION:wK,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===i||void 0===i.LAYER){let t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;n.LAYER=t}return void 0!==t&&(n.SCALE=t*(this.getProjection()?this.getProjection().getMetersPerUnit():1)/28e-5),Object.assign(n,i),oX(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,i,n,r,s){let o,a=this.urls;if(a){if(1==a.length)o=a[0];else{let i=tR(oT(t),a.length);o=a[i]}return function(t,i,n,r,s,o,a){o=Object.assign({REQUEST:"GetMap"},o);let l=i/n,A=[tD(es(t)/l,4),tD(ee(t)/l,4)];if(1!=n)switch(a){case"geoserver":let h=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+h:o.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":o.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":o.DPI=90*n;break;default:throw Error("Unknown `serverType` configured")}var c=s,u=t,d=A,g=r,f=o;f.WIDTH=d[0],f.HEIGHT=d[1];let p=g.getAxisOrientation(),m=eu(f.VERSION,"1.3")>=0;return f[m?"CRS":"SRS"]=g.getCode(),f.BBOX=(m&&p.startsWith("ne")?[u[1],u[0],u[3],u[2]]:u).join(","),oX(c,f)}(i,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),n,r,o,s,this.serverType_)}}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0,i=[];for(let n in this.params_)i[t++]=n+"-"+this.params_[n];return i.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){let t=this.params_.VERSION||wK;this.v13_=eu(t,"1.3")>=0}tileUrlFunction(t,i,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=t[0])return;1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);let s=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.tmpExtent_),a=this.gutter_;0!==a&&(o=tV(o,s*a,o));let l=Object.assign({},wj(this.params_,"GetMap"));return this.getRequestUrl_(t,o,i,n,l)}};const w$=Object.freeze([{text:"TileWMS",value:"TileWMS"},{text:"XYZ",value:"XYZ"},{text:"OSM",value:"OSM"},{text:"Vector",value:"Vector"}]),wY=Object.freeze({TileWMS:wW,XYZ:ae,OSM:ai,Vector:dI}),wq="oltb-layer-modal",wX="modalExtensions.layerModal",wZ=Object.freeze({name:"",onCreate:void 0,onCancel:void 0});class wJ extends gJ{#tZ=[];constructor(t={}){super({filename:"layer-modal.js",title:c1.get(`${wX}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(wZ),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=c1.get(`${wX}.form`),[i,n]=g2({idPrefix:wq,idPostfix:"-name",text:t.name,value:this.options.name??"New map layer"}),[r,s]=g4({idPrefix:wq,idPostfix:"-type",text:t.layer,options:E(an).cloneDeep(wV)}),[o,a]=g4({idPrefix:wq,idPostfix:"-source",text:t.source,options:E(an).cloneDeep(w$)}),l=[];mO.getProjections().forEach(t=>{l.push({text:`${t.name} (${t.code})`,value:t.code})});let[A,h]=g4({idPrefix:wq,idPostfix:"-projection",text:t.projection,options:l,value:A3.getConfig().projection.default}),[c,u]=g2({idPrefix:wq,idPostfix:"-url",text:t.url}),[d,g]=g2({idPrefix:wq,idPostfix:"-parameters",text:t.parameters,placeholder:'{"Layers": "HPD_TRP"}'}),[f,p]=g4({idPrefix:wq,idPostfix:"-wrapx",text:t.wrapX,options:[{text:"False",value:"False"},{text:"True",value:"True"}]}),[m,_]=g4({idPrefix:wq,idPostfix:"-cors",text:t.cors,options:[{text:"Anonymous",value:"anonymous"},{text:"Credentials",value:"use-credentials"},{text:"None",value:"undefined"}]}),[y,w]=g2({idPrefix:wq,idPostfix:"-attributions",text:t.attributions}),v=A6.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),b=A3.getConfig().projection.default,C=A6.createElement({element:"button",text:t.createLayer,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#t0({name:n.value.trim(),layer:s.value.trim(),source:a.value.trim(),projection:h.value.trim()||b,url:u.value.trim(),parameters:g.value.trim()||"{}",wrapX:p.value.trim(),crossOrigin:_.value.trim(),attributions:w.value.trim(),isDynamicallyAdded:!0})}}}),x=A6.createElement({element:"button",text:t.cancel,class:`oltb-dialog__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(v,[x,C]);let B=A6.createElement({element:"div",class:"oltb-modal__content"});A6.appendChildren(B,[i,r,o,A,c,d,f,m,y,v]),this.#tZ=[x,C],this.show(B)}#t0(t){this.close(),this.options.onCreate&&this.options.onCreate(t)}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#tZ}}const w0=function(t,i){A0.logDebug("download-file.js","downloadFile",t);let n=A6.createElement({element:"a",attributes:{download:t}}),r=null!==t.split(".").pop().match(/jpg|jpeg|png|gif|svg/i)?i:`data:text/plain;charset=utf-8,${encodeURIComponent(i)}`;n.setAttribute("href",r),n.click()};var an=I("f1q41");const w1="oltb-checkbox-wrapper",w2=Object.freeze({idPrefix:"",idPostfix:"",i18nKey:void 0,text:"",checked:!1,bottomMargin:!1,listeners:[]}),w5=function(t={}){t=E(an).merge(E(an).cloneDeep(w2),t);let i=A6.createElement({element:"div",class:`${w1} ${t.bottomMargin?`${w1}--margin`:""}`});t.i18nKey&&(t.text=c1.get(t.i18nKey));let n=A6.createElement({element:"label",text:t.text,class:`${w1}__title oltb-label--inline oltb-m-0`,attributes:{for:`${t.idPrefix}${t.idPostfix}`,...t.i18nKey&&{"data-oltb-i18n":t.i18nKey}}}),r=A6.createElement({element:"input",id:`${t.idPrefix}${t.idPostfix}`,class:`${w1}__checkbox`,attributes:{type:"checkbox"}});for(let i in t.checked&&r.setAttribute("checked",""),t.listeners){let n=t.listeners[i];Array.isArray(n)?n.forEach(t=>{r.addEventListener(i,t)}):r.addEventListener(i,n)}return A6.appendChildren(i,[r,n]),[i,r]},w4="http://www.w3.org/2001/XMLSchema-instance";function w3(t,i){return vc().createElementNS(t,i)}function w6(t,i){return(function t(i,n,r){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)n?r.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(i.nodeValue);else{let s;for(s=i.firstChild;s;s=s.nextSibling)t(s,n,r)}return r})(t,i,[]).join("")}function w8(t){return"documentElement"in t}function w7(t){return new DOMParser().parseFromString(t,"application/xml")}function w9(t,i){return function(n,r){let s=t.call(i??this,n,r);void 0!==s&&k(r[r.length-1],s)}}function vt(t,i){return function(n,r){let s=t.call(i??this,n,r);void 0!==s&&r[r.length-1].push(s)}}function ve(t,i){return function(n,r){let s=t.call(i??this,n,r);void 0!==s&&(r[r.length-1]=s)}}function vi(t,i,n){return function(r,s){let o=t.call(n??this,r,s);void 0!==o&&(s[s.length-1][void 0!==i?i:r.localName]=o)}}function vn(t,i){return function(n,r,s){t.call(i??this,n,r,s),s[s.length-1].node.appendChild(n)}}function vr(t,i){return function(n,r,s){let o=r[r.length-1].node,a=t;return void 0===a&&(a=s),w3(void 0!==i?i:o.namespaceURI,a)}}const vs=vr();function vo(t,i){let n=i.length,r=Array(n);for(let s=0;s<n;++s)r[s]=t[i[s]];return r}function va(t,i,n){let r,s;for(r=0,n=void 0!==n?n:{},s=t.length;r<s;++r)n[t[r]]=i;return n}function vl(t,i,n,r){let s;for(s=i.firstElementChild;s;s=s.nextElementSibling){let i=t[s.namespaceURI];if(void 0!==i){let t=i[s.localName];void 0!==t&&t.call(r,s,n)}}}function vA(t,i,n,r,s){return r.push(t),vl(i,n,r,s),r.pop()}function vh(t,i,n,r,s,o,a){let l,A;s.push(t);let h=(void 0!==o?o:r).length;for(let t=0;t<h;++t)void 0!==(l=r[t])&&void 0!==(A=n.call(a,l,s,void 0!==o?o[t]:void 0))&&i[A.namespaceURI][A.localName].call(a,A,l,s);return s.pop()}function vc(){return void 0===b&&"undefined"!=typeof document&&(b=document.implementation.createDocument("","",null)),b}var vu=class extends ge{constructor(){super(),this.xmlSerializer_=(void 0===v&&"undefined"!=typeof XMLSerializer&&(v=new XMLSerializer),v)}getType(){return"xml"}readFeature(t,i){if(!t)return null;if("string"==typeof t){let n=w7(t);return this.readFeatureFromDocument(n,i)}return w8(t)?this.readFeatureFromDocument(t,i):this.readFeatureFromNode(t,i)}readFeatureFromDocument(t,i){let n=this.readFeaturesFromDocument(t,i);return n.length>0?n[0]:null}readFeatureFromNode(t,i){return null}readFeatures(t,i){if(!t)return[];if("string"==typeof t){let n=w7(t);return this.readFeaturesFromDocument(n,i)}return w8(t)?this.readFeaturesFromDocument(t,i):this.readFeaturesFromNode(t,i)}readFeaturesFromDocument(t,i){let n=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&k(n,this.readFeaturesFromNode(r,i));return n}readFeaturesFromNode(t,i){return J()}readGeometry(t,i){if(!t)return null;if("string"==typeof t){let n=w7(t);return this.readGeometryFromDocument(n,i)}return w8(t)?this.readGeometryFromDocument(t,i):this.readGeometryFromNode(t,i)}readGeometryFromDocument(t,i){return null}readGeometryFromNode(t,i){return null}readProjection(t){if(!t)return null;if("string"==typeof t){let i=w7(t);return this.readProjectionFromDocument(i)}return w8(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,i){let n=this.writeFeatureNode(t,i);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(t,i){return null}writeFeatures(t,i){let n=this.writeFeaturesNode(t,i);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(t,i){return null}writeGeometry(t,i){let n=this.writeGeometryNode(t,i);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(t,i){return null}};function vd(t){var i=w6(t,!1);let n=/^\s*(true|1)|(false|0)\s*$/.exec(i);return n?void 0!==n[1]:void 0}function vg(t){var i=w6(t,!1);let n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);return n?parseFloat(n[1]):void 0}function vf(t){return w6(t,!1).trim()}function vp(t,i){vv(t,i?"1":"0")}function vm(t,i){let n=i.toPrecision();t.appendChild(vc().createTextNode(n))}const v_=/^\s/,vy=/\s$/,vw=/(\n|\t|\r|<|&| {2})/;function vv(t,i){"string"==typeof i&&(v_.test(i)||vy.test(i)||vw.test(i))?i.split("]]>").forEach((i,n,r)=>{var s;n<r.length-1&&(i+="]]"),n>0&&(i=">"+i),s=i,t.appendChild(vc().createCDATASection(s))}):t.appendChild(vc().createTextNode(i))}const vb=["http://www.google.com/kml/ext/2.2"],vC=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],vx={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},vE=va(vC,{ExtendedData:bl,Region:bA,MultiGeometry:vi(v9,"geometry"),LineString:vi(v6,"geometry"),LinearRing:vi(v8,"geometry"),Point:vi(bt,"geometry"),Polygon:vi(bi,"geometry"),Style:vi(br),StyleMap:function(t,i){let n=vj.call(this,t,i);if(!n)return;let r=i[i.length-1];if(Array.isArray(n))r.Style=n;else if("string"==typeof n)r.styleUrl=n;else throw Error("`styleMapValue` has an unknown type")},address:vi(vf),description:vi(vf),name:vi(vf),open:vi(vd),phoneNumber:vi(vf),styleUrl:vi(vV),visibility:vi(vd)},va(vb,{MultiTrack:vi(function(t,i){let n=vA([],vJ,t,i);if(n)return new uz(n)},"geometry"),Track:vi(v1,"geometry")})),vB=va(vC,{ExtendedData:bl,Region:bA,Link:function(t,i){vl(vS,t,i)},address:vi(vf),description:vi(vf),name:vi(vf),open:vi(vd),phoneNumber:vi(vf),visibility:vi(vd)}),vS=va(vC,{href:vi(vG)}),vI=va(vC,{Altitude:vi(vg),Longitude:vi(vg),Latitude:vi(vg),Tilt:vi(vg),AltitudeMode:vi(vf),Heading:vi(vg),Roll:vi(vg)}),vL=va(vC,{LatLonAltBox:function(t,i){let n=vA({},bu,t,i);if(!n)return;let r=i[i.length-1];r.extent=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)],r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)},Lod:function(t,i){let n=vA({},bd,t,i);if(!n)return;let r=i[i.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}}),vF=va(vC,["Document","Placemark"]),vM=va(vC,{Document:vn(function(t,i,n){vh({node:t},b_,by,i,n,void 0,this)}),Placemark:vn(bV)});let vT=null,vR=null,vO=null,vD=null,vP=null,vk=null;function vN(t){return 32/Math.min(t[0],t[1])}function vU(t){return t}function vQ(t){let i=w6(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(i);if(n){let t=n[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function vH(t){let i,n=w6(t,!1),r=[];n=n.replace(/\s*,\s*/g,",");let s=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;for(;i=s.exec(n);){let t=parseFloat(i[1]),s=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;r.push(t,s,o),n=n.substr(i[0].length)}if(""===n)return r}function vG(t){let i=w6(t,!1).trim(),n=t.baseURI;return(n&&"about:blank"!=n||(n=window.location.href),n)?new URL(i,n).href:i}function vV(t){let i=w6(t,!1).trim().replace(/^(?!.*#)/,"#"),n=t.baseURI;return(n&&"about:blank"!=n||(n=window.location.href),n)?new URL(i,n).href:i}function vz(t){return vg(t)}const vK=va(vC,{Pair:function(t,i){let n=vA({},bh,t,i,this);if(!n)return;let r=n.key;if(r&&"normal"==r){let t=n.styleUrl;t&&(i[i.length-1]=t);let r=n.Style;r&&(i[i.length-1]=r)}}});function vj(t,i){return vA(void 0,vK,t,i,this)}const vW=va(vC,{Icon:vi(function(t,i){let n=vA({},v2,t,i);return n||null}),color:vi(vQ),heading:vi(vg),hotSpot:vi(function(t){let i,n=t.getAttribute("xunits"),r=t.getAttribute("yunits");return i="insetPixels"!==n?"insetPixels"!==r?"bottom-left":"top-left":"insetPixels"!==r?"bottom-right":"top-right",{x:parseFloat(t.getAttribute("x")),xunits:vx[n],y:parseFloat(t.getAttribute("y")),yunits:vx[r],origin:i}}),scale:vi(vz)}),v$=va(vC,{color:vi(vQ),scale:vi(vz)}),vY=va(vC,{color:vi(vQ),width:vi(vg)}),vq=va(vC,{color:vi(vQ),fill:vi(vd),outline:vi(vd)}),vX=va(vC,{coordinates:ve(vH)});function vZ(t,i){return vA(null,vX,t,i)}const vJ=va(vb,{Track:vt(v1)}),v0=va(vC,{when:function(t,i){let n=i[i.length-1].whens,r=Date.parse(w6(t,!1));n.push(isNaN(r)?0:r)}},va(vb,{coord:function(t,i){let n=i[i.length-1].coordinates,r=w6(t,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(s){let t=parseFloat(s[1]),i=parseFloat(s[2]),r=parseFloat(s[3]);n.push([t,i,r])}else n.push([])}}));function v1(t,i){let n=vA({coordinates:[],whens:[]},v0,t,i);if(!n)return;let r=[],s=n.coordinates,o=n.whens;for(let t=0,i=Math.min(s.length,o.length);t<i;++t)3==s[t].length&&r.push(s[t][0],s[t][1],s[t][2],o[t]);return new uV(r,"XYZM")}const v2=va(vC,{href:vi(vG)},va(vb,{x:vi(vg),y:vi(vg),w:vi(vg),h:vi(vg)})),v5=va(vC,{coordinates:ve(vH)});function v4(t,i){return vA(null,v5,t,i)}const v3=va(vC,{extrude:vi(vd),tessellate:vi(vd),altitudeMode:vi(vf)});function v6(t,i){let n=vA({},v3,t,i),r=v4(t,i);if(r){let t=new uV(r,"XYZ");return t.setProperties(n,!0),t}}function v8(t,i){let n=vA({},v3,t,i),r=v4(t,i);if(r){let t=new nA(r,"XYZ",[r.length]);return t.setProperties(n,!0),t}}const v7=va(vC,{LineString:vt(v6),LinearRing:vt(v8),MultiGeometry:vt(v9),Point:vt(bt),Polygon:vt(bi)});function v9(t,i){let n,r,s=vA([],v7,t,i);if(!s)return null;if(0===s.length)return new uN(s);let o=!0,a=s[0].getType();for(let t=1,i=s.length;t<i;++t)if(s[t].getType()!=a){o=!1;break}if(o){let t,i;if("Point"==a){let r=s[0];t=r.getLayout(),i=r.getFlatCoordinates();for(let t=1,n=s.length;t<n;++t)k(i,s[t].getFlatCoordinates());bs(n=new ua(i,t),s)}else if("LineString"==a)bs(n=new uz(s),s);else if("Polygon"==a)bs(n=new uj(s),s);else if("GeometryCollection"==a||a.startsWith("Multi"))n=new uN(s);else throw Error("Unknown geometry type found")}else n=new uN(s);return n}function bt(t,i){let n=vA({},v3,t,i),r=v4(t,i);if(r){let t=new i4(r,"XYZ");return t.setProperties(n,!0),t}}const be=va(vC,{innerBoundaryIs:function(t,i){let n=vA([],bg,t,i);n.length>0&&i[i.length-1].push(...n)},outerBoundaryIs:function(t,i){let n=vA(void 0,bf,t,i);n&&(i[i.length-1][0]=n)}});function bi(t,i){let n=vA({},v3,t,i),r=vA([null],be,t,i);if(r&&r[0]){let t=r[0],i=[t.length];for(let n=1,s=r.length;n<s;++n)k(t,r[n]),i.push(t.length);let s=new nA(t,"XYZ",i);return s.setProperties(n,!0),s}}const bn=va(vC,{IconStyle:function(t,i){let n,r,s,o,d,g,f,p=vA({},vW,t,i);if(!p)return;let m=i[i.length-1],_="Icon"in p?p.Icon:{},y=!("Icon"in p)||Object.keys(_).length>0,w=_.href;w?n=w:y&&(n=c);let v="bottom-left",b=p.hotSpot;b?(r=[b.x,b.y],s=b.xunits,o=b.yunits,v=b.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(n.includes("pushpin")?(r=a,s=l,o=A):n.includes("arrow-reverse")?(r=[54,42],s=l,o=A):n.includes("paddle")&&(r=[32,1],s=l,o=A));let C=_.x,x=_.y;void 0!==C&&void 0!==x&&(d=[C,x]);let E=_.w,B=_.h;void 0!==E&&void 0!==B&&(g=[E,B]);let S=p.heading;void 0!==S&&(f=tT(S));let I=p.scale,L=p.color;if(y){n==c&&(g=h);let t=new sG({anchor:r,anchorOrigin:v,anchorXUnits:s,anchorYUnits:o,crossOrigin:this.crossOrigin_,offset:d,offsetOrigin:"bottom-left",rotation:f,scale:I,size:g,src:this.iconUrlFunction_(n),color:L}),i=t.getScaleArray()[0],a=t.getSize();if(null===a){let n=t.getImageState();if(n===sc.IDLE||n===sc.LOADING){let r=function(){let n=t.getImageState();if(n!==sc.IDLE&&n!==sc.LOADING){let n=t.getSize();if(n&&2==n.length){let r=vN(n);t.setScale(i*r)}t.unlistenImageChange(r)}};t.listenImageChange(r),n===sc.IDLE&&t.load()}}else if(2==a.length){let n=vN(a);t.setScale(i*n)}m.imageStyle=t}else m.imageStyle=u},LabelStyle:function(t,i){let n=vA({},v$,t,i);if(n)i[i.length-1].textStyle=new sY({fill:new sQ({color:"color"in n?n.color:o}),scale:n.scale})},LineStyle:function(t,i){let n=vA({},vY,t,i);if(n)i[i.length-1].strokeStyle=new sV({color:"color"in n?n.color:o,width:"width"in n?n.width:1})},PolyStyle:function(t,i){let n=vA({},vq,t,i);if(!n)return;let r=i[i.length-1];r.fillStyle=new sQ({color:"color"in n?n.color:o});let s=n.fill;void 0!==s&&(r.fill=s);let a=n.outline;void 0!==a&&(r.outline=a)}});function br(t,i){let n,r=vA({},bn,t,i,this);if(!r)return null;let s="fillStyle"in r?r.fillStyle:vT,o=r.fill;void 0===o||o||(s=null),"imageStyle"in r?r.imageStyle!=u&&(n=r.imageStyle):n=vR;let a="textStyle"in r?r.textStyle:vD,l="strokeStyle"in r?r.strokeStyle:vO,A=r.outline;return void 0===A||A?[new sz({fill:s,image:n,stroke:l,text:a,zIndex:void 0})]:[new sz({geometry:function(t){let i=t.getGeometry(),n=i.getType();return"GeometryCollection"===n?new uN(i.getGeometriesArrayRecursive().filter(function(t){let i=t.getType();return"Polygon"!==i&&"MultiPolygon"!==i})):"Polygon"!==n&&"MultiPolygon"!==n?i:void 0},fill:s,image:n,stroke:l,text:a,zIndex:void 0}),new sz({geometry:function(t){let i=t.getGeometry(),n=i.getType();return"GeometryCollection"===n?new uN(i.getGeometriesArrayRecursive().filter(function(t){let i=t.getType();return"Polygon"===i||"MultiPolygon"===i})):"Polygon"===n||"MultiPolygon"===n?i:void 0},fill:s,stroke:null,zIndex:void 0})]}function bs(t,i){let n,r,s,o=i.length,a=Array(i.length),l=Array(i.length),A=Array(i.length);n=!1,r=!1,s=!1;for(let t=0;t<o;++t){let o=i[t];a[t]=o.get("extrude"),l[t]=o.get("tessellate"),A[t]=o.get("altitudeMode"),n=n||void 0!==a[t],r=r||void 0!==l[t],s=s||A[t]}n&&t.set("extrude",a),r&&t.set("tessellate",l),s&&t.set("altitudeMode",A)}const bo=va(vC,{displayName:vi(vf),value:vi(vf)}),ba=va(vC,{Data:function(t,i){let n=t.getAttribute("name");vl(bo,t,i);let r=i[i.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==n?r[n]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,i){vl(bc,t,i)}});function bl(t,i){vl(ba,t,i)}function bA(t,i){vl(vL,t,i)}const bh=va(vC,{Style:vi(br),key:vi(vf),styleUrl:vi(vV)}),bc=va(vC,{SimpleData:function(t,i){let n=t.getAttribute("name");if(null!==n){let r=vf(t);i[i.length-1][n]=r}}}),bu=va(vC,{altitudeMode:vi(vf),minAltitude:vi(vg),maxAltitude:vi(vg),north:vi(vg),south:vi(vg),east:vi(vg),west:vi(vg)}),bd=va(vC,{minLodPixels:vi(vg),maxLodPixels:vi(vg),minFadeExtent:vi(vg),maxFadeExtent:vi(vg)}),bg=va(vC,{LinearRing:vt(vZ)}),bf=va(vC,{LinearRing:ve(vZ)});function bp(t,i){let n=rV(i),r=[255*(4==n.length?n[3]:1),n[2],n[1],n[0]];for(let t=0;t<4;++t){let i=Math.floor(r[t]).toString(16);r[t]=1==i.length?"0"+i:i}vv(t,r.join(""))}const bm=va(vC,{Data:vn(function(t,i,n){t.setAttribute("name",i.name);let r={node:t},s=i.value;"object"==typeof s?(null!==s&&s.displayName&&vh(r,bm,vs,[s.displayName],n,["displayName"]),null!==s&&s.value&&vh(r,bm,vs,[s.value],n,["value"])):vh(r,bm,vs,[s],n,["value"])}),value:vn(function(t,i){vv(t,i)}),displayName:vn(function(t,i){vv(t,i)})}),b_=va(vC,{Placemark:vn(bV)}),by=function(t,i,n){return w3(i[i.length-1].node.namespaceURI,"Placemark")},bw=vr("Data"),bv=va(vC,["href"],va(vb,["x","y","w","h"])),bb=va(vC,{href:vn(vv)},va(vb,{x:vn(vm),y:vn(vm),w:vn(vm),h:vn(vm)})),bC=function(t,i,n){return w3(vb[0],"gx:"+n)},bx=va(vC,["scale","heading","Icon","color","hotSpot"]),bE=va(vC,{Icon:vn(function(t,i,n){let r={node:t},s=bv[n[n.length-1].node.namespaceURI],o=vo(i,s);vh(r,bb,vs,o,n,s),vh(r,bb,bC,o=vo(i,s=bv[vb[0]]),n,s)}),color:vn(bp),heading:vn(vm),hotSpot:vn(function(t,i){t.setAttribute("x",String(i.x)),t.setAttribute("y",String(i.y)),t.setAttribute("xunits",i.xunits),t.setAttribute("yunits",i.yunits)}),scale:vn(bJ)}),bB=va(vC,["color","scale"]),bS=va(vC,{color:vn(bp),scale:vn(bJ)}),bI=va(vC,["color","width"]),bL=va(vC,{color:vn(bp),width:vn(vm)}),bF={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},bM=function(t,i,n){if(t)return w3(i[i.length-1].node.namespaceURI,bF[t.getType()])},bT=vr("Point"),bR=vr("LineString"),bO=vr("LinearRing"),bD=vr("Polygon"),bP=va(vC,{LineString:vn(bj),Point:vn(bj),Polygon:vn(bX),GeometryCollection:vn(bk)});function bk(t,i,n){let r,s=i.getType(),o=[];if("GeometryCollection"===s)i.getGeometriesArrayRecursive().forEach(function(t){let i=t.getType();if("MultiPoint"===i)o=o.concat(t.getPoints());else if("MultiLineString"===i)o=o.concat(t.getLineStrings());else if("MultiPolygon"===i)o=o.concat(t.getPolygons());else if("Point"===i||"LineString"===i||"Polygon"===i)o.push(t);else throw Error("Unknown geometry type")}),r=bM;else if("MultiPoint"===s)o=i.getPoints(),r=bT;else if("MultiLineString"===s)o=i.getLineStrings(),r=bR;else if("MultiPolygon"===s)o=i.getPolygons(),r=bD;else throw Error("Unknown geometry type");vh({node:t},bP,r,o,n)}const bN=va(vC,{LinearRing:vn(bj)});function bU(t,i,n){vh({node:t},bN,bO,[i],n)}const bQ=va(vC,{ExtendedData:vn(function(t,i,n){let r={node:t},s=i.names,o=i.values,a=s.length;for(let t=0;t<a;t++)vh(r,bm,bw,[{name:s[t],value:o[t]}],n)}),MultiGeometry:vn(bk),LineString:vn(bj),LinearRing:vn(bj),Point:vn(bj),Polygon:vn(bX),Style:vn(function(t,i,n){let r={};if(i.pointStyles.length){let t=i.pointStyles[0].getText();t&&(r.LabelStyle=t);let n=i.pointStyles[0].getImage();n&&"function"==typeof n.getSrc&&(r.IconStyle=n)}if(i.lineStyles.length){let t=i.lineStyles[0].getStroke();t&&(r.LineStyle=t)}if(i.polyStyles.length){let t=i.polyStyles[0].getStroke();t&&!r.LineStyle&&(r.LineStyle=t),r.PolyStyle=i.polyStyles[0]}let s=b0[n[n.length-1].node.namespaceURI];vh({node:t},b1,vs,vo(r,s),n,s)}),address:vn(vv),description:vn(vv),name:vn(vv),open:vn(vp),phoneNumber:vn(vv),styleUrl:vn(vv),visibility:vn(vp)}),bH=va(vC,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),bG=vr("ExtendedData");function bV(t,i,n){let r={node:t};i.getId()&&t.setAttribute("id",i.getId());let s=i.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[i.getGeometryName()]=1;let a=Object.keys(s||{}).sort().filter(function(t){return!o[t]}),l=i.getStyleFunction();if(l){let t=l(i,0);if(t){let n=Array.isArray(t)?t:[t],r=n;if(i.getGeometry()&&(r=n.filter(function(t){let n=t.getGeometryFunction()(i);if(n){let t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter(function(t){let i=t.getType();return"Point"===i||"MultiPoint"===i}).length:"Point"===t||"MultiPoint"===t}})),this.writeStyles_){let t=n,o=n;i.getGeometry()&&(t=n.filter(function(t){let n=t.getGeometryFunction()(i);if(n){let t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter(function(t){let i=t.getType();return"LineString"===i||"MultiLineString"===i}).length:"LineString"===t||"MultiLineString"===t}}),o=n.filter(function(t){let n=t.getGeometryFunction()(i);if(n){let t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter(function(t){let i=t.getType();return"Polygon"===i||"MultiPolygon"===i}).length:"Polygon"===t||"MultiPolygon"===t}})),s.Style={pointStyles:r,lineStyles:t,polyStyles:o}}if(r.length&&void 0===s.name){let t=r[0].getText();t&&(s.name=t.getText())}}}let A=bH[n[n.length-1].node.namespaceURI];if(vh(r,bQ,vs,vo(s,A),n,A),a.length>0){let t=vo(s,a);vh(r,bQ,bG,[{names:a,values:t}],n)}let h=n[0],c=i.getGeometry();c&&(c=gi(c,!0,h)),vh(r,bQ,bM,[c],n)}const bz=va(vC,["extrude","tessellate","altitudeMode","coordinates"]),bK=va(vC,{extrude:vn(vp),tessellate:vn(vp),altitudeMode:vn(vv),coordinates:vn(function(t,i,n){let r,s=n[n.length-1],o=s.layout,a=s.stride;if("XY"==o||"XYM"==o)r=2;else if("XYZ"==o||"XYZM"==o)r=3;else throw Error("Invalid geometry layout");let l=i.length,A="";if(l>0){A+=i[0];for(let t=1;t<r;++t)A+=","+i[t];for(let t=a;t<l;t+=a){A+=" "+i[t];for(let n=1;n<r;++n)A+=","+i[t+n]}}vv(t,A)})});function bj(t,i,n){let r=i.getFlatCoordinates(),s={node:t};s.layout=i.getLayout(),s.stride=i.getStride();let o=i.getProperties();o.coordinates=r;let a=bz[n[n.length-1].node.namespaceURI];vh(s,bK,vs,vo(o,a),n,a)}const bW=va(vC,["color","fill","outline"]),b$=va(vC,{outerBoundaryIs:vn(bU),innerBoundaryIs:vn(bU)}),bY=vr("innerBoundaryIs"),bq=vr("outerBoundaryIs");function bX(t,i,n){let r=i.getLinearRings(),s=r.shift(),o={node:t};vh(o,b$,bY,r,n),vh(o,b$,bq,[s],n)}const bZ=va(vC,{color:vn(bp),fill:vn(vp),outline:vn(vp)});function bJ(t,i){vm(t,Math.round(1e6*i)/1e6)}const b0=va(vC,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),b1=va(vC,{IconStyle:vn(function(t,i,n){let r={},s=i.getSrc(),o=i.getSize(),a=i.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];let t=i.getAnchor(),n=i.getOrigin();n&&a&&0!==n[0]&&n[1]!==o[1]&&(l.x=n[0],l.y=a[1]-(n[1]+o[1])),t&&(t[0]!==o[0]/2||t[1]!==o[1]/2)&&(r.hotSpot={x:t[0],xunits:"pixels",y:o[1]-t[1],yunits:"pixels"})}r.Icon=l;let A=i.getScaleArray()[0],c=o;null===c&&(c=h),2==c.length&&(A/=vN(c)),1!==A&&(r.scale=A);let u=i.getRotation();0!==u&&(r.heading=u);let d=i.getColor();d&&(r.color=d);let g=bx[n[n.length-1].node.namespaceURI];vh({node:t},bE,vs,vo(r,g),n,g)}),LabelStyle:vn(function(t,i,n){let r={},s=i.getFill();s&&(r.color=s.getColor());let o=i.getScale();o&&1!==o&&(r.scale=o);let a=bB[n[n.length-1].node.namespaceURI];vh({node:t},bS,vs,vo(r,a),n,a)}),LineStyle:vn(function(t,i,n){let r={color:i.getColor(),width:Number(i.getWidth())||1},s=bI[n[n.length-1].node.namespaceURI];vh({node:t},bL,vs,vo(r,s),n,s)}),PolyStyle:vn(function(t,i,n){let r=i.getFill(),s=i.getStroke(),o={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!s&&void 0},a=bW[n[n.length-1].node.namespaceURI];vh({node:t},bZ,vs,vo(o,a),n,a)})});var b2=class extends vu{constructor(t){super(),t=t||{},vk||(vT=new sQ({color:o=[255,255,255,1]}),c="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",vR=new sG({anchor:a=[20,2],anchorOrigin:"bottom-left",anchorXUnits:l="pixels",anchorYUnits:A="pixels",crossOrigin:"anonymous",rotation:0,scale:vN(h=[64,64]),size:h,src:c}),u="NO_IMAGE",vO=new sV({color:o,width:1}),d=new sV({color:[51,51,51,1],width:2}),vD=new sY({font:"bold 16px Helvetica",fill:vT,stroke:d,scale:.8}),vk=[new sz({fill:vT,image:vR,text:vD,stroke:vO,zIndex:0})]),this.dataProjection=io("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:vk,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:vU,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,i){let n=vA([],va(vC,{Document:w9(this.readDocumentOrFolder_,this),Folder:w9(this.readDocumentOrFolder_,this),Placemark:vt(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,i,this);if(n)return n}readPlacemark_(t,i){let n=vA({geometry:null},vE,t,i,this);if(!n)return;let r=new uE,s=t.getAttribute("id");null!==s&&r.setId(s);let o=i[0],a=n.geometry;if(a&&gi(a,!1,o),r.setGeometry(a),delete n.geometry,this.extractStyles_){var l,A,h,c,u;let t=(l=n.Style,A=n.styleUrl,h=this.defaultStyle_,c=this.sharedStyles_,u=this.showPointNames_,function(t,i){let n=u,r="",s=[];if(n){let i=t.getGeometry();if(i)if(i instanceof uN)n=(s=i.getGeometriesArrayRecursive().filter(function(t){let i=t.getType();return"Point"===i||"MultiPoint"===i})).length>0;else{let t=i.getType();n="Point"===t||"MultiPoint"===t}}n&&(r=t.get("name"),(n=n&&!!r)&&/&[^&]+;/.test(r)&&(g||(g=document.createElement("textarea")),g.innerHTML=r,r=g.value));let o=h;if(l?o=l:A&&(o=function t(i,n,r){return Array.isArray(i)?i:"string"==typeof i?t(r[i],n,r):n}(A,h,c)),n){let t=function(t,i){let n=[0,0],r="start",s=t.getImage();if(s){let t=s.getSize();if(t&&2==t.length){let i=s.getScaleArray(),o=s.getAnchor();n[0]=i[0]*(t[0]-o[0]),n[1]=i[1]*(t[1]/2-o[1]),r="left"}}let o=t.getText();return o?((o=o.clone()).setFont(o.getFont()||vD.getFont()),o.setScale(o.getScale()||vD.getScale()),o.setFill(o.getFill()||vD.getFill()),o.setStroke(o.getStroke()||d)):o=vD.clone(),o.setText(i),o.setOffsetX(n[0]),o.setOffsetY(n[1]),o.setTextAlign(r),new sz({image:s,text:o})}(o[0],r);return s.length>0?(t.setGeometry(new uN(s)),[t,new sz({geometry:o[0].getGeometry(),image:null,fill:o[0].getFill(),stroke:o[0].getStroke(),text:null})].concat(o.slice(1))):t}return o});r.setStyle(t)}return delete n.Style,r.setProperties(n,!0),r}readSharedStyle_(t,i){let n=t.getAttribute("id");if(null!==n){let r=br.call(this,t,i);if(r){let i,s=t.baseURI;s&&"about:blank"!=s||(s=window.location.href),i=s?new URL("#"+n,s).href:"#"+n,this.sharedStyles_[i]=r}}}readSharedStyleMap_(t,i){let n,r=t.getAttribute("id");if(null===r)return;let s=vj.call(this,t,i);if(!s)return;let o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[n]=s}readFeatureFromNode(t,i){if(!vC.includes(t.namespaceURI))return null;let n=this.readPlacemark_(t,[this.getReadOptions(t,i)]);return n||null}readFeaturesFromNode(t,i){let n;if(!vC.includes(t.namespaceURI))return[];let r=t.localName;if("Document"==r||"Folder"==r)return(n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,i)]))?n:[];if("Placemark"==r){let n=this.readPlacemark_(t,[this.getReadOptions(t,i)]);return n?[n]:[]}if("kml"==r){n=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling){let t=this.readFeaturesFromNode(r,i);t&&k(n,t)}return n}return[]}readName(t){if(t){if("string"==typeof t){let i=w7(t);return this.readNameFromDocument(i)}return w8(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let i=t.firstChild;i;i=i.nextSibling)if(i.nodeType==Node.ELEMENT_NODE){let t=this.readNameFromNode(i);if(t)return t}}readNameFromNode(t){for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(vC.includes(i.namespaceURI)&&"name"==i.localName)return vf(i);for(let i=t.firstElementChild;i;i=i.nextElementSibling){let t=i.localName;if(vC.includes(i.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){let t=this.readNameFromNode(i);if(t)return t}}}readNetworkLinks(t){let i=[];if("string"==typeof t){let n=w7(t);k(i,this.readNetworkLinksFromDocument(n))}else w8(t)?k(i,this.readNetworkLinksFromDocument(t)):k(i,this.readNetworkLinksFromNode(t));return i}readNetworkLinksFromDocument(t){let i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&k(i,this.readNetworkLinksFromNode(n));return i}readNetworkLinksFromNode(t){let i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(vC.includes(n.namespaceURI)&&"NetworkLink"==n.localName){let t=vA({},vB,n,[]);i.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){let t=n.localName;vC.includes(n.namespaceURI)&&("Document"==t||"Folder"==t||"kml"==t)&&k(i,this.readNetworkLinksFromNode(n))}return i}readRegion(t){let i=[];if("string"==typeof t){let n=w7(t);k(i,this.readRegionFromDocument(n))}else w8(t)?k(i,this.readRegionFromDocument(t)):k(i,this.readRegionFromNode(t));return i}readRegionFromDocument(t){let i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&k(i,this.readRegionFromNode(n));return i}readRegionFromNode(t){let i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(vC.includes(n.namespaceURI)&&"Region"==n.localName){let t=vA({},vL,n,[]);i.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){let t=n.localName;vC.includes(n.namespaceURI)&&("Document"==t||"Folder"==t||"kml"==t)&&k(i,this.readRegionFromNode(n))}return i}readCamera(t){let i=[];if("string"==typeof t){let n=w7(t);k(i,this.readCameraFromDocument(n))}else w8(t)?k(i,this.readCameraFromDocument(t)):k(i,this.readCameraFromNode(t));return i}readCameraFromDocument(t){let i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&k(i,this.readCameraFromNode(n));return i}readCameraFromNode(t){let i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(vC.includes(n.namespaceURI)&&"Camera"===n.localName){let t=vA({},vI,n,[]);i.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){let t=n.localName;vC.includes(n.namespaceURI)&&("Document"===t||"Folder"===t||"Placemark"===t||"kml"===t)&&k(i,this.readCameraFromNode(n))}return i}writeFeaturesNode(t,i){i=this.adaptOptions(i);let n=w3(vC[4],"kml"),r="http://www.w3.org/2000/xmlns/";n.setAttributeNS(r,"xmlns:gx",vb[0]),n.setAttributeNS(r,"xmlns:xsi",w4),n.setAttributeNS(w4,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");let s={};t.length>1?s.Document=t:1==t.length&&(s.Placemark=t[0]);let o=vF[n.namespaceURI];return vh({node:n},vM,vs,vo(s,o),[i],o,this),n}};const b5=Object.freeze([{text:"GeoJSON",value:"GeoJSON"},{text:"KML",value:"KML"}]),b4=Object.freeze({GeoJSON:gA,KML:b2}),b3=function(t,i){return t in b4?new b4[t](i):null};var an=I("f1q41");const b6="modalExtensions.downloadLayerModal",b8=Object.freeze({onDownload:void 0,onCancel:void 0});class b7 extends gJ{#tZ=[];constructor(t={}){super({filename:"download-layer-modal.js",title:c1.get(`${b6}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(b8),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=c1.get(`${b6}.form`),[i,n]=g4({idPrefix:"oltb-download-layer-modal",idPostfix:"-format",text:t.layerFormat,options:E(an).cloneDeep(b5)}),r=A6.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),s=A6.createElement({element:"button",text:t.download,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#e5({format:n.value.trim()})}}}),o=A6.createElement({element:"button",text:t.cancel,class:`oltb-dialog__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(r,[o,s]);let a=A6.createElement({element:"div",class:"oltb-modal__content"});A6.appendChildren(a,[i,r]),this.#tZ=[o,s],this.show(a)}#e5(t){this.close(),this.options.onDownload&&this.options.onDownload(t)}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#tZ}}const b9="layer-tool.js",Ct="oltb-tool-button",Ce="oltb-toolbox-section",Ci="oltb-toolbox-list",Cn="oltb-func-btn",Cr="oltb-layer",Cs="tools.layerTool",Co="commons",Ca=Object.freeze({disableMapCreateLayerButton:!1,disableMapLayerEditButton:!1,disableMapLayerDeleteButton:!1,disableFeatureCreateLayerButton:!1,disableFeatureLayerEditButton:!1,disableFeatureLayerDeleteButton:!1,disableFeatureLayerDownloadButton:!1,onClicked:void 0,onInitiated:void 0,onBrowserStateCleared:void 0,onMapLayerAdded:void 0,onMapLayerRemoved:void 0,onMapLayerRenamed:void 0,onMapLayerVisibilityChanged:void 0,onMapLayerDragged:void 0,onFeatureLayerAdded:void 0,onFeatureLayerRemoved:void 0,onFeatureLayerRenamed:void 0,onFeatureLayerVisibilityChanged:void 0,onFeatureLayerDownloaded:void 0,onFeatureLayerDragged:void 0}),Cl=he.layerTool,CA=Object.freeze({isActive:!1,mapLayers:[],featureLayers:[],"oltb-layer-map-toolbox-collapsed":!1,"oltb-layer-feature-toolbox-collapsed":!1});class Ch extends mk{constructor(t={}){super({filename:b9}),this.icon=up({path:ug.layers.stroked,class:`${Ct}__icon`});let i=c1.get(Cs),n=A6.createElement({element:"button",html:this.icon,class:Ct,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.layerTool})`,"data-tippy-content-post":`(${mQ.layerTool})`,"data-oltb-i18n":`${Cs}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.layerModal=void 0,this.options=E(an).merge(E(an).cloneDeep(Ca),t),this.localStorage=ht.getAndMergeStateObject(Cl,CA),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${Cr}-toolbox`),this.#eB(),this.uiRefMapLayerStack=this.uiRefToolboxSection.querySelector(`#${Cr}-map-stack`),this.uiRefAddMapLayerButton=this.uiRefToolboxSection.querySelector(`#${Cr}-map-stack-add-button`),this.uiRefAddMapLayerText=this.uiRefToolboxSection.querySelector(`#${Cr}-map-stack-add-text`),this.sortableMapLayerStack=this.#e4(this.uiRefMapLayerStack,{group:"sortableMapLayers",callback:this.options.onMapLayerDragged,setZIndex:dY.setMapLayerZIndex.bind(dY),getLayerItemById:dY.getMapLayerById.bind(dY),getLocalStorageItemById:this.getLocalStorageMapLayerById.bind(this),stack:this.localStorage.mapLayers}),this.uiRefFeatureLayerStack=this.uiRefToolboxSection.querySelector(`#${Cr}-feature-stack`),this.uiRefAddFeatureLayerButton=this.uiRefToolboxSection.querySelector(`#${Cr}-feature-stack-add-button`),this.uiRefAddFeatureLayerText=this.uiRefToolboxSection.querySelector(`#${Cr}-feature-stack-add-text`),this.sortableFeatureLayerStack=this.#e4(this.uiRefFeatureLayerStack,{group:"sortableFeatureLayers",callback:this.options.onFeatureLayerDragged,setZIndex:dY.setFeatureLayerZIndex.bind(dY),getLayerItemById:dY.getFeatureLayerById.bind(dY),getLocalStorageItemById:this.getLocalStorageFeatureLayerById.bind(this),stack:this.localStorage.featureLayers}),this.uiRefAddMapLayerButton&&this.uiRefAddMapLayerButton.addEventListener(A8.browser.click,this.#e3.bind(this)),this.uiRefAddFeatureLayerButton&&this.uiRefAddFeatureLayerButton.addEventListener(A8.browser.click,this.#e6.bind(this)),this.uiRefAddFeatureLayerText&&this.uiRefAddFeatureLayerText.addEventListener(A8.browser.keyUp,this.#e8.bind(this)),this.#eC(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowMapLayerAddedBind=this.#e7.bind(this),this.onWindowMapLayerRemovedBind=this.#e9.bind(this),this.onWindowFeatureLayerAddedBind=this.#it.bind(this),this.onWindowFeatureLayerRemovedBind=this.#e0.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.addEventListener(A8.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.addEventListener(A8.custom.featureLayerAdded,this.onWindowFeatureLayerAddedBind),window.addEventListener(A8.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.removeEventListener(A8.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.removeEventListener(A8.custom.featureLayerAdded,this.onWindowFeatureLayerAddedBind),window.removeEventListener(A8.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${Cs}.toolbox`),i=c1.get(`${Co}.titles`),n=`
            <div id="${Cr}-toolbox" class="${Ce}">
                <div class="${Ce}__header oltb-toggleable" data-oltb-toggleable-target="${Cr}-map-toolbox-collapsed">
                    <h4 class="${Ce}__title" data-oltb-i18n="${Cs}.toolbox.titles.mapLayers">${t.titles.mapLayers}</h4>
                    <span class="${Ce}__icon oltb-tippy" data-oltb-i18n="${Co}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${Ce}__groups" id="${Cr}-map-toolbox-collapsed" style="display: ${this.localStorage[`${Cr}-map-toolbox-collapsed`]?"none":"block"}">
                    ${this.options.disableMapCreateLayerButton?"":`
                            <div class="${Ce}__group">
                                <div class="oltb-input-button-group">
                                    <input type="text" id="${Cr}-map-stack-add-text" class="oltb-input" data-oltb-i18n="${Cs}.toolbox.groups.createMapLayer.placeholder" placeholder="${t.groups.createMapLayer.placeholder}">
                                    <button type="button" id="${Cr}-map-stack-add-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" data-oltb-i18n="${Cs}.toolbox.groups.createMapLayer.create" title="${t.groups.createMapLayer.create}">
                                        ${up({path:ug.plus.stroked,width:20,height:20,fill:"none",stroke:"#FFFFFFFF",strokeWidth:1,class:"oltb-btn__icon"})}
                                    </button>
                                </div>
                            </div>
                        `}
                    <div class="${Ce}__group ${this.options.disableMapCreateLayerButton?`${Ce}__group--topmost`:""}">
                        <ul id="${Cr}-map-stack" class="${Ci}"></ul>
                    </div>
                </div>
                <div class="${Ce}__header oltb-toggleable" data-oltb-toggleable-target="${Cr}-feature-toolbox-collapsed">
                    <h4 class="${Ce}__title" data-oltb-i18n="${Cs}.toolbox.titles.featureLayers">${t.titles.featureLayers}</h4>
                    <span class="${Ce}__icon oltb-tippy" data-oltb-i18n="${Co}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${Ce}__groups" id="${Cr}-feature-toolbox-collapsed" style="display: ${this.localStorage[`${Cr}-feature-toolbox-collapsed`]?"none":"block"}">
                    <div class="${Ce}__group">
                        ${this.options.disableFeatureCreateLayerButton?"":`
                                <div class="oltb-input-button-group">
                                    <input type="text" id="${Cr}-feature-stack-add-text" class="oltb-input" data-oltb-i18n="${Cs}.toolbox.groups.createFeatureLayer.placeholder" placeholder="${t.groups.createFeatureLayer.placeholder}">
                                    <button type="button" id="${Cr}-feature-stack-add-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" data-oltb-i18n="${Cs}.toolbox.groups.createFeatureLayer.create" title="${t.groups.createFeatureLayer.create}">
                                        ${up({path:ug.plus.stroked,width:20,height:20,fill:"none",stroke:"#FFFFFFFF",strokeWidth:1,class:"oltb-btn__icon"})}
                                    </button>
                                </div>
                            `}
                    </div>
                    <div class="${Ce}__group ${this.options.disableFeatureCreateLayerButton?`${Ce}__group--topmost`:""}">
                        <ul id="${Cr}-feature-stack" class="${Ci} ${Ci}--selectable"></ul>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#eC(){this.options.disableMapCreateLayerButton&&this.options.disableFeatureCreateLayerButton||mz.addItem({}),this.options.disableMapCreateLayerButton||mz.addItem({icon:this.icon,i18nKey:`${Cs}.contextItems.addMapLayer`,fn:this.#ie.bind(this)}),this.options.disableFeatureCreateLayerButton||mz.addItem({icon:this.icon,i18nKey:`${Cs}.contextItems.addFeatureLayer`,fn:this.#ii.bind(this)})}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${Ce}--show`),this.button.classList.add(`${Ct}--active`),this.localStorage.isActive=!0,ht.setStateObject(Cl,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${Ce}--show`),this.button.classList.remove(`${Ct}--active`),this.localStorage.isActive=!1,ht.setStateObject(Cl,this.localStorage)}#k(t){this.localStorage.isActive&&this.activateTool(),this.removeUnusedLayers()}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#tq(t){mK(t,mQ.layerTool)&&this.onClickTool(t)}#e7(t){this.doMapLayerAdded(t)}#e9(t){this.doMapLayerRemoved(t)}#it(t){this.doFeatureLayerAdded(t)}#e0(t){this.doFeatureLayerRemoved(t)}removeUnusedLayers(){let t=[];this.localStorage.mapLayers.forEach(i=>{dY.hasMapLayerWithId(i.id)||t.push(i)}),t.forEach(t=>{this.localStorage.mapLayers=this.localStorage.mapLayers.filter(i=>t.id!==i.id)});let i=[];this.localStorage.featureLayers.forEach(t=>{dY.hasFeatureLayerWithId(t.id)||i.push(t)}),i.forEach(t=>{this.localStorage.featureLayers=this.localStorage.featureLayers.filter(i=>t.id!==i.id)}),ht.setStateObject(Cl,this.localStorage),A0.logDebug(b9,"removeUnusedLayers",{info:"Removing unused layers",mapLayers:t,featureLayers:i})}getLocalStorageFeatureLayerById(t){return this.localStorage.featureLayers.find(i=>i.id===t)}hasLocalStorageFeatureLayerById(t){return!!this.getLocalStorageFeatureLayerById(t)}getLocalStorageMapLayerById(t){return this.localStorage.mapLayers.find(i=>i.id===t)}hasLocalStorageMapLayerById(t){return!!this.getLocalStorageMapLayerById(t)}#ie(){this.doShowAddMapLayerModal()}#ii(){this.doAddFeatureLayer({name:"",isDynamicallyAdded:!0}),this.isActive||c9.success({i18nKey:`${Cs}.toasts.infos.addFeatureLayer`,autoremove:!0})}#e4(t,i){let n=A3.getConfig().animationDuration.warp;return wC.create(t,{group:i.group,dataIdAttr:"data-oltb-sort-index",animation:n,forceFallback:!0,handle:`.${Ci}__handle`,chosenClass:`${Ci}__item--chosen`,dragClass:`${Ci}__item--drag`,ghostClass:`${Ci}__item--ghost`,onEnd:t=>this.#ir(t,i)})}#ir(t,i){let n=[],r={id:t.item.getAttribute("data-oltb-id"),oldIndex:t.newDraggableIndex,newIndex:t.oldDraggableIndex},s=t.to;s.childNodes.forEach((t,r)=>{let o=s.childNodes.length-r-1;t.setAttribute("data-oltb-sort-index",o);let a=t.getAttribute("data-oltb-id"),l=i.getLocalStorageItemById(a);l&&(l.sortIndex=o);let A=i.getLayerItemById(a);A&&(A.sortIndex=o),i.setZIndex(a,o),n.push({id:a,index:o})}),ht.setStateObject(Cl,this.localStorage),A0.logDebug(b9,"onEndSortable",{currentItem:r,list:n}),i.callback&&i.callback(r,n)}#is(t,i=!1){let n=t.toArray().sort().reverse();t.sort(n,i)}isValidEnter(t){return t.type===A8.browser.keyUp&&t.key===gj.valueEnter}hasLayerFeatures(t){return t.getSource().getFeatures instanceof Function&&t.getSource().getFeatures().length>0}hasProjection(t){let i=mO.hasProjection(t);return i||(A0.logError(b9,"hasProjection",{message:"Missing projection definition",projection:t}),c9.error({i18nKey:`${Cs}.toasts.errors.missingProjection`})),i}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#e8(t){this.isValidEnter(t)&&this.#e6(t)}#e6(t){let i=this.uiRefAddFeatureLayerText.value;this.uiRefAddFeatureLayerText.value="",this.doAddFeatureLayer({name:i,isDynamicallyAdded:!0})}#io(t){if(this.hasProjection(t.projection))try{this.doAddMapLayer(t)}catch(t){A0.logError(b9,"onCreateMapLayer",{message:"Failed to create new layer",error:t}),c9.error({i18nKey:`${Cs}.toasts.errors.addFeatureLayer`})}}#ia(t,i,n,r){if("visible"!==r.key)return;i.classList.toggle(`${Ci}__item--hidden`);let s=!i.classList.contains(`${Ci}__item--hidden`),o=this.getLocalStorageMapLayerById(t);n.checked=s,o&&(o.isVisible=s,ht.setStateObject(Cl,this.localStorage))}#il(t,i,n,r){if("visible"!==r.key)return;i.classList.toggle(`${Ci}__item--hidden`);let s=!i.classList.contains(`${Ci}__item--hidden`),o=this.getLocalStorageFeatureLayerById(t);n.checked=s,o&&(o.isVisible=s,ht.setStateObject(Cl,this.localStorage))}#iA(t,i){this.askToDeleteLayer(t,i)}#ih(t,i,n){this.doChangeLayerVisibility(t,i)}#ic(t,i,n){this.askToRenameLayer(t,i,n)}#iu(t,i){this.askToDownloadLayer(t,i)}#e3(){this.doShowAddMapLayerModal()}attachUIButtonCallbacks(t,i,n,r){for(let s in t){let o=t[s],a=o.function.call(this,i,o.callback,r);A6.appendChildren(n,[a])}}#id(t){return cP(t,{content(t){let i=t.getAttribute("title");return t.removeAttribute("title"),i},placement:"top",theme:"oltb oltb-themed",delay:A3.getConfig().tippy.delay})}#ig(t,i){let n=t.getLayer(),r=t.getId(),s={sortIndex:this.uiRefMapLayerStack.childNodes.length,isVisible:n.getVisible()},o=this.getLocalStorageMapLayerById(r);o?(s.sortIndex=o.sortIndex,s.isVisible=o.isVisible,t.sortIndex=s.sortIndex,n.setVisible(s.isVisible)):this.localStorage.mapLayers.push({id:r,sortIndex:s.sortIndex,isVisible:s.isVisible}),dY.setMapLayerZIndex(r,s.sortIndex);let a=A6.createElement({element:"li",id:`${Cr}-map-${r}`,class:`
                ${Ci}__item
                ${!s.isVisible?`${Ci}__item--hidden`:""}
            `,attributes:{"data-oltb-id":r,"data-oltb-sort-index":s.sortIndex}}),l=A6.createElement({element:"span",text:t.getName().ellipsis(20),class:`${Ci}__title`,title:t.getName(),prototypes:{getTippy:function(){return this._tippy}}});this.#id(l);let A=A6.createElement({element:"div",class:`${Ci}__wrapper`}),[h,c]=w5({checked:s.isVisible,listeners:{click:this.#ih.bind(this,t,this.options.onMapLayerVisibilityChanged,l)}});n.on(A8.openLayers.propertyChange,this.#ia.bind(this,r,a,c));let u=A6.createElement({element:"div",class:`${Ci}__dot`});A6.appendChildren(A,[u,h]),A6.appendChildren(A,[l]),A6.appendChildren(a,[A]);let d=A6.createElement({element:"div",class:`${Ci}__wrapper`});this.attachUIButtonCallbacks(i,t,d,l);let g=c1.get(`${Co}.titles`),f=A6.createElement({element:"div",class:`${Ci}__handle oltb-tippy`,title:g.dragToSort});A6.appendChildren(d,[f]),A6.appendChildren(a,[d]),this.uiRefMapLayerStack.append(a),this.#is(this.sortableMapLayerStack)}#ip(t,i){let n=t.getLayer(),r=t.getId(),s={sortIndex:this.uiRefFeatureLayerStack.childNodes.length,isVisible:n.getVisible()},o=this.getLocalStorageFeatureLayerById(r);o?(s.sortIndex=o.sortIndex,s.isVisible=o.isVisible,t.sortIndex=s.sortIndex,n.setVisible(s.isVisible)):this.localStorage.featureLayers.push({id:r,sortIndex:s.sortIndex,isVisible:s.isVisible}),dY.setFeatureLayerZIndex(r,s.sortIndex);let a=A6.createElement({element:"li",id:`${Cr}-feature-${r}`,class:`
                ${Ci}__item 
                ${Ci}__item--active
                ${!s.isVisible?`${Ci}__item--hidden`:""}
            `,attributes:{"data-oltb-id":r,"data-oltb-sort-index":s.sortIndex}}),l=A6.createElement({element:"span",text:t.getName().ellipsis(20),class:`${Ci}__title`,title:t.getName(),prototypes:{getTippy:function(){return this._tippy}},listeners:{click:this.doSetFeatureLayerAsActive.bind(this,t,a)}});this.#id(l);let A=A6.createElement({element:"div",class:`${Ci}__wrapper`}),[h,c]=w5({checked:s.isVisible,listeners:{click:this.#ih.bind(this,t,this.options.onFeatureLayerVisibilityChanged,l)}});n.on(A8.openLayers.propertyChange,this.#il.bind(this,r,a,c));let u=A6.createElement({element:"div",class:`${Ci}__dot`,listeners:{click:this.doSetFeatureLayerAsActive.bind(this,t,a)}});A6.appendChildren(A,[u,h]),A6.appendChildren(A,[l]),A6.appendChildren(a,[A]);let d=A6.createElement({element:"div",class:`${Ci}__wrapper`});this.attachUIButtonCallbacks(i,t,d,l);let g=c1.get(`${Co}.titles`),f=A6.createElement({element:"div",class:`${Ci}__handle oltb-tippy`,title:g.dragToSort,attributes:{"data-oltb-i18n":`${Co}.titles.dragToSort`}});A6.appendChildren(d,[f]),A6.appendChildren(a,[d]),this.uiRefFeatureLayerStack.append(a),this.#is(this.sortableFeatureLayerStack)}#im(t,i){let n=`${Co}.titles.delete`;return A6.createElement({element:"button",class:`${Cn} ${Cn}--delete oltb-tippy`,title:c1.get(n),attributes:{type:"button","data-oltb-i18n":n},listeners:{click:this.#iA.bind(this,t,i)}})}#i_(t,i){let n=`${Co}.titles.download`;return A6.createElement({element:"button",class:`${Cn} ${Cn}--download oltb-tippy`,title:c1.get(n),attributes:{type:"button","data-oltb-i18n":n},listeners:{click:this.#iu.bind(this,t,i)}})}#iy(t,i,n){let r=`${Co}.titles.rename`;return A6.createElement({element:"button",class:`${Cn} ${Cn}--edit oltb-tippy`,title:c1.get(r),attributes:{type:"button","data-oltb-i18n":r},listeners:{click:this.#ic.bind(this,t,i,n)}})}askToDownloadLayer(t,i){return new b7({onDownload:n=>{let r=b3(n.format);if(!r){A0.logError(b9,"onLayerDownload",{title:"Error",message:`The layer format is not supported (${r})`}),c9.error({i18nKey:`${Cs}.toasts.errors.unsupportedFormat`});return}A0.logDebug(b9,"onLayerDownload",{layerName:t.getName(),formatName:n.format,format:r}),this.doDownloadLayer(t,r,n,i)}})}askToRenameLayer(t,i,n){let r=c1.get(`${Cs}.dialogs.prompts.renameLayer`);return fO.prompt({title:r.title,message:`${r.message} <strong>${t.getName()}</strong>`,value:t.getName(),confirmText:r.confirmText,cancelText:r.cancelText,onConfirm:r=>{null!==r&&r.length&&(t.setName(r),n.innerText=r.ellipsis(20),n.getTippy().setContent(r),i&&i(t))}})}askToDeleteLayer(t,i){let n=c1.get(`${Cs}.dialogs.confirms.deleteLayer`);return fO.confirm({title:n.title,message:`${n.message} <strong>${t.getName()}</strong>?`,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:()=>{i(t)}})}doClearState(){this.localStorage=E(an).cloneDeep(CA),ht.setStateObject(Cl,CA)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,i=>{this.localStorage[t]=i,ht.setStateObject(Cl,this.localStorage)})}doMapLayerAdded(t){let i=t.detail.isSilent,n=t.detail.layerWrapper,r=t.detail.disableMapLayerEditButton||this.options.disableMapLayerEditButton||!1,s=t.detail.disableMapLayerDeleteButton||this.options.disableMapLayerDeleteButton||!1;this.#ig(n,{...!r&&{editButton:{function:this.#iy.bind(this),callback:this.options.onMapLayerRenamed.bind(this)}},...!s&&{deleteButton:{function:this.#im.bind(this),callback:dY.removeMapLayer.bind(dY)}}}),!i&&this.options.onMapLayerAdded&&this.options.onMapLayerAdded(n)}doRemoveUILayerItem(t,i){let n=t.querySelector(i);n&&A6.removeElement(n)}doMapLayerRemoved(t){f0.hideOverlay();let i=t.detail.isSilent,n=t.detail.layerWrapper,r=n.getId();this.doRemoveUILayerItem(this.uiRefMapLayerStack,`#${Cr}-map-${r}`),!i&&this.options.onMapLayerRemoved&&this.options.onMapLayerRemoved(n)}doFeatureLayerAdded(t){let i=t.detail.isSilent,n=t.detail.layerWrapper,r=t.detail.disableFeatureLayerEditButton||this.options.disableFeatureLayerEditButton||!1,s=t.detail.disableFeatureLayerDownloadButton||this.options.disableFeatureLayerDownloadButton||!1,o=t.detail.disableFeatureLayerDeleteButton||this.options.disableFeatureLayerDeleteButton||!1;this.doRemoveActiveFeatureLayerClass(),this.#ip(n,{...!r&&{editButton:{function:this.#iy.bind(this),callback:this.options.onFeatureLayerRenamed}},...!s&&{downloadButton:{function:this.#i_.bind(this),callback:this.options.onFeatureLayerDownloaded}},...!o&&{deleteButton:{function:this.#im.bind(this),callback:dY.removeFeatureLayer.bind(dY)}}}),!i&&this.options.onFeatureLayerAdded&&this.options.onFeatureLayerAdded(n)}doSetActiveLayerAsSelected(t){let i=dY.getActiveFeatureLayer();i&&t.querySelectorAll("li").forEach(t=>{i.getId()===t.getAttribute("data-oltb-id")&&t.classList.add(`${Ci}__item--active`)})}doFeatureLayerRemoved(t){f0.hideOverlay();let i=t.detail.isSilent,n=t.detail.layerWrapper,r=n.getId();this.doRemoveUILayerItem(this.uiRefFeatureLayerStack,`#${Cr}-feature-${r}`),this.doRemoveActiveFeatureLayerClass(),this.doSetActiveLayerAsSelected(this.uiRefFeatureLayerStack),!i&&this.options.onFeatureLayerRemoved&&this.options.onFeatureLayerRemoved(n)}doSetFeatureLayerAsActive(t,i){this.doRemoveActiveFeatureLayerClass(),dY.setActiveFeatureLayer(t),i.classList.add(`${Ci}__item--active`)}doRemoveActiveFeatureLayerClass(){this.uiRefFeatureLayerStack.querySelectorAll("li").forEach(t=>{t.classList.remove(`${Ci}__item--active`)})}doToggleLayerVisibility(t){let i=t.getLayer(),n=!i.getVisible();return i.setVisible(n),n}doSetLayerFeaturesVisibility(t,i,n=!1){let r=t.getLayer();this.hasLayerFeatures(r)&&r.getSource().getFeatures().forEach(t=>{dK.hasTooltip(t)&&dK.getTooltip(t).setMap(n?i:null)})}doChangeLayerVisibility(t,i){let n=this.getMap();if(!n)return;f0.hideOverlay();let r=this.doToggleLayerVisibility(t);this.doSetLayerFeaturesVisibility(t,n,r),i&&i(t)}doDownloadLayer(t,i,n,r){let s=t.getLayer().getSource().getFeatures(),o=i.writeFeatures(s,{featureProjection:A3.getConfig().projection.default}),a=`${t.getName()}.${n.format.toLowerCase()}`;w0(a,o),r&&r(t,a,o)}doAddMapLayer(t){var i,n,r,s;let o=(r=t.layer,s={projection:t.projection||A3.getConfig().projection.default,source:(i=t.source,n={url:t.url,params:JSON.parse(t.parameters),wrapX:t.wrapX,attributions:t.attributions,..."undefined"!==t.crossOrigin&&{crossOrigin:t.crossOrigin},format:b3(t.source)},i in wY?new wY[i](n):null)},r in wz?new wz[r](s):null);return dY.addMapLayer({name:t.name,sortIndex:0,isDynamicallyAdded:t.isDynamicallyAdded,layer:o})}doAddFeatureLayer(t){return dY.addFeatureLayer({name:t.name,sortIndex:0,isDynamicallyAdded:t.isDynamicallyAdded})}doShowAddMapLayerModal(){if(this.layerModal)return;let t=this.uiRefAddMapLayerText.value;this.layerModal=new wJ({name:t,onCreate:t=>{this.#io(t)},onClose:()=>{this.layerModal=void 0}})}}var an=I("f1q41");const Cc="oltb-tool-button",Cu="tools.zoomInTool",Cd=Object.freeze({delta:1,onInitiated:void 0,onClicked:void 0,onZoomed:void 0});class Cg extends mk{constructor(t={}){super({filename:"zoom-in-tool.js"});let i=up({path:ug.zoomIn.stroked,class:`${Cc}__icon`}),n=c1.get(Cu),r=A6.createElement({element:"button",html:i,class:Cc,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.zoomInTool})`,"data-tippy-content-post":`(${mQ.zoomInTool})`,"data-oltb-i18n":`${Cu}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.options=E(an).merge(E(an).cloneDeep(Cd),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){let t=this.getMap();t&&this.doZoomIn(t)}#tq(t){mK(t,mQ.zoomInTool)&&this.onClickTool(t)}doZoomIn(t){let i=t.getView(),n=iu(i.getCenter()),r=i.getZoom();mU({map:t,coordinates:n,zoom:i.getConstrainedZoom(r+this.options.delta),onDone:t=>{this.options.onZoomed&&this.options.onZoomed(t)}})}}var an=I("f1q41");const Cf="oltb-tool-button",Cp="oltb-toolbox-section",Cm="oltb-measure",C_="tools.measureTool",Cy="tools.measureTool",Cw="commons",Cv=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onAbort:void 0,onError:void 0,onSnapped:void 0,onUnSnapped:void 0}),Cb=he.measureTool,CC=Object.freeze({isActive:!1,isCollapsed:!1,toolType:dG.LineString,strokeColor:"#3B4352FF",fillColor:"#D7E3FA80"});class Cx extends mk{constructor(t={}){super({filename:"measure-tool.js"});let i=up({path:ug.rulers.mixed,class:`${Cf}__icon`}),n=c1.get(Cy),r=A6.createElement({element:"button",html:i,class:Cf,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.measureTool})`,"data-tippy-content-post":`(${mQ.measureTool})`,"data-oltb-i18n":`${Cy}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(Cv),t),this.localStorage=ht.getAndMergeStateObject(Cb,CC),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${Cm}-toolbox`),this.#eB(),this.uiRefToolType=this.uiRefToolboxSection.querySelector(`#${Cm}-type`),this.uiRefToolType.addEventListener(A8.browser.change,this.updateTool.bind(this)),this.uiRefFillColor=this.uiRefToolboxSection.querySelector(`#${Cm}-fill-color`),this.uiRefFillColor.addEventListener(A8.custom.colorChange,this.updateTool.bind(this)),this.uiRefStrokeColor=this.uiRefToolboxSection.querySelector(`#${Cm}-stroke-color`),this.uiRefStrokeColor.addEventListener(A8.custom.colorChange,this.updateTool.bind(this)),this.#eS(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${Cy}.toolbox`),i=c1.get(`${Cw}.titles`),n=`
            <div id="${Cm}-toolbox" class="${Cp}">
                <div class="${Cp}__header oltb-toggleable" data-oltb-toggleable-target="${Cm}-toolbox-collapsed">
                    <h4 class="${Cp}__title" data-oltb-i18n="${Cy}.toolbox.titles.measure">${t.titles.measure}</h4>
                    <span class="${Cp}__icon oltb-tippy" data-oltb-i18n="${Cw}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${Cp}__groups" id="${Cm}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${Cp}__group">
                        <label class="oltb-label" for="${Cm}-type" data-oltb-i18n="${Cy}.toolbox.groups.type.title">${t.groups.type.title}</label>
                        <select id="${Cm}-type" class="oltb-select">
                            <option value="LineString" data-oltb-i18n="${Cy}.toolbox.groups.type.lineString">${t.groups.type.lineString}</option>
                            <option value="Polygon" data-oltb-i18n="${Cy}.toolbox.groups.type.polygon">${t.groups.type.polygon}</option>
                        </select>
                    </div>
                    <div class="${Cp}__group ${Cp}__group--split-group">
                        <div class="${Cp}__group-part">
                            <label class="oltb-label" for="${Cm}-stroke-color" data-oltb-i18n="${Cy}.toolbox.groups.strokeColor.title">${t.groups.strokeColor.title}</label>
                            <div id="${Cm}-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${Cm}-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">
                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>
                            </div>
                        </div>
                        <div class="${Cp}__group-part">
                            <label class="oltb-label" for="${Cm}-fill-color" data-oltb-i18n="${Cy}.toolbox.groups.fillColor.title">${t.groups.fillColor.title}</label>
                            <div id="${Cm}-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${Cm}-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">
                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#eS(){this.uiRefToolType.value=this.localStorage.toolType}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${Cp}--show`),this.button.classList.add(`${Cf}--active`),gC.setActiveTool(this),this.shouldAlwaysCreateNewLayer()&&dY.addFeatureLayer({name:c1.get(`${Cy}.layers.defaultName`)}),cz.dispatchEvent([this.uiRefToolType],A8.browser.change),this.localStorage.isActive=!0,ht.setStateObject(Cb,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.getMap()&&(this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${Cp}--show`),this.button.classList.remove(`${Cf}--active`),this.doRemoveDrawInteraction(),gC.removeActiveTool(),gU.removeSnap(),this.localStorage.isActive=!1,ht.setStateObject(Cb,this.localStorage))}deselectTool(){this.deactivateTool()}updateTool(){this.localStorage.toolType=this.uiRefToolType.value,this.localStorage.fillColor=this.uiRefFillColor.getAttribute("data-oltb-color"),this.localStorage.strokeColor=this.uiRefStrokeColor.getAttribute("data-oltb-color"),ht.setStateObject(Cb,this.localStorage),this.doUpdateTool(this.uiRefToolType.value,this.uiRefFillColor.getAttribute("data-oltb-color"),this.uiRefStrokeColor.getAttribute("data-oltb-color"))}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){let i=t.key;i===gj.valueEscape?this.interactionDraw&&this.interactionDraw.abortDrawing():t.ctrlKey&&i===gj.valueZ?this.interactionDraw&&this.interactionDraw.removeLastPoint():mK(t,mQ.measureTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.doClearColors(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#eL(t){this.doDrawStart(t)}#eF(t){this.doDrawEnd(t)}#eM(t){this.doDrawAbort(t)}#eT(t){this.doDrawError(t)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}shouldAlwaysCreateNewLayer(){return gP.getSetting(gf.alwaysNewLayers)}#eR(t){return new dQ({type:t,stopClick:!0,style:this.styles})}#eO(t,i){return new sz({image:new sU({fill:new sQ({color:t}),stroke:new sV({color:i,width:2}),radius:5}),fill:new sQ({color:t}),stroke:new sV({color:i,lineDash:[2,5],width:2.5})})}doClearState(){this.localStorage=E(an).cloneDeep(CC),ht.setStateObject(Cb,CC)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(Cb,this.localStorage)})}doDrawStart(t){let i=t.feature,n=gV.push(C_);i&&(this.onChangeListener=i.getGeometry().on(A8.openLayers.change,t=>{let i=uR(t.target);n.innerHTML=`${i.value} ${i.unit}`})),this.options.onStart&&this.options.onStart(t)}doDrawEnd(t){X(this.onChangeListener);let i=t.feature;if(i){gV.pop(C_),dK.applyMeasurementProperties(i),i.setStyle(this.styles);let t=dY.getActiveFeatureLayer({fallback:c1.get(`${Cy}.layers.defaultName`)});dY.addFeatureToLayer(i,t,`${Cy}.toasts.infos.drawInHiddenLayer`)}this.options.onEnd&&this.options.onEnd(t)}doDrawAbort(t){X(this.onChangeListener),gV.pop(C_),this.options.onAbort&&this.options.onAbort(t)}doDrawError(t){this.options.onError&&this.options.onError(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doClearColors(){this.uiRefFillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.uiRefFillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.uiRefStrokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.uiRefStrokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}doUpdateTool(t,i,n){this.getMap()&&(this.interactionDraw&&(this.doRemoveDrawInteraction(),gU.removeSnap()),this.styles=this.#eO(i,n),this.interactionDraw=this.#eR(t),this.interactionDraw.on(A8.openLayers.drawStart,this.#eL.bind(this)),this.interactionDraw.on(A8.openLayers.drawEnd,this.#eF.bind(this)),this.interactionDraw.on(A8.openLayers.drawAbort,this.#eM.bind(this)),this.interactionDraw.on(A8.openLayers.error,this.#eT.bind(this)),this.doAddDrawInteraction(),gU.addSnap(this))}doAddDrawInteraction(){this.getMap().addInteraction(this.interactionDraw)}doRemoveDrawInteraction(){this.getMap().removeInteraction(this.interactionDraw)}}var an=I("f1q41");const CE="magnify-tool.js",CB="oltb-tool-button",CS="tools.magnifyTool",CI=Object.freeze({radius:75,min:25,max:150,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),CL=he.magnifyTool,CF=Object.freeze({isActive:!1});class CM extends mk{constructor(t={}){super({filename:CE});let i=up({path:ug.search.stroked,class:`${CB}__icon`}),n=c1.get(CS),r=A6.createElement({element:"button",html:i,class:CB,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.magnifyTool})`,"data-tippy-content-post":`(${mQ.magnifyTool})`,"data-oltb-i18n":`${CS}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.options=E(an).merge(E(an).cloneDeep(CI),t),this.localStorage=ht.getAndMergeStateObject(CL,CF),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.attachMapListeners(),this.isActive=!0,this.button.classList.add(`${CB}--active`),this.localStorage.isActive=!0,ht.setStateObject(CL,this.localStorage)}deactivateTool(){this.detachMapListeners(),this.isActive=!1,this.button.classList.remove(`${CB}--active`),this.localStorage.isActive=!1,ht.setStateObject(CL,this.localStorage)}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.magnifyTool)&&this.onClickTool(t)}#iw(t){t.preventDefault();let i=t.key,n=this.getMap();n&&(this.doChangeMagnifyerSize(i),n.render())}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#iv(t){let i=this.getMap();i&&(this.mousePosition=i.getEventPixel(t),i.render())}#ib(t){let i=this.getMap();i&&(this.mousePosition=void 0,i.render())}#iC(t){this.mousePosition&&this.doPostRender(t)}attachMapListeners(){let t=this.getMap();if(!t)return;let i=t.getTarget();this.onMousemoveListenert=this.#iv.bind(this),this.onMouseoutListenert=this.#ib.bind(this),this.onKeydownListener=this.#iw.bind(this),i.addEventListener(A8.browser.mouseMove,this.onMousemoveListenert),i.addEventListener(A8.browser.mouseOut,this.onMouseoutListenert),window.document.addEventListener(A8.browser.keyDown,this.onKeydownListener),this.onPostrenderListeners=[],t.getLayers().getArray().forEach(t=>{this.onPostrenderListeners.push(t.on(A8.openLayers.postRender,this.#iC.bind(this)))})}detachMapListeners(){let t=this.getMap();if(!t)return;let i=t.getTarget();i.removeEventListener(A8.browser.mouseMove,this.onMousemoveListenert),i.removeEventListener(A8.browser.mouseOut,this.onMouseoutListenert),window.document.removeEventListener(A8.browser.keyDown,this.onKeydownListener),this.onPostrenderListeners.forEach(t=>{X(t)}),t.render()}doChangeMagnifyerSize(t){t===gj.valueAdd?this.options.radius=Math.min(this.options.radius+5,this.options.max):t===gj.valueSubtract&&(this.options.radius=Math.max(this.options.radius-5,this.options.min))}doClearState(){this.localStorage=E(an).cloneDeep(CF),ht.setStateObject(CL,CF)}doPostRender(t){let i=this.mousePosition,n=this.options.radius,r=fU(t,i),s=fU(t,[i[0]+n,i[1]]),o=Math.sqrt(Math.pow(s[0]-r[0],2)+Math.pow(s[1]-r[1],2)),a=t.context,l=r[0],A=r[1],h=l-o,c=A-o,u=Math.round(2*o+1);try{let t=a.getImageData(h,c,u,u).data,i=a.createImageData(u,u),r=i.data;for(let i=0;i<u;++i)for(let n=0;n<u;++n){let s=n-o,a=i-o,l=Math.sqrt(s*s+a*a),A=n,h=i;l<o&&(A=Math.round(o+s/2),h=Math.round(o+a/2));let c=(i*u+n)*4,d=(h*u+A)*4;r[c]=t[d],r[c+1]=t[d+1],r[c+2]=t[d+2],r[c+3]=t[d+3]}a.beginPath(),a.arc(l,A,o,0,2*Math.PI),a.lineWidth=3*o/n,a.strokeStyle="#3b4352FF",a.putImageData(i,h,c),a.stroke(),a.restore()}catch(t){this.deactivateTool(),A0.logError(CE,"onPostrender",{message:"Unexpected error using magnifyer",error:t}),c9.error({i18nKey:`${CS}.toasts.errors.renderCanvas`})}}}var an=I("f1q41");const CT="oltb-tool-button",CR="tools.zoomOutTool",CO=Object.freeze({delta:-1,onInitiated:void 0,onClicked:void 0,onZoomed:void 0});class CD extends mk{constructor(t={}){super({filename:"zoom-out-tool.js"});let i=up({path:ug.zoomOut.stroked,class:`${CT}__icon`}),n=c1.get(CR),r=A6.createElement({element:"button",html:i,class:CT,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.zoomOutTool})`,"data-tippy-content-post":`(${mQ.zoomOutTool})`,"data-oltb-i18n":`${CR}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.options=E(an).merge(E(an).cloneDeep(CO),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){let t=this.getMap();t&&this.doZoomOut(t)}#tq(t){mK(t,mQ.zoomOutTool)&&this.onClickTool(t)}doZoomOut(t){let i=t.getView(),n=iu(i.getCenter()),r=i.getZoom();mU({map:t,coordinates:n,zoom:i.getConstrainedZoom(r+this.options.delta),onDone:t=>{this.options.onZoomed&&this.options.onZoomed(t)}})}}var an=I("f1q41");const CP="oltb-tool-button",Ck="tools.refreshTool",CN=Object.freeze({onInitiated:void 0,onClicked:void 0});class CU extends mk{constructor(t={}){super({filename:"refresh-tool.js"});let i=up({path:ug.arrowClockwise.stroked,class:`${CP}__icon`}),n=c1.get(Ck),r=A6.createElement({element:"button",html:i,class:CP,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.refreshPageTool})`,"data-tippy-content-post":`(${mQ.refreshPageTool})`,"data-oltb-i18n":`${Ck}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.options=E(an).merge(E(an).cloneDeep(CN),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doWindowReload()}#tq(t){mK(t,mQ.refreshPageTool)&&this.onClickTool(t)}doWindowReload(){window.location.reload()}}var an=I("f1q41");const CQ="oltb-tool-button",CH="tools.zoomboxTool",CG="tools.zoomboxTool",CV="out_",Cz=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onDrag:void 0,onCancel:void 0,onError:void 0}),CK=he.zoomboxTool,Cj=Object.freeze({isActive:!1});class CW extends mk{constructor(t={}){super({filename:"zoombox-tool.js"});let i=up({path:ug.boundingBoxCircles.stroked,class:`${CQ}__icon`}),n=c1.get(CG),r=A6.createElement({element:"button",html:i,class:CQ,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.zoomboxTool})`,"data-tippy-content-post":`(${mQ.zoomboxTool})`,"data-oltb-i18n":`${CG}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.isSpaceKeyPressed=!1,this.tooltip=void 0,this.options=E(an).merge(E(an).cloneDeep(Cz),t),this.localStorage=ht.getAndMergeStateObject(CK,Cj),this.interactionDragZoom=this.#ix(),this.interactionDragZoom.on(A8.openLayers.boxStart,this.#iE.bind(this)),this.interactionDragZoom.on(A8.openLayers.boxEnd,this.#iB.bind(this)),this.interactionDragZoom.on(A8.openLayers.boxDrag,this.#iS.bind(this)),this.interactionDragZoom.on(A8.openLayers.boxCancel,this.#iI.bind(this)),this.interactionDragZoom.on(A8.openLayers.error,this.#iL.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onWindowKeyDownBind=this.#iF.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.browser.keyDown,this.onWindowKeyDownBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.browser.keyDown,this.onWindowKeyDownBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.getMap()&&(gC.setActiveTool(this),this.doAddDragZoom(),this.doAddTooltip(),this.isActive=!0,this.button.classList.add(`${CQ}--active`),this.localStorage.isActive=!0,ht.setStateObject(CK,this.localStorage))}deactivateTool(){this.getMap()&&(gC.removeActiveTool(),this.doRemoveDragZoom(),this.doRemoveTooltip(),this.isActive=!1,this.button.classList.remove(`${CQ}--active`),this.localStorage.isActive=!1,ht.setStateObject(CK,this.localStorage))}deselectTool(){this.deactivateTool()}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){this.isSpaceKeyPressed=!1,this.interactionDragZoom[CV]=!1,mK(t,mQ.zoomboxTool)&&this.onClickTool(t)}#iF(t){t.key===gj.valueSpace&&(this.isSpaceKeyPressed=!0),t.ctrlKey&&(this.interactionDragZoom[CV]=!0)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#iE(t){this.doBoxDragStart(t)}#iB(t){this.doBoxDragEnd(t)}#iS(t){this.doBoxDragDrag(t)}#iI(t){this.doBoxDragCancel(t)}#iL(t){this.doBoxDragError(t)}#ix(){return new rn({duration:A3.getConfig().animationDuration.normal,condition:t=>nY&&!this.isSpaceKeyPressed,out:!1})}doClearState(){this.localStorage=E(an).cloneDeep(Cj),ht.setStateObject(CK,Cj)}doBoxDragStart(t){this.options.onStart&&this.options.onStart(t)}doBoxDragEnd(t){this.options.onEnd&&this.options.onEnd(t)}doBoxDragDrag(t){this.options.onDrag&&this.options.onDrag(t)}doBoxDragCancel(t){this.options.onCancel&&this.options.onCancel(t)}doBoxDragError(t){this.options.onError&&this.options.onError(t)}doAddDragZoom(){this.getMap().addInteraction(this.interactionDragZoom)}doRemoveDragZoom(){this.getMap().removeInteraction(this.interactionDragZoom)}doAddTooltip(){let t=c1.get(`${CG}.tooltips`);this.tooltip=gV.push(CH),this.tooltip.innerHTML=t.dragToZoom}doRemoveTooltip(){gV.pop(CH),this.tooltip=void 0}}var an=I("f1q41");const C$="oltb-tool-button",CY="oltb-toolbox-container--hidden",Cq="tools.toolboxTool",CX=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onChanged:void 0}),CZ=he.toolboxTool,CJ=Object.freeze({isActive:!1});class C0 extends mk{constructor(t={}){super({filename:"toolbox-tool.js"});let i=up({path:ug.layoutSsidebarInsetReverse.mixed,class:`${C$}__icon`}),n=c1.get(Cq),r=A6.createElement({element:"button",html:i,class:C$,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.toolboxTool})`,"data-tippy-content-post":`(${mQ.toolboxTool})`,"data-oltb-i18n":`${Cq}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(CX),t),this.localStorage=ht.getAndMergeStateObject(CZ,CJ),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.doHideToolbox(),this.isActive=!0,this.button.classList.add(`${C$}--active`),this.localStorage.isActive=!0,ht.setStateObject(CZ,this.localStorage)}deactivateTool(){this.doShowToolbox(),this.isActive=!1,this.button.classList.remove(`${C$}--active`),this.localStorage.isActive=!1,ht.setStateObject(CZ,this.localStorage)}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.toolboxTool)&&this.onClickTool(t)}#b(){this.doShowToolbox(),this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=E(an).cloneDeep(CJ),ht.setStateObject(CZ,CJ)}doShowToolbox(){hr.getToolboxElement().classList.remove(CY),this.options.onChanged&&this.options.onChanged("visible")}doHideToolbox(){hr.getToolboxElement().classList.add(CY),this.options.onChanged&&this.options.onChanged("hidden")}}var an=I("f1q41");const C1="oltb-tool-button",C2="tools.scissorsTool",C5=Object.freeze({strokeWidth:"2.5",strokeColor:"#0166A5FF",fillColor:"#D7E3FA80",onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onAbort:void 0,onError:void 0,onSnapped:void 0,onUnSnapped:void 0}),C4=he.scissorsTool,C3=Object.freeze({isActive:!1});class C6 extends mk{constructor(t={}){super({filename:"scissors-tool.js"});let i=up({path:ug.scissors.filled,class:`${C1}__icon`}),n=c1.get(C2),r=A6.createElement({element:"button",html:i,class:C1,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.scissorsTool})`,"data-tippy-content-post":`(${mQ.scissorsTool})`,"data-oltb-i18n":`${C2}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.intersectedFeatures=[],this.options=E(an).merge(E(an).cloneDeep(C5),t),this.localStorage=ht.getAndMergeStateObject(C4,C3),this.parser=new m9.io.OL3Parser,this.parser.inject(i4,uV,i5,nA,ua,uz,uj,uN),this.interactionDraw=this.#eR(),this.interactionDraw.on(A8.openLayers.drawStart,this.#eL.bind(this)),this.interactionDraw.on(A8.openLayers.drawEnd,this.#eF.bind(this)),this.interactionDraw.on(A8.openLayers.drawAbort,this.#eM.bind(this)),this.interactionDraw.on(A8.openLayers.error,this.#eT.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.getMap()&&(this.doAddDrawInteraction(),gC.setActiveTool(this),gU.addSnap(this),this.isActive=!0,this.button.classList.add(`${C1}--active`),this.localStorage.isActive=!0,ht.setStateObject(C4,this.localStorage))}deactivateTool(){this.getMap()&&(this.doRemoveDrawInteraction(),gC.removeActiveTool(),gU.removeSnap(),this.isActive=!1,this.button.classList.remove(`${C1}--active`),this.localStorage.isActive=!1,ht.setStateObject(C4,this.localStorage))}deselectTool(){this.deactivateTool()}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){let i=t.key;i===gj.valueEscape?this.interactionDraw&&this.interactionDraw.abortDrawing():t.ctrlKey&&i===gj.valueZ?this.interactionDraw&&this.interactionDraw.removeLastPoint():mK(t,mQ.scissorsTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#eL(t){this.doDrawStart(t)}#eF(t){this.doDrawEnd(t)}#eM(t){this.doDrawAbort(t)}#eT(t){this.doDrawError(t)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}#eR(){let t=this.#eO();return new dQ({type:dG.LineString,stopClick:!0,style:t})}#eO(){return new sz({image:new sU({fill:new sQ({color:this.options.fillColor}),stroke:new sV({color:this.options.strokeColor,width:this.options.strokeWidth}),radius:5}),fill:new sQ({color:this.options.fillColor}),stroke:new sV({color:this.options.strokeColor,width:this.options.strokeWidth})})}#iM(){return new m9.operation.polygonize.Polygonizer}doClearState(){this.localStorage=E(an).cloneDeep(C3),ht.setStateObject(C4,C3)}doDrawStart(t){this.options.onStart&&this.options.onStart(t)}doDrawEnd(t){let i=t.feature,n=i.getGeometry();dY.getFeatureLayers().forEach(t=>{let i=t.getLayer();i.getVisible()&&i.getSource().forEachFeatureIntersectingExtent(n.getExtent(),t=>{mJ(dK.getType(t),t.getGeometry())&&this.intersectedFeatures.push(t)})}),this.intersectedFeatures.forEach(t=>{t.getGeometry().getType()===dG.Polygon&&this.doSplitPolygon(t,i)}),0===this.intersectedFeatures.length&&c9.info({i18nKey:`${C2}.toasts.infos.missingIntersections`,autoremove:!0}),this.options.onEnd&&this.options.onEnd(t),this.intersectedFeatures=[]}doDrawAbort(t){this.options.onAbort&&this.options.onAbort(t)}doDrawError(t){this.options.onError&&this.options.onError(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doAddDrawInteraction(){this.getMap().addInteraction(this.interactionDraw)}doRemoveDrawInteraction(){this.getMap().removeInteraction(this.interactionDraw)}doSplitPolygon(t,i){let n=dK.getType(t)||ud.type.drawing,r=this.parser.read(t.getGeometry()),s=this.parser.read(i.getGeometry()),o=this.#iM(),a=r.getExteriorRing().union(s);o.add(a);let l=o.getPolygons();if(2!==l.array.length)return;let A=r.getNumInteriorRing();l.array.forEach(t=>{for(let i=0;i<A;i++){let n=r.getInteriorRingN(i),s=[];for(let t in n.getCoordinates())s.push([n.getCoordinates()[t].x,n.getCoordinates()[t].y]);n=this.parser.read(new nA([s])),t=t.difference(n)}let i=this.#eO(),s=new uE({geometry:new nA(this.parser.write(t).getCoordinates()),oltb:{type:n}});s.setStyle(i);let o=dY.getActiveFeatureLayer();dY.addFeatureToLayer(s,o)}),dY.removeFeatureFromFeatureLayers(t)}}var an=(I("f1q41"),I("f1q41"));const C8="modalExtensions.settingsModal",C7=Object.freeze({onSave:void 0,onCancel:void 0});class C9 extends gJ{#tZ=[];#iT=new Map;constructor(t={}){super({filename:"settings-modal.js",title:c1.get(`${C8}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(C7),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=c1.get(`${C8}.form`),i=window.document.createDocumentFragment();gP.getSettings().forEach((t,n)=>{let[r,s]=w5({idPrefix:n,i18nKey:`${t.i18nBase}.${t.i18nKey}`,checked:t.state,bottomMargin:!0,listeners:{click:()=>{this.#iT.set(n,s.checked)}}});this.#iT.set(n,t.state),A6.appendChildren(i,[r])});let n=A6.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),r=A6.createElement({element:"button",text:t.save,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:this.#iR.bind(this)}}),s=A6.createElement({element:"button",text:t.cancel,class:`oltb-dialog__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(n,[s,r]);let o=A6.createElement({element:"div",class:"oltb-modal__content"});A6.appendChildren(o,[i,n]),this.#tZ=[s,r],this.show(o)}#iR(){this.#iT.forEach((t,i)=>{gP.setSetting(i,t)}),this.#iT.clear(),this.close(),this.options.onSave&&this.options.onSave()}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#tZ}}const xt="oltb-tool-button",xe="tools.settingsTool",xi=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0});class xn extends mk{constructor(t={}){super({filename:"settings-tool.js"}),this.icon=up({path:ug.gear.stroked,class:`${xt}__icon`});let i=c1.get(xe),n=A6.createElement({element:"button",html:this.icon,class:xt,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.settingsTool})`,"data-tippy-content-post":`(${mQ.settingsTool})`,"data-oltb-i18n":`${xe}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[n]),this.button=n,this.settingsModal=void 0,this.options=E(an).merge(E(an).cloneDeep(xi),t),this.#eC(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#eC(){mz.addItem({}),mz.addItem({icon:this.icon,i18nKey:`${xe}.contextItems.clearBrowserState`,fn:this.#iO.bind(this)})}momentaryActivation(){this.doShowSettingsModal()}#tq(t){mK(t,mQ.settingsTool)&&this.onClickTool(t)}#iO(t,i,n){this.askToClearBrowserState()}askToClearBrowserState(){let t=c1.get(`${xe}.dialogs.confirms.clearBrowserState`);return fO.confirm({title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:()=>{this.doClearBrowserState()}})}doClearBrowserState(){this.doDispatchBrowserStateCleared(),c9.info({i18nKey:`${xe}.toasts.infos.clearBrowserState`,autoremove:!0})}doShowSettingsModal(){this.settingsModal||(this.settingsModal=new C9({onSave:()=>{c9.success({i18nKey:`${xe}.toasts.successes.savedSettings`,autoremove:!0})},onClose:()=>{this.settingsModal=void 0}}))}doDispatchBrowserStateCleared(){cz.dispatchCustomEvent([window],A8.custom.browserStateCleared),[gP,ht].forEach(t=>{t.clear()}),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}}var an=I("f1q41"),xr=class extends nO{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;let i=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",r=void 0!==t.collapseLabel?t.collapseLabel:"‹";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;let s=void 0!==t.label?t.label:"›";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;let o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=n,a.appendChild(o),a.addEventListener(T.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;let l=new of({view:t.view,controls:new to,interactions:new to});this.ovmap_=l,t.layers&&t.layers.forEach(function(t){l.addLayer(t)});let A=document.createElement("div");A.className="ol-overviewmap-box",A.style.boxSizing="border-box",this.boxOverlay_=new uI({position:[0,0],positioning:"center-center",element:A}),this.ovmap_.addOverlay(this.boxOverlay_);let h=i+" "+nb+" "+nC+(this.collapsed_&&this.collapsible_?" "+nx:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.ovmapDiv_),c.appendChild(a);let u=this.boxOverlay_,d=this.boxOverlay_.getElement(),g=t=>({clientX:t.clientX,clientY:t.clientY}),f=function(t){let i=g(t),n=l.getEventCoordinate(i);u.setPosition(n)},p=t=>{let i=l.getEventCoordinateInternal(t),n=this.getMap();n.getView().setCenterInternal(i);let r=n.getOwnerDocument();r.removeEventListener("pointermove",f),r.removeEventListener("pointerup",p)};this.ovmapDiv_.addEventListener("pointerdown",t=>{let i=this.getMap().getOwnerDocument();t.target===d&&i.addEventListener("pointermove",f),i.addEventListener("pointerup",p)})}setMap(t){let i=this.getMap();if(t!==i){if(i){let t=i.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(W(t,M.PROPERTYCHANGE,this.handleMapPropertyChange_,this));let i=t.getView();i&&this.bindView_(i),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===tw.VIEW){let i=t.oldValue;i&&this.unbindView_(i);let n=this.getMap().getView();this.bindView_(n)}else this.ovmap_.isRendered()||t.key!==tw.TARGET&&t.key!==tw.SIZE||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){let i=new nw({projection:t.getProjection()});this.ovmap_.setView(i)}t.addChangeListener(tS.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(t){t.removeChangeListener(tS.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){let t=this.getMap(),i=this.ovmap_;if(!t.isRendered()||!i.isRendered())return;let n=t.getSize(),r=t.getView().calculateExtentInternal(n);if(this.viewExtent_&&t0(r,this.viewExtent_))return;this.viewExtent_=r;let s=i.getSize(),o=i.getView().calculateExtentInternal(s),a=i.getPixelFromCoordinateInternal(en(r)),l=i.getPixelFromCoordinateInternal(t8(r)),A=Math.abs(a[0]-l[0]),h=Math.abs(a[1]-l[1]),c=s[0],u=s[1];A<.1*c||h<.1*u||A>.75*c||h>.75*u?this.resetExtent_():tW(o,r)||this.recenter_()}resetExtent_(){let t=this.getMap(),i=this.ovmap_,n=t.getSize(),r=t.getView().calculateExtentInternal(n),s=i.getView();var o=1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2));let a=(r[2]-r[0])/2*(o-1),l=(r[3]-r[1])/2*(o-1);r[0]-=a,r[2]+=a,r[1]-=l,r[3]+=l,s.fitInternal(nh(r))}recenter_(){let t=this.getMap(),i=this.ovmap_,n=t.getView();i.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){let t=this.getMap(),i=this.ovmap_;if(!t.isRendered()||!i.isRendered())return;let n=t.getSize(),r=t.getView(),s=i.getView(),o=this.rotateWithView_?0:-r.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),A=r.getCenter(),h=r.getResolution(),c=s.getResolution(),u=n[0]*h/c,d=n[1]*h/c;a.setPosition(A),l&&(l.style.width=u+"px",l.style.height=d+"px",l.style.transform="rotate("+o+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=$(this.ovmap_,ty.POSTRENDER,t=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(nx),this.collapsed_?nT(this.collapseLabel_,this.label_):nT(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;let t=this.ovmap_;if(!this.collapsed_){if(t.isRendered()){this.viewExtent_=void 0,t.render();return}t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}};const xs="oltb-tool-button",xo="oltb-toolbox-section",xa="oltb-overview",xl=`${xa}-target`,xA="tools.overviewTool",xh="commons",xc=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),xu=he.overviewTool,xd=Object.freeze({isActive:!1,isCollapsed:!1});class xg extends mk{constructor(t={}){super({filename:"overview-tool.js"});let i=up({path:ug.pip.stroked,class:`${xs}__icon`}),n=c1.get(xA),r=A6.createElement({element:"button",html:i,class:xs,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.overviewTool})`,"data-tippy-content-post":`(${mQ.overviewTool})`,"data-oltb-i18n":`${xA}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(xc),t),this.localStorage=ht.getAndMergeStateObject(xu,xd),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${xa}-toolbox`),this.#eB(),this.overviewMap=this.#iD(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${xA}.toolbox`),i=c1.get(`${xh}.titles`),n=`
            <div id="${xa}-toolbox" class="${xo}">
                <div class="${xo}__header oltb-toggleable" data-oltb-toggleable-target="${xa}-toolbox-collapsed">
                <h4 class="${xo}__title" data-oltb-i18n="${xA}.toolbox.titles.overview">${t.titles.overview}</h4>
                    <span class="${xo}__icon oltb-tippy" data-oltb-i18n="${xh}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${xo}__groups" id="${xa}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${xo}__group" id="${xl}"></div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#iD(){return new xr({target:xl,isCollapsed:!1,collapsible:!1,layers:[new oK({source:new ai})]})}activateTool(){let t=this.getMap();t&&(this.uiRefToolboxSection.classList.add(`${xo}--show`),this.doAddOverview(t),this.isActive=!0,this.button.classList.add(`${xs}--active`),this.localStorage.isActive=!0,ht.setStateObject(xu,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}deactivateTool(){this.doRemoveOverview(),this.isActive=!1,this.button.classList.remove(`${xs}--active`),this.uiRefToolboxSection.classList.remove(`${xo}--show`),this.localStorage.isActive=!1,ht.setStateObject(xu,this.localStorage)}#eI(t){if(!this.getMap())return;let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.overviewTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=E(an).cloneDeep(xd),ht.setStateObject(xu,xd)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(xu,this.localStorage);let i=this.getMap();this.overviewMap.setMap(null),this.overviewMap.setMap(i)})}doAddOverview(t){this.overviewMap.setMap(t)}doRemoveOverview(){this.overviewMap.setMap(null)}}var an=I("f1q41");const xf="bookmark-tool.js",xp="oltb-tool-button",xm="oltb-toolbox-section",x_="oltb-toolbox-list",xy="oltb-func-btn",xw="oltb-bookmark",xv="oltb-info-window-marker",xb="tools.bookmarkTool",xC="commons",xx=Object.freeze({markerLayerVisibleOnLoad:!0,markerLabelUseEllipsisAfter:20,markerLabelUseUpperCase:!1,bookmarks:[],onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onAdded:void 0,onRemoved:void 0,onRenamed:void 0,onZoomedTo:void 0,onCleared:void 0,onDragged:void 0}),xE=he.bookmarkTool,xB=Object.freeze({isActive:!1,isCollapsed:!1,bookmarks:[]});class xS extends mk{constructor(t={}){super({filename:xf}),this.icon=up({path:ug.bookmarkStar.stroked,class:`${xp}__icon`}),this.clearBookmarksIcon=up({path:ug.bookmarkX.stroked});let i=c1.get(xb),n=A6.createElement({element:"button",html:this.icon,class:xp,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.bookmarkTool})`,"data-tippy-content-post":`(${mQ.bookmarkTool})`,"data-oltb-i18n":`${xb}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(xx),t),this.localStorage=ht.getAndMergeStateObject(xE,xB),this.layerWrapper=this.#iP(),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${xw}-toolbox`),this.#eB(),this.uiRefAddBookmarkText=this.uiRefToolboxSection.querySelector(`#${xw}-add-text`),this.uiRefAddBookmarkButton=this.uiRefToolboxSection.querySelector(`#${xw}-add-button`),this.uiRefAddBookmarkText.addEventListener(A8.browser.keyUp,this.#ik.bind(this)),this.uiRefAddBookmarkButton.addEventListener(A8.browser.click,this.#iN.bind(this)),this.uiRefBookmarkStack=this.uiRefToolboxSection.querySelector(`#${xw}-stack`),this.sortableBookmarkStack=this.#e4(this.uiRefBookmarkStack,{group:"sortableBookmarks",callback:this.options.onDragged,stack:this.localStorage.bookmarks}),this.#iU(),this.#eC(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${xb}.toolbox`),i=c1.get(`${xC}.titles`),n=`
            <div id="${xw}-toolbox" class="${xm}">
                <div class="${xm}__header oltb-toggleable" data-oltb-toggleable-target="${xw}-toolbox-collapsed">
                    <h4 class="${xm}__title" data-oltb-i18n="${xb}.toolbox.titles.bookmarks">${t.titles.bookmarks}</h4>
                    <span class="${xm}__icon oltb-tippy" data-oltb-i18n="${xC}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${xm}__groups" id="${xw}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${xm}__group">
                        <div class="oltb-input-button-group">
                            <input type="text" id="${xw}-add-text" class="oltb-input" data-oltb-i18n="${xb}.toolbox.groups.addBookmark.placeholder" placeholder="${t.groups.addBookmark.placeholder}">
                            <button type="button" id="${xw}-add-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" data-oltb-i18n="${xb}.toolbox.groups.addBookmark.add" title="${t.groups.addBookmark.add}">
                                ${up({path:ug.plus.stroked,width:20,height:20,fill:"none",stroke:"#FFFFFFFF",strokeWidth:1,class:"oltb-btn__icon"})}
                            </button>
                        </div>
                    </div>
                    <div class="${xm}__group">
                        <ul id="${xw}-stack" class="${x_}"></ul>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#iU(){this.options.bookmarks.forEach(t=>{this.hasLocalStorageBookmarkById(t.id)||(t.sortIndex=0,t.isDynamicallyAdded=!1,this.localStorage.bookmarks.push(t))}),this.localStorage.bookmarks.forEach(t=>{this.#iQ(t)}),ht.setStateObject(xE,this.localStorage)}#eC(){mz.addItem({icon:this.icon,i18nKey:`${xb}.contextItems.addBookmark`,fn:this.#iH.bind(this)}),mz.addItem({icon:this.clearBookmarksIcon,i18nKey:`${xb}.contextItems.clearBookmarks`,fn:this.#iG.bind(this)})}#iP(){return dY.addFeatureLayer({id:"1fde0d79-46f9-4c92-8f9c-eb0e98f46772",name:c1.get(`${xb}.layers.bookmarks`),isVisible:this.options.markerLayerVisibleOnLoad,isSilent:!0,disableFeatureLayerEditButton:!1,disableFeatureLayerDownloadButton:!0,disableFeatureLayerDeleteButton:!0})}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${xm}--show`),this.button.classList.add(`${xp}--active`),this.localStorage.isActive=!0,ht.setStateObject(xE,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${xm}--show`),this.button.classList.remove(`${xp}--active`),this.localStorage.isActive=!1,ht.setStateObject(xE,this.localStorage)}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.bookmarkTool)&&this.onClickTool(t)}#b(){this.doClearBookmarks(),this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#iV(t){this.doZoomToBookmark(t)}#iz(t){this.doCopyBookmarkCoordinatesAsync(t)}#iK(t,i){this.askToDeleteBookmark(t,i)}#ij(t,i){this.askToEditBookmark(t,i)}#iH(t,i,n){this.doAddBookmark("",i)}#iG(t,i,n){this.askToClearBookmarks()}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#ik(t){this.#iW(t)&&this.onAddBookmarkByClick(t)}#iN(t){let i=this.uiRefAddBookmarkText.value;this.uiRefAddBookmarkText.value="",this.doAddBookmark(i)}getLocalStorageBookmarkById(t){return this.localStorage.bookmarks.find(i=>i.id===t)}hasLocalStorageBookmarkById(t){return!!this.getLocalStorageBookmarkById(t)}addMarkerToMap(t){this.layerWrapper.getLayer().getSource().addFeature(t)}removeMarkerFromMap(t){this.layerWrapper.getLayer().getSource().removeFeature(t)}clearMarkersFromMap(){this.layerWrapper.getLayer().getSource().clear()}isLayerVisible(){return this.layerWrapper.getLayer().getVisible()}#e4(t,i){let n=A3.getConfig().animationDuration.warp;return wC.create(t,{group:i.group,dataIdAttr:"data-oltb-sort-index",animation:n,forceFallback:!0,handle:`.${x_}__handle`,chosenClass:`${x_}__item--chosen`,dragClass:`${x_}__item--drag`,ghostClass:`${x_}__item--ghost`,onEnd:t=>this.#ir(t,i)})}#ir(t,i){let n=[],r={id:t.item.getAttribute("data-oltb-id"),oldIndex:t.newDraggableIndex,newIndex:t.oldDraggableIndex},s=t.to;s.childNodes.forEach((t,i)=>{let r=s.childNodes.length-i-1;t.setAttribute("data-oltb-sort-index",r);let o=t.getAttribute("data-oltb-id"),a=this.getLocalStorageBookmarkById(o);a&&(a.sortIndex=r),n.push({id:o,index:r})}),ht.setStateObject(xE,this.localStorage),i.callback&&i.callback(r,n)}#is(t,i=!1){let n=t.toArray().sort().reverse();t.sort(n,i)}#i$(t,i,n){let r=t.find(t=>t.id===n);return r&&void 0!==r.sortIndex?r.sortIndex:i.length}#tm(t){return t=t.trim(),this.#t4(t)||(t=gv.generate()),t}#t4(t){return null!=t&&!!t.length}#iW(t){return t.type===A8.browser.keyUp&&t.key===gj.valueEnter}#iY(t){return cP(t,{content(t){let i=t.getAttribute("title");return t.removeAttribute("title"),i},placement:"top",theme:"oltb oltb-themed",delay:A3.getConfig().tippy.delay})}#iQ(t){A0.logDebug(xf,"createUIBookmark",t),this.#iq(t),this.doAddIconMarker(t),this.hasLocalStorageBookmarkById(t.id)||(this.localStorage.bookmarks.push(t),ht.setStateObject(xE,this.localStorage))}#iq(t){let i=this.#i$(this.localStorage.bookmarks,this.uiRefBookmarkStack.childNodes,t.id);t.sortIndex=i;let n=A6.createElement({element:"li",id:`${xw}-${t.id}`,class:`${x_}__item`,attributes:{"data-oltb-id":t.id,"data-oltb-sort-index":i}}),r=A6.createElement({element:"span",text:t.name.ellipsis(20),class:`${x_}__title`,title:t.name,prototypes:{getTippy:function(){return this._tippy}}});this.#iY(r);let s=A6.createElement({element:"div",class:`${x_}__wrapper`}),o=A6.createElement({element:"div",class:`${x_}__dot`});A6.appendChildren(s,[o]),A6.appendChildren(s,[r]),A6.appendChildren(n,[s]);let a=A6.createElement({element:"div",class:`${x_}__wrapper`}),l=c1.get(xC),A=A6.createElement({element:"button",class:`${xy} ${xy}--geo-pin oltb-tippy`,title:l.titles.zoomToCoordinates,attributes:{type:"button"},listeners:{click:this.#iV.bind(this,t)}}),h=A6.createElement({element:"button",class:`${xy} ${xy}--crosshair oltb-tippy`,title:l.titles.copyCoordinates,attributes:{type:"button"},listeners:{click:this.#iz.bind(this,t)}}),c=A6.createElement({element:"button",class:`${xy} ${xy}--edit oltb-tippy`,title:l.titles.rename,attributes:{type:"button"},listeners:{click:this.#ij.bind(this,t,r)}}),u=A6.createElement({element:"button",class:`${xy} ${xy}--delete oltb-tippy`,title:l.titles.delete,attributes:{type:"button"},listeners:{click:this.#iK.bind(this,t,n)}});A6.appendChildren(a,[A,h,c,u]);let d=A6.createElement({element:"div",class:`${x_}__handle oltb-tippy`,title:l.titles.dragToSort});A6.appendChildren(a,[d]),A6.appendChildren(n,[a]),this.uiRefBookmarkStack.append(n),this.#is(this.sortableBookmarkStack)}askToClearBookmarks(){let t=c1.get(`${xb}.dialogs.confirms.clearBookmarks`);return fO.confirm({title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:()=>{this.doClearBookmarks(),c9.info({i18nKey:`${xb}.toasts.infos.clearBookmarks`,autoremove:!0})}})}askToDeleteBookmark(t,i){let n=c1.get(`${xb}.dialogs.confirms.clearBookmarks`);return fO.confirm({title:n.title,message:`${n.message} <strong>${t.name}</strong>?`,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:()=>{f0.hideOverlay(),this.doRemoveBookmark(t,i)}})}askToEditBookmark(t,i){let n=c1.get(`${xb}.dialogs.prompts.editBookmark`);return fO.prompt({title:n.title,message:`${n.message} <strong>${t.name}</strong>`,value:t.name,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:n=>{f0.hideOverlay(),this.#t4(n)&&this.doEditBookmark(t,i,n)}})}doClearState(){this.localStorage=E(an).cloneDeep(xB),ht.setStateObject(xE,xB)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(xE,this.localStorage)})}doAddIconMarker(t){let i=c1.get(`${xC}.titles`),n=t.coordinates,r=ey(n),s={title:t.name,content:"",footer:`
                <span class="oltb-info-window__coordinates">${r}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${xy} ${xy}--crosshair oltb-tippy" data-oltb-i18n="${xC}.titles.copyCoordinates" title="${i.copyCoordinates}" id="${xv}-copy-coordinates" data-oltb-coordinates="${r}"></button>
                    <button class="${xy} ${xy}--copy oltb-tippy" data-oltb-i18n="${xC}.titles.copyText" title="${i.copyText}" id="${xv}-copy-text" data-oltb-copy="${t.name}"></button>
                    <button class="${xy} ${xy}--layer oltb-tippy" data-oltb-i18n="${xC}.titles.showLayer" title="${i.showLayer}" id="${xv}-show-layer"></button>
                </div>
            `},o=dK.generateIconMarker({lon:n[0],lat:n[1],title:t.name,infoWindow:s,marker:{fill:"#3B4352FF",stroke:"#3B435266"},icon:{key:"bookmarkStar.filled"},label:{text:t.name,useEllipsisAfter:this.options.markerLabelUseEllipsisAfter,useUpperCase:this.options.markerLabelUseUpperCase}});return t.marker=o,this.addMarkerToMap(o),o}createBookmarkObject(t,i,n){let r=t.getView(),s=r.getZoom(),o=n??iu(r.getCenter());return{id:un(),name:i,zoom:s,coordinates:o,isDynamicallyAdded:!0,sortIndex:0}}doAddBookmark(t,i){let n=this.getMap();if(!n)return;t=this.#tm(t);let r=this.createBookmarkObject(n,t,i);return this.#iQ(r),this.isActive||c9.success({i18nKey:`${xb}.toasts.infos.createBookmark`,autoremove:!0}),this.options.onAdded&&this.options.onAdded(r),r}doRemoveBookmark(t,i){A6.removeElement(i),this.removeMarkerFromMap(t.marker),this.localStorage.bookmarks=this.localStorage.bookmarks.filter(i=>i.id!==t.id),this.localStorage.bookmarks.forEach(i=>{i.sortIndex>t.sortIndex&&(i.sortIndex-=1)}),this.uiRefBookmarkStack.childNodes.forEach(n=>{let r=Number(n.getAttribute("data-oltb-sort-index"));r>t.sortIndex&&i.setAttribute("data-oltb-sort-index",r-1)}),this.#is(this.sortableBookmarkStack),ht.setStateObject(xE,this.localStorage),this.options.onRemoved&&this.options.onRemoved(t)}doEditBookmark(t,i,n){t.name=n,i.innerText=n.ellipsis(20),i.getTippy().setContent(n),this.removeMarkerFromMap(t.marker),this.doAddIconMarker(t),ht.setStateObject(xE,this.localStorage),this.options.onRenamed&&this.options.onRenamed(t)}doClearBookmarks(){A0.logDebug(xf,"doClearBookmarks","All bookmarks cleared"),A6.clearElement(this.uiRefBookmarkStack),this.clearMarkersFromMap(),this.localStorage.bookmarks=[],ht.setStateObject(xE,this.localStorage),this.options.onCleared&&this.options.onCleared()}doZoomToBookmark(t){let i=this.getMap();i&&(mU({map:i,coordinates:t.coordinates,zoom:t.zoom,onDone:i=>{this.isLayerVisible()&&(f0.tryPulseAnimation(t.marker),f0.showOverlay(t.marker,ic(t.coordinates)))}}),this.options.onZoomedTo&&this.options.onZoomedTo(t))}async doCopyBookmarkCoordinatesAsync(t){let i=ey(t.coordinates);try{await fH.copyAsync(i),c9.info({i18nKey:`${xb}.toasts.infos.copyCoordinates`,autoremove:!0})}catch(t){A0.logError(xf,"doCopyBookmarkCoordinatesAsync",{message:"Failed to copy coordinates",error:t}),c9.error({i18nKey:`${xb}.toasts.errors.copyCoordinates`})}}}var an=I("f1q41");const xI="oltb-tool-button",xL="tools.directionTool",xF=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onChanged:void 0}),xM=Object.freeze({col:{class:"col",icon:up({path:ug.symmetryHorizontal.mixed,class:`${xI}__icon`})},row:{class:"row",icon:up({path:ug.symmetryVertical.mixed,class:`${xI}__icon`})}}),xT=he.directionTool,xR=Object.freeze({direction:xM.col.class});class xO extends mk{constructor(t={}){super({filename:"direction-tool.js"});let i=c1.get(xL),n=A6.createElement({element:"button",html:this.getToolIcon(),class:xI,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.directionTool})`,"data-tippy-content-post":`(${mQ.directionTool})`,"data-oltb-i18n":`${xL}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});A6.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(xF),t),this.localStorage=ht.getAndMergeStateObject(xT,xR),this.shouldToolButtonBeHidden(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onWindowSizeCheckBind=this.#iX.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.browser.resize,this.onWindowSizeCheckBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onWindowSizeCheckBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doToggleDirection();let t=this.getActiveDirection();cz.dispatchCustomEvent([window],A8.custom.toolbarDirectionChange,{detail:{direction:t.class}})}#tq(t){mK(t,mQ.directionTool)&&this.onClickTool(t)}#iX(t){this.shouldToolButtonBeHidden()}#b(){let t=this.getActiveDirection();this.doSwitchDirectionFromTo(t,xM.col),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}shouldToolButtonBeHidden(){window.innerWidth<=A3.getConfig().deviceWidth.sm?this.button.classList.add(`${xI}--hidden`):this.button.classList.remove(`${xI}--hidden`)}getToolIcon(){return cH()?xM.row.icon:xM.col.icon}getInActiveDirection(){return cH()?xM.col:xM.row}getActiveDirection(){return cH()?xM.row:xM.col}doToggleDirection(){let t=this.getActiveDirection(),i=this.getInActiveDirection();this.doSwitchDirectionFromTo(t,i),this.options.onChanged&&this.options.onChanged(i.class)}doSwitchDirectionFromTo(t,i){this.localStorage.direction=i.class,ht.setStateObject(xT,this.localStorage);let n="oltb",r=hr.getToolbarElement();r.classList.remove(t.class),window.document.body.classList.remove(`${n}-${t.class}`),r.classList.add(i.class),window.document.body.classList.add(`${n}-${i.class}`),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",i.icon)}}var an=(I("f1q41"),I("f1q41")),xD={chrome:"Google Chrome",brave:"Brave",crios:"Google Chrome",edge:"Microsoft Edge",edg:"Microsoft Edge",edgios:"Microsoft Edge",fennec:"Mozilla Firefox",jsdom:"JsDOM",mozilla:"Mozilla Firefox",fxios:"Mozilla Firefox",msie:"Microsoft Internet Explorer",opera:"Opera",opios:"Opera",opr:"Opera",opt:"Opera",rv:"Microsoft Internet Explorer",safari:"Safari",samsungbrowser:"Samsung Browser",electron:"Electron"},xP={android:"Android",androidTablet:"Android Tablet",cros:"Chrome OS",fennec:"Android Tablet",ipad:"IPad",ipod:"IPod",iphone:"IPhone",jsdom:"JsDOM",linux:"Linux",mac:"Macintosh",tablet:"Android Tablet",win:"Windows","windows phone":"Windows Phone",xbox:"Microsoft Xbox"},xk={toFixed:(t,i=-1)=>{let n=RegExp(`^-?\\d+(?:.\\d{0,${i}})?`),r=Number(t).toString().match(n);return r?r[0]:null}},xN=()=>"u">typeof window?window.navigator:null,xU=class{userAgent;constructor(t){this.userAgent=t||xN()?.userAgent||null}static get VERSION(){return"4.1.0"}parseUserAgent(t){let i={},n=t||this.userAgent||"",r=n.toLowerCase().replace(/\s\s+/g," "),s=/(edge)\/([\w.]+)/.exec(r)||/(edg)[/]([\w.]+)/.exec(r)||/(opr)[/]([\w.]+)/.exec(r)||/(opt)[/]([\w.]+)/.exec(r)||/(fxios)[/]([\w.]+)/.exec(r)||/(edgios)[/]([\w.]+)/.exec(r)||/(jsdom)[/]([\w.]+)/.exec(r)||/(samsungbrowser)[/]([\w.]+)/.exec(r)||/(electron)[/]([\w.]+)/.exec(r)||/(chrome)[/]([\w.]+)/.exec(r)||/(crios)[/]([\w.]+)/.exec(r)||/(opios)[/]([\w.]+)/.exec(r)||/(version)(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(r)||/(webkit)[/]([\w.]+).*(version)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(r)||/(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(r)||/(webkit)[/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||/(fennec)[/]([\w.]+)/.exec(r)||r.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(r)||0>r.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[],o=/(ipad)/.exec(r)||/(ipod)/.exec(r)||/(iphone)/.exec(r)||/(jsdom)/.exec(r)||/(windows phone)/.exec(r)||/(xbox)/.exec(r)||/(win)/.exec(r)||/(tablet)/.exec(r)||/(android)/.test(r)&&!1===/(mobile)/.test(r)&&["androidTablet"]||/(android)/.exec(r)||/(mac)/.exec(r)||/(linux)/.exec(r)||/(cros)/.exec(r)||[],a=s[5]||s[3]||s[1]||null,l=o[0]||null,A=s[4]||s[2]||null,h=xN();"chrome"===a&&"function"==typeof h?.brave?.isBrave&&(a="brave"),a&&(i[a]=!0),l&&(i[l]=!0);let c=!!(i.tablet||i.android||i.androidTablet),u=!!(i.ipad||i.tablet||i.androidTablet),d=!!(i.android||i.androidTablet||i.tablet||i.ipad||i.ipod||i.iphone||i["windows phone"]),g=!!(i.cros||i.mac||i.linux||i.win),f=!!(i.brave||i.chrome||i.crios||i.opr||i.safari||i.edg||i.electron),p=!!(i.msie||i.rv),m=!!(i.chrome||i.crios),_=!!(i.fxios||i.fennec||i.mozilla),y=!!i.safari,w=!!(i.opera||i.opios||i.opr||i.opt),v=!!(i.edg||i.edge||i.edgios);return{name:xD[a]??null,platform:xP[l]??null,userAgent:n,version:A,shortVersion:A?xk.toFixed(parseFloat(A),2):null,isAndroid:c,isTablet:u,isMobile:d,isDesktop:g,isWebkit:f,isIE:p,isChrome:m,isFireFox:_,isSafari:y,isOpera:w,isEdge:v}}getBrowserInfo(){let t=this.parseUserAgent();return{name:t.name,platform:t.platform,userAgent:t.userAgent,version:t.version,shortVersion:t.shortVersion}}};const xQ="debug-info-modal.js",xH="oltb-debug",xG="oltb-event-log",xV="modalExtensions.debugInfoModal",xz="commons",xK=Object.freeze({map:void 0});class xj extends gJ{#tZ=[];constructor(t={}){super({filename:xQ,title:c1.get(`${xV}.title`),pushWidth:!0,...t}),this.options=E(an).merge(E(an).cloneDeep(xK),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=A0.getSize(),i=ux.getSize();A0.logInformation(xQ,"summary",{logManager:{size:t},styleManager:{size:i}});let n=this.#iZ();this.show(n),n.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#iJ.bind(this,t))})}#i0(){let t=c1.get(`${xV}.form`),i=A6.createElement({element:"select",class:"oltb-select"}),n=A6.createElement({element:"option",text:t.defaultItem.title,attributes:{disabled:"disabled",selected:"selected"}});A6.appendChildren(i,[n]),[{name:t.miscGroup.title,items:[{name:t.miscGroup.items.logToBrowser,action:"log.map.to.console"},{name:t.miscGroup.items.generateUUID,action:"generate.uuid"},{name:t.miscGroup.items.clearStyleManager,action:"clear.style.manager"}]},{name:t.eventLogGroup.title,items:[{name:t.eventLogGroup.items.copyEventLog,action:"copy.event.log"},{name:t.eventLogGroup.items.clearEventLog,action:"clear.event.log"}]}].forEach(t=>{let n=A6.createElement({element:"optgroup",attributes:{label:t.name}});A6.appendChildren(i,[n]),t.items.forEach(t=>{let i=A6.createElement({element:"option",text:t.name,value:t.action});A6.appendChildren(n,[i])})});let r=A6.createElement({element:"button",text:t.doAction,class:"oltb-btn oltb-btn--blue-mid oltb-ml-05",attributes:{type:"button"},listeners:{click:this.#i1.bind(this)}}),s=A6.createElement({element:"div",class:"oltb-debug__commands oltb-d-flex oltb-justify-content-between oltb-mt-15"});return A6.appendChildren(s,[i,r]),this.commandsCollection=i,s}#i2(t,i){let n=c1.get(`${xz}.titles`),r=A6.createElement({element:"div",class:"oltb-debug"}),s=A6.createElement({element:"div",class:"oltb-debug__header oltb-toggleable",attributes:{"data-oltb-toggleable-target":`${xH}-section-${i}`}}),o=A6.createElement({element:"h4",class:"oltb-debug__title",text:t.title}),a=A6.createElement({element:"button",html:up({path:ug.chevronExpand.stroked,fill:"none",stroke:"currentColor",strokeWidth:1,width:16,height:16}),title:n.toggleSection,class:"oltb-debug__toggle oltb-btn oltb-btn--blank oltb-tippy",attributes:{type:"button"}});A6.appendChildren(s,[o,a]);let l=A6.createElement({element:"div",id:`${xH}-section-${i}`,class:"oltb-debug__content",style:{display:`${t.display}`}});if(t.json){let i=this.#i5(t);A6.appendChildren(l,[i])}else{let i=this.#i4(t);A6.appendChildren(l,[i])}return A6.appendChildren(r,[s,l]),r}#i5(t){let i=A6.createElement({element:"pre",class:`${t.class} oltb-thin-scrollbars`}),n=A6.createElement({element:"code",text:JSON.stringify(JSON.retrocycle(t.content),uB,4)});return A6.appendChildren(i,[n]),i}#i4(t){let i=new Map;for(let[t,n]of Object.entries(A0.getLogLevels()))i.set(n.name,{count:0,name:n.name,visible:n.visible,color:n.color,key:t,backgroundColor:n.backgroundColor,borderColor:n.borderColor});let n=A6.createElement({element:"div",id:xG,class:"oltb-log oltb-thin-scrollbars"});t.content.forEach((t,r)=>{let s=i.get(t.level.name);if(i.set(t.level.name,{count:s.count+1,name:t.level.name,visible:t.level.visible,color:t.level.color,backgroundColor:t.level.backgroundColor,borderColor:t.level.borderColor}),"string"==typeof t.value){let i=this.#i3(t);A6.appendChildren(n,[i])}else{let i=this.#i6(t,r);A6.appendChildren(n,[i])}});let r=A6.createElement({element:"div",class:"oltb-log__wrapper"}),s=A6.createElement({element:"div",class:"oltb-log__filter oltb-hide-scrollbars"});return A6.appendChildren(r,[s,n]),i.forEach((t,i,r)=>{let o=A6.createElement({element:"span",class:`oltb-chip ${!t.visible?"oltb-chip--deactivated":""}`,text:`${i} (${t.count})`,attributes:{"data-oltb-reset-value":`${i} (0)`},listeners:{click:()=>{this.doFilterEventLog(o,t.name,n)}},style:{"background-color":t.backgroundColor,color:t.color,border:`1px solid ${t.borderColor}`}});A6.appendChildren(s,[o])}),r}#i3(t){let i=A6.createElement({element:"div",class:"oltb-log__header"}),n=A6.createElement({element:"div",class:"oltb-log__title",html:`
                </span><span class="oltb-log__timestamp">${t.timestamp}</span> &rarr; ${t.origin} &rarr; ${t.method} &rarr; ${t.value}
            `});A6.appendChildren(i,[n]);let r=A6.createElement({element:"div",class:`oltb-log__item ${!t.level.visible?"oltb-log__item--hidden":""}`,attributes:{"data-oltb-log-name":t.level.name},style:{"background-color":t.level.backgroundColor,color:t.level.color,border:`1px solid ${t.level.borderColor}`}});return A6.appendChildren(r,[i]),r}#i6(t,i){let n=c1.get(`${xz}.titles`),r=A6.createElement({element:"div",class:"oltb-log__header oltb-log__header--toggleable oltb-toggleable",attributes:{"data-oltb-toggleable-target":`${xH}-log-item-${i}`}}),s=A6.createElement({element:"div",class:"oltb-log__title",html:`
                </span><span class="oltb-log__timestamp">${t.timestamp}</span> &rarr; ${t.origin} &rarr; ${t.method}
            `}),o=A6.createElement({element:"button",html:up({path:ug.chevronExpand.stroked,fill:"none",stroke:"currentColor",strokeWidth:1,width:16,height:16}),title:n.toggleSection,class:"oltb-log__toggle oltb-btn oltb-btn--blank oltb-tippy",attributes:{type:"button"}});A6.appendChildren(r,[s,o]);let a=A6.createElement({element:"div",id:`${xH}-log-item-${i}`,style:{display:"none"}}),l=this.#i5({content:t.value,class:"oltb-log__json"},!0);A6.appendChildren(a,[l]);let A=A6.createElement({element:"div",class:`oltb-log__item ${!t.level.visible?"oltb-log__item--hidden":""}`,attributes:{"data-oltb-log-name":t.level.name},style:{"background-color":t.level.backgroundColor,color:t.level.color,border:`1px solid ${t.level.borderColor}`}});return A6.appendChildren(A,[r,a]),A}#iZ(){let t=this.#i0(),i=A3.getConfig(),n={oltb:{version:i.toolbar.version,url:"https://github.com/qulle/oltb"},ol:{version:i.openLayers.version,url:`https://openlayers.org/en/v${i.openLayers.version}/apidoc/`},defaultConfig:i},r=c1.getLanguages(),s=[];r.forEach(t=>{let i={title:`${t.value}.json | ${t.text}`,content:t.translation,class:"oltb-debug__json",display:"none",json:!0};s.push(i)});let o=this.options.map?.getView(),a=o?{zoom:o.getZoom(),location:iu(o.getCenter()),rotation:o.getRotation(),projection:o.getProjection(),proj4Defs:mO.getProjections()}:{info:c1.get(`${xV}.noMapFound`)},l={userAgent:new xU(window.navigator.userAgent).parseUserAgent(),device:{isSecureContext:window.isSecureContext,location:{protocol:window.location.protocol,domain:window.location.hostname,path:window.location.pathname,port:window.location.port},screen:{width:window.screen.width,height:window.screen.height},window:{width:window.innerWidth,height:window.innerHeight,pixelRatio:{scalar:window.devicePixelRatio,percentage:`${100*window.devicePixelRatio}%`}}}},A={};Object.keys(window.localStorage).forEach(t=>{try{A[t]=JSON.parse(window.localStorage.getItem(t))||{}}catch(t){A0.logError(xQ,"generateModalContent",{message:"Error parsing localstorage",error:t})}});let h={};Object.keys(window.sessionStorage).forEach(t=>{try{h[t]=JSON.parse(window.sessionStorage.getItem(t))||{}}catch(t){A0.logError(xQ,"generateModalContent",{message:"Error parsing sessionStorage",error:t})}});let c=Object.fromEntries(window.document.cookie.split("; ").map(t=>t.split("="))),u=A0.getLog().slice().reverse(),d=c1.get(`${xV}.sections`),g=window.document.createDocumentFragment();[{title:d.appData,content:n,class:"oltb-debug__json",display:"none",json:!0},{title:d.mapData,content:a,class:"oltb-debug__json",display:"none",json:!0},{title:d.browserData,content:l,class:"oltb-debug__json",display:"none",json:!0},{title:d.localStorage,content:A,class:"oltb-debug__json",display:"none",json:!0},{title:d.sessionStorage,content:h,class:"oltb-debug__json",display:"none",json:!0},{title:d.cookies,content:c,class:"oltb-debug__json",display:"none",json:!0},...s,{title:d.eventLog,content:u,class:"oltb-debug__json",display:"block",json:!1}].forEach((t,i)=>{let n=this.#i2(t,i);A6.appendChildren(g,[n])});let f=A6.createElement({element:"div",class:"oltb-modal__content"});return A6.appendChildren(f,[t,g]),f}#iJ(t){let i=t.dataset.oltbToggleableTarget,n=A3.getConfig().animationDuration.fast;window.document.getElementById(i)?.slideToggle(n)}#i1(){this.doActionByName(this.commandsCollection.value)}doActionByName(t){let i={"log.map.to.console":this.doActionLoggingMap.bind(this),"generate.uuid":this.doActionGenerateUUID.bind(this),"copy.event.log":this.doActionCopyEventLogAsync.bind(this),"clear.event.log":this.doActionClearEventLog.bind(this),"clear.style.manager":this.doActionClearStyleManager.bind(this)}[t];i?i.call():A0.logWarning(xQ,"doActionByName",{info:"Missing action",name:t})}doFilterEventLog(t,i,n){t.classList.toggle("oltb-chip--deactivated"),n.querySelectorAll(`[data-oltb-log-name="${i}"]`).forEach(t=>{t.classList.toggle("oltb-log__item--hidden")}),0===n.querySelectorAll(".oltb-log__item:not(.oltb-log__item--hidden)").length?n.classList.add("oltb-log--empty"):n.classList.remove("oltb-log--empty")}doActionLoggingMap(){window.console.dir(this.options.map),c9.info({i18nKey:`${xV}.toasts.infos.logMapObject`,autoremove:!0})}doActionGenerateUUID(){let t=un(),i=A0.logInformation(xQ,"actionGenerateUUID",t),n=window.document.getElementById(xG),r=this.#i3(i);A6.prependChildren(n,[r])}async doActionCopyEventLogAsync(){let t=A0.getLog().slice().reverse();try{let i=JSON.stringify(JSON.retrocycle(t),uB,4);await fH.copyAsync(i),c9.info({i18nKey:`${xV}.toasts.infos.copyEventLog`,autoremove:!0})}catch(t){A0.logError(xQ,"doActionCopyEventLogAsync",{message:"Failed to copy Event Log",error:t}),c9.error({i18nKey:`${xV}.toasts.errors.copyEventLog`})}}doActionClearEventLog(){A0.clearLog();let t=window.document.getElementById(xG);t&&A6.clearElement(t);let i="data-oltb-reset-value";window.document.querySelectorAll(`[${i}]`).forEach(t=>{t.innerHTML=t.getAttribute(i)}),c9.info({i18nKey:`${xV}.toasts.infos.clearEventLog`,autoremove:!0})}doActionClearStyleManager(){let t=ux.getSize();ux.clearStyles();let i=ux.getSize();return A0.logInformation(xQ,"doActionClearStyleManager",{info:"StyleManager cleared",beforeSize:t,afterSize:i}),c9.info({i18nKey:`${xV}.toasts.infos.clearStyleManager`,autoremove:!0}),[t,i]}}const xW="oltb-tool-button",x$="tools.debugInfoTool",xY=Object.freeze({onlyWhenGetParameter:!1,onInitiated:void 0,onClicked:void 0});class xq extends mk{constructor(t={}){super({filename:"debug-info-tool.js"});let i=up({path:ug.bug.stroked,class:`${xW}__icon`}),n=c1.get(x$),r=A6.createElement({element:"button",html:i,class:xW,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.debugInfoTool})`,"data-tippy-content-post":`(${mQ.debugInfoTool})`,"data-oltb-i18n":`${x$}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.debugInfoModal=void 0,this.options=E(an).merge(E(an).cloneDeep(xY),t),this.#i8(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#i8(){let t=A3.getConfig().urlParameter.debug;"true"!==gm.getParameter(t)&&this.options.onlyWhenGetParameter&&this.button.classList.add(`${xW}--hidden`)}momentaryActivation(){this.doShowDebugInfoModal()}#tq(t){mK(t,mQ.debugInfoTool)&&this.onClickTool(t)}doShowDebugInfoModal(){if(this.debugInfoModal)return;let t=this.getMap();t&&(this.debugInfoModal=new xj({map:t,onClose:()=>{this.debugInfoModal=void 0}}))}}var an=I("f1q41");const xX="split-view-tool.js",xZ="oltb-tool-button",xJ="oltb-toolbox-section",x0="oltb-slider",x1="oltb-split-view",x2="tools.splitViewTool",x5="commons",x4=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),x3=he.splitViewTool,x6=Object.freeze({isActive:!1,isCollapsed:!1});class x8 extends mk{constructor(t={}){super({filename:xX});let i=up({path:ug.arrowsExpandVertical.stroked,class:`${xZ}__icon`}),n=c1.get(x2),r=A6.createElement({element:"button",html:i,class:xZ,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.splitViewTool})`,"data-tippy-content-post":`(${mQ.splitViewTool})`,"data-oltb-i18n":`${x2}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(x4),t),this.localStorage=ht.getAndMergeStateObject(x3,x6),this.#eE(),this.#i7(),this.uiRefToolboxSection=window.document.querySelector(`#${x1}-toolbox`),this.#eB(),this.uiRefLeftSource=this.uiRefToolboxSection.querySelector(`#${x1}-left-source`),this.uiRefLeftSource.addEventListener(A8.browser.change,this.updateTool.bind(this)),this.uiRefRightSource=this.uiRefToolboxSection.querySelector(`#${x1}-right-source`),this.uiRefRightSource.addEventListener(A8.browser.change,this.updateTool.bind(this)),this.uiRefToolboxSection.querySelector(`#${x1}-swap-button`).addEventListener(A8.browser.click,t=>{this.#i9()}),this.uiRefSplitViewSlider=hr.getMapElement().querySelector(`#${x1}-slider`),this.uiRefSplitViewSlider.addEventListener(A8.browser.input,this.#nt.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowMapLayerAddedBind=this.#e7.bind(this),this.onWindowMapLayerRemovedBind=this.#e9.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.addEventListener(A8.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.removeEventListener(A8.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){if(super.onClickTool(t),2>dY.getMapLayerSize())return void c9.info({i18nKey:`${x2}.toasts.infos.strictOneLayer`});this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${x2}.toolbox`),i=c1.get(`${x5}.titles`),n=`
            <div id="${x1}-toolbox" class="${xJ}">
                <div class="${xJ}__header oltb-toggleable" data-oltb-toggleable-target="${x1}-toolbox-collapsed">
                    <h4 class="${xJ}__title" data-oltb-i18n="${x2}.toolbox.titles.splitView">${t.titles.splitView}</h4>
                    <span class="${xJ}__icon oltb-tippy" data-oltb-i18n="${x5}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${xJ}__groups" id="${x1}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${xJ}__group ${xJ}__group--split-group">
                        <div class="${xJ}__group-part">
                            <label class="oltb-label" for="${x1}-left-source" data-oltb-i18n="${x2}.toolbox.groups.leftSide.title">${t.groups.leftSide.title}</label>
                            <select id="${x1}-left-source" class="oltb-select"></select>
                        </div>
                        <div class="${xJ}__group-part" style="flex: none;">
                            <button type="button" id="${x1}-swap-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" title="${t.groups.swapSides.swap}">
                                ${up({path:ug.arrowLeftRight.stroked,width:20,height:20,class:"oltb-btn__icon"})}
                            </button>
                        </div>
                        <div class="${xJ}__group-part">
                            <label class="oltb-label" for="${x1}-source" data-oltb-i18n="${x2}.toolbox.groups.rightSide.title">${t.groups.rightSide.title}</label>
                            <select id="${x1}-right-source" class="oltb-select"></select>
                        </div>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#i7(){hr.getMapElement().insertAdjacentHTML("beforeend",`
            <input type="range" min="0" max="100" value="50" class="oltb-slider" id="${x1}-slider">
        `)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}activateTool(){if(this.isActive=!0,this.setDefaultSelectedIndexes().doDispatchChangeEvent(),this.layerLoadingError){this.isActive=!1;return}this.uiRefToolboxSection.classList.add(`${xJ}--show`),this.uiRefSplitViewSlider.classList.add(`${x0}--show`),this.button.classList.add(`${xZ}--active`),this.localStorage.isActive=!0,ht.setStateObject(x3,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){let t=this.getMap();t&&(X(this.onPreRenderListener),X(this.onPostRenderListener),dY.getMapLayers().forEach(i=>{t.removeLayer(i.getLayer())}),dY.getMapLayers().forEach(i=>{t.addLayer(i.getLayer())}),dY.setTopMapLayerAsOnlyVisible(),this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${xJ}--show`),this.uiRefSplitViewSlider.classList.remove(`${x0}--show`),this.button.classList.remove(`${xZ}--active`),this.localStorage.isActive=!1,ht.setStateObject(x3,this.localStorage))}updateTool(){this.doUpdateTool(this.uiRefLeftSource.value,this.uiRefRightSource.value)}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.splitViewTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#e7(t){this.doMapLayerAdded(t)}#e9(t){this.doMapLayerRemoved(t),this.doDispatchChangeEvent()}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#i9(){this.doSwapLayerSides(),this.doDispatchChangeEvent()}#nt(t){let i=this.getMap();i&&i.render()}#ne(t){let i=this.getMap();i&&this.doPreRender(t,i)}#ni(t){t.context.restore()}setDefaultSelectedIndexes(){return this.uiRefLeftSource.selectedIndex=String(1),this.uiRefRightSource.selectedIndex=String(0),this}setLoadingError(){this.layerLoadingError=!0,A0.logError(xX,"setLoadingError",{message:"One or both of the layers could not be loaded"}),c9.error({i18nKey:`${x2}.toasts.errors.layerFailedToLoad`})}doClearState(){this.localStorage=E(an).cloneDeep(x6),ht.setStateObject(x3,x6)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(x3,this.localStorage)})}doMapLayerRemoved(t){let i=t.detail.layerWrapper;this.uiRefLeftSource.childNodes.forEach(t=>{t.value===i.getId()&&A6.removeElement(t)}),this.uiRefRightSource.childNodes.forEach(t=>{t.value===i.getId()&&A6.removeElement(t)})}doMapLayerAdded(t){let i=t.detail.layerWrapper,n=A6.createElement({element:"option",text:i.getName(),value:i.getId().toString()}),r=A6.createElement({element:"option",text:i.getName(),value:i.getId().toString()});A6.appendChildren(this.uiRefLeftSource,[n]),A6.appendChildren(this.uiRefRightSource,[r])}doPreRender(t,i){let n=t.context,r=i.getSize(),s=A3.getConfig().browser.rem,o=this.uiRefSplitViewSlider.offsetWidth,a=o/2,l=this.uiRefSplitViewSlider.value/(this.uiRefSplitViewSlider.max-this.uiRefSplitViewSlider.min),A=r[0],h=r[1],c=A*(this.uiRefSplitViewSlider.value/this.uiRefSplitViewSlider.max)-(l*o-a)/a*s,u=fU(t,[c,0]),d=fU(t,[A,0]),g=fU(t,[c,h]),f=fU(t,[A,h]);n.save(),n.beginPath(),n.moveTo(u[0],u[1]),n.lineTo(g[0],g[1]),n.lineTo(f[0],f[1]),n.lineTo(d[0],d[1]),n.closePath(),n.clip()}doSwapLayerSides(){let t=this.uiRefRightSource.value;this.uiRefRightSource.value=this.uiRefLeftSource.value,this.uiRefLeftSource.value=t}doDispatchChangeEvent(){cz.dispatchEvent([this.uiRefLeftSource,this.uiRefRightSource],A8.browser.change)}doAddMapLayer(t){t.setVisible(!0),this.getMap().addLayer(t)}doRemoveMapLayer(t){t.setVisible(!1),this.getMap().removeLayer(t)}doUpdateTool(t,i){if(!this.isActive)return;let n=this.getMap();if(!n)return;X(this.onPreRenderListener),X(this.onPostRenderListener),dY.getMapLayers().forEach(t=>{this.doRemoveMapLayer(t.getLayer())});let r=dY.getMapLayerById(t),s=dY.getMapLayerById(i);if(!r||!s)return void this.setLoadingError();let o=r.getLayer(),a=s.getLayer();this.doAddMapLayer(o),t!==i&&(this.doAddMapLayer(a),this.onPreRenderListener=a.on(A8.openLayers.preRender,this.#ne.bind(this)),this.onPostRenderListener=a.on(A8.openLayers.postRender,this.#ni.bind(this))),n.render()}}var an=I("f1q41"),x7={};x7=function(){var t,i,n,r,s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v,b,C,x,E=function(t,i){return(E=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,i)};function B(t,i){if("function"!=typeof i&&null!==i)throw TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}E(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var S=function(){return(S=Object.assign||function(t){for(var i,n=1,r=arguments.length;n<r;n++)for(var s in i=arguments[n])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t}).apply(this,arguments)};function I(t,i,n,r){return new(n||(n=Promise))(function(s,o){function a(t){try{A(r.next(t))}catch(t){o(t)}}function l(t){try{A(r.throw(t))}catch(t){o(t)}}function A(t){var i;t.done?s(t.value):((i=t.value)instanceof n?i:new n(function(t){t(i)})).then(a,l)}A((r=r.apply(t,i||[])).next())})}function L(t,i){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){var A=[o,l];if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&A[0]?r.return:A[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,A[1])).done)return s;switch(r=0,s&&(A=[2&A[0],s.value]),A[0]){case 0:case 1:s=A;break;case 4:return a.label++,{value:A[1],done:!1};case 5:a.label++,r=A[1],A=[0];continue;case 7:A=a.ops.pop(),a.trys.pop();continue;default:if(!(s=(s=a.trys).length>0&&s[s.length-1])&&(6===A[0]||2===A[0])){a=0;continue}if(3===A[0]&&(!s||A[1]>s[0]&&A[1]<s[3])){a.label=A[1];break}if(6===A[0]&&a.label<s[1]){a.label=s[1],s=A;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(A);break}s[2]&&a.ops.pop(),a.trys.pop();continue}A=i.call(t,a)}catch(t){A=[6,t],r=0}finally{n=s=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}}function F(t,i,n){if(n||2==arguments.length)for(var r,s=0,o=i.length;s<o;s++)!r&&s in i||(r||(r=Array.prototype.slice.call(i,0,s)),r[s]=i[s]);return t.concat(r||i)}for(var M=function(){function t(t,i,n,r){this.left=t,this.top=i,this.width=n,this.height=r}return t.prototype.add=function(i,n,r,s){return new t(this.left+i,this.top+n,this.width+r,this.height+s)},t.fromClientRect=function(i,n){return new t(n.left+i.windowBounds.left,n.top+i.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(i,n){var r=Array.from(n).find(function(t){return 0!==t.width});return r?new t(r.left+i.windowBounds.left,r.top+i.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),T=function(t,i){return M.fromClientRect(t,i.getBoundingClientRect())},R=function(t){var i=t.body,n=t.documentElement;if(!i||!n)throw Error("Unable to get document size");return new M(0,0,Math.max(Math.max(i.scrollWidth,n.scrollWidth),Math.max(i.offsetWidth,n.offsetWidth),Math.max(i.clientWidth,n.clientWidth)),Math.max(Math.max(i.scrollHeight,n.scrollHeight),Math.max(i.offsetHeight,n.offsetHeight),Math.max(i.clientHeight,n.clientHeight)))},O=function(t){for(var i=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var o=t.charCodeAt(n++);(64512&o)==56320?i.push(((1023&s)<<10)+(1023&o)+65536):(i.push(s),n--)}else i.push(s)}return i},D=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,o="";++s<n;){var a=t[s];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(s+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k="undefined"==typeof Uint8Array?[]:new Uint8Array(256),N=0;N<P.length;N++)k[P.charCodeAt(N)]=N;for(var U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="undefined"==typeof Uint8Array?[]:new Uint8Array(256),H=0;H<U.length;H++)Q[U.charCodeAt(H)]=H;for(var G=2112,V=function(t,i,n){return t.slice?t.slice(i,n):new Uint16Array(Array.prototype.slice.call(t,i,n))},z=function(){function t(t,i,n,r,s,o){this.initialValue=t,this.errorValue=i,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=o}return t.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=((i=this.index[t>>5])<<2)+(31&t),this.data[i];if(t<=65535)return i=((i=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[i];if(t<this.highStart)return i=G-32+(t>>11),i=this.index[i]+(t>>5&63),i=((i=this.index[i])<<2)+(31&t),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j="undefined"==typeof Uint8Array?[]:new Uint8Array(256),W=0;W<K.length;W++)j[K.charCodeAt(W)]=W;var $=[9001,65288],Y=(i=Array.isArray(t=function(t){var i,n,r,s,o,a=.75*t.length,l=t.length,A=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):Array(a),c=Array.isArray(h)?h:new Uint8Array(h);for(i=0;i<l;i+=4)n=Q[t.charCodeAt(i)],r=Q[t.charCodeAt(i+1)],s=Q[t.charCodeAt(i+2)],o=Q[t.charCodeAt(i+3)],c[A++]=n<<2|r>>4,c[A++]=(15&r)<<4|s>>2,c[A++]=(3&s)<<6|63&o;return h}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="))?function(t){for(var i=t.length,n=[],r=0;r<i;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(t):new Uint32Array(t),r=V(n=Array.isArray(t)?function(t){for(var i=t.length,n=[],r=0;r<i;r+=2)n.push(t[r+1]<<8|t[r]);return n}(t):new Uint16Array(t),12,i[4]/2),a=2===i[5]?V(n,(24+i[4])/2):(s=Math.ceil((24+i[4])/4),i.slice?i.slice(s,void 0):new Uint32Array(Array.prototype.slice.call(i,s,o))),new z(i[0],i[1],i[2],i[3],r,a)),q=[30,36],X=[1,2,3,5],Z=[10,8],J=[27,26],tt=X.concat(Z),te=[38,39,40,34,35],ti=[15,13],tn=function(t,i){void 0===i&&(i="strict");var n=[],r=[],s=[];return t.forEach(function(t,o){var a=Y.get(t);if(a>50?(s.push(!0),a-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(i)&&-1!==[8208,8211,12316,12448].indexOf(t))return r.push(o),n.push(16);if(4===a||11===a){if(0===o)return r.push(o),n.push(30);var l=n[o-1];return -1===tt.indexOf(l)?(r.push(r[o-1]),n.push(l)):(r.push(o),n.push(30))}if(r.push(o),31===a)return n.push("strict"===i?21:37);if(42===a||29===a)return n.push(30);if(43===a)if(t>=131072&&t<=196605||t>=196608&&t<=262141)return n.push(37);else return n.push(30);n.push(a)}),[r,n,s]},tr=function(t,i,n,r){var s=r[n];if(Array.isArray(t)?-1!==t.indexOf(s):t===s)for(var o=n;o<=r.length;){var a=r[++o];if(a===i)return!0;if(10!==a)break}if(10===s)for(var o=n;o>0;){var l=r[--o];if(Array.isArray(t)?-1!==t.indexOf(l):t===l)for(var A=n;A<=r.length;){var a=r[++A];if(a===i)return!0;if(10!==a)break}if(10!==l)break}return!1},ts=function(t,i){for(var n=t;n>=0;){var r=i[n];if(10!==r)return r;n--}return 0},to=function(t,i,n,r,s){if(0===n[r])return"×";var o=r-1;if(Array.isArray(s)&&!0===s[o])return"×";var a=o-1,l=o+1,A=i[o],h=a>=0?i[a]:0,c=i[l];if(2===A&&3===c)return"×";if(-1!==X.indexOf(A))return"!";if(-1!==X.indexOf(c)||-1!==Z.indexOf(c))return"×";if(8===ts(o,i))return"÷";if(11===Y.get(t[o])||(32===A||33===A)&&11===Y.get(t[l])||7===A||7===c||9===A||-1===[10,13,15].indexOf(A)&&9===c||-1!==[17,18,19,24,28].indexOf(c)||22===ts(o,i)||tr(23,22,o,i)||tr([17,18],21,o,i)||tr(12,12,o,i))return"×";if(10===A)return"÷";if(23===A||23===c)return"×";if(16===c||16===A)return"÷";if(-1!==[13,15,21].indexOf(c)||14===A||36===h&&-1!==ti.indexOf(A)||28===A&&36===c||20===c||-1!==q.indexOf(c)&&25===A||-1!==q.indexOf(A)&&25===c||27===A&&-1!==[37,32,33].indexOf(c)||-1!==[37,32,33].indexOf(A)&&26===c||-1!==q.indexOf(A)&&-1!==J.indexOf(c)||-1!==J.indexOf(A)&&-1!==q.indexOf(c)||-1!==[27,26].indexOf(A)&&(25===c||-1!==[22,15].indexOf(c)&&25===i[l+1])||-1!==[22,15].indexOf(A)&&25===c||25===A&&-1!==[25,28,24].indexOf(c))return"×";if(-1!==[25,28,24,17,18].indexOf(c))for(var u=o;u>=0;){var d=i[u];if(25===d)return"×";if(-1!==[28,24].indexOf(d))u--;else break}if(-1!==[27,26].indexOf(c))for(var u=-1!==[17,18].indexOf(A)?a:o;u>=0;){var d=i[u];if(25===d)return"×";if(-1!==[28,24].indexOf(d))u--;else break}if(38===A&&-1!==[38,39,34,35].indexOf(c)||-1!==[39,34].indexOf(A)&&-1!==[39,40].indexOf(c)||-1!==[40,35].indexOf(A)&&40===c||-1!==te.indexOf(A)&&-1!==[20,26].indexOf(c)||-1!==te.indexOf(c)&&27===A||-1!==q.indexOf(A)&&-1!==q.indexOf(c)||24===A&&-1!==q.indexOf(c)||-1!==q.concat(25).indexOf(A)&&22===c&&-1===$.indexOf(t[l])||-1!==q.concat(25).indexOf(c)&&18===A)return"×";if(41===A&&41===c){for(var g=n[o],f=1;g>0;)if(41===i[--g])f++;else break;if(f%2!=0)return"×"}return 32===A&&33===c?"×":"÷"},ta=function(t,i){i||(i={lineBreak:"normal",wordBreak:"normal"});var n=tn(t,i.lineBreak),r=n[0],s=n[1],o=n[2];return("break-all"===i.wordBreak||"break-word"===i.wordBreak)&&(s=s.map(function(t){return -1!==[25,30,42].indexOf(t)?37:t})),[r,s,"keep-all"===i.wordBreak?o.map(function(i,n){return i&&t[n]>=19968&&t[n]<=40959}):void 0]},tl=function(){function t(t,i,n,r){this.codePoints=t,this.required="!"===i,this.start=n,this.end=r}return t.prototype.slice=function(){return D.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),tA=function(t,i){var n=O(t),r=ta(n,i),s=r[0],o=r[1],a=r[2],l=n.length,A=0,h=0;return{next:function(){if(h>=l)return{done:!0,value:null};for(var t="×";h<l&&"×"===(t=to(n,o,s,++h,a)););if("×"!==t||h===l){var i=new tl(n,t,A,h);return A=h,{value:i,done:!1}}return{done:!0,value:null}}}},th=function(t){return t>=48&&t<=57},tc=function(t){return th(t)||t>=65&&t<=70||t>=97&&t<=102},tu=function(t){return t>=97&&t<=122||t>=65&&t<=90},td=function(t){return 10===t||9===t||32===t},tg=function(t){return tu(t)||t>=128||95===t},tf=function(t){return tg(t)||th(t)||45===t},tp=function(t,i){return 92===t&&10!==i},tm=function(t,i,n){return 45===t?tg(i)||tp(i,n):!!(tg(t)||92===t&&tp(t,i))||!1},t_=function(t,i,n){return 43===t||45===t?!!th(i)||46===i&&th(n):46===t?th(i):th(t)},ty=function(t){var i=0,n=1;(43===t[0]||45===t[i])&&(45===t[i]&&(n=-1),i++);for(var r=[];th(t[i]);)r.push(t[i++]);var s=r.length?parseInt(D.apply(void 0,r),10):0;46===t[i]&&i++;for(var o=[];th(t[i]);)o.push(t[i++]);var a=o.length,l=a?parseInt(D.apply(void 0,o),10):0;(69===t[i]||101===t[i])&&i++;var A=1;(43===t[i]||45===t[i])&&(45===t[i]&&(A=-1),i++);for(var h=[];th(t[i]);)h.push(t[i++]);return n*(s+l*Math.pow(10,-a))*Math.pow(10,A*(h.length?parseInt(D.apply(void 0,h),10):0))},tw={type:2},tv={type:3},tb={type:4},tC={type:13},tx={type:8},tE={type:21},tB={type:9},tS={type:10},tI={type:11},tL={type:12},tF={type:14},tM={type:23},tT={type:1},tR={type:25},tO={type:24},tD={type:26},tP={type:27},tk={type:28},tN={type:29},tU={type:31},tQ={type:32},tH=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(O(t))},t.prototype.read=function(){for(var t=[],i=this.consumeToken();i!==tQ;)t.push(i),i=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var i=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tf(i)||tp(n,r)){var s=tm(i,n,r)?2:1,o=this.consumeName();return{type:5,value:o,flags:s}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),tC;break;case 39:return this.consumeStringToken(39);case 40:return tw;case 41:return tv;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),tF;break;case 43:case 46:if(t_(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return tb;case 45:var a=this.peekCodePoint(0),l=this.peekCodePoint(1);if(t_(t,a,l))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(tm(t,a,l))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(45===a&&62===l)return this.consumeCodePoint(),this.consumeCodePoint(),tO;break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(42===A&&47===(A=this.consumeCodePoint())||-1===A)return this.consumeToken()}break;case 58:return tD;case 59:return tP;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),tR;break;case 64:if(tm(this.peekCodePoint(0),this.peekCodePoint(1),this.peekCodePoint(2))){var o=this.consumeName();return{type:7,value:o}}break;case 91:return tk;case 92:if(tp(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return tN;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),tx;break;case 123:return tI;case 125:return tL;case 117:case 85:var h=this.peekCodePoint(0),c=this.peekCodePoint(1);return 43===h&&(tc(c)||63===c)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),tB;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),tE;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),tS;break;case -1:return tQ}return td(t)?(this.consumeWhiteSpace(),tU):th(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):tg(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:D(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],i=this.consumeCodePoint();tc(i)&&t.length<6;)t.push(i),i=this.consumeCodePoint();for(var n=!1;63===i&&t.length<6;)t.push(i),i=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(D.apply(void 0,t.map(function(t){return 63===t?48:t})),16),s=parseInt(D.apply(void 0,t.map(function(t){return 63===t?70:t})),16);return{type:30,start:r,end:s}}var o=parseInt(D.apply(void 0,t),16);if(!(45===this.peekCodePoint(0)&&tc(this.peekCodePoint(1))))return{type:30,start:o,end:o};this.consumeCodePoint(),i=this.consumeCodePoint();for(var a=[];tc(i)&&a.length<6;)a.push(i),i=this.consumeCodePoint();var s=parseInt(D.apply(void 0,a),16);return{type:30,start:o,end:s}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var i=this.peekCodePoint(0);if(39===i||34===i){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tM)}for(;;){var r,s=this.consumeCodePoint();if(-1===s||41===s)return{type:22,value:D.apply(void 0,t)};if(td(s)){if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))return this.consumeCodePoint(),{type:22,value:D.apply(void 0,t)};return this.consumeBadUrlRemnants(),tM}if(34===s||39===s||40===s||(r=s)>=0&&r<=8||11===r||r>=14&&r<=31||127===r)return this.consumeBadUrlRemnants(),tM;if(92===s)if(!tp(s,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),tM;else t.push(this.consumeEscapedCodePoint());else t.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;td(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||-1===t)return;tp(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var i="";t>0;){var n=Math.min(5e4,t);i+=D.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),i},t.prototype.consumeStringToken=function(t){for(var i="",n=0;;){var r=this._value[n];if(-1===r||void 0===r||r===t)return{type:0,value:i+=this.consumeStringSlice(n)};if(10===r)return this._value.splice(0,n),tT;if(92===r){var s=this._value[n+1];-1!==s&&void 0!==s&&(10===s?(i+=this.consumeStringSlice(n),n=-1,this._value.shift()):tp(r,s)&&(i+=this.consumeStringSlice(n),i+=D(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],i=4,n=this.peekCodePoint(0);for((43===n||45===n)&&t.push(this.consumeCodePoint());th(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&th(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=8;th(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((69===n||101===n)&&((43===r||45===r)&&th(s)||th(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),i=8;th(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[ty(t),i]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),i=t[0],n=t[1],r=this.peekCodePoint(0);return tm(r,this.peekCodePoint(1),this.peekCodePoint(2))?{type:15,number:i,flags:n,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:i,flags:n}):{type:17,number:i,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(tc(t)){for(var i=D(t);tc(this.peekCodePoint(0))&&i.length<6;)i+=D(this.consumeCodePoint());td(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(i,16);return 0===n||n>=55296&&n<=57343||n>1114111?65533:n}return -1===t?65533:t},t.prototype.consumeName=function(){for(var t="";;){var i=this.consumeCodePoint();if(tf(i))t+=D(i);else{if(!tp(i,this.peekCodePoint(0)))return this.reconsumeCodePoint(i),t;t+=D(this.consumeEscapedCodePoint())}}},t}(),tG=function(){function t(t){this._tokens=t}return t.create=function(i){var n=new tH;return n.write(i),new t(n.read())},t.parseValue=function(i){return t.create(i).parseComponentValue()},t.parseValues=function(i){return t.create(i).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var i=this.consumeComponentValue();do t=this.consumeToken();while(31===t.type)if(32===t.type)return i;throw SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var i=this.consumeComponentValue();if(32===i.type)return t;t.push(i),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var i={type:t,values:[]},n=this.consumeToken();;){if(32===n.type||tX(n,t))return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var i={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return i;this.reconsumeToken(n),i.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?tQ:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),tV=function(t){return 15===t.type},tz=function(t){return 17===t.type},tK=function(t){return 20===t.type},tj=function(t){return 0===t.type},tW=function(t,i){return tK(t)&&t.value===i},t$=function(t){return 31!==t.type},tY=function(t){return 31!==t.type&&4!==t.type},tq=function(t){var i=[],n=[];return t.forEach(function(t){if(4===t.type){if(0===n.length)throw Error("Error parsing function args, zero tokens for arg");i.push(n),n=[];return}31!==t.type&&n.push(t)}),n.length&&i.push(n),i},tX=function(t,i){return 11===i&&12===t.type||28===i&&29===t.type||2===i&&3===t.type},tZ=function(t){return 17===t.type||15===t.type},tJ=function(t){return 16===t.type||tZ(t)},t0=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},t1={type:17,number:0,flags:4},t2={type:16,number:50,flags:4},t5={type:16,number:100,flags:4},t4=function(t,i,n){var r=t[0],s=t[1];return[t3(r,i),t3(void 0!==s?s:r,n)]},t3=function(t,i){if(16===t.type)return t.number/100*i;if(tV(t))switch(t.unit){case"rem":case"em":return 16*t.number}return t.number},t6="grad",t8="turn",t7={parse:function(t,i){if(15===i.type)switch(i.unit){case"deg":return Math.PI*i.number/180;case t6:return Math.PI/200*i.number;case"rad":return i.number;case t8:return 2*Math.PI*i.number}throw Error("Unsupported angle type")}},t9=function(t){return 15===t.type&&("deg"===t.unit||t.unit===t6||"rad"===t.unit||t.unit===t8)},et=function(t){switch(t.filter(tK).map(function(t){return t.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[t1,t1];case"to top":case"bottom":return ee(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[t1,t5];case"to right":case"left":return ee(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[t5,t5];case"to bottom":case"top":return ee(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[t5,t1];case"to left":case"right":return ee(270)}return 0},ee=function(t){return Math.PI*t/180},ei={parse:function(t,i){if(18===i.type){var n=eh[i.name];if(void 0===n)throw Error('Attempting to parse an unsupported color function "'+i.name+'"');return n(t,i.values)}if(5===i.type){if(3===i.value.length){var r=i.value.substring(0,1),s=i.value.substring(1,2),o=i.value.substring(2,3);return es(parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16),1)}if(4===i.value.length){var r=i.value.substring(0,1),s=i.value.substring(1,2),o=i.value.substring(2,3),a=i.value.substring(3,4);return es(parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16),parseInt(a+a,16)/255)}if(6===i.value.length){var r=i.value.substring(0,2),s=i.value.substring(2,4),o=i.value.substring(4,6);return es(parseInt(r,16),parseInt(s,16),parseInt(o,16),1)}if(8===i.value.length){var r=i.value.substring(0,2),s=i.value.substring(2,4),o=i.value.substring(4,6),a=i.value.substring(6,8);return es(parseInt(r,16),parseInt(s,16),parseInt(o,16),parseInt(a,16)/255)}}if(20===i.type){var l=eu[i.value.toUpperCase()];if(void 0!==l)return l}return eu.TRANSPARENT}},en=function(t){return(255&t)==0},er=function(t){var i=255&t,n=255&t>>8,r=255&t>>16,s=255&t>>24;return i<255?"rgba("+s+","+r+","+n+","+i/255+")":"rgb("+s+","+r+","+n+")"},es=function(t,i,n,r){return(t<<24|i<<16|n<<8|(0|Math.round(255*r)))>>>0},eo=function(t,i){if(17===t.type)return t.number;if(16===t.type){var n=3===i?1:255;return 3===i?t.number/100*n:Math.round(t.number/100*n)}return 0},ea=function(t,i){var n=i.filter(tY);if(3===n.length){var r=n.map(eo),s=r[0],o=r[1],a=r[2];return es(s,o,a,1)}if(4===n.length){var l=n.map(eo),s=l[0],o=l[1],a=l[2];return es(s,o,a,l[3])}return 0};function el(t,i,n){return(n<0&&(n+=1),n>=1&&(n-=1),n<1/6)?(i-t)*n*6+t:n<.5?i:n<2/3?(i-t)*6*(2/3-n)+t:t}var eA=function(t,i){var n=i.filter(tY),r=n[0],s=n[1],o=n[2],a=n[3],l=(17===r.type?ee(r.number):t7.parse(t,r))/(2*Math.PI),A=tJ(s)?s.number/100:0,h=tJ(o)?o.number/100:0,c=void 0!==a&&tJ(a)?t3(a,1):1;if(0===A)return es(255*h,255*h,255*h,1);var u=h<=.5?h*(A+1):h+A-h*A,d=2*h-u;return es(255*el(d,u,l+1/3),255*el(d,u,l),255*el(d,u,l-1/3),c)},eh={hsl:eA,hsla:eA,rgb:ea,rgba:ea},ec=function(t,i){return ei.parse(t,tG.create(i).parseComponentValue())},eu={ALICEBLUE:0xf0f8ffff,ANTIQUEWHITE:0xfaebd7ff,AQUA:0xffffff,AQUAMARINE:0x7fffd4ff,AZURE:0xf0ffffff,BEIGE:0xf5f5dcff,BISQUE:0xffe4c4ff,BLACK:255,BLANCHEDALMOND:0xffebcdff,BLUE:65535,BLUEVIOLET:0x8a2be2ff,BROWN:0xa52a2aff,BURLYWOOD:0xdeb887ff,CADETBLUE:0x5f9ea0ff,CHARTREUSE:0x7fff00ff,CHOCOLATE:0xd2691eff,CORAL:0xff7f50ff,CORNFLOWERBLUE:0x6495edff,CORNSILK:0xfff8dcff,CRIMSON:0xdc143cff,CYAN:0xffffff,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:0xb886bbff,DARKGRAY:0xa9a9a9ff,DARKGREEN:6553855,DARKGREY:0xa9a9a9ff,DARKKHAKI:0xbdb76bff,DARKMAGENTA:0x8b008bff,DARKOLIVEGREEN:0x556b2fff,DARKORANGE:0xff8c00ff,DARKORCHID:0x9932ccff,DARKRED:0x8b0000ff,DARKSALMON:0xe9967aff,DARKSEAGREEN:0x8fbc8fff,DARKSLATEBLUE:0x483d8bff,DARKSLATEGRAY:0x2f4f4fff,DARKSLATEGREY:0x2f4f4fff,DARKTURQUOISE:0xced1ff,DARKVIOLET:0x9400d3ff,DEEPPINK:0xff1493ff,DEEPSKYBLUE:0xbfffff,DIMGRAY:0x696969ff,DIMGREY:0x696969ff,DODGERBLUE:0x1e90ffff,FIREBRICK:0xb22222ff,FLORALWHITE:0xfffaf0ff,FORESTGREEN:0x228b22ff,FUCHSIA:0xff00ffff,GAINSBORO:0xdcdcdcff,GHOSTWHITE:0xf8f8ffff,GOLD:0xffd700ff,GOLDENROD:0xdaa520ff,GRAY:0x808080ff,GREEN:8388863,GREENYELLOW:0xadff2fff,GREY:0x808080ff,HONEYDEW:0xf0fff0ff,HOTPINK:0xff69b4ff,INDIANRED:0xcd5c5cff,INDIGO:0x4b0082ff,IVORY:0xfffff0ff,KHAKI:0xf0e68cff,LAVENDER:0xe6e6faff,LAVENDERBLUSH:0xfff0f5ff,LAWNGREEN:0x7cfc00ff,LEMONCHIFFON:0xfffacdff,LIGHTBLUE:0xadd8e6ff,LIGHTCORAL:0xf08080ff,LIGHTCYAN:0xe0ffffff,LIGHTGOLDENRODYELLOW:0xfafad2ff,LIGHTGRAY:0xd3d3d3ff,LIGHTGREEN:0x90ee90ff,LIGHTGREY:0xd3d3d3ff,LIGHTPINK:0xffb6c1ff,LIGHTSALMON:0xffa07aff,LIGHTSEAGREEN:0x20b2aaff,LIGHTSKYBLUE:0x87cefaff,LIGHTSLATEGRAY:0x778899ff,LIGHTSLATEGREY:0x778899ff,LIGHTSTEELBLUE:0xb0c4deff,LIGHTYELLOW:0xffffe0ff,LIME:0xff00ff,LIMEGREEN:0x32cd32ff,LINEN:0xfaf0e6ff,MAGENTA:0xff00ffff,MAROON:0x800000ff,MEDIUMAQUAMARINE:0x66cdaaff,MEDIUMBLUE:52735,MEDIUMORCHID:0xba55d3ff,MEDIUMPURPLE:0x9370dbff,MEDIUMSEAGREEN:0x3cb371ff,MEDIUMSLATEBLUE:0x7b68eeff,MEDIUMSPRINGGREEN:0xfa9aff,MEDIUMTURQUOISE:0x48d1ccff,MEDIUMVIOLETRED:0xc71585ff,MIDNIGHTBLUE:0x191970ff,MINTCREAM:0xf5fffaff,MISTYROSE:0xffe4e1ff,MOCCASIN:0xffe4b5ff,NAVAJOWHITE:0xffdeadff,NAVY:33023,OLDLACE:0xfdf5e6ff,OLIVE:0x808000ff,OLIVEDRAB:0x6b8e23ff,ORANGE:0xffa500ff,ORANGERED:0xff4500ff,ORCHID:0xda70d6ff,PALEGOLDENROD:0xeee8aaff,PALEGREEN:0x98fb98ff,PALETURQUOISE:0xafeeeeff,PALEVIOLETRED:0xdb7093ff,PAPAYAWHIP:0xffefd5ff,PEACHPUFF:0xffdab9ff,PERU:0xcd853fff,PINK:0xffc0cbff,PLUM:0xdda0ddff,POWDERBLUE:0xb0e0e6ff,PURPLE:0x800080ff,REBECCAPURPLE:0x663399ff,RED:0xff0000ff,ROSYBROWN:0xbc8f8fff,ROYALBLUE:0x4169e1ff,SADDLEBROWN:0x8b4513ff,SALMON:0xfa8072ff,SANDYBROWN:0xf4a460ff,SEAGREEN:0x2e8b57ff,SEASHELL:0xfff5eeff,SIENNA:0xa0522dff,SILVER:0xc0c0c0ff,SKYBLUE:0x87ceebff,SLATEBLUE:0x6a5acdff,SLATEGRAY:0x708090ff,SLATEGREY:0x708090ff,SNOW:0xfffafaff,SPRINGGREEN:0xff7fff,STEELBLUE:0x4682b4ff,TAN:0xd2b48cff,TEAL:8421631,THISTLE:0xd8bfd8ff,TOMATO:0xff6347ff,TRANSPARENT:0,TURQUOISE:0x40e0d0ff,VIOLET:0xee82eeff,WHEAT:0xf5deb3ff,WHITE:0xffffffff,WHITESMOKE:0xf5f5f5ff,YELLOW:0xffff00ff,YELLOWGREEN:0x9acd32ff},ed={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,i){return i.map(function(t){if(tK(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},eg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ef=function(t,i){var n=ei.parse(t,i[0]),r=i[1];return r&&tJ(r)?{color:n,stop:r}:{color:n,stop:null}},ep=function(t,i){var n=t[0],r=t[t.length-1];null===n.stop&&(n.stop=t1),null===r.stop&&(r.stop=t5);for(var s=[],o=0,a=0;a<t.length;a++){var l=t[a].stop;if(null!==l){var A=t3(l,i);A>o?s.push(A):s.push(o),o=A}else s.push(null)}for(var h=null,a=0;a<s.length;a++){var c=s[a];if(null===c)null===h&&(h=a);else if(null!==h){for(var u=a-h,d=(c-s[h-1])/(u+1),g=1;g<=u;g++)s[h+g-1]=d*g;h=null}}return t.map(function(t,n){return{color:t.color,stop:Math.max(Math.min(1,s[n]/i),0)}})},em=function(t,i,n){var r=i/2,s=n/2,o=t3(t[0],i)-r;return(Math.atan2(s-t3(t[1],n),o)+2*Math.PI)%(2*Math.PI)},e_=function(t,i,n){var r="number"==typeof t?t:em(t,i,n),s=Math.abs(i*Math.sin(r))+Math.abs(n*Math.cos(r)),o=i/2,a=n/2,l=s/2,A=Math.sin(r-Math.PI/2)*l,h=Math.cos(r-Math.PI/2)*l;return[s,o-h,o+h,a-A,a+A]},ey=function(t,i){return Math.sqrt(t*t+i*i)},ew=function(t,i,n,r,s){return[[0,0],[0,i],[t,0],[t,i]].reduce(function(t,i){var o=ey(n-i[0],r-i[1]);return(s?o<t.optimumDistance:o>t.optimumDistance)?{optimumCorner:i,optimumDistance:o}:t},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},ev=function(t,i,n,r,s){var o=0,a=0;switch(t.size){case 0:0===t.shape?o=a=Math.min(Math.abs(i),Math.abs(i-r),Math.abs(n),Math.abs(n-s)):1===t.shape&&(o=Math.min(Math.abs(i),Math.abs(i-r)),a=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(0===t.shape)o=a=Math.min(ey(i,n),ey(i,n-s),ey(i-r,n),ey(i-r,n-s));else if(1===t.shape){var l=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(i),Math.abs(i-r)),A=ew(r,s,i,n,!0),h=A[0],c=A[1];o=ey(h-i,(c-n)/l),a=l*o}break;case 1:0===t.shape?o=a=Math.max(Math.abs(i),Math.abs(i-r),Math.abs(n),Math.abs(n-s)):1===t.shape&&(o=Math.max(Math.abs(i),Math.abs(i-r)),a=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(0===t.shape)o=a=Math.max(ey(i,n),ey(i,n-s),ey(i-r,n),ey(i-r,n-s));else if(1===t.shape){var l=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(i),Math.abs(i-r)),u=ew(r,s,i,n,!1),h=u[0],c=u[1];o=ey(h-i,(c-n)/l),a=l*o}}return Array.isArray(t.size)&&(o=t3(t.size[0],r),a=2===t.size.length?t3(t.size[1],s):o),[o,a]},eb=function(t,i){var n=ee(180),r=[];return tq(i).forEach(function(i,s){if(0===s){var o=i[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value)){n=et(i);return}if(t9(o)){n=(t7.parse(t,o)+ee(270))%ee(360);return}}var a=ef(t,i);r.push(a)}),{angle:n,stops:r,type:1}},eC="closest-side",ex="farthest-side",eE="closest-corner",eB="farthest-corner",eS="circle",eI="ellipse",eL="cover",eF="contain",eM=function(t,i){var n=0,r=3,s=[],o=[];return tq(i).forEach(function(i,a){var l=!0;if(0===a?l=i.reduce(function(t,i){if(tK(i))switch(i.value){case"center":return o.push(t2),!1;case"top":case"left":return o.push(t1),!1;case"right":case"bottom":return o.push(t5),!1}else if(tJ(i)||tZ(i))return o.push(i),!1;return t},l):1===a&&(l=i.reduce(function(t,i){if(tK(i))switch(i.value){case eS:return n=0,!1;case eI:return n=1,!1;case eF:case eC:return r=0,!1;case ex:return r=1,!1;case eE:return r=2,!1;case eL:case eB:return r=3,!1}else if(tZ(i)||tJ(i))return Array.isArray(r)||(r=[]),r.push(i),!1;return t},l)),l){var A=ef(t,i);s.push(A)}}),{size:r,shape:n,stops:s,position:o,type:2}},eT={parse:function(t,i){if(22===i.type){var n={url:i.value,type:0};return t.cache.addImage(i.value),n}if(18===i.type){var r=eR[i.name];if(void 0===r)throw Error('Attempting to parse an unsupported image function "'+i.name+'"');return r(t,i.values)}throw Error("Unsupported image type "+i.type)}},eR={"linear-gradient":function(t,i){var n=ee(180),r=[];return tq(i).forEach(function(i,s){if(0===s){var o=i[0];if(20===o.type&&"to"===o.value){n=et(i);return}if(t9(o)){n=t7.parse(t,o);return}}var a=ef(t,i);r.push(a)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":eb,"-ms-linear-gradient":eb,"-o-linear-gradient":eb,"-webkit-linear-gradient":eb,"radial-gradient":function(t,i){var n=0,r=3,s=[],o=[];return tq(i).forEach(function(i,a){var l=!0;if(0===a){var A=!1;l=i.reduce(function(t,i){if(A)if(tK(i))switch(i.value){case"center":o.push(t2);break;case"top":case"left":o.push(t1);break;case"right":case"bottom":o.push(t5)}else(tJ(i)||tZ(i))&&o.push(i);else if(tK(i))switch(i.value){case eS:return n=0,!1;case eI:return n=1,!1;case"at":return A=!0,!1;case eC:return r=0,!1;case eL:case ex:return r=1,!1;case eF:case eE:return r=2,!1;case eB:return r=3,!1}else if(tZ(i)||tJ(i))return Array.isArray(r)||(r=[]),r.push(i),!1;return t},l)}if(l){var h=ef(t,i);s.push(h)}}),{size:r,shape:n,stops:s,position:o,type:2}},"-moz-radial-gradient":eM,"-ms-radial-gradient":eM,"-o-radial-gradient":eM,"-webkit-radial-gradient":eM,"-webkit-gradient":function(t,i){var n=ee(180),r=[],s=1;return tq(i).forEach(function(i,n){var o=i[0];if(0===n){if(tK(o)&&"linear"===o.value){s=1;return}else if(tK(o)&&"radial"===o.value){s=2;return}}if(18===o.type){if("from"===o.name){var a=ei.parse(t,o.values[0]);r.push({stop:t1,color:a})}else if("to"===o.name){var a=ei.parse(t,o.values[0]);r.push({stop:t5,color:a})}else if("color-stop"===o.name){var l=o.values.filter(tY);if(2===l.length){var a=ei.parse(t,l[1]),A=l[0];tz(A)&&r.push({stop:{type:16,number:100*A.number,flags:A.flags},color:a})}}}}),1===s?{angle:(n+ee(180))%ee(360),stops:r,type:s}:{size:3,shape:0,stops:r,position:[],type:s}}},eO={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,i){if(0===i.length)return[];var n=i[0];return 20===n.type&&"none"===n.value?[]:i.filter(function(t){var i;return tY(t)&&(20!==(i=t).type||"none"!==i.value)&&(18!==i.type||!!eR[i.name])}).map(function(i){return eT.parse(t,i)})}},eD={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,i){return i.map(function(t){if(tK(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},eP={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,i){return tq(i).map(function(t){return t.filter(tJ)}).map(t0)}},ek={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,i){return tq(i).map(function(t){return t.filter(tK).map(function(t){return t.value}).join(" ")}).map(eN)}},eN=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(l=w||(w={})).AUTO="auto",l.CONTAIN="contain",l.COVER="cover";var eU={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,i){return tq(i).map(function(t){return t.filter(eQ)})}},eQ=function(t){return tK(t)||tJ(t)},eH=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},eG=eH("top"),eV=eH("right"),ez=eH("bottom"),eK=eH("left"),ej=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,i){return t0(i.filter(tJ))}}},eW=ej("top-left"),e$=ej("top-right"),eY=ej("bottom-right"),eq=ej("bottom-left"),eX=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},eZ=eX("top"),eJ=eX("right"),e0=eX("bottom"),e1=eX("left"),e2=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,i){return tV(i)?i.number:0}}},e5=e2("top"),e4=e2("right"),e3=e2("bottom"),e6=e2("left"),e8={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},e7={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,i){return+("rtl"===i)}},e9={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,i){return i.filter(tK).reduce(function(t,i){return t|it(i.value)},0)}},it=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 0x1000000;case"inline-block":return 0x2000000;case"inline-list-item":return 0x4000000;case"inline-table":return 0x8000000;case"inline-flex":return 0x10000000;case"inline-grid":return 0x20000000}return 0},ie={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,i){switch(i){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ii={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,i){return 20===i.type&&"normal"===i.value?0:17===i.type||15===i.type?i.number:0}};(A=v||(v={})).NORMAL="normal",A.STRICT="strict";var ir={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,i){return"strict"===i?v.STRICT:v.NORMAL}},is={name:"line-height",initialValue:"normal",prefix:!1,type:4},io=function(t,i){return tK(t)&&"normal"===t.value?1.2*i:17===t.type?i*t.number:tJ(t)?t3(t,i):i},ia={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,i){return 20===i.type&&"none"===i.value?null:eT.parse(t,i)}},il={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,i){return+("inside"!==i)}},iA={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,i){switch(i){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return -1}}},ih=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},ic=ih("top"),iu=ih("right"),id=ih("bottom"),ig=ih("left"),ip={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,i){return i.filter(tK).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},im={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,i){return"break-word"===i?"break-word":"normal"}},i_=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},iy=i_("top"),iw=i_("right"),iv=i_("bottom"),ib=i_("left"),iC={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,i){switch(i){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},ix={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,i){switch(i){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},iE={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,i){return 1===i.length&&tW(i[0],"none")?[]:tq(i).map(function(i){for(var n={color:eu.TRANSPARENT,offsetX:t1,offsetY:t1,blur:t1},r=0,s=0;s<i.length;s++){var o=i[s];tZ(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:n.blur=o,r++):n.color=ei.parse(t,o)}return n})}},iB={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,i){switch(i){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},iS={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,i){if(20===i.type&&"none"===i.value)return null;if(18===i.type){var n=iI[i.name];if(void 0===n)throw Error('Attempting to parse an unsupported transform function "'+i.name+'"');return n(i.values)}return null}},iI={matrix:function(t){var i=t.filter(function(t){return 17===t.type}).map(function(t){return t.number});return 6===i.length?i:null},matrix3d:function(t){var i=t.filter(function(t){return 17===t.type}).map(function(t){return t.number}),n=i[0],r=i[1];i[2],i[3];var s=i[4],o=i[5];i[6],i[7],i[8],i[9],i[10],i[11];var a=i[12],l=i[13];return i[14],i[15],16===i.length?[n,r,s,o,a,l]:null}},iL={type:16,number:50,flags:4},iF=[iL,iL],iM={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,i){var n=i.filter(tJ);return 2!==n.length?iF:[n[0],n[1]]}},iT={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,i){switch(i){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(h=b||(b={})).NORMAL="normal",h.BREAK_ALL="break-all",h.KEEP_ALL="keep-all";for(var iR={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,i){switch(i){case"break-all":return b.BREAK_ALL;case"keep-all":return b.KEEP_ALL;default:return b.NORMAL}}},iO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,i){if(20===i.type)return{auto:!0,order:0};if(tz(i))return{auto:!1,order:i.number};throw Error("Invalid z-index number parsed")}},iD={parse:function(t,i){if(15===i.type)switch(i.unit.toLowerCase()){case"s":return 1e3*i.number;case"ms":return i.number}throw Error("Unsupported time type")}},iP={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,i){return tz(i)?i.number:1}},ik={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},iN={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,i){return i.filter(tK).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return 0!==t})}},iU={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,i){var n=[],r=[];return i.forEach(function(t){switch(t.type){case 20:case 0:n.push(t.value);break;case 17:n.push(t.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(t){return -1===t.indexOf(" ")?t:"'"+t+"'"})}},iQ={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},iH={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,i){return tz(i)?i.number:tK(i)&&"bold"===i.value?700:400}},iG={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,i){return i.filter(tK).map(function(t){return t.value})}},iV={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,i){switch(i){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},iz=function(t,i){return(t&i)!=0},iK={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,i){if(0===i.length)return[];var n=i[0];return 20===n.type&&"none"===n.value?[]:i}},ij={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,i){if(0===i.length)return null;var n=i[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],s=i.filter(t$),o=0;o<s.length;o++){var a=s[o],l=s[o+1];if(20===a.type){var A=l&&tz(l)?l.number:1;r.push({counter:a.value,increment:A})}}return r}},iW={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,i){if(0===i.length)return[];for(var n=[],r=i.filter(t$),s=0;s<r.length;s++){var o=r[s],a=r[s+1];if(tK(o)&&"none"!==o.value){var l=a&&tz(a)?a.number:0;n.push({counter:o.value,reset:l})}}return n}},i$={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,i){return i.filter(tV).map(function(i){return iD.parse(t,i)})}},iY={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,i){if(0===i.length)return null;var n=i[0];if(20===n.type&&"none"===n.value)return null;var r=[],s=i.filter(tj);if(s.length%2!=0)return null;for(var o=0;o<s.length;o+=2){var a=s[o].value,l=s[o+1].value;r.push({open:a,close:l})}return r}},iq=function(t,i,n){if(!t)return"";var r=t[Math.min(i,t.length-1)];return r?n?r.open:r.close:""},iX={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,i){return 1===i.length&&tW(i[0],"none")?[]:tq(i).map(function(i){for(var n={color:255,offsetX:t1,offsetY:t1,blur:t1,spread:t1,inset:!1},r=0,s=0;s<i.length;s++){var o=i[s];tW(o,"inset")?n.inset=!0:tZ(o)?(0===r?n.offsetX=o:1===r?n.offsetY=o:2===r?n.blur=o:n.spread=o,r++):n.color=ei.parse(t,o)}return n})}},iZ={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,i){var n=[];return i.filter(tK).forEach(function(t){switch(t.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}}),[0,1,2].forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),n}},iJ={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},i0={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,i){return tV(i)?i.number:0}},i1=function(){function t(t,i){this.animationDuration=i4(t,i$,i.animationDuration),this.backgroundClip=i4(t,ed,i.backgroundClip),this.backgroundColor=i4(t,eg,i.backgroundColor),this.backgroundImage=i4(t,eO,i.backgroundImage),this.backgroundOrigin=i4(t,eD,i.backgroundOrigin),this.backgroundPosition=i4(t,eP,i.backgroundPosition),this.backgroundRepeat=i4(t,ek,i.backgroundRepeat),this.backgroundSize=i4(t,eU,i.backgroundSize),this.borderTopColor=i4(t,eG,i.borderTopColor),this.borderRightColor=i4(t,eV,i.borderRightColor),this.borderBottomColor=i4(t,ez,i.borderBottomColor),this.borderLeftColor=i4(t,eK,i.borderLeftColor),this.borderTopLeftRadius=i4(t,eW,i.borderTopLeftRadius),this.borderTopRightRadius=i4(t,e$,i.borderTopRightRadius),this.borderBottomRightRadius=i4(t,eY,i.borderBottomRightRadius),this.borderBottomLeftRadius=i4(t,eq,i.borderBottomLeftRadius),this.borderTopStyle=i4(t,eZ,i.borderTopStyle),this.borderRightStyle=i4(t,eJ,i.borderRightStyle),this.borderBottomStyle=i4(t,e0,i.borderBottomStyle),this.borderLeftStyle=i4(t,e1,i.borderLeftStyle),this.borderTopWidth=i4(t,e5,i.borderTopWidth),this.borderRightWidth=i4(t,e4,i.borderRightWidth),this.borderBottomWidth=i4(t,e3,i.borderBottomWidth),this.borderLeftWidth=i4(t,e6,i.borderLeftWidth),this.boxShadow=i4(t,iX,i.boxShadow),this.color=i4(t,e8,i.color),this.direction=i4(t,e7,i.direction),this.display=i4(t,e9,i.display),this.float=i4(t,ie,i.cssFloat),this.fontFamily=i4(t,iU,i.fontFamily),this.fontSize=i4(t,iQ,i.fontSize),this.fontStyle=i4(t,iV,i.fontStyle),this.fontVariant=i4(t,iG,i.fontVariant),this.fontWeight=i4(t,iH,i.fontWeight),this.letterSpacing=i4(t,ii,i.letterSpacing),this.lineBreak=i4(t,ir,i.lineBreak),this.lineHeight=i4(t,is,i.lineHeight),this.listStyleImage=i4(t,ia,i.listStyleImage),this.listStylePosition=i4(t,il,i.listStylePosition),this.listStyleType=i4(t,iA,i.listStyleType),this.marginTop=i4(t,ic,i.marginTop),this.marginRight=i4(t,iu,i.marginRight),this.marginBottom=i4(t,id,i.marginBottom),this.marginLeft=i4(t,ig,i.marginLeft),this.opacity=i4(t,iP,i.opacity);var n,r,s=i4(t,ip,i.overflow);this.overflowX=s[0],this.overflowY=s[+(s.length>1)],this.overflowWrap=i4(t,im,i.overflowWrap),this.paddingTop=i4(t,iy,i.paddingTop),this.paddingRight=i4(t,iw,i.paddingRight),this.paddingBottom=i4(t,iv,i.paddingBottom),this.paddingLeft=i4(t,ib,i.paddingLeft),this.paintOrder=i4(t,iZ,i.paintOrder),this.position=i4(t,ix,i.position),this.textAlign=i4(t,iC,i.textAlign),this.textDecorationColor=i4(t,ik,null!=(n=i.textDecorationColor)?n:i.color),this.textDecorationLine=i4(t,iN,null!=(r=i.textDecorationLine)?r:i.textDecoration),this.textShadow=i4(t,iE,i.textShadow),this.textTransform=i4(t,iB,i.textTransform),this.transform=i4(t,iS,i.transform),this.transformOrigin=i4(t,iM,i.transformOrigin),this.visibility=i4(t,iT,i.visibility),this.webkitTextStrokeColor=i4(t,iJ,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=i4(t,i0,i.webkitTextStrokeWidth),this.wordBreak=i4(t,iR,i.wordBreak),this.zIndex=i4(t,iO,i.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return en(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return iz(this.display,4)||iz(this.display,0x2000000)||iz(this.display,0x10000000)||iz(this.display,0x20000000)||iz(this.display,0x4000000)||iz(this.display,0x8000000)},t}(),i2=function(t,i){this.content=i4(t,iK,i.content),this.quotes=i4(t,iY,i.quotes)},i5=function(t,i){this.counterIncrement=i4(t,ij,i.counterIncrement),this.counterReset=i4(t,iW,i.counterReset)},i4=function(t,i,n){var r=new tH,s=null!=n?n.toString():i.initialValue;r.write(s);var o=new tG(r.read());switch(i.type){case 2:var a=o.parseComponentValue();return i.parse(t,tK(a)?a.value:i.initialValue);case 0:return i.parse(t,o.parseComponentValue());case 1:return i.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(i.format){case"angle":return t7.parse(t,o.parseComponentValue());case"color":return ei.parse(t,o.parseComponentValue());case"image":return eT.parse(t,o.parseComponentValue());case"length":var l=o.parseComponentValue();return tZ(l)?l:t1;case"length-percentage":var A=o.parseComponentValue();return tJ(A)?A:t1;case"time":return iD.parse(t,o.parseComponentValue())}}},i3=function(t){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},i6=function(t,i){var n=i3(t);return 1===n||i===n},i8=function(t,i){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,i6(i,3),this.styles=new i1(t,window.getComputedStyle(i,null)),re(i)&&(this.styles.animationDuration.some(function(t){return t>0})&&(i.style.animationDuration="0s"),null!==this.styles.transform&&(i.style.transform="none")),this.bounds=T(this.context,i),i6(i,4)&&(this.flags|=16)},i7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i9="undefined"==typeof Uint8Array?[]:new Uint8Array(256),nt=0;nt<i7.length;nt++)i9[i7.charCodeAt(nt)]=nt;for(var ne=2112,ni=function(t,i,n){return t.slice?t.slice(i,n):new Uint16Array(Array.prototype.slice.call(t,i,n))},nn=function(){function t(t,i,n,r,s,o){this.initialValue=t,this.errorValue=i,this.highStart=n,this.highValueIndex=r,this.index=s,this.data=o}return t.prototype.get=function(t){var i;if(t>=0){if(t<55296||t>56319&&t<=65535)return i=((i=this.index[t>>5])<<2)+(31&t),this.data[i];if(t<=65535)return i=((i=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[i];if(t<this.highStart)return i=ne-32+(t>>11),i=this.index[i]+(t>>5&63),i=((i=this.index[i])<<2)+(31&t),this.data[i];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ns="undefined"==typeof Uint8Array?[]:new Uint8Array(256),no=0;no<nr.length;no++)ns[nr.charCodeAt(no)]=no;var na=function(t){for(var i=[],n=0,r=t.length;n<r;){var s=t.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var o=t.charCodeAt(n++);(64512&o)==56320?i.push(((1023&s)<<10)+(1023&o)+65536):(i.push(s),n--)}else i.push(s)}return i},nl=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],s=-1,o="";++s<n;){var a=t[s];a<=65535?r.push(a):(a-=65536,r.push((a>>10)+55296,a%1024+56320)),(s+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},nA=(u=Array.isArray(c=function(t){var i,n,r,s,o,a=.75*t.length,l=t.length,A=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):Array(a),c=Array.isArray(h)?h:new Uint8Array(h);for(i=0;i<l;i+=4)n=i9[t.charCodeAt(i)],r=i9[t.charCodeAt(i+1)],s=i9[t.charCodeAt(i+2)],o=i9[t.charCodeAt(i+3)],c[A++]=n<<2|r>>4,c[A++]=(15&r)<<4|s>>2,c[A++]=(3&s)<<6|63&o;return h}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="))?function(t){for(var i=t.length,n=[],r=0;r<i;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(c):new Uint32Array(c),g=ni(d=Array.isArray(c)?function(t){for(var i=t.length,n=[],r=0;r<i;r+=2)n.push(t[r+1]<<8|t[r]);return n}(c):new Uint16Array(c),12,u[4]/2),m=2===u[5]?ni(d,(24+u[4])/2):(f=Math.ceil((24+u[4])/4),u.slice?u.slice(f,void 0):new Uint32Array(Array.prototype.slice.call(u,f,p))),new nn(u[0],u[1],u[2],u[3],g,m)),nh=function(t){return nA.get(t)},nc=function(t,i,n){var r=n-2,s=i[r],o=i[n-1],a=i[n];if(2===o&&3===a)return"×";if(2===o||3===o||4===o||2===a||3===a||4===a)return"÷";if(8===o&&-1!==[8,9,11,12].indexOf(a)||(11===o||9===o)&&(9===a||10===a)||(12===o||10===o)&&10===a||13===a||5===a||7===a||1===o)return"×";if(13===o&&14===a){for(;5===s;)s=i[--r];if(14===s)return"×"}if(15===o&&15===a){for(var l=0;15===s;)l++,s=i[--r];if(l%2==0)return"×"}return"÷"},nu=function(t){var i=na(t),n=i.length,r=0,s=0,o=i.map(nh);return{next:function(){if(r>=n)return{done:!0,value:null};for(var t="×";r<n&&"×"===(t=nc(i,o,++r)););if("×"!==t||r===n){var a=nl.apply(null,i.slice(s,r));return s=r,{value:a,done:!1}}return{done:!0,value:null}}}},nd=function(t){for(var i,n=nu(t),r=[];!(i=n.next()).done;)i.value&&r.push(i.value.slice());return r},ng=function(t){if(t.createRange){var i=t.createRange();if(i.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),i.selectNode(n);var r=Math.round(i.getBoundingClientRect().height);if(t.body.removeChild(n),123===r)return!0}}return!1},nf=function(t){var i=t.createElement("boundtest");i.style.width="50px",i.style.display="block",i.style.fontSize="12px",i.style.letterSpacing="0px",i.style.wordSpacing="0px",t.body.appendChild(i);var n=t.createRange();i.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=i.firstChild,s=O(r.data).map(function(t){return D(t)}),o=0,a={},l=s.every(function(t,i){n.setStart(r,o),n.setEnd(r,o+t.length);var s=n.getBoundingClientRect();o+=t.length;var l=s.x>a.x||s.y>a.y;return a=s,0===i||l});return t.body.removeChild(i),l},np=function(t){var i=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;i.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(i,0,0),n.toDataURL()}catch(t){return!1}return!0},nm=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},n_=function(t){var i=t.createElement("canvas");i.width=100,i.height=100;var n=i.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,100,100);var r=new Image,s=i.toDataURL();r.src=s;var o=ny(100,100,0,0,r);return n.fillStyle="red",n.fillRect(0,0,100,100),nw(o).then(function(i){n.drawImage(i,0,0);var r=n.getImageData(0,0,100,100).data;n.fillStyle="red",n.fillRect(0,0,100,100);var o=t.createElement("div");return o.style.backgroundImage="url("+s+")",o.style.height="100px",nm(r)?nw(ny(100,100,0,0,o)):Promise.reject(!1)}).then(function(t){return n.drawImage(t,0,0),nm(n.getImageData(0,0,100,100).data)}).catch(function(){return!1})},ny=function(t,i,n,r,s){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),l=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(l),l.appendChild(s),a},nw=function(t){return new Promise(function(i,n){var r=new Image;r.onload=function(){return i(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},nv={get SUPPORT_RANGE_BOUNDS(){var nb=ng(document);return Object.defineProperty(nv,"SUPPORT_RANGE_BOUNDS",{value:nb}),nb},get SUPPORT_WORD_BREAKING(){var nC=nv.SUPPORT_RANGE_BOUNDS&&nf(document);return Object.defineProperty(nv,"SUPPORT_WORD_BREAKING",{value:nC}),nC},get SUPPORT_SVG_DRAWING(){var nx=np(document);return Object.defineProperty(nv,"SUPPORT_SVG_DRAWING",{value:nx}),nx},get SUPPORT_FOREIGNOBJECT_DRAWING(){var nE="function"==typeof Array.from&&"function"==typeof window.fetch?n_(document):Promise.resolve(!1);return Object.defineProperty(nv,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:nE}),nE},get SUPPORT_CORS_IMAGES(){var nB=void 0!==new Image().crossOrigin;return Object.defineProperty(nv,"SUPPORT_CORS_IMAGES",{value:nB}),nB},get SUPPORT_RESPONSE_TYPE(){var nS="string"==typeof new XMLHttpRequest().responseType;return Object.defineProperty(nv,"SUPPORT_RESPONSE_TYPE",{value:nS}),nS},get SUPPORT_CORS_XHR(){var nI="withCredentials"in new XMLHttpRequest;return Object.defineProperty(nv,"SUPPORT_CORS_XHR",{value:nI}),nI},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var nL=!!("undefined"!=typeof Intl&&Intl.Segmenter);return Object.defineProperty(nv,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:nL}),nL}},nF=function(t,i){this.text=t,this.bounds=i},nM=function(t,i,n,r){var s=nD(i,n),o=[],a=0;return s.forEach(function(i){if(n.textDecorationLine.length||i.trim().length>0)if(nv.SUPPORT_RANGE_BOUNDS){var s=nR(r,a,i.length).getClientRects();if(s.length>1){var l=nO(i),A=0;l.forEach(function(i){o.push(new nF(i,M.fromDOMRectList(t,nR(r,A+a,i.length).getClientRects()))),A+=i.length})}else o.push(new nF(i,M.fromDOMRectList(t,s)))}else{var h=r.splitText(i.length);o.push(new nF(i,nT(t,r))),r=h}else nv.SUPPORT_RANGE_BOUNDS||(r=r.splitText(i.length));a+=i.length}),o},nT=function(t,i){var n=i.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(i.cloneNode(!0));var s=i.parentNode;if(s){s.replaceChild(r,i);var o=T(t,r);return r.firstChild&&s.replaceChild(r.firstChild,r),o}}return M.EMPTY},nR=function(t,i,n){var r=t.ownerDocument;if(!r)throw Error("Node has no owner document");var s=r.createRange();return s.setStart(t,i),s.setEnd(t,i+n),s},nO=function(t){return nv.SUPPORT_NATIVE_TEXT_SEGMENTATION?Array.from(new Intl.Segmenter(void 0,{granularity:"grapheme"}).segment(t)).map(function(t){return t.segment}):nd(t)},nD=function(t,i){return 0!==i.letterSpacing?nO(t):nv.SUPPORT_NATIVE_TEXT_SEGMENTATION?Array.from(new Intl.Segmenter(void 0,{granularity:"word"}).segment(t)).map(function(t){return t.segment}):nk(t,i)},nP=[32,160,4961,65792,65793,4153,4241],nk=function(t,i){for(var n,r=tA(t,{lineBreak:i.lineBreak,wordBreak:"break-word"===i.overflowWrap?"break-word":i.wordBreak}),s=[];!(n=r.next()).done;)if(n.value){var o=O(n.value.slice()),a="";o.forEach(function(t){-1===nP.indexOf(t)?a+=D(t):(a.length&&s.push(a),s.push(D(t)),a="")}),a.length&&s.push(a)}return s},nN=function(t,i,n){this.text=nU(i.data,n.textTransform),this.textBounds=nM(t,this.text,n,i)},nU=function(t,i){switch(i){case 1:return t.toLowerCase();case 3:return t.replace(nQ,nH);case 2:return t.toUpperCase();default:return t}},nQ=/(^|\s|:|-|\(|\))([a-z])/g,nH=function(t,i,n){return t.length>0?i+n.toUpperCase():t},nG=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return B(i,t),i}(i8),nV=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return B(i,t),i}(i8),nz=function(t){function i(i,n){var r=t.call(this,i,n)||this,s=new XMLSerializer,o=T(i,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return B(i,t),i}(i8),nK=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.value=n.value,r}return B(i,t),i}(i8),nj=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return B(i,t),i}(i8),nW=[{type:15,flags:0,unit:"px",number:3}],n$=[{type:16,flags:0,number:50}],nY=function(t){var i=t.type===nZ?Array(t.value.length+1).join("•"):t.value;return 0===i.length?t.placeholder||"":i},nq="checkbox",nX="radio",nZ="password",nJ=function(t){function i(i,n){var r,s=t.call(this,i,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=nY(n),(s.type===nq||s.type===nX)&&(s.styles.backgroundColor=0xdededeff,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=0xa5a5a5ff,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=(r=s.bounds).width>r.height?new M(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new M(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r),s.type){case nq:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=nW;break;case nX:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=n$}return s}return B(i,t),i}(i8),n0=function(t){function i(i,n){var r=t.call(this,i,n)||this,s=n.options[n.selectedIndex||0];return r.value=s&&s.text||"",r}return B(i,t),i}(i8),n1=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.value=n.value,r}return B(i,t),i}(i8),n2=function(t){function i(i,n){var r=t.call(this,i,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=n6(i,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?ec(i,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):eu.TRANSPARENT,o=n.contentWindow.document.body?ec(i,getComputedStyle(n.contentWindow.document.body).backgroundColor):eu.TRANSPARENT;r.backgroundColor=en(s)?en(o)?r.styles.backgroundColor:o:s}}catch(t){}return r}return B(i,t),i}(i8),n5=["OL","UL","MENU"],n4=function(t,i,n,r){for(var s=i.firstChild,o=void 0;s;s=o)if(o=s.nextSibling,n9(s)&&s.data.trim().length>0)n.textNodes.push(new nN(t,s,n.styles));else if(rt(s))if(rf(s)&&s.assignedNodes)s.assignedNodes().forEach(function(i){return n4(t,i,n,r)});else{var a=n3(t,s);a.styles.isVisible()&&(n8(s,a,r)?a.flags|=4:n7(a.styles)&&(a.flags|=2),-1!==n5.indexOf(s.tagName)&&(a.flags|=8),n.elements.push(a),s.slot,s.shadowRoot?n4(t,s.shadowRoot,a,r):rd(s)||ro(s)||rg(s)||n4(t,s,a,r))}},n3=function(t,i){return rh(i)?new nG(t,i):rl(i)?new nV(t,i):ro(i)?new nz(t,i):rn(i)?new nK(t,i):rr(i)?new nj(t,i):rs(i)?new nJ(t,i):rg(i)?new n0(t,i):rd(i)?new n1(t,i):rc(i)?new n2(t,i):new i8(t,i)},n6=function(t,i){var n=n3(t,i);return n.flags|=4,n4(t,i,n,n),n},n8=function(t,i,n){return i.styles.isPositionedWithZIndex()||i.styles.opacity<1||i.styles.isTransformed()||ra(t)&&n.styles.isTransparent()},n7=function(t){return t.isPositioned()||t.isFloating()},n9=function(t){return t.nodeType===Node.TEXT_NODE},rt=function(t){return t.nodeType===Node.ELEMENT_NODE},re=function(t){return rt(t)&&void 0!==t.style&&!ri(t)},ri=function(t){return"object"==typeof t.className},rn=function(t){return"LI"===t.tagName},rr=function(t){return"OL"===t.tagName},rs=function(t){return"INPUT"===t.tagName},ro=function(t){return"svg"===t.tagName},ra=function(t){return"BODY"===t.tagName},rl=function(t){return"CANVAS"===t.tagName},rA=function(t){return"VIDEO"===t.tagName},rh=function(t){return"IMG"===t.tagName},rc=function(t){return"IFRAME"===t.tagName},ru=function(t){return"STYLE"===t.tagName},rd=function(t){return"TEXTAREA"===t.tagName},rg=function(t){return"SELECT"===t.tagName},rf=function(t){return"SLOT"===t.tagName},rp=function(t){return t.tagName.indexOf("-")>0},rm=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var i=this.counters[t];return i&&i.length?i[i.length-1]:1},t.prototype.getCounterValues=function(t){return this.counters[t]||[]},t.prototype.pop=function(t){var i=this;t.forEach(function(t){return i.counters[t].pop()})},t.prototype.parse=function(t){var i=this,n=t.counterIncrement,r=t.counterReset,s=!0;null!==n&&n.forEach(function(t){var n=i.counters[t.counter];n&&0!==t.increment&&(s=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=t.increment)});var o=[];return s&&r.forEach(function(t){var n=i.counters[t.counter];o.push(t.counter),n||(n=i.counters[t.counter]=[]),n.push(t.reset)}),o},t}(),r_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ry={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},rw={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},rv={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},rb=function(t,i,n,r,s,o){return t<i||t>n?rM(t,s,o.length>0):r.integers.reduce(function(i,n,s){for(;t>=n;)t-=n,i+=r.values[s];return i},"")+o},rC=function(t,i,n,r){var s="";do!n&&t--,s=r(t)+s,t/=i;while(t*i>=i)return s},rx=function(t,i,n,r,s){var o=n-i+1;return(t<0?"-":"")+(rC(Math.abs(t),o,r,function(t){return D(Math.floor(t%o)+i)})+s)},rE=function(t,i,n){void 0===n&&(n=". ");var r=i.length;return rC(Math.abs(t),r,!1,function(t){return i[Math.floor(t%r)]})+n},rB=function(t,i,n,r,s,o){if(t<-9999||t>9999)return rM(t,4,s.length>0);var a=Math.abs(t),l=s;if(0===a)return i[0]+l;for(var A=0;a>0&&A<=4;A++){var h=a%10;0===h&&iz(o,1)&&""!==l?l=i[h]+l:h>1||1===h&&0===A||1===h&&1===A&&iz(o,2)||1===h&&1===A&&iz(o,4)&&t>100||1===h&&A>1&&iz(o,8)?l=i[h]+(A>0?n[A-1]:"")+l:1===h&&A>0&&(l=n[A-1]+l),a=Math.floor(a/10)}return(t<0?r:"")+l},rS="十百千萬",rI="拾佰仟萬",rL="マイナス",rF="마이너스",rM=function(t,i,n){var r=n?". ":"",s=n?"、":"",o=n?", ":"",a=n?" ":"";switch(i){case 0:return"•"+a;case 1:return"◦"+a;case 2:return"◾"+a;case 5:var l=rx(t,48,57,!0,r);return l.length<4?"0"+l:l;case 4:return rE(t,"〇一二三四五六七八九",s);case 6:return rb(t,1,3999,r_,3,r).toLowerCase();case 7:return rb(t,1,3999,r_,3,r);case 8:return rx(t,945,969,!1,r);case 9:return rx(t,97,122,!1,r);case 10:return rx(t,65,90,!1,r);case 11:return rx(t,1632,1641,!0,r);case 12:case 49:return rb(t,1,9999,ry,3,r);case 35:return rb(t,1,9999,ry,3,r).toLowerCase();case 13:return rx(t,2534,2543,!0,r);case 14:case 30:return rx(t,6112,6121,!0,r);case 15:return rE(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return rE(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return rB(t,"零一二三四五六七八九",rS,"負",s,14);case 47:return rB(t,"零壹貳參肆伍陸柒捌玖",rI,"負",s,15);case 42:return rB(t,"零一二三四五六七八九",rS,"负",s,14);case 41:return rB(t,"零壹贰叁肆伍陆柒捌玖",rI,"负",s,15);case 26:return rB(t,"〇一二三四五六七八九","十百千万",rL,s,0);case 25:return rB(t,"零壱弐参四伍六七八九","拾百千万",rL,s,7);case 31:return rB(t,"영일이삼사오육칠팔구","십백천만",rF,o,7);case 33:return rB(t,"零一二三四五六七八九","十百千萬",rF,o,0);case 32:return rB(t,"零壹貳參四五六七八九","拾百千",rF,o,7);case 18:return rx(t,2406,2415,!0,r);case 20:return rb(t,1,19999,rv,3,r);case 21:return rx(t,2790,2799,!0,r);case 22:return rx(t,2662,2671,!0,r);case 22:return rb(t,1,10999,rw,3,r);case 23:return rE(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return rE(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return rx(t,3302,3311,!0,r);case 28:return rE(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return rE(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return rx(t,3792,3801,!0,r);case 37:return rx(t,6160,6169,!0,r);case 38:return rx(t,4160,4169,!0,r);case 39:return rx(t,2918,2927,!0,r);case 40:return rx(t,1776,1785,!0,r);case 43:return rx(t,3046,3055,!0,r);case 44:return rx(t,3174,3183,!0,r);case 45:return rx(t,3664,3673,!0,r);case 46:return rx(t,3872,3881,!0,r);default:return rx(t,48,57,!0,r)}},rT="data-html2canvas-ignore",rR=function(){function t(t,i,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=i,this.counters=new rm,this.quoteDepth=0,!i.ownerDocument)throw Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,i){var n=this,r=rO(t,i);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,a=r.contentWindow,l=a.document,A=rk(r).then(function(){return I(n,void 0,void 0,function(){var t,n;return L(this,function(s){switch(s.label){case 0:if(this.scrolledElements.forEach(rG),a&&(a.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(a.scrollY!==i.top||a.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-i.left,a.scrollY-i.top,0,0))),t=this.options.onclone,void 0===(n=this.clonedReferenceElement))return[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")];if(!(l.fonts&&l.fonts.ready))return[3,2];return[4,l.fonts.ready];case 1:s.sent(),s.label=2;case 2:if(!/(AppleWebKit)/g.test(navigator.userAgent))return[3,4];return[4,rP(l)];case 3:s.sent(),s.label=4;case 4:if("function"==typeof t)return[2,Promise.resolve().then(function(){return t(l,n)}).then(function(){return r})];return[2,r]}})})});return l.open(),l.write(rQ(document.doctype)+"<html></html>"),rH(this.referenceElement.ownerDocument,s,o),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),A},t.prototype.createElementClone=function(t){if(i6(t,2),rl(t))return this.createCanvasClone(t);if(rA(t))return this.createVideoClone(t);if(ru(t))return this.createStyleClone(t);var i=t.cloneNode(!1);return(rh(i)&&(rh(t)&&t.currentSrc&&t.currentSrc!==t.src&&(i.src=t.currentSrc,i.srcset=""),"lazy"===i.loading&&(i.loading="eager")),rp(i))?this.createCustomElementClone(i):i},t.prototype.createCustomElementClone=function(t){var i=document.createElement("html2canvascustomelement");return rU(t.style,i),i},t.prototype.createStyleClone=function(t){try{var i=t.sheet;if(i&&i.cssRules){var n=[].slice.call(i.cssRules,0).reduce(function(t,i){return i&&"string"==typeof i.cssText?t+i.cssText:t},""),r=t.cloneNode(!1);return r.textContent=n,r}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){if(this.options.inlineImages&&t.ownerDocument){var i,n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(i){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var r=t.cloneNode(!1);try{r.width=t.width,r.height=t.height;var s=t.getContext("2d"),o=r.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var a=null!=(i=t.getContext("webgl2"))?i:t.getContext("webgl");if(a){var l=a.getContextAttributes();(null==l?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}}catch(i){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return r},t.prototype.createVideoClone=function(t){var i=t.ownerDocument.createElement("canvas");i.width=t.offsetWidth,i.height=t.offsetHeight;var n=i.getContext("2d");try{return n&&(n.drawImage(t,0,0,i.width,i.height),this.options.allowTaint||n.getImageData(0,0,i.width,i.height)),i}catch(i){this.context.logger.info("Unable to clone video as it is tainted",t)}var r=t.ownerDocument.createElement("canvas");return r.width=t.offsetWidth,r.height=t.offsetHeight,r},t.prototype.appendChildNode=function(t,i,n){rt(i)&&("SCRIPT"===i.tagName||i.hasAttribute(rT)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(i))||this.options.copyStyles&&rt(i)&&ru(i)||t.appendChild(this.cloneNode(i,n))},t.prototype.cloneChildNodes=function(t,i,n){for(var r=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(rt(s)&&rf(s)&&"function"==typeof s.assignedNodes){var o=s.assignedNodes();o.length&&o.forEach(function(t){return r.appendChildNode(i,t,n)})}else this.appendChildNode(i,s,n)},t.prototype.cloneNode=function(t,i){if(n9(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&rt(t)&&(re(t)||ri(t))){var r=this.createElementClone(t);r.style.transitionProperty="none";var s=n.getComputedStyle(t),o=n.getComputedStyle(t,":before"),a=n.getComputedStyle(t,":after");this.referenceElement===t&&re(r)&&(this.clonedReferenceElement=r),ra(r)&&rj(r);var l=this.counters.parse(new i5(this.context,s)),A=this.resolvePseudoContent(t,r,o,C.BEFORE);rp(t)&&(i=!0),rA(t)||this.cloneChildNodes(t,r,i),A&&r.insertBefore(A,r.firstChild);var h=this.resolvePseudoContent(t,r,a,C.AFTER);return h&&r.appendChild(h),this.counters.pop(l),(s&&(this.options.copyStyles||ri(t))&&!rc(t)||i)&&rU(s,r),(0!==t.scrollTop||0!==t.scrollLeft)&&this.scrolledElements.push([r,t.scrollLeft,t.scrollTop]),(rd(t)||rg(t))&&(rd(r)||rg(r))&&(r.value=t.value),r}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,i,n,r){var s=this;if(n){var o=n.content,a=i.ownerDocument;if(a&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new i5(this.context,n));var l=new i2(this.context,n),A=a.createElement("html2canvaspseudoelement");rU(n,A),l.content.forEach(function(i){if(0===i.type)A.appendChild(a.createTextNode(i.value));else if(22===i.type){var n=a.createElement("img");n.src=i.value,n.style.opacity="1",A.appendChild(n)}else if(18===i.type){if("attr"===i.name){var r=i.values.filter(tK);r.length&&A.appendChild(a.createTextNode(t.getAttribute(r[0].value)||""))}else if("counter"===i.name){var o=i.values.filter(tY),h=o[0],c=o[1];if(h&&tK(h)){var u=s.counters.getCounterValue(h.value),d=c&&tK(c)?iA.parse(s.context,c.value):3;A.appendChild(a.createTextNode(rM(u,d,!1)))}}else if("counters"===i.name){var g=i.values.filter(tY),h=g[0],f=g[1],c=g[2];if(h&&tK(h)){var p=s.counters.getCounterValues(h.value),m=c&&tK(c)?iA.parse(s.context,c.value):3,_=f&&0===f.type?f.value:"",y=p.map(function(t){return rM(t,m,!1)}).join(_);A.appendChild(a.createTextNode(y))}}}else if(20===i.type)switch(i.value){case"open-quote":A.appendChild(a.createTextNode(iq(l.quotes,s.quoteDepth++,!0)));break;case"close-quote":A.appendChild(a.createTextNode(iq(l.quotes,--s.quoteDepth,!1)));break;default:A.appendChild(a.createTextNode(i.value))}}),A.className=rV+" "+rz;var h=r===C.BEFORE?" "+rV:" "+rz;return ri(i)?i.className.baseValue+=h:i.className+=h,A}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();(_=C||(C={}))[_.BEFORE=0]="BEFORE",_[_.AFTER=1]="AFTER";var rO=function(t,i){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=i.width.toString(),n.height=i.height.toString(),n.scrolling="no",n.setAttribute(rT,"true"),t.body.appendChild(n),n},rD=function(t){return new Promise(function(i){if(t.complete||!t.src)return void i();t.onload=i,t.onerror=i})},rP=function(t){return Promise.all([].slice.call(t.images,0).map(rD))},rk=function(t){return new Promise(function(i,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var n=setInterval(function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(n),i(t))},50)}})},rN=["all","d","content"],rU=function(t,i){for(var n=t.length-1;n>=0;n--){var r=t.item(n);-1===rN.indexOf(r)&&i.style.setProperty(r,t.getPropertyValue(r))}return i},rQ=function(t){var i="";return t&&(i+="<!DOCTYPE ",t.name&&(i+=t.name),t.internalSubset&&(i+=t.internalSubset),t.publicId&&(i+='"'+t.publicId+'"'),t.systemId&&(i+='"'+t.systemId+'"'),i+=">"),i},rH=function(t,i,n){t&&t.defaultView&&(i!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(i,n)},rG=function(t){var i=t[0],n=t[1],r=t[2];i.scrollLeft=n,i.scrollTop=r},rV="___html2canvas___pseudoelement_before",rz="___html2canvas___pseudoelement_after",rK='{\n    content: "" !important;\n    display: none !important;\n}',rj=function(t){rW(t,"."+rV+":before"+rK+"\n         ."+rz+":after"+rK)},rW=function(t,i){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=i,t.appendChild(r)}},r$=function(){function t(){}return t.getOrigin=function(i){var n=t._link;return n?(n.href=i,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(i){return t.getOrigin(i)===t._origin},t.setContext=function(i){t._link=i.document.createElement("a"),t._origin=t.getOrigin(i.location.href)},t._origin="about:blank",t}(),rY=function(){function t(t,i){this.context=t,this._options=i,this._cache={}}return t.prototype.addImage=function(t){var i=Promise.resolve();return this.has(t)||(r2(t)||rJ(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),i},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return I(this,void 0,void 0,function(){var i,n,r,s,o=this;return L(this,function(a){switch(a.label){case 0:if(i=r$.isSameOrigin(t),n=!r0(t)&&!0===this._options.useCORS&&nv.SUPPORT_CORS_IMAGES&&!i,r=!r0(t)&&!i&&!r2(t)&&"string"==typeof this._options.proxy&&nv.SUPPORT_CORS_XHR&&!n,!i&&!1===this._options.allowTaint&&!r0(t)&&!r2(t)&&!r&&!n)return[2];if(s=t,!r)return[3,2];return[4,this.proxy(s)];case 1:s=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(t,i){var r=new Image;r.onload=function(){return t(r)},r.onerror=i,(r1(s)||n)&&(r.crossOrigin="anonymous"),r.src=s,!0===r.complete&&setTimeout(function(){return t(r)},500),o._options.imageTimeout>0&&setTimeout(function(){return i("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var i=this,n=this._options.proxy;if(!n)throw Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(s,o){var a=nv.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(200===l.status)if("text"===a)s(l.response);else{var t=new FileReader;t.addEventListener("load",function(){return s(t.result)},!1),t.addEventListener("error",function(t){return o(t)},!1),t.readAsDataURL(l.response)}else o("Failed to proxy resource "+r+" with status code "+l.status)},l.onerror=o;var A=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+A+"url="+encodeURIComponent(t)+"&responseType="+a),"text"!==a&&l instanceof XMLHttpRequest&&(l.responseType=a),i._options.imageTimeout){var h=i._options.imageTimeout;l.timeout=h,l.ontimeout=function(){return o("Timed out ("+h+"ms) proxying "+r)}}l.send()})},t}(),rq=/^data:image\/svg\+xml/i,rX=/^data:image\/.*;base64,/i,rZ=/^data:image\/.*/i,rJ=function(t){return nv.SUPPORT_SVG_DRAWING||!r5(t)},r0=function(t){return rZ.test(t)},r1=function(t){return rX.test(t)},r2=function(t){return"blob"===t.substr(0,4)},r5=function(t){return"svg"===t.substr(-3).toLowerCase()||rq.test(t)},r4=function(){function t(t,i){this.type=0,this.x=t,this.y=i}return t.prototype.add=function(i,n){return new t(this.x+i,this.y+n)},t}(),r3=function(t,i,n){return new r4(t.x+(i.x-t.x)*n,t.y+(i.y-t.y)*n)},r6=function(){function t(t,i,n,r){this.type=1,this.start=t,this.startControl=i,this.endControl=n,this.end=r}return t.prototype.subdivide=function(i,n){var r=r3(this.start,this.startControl,i),s=r3(this.startControl,this.endControl,i),o=r3(this.endControl,this.end,i),a=r3(r,s,i),l=r3(s,o,i),A=r3(a,l,i);return n?new t(this.start,r,a,A):new t(A,l,o,this.end)},t.prototype.add=function(i,n){return new t(this.start.add(i,n),this.startControl.add(i,n),this.endControl.add(i,n),this.end.add(i,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),r8=function(t){return 1===t.type},r7=function(t){var i=t.styles,n=t.bounds,r=t4(i.borderTopLeftRadius,n.width,n.height),s=r[0],o=r[1],a=t4(i.borderTopRightRadius,n.width,n.height),l=a[0],A=a[1],h=t4(i.borderBottomRightRadius,n.width,n.height),c=h[0],u=h[1],d=t4(i.borderBottomLeftRadius,n.width,n.height),g=d[0],f=d[1],p=[];p.push((s+l)/n.width),p.push((g+c)/n.width),p.push((o+f)/n.height),p.push((A+u)/n.height);var m=Math.max.apply(Math,p);m>1&&(s/=m,o/=m,l/=m,A/=m,c/=m,u/=m,g/=m,f/=m);var _=n.width-l,y=n.height-u,w=n.width-c,v=n.height-f,b=i.borderTopWidth,C=i.borderRightWidth,E=i.borderBottomWidth,B=i.borderLeftWidth,S=t3(i.paddingTop,t.bounds.width),I=t3(i.paddingRight,t.bounds.width),L=t3(i.paddingBottom,t.bounds.width),F=t3(i.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?r9(n.left+B/3,n.top+b/3,s-B/3,o-b/3,x.TOP_LEFT):new r4(n.left+B/3,n.top+b/3),this.topRightBorderDoubleOuterBox=s>0||o>0?r9(n.left+_,n.top+b/3,l-C/3,A-b/3,x.TOP_RIGHT):new r4(n.left+n.width-C/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?r9(n.left+w,n.top+y,c-C/3,u-E/3,x.BOTTOM_RIGHT):new r4(n.left+n.width-C/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=g>0||f>0?r9(n.left+B/3,n.top+v,g-B/3,f-E/3,x.BOTTOM_LEFT):new r4(n.left+B/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?r9(n.left+2*B/3,n.top+2*b/3,s-2*B/3,o-2*b/3,x.TOP_LEFT):new r4(n.left+2*B/3,n.top+2*b/3),this.topRightBorderDoubleInnerBox=s>0||o>0?r9(n.left+_,n.top+2*b/3,l-2*C/3,A-2*b/3,x.TOP_RIGHT):new r4(n.left+n.width-2*C/3,n.top+2*b/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?r9(n.left+w,n.top+y,c-2*C/3,u-2*E/3,x.BOTTOM_RIGHT):new r4(n.left+n.width-2*C/3,n.top+n.height-2*E/3),this.bottomLeftBorderDoubleInnerBox=g>0||f>0?r9(n.left+2*B/3,n.top+v,g-2*B/3,f-2*E/3,x.BOTTOM_LEFT):new r4(n.left+2*B/3,n.top+n.height-2*E/3),this.topLeftBorderStroke=s>0||o>0?r9(n.left+B/2,n.top+b/2,s-B/2,o-b/2,x.TOP_LEFT):new r4(n.left+B/2,n.top+b/2),this.topRightBorderStroke=s>0||o>0?r9(n.left+_,n.top+b/2,l-C/2,A-b/2,x.TOP_RIGHT):new r4(n.left+n.width-C/2,n.top+b/2),this.bottomRightBorderStroke=c>0||u>0?r9(n.left+w,n.top+y,c-C/2,u-E/2,x.BOTTOM_RIGHT):new r4(n.left+n.width-C/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=g>0||f>0?r9(n.left+B/2,n.top+v,g-B/2,f-E/2,x.BOTTOM_LEFT):new r4(n.left+B/2,n.top+n.height-E/2),this.topLeftBorderBox=s>0||o>0?r9(n.left,n.top,s,o,x.TOP_LEFT):new r4(n.left,n.top),this.topRightBorderBox=l>0||A>0?r9(n.left+_,n.top,l,A,x.TOP_RIGHT):new r4(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||u>0?r9(n.left+w,n.top+y,c,u,x.BOTTOM_RIGHT):new r4(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||f>0?r9(n.left,n.top+v,g,f,x.BOTTOM_LEFT):new r4(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||o>0?r9(n.left+B,n.top+b,Math.max(0,s-B),Math.max(0,o-b),x.TOP_LEFT):new r4(n.left+B,n.top+b),this.topRightPaddingBox=l>0||A>0?r9(n.left+Math.min(_,n.width-C),n.top+b,_>n.width+C?0:Math.max(0,l-C),Math.max(0,A-b),x.TOP_RIGHT):new r4(n.left+n.width-C,n.top+b),this.bottomRightPaddingBox=c>0||u>0?r9(n.left+Math.min(w,n.width-B),n.top+Math.min(y,n.height-E),Math.max(0,c-C),Math.max(0,u-E),x.BOTTOM_RIGHT):new r4(n.left+n.width-C,n.top+n.height-E),this.bottomLeftPaddingBox=g>0||f>0?r9(n.left+B,n.top+Math.min(v,n.height-E),Math.max(0,g-B),Math.max(0,f-E),x.BOTTOM_LEFT):new r4(n.left+B,n.top+n.height-E),this.topLeftContentBox=s>0||o>0?r9(n.left+B+F,n.top+b+S,Math.max(0,s-(B+F)),Math.max(0,o-(b+S)),x.TOP_LEFT):new r4(n.left+B+F,n.top+b+S),this.topRightContentBox=l>0||A>0?r9(n.left+Math.min(_,n.width+B+F),n.top+b+S,_>n.width+B+F?0:l-B+F,A-(b+S),x.TOP_RIGHT):new r4(n.left+n.width-(C+I),n.top+b+S),this.bottomRightContentBox=c>0||u>0?r9(n.left+Math.min(w,n.width-(B+F)),n.top+Math.min(y,n.height+b+S),Math.max(0,c-(C+I)),u-(E+L),x.BOTTOM_RIGHT):new r4(n.left+n.width-(C+I),n.top+n.height-(E+L)),this.bottomLeftContentBox=g>0||f>0?r9(n.left+B+F,n.top+v,Math.max(0,g-(B+F)),f-(E+L),x.BOTTOM_LEFT):new r4(n.left+B+F,n.top+n.height-(E+L))};(y=x||(x={}))[y.TOP_LEFT=0]="TOP_LEFT",y[y.TOP_RIGHT=1]="TOP_RIGHT",y[y.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",y[y.BOTTOM_LEFT=3]="BOTTOM_LEFT";var r9=function(t,i,n,r,s){var o=(Math.sqrt(2)-1)/3*4,a=n*o,l=r*o,A=t+n,h=i+r;switch(s){case x.TOP_LEFT:return new r6(new r4(t,h),new r4(t,h-l),new r4(A-a,i),new r4(A,i));case x.TOP_RIGHT:return new r6(new r4(t,i),new r4(t+a,i),new r4(A,h-l),new r4(A,h));case x.BOTTOM_RIGHT:return new r6(new r4(A,i),new r4(A,i+l),new r4(t+a,h),new r4(t,h));case x.BOTTOM_LEFT:default:return new r6(new r4(A,h),new r4(A-a,h),new r4(t,i+l),new r4(t,i))}},st=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},se=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},si=function(t,i,n){this.offsetX=t,this.offsetY=i,this.matrix=n,this.type=0,this.target=6},sn=function(t,i){this.path=t,this.target=i,this.type=1},sr=function(t){this.opacity=t,this.type=2,this.target=6},ss=function(t){return 1===t.type},so=function(t,i){return t.length===i.length&&t.some(function(t,n){return t===i[n]})},sa=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},sl=function(){function t(t,i){if(this.container=t,this.parent=i,this.effects=[],this.curves=new r7(this.container),this.container.styles.opacity<1&&this.effects.push(new sr(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new si(n,r,s))}if(0!==this.container.styles.overflowX){var o=st(this.curves),a=se(this.curves);so(o,a)?this.effects.push(new sn(o,6)):(this.effects.push(new sn(o,2)),this.effects.push(new sn(a,4)))}}return t.prototype.getEffects=function(t){for(var i=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var s=n.effects.filter(function(t){return!ss(t)});if(i||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,s),i=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var o=st(n.curves),a=se(n.curves);so(o,a)||r.unshift(new sn(a,6))}}else r.unshift.apply(r,s);n=n.parent}return r.filter(function(i){return iz(i.target,t)})},t}(),sA=function(t,i,n,r){t.container.elements.forEach(function(s){var o=iz(s.flags,4),a=iz(s.flags,2),l=new sl(s,t);iz(s.styles.display,2048)&&r.push(l);var A=iz(s.flags,8)?[]:r;if(o||a){var h=o||s.styles.isPositioned()?n:i,c=new sa(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var u=s.styles.zIndex.order;if(u<0){var d=0;h.negativeZIndex.some(function(t,i){if(u>t.element.container.styles.zIndex.order)d=i;else if(d>0)return!0;return!1}),h.negativeZIndex.splice(d,0,c)}else if(u>0){var g=0;h.positiveZIndex.some(function(t,i){if(u>=t.element.container.styles.zIndex.order)g=i+1;else if(g>0)return!0;return!1}),h.positiveZIndex.splice(g,0,c)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else s.styles.isFloating()?h.nonPositionedFloats.push(c):h.nonPositionedInlineLevel.push(c);sA(l,c,o?c:n,A)}else s.styles.isInlineLevel()?i.inlineLevel.push(l):i.nonInlineLevel.push(l),sA(l,i,n,A);iz(s.flags,8)&&sh(s,A)})},sh=function(t,i){for(var n=t instanceof nj?t.start:1,r=t instanceof nj&&t.reversed,s=0;s<i.length;s++){var o=i[s];o.container instanceof nK&&"number"==typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=rM(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},sc=function(t){var i=new sl(t,null),n=new sa(i),r=[];return sA(i,n,n,r),sh(i.container,r),n},su=function(t,i){switch(i){case 0:return sm(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return sm(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return sm(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return sm(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},sd=function(t,i){switch(i){case 0:return sm(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return sm(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return sm(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return sm(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},sg=function(t,i){switch(i){case 0:return sm(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return sm(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return sm(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return sm(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},sf=function(t,i){switch(i){case 0:return sp(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return sp(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return sp(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return sp(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},sp=function(t,i){var n=[];return r8(t)?n.push(t.subdivide(.5,!1)):n.push(t),r8(i)?n.push(i.subdivide(.5,!0)):n.push(i),n},sm=function(t,i,n,r){var s=[];return r8(t)?s.push(t.subdivide(.5,!1)):s.push(t),r8(n)?s.push(n.subdivide(.5,!0)):s.push(n),r8(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),r8(i)?s.push(i.subdivide(.5,!1).reverse()):s.push(i),s},s_=function(t){var i=t.bounds,n=t.styles;return i.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},sy=function(t){var i=t.styles,n=t.bounds,r=t3(i.paddingLeft,n.width),s=t3(i.paddingRight,n.width),o=t3(i.paddingTop,n.width),a=t3(i.paddingBottom,n.width);return n.add(r+i.borderLeftWidth,o+i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth+r+s),-(i.borderTopWidth+i.borderBottomWidth+o+a))},sw=function(t,i,n){var r,s,o=(r=sx(t.styles.backgroundOrigin,i),0===r?t.bounds:2===r?sy(t):s_(t)),a=(s=sx(t.styles.backgroundClip,i),0===s?t.bounds:2===s?sy(t):s_(t)),l=sC(sx(t.styles.backgroundSize,i),n,o),A=l[0],h=l[1],c=t4(sx(t.styles.backgroundPosition,i),o.width-A,o.height-h);return[sE(sx(t.styles.backgroundRepeat,i),c,l,o,a),Math.round(o.left+c[0]),Math.round(o.top+c[1]),A,h]},sv=function(t){return tK(t)&&t.value===w.AUTO},sb=function(t){return"number"==typeof t},sC=function(t,i,n){var r=i[0],s=i[1],o=i[2],a=t[0],l=t[1];if(!a)return[0,0];if(tJ(a)&&l&&tJ(l))return[t3(a,n.width),t3(l,n.height)];var A=sb(o);if(tK(a)&&(a.value===w.CONTAIN||a.value===w.COVER))return sb(o)?n.width/n.height<o!=(a.value===w.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var h=sb(r),c=sb(s),u=h||c;if(sv(a)&&(!l||sv(l)))return h&&c?[r,s]:A||u?u&&A?[h?r:s*o,c?s:r/o]:[h?r:n.width,c?s:n.height]:[n.width,n.height];if(A){var d=0,g=0;return tJ(a)?d=t3(a,n.width):tJ(l)&&(g=t3(l,n.height)),sv(a)?d=g*o:(!l||sv(l))&&(g=d/o),[d,g]}var f=null,p=null;if(tJ(a)?f=t3(a,n.width):l&&tJ(l)&&(p=t3(l,n.height)),null!==f&&(!l||sv(l))&&(p=h&&c?f/r*s:n.height),null!==p&&sv(a)&&(f=h&&c?p/s*r:n.width),null!==f&&null!==p)return[f,p];throw Error("Unable to calculate background-size for element")},sx=function(t,i){var n=t[i];return void 0===n?t[0]:n},sE=function(t,i,n,r,s){var o=i[0],a=i[1],l=n[0],A=n[1];switch(t){case 2:return[new r4(Math.round(r.left),Math.round(r.top+a)),new r4(Math.round(r.left+r.width),Math.round(r.top+a)),new r4(Math.round(r.left+r.width),Math.round(A+r.top+a)),new r4(Math.round(r.left),Math.round(A+r.top+a))];case 3:return[new r4(Math.round(r.left+o),Math.round(r.top)),new r4(Math.round(r.left+o+l),Math.round(r.top)),new r4(Math.round(r.left+o+l),Math.round(r.height+r.top)),new r4(Math.round(r.left+o),Math.round(r.height+r.top))];case 1:return[new r4(Math.round(r.left+o),Math.round(r.top+a)),new r4(Math.round(r.left+o+l),Math.round(r.top+a)),new r4(Math.round(r.left+o+l),Math.round(r.top+a+A)),new r4(Math.round(r.left+o),Math.round(r.top+a+A))];default:return[new r4(Math.round(s.left),Math.round(s.top)),new r4(Math.round(s.left+s.width),Math.round(s.top)),new r4(Math.round(s.left+s.width),Math.round(s.height+s.top)),new r4(Math.round(s.left),Math.round(s.height+s.top))]}},sB="Hidden Text",sS=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,i){var n=this._document.createElement("div"),r=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=i,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=i,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(sB)),n.appendChild(s),n.appendChild(r);var a=r.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(sB)),n.style.lineHeight="normal",r.style.verticalAlign="super";var l=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:l}},t.prototype.getMetrics=function(t,i){var n=t+" "+i;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(t,i)),this._data[n]},t}(),sI=function(t,i){this.context=t,this.options=i},sL=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new sS(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return B(i,t),i.prototype.applyEffects=function(t){for(var i=this;this._activeEffects.length;)this.popEffect();t.forEach(function(t){return i.applyEffect(t)})},i.prototype.applyEffect=function(t){this.ctx.save(),2===t.type&&(this.ctx.globalAlpha=t.opacity),0===t.type&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),ss(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},i.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},i.prototype.renderStack=function(t){return I(this,void 0,void 0,function(){return L(this,function(i){switch(i.label){case 0:if(!t.element.container.styles.isVisible())return[3,2];return[4,this.renderStackContent(t)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},i.prototype.renderNode=function(t){return I(this,void 0,void 0,function(){return L(this,function(i){switch(i.label){case 0:if(iz(t.container.flags,16),!t.container.styles.isVisible())return[3,3];return[4,this.renderNodeBackgroundAndBorders(t)];case 1:return i.sent(),[4,this.renderNodeContent(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},i.prototype.renderTextWithLetterSpacing=function(t,i,n){var r=this;0===i?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+n):nO(t.text).reduce(function(i,s){return r.ctx.fillText(s,i,t.bounds.top+n),i+r.ctx.measureText(s).width},t.bounds.left)},i.prototype.createFontStyle=function(t){var i=t.fontVariant.filter(function(t){return"normal"===t||"small-caps"===t}).join(""),n=sO(t.fontFamily).join(", "),r=tV(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,i,t.fontWeight,r,n].join(" "),n,r]},i.prototype.renderTextNode=function(t,i){return I(this,void 0,void 0,function(){var n,r,s,o,a,l,A,h,c=this;return L(this,function(u){return r=(n=this.createFontStyle(i))[0],s=n[1],o=n[2],this.ctx.font=r,this.ctx.direction=1===i.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=(a=this.fontMetrics.getMetrics(s,o)).baseline,A=a.middle,h=i.paintOrder,t.textBounds.forEach(function(t){h.forEach(function(n){switch(n){case 0:c.ctx.fillStyle=er(i.color),c.renderTextWithLetterSpacing(t,i.letterSpacing,l);var r=i.textShadow;r.length&&t.text.trim().length&&(r.slice(0).reverse().forEach(function(n){c.ctx.shadowColor=er(n.color),c.ctx.shadowOffsetX=n.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=n.offsetY.number*c.options.scale,c.ctx.shadowBlur=n.blur.number,c.renderTextWithLetterSpacing(t,i.letterSpacing,l)}),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),i.textDecorationLine.length&&(c.ctx.fillStyle=er(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(i){switch(i){case 1:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+l),t.bounds.width,1);break;case 2:c.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:c.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+A),t.bounds.width,1)}}));break;case 1:i.webkitTextStrokeWidth&&t.text.trim().length&&(c.ctx.strokeStyle=er(i.webkitTextStrokeColor),c.ctx.lineWidth=i.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+l)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}})}),[2]})})},i.prototype.renderReplacedElement=function(t,i,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var r=sy(t),s=se(i);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},i.prototype.renderNodeContent=function(t){return I(this,void 0,void 0,function(){var n,r,s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w;return L(this,function(v){switch(v.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,r=t.curves,s=n.styles,o=0,a=n.textNodes,v.label=1;case 1:if(!(o<a.length))return[3,4];return l=a[o],[4,this.renderTextNode(l,s)];case 2:v.sent(),v.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof nG))return[3,8];v.label=5;case 5:return v.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return A=v.sent(),this.renderReplacedElement(n,r,A),[3,8];case 7:return v.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof nV&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof nz))return[3,12];v.label=9;case 9:return v.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return A=v.sent(),this.renderReplacedElement(n,r,A),[3,12];case 11:return v.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:if(!(n instanceof n2&&n.tree))return[3,14];return[4,new i(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}).render(n.tree)];case 13:h=v.sent(),n.width&&n.height&&this.ctx.drawImage(h,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),v.label=14;case 14:if(n instanceof nJ&&(c=Math.min(n.bounds.width,n.bounds.height),n.type===nq?n.checked&&(this.ctx.save(),this.path([new r4(n.bounds.left+.39363*c,n.bounds.top+.79*c),new r4(n.bounds.left+.16*c,n.bounds.top+.5549*c),new r4(n.bounds.left+.27347*c,n.bounds.top+.44071*c),new r4(n.bounds.left+.39694*c,n.bounds.top+.5649*c),new r4(n.bounds.left+.72983*c,n.bounds.top+.23*c),new r4(n.bounds.left+.84*c,n.bounds.top+.34085*c),new r4(n.bounds.left+.39363*c,n.bounds.top+.79*c)]),this.ctx.fillStyle=er(0x2a2a2aff),this.ctx.fill(),this.ctx.restore()):n.type===nX&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+c/2,n.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=er(0x2a2a2aff),this.ctx.fill(),this.ctx.restore())),sF(n)&&n.value.length){switch(d=(u=this.createFontStyle(s))[0],g=u[1],f=this.fontMetrics.getMetrics(d,g).baseline,this.ctx.font=d,this.ctx.fillStyle=er(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=sT(n.styles.textAlign),p=sy(n),m=0,n.styles.textAlign){case 1:m+=p.width/2;break;case 2:m+=p.width}_=p.add(m,0,0,-p.height/2+1),this.ctx.save(),this.path([new r4(p.left,p.top),new r4(p.left+p.width,p.top),new r4(p.left+p.width,p.top+p.height),new r4(p.left,p.top+p.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new nF(n.value,_),s.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!iz(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(0!==(y=n.styles.listStyleImage).type)return[3,18];A=void 0,w=y.url,v.label=15;case 15:return v.trys.push([15,17,,18]),[4,this.context.cache.match(w)];case 16:return A=v.sent(),this.ctx.drawImage(A,n.bounds.left-(A.width+10),n.bounds.top),[3,18];case 17:return v.sent(),this.context.logger.error("Error loading list-style-image "+w),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==n.styles.listStyleType&&(d=this.createFontStyle(s)[0],this.ctx.font=d,this.ctx.fillStyle=er(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",p=new M(n.bounds.left,n.bounds.top+t3(n.styles.paddingTop,n.bounds.width),n.bounds.width,io(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new nF(t.listValue,p),s.letterSpacing,io(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),v.label=20;case 20:return[2]}})})},i.prototype.renderStackContent=function(t){return I(this,void 0,void 0,function(){var i,n,r,s,o,a,l,A,h,c,u,d,g,f,p;return L(this,function(m){switch(m.label){case 0:return iz(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:m.sent(),i=0,n=t.negativeZIndex,m.label=2;case 2:if(!(i<n.length))return[3,5];return r=n[i],[4,this.renderStack(r)];case 3:m.sent(),m.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:m.sent(),s=0,o=t.nonInlineLevel,m.label=7;case 7:if(!(s<o.length))return[3,10];return r=o[s],[4,this.renderNode(r)];case 8:m.sent(),m.label=9;case 9:return s++,[3,7];case 10:a=0,l=t.nonPositionedFloats,m.label=11;case 11:if(!(a<l.length))return[3,14];return r=l[a],[4,this.renderStack(r)];case 12:m.sent(),m.label=13;case 13:return a++,[3,11];case 14:A=0,h=t.nonPositionedInlineLevel,m.label=15;case 15:if(!(A<h.length))return[3,18];return r=h[A],[4,this.renderStack(r)];case 16:m.sent(),m.label=17;case 17:return A++,[3,15];case 18:c=0,u=t.inlineLevel,m.label=19;case 19:if(!(c<u.length))return[3,22];return r=u[c],[4,this.renderNode(r)];case 20:m.sent(),m.label=21;case 21:return c++,[3,19];case 22:d=0,g=t.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:if(!(d<g.length))return[3,26];return r=g[d],[4,this.renderStack(r)];case 24:m.sent(),m.label=25;case 25:return d++,[3,23];case 26:f=0,p=t.positiveZIndex,m.label=27;case 27:if(!(f<p.length))return[3,30];return r=p[f],[4,this.renderStack(r)];case 28:m.sent(),m.label=29;case 29:return f++,[3,27];case 30:return[2]}})})},i.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},i.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},i.prototype.formatPath=function(t){var i=this;t.forEach(function(t,n){var r=r8(t)?t.start:t;0===n?i.ctx.moveTo(r.x,r.y):i.ctx.lineTo(r.x,r.y),r8(t)&&i.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)})},i.prototype.renderRepeat=function(t,i,n,r){this.path(t),this.ctx.fillStyle=i,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},i.prototype.resizeImage=function(t,i,n){if(t.width===i&&t.height===n)return t;var r,s=(null!=(r=this.canvas.ownerDocument)?r:document).createElement("canvas");return s.width=Math.max(1,i),s.height=Math.max(1,n),s.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i,n),s},i.prototype.renderBackgroundImage=function(t){return I(this,void 0,void 0,function(){var i,n,r,s,o,a;return L(this,function(l){switch(l.label){case 0:i=t.styles.backgroundImage.length-1,n=function(n){var s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v,b,C,x,E,B,S,I,F,M,T,R,O,D,P;return L(this,function(L){switch(L.label){case 0:if(0!==n.type)return[3,5];s=void 0,o=n.url,L.label=1;case 1:return L.trys.push([1,3,,4]),[4,r.context.cache.match(o)];case 2:return s=L.sent(),[3,4];case 3:return L.sent(),r.context.logger.error("Error loading background-image "+o),[3,4];case 4:return s&&(l=(a=sw(t,i,[s.width,s.height,s.width/s.height]))[0],A=a[1],h=a[2],c=a[3],u=a[4],d=r.ctx.createPattern(r.resizeImage(s,c,u),"repeat"),r.renderRepeat(l,d,A,h)),[3,6];case 5:1===n.type?(l=(g=sw(t,i,[null,null,null]))[0],A=g[1],h=g[2],c=g[3],u=g[4],p=(f=e_(n.angle,c,u))[0],m=f[1],_=f[2],y=f[3],w=f[4],(v=document.createElement("canvas")).width=c,v.height=u,C=(b=v.getContext("2d")).createLinearGradient(m,y,_,w),ep(n.stops,p).forEach(function(t){return C.addColorStop(t.stop,er(t.color))}),b.fillStyle=C,b.fillRect(0,0,c,u),c>0&&u>0&&(d=r.ctx.createPattern(v,"repeat"),r.renderRepeat(l,d,A,h))):2===n.type&&(l=(x=sw(t,i,[null,null,null]))[0],E=x[1],B=x[2],c=x[3],u=x[4],A=t3((S=0===n.position.length?[t2]:n.position)[0],c),h=t3(S[S.length-1],u),F=(I=ev(n,A,h,c,u))[0],M=I[1],F>0&&M>0&&(T=r.ctx.createRadialGradient(E+A,B+h,0,E+A,B+h,F),ep(n.stops,2*F).forEach(function(t){return T.addColorStop(t.stop,er(t.color))}),r.path(l),r.ctx.fillStyle=T,F!==M?(R=t.bounds.left+.5*t.bounds.width,O=t.bounds.top+.5*t.bounds.height,P=1/(D=M/F),r.ctx.save(),r.ctx.translate(R,O),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-R,-O),r.ctx.fillRect(E,P*(B-O)+O,c,u*P),r.ctx.restore()):r.ctx.fill())),L.label=6;case 6:return i--,[2]}})},r=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:if(!(s<o.length))return[3,4];return a=o[s],[5,n(a)];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},i.prototype.renderSolidBorder=function(t,i,n){return I(this,void 0,void 0,function(){return L(this,function(r){return this.path(su(n,i)),this.ctx.fillStyle=er(t),this.ctx.fill(),[2]})})},i.prototype.renderDoubleBorder=function(t,i,n,r){return I(this,void 0,void 0,function(){var s,o;return L(this,function(a){switch(a.label){case 0:if(!(i<3))return[3,2];return[4,this.renderSolidBorder(t,n,r)];case 1:return a.sent(),[2];case 2:return s=sd(r,n),this.path(s),this.ctx.fillStyle=er(t),this.ctx.fill(),o=sg(r,n),this.path(o),this.ctx.fill(),[2]}})})},i.prototype.renderNodeBackgroundAndBorders=function(t){return I(this,void 0,void 0,function(){var i,n,r,s,o,a,l,A,h=this;return L(this,function(c){switch(c.label){case 0:if(this.applyEffects(t.getEffects(2)),n=!en((i=t.container.styles).backgroundColor)||i.backgroundImage.length,r=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],s=sM(sx(i.backgroundClip,0),t.curves),!(n||i.boxShadow.length))return[3,2];return this.ctx.save(),this.path(s),this.ctx.clip(),en(i.backgroundColor)||(this.ctx.fillStyle=er(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)];case 1:c.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(i){h.ctx.save();var n,r,s,o,a=st(t.curves),l=1e4*!i.inset,A=(n=-l+(i.inset?1:-1)*i.spread.number,r=(i.inset?1:-1)*i.spread.number,s=i.spread.number*(i.inset?-2:2),o=i.spread.number*(i.inset?-2:2),a.map(function(t,i){switch(i){case 0:return t.add(n,r);case 1:return t.add(n+s,r);case 2:return t.add(n+s,r+o);case 3:return t.add(n,r+o)}return t}));i.inset?(h.path(a),h.ctx.clip(),h.mask(A)):(h.mask(a),h.ctx.clip(),h.path(A)),h.ctx.shadowOffsetX=i.offsetX.number+l,h.ctx.shadowOffsetY=i.offsetY.number,h.ctx.shadowColor=er(i.color),h.ctx.shadowBlur=i.blur.number,h.ctx.fillStyle=i.inset?er(i.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),c.label=2;case 2:o=0,a=0,l=r,c.label=3;case 3:if(!(a<l.length))return[3,13];if(!(0!==(A=l[a]).style&&!en(A.color)&&A.width>0))return[3,11];if(2!==A.style)return[3,5];return[4,this.renderDashedDottedBorder(A.color,A.width,o,t.curves,2)];case 4:case 6:case 8:return c.sent(),[3,11];case 5:if(3!==A.style)return[3,7];return[4,this.renderDashedDottedBorder(A.color,A.width,o,t.curves,3)];case 7:if(4!==A.style)return[3,9];return[4,this.renderDoubleBorder(A.color,A.width,o,t.curves)];case 9:return[4,this.renderSolidBorder(A.color,o,t.curves)];case 10:c.sent(),c.label=11;case 11:o++,c.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},i.prototype.renderDashedDottedBorder=function(t,i,n,r,s){return I(this,void 0,void 0,function(){var o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v;return L(this,function(b){return this.ctx.save(),o=sf(r,n),a=su(r,n),2===s&&(this.path(a),this.ctx.clip()),r8(a[0])?(l=a[0].start.x,A=a[0].start.y):(l=a[0].x,A=a[0].y),r8(a[1])?(h=a[1].end.x,c=a[1].end.y):(h=a[1].x,c=a[1].y),u=0===n||2===n?Math.abs(l-h):Math.abs(A-c),this.ctx.beginPath(),3===s?this.formatPath(o):this.formatPath(a.slice(0,2)),d=i<3?3*i:2*i,g=i<3?2*i:i,3===s&&(d=i,g=i),f=!0,u<=2*d?f=!1:u<=2*d+g?(p=u/(2*d+g),d*=p,g*=p):(m=Math.floor((u+g)/(d+g)),_=(u-m*d)/(m-1),g=(y=(u-(m+1)*d)/m)<=0||Math.abs(g-_)<Math.abs(g-y)?_:y),f&&(3===s?this.ctx.setLineDash([0,d+g]):this.ctx.setLineDash([d,g])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=2*i+1.1,this.ctx.strokeStyle=er(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(r8(a[0])&&(w=a[3],v=a[0],this.ctx.beginPath(),this.formatPath([new r4(w.end.x,w.end.y),new r4(v.start.x,v.start.y)]),this.ctx.stroke()),r8(a[1])&&(w=a[1],v=a[2],this.ctx.beginPath(),this.formatPath([new r4(w.end.x,w.end.y),new r4(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},i.prototype.render=function(t){return I(this,void 0,void 0,function(){var i;return L(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=er(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=sc(t),[4,this.renderStack(i)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},i}(sI),sF=function(t){return t instanceof n1||t instanceof n0||t instanceof nJ&&t.type!==nX&&t.type!==nq||!1},sM=function(t,i){switch(t){case 0:return st(i);case 2:return[i.topLeftContentBox,i.topRightContentBox,i.bottomRightContentBox,i.bottomLeftContentBox];default:return se(i)}},sT=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},sR=["-apple-system","system-ui"],sO=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(t){return -1===sR.indexOf(t)}):t},sD=function(t){function i(i,n){var r=t.call(this,i,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return B(i,t),i.prototype.render=function(t){return I(this,void 0,void 0,function(){var i;return L(this,function(n){switch(n.label){case 0:return[4,sP(ny(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t))];case 1:return i=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=er(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},i}(sI),sP=function(t){return new Promise(function(i,n){var r=new Image;r.onload=function(){i(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},sk=function(){function t(t){var i=t.id,n=t.enabled;this.id=i,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,F([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,F([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,F([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,F([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),sN=function(){function t(i,n){var r;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new sk({id:this.instanceName,enabled:i.logging}),this.cache=null!=(r=i.cache)?r:new rY(this,i)}return t.instanceCount=1,t}();"undefined"!=typeof window&&r$.setContext(window);var sU=function(t,i,n){var r=i.ownerDocument,s=r.documentElement?ec(t,getComputedStyle(r.documentElement).backgroundColor):eu.TRANSPARENT,o=r.body?ec(t,getComputedStyle(r.body).backgroundColor):eu.TRANSPARENT,a="string"==typeof n?ec(t,n):null===n?eu.TRANSPARENT:0xffffffff;return i===r.documentElement?en(s)?en(o)?a:o:s:a};return function(t,i){var n,r;return void 0===i&&(i={}),n=t,r=i,I(void 0,void 0,void 0,function(){var t,i,s,o,a,l,A,h,c,u,d,g,f,p,m,_,y,w,v,b,C,x,E,B,I,F,O,D,P,k,N,U,Q,H,G,V,z,K;return L(this,function(b){switch(b.label){case 0:if(!n||"object"!=typeof n)return[2,Promise.reject("Invalid element provided as first argument")];if(!(t=n.ownerDocument))throw Error("Element is not attached to a Document");if(!(i=t.defaultView))throw Error("Document is not attached to a Window");if(s={allowTaint:null!=(x=r.allowTaint)&&x,imageTimeout:null!=(E=r.imageTimeout)?E:15e3,proxy:r.proxy,useCORS:null!=(B=r.useCORS)&&B},l=new sN(S({logging:null==(I=r.logging)||I,cache:r.cache},s),a=new M((o={windowWidth:null!=(F=r.windowWidth)?F:i.innerWidth,windowHeight:null!=(O=r.windowHeight)?O:i.innerHeight,scrollX:null!=(D=r.scrollX)?D:i.pageXOffset,scrollY:null!=(P=r.scrollY)?P:i.pageYOffset}).scrollX,o.scrollY,o.windowWidth,o.windowHeight)),A=null!=(k=r.foreignObjectRendering)&&k,h={allowTaint:null!=(N=r.allowTaint)&&N,onclone:r.onclone,ignoreElements:r.ignoreElements,inlineImages:A,copyStyles:A},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),!(u=(c=new rR(l,n,h)).clonedReferenceElement))return[2,Promise.reject("Unable to find element in cloned iframe")];return[4,c.toIFrame(t,a)];case 1:if(d=b.sent(),f=(g=ra(u)||"HTML"===u.tagName?R(u.ownerDocument):T(l,u)).width,p=g.height,m=g.left,_=g.top,y=sU(l,u,r.backgroundColor),w={canvas:r.canvas,backgroundColor:y,scale:null!=(Q=null!=(U=r.scale)?U:i.devicePixelRatio)?Q:1,x:(null!=(H=r.x)?H:0)+m,y:(null!=(G=r.y)?G:0)+_,width:null!=(V=r.width)?V:Math.ceil(f),height:null!=(z=r.height)?z:Math.ceil(p)},!A)return[3,3];return l.logger.debug("Document cloned, using foreign object rendering"),[4,new sD(l,w).render(u)];case 2:return v=b.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+m+","+_+" with size "+f+"x"+p+" using computed rendering"),l.logger.debug("Starting DOM parsing"),C=n6(l,u),y===C.styles.backgroundColor&&(C.styles.backgroundColor=eu.TRANSPARENT),l.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),[4,new sL(l,w).render(C)];case 4:v=b.sent(),b.label=5;case 5:return(null==(K=r.removeContainer)||K)&&!rR.destroy(d)&&l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),l.logger.debug("Finished rendering"),[2,v]}})})}}();const x9="export-png-tool.js",Et="oltb-tool-button",Ee="tools.exportPngTool",Ei=Object.freeze({filename:"map-image-export",appendTime:!1,onInitiated:void 0,onClicked:void 0,onExported:void 0,onError:void 0});class En extends mk{constructor(t={}){super({filename:x9});let i=up({path:ug.image.mixed,class:`${Et}__icon`}),n=c1.get(Ee),r=A6.createElement({element:"button",html:i,class:Et,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.exportPngTool})`,"data-tippy-content-post":`(${mQ.exportPngTool})`,"data-oltb-i18n":`${Ee}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.options=E(an).merge(E(an).cloneDeep(Ei),t),this.#i8(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#i8(){let t=A3.getConfig().urlParameter.debug;this.isDebug="true"===gm.getParameter(t)}momentaryActivation(){this.doRenderOnce()}#k(t){let i=hr.getMapElement().querySelector(".ol-attribution");i&&i.setAttribute("data-html2canvas-ignore","true")}#tq(t){mK(t,mQ.exportPngTool)&&this.onClickTool(t)}async #nn(){let t=this.getMap();t&&await this.doRenderCompleteAsync(t)}#nr(t,i){return A6.createElement({element:"canvas",attributes:{width:t,height:i}})}getCanvasMatrix(t){return t.style.transform.match(/^matrix\(([^(]*)\)$/)[1].split(",").map(Number)}async doRenderCompleteAsync(t){try{let i=hr.getMapElement(),n=t.getSize(),r=this.#nr(n[0],n[1]),s=r.getContext("2d"),o=i.querySelector(".ol-layer canvas:not(.ol-overviewmap-map canvas)"),a=o.parentNode.style.opacity;s.globalAlpha=""===a?1:Number(a);let l=this.getCanvasMatrix(o);CanvasRenderingContext2D.prototype.setTransform.apply(s,l),s.drawImage(o,0,0);let A=i.querySelector(".ol-overlaycontainer-stopevent:not(.ol-overviewmap-map .ol-overlaycontainer-stopevent)"),h=await E(x7)(A,{scrollX:0,scrollY:0,backgroundColor:null,logging:this.isDebug});s.drawImage(h,0,0),this.doDownloadCanvas(r)}catch(t){this.options.onError&&this.options.onError(t),A0.logError(x9,"doRenderCompleteAsync",{message:"Failed to export canvas image",error:t}),c9.error({i18nKey:`${Ee}.toasts.errors.renderCanvas`})}}doRenderOnce(){let t=this.getMap();t&&(t.once(A8.openLayers.renderComplete,this.#nn.bind(this)),t.renderSync())}doDownloadCanvas(t){let i=A3.getConfig().localization.active,n=this.options.appendTime?`-${new Date().toLocaleString(i)}`:"",r=`${this.options.filename}${n}.png`,s=window.navigator.msSaveBlob?t.msToBlob():t.toDataURL();window.navigator.msSaveBlob?window.navigator.msSaveBlob(s,r):w0(r,s),this.options.onExported&&this.options.onExported(r,s)}}var an=I("f1q41");const Er="units",Es=[1,2,5],Eo=25.4/.28;var Ea=class extends nO{constructor(t){t=t||{};let i=document.createElement("div");i.style.pointerEvents="none",super({element:i,render:t.render,target:t.target}),this.on,this.once,this.un;let n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+nb,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Er,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Er)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Er,t)}setDpi(t){this.dpi_=t}updateElement_(){let t,i,n,r,s,o=this.viewState_;if(!o){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let a=o.center,l=o.projection,A=this.getUnits(),h=ia(l,o.resolution,a,"degrees"==A?"degrees":"m"),c=this.minWidth_*(this.dpi_||Eo)/Eo,u=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||Eo)/Eo:void 0,d=c*h,g="";if("degrees"==A){let t=eF.degrees;(d*=t)<t/60?(g="″",h*=3600):d<t?(g="′",h*=60):g="°"}else if("imperial"==A)d<.9144?(g="in",h/=.0254):d<1609.344?(g="ft",h/=.3048):(g="mi",h/=1609.344);else if("nautical"==A)h/=1852,g="NM";else if("metric"==A)d<1e-6?(g="nm",h*=1e9):d<.001?(g="μm",h*=1e6):d<1?(g="mm",h*=1e3):d<1e3?g="m":(g="km",h/=1e3);else if("us"==A)d<.9144?(g="in",h*=39.37):d<1609.344?(g="ft",h/=.30480061):(g="mi",h/=1609.3472);else throw Error("Invalid units");let f=3*Math.floor(Math.log(c*h)/Math.log(10)),p=0;for(;;){let o=Math.pow(10,n=Math.floor(f/3));if(isNaN(i=Math.round((t=Es[(f%3+3)%3]*o)/h))){this.element.style.display="none",this.renderedVisible_=!1;return}if(void 0!==u&&i>=u){t=p,i=r,n=s;break}if(i>=c)break;p=t,r=i,s=n,++f}let m=this.scaleBar_?this.createScaleBar(i,t,g):t.toFixed(n<0?-n:0)+" "+g;this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=i&&(this.innerElement_.style.width=i+"px",this.renderedWidth_=i),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,i,n){let r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=t/o,l=[this.createMarker("absolute")];for(let r=0;r<o;++r){let s=r%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${s}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(r%2==0||2===o?this.createStepText(r,t,!1,i,n):"")+"</div>")}return l.push(this.createStepText(o,t,!0,i,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+l.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,i,n,r,s){let o=0===t?0:Math.round(r/this.scaleBarSteps_*t*100)/100,a=0===t?-3:-(i/this.scaleBarSteps_*1),l=0===t?0:i/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${a}px;text-align: ${0===t?"left":"center"};min-width: ${l}px;left: ${n?i+"px":"unset"};">`+o+(0===t?"":" "+s)+"</div>"}getScaleForResolution(){let t=ia(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m");return 1e3/25.4*t*(this.dpi_||Eo)}render(t){let i=t.frameState;i?this.viewState_=i.viewState:this.viewState_=null,this.updateElement_()}};const El="oltb-tool-button",EA="tools.scaleLineTool",Eh=Object.freeze({units:"metric",onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),Ec=he.scaleLineTool,Eu=Object.freeze({isActive:!1});class Ed extends mk{constructor(t={}){super({filename:"scale-line-tool.js"});let i=up({path:ug.scaleLine.stroked,class:`${El}__icon`}),n=c1.get(EA),r=A6.createElement({element:"button",html:i,class:El,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.scaleLineTool})`,"data-tippy-content-post":`(${mQ.scaleLineTool})`,"data-oltb-i18n":`${EA}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(Eh),t),this.localStorage=ht.getAndMergeStateObject(Ec,Eu),this.scaleLine=this.#ns(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){let t=this.getMap();t&&(this.doAddScaleLine(t),this.isActive=!0,this.button.classList.add(`${El}--active`),this.localStorage.isActive=!0,ht.setStateObject(Ec,this.localStorage))}deactivateTool(){this.doRemoveScaleLine(),this.isActive=!1,this.button.classList.remove(`${El}--active`),this.localStorage.isActive=!1,ht.setStateObject(Ec,this.localStorage)}#ns(){return new Ea({units:this.options.units})}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.scaleLineTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=E(an).cloneDeep(Eu),ht.setStateObject(Ec,Eu)}doAddScaleLine(t){this.scaleLine.setMap(t)}doRemoveScaleLine(){this.scaleLine.setMap(null)}}var an=I("f1q41");function Eg(t,i,n){let r,s,o,a,l,A,h=[],c=t(0),u=t(1),d=i(c),g=i(u),f=[u,c],p=[g,d],m=[1,0],_={},y=1e5;for(;--y>0&&m.length>0;)o=m.pop(),c=f.pop(),d=p.pop(),(A=o.toString())in _||(h.push(d[0],d[1]),_[A]=!0),a=m.pop(),u=f.pop(),g=p.pop(),tL((s=i(r=t(l=(o+a)/2)))[0],s[1],d[0],d[1],g[0],g[1])<n?(h.push(g[0],g[1]),_[A=a.toString()]=!0):(m.push(a,l,l,o),p.push(g,s,s,d),f.push(u,r,r,c));return h}const Ef=new sV({color:"rgba(0,0,0,0.2)"}),Ep=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];var Em=class extends dw{constructor(t){let i=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t=t||{});delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,super(i),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:Ef,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=void 0==t.lonLabelFormatter?eg.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=void 0==t.latLabelFormatter?eg.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=void 0==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=void 0==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new sz({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new sY({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new sQ({color:"rgba(0,0,0,1)"}),stroke:new sV({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=t=>{let i=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(i),this.lonLabelStyleBase_},this.latLabelStyleBase_=new sz({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new sY({font:"12px Calibri,sans-serif",textAlign:"right",fill:new sQ({color:"rgba(0,0,0,1)"}),stroke:new sV({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=t=>{let i=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(i),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(rx.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:Ep,this.setSource(new dI({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new to,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new sz({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,i){let n=t.slice();if(this.projection_&&this.getSource().getWrapX()&&eA(n,this.projection_),this.loadedExtent_){var r,s;(r=this.loadedExtent_,s=n,Math.abs(r[0]-s[0])<i&&Math.abs(r[2]-s[2])<i&&Math.abs(r[1]-s[1])<i&&Math.abs(r[3]-s[3])<i)?n=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)}return[n]}loaderFunction(t,i,n){let r,s,o;this.loadedExtent_=t;let a=this.getSource(),l=ei(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(this.renderedExtent_&&t0(this.renderedExtent_,l)&&this.renderedResolution_===i||(this.renderedExtent_=l,this.renderedResolution_=i,ea(l)))return;let A=t7(l);this.projection_&&id(this.projection_,n)||this.updateProjectionInfo_(n),this.createGraticule_(l,A,i,i*i/4);let h=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(h+=this.meridians_.length),this.parallelsLabels_&&(h+=this.parallels_.length);h>this.featurePool_.length;)r=new uE,this.featurePool_.push(r);let c=a.getFeaturesCollection();c.clear();let u=0;for(s=0,o=this.meridians_.length;s<o;++s)(r=this.featurePool_[u++]).setGeometry(this.meridians_[s]),r.setStyle(this.lineStyle_),c.push(r);for(s=0,o=this.parallels_.length;s<o;++s)(r=this.featurePool_[u++]).setGeometry(this.parallels_[s]),r.setStyle(this.lineStyle_),c.push(r)}addMeridian_(t,i,n,r,s,o){let a=this.getMeridian_(t,i,n,r,o);if(eo(a.getExtent(),s)){if(this.meridiansLabels_){let i=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=i:this.meridiansLabels_[o]={geom:new i4([]),text:i}}this.meridians_[o++]=a}return o}addParallel_(t,i,n,r,s,o){let a=this.getParallel_(t,i,n,r,o);if(eo(a.getExtent(),s)){if(this.parallelsLabels_){let i=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=i:this.parallelsLabels_[o]={geom:new i4([]),text:i}}this.parallels_[o++]=a}return o}drawLabels_(t){let i=t.frameState.viewState.rotation,n=t.frameState.viewState.resolution,r=t.frameState.size,s=t.frameState.extent,o=t7(s),a=s;if(i){let t=r[0]*n,i=r[1]*n;a=[o[0]-t/2,o[1]-i/2,o[0]+t/2,o[1]+i/2]}let l=0,A=0,h=this.latLabelPosition_<.5,c=this.projection_.getExtent(),u=es(c);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!tW(c,s)&&(l=Math.floor((s[0]-c[0])/u),A=Math.ceil((s[2]-c[2])/u),h=h!==Math.abs(i)>Math.PI/2);let d=fN(t);for(let t=l;t<=A;++t){let n,r,c,g,f=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(r=0,c=this.meridiansLabels_.length;r<c;++r){let l=this.meridians_[r];if(i||0!==t){let n=l.clone();n.translate(t*u,0),n.rotate(-i,o),(g=this.getMeridianPoint_(n,a,r)).rotate(i,o)}else g=this.getMeridianPoint_(l,s,r);(n=this.featurePool_[f++]).setGeometry(g),n.set("graticule_label",this.meridiansLabels_[r].text),d.drawFeature(n,this.lonLabelStyle_(n))}if(this.parallelsLabels_&&(t===l&&h||t===A&&!h))for(r=0,c=this.parallels_.length;r<c;++r){let l=this.parallels_[r];if(i||0!==t){let n=l.clone();n.translate(t*u,0),n.rotate(-i,o),(g=this.getParallelPoint_(n,a,r)).rotate(i,o)}else g=this.getParallelPoint_(l,s,r);(n=this.featurePool_[f++]).setGeometry(g),n.set("graticule_label",this.parallelsLabels_[r].text),d.drawFeature(n,this.latLabelStyle_(n))}}}createGraticule_(t,i,n,r){let s,o,a,l,A=this.getInterval_(n);if(-1==A){this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),this.parallelsLabels_&&(this.parallelsLabels_.length=0);return}let h=!1,c=this.projection_.getExtent(),u=es(c);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!tW(c,t)&&(es(t)>=u?(t[0]=c[0],t[2]=c[2]):h=!0);let d=[tI(i[0],this.minX_,this.maxX_),tI(i[1],this.minY_,this.maxY_)],g=this.toLonLatTransform_(d);isNaN(g[1])&&(g[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let f=tI(g[0],this.minLon_,this.maxLon_),p=tI(g[1],this.minLat_,this.maxLat_),m=this.maxLines_,_=t;h||(_=[tI(t[0],this.minX_,this.maxX_),tI(t[1],this.minY_,this.maxY_),tI(t[2],this.minX_,this.maxX_),tI(t[3],this.minY_,this.maxY_)]);let y=el(_,this.toLonLatTransform_,void 0,8),w=y[3],v=y[2],b=y[1],C=y[0];if(h||(tj(_,this.bottomLeft_)&&(C=this.minLon_,b=this.minLat_),tj(_,this.bottomRight_)&&(v=this.maxLon_,b=this.minLat_),tj(_,this.topLeft_)&&(C=this.minLon_,w=this.maxLat_),tj(_,this.topRight_)&&(v=this.maxLon_,w=this.maxLat_),w=tI(w,p,this.maxLat_),v=tI(v,f,this.maxLon_),b=tI(b,this.minLat_,p),C=tI(C,this.minLon_,f)),l=tI(f=Math.floor(f/A)*A,this.minLon_,this.maxLon_),o=this.addMeridian_(l,b,w,r,t,0),s=0,h)for(;(l-=A)>=C&&s++<m;)o=this.addMeridian_(l,b,w,r,t,o);else for(;l!=this.minLon_&&s++<m;)l=Math.max(l-A,this.minLon_),o=this.addMeridian_(l,b,w,r,t,o);if(l=tI(f,this.minLon_,this.maxLon_),s=0,h)for(;(l+=A)<=v&&s++<m;)o=this.addMeridian_(l,b,w,r,t,o);else for(;l!=this.maxLon_&&s++<m;)l=Math.min(l+A,this.maxLon_),o=this.addMeridian_(l,b,w,r,t,o);for(this.meridians_.length=o,this.meridiansLabels_&&(this.meridiansLabels_.length=o),a=tI(p=Math.floor(p/A)*A,this.minLat_,this.maxLat_),o=this.addParallel_(a,C,v,r,t,0),s=0;a!=this.minLat_&&s++<m;)a=Math.max(a-A,this.minLat_),o=this.addParallel_(a,C,v,r,t,o);for(a=tI(p,this.minLat_,this.maxLat_),s=0;a!=this.maxLat_&&s++<m;)a=Math.min(a+A,this.maxLat_),o=this.addParallel_(a,C,v,r,t,o);this.parallels_.length=o,this.parallelsLabels_&&(this.parallelsLabels_.length=o)}getInterval_(t){let i=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1],r=-1,s=Math.pow(this.targetSize_*t,2),o=[],a=[];for(let t=0,l=this.intervals_.length;t<l;++t){let l=tI(this.intervals_[t]/2,0,90),A=tI(n,-90+l,90-l);if(o[0]=i-l,o[1]=A-l,a[0]=i+l,a[1]=A+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=s)break;r=this.intervals_[t]}return r}getMeridian_(t,i,n,r,s){var o;let a=(o=this.projection_,Eg(function(r){return[t,i+(n-i)*r]},im(io("EPSG:4326"),o),r)),l=this.meridians_[s];return l?(l.setFlatCoordinates("XY",a),l.changed()):(l=new uV(a,"XY"),this.meridians_[s]=l),l}getMeridianPoint_(t,i,n){let r=t.getFlatCoordinates(),s=1,o=r.length-1;r[s]>r[o]&&(s=o,o=1);let a=Math.max(i[1],r[s]),l=Math.min(i[3],r[o]),A=tI(i[1]+Math.abs(i[1]-i[3])*this.lonLabelPosition_,a,l),h=r[s-1]+(r[o-1]-r[s-1])*(A-r[s])/(r[o]-r[s]),c=this.meridiansLabels_[n].geom;return c.setCoordinates([h,A]),c}getMeridians(){return this.meridians_}getParallel_(t,i,n,r,s){var o;let a=(o=this.projection_,Eg(function(r){return[i+(n-i)*r,t]},im(io("EPSG:4326"),o),r)),l=this.parallels_[s];return l?(l.setFlatCoordinates("XY",a),l.changed()):l=new uV(a,"XY"),l}getParallelPoint_(t,i,n){let r=t.getFlatCoordinates(),s=0,o=r.length-2;r[s]>r[o]&&(s=o,o=0);let a=Math.max(i[0],r[s]),l=Math.min(i[2],r[o]),A=tI(i[0]+Math.abs(i[0]-i[2])*this.latLabelPosition_,a,l),h=r[s+1]+(r[o+1]-r[s+1])*(A-r[s])/(r[o]-r[s]),c=this.parallelsLabels_[n].geom;return c.setCoordinates([A,h]),c}getParallels(){return this.parallels_}updateProjectionInfo_(t){let i=io("EPSG:4326"),n=t.getWorldExtent();this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0];let r=im(t,i);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=r;else{let t=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(i,n,s){let o=r(i,n,s=s||2);for(let i=0,n=o.length;i<n;i+=s)o[i]<t&&(o[i]+=360);return o}}this.fromLonLatTransform_=im(i,t);let s=el([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(t7(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}};const E_="oltb-tool-button",Ey="tools.graticuleTool",Ew=[1,4],Ev=[0,0],Eb=Object.freeze({color:"#3B4352E6",dashed:!0,width:2,showLabels:!0,wrapX:!0,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),EC=he.graticuleTool,Ex=Object.freeze({isActive:!1});class EE extends mk{constructor(t={}){super({filename:"graticule-tool.js"});let i=up({path:ug.globe.stroked,class:`${E_}__icon`}),n=c1.get(Ey),r=A6.createElement({element:"button",html:i,class:E_,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.graticuleTool})`,"data-tippy-content-post":`(${mQ.graticuleTool})`,"data-oltb-i18n":`${Ey}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.options=E(an).merge(E(an).cloneDeep(Eb),t),this.localStorage=ht.getAndMergeStateObject(EC,Ex),this.graticule=this.#no(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#no(){return new Em({strokeStyle:new sV({color:this.options.color,width:this.options.width,lineDash:this.options.dashed?Ew:Ev}),showLabels:this.options.showLabels,isVisible:!0,wrapX:this.options.wrapX})}activateTool(){let t=this.getMap();t&&(this.doAddGraticuleLines(t),this.isActive=!0,this.button.classList.add(`${E_}--active`),this.localStorage.isActive=!0,ht.setStateObject(EC,this.localStorage))}deactivateTool(){this.doRemoveGraticuleLines(),this.isActive=!1,this.button.classList.remove(`${E_}--active`),this.localStorage.isActive=!1,ht.setStateObject(EC,this.localStorage)}#k(t){this.localStorage.isActive&&this.activateTool()}#tq(t){mK(t,mQ.graticuleTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=E(an).cloneDeep(Ex),ht.setStateObject(EC,Ex)}doAddGraticuleLines(t){this.graticule.setMap(t)}doRemoveGraticuleLines(){this.graticule.setMap(null)}}var an=I("f1q41");const EB=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ES=(()=>{if("undefined"==typeof document)return!1;let t=EB[0],i={};for(let n of EB)if(n?.[1]in document){for(let[r,s]of n.entries())i[t[r]]=s;return i}return!1})(),EI={change:ES.fullscreenchange,error:ES.fullscreenerror};let EL={request:(t=document.documentElement,i)=>new Promise((n,r)=>{let s=()=>{EL.off("change",s),n()};EL.on("change",s);let o=t[ES.requestFullscreen](i);o instanceof Promise&&o.then(s).catch(r)}),exit:()=>new Promise((t,i)=>{if(!EL.isFullscreen)return void t();let n=()=>{EL.off("change",n),t()};EL.on("change",n);let r=document[ES.exitFullscreen]();r instanceof Promise&&r.then(n).catch(i)}),toggle:(t,i)=>EL.isFullscreen?EL.exit():EL.request(t,i),onchange(t){EL.on("change",t)},onerror(t){EL.on("error",t)},on(t,i){let n=EI[t];n&&document.addEventListener(n,i,!1)},off(t,i){let n=EI[t];n&&document.removeEventListener(n,i,!1)},raw:ES};Object.defineProperties(EL,{isFullscreen:{get:()=>!!document[ES.fullscreenElement]},element:{enumerable:!0,get:()=>document[ES.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[ES.fullscreenEnabled]}}),ES||(EL={isEnabled:!1});var EF=EL;const EM="my-location-tool.js",ET="oltb-tool-button",ER="oltb-func-btn",EO="oltb-info-window-marker",ED="tools.myLocationTool",EP="commons",Ek=Object.freeze({title:"My Location",description:"This is the location that the browser was able to find. It might not be your actual location.",enableHighAccuracy:!0,timeout:1e4,markerLabelUseEllipsisAfter:20,markerLabelUseUpperCase:!1,onInitiated:void 0,onClicked:void 0,onLocationFound:void 0,onError:void 0});class EN extends mk{constructor(t={}){super({filename:EM});let i=up({path:ug.geoMarker.stroked,class:`${ET}__icon`}),n=c1.get(ED),r=A6.createElement({element:"button",html:i,class:ET,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.myLocationTool})`,"data-tippy-content-post":`(${mQ.myLocationTool})`,"data-oltb-i18n":`${ED}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.options=E(an).merge(E(an).cloneDeep(Ek),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){EF.isFullscreen?this.askToExitFullscreen():this.doGeoLocationSearch()}#tq(t){mK(t,mQ.myLocationTool)&&this.onClickTool(t)}#na(t){this.doLocationFound(t)}#nl(t){this.doLocationError(t)}askToExitFullscreen(){let t=c1.get(`${ED}.dialogs.confirms.exitFullscreen`);return fO.confirm({title:t.title,message:t.message,confirmClass:fO.Success,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:async()=>EF.exit().then(()=>{this.doGeoLocationSearch()}).catch(t=>{A0.logError(EM,"askToExitFullscreen",{message:"Failed to exit fullscreen",error:t}),c9.error({i18nKey:`${ED}.toasts.errors.exitFullscreen`})})})}doLocationFound(t){let i=this.getMap();if(!i)return;A6.removeElement(this.loadingToast);let n=[t.coords.longitude,t.coords.latitude],r=this.doAddIconMarker(n);this.doFocusMarker(i,r,n,A3.getConfig().marker.focusZoom),this.options.onLocationFound&&this.options.onLocationFound(t)}doLocationError(t){A0.logError(EM,"doLocationError",{message:t.message,error:t}),c9.error({i18nKey:`${ED}.toasts.errors.locationNotFound`}),this.options.onError&&this.options.onError(t),this.loadingToast&&A6.removeElement(this.loadingToast)}doFocusMarker(t,i,n,r){mU({map:t,coordinates:n,zoom:r,onDone:t=>{f0.tryPulseAnimation(i),f0.showOverlay(i,ic(n))}})}doAddMarkerToMap(t){dY.addFeatureLayer({name:this.options.title}).getLayer().getSource().addFeature(t)}doAddIconMarker(t){let i=c1.get(`${EP}.titles`),n=ey(t),r={title:this.options.title,content:`
                <p>${this.options.description}</p>
            `,footer:`
                <span class="oltb-info-window__coordinates">${n}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${ER} ${ER}--delete oltb-tippy" data-oltb-i18n="${EP}.titles.delete" title="${i.delete}" id="${EO}-remove"></button>
                    <button class="${ER} ${ER}--crosshair oltb-tippy" data-oltb-i18n="${EP}.titles.copyCoordinates" title="${i.copyCoordinates}" id="${EO}-copy-coordinates" data-oltb-coordinates="${n}"></button>
                    <button class="${ER} ${ER}--copy oltb-tippy" data-oltb-i18n="${EP}.titles.copyText" title="${i.copyText}" id="${EO}-copy-text" data-oltb-copy="${this.options.description}"></button>
                    <button class="${ER} ${ER}--layer oltb-tippy" data-oltb-i18n="${EP}.titles.showLayer" title="${i.showLayer}" id="${EO}-show-layer"></button>
                </div>
            `},s=dK.generateIconMarker({lon:t[0],lat:t[1],title:this.options.title,description:this.options.description,infoWindow:r,icon:{key:"person.filled"},label:{text:this.options.title,useEllipsisAfter:this.options.markerLabelUseEllipsisAfter,useUpperCase:this.options.markerLabelUseUpperCase}});return this.doAddMarkerToMap(s),s}doGeoLocationSearch(){if(!this.loadingToast){if(!window.navigator||!window.navigator.geolocation)return void this.#nl({message:"Geolocation is not supported"});this.loadingToast=c9.info({i18nKey:`${ED}.toasts.infos.fetchLocation`,clickToRemove:!1,spinner:!0,onRemove:()=>{this.loadingToast=void 0}}),window.navigator.geolocation.getCurrentPosition(this.#na.bind(this),this.#nl.bind(this),{enableHighAccuracy:this.options.enableHighAccuracy,timeout:this.options.timeout})}}}var an=I("f1q41");const EU="reset-north-tool.js",EQ="oltb-tool-button",EH="tools.resetNorthTool",EG=Object.freeze({onInitiated:void 0,onClicked:void 0,onReset:void 0});class EV extends mk{constructor(t={}){super({filename:EU}),this.icon=up({path:ug.compass.stroked,class:`${EQ}__icon`}),this.resetRotationIcon=up({path:ug.arrowRepeat.stroked,class:`${EQ}__icon`});let i=c1.get(EH),n=A6.createElement({element:"button",html:this.icon,class:EQ,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.resetNorthTool})`,"data-tippy-content-post":`(${mQ.resetNorthTool})`,"data-oltb-i18n":`${EH}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[n]),this.button=n,this.options=E(an).merge(E(an).cloneDeep(EG),t),this.#eC(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#eC(){mz.addItem({icon:this.resetRotationIcon,i18nKey:`${EH}.contextItems.rotate`,fn:this.#nA.bind(this)})}momentaryActivation(){let t=this.getMap();if(!t)return;let i=t.getView(),n=i.getZoom();mU({map:t,coordinates:iu(i.getCenter()),zoom:n,rotation:0,onDone:t=>{this.options.onReset&&this.options.onReset(t)}})}#tq(t){mK(t,mQ.resetNorthTool)&&this.onClickTool(t)}#nA(t,i,n){this.askToSetRotation(t)}askToSetRotation(t){let i=t.getView(),n=i.getZoom(),r=uh.radiansToDegrees(i.getRotation()),s=iu(i.getCenter()),o=c1.get(`${EH}.dialogs.prompts.rotateMap`);return fO.prompt({title:o.title,message:o.message,value:Math.round(r<0?r+360:r),confirmText:o.confirmText,cancelText:o.cancelText,onConfirm:i=>{i.isDigitsOnly()?this.doRotation(t,s,n,i):(A0.logError(EU,"askToSetRotation",{message:"Only digits are allowed as input",result:i}),c9.error({i18nKey:`${EH}.toasts.errors.invalidValue`}))}})}doRotation(t,i,n,r){let s=uh.degreesToRadians(r);A0.logDebug(EU,"doRotation",{degrees:r,radians:s}),mU({map:t,coordinates:i,zoome:n,rotation:s})}}var an=I("f1q41");const Ez="fullscreen-tool.js",EK="oltb-tool-button",Ej="tools.fullscreenTool",EW=Object.freeze({onInitiated:void 0,onClicked:void 0,onEnter:void 0,onLeave:void 0});class E$ extends mk{constructor(t={}){super({filename:Ez}),this.enterFullscreenIcon=up({path:ug.fullscreen.stroked,class:`${EK}__icon`}),this.exitFullscreenIcon=up({path:ug.fullscreenExit.stroked,class:`${EK}__icon`});let i=c1.get(Ej),n=A6.createElement({element:"button",html:this.getToolIcon(),class:EK,attributes:{type:"button","data-tippy-content":`${i.title} (${mQ.fullscreenTool})`,"data-tippy-content-post":`(${mQ.fullscreenTool})`,"data-oltb-i18n":`${Ej}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});A6.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.listenerKeys=[],this.options=E(an).merge(E(an).cloneDeep(EW),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),this.onFullScreenChangeBind=this.#nh.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.document.addEventListener(A8.browser.fullScreenChange,this.onFullScreenChangeBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind),window.document.removeEventListener(A8.browser.fullScreenChange,this.onFullScreenChangeBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.isFullScreenSupportedByBrowser()&&(EF.isFullscreen?this.doRequestExitFullScreen():this.doRequestEnterFullScreen())}#tq(t){mK(t,mQ.fullscreenTool)&&this.onClickTool(t)}#nh(t){this.doFullScreenChange(t)}isFullScreenSupportedByBrowser(){return EF.isEnabled||(A0.logError(Ez,"isFullScreenSupportedByBrowser",{title:"Error",error:"Fullscreen is not supported by this browser"}),c9.error({i18nKey:`${Ej}.toasts.errors.missingFullScreenSupport`})),EF.isEnabled}getToolIcon(){return EF.isFullscreen?this.exitFullscreenIcon:this.enterFullscreenIcon}doRequestExitFullScreen(){return EF.exit()}doRequestEnterFullScreen(){let t=this.getMap();if(!t)return;let i=t.getTargetElement();return EF.request(i)}doUpdateMapSize(){let t=this.getMap();t&&t.updateSize()}doFullScreenChange(t){window.document.fullscreenElement?(this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.exitFullscreenIcon),this.options.onEnter&&this.options.onEnter(t)):(this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.enterFullscreenIcon),this.options.onLeave&&this.options.onLeave(t)),this.isActive=!this.isActive,this.button.classList.toggle(`${EK}--active`)}}var an=I("f1q41");const EY="coordinates-tool.js",Eq="oltb-tool-button",EX="oltb-toolbox-section",EZ="oltb-coordinates",EJ="tools.coordinatesTool",E0="tools.coordinatesTool",E1="commons",E2=Object.freeze({onInitiated:void 0,onClicked:void 0,onMapClicked:void 0,onBrowserStateCleared:void 0}),E5=he.coordinatesTool,E4=Object.freeze({isActive:!1,coordinatesFormat:"DD"});class E3 extends mk{constructor(t={}){super({filename:EY});let i=up({path:ug.crosshair.stroked,class:`${Eq}__icon`}),n=c1.get(E0),r=A6.createElement({element:"button",html:i,class:Eq,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.coordinatesTool})`,"data-tippy-content-post":`(${mQ.coordinatesTool})`,"data-oltb-i18n":`${E0}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.isActive=!1,this.tooltipItem=void 0,this.projections=new Map,this.options=E(an).merge(E(an).cloneDeep(E2),t),this.localStorage=ht.getAndMergeStateObject(E5,E4),this.#eE(),this.uiRefToolboxSection=window.document.querySelector(`#${EZ}-toolbox`),this.#eB(),this.#eD(),this.uiRefCoordinatesTable=this.uiRefToolboxSection.querySelector(`#${EZ}-table`),this.uiRefCoordinatesFormat=this.uiRefToolboxSection.querySelector(`#${EZ}-format`),this.uiRefCoordinatesFormat.value=this.localStorage.coordinatesFormat,this.uiRefCoordinatesFormat.addEventListener(A8.browser.change,this.#nc.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyDownBind=this.#iF.bind(this),this.onOLTBReadyBind=this.#k.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(A8.browser.keyDown,this.onWindowKeyDownBind),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind),window.addEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyDown,this.onWindowKeyDownBind),window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind),window.removeEventListener(A8.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#eE(){let t=c1.get(`${E0}.toolbox`),i=c1.get(`${E1}.titles`),n=`
            <div id="${EZ}-toolbox" class="${EX}">
                <div class="${EX}__header oltb-toggleable" data-oltb-toggleable-target="${EZ}-toolbox-collapsed">
                    <h4 class="${EX}__title" data-oltb-i18n="${E0}.toolbox.titles.coordinates">${t.titles.coordinates}</h4>
                    <span class="${EX}__icon oltb-tippy" data-oltb-i18n="${E1}.titles.toggleSection" title="${i.toggleSection}"></span>
                </div>
                <div class="${EX}__groups" id="${EZ}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">
                    <div class="${EX}__group">
                        <label class="oltb-label" for="${EZ}-format" data-oltb-i18n="${E0}.toolbox.groups.formats.title">${t.groups.formats.title}</label>
                        <select id="${EZ}-format" class="oltb-select">
                            <option value="DD" data-oltb-i18n="${E0}.toolbox.groups.formats.dd">${t.groups.formats.dd}</option>
                            <option value="DMS" data-oltb-i18n="${E0}.toolbox.groups.formats.dms">${t.groups.formats.dms}</option>
                        </select>
                    </div>
                    <div class="${EX}__group">
                        <label class="oltb-label" data-oltb-i18n="${E0}.toolbox.groups.coordinates.title">${t.groups.coordinates.title} <em>(Lat, Lon)</em></label>
                        <table class="oltb-table oltb-table--horizontal oltb-table--no-background oltb-table--tight-bottom-and-top oltb-mt-05" id="${EZ}-table"></table>
                    </div>
                </div>
            </div>
        `;hr.getToolboxElement().insertAdjacentHTML("beforeend",n)}#eB(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach(t=>{t.addEventListener(A8.browser.click,this.#eI.bind(this,t))})}#eD(){gP.addSetting(gf.copyCoordinatesOnClick,{state:!0,i18nBase:`${E0}.settings`,i18nKey:"copyOnClick"}),gP.addSetting(gf.updateToolboxCoordinatesOnHover,{state:!0,i18nBase:`${E0}.settings`,i18nKey:"updateToolboxOnHover"})}activateTool(){this.#nu(),this.isActive=!0,this.uiRefToolboxSection.classList.add(`${EX}--show`),this.button.classList.add(`${Eq}--active`),this.localStorage.isActive=!0,ht.setStateObject(E5,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.#nd(),this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${EX}--show`),this.button.classList.remove(`${Eq}--active`),this.localStorage.isActive=!1,ht.setStateObject(E5,this.localStorage)}#k(t){this.localStorage.isActive&&this.activateTool()}#iF(t){mK(t,mQ.coordinatesTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#eI(t){let i=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(i)}#nc(){this.localStorage.coordinatesFormat=this.uiRefCoordinatesFormat.value,ht.setStateObject(E5,this.localStorage)}#tD(t){this.doCreateTooltipCoordinates(t),this.shouldUpdateToolboxCoordinatesOnHover()&&this.doCreateToolboxCoordinates(t)}#ey(t){this.doCopyCoordinatesAsync(t),this.shouldCopyCoordinatesOnClick()||this.toolboxCoordinates(t);let i=this.doCreateToolCoordinatesList(t.coordinate);this.options.onMapClicked&&this.options.onMapClicked(i)}shouldCopyCoordinatesOnClick(){return gP.getSetting(gf.copyCoordinatesOnClick)}shouldUpdateToolboxCoordinatesOnHover(){return gP.getSetting(gf.updateToolboxCoordinatesOnHover)}toDecimalDegrees(t,i){t.innerHTML=`
            ${parseFloat(i[1]).toFixed(4)}, 
            ${parseFloat(i[0]).toFixed(4)}
        `}toDegreeMinutesSeconds(t,i){t.innerHTML=ey(i)}#nu(){let t=this.getMap();t&&(mO.getProjections().forEach(t=>{let i=A6.createElement({element:"tr"}),n=A6.createElement({element:"th",text:t.name,title:t.code,class:"oltb-tippy"});A6.appendChildren(i,[n]);let r=A6.createElement({element:"tr"}),s=A6.createElement({element:"td",text:"-"});A6.appendChildren(r,[s]),A6.appendChildren(this.uiRefCoordinatesTable,[i,r]),this.projections.set(t.code,s)}),this.tooltipItem=gV.push(EJ),this.onPointerMoveListener=t.on(A8.openLayers.pointerMove,this.#tD.bind(this)),this.onMapClickListener=t.on(A8.browser.click,this.#ey.bind(this)))}#nd(){A6.clearElement(this.uiRefCoordinatesTable),gV.pop(EJ),X(this.onPointerMoveListener),X(this.onMapClickListener)}doClearState(){this.localStorage=E(an).cloneDeep(E4),ht.setStateObject(E5,E4)}doToggleToolboxSection(t){let i=window.document.getElementById(t),n=A3.getConfig().animationDuration.fast;i?.slideToggle(n,t=>{this.localStorage.isCollapsed=t,ht.setStateObject(E5,this.localStorage)})}doCreateToolCoordinatesList(t){let i=mO.getProjections(),n=[];return i.forEach(i=>{let r=i_(t,A3.getConfig().projection.default,i.code),s=ey(r);n.push({code:i.code,name:i.name,coordinates:r,prettyCoordinates:s})}),n}doCreateTooltipCoordinates(t){let i=A3.getConfig().projection,n=ey(i_(t.coordinate,i.default,i.wgs84));this.tooltipItem.innerHTML=n}doCreateToolboxCoordinates(t){mO.getProjections().forEach(i=>{let n=i_(t.coordinate,A3.getConfig().projection.default,i.code),r=this.uiRefCoordinatesFormat.value,s=this.projections.get(i.code);"DMS"===r?this.toDegreeMinutesSeconds(s,n):this.toDecimalDegrees(s,n)})}async doCopyCoordinatesAsync(t){if(!this.shouldCopyCoordinatesOnClick()||gC.hasActiveTool())return;let i=A3.getConfig().projection,n=ey(i_(t.coordinate,i.default,i.wgs84));try{await fH.copyAsync(n),c9.info({i18nKey:`${E0}.toasts.infos.copyCoordinates`,autoremove:!0})}catch(t){A0.logError(EY,"doCopyCoordinatesAsync",{message:"Failed to copy coordinates",error:t}),c9.error({i18nKey:`${E0}.toasts.errors.copyCoordinates`})}}}var an=I("f1q41");const E6="translation-tool.js",E8="oltb-tool-button",E7="tools.translationTool",E9=Object.freeze({onInitiated:void 0,onClicked:void 0});class Bt extends mk{constructor(t={}){super({filename:E6});let i=up({path:ug.translate.mixed,class:`${E8}__icon`}),n=c1.get(E7),r=A6.createElement({element:"button",html:i,class:E8,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.translationTool})`,"data-tippy-content-post":`(${mQ.translationTool})`,"data-oltb-i18n":`${E7}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.languageDialog=void 0,this.options=E(an).merge(E(an).cloneDeep(E9),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.askToChangeLanguage()}#tq(t){mK(t,mQ.translationTool)&&this.onClickTool(t)}askToChangeLanguage(){if(this.languageDialog)return;let t=c1.getLanguages(),i=c1.getActiveLanguage(),n=c1.get(`${E7}.dialogs.selects.changeLanguage`);this.languageDialog=fO.select({title:n.title,message:`${n.message} <strong>${i.text}</strong>`,value:i.value,options:t,confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:t=>{this.doChangeLanguage(t),this.languageDialog=void 0},onCancel:()=>{this.languageDialog=void 0}})}doChangeLanguage(t){A0.logInformation(E6,"doChangeLanguage",{from:t.from,to:t.to}),c1.setActiveLanguage(t.to)}}const Be="tools.hiddenAboutTool";class Bi extends mk{constructor(){super({filename:"hidden-about-tool.js"}),this.icon=up({path:ug.gitHub.mixed}),this.aboutInfoModal=void 0,this.#eC()}getName(){return super.getName()}#eC(){mz.addItem({}),mz.addItem({icon:this.icon,i18nKey:`${Be}.contextItems.about`,fn:this.#ng.bind(this)})}#ng(t,i,n){this.doShowAboutModal()}doShowAboutModal(){if(this.aboutInfoModal)return;let t=A3.getConfig(),i=c1.get(`${Be}.modals.about`),n=`
            <p>${i.version} ${t.toolbar.version}</p>
            <p>${i.developedBy} <a href="//github.com/qulle/oltb" target="_blank" class="oltb-link">github.com/qulle/oltb</a></p>
            <p>${i.usingOpenLayers} <a href="//openlayers.org/en/v${t.openLayers.version}/apidoc/" target="_blank" class="oltb-link">${t.openLayers.version}</a></p>
        `;this.aboutInfoModal=_F.create({title:i.title,content:n,onClose:()=>{this.aboutInfoModal=void 0}})}}var an=I("f1q41");const Bn="oltb-func-btn",Br="oltb-info-window-marker",Bs="commons",Bo=Object.freeze({onAdded:void 0,onRemoved:void 0,onEdited:void 0});class Ba extends mk{constructor(t={}){super({filename:"hidden-marker-tool.js"}),this.iconMarkerModal=void 0,this.options=E(an).merge(E(an).cloneDeep(Bo),t),this.createIcon=up({path:ug.plusLarge.stroked}),this.#eC(),this.attachGlobalListeners()}attachGlobalListeners(){this.onWindowFeatureEditedBind=this.#nf.bind(this),this.onWindowFeatureRemovedBind=this.#np.bind(this),window.addEventListener(A8.custom.featureEdited,this.onWindowFeatureEditedBind),window.addEventListener(A8.custom.featureRemoved,this.onWindowFeatureRemovedBind)}detachGlobalListeners(){window.removeEventListener(A8.custom.featureEdited,this.onWindowFeatureEditedBind),window.removeEventListener(A8.custom.featureRemoved,this.onWindowFeatureRemovedBind)}getName(){return super.getName()}#eC(){mz.addItem({icon:this.createIcon,i18nKey:"tools.hiddenMarkerTool.contextItems.createMarker",fn:this.#nm.bind(this)}),mz.addItem({})}#nm(t,i,n){this.doShowIconMarkerModal(i)}#nf(t){this.options.onEdited&&this.options.onEdited(t.detail.before,t.detail.after)}#np(t){this.options.onRemoved&&this.options.onRemoved(t.detail.feature)}#n_(t){this.doAddIconMarker(t)}doShowIconMarkerModal(t){this.iconMarkerModal||(this.iconMarkerModal=new fe({coordinates:t,onCreate:t=>{this.#n_(t)},onClose:()=>{this.iconMarkerModal=void 0}}))}doAddMarkerToMap(t){dY.getActiveFeatureLayer({fallback:"Markers"}).getLayer().getSource().addFeature(t)}doAddIconMarker(t){let i=[Number(t.longitude),Number(t.latitude)],n=c1.get(`${Bs}.titles`),r=ey(i),s={title:t.title,content:`
                <p>${t.description}</p>
            `,footer:`
                <span class="oltb-info-window__coordinates">${r}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${Bn} ${Bn}--delete oltb-tippy" data-oltb-i18n="${Bs}.titles.delete" title="${n.delete}" id="${Br}-remove"></button>
                    <button class="${Bn} ${Bn}--crosshair oltb-tippy" data-oltb-i18n="${Bs}.titles.copyCoordinates" title="${n.copyCoordinates}" id="${Br}-copy-coordinates" data-oltb-coordinates="${r}"></button>
                    <button class="${Bn} ${Bn}--copy oltb-tippy" data-oltb-i18n="${Bs}.titles.copyText" title="${n.copyText}" id="${Br}-copy-text" data-oltb-copy="${t.title}, ${t.description}"></button>
                    <button class="${Bn} ${Bn}--edit oltb-tippy" data-oltb-i18n="${Bs}.titles.edit" title="${n.edit}" id="${Br}-edit"></button>
                    <button class="${Bn} ${Bn}--layer oltb-tippy" data-oltb-i18n="${Bs}.titles.showLayer" title="${n.showLayer}" id="${Br}-show-layer"></button>
                </div>
            `},o=dK.generateIconMarker({lon:i[0],lat:i[1],title:t.title,description:t.description,infoWindow:s,marker:{fill:t.markerFill,stroke:t.markerStroke},icon:{key:t.icon,fill:t.iconFill,stroke:t.iconStroke},label:{text:t.label,fill:t.labelFill,stroke:t.labelStroke,strokeWidth:t.labelStrokeWidth}});return this.doAddMarkerToMap(o),this.options.onAdded&&this.options.onAdded(o),o}}var an=(I("f1q41"),I("f1q41"));const Bl="oltb-import-layer-modal",BA="modalExtensions.importLayerModal",Bh=Object.freeze({onImport:void 0,onCancel:void 0});class Bc extends gJ{#tZ=[];constructor(t={}){super({filename:"import-layer-modal.js",title:c1.get(`${BA}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(Bh),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=c1.get(`${BA}.form`),i=[],n=[];mO.getProjections().forEach(t=>{i.push({text:`${t.name} (${t.code})`,value:t.code}),n.push({text:`${t.name} (${t.code})`,value:t.code})});let r=A3.getConfig().projection,[s,o]=g4({idPrefix:Bl,idPostfix:"-feature-projection",text:t.featureProjection,options:i,value:r.default}),[a,l]=g4({idPrefix:Bl,idPostfix:"-data-projection",text:t.dataProjection,options:n,value:r.wgs84}),A=A6.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),h=A6.createElement({element:"button",text:t.import,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#ny({featureProjection:o.value.trim(),dataProjection:l.value.trim()})}}}),c=A6.createElement({element:"button",text:t.cancel,class:`oltb-dialog__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(A,[c,h]);let u=A6.createElement({element:"div",class:"oltb-modal__content"});A6.appendChildren(u,[s,a,A]),this.#tZ=[c,h],this.show(u)}#ny(t){this.close(),this.options.onImport&&this.options.onImport(t)}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#tZ}}const Bu="import-vector-layer-tool.js",Bd="oltb-tool-button",Bg="tools.importVectorLayerTool",Bf=Object.freeze({onInitiated:void 0,onClicked:void 0,onImported:void 0,onError:void 0});class Bp extends mk{constructor(t={}){super({filename:Bu});let i=up({path:ug.folderOpen.stroked,class:`${Bd}__icon`}),n=c1.get(Bg),r=A6.createElement({element:"button",html:i,class:Bd,attributes:{type:"button","data-tippy-content":`${n.title} (${mQ.importVectorLayerTool})`,"data-tippy-content-post":`(${mQ.importVectorLayerTool})`,"data-oltb-i18n":`${Bg}.title`},listeners:{click:this.onClickTool.bind(this)}});A6.appendChildren(this.element,[r]),this.button=r,this.fileReader=void 0,this.importLayerModal=void 0,this.options=E(an).merge(E(an).cloneDeep(Bf),t),this.inputDialog=this.#nw(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#tq.bind(this),window.addEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(A8.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.importLayerModal||this.inputDialog.click()}#tq(t){mK(t,mQ.importVectorLayerTool)&&this.onClickTool(t)}#nw(){return A6.createElement({element:"input",attributes:{type:"file",accept:".geojson, .kml"},listeners:{change:this.#nv.bind(this)}})}#nv(t){let i=t.target;this.fileReader=new FileReader,this.fileReader.addEventListener(A8.browser.load,this.#nb.bind(this,i)),this.fileReader.readAsText(i.files[0])}#nb(t){if(this.importLayerModal)return;let i=t.files[0].name;this.askToImportLayer(i)}#nC(t,i){this.doImportLayer(t,i)}askToImportLayer(t){this.importLayerModal||(this.importLayerModal=new Bc({onImport:i=>{this.#nC(t,i)},onClose:()=>{this.importLayerModal=void 0}}))}doAddFeaturesToMap(t,i){dY.addFeatureLayer({name:i}).getLayer().getSource().addFeatures(t)}doImportLayer(t,i){A0.logDebug(Bu,"doImportLayer",{file:t,featureProjection:i.featureProjection,dataProjection:i.dataProjection});try{let n=t.split(".")[0],r=t.split(".").pop().toLowerCase(),s=Object.keys(b4).find(t=>t.toLowerCase()===r);if(!s){A0.logError(Bu,"doImportLayer",{title:"Error",message:`The layer format is not supported (${s})`}),c9.error({i18nKey:`${Bg}.toasts.errors.unsupportedFormat`});return}let o=b3(s).readFeatures(this.fileReader.result,{featureProjection:i.featureProjection,dataProjection:i.dataProjection});this.doAddFeaturesToMap(o,n),this.options.onImported&&this.options.onImported(o)}catch(i){A0.logError(Bu,"doImportLayer",{message:"Failed to import vector layer",error:i}),c9.error({i18nKey:`${Bg}.toasts.errors.importFailed`}),this.options.onError&&this.options.onError(t,i)}}}var an=(I("f1q41"),I("f1q41"));const Bm="oltb-coordinates-modal",B_="modalExtensions.coordinateModal",By=Object.freeze({onNavigate:void 0,onCancel:void 0});class Bw extends gJ{#tZ=[];constructor(t={}){super({filename:"coordinate-model.js",title:c1.get(`${B_}.title`),...t}),this.options=E(an).merge(E(an).cloneDeep(By),t),this.#tJ()}getName(){return super.getName()}#tJ(){let t=c1.get(`${B_}.form`),[i,n]=g2({idPrefix:Bm,idPostfix:"-lat",text:t.latitude,placeholder:"51.5072"}),[r,s]=g2({idPrefix:Bm,idPostfix:"-lon",text:t.longitude,placeholder:"0.1276"}),o=A6.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),a=A6.createElement({element:"button",text:t.navigateTo,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#nx([s.value.trim(),n.value.trim()])}}}),l=A6.createElement({element:"button",text:t.cancel,class:`oltb-dialog__btn oltb-btn ${g0()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#t1.bind(this)}});A6.appendChildren(o,[l,a]);let A=A6.createElement({element:"div",class:"oltb-modal__content"}),h=A6.createElement({element:"label",text:t.description,class:"oltb-label oltb-mt-1"});A6.appendChildren(A,[i,r,h,o]),this.#tZ=[l,a],this.show(A)}#nx(t){this.close(),this.options.onNavigate&&this.options.onNavigate(t)}#t1(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#tZ}}const Bv="hidden-map-navigation-tool.js",Bb="oltb-func-btn",BC="oltb-info-window-marker",Bx="tools.hiddenMapNavigationTool",BE="commons",BB=Object.freeze({focusZoom:2}),BS=A3.getConfig().location.default,BI=he.mapData,BL=Object.freeze({lon:BS.lon,lat:BS.lat,zoom:BS.zoom,rotation:BS.rotation}),BF=Object.freeze({lon:18.0685,lat:59.3293,title:"Marker",description:"",icon:"geoMarker.filled",iconFill:"#FFFFFFFF",iconStroke:"#FFFFFFFF",markerFill:"#0166A5FF",markerStroke:"#0166A566",layerName:"URL Marker",label:"Marker",labelFill:"#FFFFFFFF",labelStroke:"#3B4352CC",labelStrokeWidth:8,labelFont:"14px Calibri",labelUseEllipsisAfter:20,projection:A3.getConfig().projection.wgs84,zoom:8});class BM extends mk{constructor(t={}){super({filename:Bv}),this.options=E(an).merge(E(an).cloneDeep(BB),t),this.coordinatesModal=void 0,this.localStorage=ht.getAndMergeStateObject(BI,BL),this.copyIcon=up({path:ug.copy.stroked}),this.coordinatesIcon=up({path:ug.crosshair.stroked}),this.moveCenterIcon=up({path:ug.arrowsMove.stroked}),this.focusHereIcon=up({path:ug.aspectRatio.stroked}),this.#eC(),this.attachGlobalListeners()}attachGlobalListeners(){this.onOLTBReadyBind=this.#k.bind(this),window.addEventListener(A8.custom.ready,this.onOLTBReadyBind)}detachGlobalListeners(){window.removeEventListener(A8.custom.ready,this.onOLTBReadyBind)}getName(){return super.getName()}#eC(){mz.addItem({icon:this.copyIcon,i18nKey:`${Bx}.contextItems.copyCoordinates`,fn:this.#nE.bind(this)}),mz.addItem({}),mz.addItem({icon:this.coordinatesIcon,i18nKey:`${Bx}.contextItems.navigateToCoordinates`,fn:this.#nB.bind(this)}),mz.addItem({icon:this.moveCenterIcon,i18nKey:`${Bx}.contextItems.centerMap`,fn:this.#nS.bind(this)}),mz.addItem({icon:this.focusHereIcon,i18nKey:`${Bx}.contextItems.focusMap`,fn:this.#nI.bind(this)}),mz.addItem({})}#nE(t,i,n){this.doCopyCoordinatesAsync(i)}#nB(t,i,n){this.doShowCoordinatesModal(t)}#nS(t,i,n){mU({map:t,coordinates:i,zoom:t.getView().getZoom()})}#nI(t,i,n){mU({map:t,coordinates:i,zoom:this.options.focusZoom})}#k(t){let i=this.getMap();i&&(i.on(A8.openLayers.moveEnd,this.#tK.bind(this)),this.doDetectUrlMarker())}#nL(t){return(t=t.toUpperCase()).startsWith("EPSG:")||(t=`EPSG:${t}`),t}#nF(t){return t.startsWith("#")?t:`#${t}`}#nM(t){let i=mO.hasProjection(t);return i||(A0.logError(Bv,"hasProjection",{message:"Missing projection definition",projection:t}),c9.error({i18nKey:`${Bx}.toasts.errors.missingProjection`})),i}#nT(t){this.getMap()&&this.doParseUrlMarker(t)}#tK(t){let i=this.getMap();i&&this.setLastPosition(i)}setLastPosition(t){let i=t.getView(),n=iu(i.getCenter());this.localStorage.lon=n[0],this.localStorage.lat=n[1],this.localStorage.zoom=i.getZoom(),this.localStorage.rotation=i.getRotation(),ht.setStateObject(BI,this.localStorage)}async doCopyCoordinatesAsync(t){let i=ey(t);try{await fH.copyAsync(i),c9.info({i18nKey:`${Bx}.toasts.infos.coordinatesCopied`,autoremove:!0})}catch(t){A0.logError(Bv,"doCopyCoordinatesAsync",{message:"Failed to copy coordinates",error:t}),c9.error({i18nKey:`${Bx}.toasts.errors.coordinatesCopy`})}}doDetectUrlMarker(){let t=A3.getConfig().urlParameter.marker,i=gm.getParameter(t,!1);i&&this.#nT(i)}doParseUrlMarker(t){let i=this.getMap();if(i)try{let n=JSON.parse(t),r=E(an).merge(E(an).cloneDeep(BF),n);A0.logDebug(Bv,"doParseUrlMarker",r);let s=[Number(r.lon),Number(r.lat)],o=this.doAddIconMarker(r,s);this.doFocusMarker(i,o,s,A3.getConfig().marker.focusZoom)}catch(t){A0.logError(Bv,"doParseUrlMarker",{message:"Failed to parse URL Marker",error:t}),c9.error({i18nKey:`${Bx}.toasts.errors.parseUrlMarker`})}}doFocusMarker(t,i,n,r){mU({map:t,coordinates:n,zoom:r,onDone:t=>{f0.tryPulseAnimation(i),f0.showOverlay(i,ic(n))}})}doAddMarkerToMap(t,i){dY.addFeatureLayer({name:i}).getLayer().getSource().addFeature(t)}doAddIconMarker(t,i){if(t.markerFill=this.#nF(t.markerFill),t.markerStroke=this.#nF(t.markerStroke),t.projection=this.#nL(t.projection),!this.#nM(t.projection))return;let n=i_(i,t.projection,A3.getConfig().projection.wgs84),r=c1.get(`${BE}.titles`),s=ey(n),o={title:t.title,content:`
                <p>${t.description}</p>
            `,footer:`
                <span class="oltb-info-window__coordinates">${s}</span>
                <div class="oltb-info-window__buttons-wrapper">
                    <button class="${Bb} ${Bb}--delete oltb-tippy" data-oltb-i18n="${BE}.titles.delete" title="${r.delete}" id="${BC}-remove"></button>
                    <button class="${Bb} ${Bb}--crosshair oltb-tippy" data-oltb-i18n="${BE}.titles.copyCoordinates" title="${r.copyCoordinates}" id="${BC}-copy-coordinates" data-oltb-coordinates="${s}"></button>
                    <button class="${Bb} ${Bb}--copy oltb-tippy" data-oltb-i18n="${BE}.titles.copyText" title="${r.copyText}" id="${BC}-copy-text" data-oltb-copy="${t.title}, ${t.description}"></button>
                    <button class="${Bb} ${Bb}--layer oltb-tippy" data-oltb-i18n="${BE}.titles.showLayer" title="${r.showLayer}" id="${BC}-show-layer"></button>
                </div>
            `},a=dK.generateIconMarker({lon:n[0],lat:n[1],title:t.title,description:t.description,infoWindow:o,marker:{fill:t.markerFill,stroke:t.markerStroke},icon:{key:t.icon,fill:t.iconFill,stroke:t.iconStroke},label:{text:t.label,font:t.labelFont,fill:t.labelFill,stroke:t.labelStroke,strokeWidth:t.labelStrokeWidth}});return this.doAddMarkerToMap(a,t.layerName),a}doShowCoordinatesModal(t){this.coordinatesModal||(this.coordinatesModal=new Bw({onNavigate:i=>{mU({map:t,coordinates:i,zoom:t.getView().getZoom()})},onClose:()=>{this.coordinatesModal=void 0}}))}}gK.initAsync([{manager:A0},{manager:cz},{manager:ux},{manager:class extends AX{static async initAsync(t={}){return A0.logDebug(gQ,"initAsync","Initialization started"),window.addEventListener(A8.browser.error,this.#nl),new Promise(t=>{t({filename:gQ,result:!0})})}static setMap(t){}static getName(){return gQ}static #nl(t){t.preventDefault(),window.console.error(t),A0.logFatal(gQ,"onError",{info:"Global uncaught error",error:t.error}),c9.error({i18nKey:"managers.errorManager.toasts.errors.uncaughtException"})}}},{manager:dK},{manager:ht,options:{ignoredKeys:[]}},{manager:hr},{manager:A3},{manager:c1},{manager:mO},{manager:dY},{manager:cj},{manager:c$},{manager:gV},{manager:gm},{manager:gC},{manager:gP},{manager:gU},{manager:f0},{manager:class extends AX{static async initAsync(t={}){return A0.logDebug(mD,"initAsync","Initialization started"),window.addEventListener(A8.browser.mouseDown,this.#nR.bind(this)),window.addEventListener(A8.browser.keyDown,this.#nO.bind(this)),new Promise(t=>{t({filename:mD,result:!0})})}static setMap(t){}static getName(){return mD}static #nO(t){t.key===gj.valueTab&&this.addAccessibilityClass()}static #nR(t){this.removeAccessibilityClass()}static addAccessibilityClass(){window.document.body.classList.add(mP)}static removeAccessibilityClass(){window.document.body.classList.remove(mP)}}},{manager:uh},{manager:gv}]).then(()=>{BT()});const BT=()=>{let t=A3.getConfig().location.default,i=he.mapData,n=Object.freeze({lon:t.lon,lat:t.lat,zoom:t.zoom,rotation:t.rotation}),r=ht.getAndMergeStateObject(i,n),s=A3.getConfig().projection.default,o=new of({interactions:rh({mouseWheelZoom:!1,altShiftDragRotate:!1,dragPan:!1,keyboard:!1}).extend([new ra({condition:function(t){return nJ(t)||gP.getSetting(gf.mouseWheelZoom)}}),new n7({condition:function(t){return nj(t)&&gP.getSetting(gf.altShiftDragRotate)}}),new n8({condition:function(t){return(nJ(t)||gP.getSetting(gf.dragPan))&&!nj(t)&&!n1(t)}}),new ro({condition:function(t){return gP.getSetting(gf.keyboardZoom)&&n2(t)}}),new rs({condition:function(t){return gP.getSetting(gf.keyboardPan)&&n2(t)}})]),controls:nN({zoom:!1,rotate:!1}).extend([new Ba({onAdded:function(t){console.log("HiddenMarkerTool: Marker added",t)},onRemoved:function(t){console.log("HiddenMarkerTool: Marker removed",t)},onEdited:function(t,i){console.log("HiddenMarkerTool: Marker edited",t,i)}}),new BM({focusZoom:10}),new mZ({lon:18.1201,lat:35.3518,zoom:3,onInitiated:function(){console.log("HomeTool: Initiated")},onClicked:function(){console.log("HomeTool: Clicked")},onBrowserStateCleared:function(){console.log("HomeTool: State cleared")},onNavigatedHome:function(t){console.log("HomeTool: Navigated home",t)}}),new Cg({onInitiated:function(){console.log("ZoomInTool: Initiated")},onClicked:function(){console.log("ZoomInTool: Clicked")},onZoomed:function(t){console.log("ZoomInTool: Zoomed in",t)}}),new CD({onInitiated:function(){console.log("ZoomOutTool: Initiated")},onClicked:function(){console.log("ZoomOutTool: Clicked")},onZoomed:function(t){console.log("ZoomOutTool: Zoomed out",t)}}),new CW({onInitiated:function(){console.log("ZoomboxTool: Initiated")},onClicked:function(){console.log("ZoomboxTool: Clicked")},onBrowserStateCleared:function(){console.log("ZoomboxTool: State cleared")},onStart:function(t){console.log("ZoomboxTool: Start",t)},onEnd:function(t){console.log("ZoomboxTool: End",t)},onDrag:function(t){console.log("ZoomboxTool: Drag",t)},onCancel:function(t){console.log("ZoomboxTool: Cancel",t)},onError:function(t){console.log("ZoomboxTool: Error",t)}}),new E$({onInitiated:function(){console.log("FullscreenTool: Initiated")},onClicked:function(){console.log("FullscreenTool: Clicked")},onEnter:function(t){console.log("FullscreenTool: Enter fullscreen",t)},onLeave:function(t){console.log("FullscreenTool: Leave fullscreen",t)}}),new En({filename:"map-image-export",appendTime:!0,onInitiated:function(){console.log("ExportPngTool: Initiated")},onClicked:function(){console.log("ExportPngTool: Clicked")},onExported:function(t,i){console.log("ExportPngTool: PNG exported",t,i)},onError:function(t){console.log("ExportPngTool: Error",t)}}),new m7({onInitiated:function(){console.log("DrawTool: Initiated")},onClicked:function(){console.log("DrawTool: Clicked")},onBrowserStateCleared:function(){console.log("DrawTool: State cleared")},onStart:function(t){console.log("DrawTool: Start")},onEnd:function(t){console.log("DrawTool: End",t.feature)},onAbort:function(t){console.log("DrawTool: Abort")},onError:function(t){console.log("DrawTool: Error")},onIntersected:function(t,i){console.log("DrawTool: Intersected",t.feature),console.log("DrawTool: Intersected features",i)},onSnapped:function(t){console.log("DrawTool: Snapped")},onUnSnapped:function(t){console.log("DrawTool: UnSnapped")}}),new Cx({onInitiated:function(){console.log("MeasureTool: Initiated")},onClicked:function(){console.log("MeasureTool: Clicked")},onBrowserStateCleared:function(){console.log("MeasureTool: State cleared")},onStart:function(t){console.log("MeasureTool: Start")},onEnd:function(t){console.log("MeasureTool: End",t.feature)},onAbort:function(t){console.log("MeasureTool: Abort")},onError:function(t){console.log("MeasureTool: Error")}}),new _L({hitTolerance:5,onInitiated:function(){console.log("EditTool: Initiated")},onClicked:function(){console.log("EditTool: Clicked")},onBrowserStateCleared:function(){console.log("EditTool: Sstate cleared")},onStyleChange:function(t,i){console.log("EditTool: Style changed")},onCutFeatures:function(t){console.log("EditTool: Cut features",t)},onCopyFeatures:function(t){console.log("EditTool: Copied features",t)},onPasteFeatures:function(t,i){console.log("EditTool: Pasted features",t)},onShapeOperation:function(t,i,n,r){console.log("EditTool: Shape operation",t)},onSelectAdd:function(t){console.log("EditTool: Selected feature")},onSelectRemove:function(t){console.log("EditTool: Deselected feature")},onModifyStart:function(t){console.log("EditTool: Modify start")},onModifyEnd:function(t){console.log("EditTool: Modify end")},onTranslateStart:function(t){console.log("EditTool: Translate start")},onTranslateEnd:function(t){console.log("EditTool: Translate end")},onRemovedFeatures:function(t){console.log("EditTool: Removed features",t)},onError:function(t){console.log("EditTool: Error")},onSnapped:function(t){console.log("EditTool: Snapped")},onUnSnapped:function(t){console.log("EditTool: UnSnapped")}}),new C6({onStart:function(t){console.log("ScissorsTool: Start")},onEnd:function(t){console.log("ScissorsTool: End",t.feature)},onAbort:function(t){console.log("ScissorsTool: Abort")},onError:function(t){console.log("ScissorsTool: Error")},onSnapped:function(t){console.log("ScissorsTool: Snapped")},onUnSnapped:function(t){console.log("ScissorsTool: UnSnapped")}}),new xS({markerLayerVisibleOnLoad:!0,markerLabelUseEllipsisAfter:20,markerLabelUseUpperCase:!1,bookmarks:[{id:"6812cc22-f490-46b7-a9f3-42eb9ea58ac2",name:"Custom Bookmark",zoom:5,coordinates:[57.123,16.456]}],onInitiated:function(){console.log("BookmarkTool: Initiated")},onClicked:function(){console.log("BookmarkTool: Clicked")},onBrowserStateCleared:function(){console.log("BookmarkTool: State cleared")},onAdded:function(t){console.log("BookmarkTool: Added",t)},onRemoved:function(t){console.log("BookmarkTool: Removed",t)},onRenamed:function(t){console.log("BookmarkTool: Renamed",t)},onZoomedTo:function(t){console.log("BookmarkTool: Zoomed to",t)},onCleared:function(){console.log("BookmarkTool: Cleared")},onDragged:function(t,i){console.log("BookmarkTool: Dragged",t,i)}}),new Ch({onInitiated:function(){console.log("LayerTool: Initiated")},onClicked:function(){console.log("LayerTool: Clicked")},onBrowserStateCleared:function(){console.log("LayerTool: State cleared")},onMapLayerAdded:function(t){console.log("LayerTool: Map layer added",t)},onMapLayerRemoved:function(t){console.log("LayerTool: Map layer removed",t)},onMapLayerRenamed:function(t){console.log("LayerTool: Map layer renamed",t)},onMapLayerVisibilityChanged:function(t){console.log("LayerTool: Map layer visibility change",t)},onMapLayerDragged(t,i){console.log("LayerTool: Map layer dragged",t,i)},onFeatureLayerAdded:function(t){console.log("LayerTool: Feature layer added",t)},onFeatureLayerRemoved:function(t){console.log("LayerTool: Feature layer removed",t)},onFeatureLayerRenamed:function(t){console.log("LayerTool: Feature layer renamed",t)},onFeatureLayerVisibilityChanged:function(t){console.log("LayerTool: Feature layer visibility change",t)},onFeatureLayerDownloaded:function(t,i,n){console.log("LayerTool: Feature layer downloaded",t,i,n)},onFeatureLayerDragged(t,i){console.log("LayerTool: Feature layer dragged",t,i)}}),new x8({onInitiated:function(){console.log("SplitViewTool: Initiated")},onClicked:function(){console.log("SplitViewTool: Clicked")},onBrowserStateCleared:function(){console.log("SplitViewTool: State cleared")}}),new xg({onInitiated:function(){console.log("OverviewTool: Initiated")},onClicked:function(){console.log("OverviewTool: Clicked")},onBrowserStateCleared:function(){console.log("OverviewTool: State cleared")}}),new EE({color:"#3B4352E6",dashed:!0,width:2,showLabels:!0,wrapX:!0,onInitiated:function(){console.log("GraticuleTool: Initiated")},onClicked:function(){console.log("GraticuleTool: Clicked")},onBrowserStateCleared:function(){console.log("GraticuleTool: State cleared")}}),new CM({onInitiated:function(){console.log("MagnifyTool: Initiated")},onClicked:function(){console.log("MagnifyTool: Clicked")},onBrowserStateCleared:function(){console.log("MagnifyTool: State cleared")}}),new EV({onInitiated:function(){console.log("ResetNorthTool: Initiated")},onClicked:function(){console.log("ResetNorthTool: Clicked")},onReset:function(t){console.log("ResetNorthTool: North reset",t)}}),new E3({onInitiated:function(){console.log("CoordinatesTool: Initiated")},onClicked:function(){console.log("CoordinatesTool: Clicked")},onBrowserStateCleared:function(){console.log("CoordinatesTool: State cleared")},onMapClicked:function(t){console.log("CoordinatesTool: Map clicked at",t)}}),new EN({enableHighAccuracy:!0,timeout:1e4,description:"This is the location that the browser was able to find. It might not be your actual location.",markerLabelUseEllipsisAfter:20,markerLabelUseUpperCase:!1,onInitiated:function(){console.log("MyLocationTool: Initiated")},onClicked:function(){console.log("MyLocationTool: Clicked")},onLocationFound:function(t){console.log("MyLocationTool: Location found",t)},onError:function(t){console.log("MyLocationTool: Error",t)}}),new Bp({onInitiated:function(){console.log("ImportVectorLayerTool: Initiated")},onClicked:function(){console.log("ImportVectorLayerTool: Clicked")},onImported:function(t){console.log("ImportVectorLayerTool: Imported",t)},onError:function(t,i){console.log("ImportVectorLayerTool: Error",t,i)}}),new Ed({units:"metric",onInitiated:function(){console.log("ScaleLineTool: Initiated")},onClicked:function(){console.log("ScaleLineTool: Clicked")},onBrowserStateCleared:function(){console.log("ScaleLineTool: State cleared")}}),new CU({onInitiated:function(){console.log("RefreshTool: Initiated")},onClicked:function(){console.log("RefreshTool: Clicked")}}),new _j({onInitiated:function(){console.log("ThemeTool: Initiated")},onClicked:function(){console.log("ThemeTool: Clicked")},onBrowserStateCleared:function(){console.log("ThemeTool: State cleared")},onChanged:function(t){console.log("ThemeTool: Changed to",t)}}),new xO({onInitiated:function(){console.log("DirectionTool: Initiated")},onClicked:function(){console.log("DirectionTool: Clicked")},onBrowserStateCleared:function(){console.log("DirectionTool: State cleared")},onChanged:function(t){console.log("DirectionTool: Changed to",t)}}),new C0({onInitiated:function(){console.log("ToolboxTool: Initiated")},onClicked:function(){console.log("ToolboxTool: Clicked")},onBrowserStateCleared:function(){console.log("ToolboxTool: State cleared")},onChanged:function(t){console.log("ToolboxTool: Changed to",t)}}),new _O({title:"Hey!",content:"<p>This is a <strong>modal window</strong>, here you can place some text about your application or links to external resources.</p>",onInitiated:function(){console.log("InfoTool: Initiated")},onClicked:function(){console.log("InfoTool: Clicked")}}),new _U({url:"https://github.com/qulle/oltb",target:"_blank",onInitiated:function(){console.log("HelpTool: Initiated")},onClicked:function(){console.log("HelpTool: Clicked")}}),new xn({onInitiated:function(){console.log("SettingsTool: Initiated")},onClicked:function(){console.log("SettingsTool: Clicked")},onBrowserStateCleared:function(){console.log("SettingsTool: State cleared")}}),new Bt({onInitiated:function(){console.log("TranslationTool: Initiated")},onClicked:function(){console.log("TranslationTool: Clicked")}}),new xq({onlyWhenGetParameter:!1,onInitiated:function(){console.log("DebugInfoTool: Initiated")},onClicked:function(){console.log("DebugInfoTool: Clicked")}}),new Bi,new mz]),target:hr.getMapElement(),view:new nw({projection:io(s),center:ic([Number(r.lon),Number(r.lat)],s),zoom:r.zoom,rotation:r.rotation})});gK.setMap(o),gK.ready()};
//# sourceMappingURL=dev.0ece6a59.js.map
