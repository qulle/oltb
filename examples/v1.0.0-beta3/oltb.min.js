var oltb=function(){"use strict";var t="change",e="error",i="contextmenu",n="click",s="keydown",o="keypress",r="load",A="resize",a="touchmove",l="wheel",h={SINGLECLICK:"singleclick",CLICK:n,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function c(t,e){return t>e?1:t<e?-1:0}function u(t,e,i){const n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;{let s;if(i>0){for(s=1;s<n;++s)if(t[s]<e)return s-1}else if(i<0){for(s=1;s<n;++s)if(t[s]<=e)return s}else for(s=1;s<n;++s){if(t[s]==e)return s;if(t[s]<e)return"function"==typeof i?i(e,t[s-1],t[s])>0?s-1:s:t[s-1]-e<e-t[s]?s-1:s}return n-1}}function d(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function g(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let e=0;e<n;e++)t[t.length]=i[e]}function p(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function f(){return!0}function m(){return!1}function y(){}const _="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",B=_.includes("firefox");_.includes("safari")&&!_.includes("chrom")&&(_.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(_));const w=_.includes("webkit")&&!_.includes("edge"),C=_.includes("macintosh"),b="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,v="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,x="undefined"!=typeof Image&&Image.prototype.decode,E=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),F={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class S extends Error{constructor(t){const e=F[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}var I=S;function M(t,e){if(!t)throw new I(e)}function L(t){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),i);++n);return i}}const U=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Q=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)}(t)},T=f,k=function(t){const e=t.originalEvent;return 0==e.button&&!(w&&C&&e.ctrlKey)},R=m,P=function(t){return t.type==h.SINGLECLICK},D=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},O=function(t){const e=t.originalEvent;return!e.altKey&&(C?e.metaKey:e.ctrlKey)&&!e.shiftKey},N=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},H=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},G=function(t){const e=t.originalEvent;return M(void 0!==e,56),"mouse"==e.pointerType},K=function(t){const e=t.originalEvent;return M(void 0!==e,56),e.isPrimary&&0===e.button};var V=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},W="propertychange";var z=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function X(t){for(const e in t)delete t[e]}function Y(t){let e;for(e in t)return!1;return!e}var q=class extends z{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const s=e?new V(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),r=this.pendingRemovals_||(this.pendingRemovals_={});let A;i in o||(o[i]=0,r[i]=0),++o[i];for(let t=0,e=n.length;t<e;++t)if(A="handleEvent"in n[t]?n[t].handleEvent(s):n[t].call(this,s),!1===A||s.propagationStopped){A=!1;break}if(0==--o[i]){let t=r[i];for(delete r[i];t--;)this.removeEventListener(i,y);delete o[i]}return A}disposeInternal(){this.listeners_&&X(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=y,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}};function j(t,e,i,n,s){if(n&&n!==t&&(i=i.bind(n)),s){const n=i;i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function J(t,e,i,n){return j(t,e,i,n,!0)}function Z(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),X(t))}class $ extends q{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(t)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=j(this,t[s],e);return n}return j(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=J(this,t[s],e)}else i=J(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)tt(i);else if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}function tt(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)Z(t[e]);else Z(t)}function et(){throw new Error("Unimplemented abstract method.")}$.prototype.on,$.prototype.once,$.prototype.un;let it=0;function nt(t){return t.ol_uid||(t.ol_uid=String(++it))}class st extends V{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}var ot=class extends ${constructor(t){super(),this.on,this.once,this.un,nt(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new st(i,t,e)),i=W,this.hasListener(i)&&this.dispatchEvent(new st(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Y(this.values_)&&(this.values_=null),e||this.notify(t,i)}}},rt="active";function At(t){return Math.pow(t,3)}function at(t){return 1-At(1-t)}function lt(t){return 3*t*t-2*t*t*t}function ht(t){return t}function ct(t,e,i,n){const s=t.getZoom();if(void 0===s)return;const o=t.getConstrainedZoom(s+e),r=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:r,anchor:i,duration:void 0!==n?n:250,easing:at})}var ut=class extends ot{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(rt)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(rt,t)}setMap(t){this.map_=t}};var dt=class extends ut{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==h.DBLCLICK){const i=t.originalEvent,n=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;ct(n.getView(),o,s,this.duration_),i.preventDefault(),e=!0}return!e}};const gt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var pt=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||gt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const ft=6378137,mt=Math.PI*ft,yt=[-mt,-mt,mt,mt],_t=[-180,-85,180,85],Bt=ft*Math.log(Math.tan(Math.PI/2));class wt extends pt{constructor(t){super({code:t,units:"m",extent:yt,global:!0,worldExtent:_t,getPointResolution:function(t,e){return t/Math.cosh(e[1]/ft)}})}}const Ct=[new wt("EPSG:3857"),new wt("EPSG:102100"),new wt("EPSG:102113"),new wt("EPSG:900913"),new wt("http://www.opengis.net/def/crs/EPSG/0/3857"),new wt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function bt(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let s=0;s<n;s+=i){e[s]=mt*t[s]/180;let i=ft*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));i>Bt?i=Bt:i<-Bt&&(i=-Bt),e[s+1]=i}return e}function vt(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let s=0;s<n;s+=i)e[s]=180*t[s]/mt,e[s+1]=360*Math.atan(Math.exp(t[s+1]/ft))/Math.PI-90;return e}const xt=[-180,-90,180,90],Et=6378137*Math.PI/180;class Ft extends pt{constructor(t,e){super({code:t,units:"degrees",extent:xt,axisOrientation:e,global:!0,metersPerUnit:Et,worldExtent:xt})}}const St=[new Ft("CRS:84"),new Ft("EPSG:4326","neu"),new Ft("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ft("urn:ogc:def:crs:OGC:2:84"),new Ft("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ft("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ft("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let It={};let Mt={};function Lt(t,e,i){const n=t.getCode(),s=e.getCode();n in Mt||(Mt[n]={}),Mt[n][s]=i}function Ut(t,e){let i;return t in Mt&&e in Mt[t]&&(i=Mt[t][e]),i}var Qt=0,Tt=1,kt=2,Rt=4,Pt=8,Dt=16;function Ot(t){const e=Xt();for(let i=0,n=t.length;i<n;++i)te(e,t[i]);return e}function Nt(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Ht(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Gt(t,e,i){let n,s;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+s*s}function Kt(t,e){return Wt(t,e[0],e[1])}function Vt(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Wt(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function zt(t,e){const i=t[0],n=t[1],s=t[2],o=t[3],r=e[0],A=e[1];let a=Qt;return r<i?a|=Dt:r>s&&(a|=Rt),A<n?a|=Pt:A>o&&(a|=kt),a===Qt&&(a=Tt),a}function Xt(){return[1/0,1/0,-1/0,-1/0]}function Yt(t,e,i,n,s){return s?(s[0]=t,s[1]=e,s[2]=i,s[3]=n,s):[t,e,i,n]}function qt(t){return Yt(1/0,1/0,-1/0,-1/0,t)}function jt(t,e){const i=t[0],n=t[1];return Yt(i,n,i,n,e)}function Jt(t,e,i,n,s){return ee(qt(s),t,e,i,n)}function Zt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function $t(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function te(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ee(t,e,i,n,s){for(;i<n;i+=s)ie(t,e[i],e[i+1]);return t}function ie(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function ne(t,e){let i;return i=e(oe(t)),i||(i=e(re(t)),i||(i=e(ge(t)),i||(i=e(de(t)),i||!1)))}function se(t){let e=0;return me(t)||(e=pe(t)*ce(t)),e}function oe(t){return[t[0],t[1]]}function re(t){return[t[2],t[1]]}function Ae(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ae(t,e){let i;return"bottom-left"===e?i=oe(t):"bottom-right"===e?i=re(t):"top-left"===e?i=de(t):"top-right"===e?i=ge(t):M(!1,13),i}function le(t,e,i,n,s){const[o,r,A,a,l,h,c,u]=he(t,e,i,n);return Yt(Math.min(o,A,l,c),Math.min(r,a,h,u),Math.max(o,A,l,c),Math.max(r,a,h,u),s)}function he(t,e,i,n){const s=e*n[0]/2,o=e*n[1]/2,r=Math.cos(i),A=Math.sin(i),a=s*r,l=s*A,h=o*r,c=o*A,u=t[0],d=t[1];return[u-a+c,d-l-h,u-a-c,d-l+h,u+a-c,d+l+h,u+a+c,d+l-h,u-a+c,d-l-h]}function ce(t){return t[3]-t[1]}function ue(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return fe(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):qt(n),n}function de(t){return[t[0],t[3]]}function ge(t){return[t[2],t[3]]}function pe(t){return t[2]-t[0]}function fe(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function me(t){return t[2]<t[0]||t[3]<t[1]}function ye(t,e,i,n){let s=[];if(n>1){const e=t[2]-t[0],i=t[3]-t[1];for(let o=0;o<n;++o)s.push(t[0]+e*o/n,t[1],t[2],t[1]+i*o/n,t[2]-e*o/n,t[3],t[0],t[3]-i*o/n)}else s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(s,s,2);const o=[],r=[];for(let t=0,e=s.length;t<e;t+=2)o.push(s[t]),r.push(s[t+1]);return function(t,e,i){return Yt(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(o,r,i)}function _e(t,e){const i=e.getExtent(),n=Ae(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const e=pe(i),s=Math.floor((n[0]-i[0])/e)*e;t[0]-=s,t[2]-=s}return t}function Be(t,e,i){return Math.min(Math.max(t,e),i)}function we(t,e,i,n,s,o){const r=s-i,A=o-n;if(0!==r||0!==A){const a=((t-i)*r+(e-n)*A)/(r*r+A*A);a>1?(i=s,n=o):a>0&&(i+=r*a,n+=A*a)}return Ce(t,e,i,n)}function Ce(t,e,i,n){const s=i-t,o=n-e;return s*s+o*o}function be(t){return t*Math.PI/180}function ve(t,e){const i=t%e;return i*e<0?i+e:i}function xe(t,e,i){return t+i*(e-t)}function Ee(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function Fe(t,e){return Math.floor(Ee(t,e))}function Se(t,e){return Math.ceil(Ee(t,e))}function Ie(t,e,i){const n=void 0!==i?t.toFixed(i):""+t;let s=n.indexOf(".");return s=-1===s?n.length:s,s>e?n:new Array(1+e-s).join("0")+n}function Me(t,e){const i=t[0],n=t[1],s=e[0],o=e[1],r=s[0],A=s[1],a=o[0],l=o[1],h=a-r,c=l-A,u=0===h&&0===c?0:(h*(i-r)+c*(n-A))/(h*h+c*c||0);let d,g;return u<=0?(d=r,g=A):u>=1?(d=a,g=l):(d=r+u*h,g=A+u*c),[d,g]}function Le(t,e,i){const n=ve(e+180,360)-180,s=Math.abs(3600*n),o=i||0;let r=Math.floor(s/3600),A=Math.floor((s-3600*r)/60),a=Ee(s-3600*r-60*A,o);a>=60&&(a=0,A+=1),A>=60&&(A=0,r+=1);let l=r+"°";return 0===A&&0===a||(l+=" "+Ie(A,2)+"′"),0!==a&&(l+=" "+Ie(a,2,o)+"″"),0!==n&&(l+=" "+t.charAt(n<0?1:0)),l}function Ue(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function Qe(t,e){const i=Math.cos(e),n=Math.sin(e),s=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=s,t[1]=o,t}function Te(t,e){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function ke(t,e){return Math.sqrt(Te(t,e))}function Re(t,e){return t?Le("NS",t[1],e)+" "+Le("EW",t[0],e):""}function Pe(t,e){if(e.canWrapX()){const i=pe(e.getExtent()),n=De(t,e,i);n&&(t[0]-=n*i)}return t}function De(t,e,i){const n=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||pe(n),s=Math.floor((t[0]-n[0])/i)),s}const Oe=6371008.8;function Ne(t,e,i){i=i||Oe;const n=be(t[1]),s=be(e[1]),o=(s-n)/2,r=be(e[0]-t[0])/2,A=Math.sin(o)*Math.sin(o)+Math.sin(r)*Math.sin(r)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(A),Math.sqrt(1-A))}function He(t,e){let i=0;for(let n=0,s=t.length;n<s-1;++n)i+=Ne(t[n],t[n+1],e);return i}function Ge(t,e){const i=(e=e||{}).radius||Oe,n=e.projection||"EPSG:3857",s=t.getType();"GeometryCollection"!==s&&(t=t.clone().transform(n,"EPSG:4326"));let o,r,A,a,l,h,c=0;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":o=t.getCoordinates(),c=He(o,i);break;case"MultiLineString":case"Polygon":for(o=t.getCoordinates(),A=0,a=o.length;A<a;++A)c+=He(o[A],i);break;case"MultiPolygon":for(o=t.getCoordinates(),A=0,a=o.length;A<a;++A)for(r=o[A],l=0,h=r.length;l<h;++l)c+=He(r[l],i);break;case"GeometryCollection":{const i=t.getGeometries();for(A=0,a=i.length;A<a;++A)c+=Ge(i[A],e);break}default:throw new Error("Unsupported geometry type: "+s)}return c}function Ke(t,e){let i=0;const n=t.length;let s=t[n-1][0],o=t[n-1][1];for(let e=0;e<n;e++){const n=t[e][0],r=t[e][1];i+=be(n-s)*(2+Math.sin(be(o))+Math.sin(be(r))),s=n,o=r}return i*e*e/2}function Ve(t,e){const i=(e=e||{}).radius||Oe,n=e.projection||"EPSG:3857",s=t.getType();"GeometryCollection"!==s&&(t=t.clone().transform(n,"EPSG:4326"));let o,r,A,a,l,h,c=0;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=t.getCoordinates(),c=Math.abs(Ke(o[0],i)),A=1,a=o.length;A<a;++A)c-=Math.abs(Ke(o[A],i));break;case"MultiPolygon":for(o=t.getCoordinates(),A=0,a=o.length;A<a;++A)for(r=o[A],c+=Math.abs(Ke(r[0],i)),l=1,h=r.length;l<h;++l)c-=Math.abs(Ke(r[l],i));break;case"GeometryCollection":{const i=t.getGeometries();for(A=0,a=i.length;A<a;++A)c+=Ve(i[A],e);break}default:throw new Error("Unsupported geometry type: "+s)}return c}let We=!0;function ze(t){We=!(void 0===t||t)}function Xe(t,e,i){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function Ye(t,e,i){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function qe(t){!function(t,e){It[t]=e}(t.getCode(),t),Lt(t,t,Xe)}function je(t){return"string"==typeof t?It[e=t]||It[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Je(t,e,i,n){let s;const o=(t=je(t)).getPointResolutionFunc();if(o){if(s=o(e,i),n&&n!==t.getUnits()){const e=t.getMetersPerUnit();e&&(s=s*e/gt[n])}}else{const o=t.getUnits();if("degrees"==o&&!n||"degrees"==n)s=e;else{const r=si(t,je("EPSG:4326"));if(r===Ye&&"degrees"!==o)s=e*t.getMetersPerUnit();else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=r(t,t,2);s=(Ne(t.slice(0,2),t.slice(2,4))+Ne(t.slice(4,6),t.slice(6,8)))/2}const A=n?gt[n]:t.getMetersPerUnit();void 0!==A&&(s/=A)}}return s}function Ze(t){!function(t){t.forEach(qe)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Lt(e,t,Xe)}))}))}function $e(t,e){return t?"string"==typeof t?je(t):t:je(e)}function ti(t){return function(e,i,n){const s=e.length;n=void 0!==n?n:2,i=void 0!==i?i:new Array(s);for(let o=0;o<s;o+=n){const s=t(e.slice(o,o+n)),r=s.length;for(let t=0,A=n;t<A;++t)i[o+t]=t>=r?e[o+t]:s[t]}return i}}function ei(t,e,i,n){const s=je(t),o=je(e);Lt(s,o,ti(i)),Lt(o,s,ti(n))}function ii(t,e){return ze(),ri(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function ni(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return i;return si(t,e)===Xe&&i}function si(t,e){let i=Ut(t.getCode(),e.getCode());return i||(i=Ye),i}function oi(t,e){return si(je(t),je(e))}function ri(t,e,i){return oi(e,i)(t,void 0,t.length)}function Ai(t,e){return t}function ai(t,e){return We&&!Ue(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(We=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function li(t,e){return t}function hi(t,e){return t}function ci(t,e,i){return function(n){let s,o;if(t.canWrapX()){const e=t.getExtent(),r=pe(e);o=De(n=n.slice(0),t,r),o&&(n[0]=n[0]-o*r),n[0]=Be(n[0],e[0],e[2]),n[1]=Be(n[1],e[1],e[3]),s=i(n)}else s=i(n);return o&&e.canWrapX()&&(s[0]+=o*pe(e.getExtent())),s}}var ui,di,gi;Ze(Ct),Ze(St),ui=Ct,di=bt,gi=vt,St.forEach((function(t){ui.forEach((function(e){Lt(t,e,di),Lt(e,t,gi)}))}));function pi(t){const e=t.length;let i=0,n=0;for(let s=0;s<e;s++)i+=t[s].clientX,n+=t[s].clientY;return[i/e,n/e]}var fi=class extends ut{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==h.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==h.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==h.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==h.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function mi(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function yi(t,e,i,n,s,o,r,A){const a=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=s*a,t[2]=-n*a,t[3]=s*l,t[4]=r*n*l-A*n*a+e,t[5]=r*s*a+A*s*l+i,t}function _i(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;M(0!==i,32);const s=e[0],o=e[1],r=e[2],A=e[3],a=e[4],l=e[5];return t[0]=A/i,t[1]=-o/i,t[2]=-r/i,t[3]=s/i,t[4]=(r*l-A*a)/i,t[5]=-(s*l-o*a)/i,t}let Bi;function wi(t){const e="matrix("+t.join(", ")+")";if(v)return e;const i=Bi||(Bi=document.createElement("div"));return i.style.transform=e,i.style.transform}function Ci(t,e,i,n,s,o){o=o||[];let r=0;for(let A=e;A<i;A+=n){const e=t[A],i=t[A+1];o[r++]=s[0]*e+s[2]*i+s[4],o[r++]=s[1]*e+s[3]*i+s[5]}return o&&o.length!=r&&(o.length=r),o}function bi(t,e,i,n,s,o,r){r=r||[];const A=Math.cos(s),a=Math.sin(s),l=o[0],h=o[1];let c=0;for(let s=e;s<i;s+=n){const e=t[s]-l,i=t[s+1]-h;r[c++]=l+e*A-i*a,r[c++]=h+e*a+i*A;for(let e=s+2;e<s+n;++e)r[c++]=t[e]}return r&&r.length!=c&&(r.length=c),r}function vi(t,e,i,n,s,o,r){r=r||[];let A=0;for(let a=e;a<i;a+=n){r[A++]=t[a]+s,r[A++]=t[a+1]+o;for(let e=a+2;e<a+n;++e)r[A++]=t[e]}return r&&r.length!=A&&(r.length=A),r}new Array(6);const xi=[1,0,0,1,0,0];var Ei=class extends ot{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,i,n,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===n&&p(o,i)||(s=!0,n=this,i=o,e=t.apply(this,arguments)),e}}((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return et()}closestPointXY(t,e,i,n){return et()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return et()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&qt(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){et()}scale(t,e,i){et()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return et()}getType(){return et()}applyTransform(t){et()}intersectsExtent(t){return et()}translate(t,e){et()}transform(t,e){const i=je(t),n="tile-pixels"==i.getUnits()?function(t,n,s){const o=i.getExtent(),r=i.getWorldExtent(),A=ce(r)/ce(o);return yi(xi,r[0],r[3],A,-A,0,0,0),Ci(t,0,t.length,s,xi,n),oi(i,e)(t,n,s)}:oi(i,e);return this.applyTransform(n),this}};function Fi(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var Si=class extends Ei{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Jt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return et()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Fi(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){et()}setLayout(t,e,i){let n;if(t)n=Fi(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=function(t){let e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();bi(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=Ae(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();!function(t,e,i,n,s,o,r,A){A=A||[];const a=r[0],l=r[1];let h=0;for(let r=e;r<i;r+=n){const e=t[r]-a,i=t[r+1]-l;A[h++]=a+s*e,A[h++]=l+o*i;for(let e=r+2;e<r+n;++e)A[h++]=t[e]}A&&A.length!=h&&(A.length=h)}(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();vi(i,0,i.length,n,t,e,i),this.changed()}}};function Ii(t,e,i,n,s,o,r){const A=t[e],a=t[e+1],l=t[i]-A,h=t[i+1]-a;let c;if(0===l&&0===h)c=e;else{const u=((s-A)*l+(o-a)*h)/(l*l+h*h);if(u>1)c=i;else{if(u>0){for(let s=0;s<n;++s)r[s]=xe(t[e+s],t[i+s],u);return void(r.length=n)}c=e}}for(let e=0;e<n;++e)r[e]=t[c+e];r.length=n}function Mi(t,e,i,n,s){let o=t[e],r=t[e+1];for(e+=n;e<i;e+=n){const i=t[e],n=t[e+1],A=Ce(o,r,i,n);A>s&&(s=A),o=i,r=n}return s}function Li(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o];s=Mi(t,e,r,n,s),e=r}return s}function Ui(t,e,i,n,s,o,r,A,a,l,h){if(e==i)return l;let c,u;if(0===s){if(u=Ce(r,A,t[e],t[e+1]),u<l){for(c=0;c<n;++c)a[c]=t[e+c];return a.length=n,u}return l}h=h||[NaN,NaN];let d=e+n;for(;d<i;)if(Ii(t,d-n,d,n,r,A,h),u=Ce(r,A,h[0],h[1]),u<l){for(l=u,c=0;c<n;++c)a[c]=h[c];a.length=n,d+=n}else d+=n*Math.max((Math.sqrt(u)-Math.sqrt(l))/s|0,1);if(o&&(Ii(t,i-n,e,n,r,A,h),u=Ce(r,A,h[0],h[1]),u<l)){for(l=u,c=0;c<n;++c)a[c]=h[c];a.length=n}return l}function Qi(t,e,i,n,s,o,r,A,a,l,h){h=h||[NaN,NaN];for(let c=0,u=i.length;c<u;++c){const u=i[c];l=Ui(t,e,u,n,s,o,r,A,a,l,h),e=u}return l}function Ti(t,e,i,n){for(let n=0,s=i.length;n<s;++n)t[e++]=i[n];return e}function ki(t,e,i,n){for(let s=0,o=i.length;s<o;++s){const o=i[s];for(let i=0;i<n;++i)t[e++]=o[i]}return e}function Ri(t,e,i,n,s){s=s||[];let o=0;for(let r=0,A=i.length;r<A;++r){const A=ki(t,e,i[r],n);s[o++]=A,e=A}return s.length=o,s}function Pi(t,e,i,n,s,o,r){const A=(i-e)/n;if(A<3){for(;e<i;e+=n)o[r++]=t[e],o[r++]=t[e+1];return r}const a=new Array(A);a[0]=1,a[A-1]=1;const l=[e,i-n];let h=0;for(;l.length>0;){const i=l.pop(),o=l.pop();let r=0;const A=t[o],c=t[o+1],u=t[i],d=t[i+1];for(let e=o+n;e<i;e+=n){const i=we(t[e],t[e+1],A,c,u,d);i>r&&(h=e,r=i)}r>s&&(a[(h-e)/n]=1,o+n<h&&l.push(o,h),h+n<i&&l.push(h,i))}for(let i=0;i<A;++i)a[i]&&(o[r++]=t[e+i*n],o[r++]=t[e+i*n+1]);return r}function Di(t,e){return e*Math.round(t/e)}function Oi(t,e,i,n,s,o,r){if(e==i)return r;let A,a,l=Di(t[e],s),h=Di(t[e+1],s);e+=n,o[r++]=l,o[r++]=h;do{if(A=Di(t[e],s),a=Di(t[e+1],s),(e+=n)==i)return o[r++]=A,o[r++]=a,r}while(A==l&&a==h);for(;e<i;){const i=Di(t[e],s),c=Di(t[e+1],s);if(e+=n,i==A&&c==a)continue;const u=A-l,d=a-h,g=i-l,p=c-h;u*p==d*g&&(u<0&&g<u||u==g||u>0&&g>u)&&(d<0&&p<d||d==p||d>0&&p>d)?(A=i,a=c):(o[r++]=A,o[r++]=a,l=A,h=a,A=i,a=c)}return o[r++]=A,o[r++]=a,r}function Ni(t,e,i,n,s,o,r,A){for(let a=0,l=i.length;a<l;++a){const l=i[a];r=Oi(t,e,l,n,s,o,r),A.push(r),e=l}return r}function Hi(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=e;r<i;r+=n)s[o++]=t.slice(r,r+n);return s.length=o,s}function Gi(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=0,A=i.length;r<A;++r){const A=i[r];s[o++]=Hi(t,e,A,n,s[o]),e=A}return s.length=o,s}function Ki(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=0,A=i.length;r<A;++r){const A=i[r];s[o++]=1===A.length&&A[0]===e?[]:Gi(t,e,A,n,s[o]),e=A[A.length-1]}return s.length=o,s}function Vi(t,e,i,n){let s=0,o=t[i-n],r=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=r*i-o*n,o=i,r=n}return s/2}function Wi(t,e,i,n){let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o];s+=Vi(t,e,r,n),e=r}return s}let zi=class extends Si{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new zi(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<Gt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return Vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Hi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new zi(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ki(this.flatCoordinates,0,t,this.stride),this.changed()}};var Xi=zi;let Yi=class extends Si{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Yi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,o=Ce(t,e,s[0],s[1]);if(o<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=s[e];return i.length=t,o}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return jt(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Wt(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ti(this.flatCoordinates,0,t,this.stride),this.changed()}};var qi=Yi;function ji(t,e,i,n,s){return!ne(s,(function(s){return!Ji(t,e,i,n,s[0],s[1])}))}function Ji(t,e,i,n,s,o){let r=0,A=t[i-n],a=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];a<=o?n>o&&(i-A)*(o-a)-(s-A)*(n-a)>0&&r++:n<=o&&(i-A)*(o-a)-(s-A)*(n-a)<0&&r--,A=i,a=n}return 0!==r}function Zi(t,e,i,n,s,o){if(0===i.length)return!1;if(!Ji(t,e,i[0],n,s,o))return!1;for(let e=1,r=i.length;e<r;++e)if(Ji(t,i[e-1],i[e],n,s,o))return!1;return!0}function $i(t,e,i,n,s,o,r){let A,a,l,h,u,d,g;const p=s[o+1],f=[];for(let s=0,o=i.length;s<o;++s){const o=i[s];for(h=t[o-n],d=t[o-n+1],A=e;A<o;A+=n)u=t[A],g=t[A+1],(p<=d&&g<=p||d<=p&&p<=g)&&(l=(p-d)/(g-d)*(u-h)+h,f.push(l)),h=u,d=g}let m=NaN,y=-1/0;for(f.sort(c),h=f[0],A=1,a=f.length;A<a;++A){u=f[A];const s=Math.abs(u-h);s>y&&(l=(h+u)/2,Zi(t,e,i,n,l,p)&&(m=l,y=s)),h=u}return isNaN(m)&&(m=s[o]),r?(r.push(m,p,y),r):[m,p,y]}function tn(t,e,i,n,s){let o;for(e+=n;e<i;e+=n)if(o=s(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}function en(t,e,i,n,s){const o=ee([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!fe(s,o)&&(!!Vt(s,o)||(o[0]>=s[0]&&o[2]<=s[2]||(o[1]>=s[1]&&o[3]<=s[3]||tn(t,e,i,n,(function(t,e){return function(t,e,i){let n=!1;const s=zt(t,e),o=zt(t,i);if(s===Tt||o===Tt)n=!0;else{const r=t[0],A=t[1],a=t[2],l=t[3],h=e[0],c=e[1],u=i[0],d=i[1],g=(d-c)/(u-h);let p,f;o&kt&&!(s&kt)&&(p=u-(d-l)/g,n=p>=r&&p<=a),n||!(o&Rt)||s&Rt||(f=d-(u-a)*g,n=f>=A&&f<=l),n||!(o&Pt)||s&Pt||(p=u-(d-A)/g,n=p>=r&&p<=a),n||!(o&Dt)||s&Dt||(f=d-(u-r)*g,n=f>=A&&f<=l)}return n}(s,t,e)})))))}function nn(t,e,i,n,s){return!!en(t,e,i,n,s)||(!!Ji(t,e,i,n,s[0],s[1])||(!!Ji(t,e,i,n,s[0],s[3])||(!!Ji(t,e,i,n,s[2],s[1])||!!Ji(t,e,i,n,s[2],s[3]))))}function sn(t,e,i,n,s){if(!nn(t,e,i[0],n,s))return!1;if(1===i.length)return!0;for(let e=1,o=i.length;e<o;++e)if(ji(t,i[e-1],i[e],n,s)&&!en(t,i[e-1],i[e],n,s))return!1;return!0}function on(t,e,i,n){for(;e<i-n;){for(let s=0;s<n;++s){const o=t[e+s];t[e+s]=t[i-n+s],t[i-n+s]=o}e+=n,i-=n}}function rn(t,e,i,n){let s=0,o=t[i-n],r=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=(i-o)*(n+r),o=i,r=n}return 0===s?void 0:s>0}function An(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,r=i.length;o<r;++o){const r=i[o],A=rn(t,e,r,n);if(0===o){if(s&&A||!s&&!A)return!1}else if(s&&!A||!s&&A)return!1;e=r}return!0}function an(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,r=i.length;o<r;++o){const r=i[o],A=rn(t,e,r,n);(0===o?s&&A||!s&&!A:s&&!A||!s&&A)&&on(t,e,r,n),e=r}return e}function ln(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o)e=an(t,e,i[o],n,s);return e}let hn=class extends Si{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new hn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<Gt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Li(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qi(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return Zi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Wi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),an(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Gi(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ae(this.getExtent());this.flatInteriorPoint_=$i(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new qi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Xi(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o],A=new Xi(e.slice(s,r),t);n.push(A),s=r}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;An(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=an(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Ni(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new hn(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return sn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ri(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}};var cn=hn;function un(t){const e=t[0],i=t[1],n=t[2],s=t[3],o=[e,i,e,s,n,s,n,i,e,i];return new hn(o,"XY",[o.length])}function dn(t,e,i,n){const s=t.getFlatCoordinates(),o=t.getStride(),r=s.length/o-1,A=n||0;for(let t=0;t<=r;++t){const n=t*o,a=A+2*ve(t,r)*Math.PI/r;s[n]=e[0]+i*Math.cos(a),s[n+1]=e[1]+i*Math.sin(a)}t.changed()}var gn=class extends z{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new cn([i])}getGeometry(){return this.geometry_}};const pn="boxstart",fn="boxdrag",mn="boxend",yn="boxcancel";class _n extends V{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}var Bn=class extends fi{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new gn(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:k,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new _n(fn,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new _n(e?mn:yn,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _n(pn,t.coordinate,t)),!0)}onBoxEnd(t){}};var wn=class extends fi{constructor(t){super({stopDown:m}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:L(D,K);this.condition_=t.onFocusOnly?L(Q,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,i=pi(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map.getView();!function(t,e){t[0]*=e,t[1]*=e}(e,n.getResolution()),Qe(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),s=i.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),r=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(n),o[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(r),duration:500,easing:at})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};function Cn(t){return void 0!==t?0:void 0}function bn(t){return void 0!==t?t:void 0}var vn=class extends fi{constructor(t){t=t||{},super({stopDown:m}),this.condition_=t.condition?t.condition:U,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!G(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Cn)return;const n=e.getSize(),s=t.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){if(!G(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!G(t))return!1;if(k(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}};var xn=class extends Bn{constructor(t){super({condition:(t=t||{}).condition?t.condition:N,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),s=e.getResolution()/n;i=i.clone(),i.scale(s*s)}e.fitInternal(i,{duration:this.duration_,easing:at})}};let En=class extends Si{constructor(t,e,i){super(),void 0!==i&&void 0===e?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){const t=new En(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,o=t-s[0],r=e-s[1],A=o*o+r*r;if(A<n){if(0===A)for(let t=0;t<this.stride;++t)i[t]=s[t];else{const t=this.getRadius()/Math.sqrt(A);i[0]=s[0]+t*o,i[1]=s[1]+t*r;for(let t=2;t<this.stride;++t)i[t]=s[t]}return i.length=this.stride,A}return n}containsXY(t,e){const i=this.flatCoordinates,n=t-i[0],s=e-i[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return Yt(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){if(fe(t,this.getExtent())){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||ne(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=Ti(n,0,t,this.stride);n[s++]=n[0]+e;for(let t=1,e=this.stride;t<e;++t)n[s++]=n[t];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(bi(i,0,i.length,n,t,e,i)),this.changed()}translate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(vi(i,0,i.length,n,t,e,i)),this.changed()}};En.prototype.transform;var Fn=En;class Sn extends ot{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Sn(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Z(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=j(e,t,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;{let e;if(Array.isArray(t))e=t;else{M("function"==typeof t.getZIndex,41);e=[t]}return function(){return e}}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}var In=Sn;let Mn=class extends Ei{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Z),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,i=this.geometries_.length;e<i;++e)this.changeEventsKeys_.push(j(this.geometries_[e],t,this.changed,this))}clone(){const t=new Mn(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<Gt(this.getExtent(),t,e))return n;const s=this.geometries_;for(let o=0,r=s.length;o<r;++o)n=s[o].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){qt(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)$t(t,e[i].getExtent());return t}getGeometries(){return Ln(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let s=0,o=i.length;s<o;++s){const o=i[s],r=o.getSimplifiedGeometry(t);e.push(r),r!==o&&(n=!0)}if(n){const t=new Mn(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Ae(this.getExtent()));const n=this.geometries_;for(let s=0,o=n.length;s<o;++s)n[s].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(Ln(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function Ln(t){const e=[];for(let i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}var Un=Mn;function Qn(t,e,i,n,s,o,r){let A,a;const l=(i-e)/n;if(1===l)A=e;else if(2===l)A=e,a=s;else if(0!==l){let o=t[e],r=t[e+1],l=0;const h=[0];for(let s=e+n;s<i;s+=n){const e=t[s],i=t[s+1];l+=Math.sqrt((e-o)*(e-o)+(i-r)*(i-r)),h.push(l),o=e,r=i}const u=s*l,d=function(t,e,i){let n,s;i=i||c;let o=0,r=t.length,A=!1;for(;o<r;)n=o+(r-o>>1),s=+i(t[n],e),s<0?o=n+1:(r=n,A=!s);return A?o:~o}(h,u);d<0?(a=(u-h[-d-2])/(h[-d-1]-h[-d-2]),A=e+(-d-2)*n):A=e+d*n}r=r>1?r:2,o=o||new Array(r);for(let e=0;e<r;++e)o[e]=void 0===A?NaN:void 0===a?t[A+e]:xe(t[A+e],t[A+n+e],a);return o}function Tn(t,e,i,n,s,o){if(i==e)return null;let r;if(s<t[e+n-1])return o?(r=t.slice(e,e+n),r[n-1]=s,r):null;if(t[i-1]<s)return o?(r=t.slice(i-n,i),r[n-1]=s,r):null;if(s==t[e+n-1])return t.slice(e,e+n);let A=e/n,a=i/n;for(;A<a;){const e=A+a>>1;s<t[(e+1)*n-1]?a=e:A=e+1}const l=t[A*n-1];if(s==l)return t.slice((A-1)*n,(A-1)*n+n);const h=(s-l)/(t[(A+1)*n-1]-l);r=[];for(let e=0;e<n-1;++e)r.push(xe(t[(A-1)*n+e],t[A*n+e],h));return r.push(s),r}function kn(t,e,i,n){let s=t[e],o=t[e+1],r=0;for(let A=e+n;A<i;A+=n){const e=t[A],i=t[A+1];r+=Math.sqrt((e-s)*(e-s)+(i-o)*(i-o)),s=e,o=i}return r}let Rn=class extends Si{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?g(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new Rn(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<Gt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Mi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,Tn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return Hi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return kn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Rn(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return en(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ki(this.flatCoordinates,0,t,this.stride),this.changed()}};var Pn=Rn;var Dn=class extends V{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}};var On=class extends Dn{constructor(t,e,i,n,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};let Nn=class extends Si{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=this.getLayout();const i=t,n=[],s=[];for(let t=0,o=i.length;t<o;++t){const o=i[t];0===t&&(e=o.getLayout()),g(n,o.getFlatCoordinates()),s.push(n.length)}this.setFlatCoordinates(e,n),this.ends_=s}}appendLineString(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Nn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<Gt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Li(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Qi(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,function(t,e,i,n,s,o,r){if(r)return Tn(t,e,i[i.length-1],n,s,o);let A;if(s<t[n-1])return o?(A=t.slice(0,n),A[n-1]=s,A):null;if(t[t.length-1]<s)return o?(A=t.slice(t.length-n),A[n-1]=s,A):null;for(let o=0,r=i.length;o<r;++o){const r=i[o];if(e!=r){if(s<t[e+n-1])return null;if(s<=t[r-1])return Tn(t,e,r,n,s,!1);e=r}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return Gi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Pn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let s=0;for(let o=0,r=e.length;o<r;++o){const r=e[o],A=new Pn(t.slice(s,r),i);n.push(A),s=r}return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let o=0,r=n.length;o<r;++o){const r=n[o];g(t,Qn(e,i,r,s,.5)),i=r}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,o,r,A){for(let a=0,l=i.length;a<l;++a){const l=i[a];r=Pi(t,e,l,n,s,o,r),A.push(r),e=l}return r}(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Nn(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){if(en(t,e,i[o],n,s))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ri(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}};var Hn=Nn;let Gn=class extends Si{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?g(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Gn(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<Gt(this.getExtent(),t,e))return n;const s=this.flatCoordinates,o=this.stride;for(let r=0,A=s.length;r<A;r+=o){const A=Ce(t,e,s[r],s[r+1]);if(A<n){n=A;for(let t=0;t<o;++t)i[t]=s[r+t];i.length=o}}return n}getCoordinates(){return Hi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new qi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let s=0,o=t.length;s<o;s+=i){const o=new qi(t.slice(s,s+i),e);n.push(o)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,s=e.length;n<s;n+=i){if(Wt(t,e[n],e[n+1]))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ki(this.flatCoordinates,0,t,this.stride),this.changed()}};var Kn=Gn;let Vn=class extends Si{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let n=this.getLayout();const s=t,o=[],r=[];for(let t=0,e=s.length;t<e;++t){const e=s[t];0===t&&(n=e.getLayout());const i=o.length,A=e.getEnds();for(let t=0,e=A.length;t<e;++t)A[t]+=i;g(o,e.getFlatCoordinates()),r.push(A)}e=n,t=o,i=r}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;g(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,n=e.length;t<n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const i=new Vn(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<Gt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o];s=Li(t,e,r,n,s),e=r[r.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,s,o,r,A,a,l,h){h=h||[NaN,NaN];for(let c=0,u=i.length;c<u;++c){const u=i[c];l=Qi(t,e,u,n,s,o,r,A,a,l,h),e=u[u.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return function(t,e,i,n,s,o){if(0===i.length)return!1;for(let r=0,A=i.length;r<A;++r){const A=i[r];if(Zi(t,e,A,n,s,o))return!0;e=A[A.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,i,n){let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o];s+=Wi(t,e,r,n),e=r[r.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),ln(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Ki(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=function(t,e,i,n){const s=[];let o=[1/0,1/0,-1/0,-1/0];for(let r=0,A=i.length;r<A;++r){const A=i[r];o=Jt(t,e,A[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=A[A.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=function(t,e,i,n,s){let o=[];for(let r=0,A=i.length;r<A;++r){const A=i[r];o=$i(t,e,A,n,s,2*r,o),e=A[A.length-1]}return o}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Kn(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o];if(!An(t,e,r,n,s))return!1;r.length&&(e=r[r.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ln(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,o,r,A){for(let a=0,l=i.length;a<l;++a){const l=i[a],h=[];r=Ni(t,e,l,n,s,o,r,h),A.push(h),e=l[l.length-1]}return r}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Vn(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let t=0,n=i.length;t<n;++t)i[t]-=e;return new cn(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o].slice(),A=r[r.length-1];if(0!==s)for(let t=0,e=r.length;t<e;++t)r[t]-=s;const a=new cn(e.slice(s,A),t,r);n.push(a),s=A}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o];if(sn(t,e,r,n,s))return!0;e=r[r.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(t,e,i,n,s){s=s||[];let o=0;for(let r=0,A=i.length;r<A;++r){const A=Ri(t,e,i[r],n,s[o]);0===A.length&&(A[0]=e),s[o++]=A,e=A[A.length-1]}return s.length=o,s}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}};var Wn=Vn,zn="opacity",Xn="visible",Yn="extent",qn="zIndex",jn="maxResolution",Jn="minResolution",Zn="maxZoom",$n="minZoom",ts="source",es="map";var is=class extends ot{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[zn]=void 0!==t.opacity?t.opacity:1,M("number"==typeof e[zn],64),e[Xn]=void 0===t.visible||t.visible,e[qn]=t.zIndex,e[jn]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Jn]=void 0!==t.minResolution?t.minResolution:0,e[$n]=void 0!==t.minZoom?t.minZoom:-1/0,e[Zn]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=Be(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return et()}getLayerStatesArray(t){return et()}getExtent(){return this.get(Yn)}getMaxResolution(){return this.get(jn)}getMinResolution(){return this.get(Jn)}getMinZoom(){return this.get($n)}getMaxZoom(){return this.get(Zn)}getOpacity(){return this.get(zn)}getSourceState(){return et()}getVisible(){return this.get(Xn)}getZIndex(){return this.get(qn)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Yn,t)}setMaxResolution(t){this.set(jn,t)}setMinResolution(t){this.set(Jn,t)}setMaxZoom(t){this.set(Zn,t)}setMinZoom(t){this.set($n,t)}setOpacity(t){M("number"==typeof t,64),this.set(zn,t)}setVisible(t){this.set(Xn,t)}setZIndex(t){this.set(qn,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},ns="prerender",ss="postrender",os="precompose",rs="postcompose",As="rendercomplete";function as(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var ls=class extends is{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(ts,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(ts)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Z(this.sourceChangeKey_),this.sourceChangeKey_=null);const e=this.getSource();e&&(this.sourceChangeKey_=j(e,t,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((t=>t([])))}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(es,t)}getMapInternal(){return this.get(es)}setMap(e){this.mapPrecomposeKey_&&(Z(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Z(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=j(e,os,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);M(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=j(this,t,e.render,e),this.changed())}setSource(t){this.set(ts,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function hs(t,e,i,n,s){cs(t,e,i||0,n||t.length-1,s||ds)}function cs(t,e,i,n,s){for(;n>i;){if(n-i>600){var o=n-i+1,r=e-i+1,A=Math.log(o),a=.5*Math.exp(2*A/3),l=.5*Math.sqrt(A*a*(o-a)/o)*(r-o/2<0?-1:1);cs(t,e,Math.max(i,Math.floor(e-r*a/o+l)),Math.min(n,Math.floor(e+(o-r)*a/o+l)),s)}var h=t[e],c=i,u=n;for(us(t,i,e),s(t[n],h)>0&&us(t,i,n);c<u;){for(us(t,c,u),c++,u--;s(t[c],h)<0;)c++;for(;s(t[u],h)>0;)u--}0===s(t[i],h)?us(t,i,u):us(t,++u,n),u<=e&&(i=u+1),e<=u&&(n=u-1)}}function us(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function ds(t,e){return t<e?-1:t>e?1:0}let gs=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!Es(t,e))return i;const n=this.toBBox,s=[];for(;e;){for(let o=0;o<e.children.length;o++){const r=e.children[o],A=e.leaf?n(r):r;Es(t,A)&&(e.leaf?i.push(r):xs(t,A)?this._all(r,i):s.push(r))}e=s.pop()}return i}collides(t){let e=this.data;if(!Es(t,e))return!1;const i=[];for(;e;){for(let n=0;n<e.children.length;n++){const s=e.children[n],o=e.leaf?this.toBBox(s):s;if(Es(t,o)){if(e.leaf||xs(t,o))return!0;i.push(s)}}e=i.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Fs([]),this}remove(t,e){if(!t)return this;let i=this.data;const n=this.toBBox(t),s=[],o=[];let r,A,a;for(;i||s.length;){if(i||(i=s.pop(),A=s[s.length-1],r=o.pop(),a=!0),i.leaf){const n=ps(t,i.children,e);if(-1!==n)return i.children.splice(n,1),s.push(i),this._condense(s),this}a||i.leaf||!xs(i,n)?A?(r++,i=A.children[r],a=!1):i=null:(s.push(i),o.push(r),r=0,A=i,i=i.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,n){const s=i-e+1;let o,r=this._maxEntries;if(s<=r)return o=Fs(t.slice(e,i+1)),fs(o,this.toBBox),o;n||(n=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,n-1))),o=Fs([]),o.leaf=!1,o.height=n;const A=Math.ceil(s/r),a=A*Math.ceil(Math.sqrt(r));Ss(t,e,i,a,this.compareMinX);for(let s=e;s<=i;s+=a){const e=Math.min(s+a-1,i);Ss(t,s,e,A,this.compareMinY);for(let i=s;i<=e;i+=A){const s=Math.min(i+A-1,e);o.children.push(this._build(t,i,s,n-1))}}return fs(o,this.toBBox),o}_chooseSubtree(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){let i,n=1/0,s=1/0;for(let o=0;o<e.children.length;o++){const r=e.children[o],A=ws(r),a=bs(t,r)-A;a<s?(s=a,n=A<n?A:n,i=r):a===s&&A<n&&(n=A,i=r)}e=i||e.children[0]}return e}_insert(t,e,i){const n=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),ys(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)}_split(t,e){const i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const o=this._chooseSplitIndex(i,s,n),r=Fs(i.children.splice(o,i.children.length-o));r.height=i.height,r.leaf=i.leaf,fs(i,this.toBBox),fs(r,this.toBBox),e?t[e-1].children.push(r):this._splitRoot(i,r)}_splitRoot(t,e){this.data=Fs([t,e]),this.data.height=t.height+1,this.data.leaf=!1,fs(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let n,s=1/0,o=1/0;for(let r=e;r<=i-e;r++){const e=ms(t,0,r,this.toBBox),A=ms(t,r,i,this.toBBox),a=vs(e,A),l=ws(e)+ws(A);a<s?(s=a,n=r,o=l<o?l:o):a===s&&l<o&&(o=l,n=r)}return n||i-e}_chooseSplitAxis(t,e,i){const n=t.leaf?this.compareMinX:_s,s=t.leaf?this.compareMinY:Bs;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)}_allDistMargin(t,e,i,n){t.children.sort(n);const s=this.toBBox,o=ms(t,0,e,s),r=ms(t,i-e,i,s);let A=Cs(o)+Cs(r);for(let n=e;n<i-e;n++){const e=t.children[n];ys(o,t.leaf?s(e):e),A+=Cs(o)}for(let n=i-e-1;n>=e;n--){const e=t.children[n];ys(r,t.leaf?s(e):e),A+=Cs(r)}return A}_adjustParentBBoxes(t,e,i){for(let n=i;n>=0;n--)ys(e[n],t)}_condense(t){for(let e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():fs(t[i],this.toBBox)}};function ps(t,e,i){if(!i)return e.indexOf(t);for(let n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function fs(t,e){ms(t,0,t.children.length,e,t)}function ms(t,e,i,n,s){s||(s=Fs(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let o=e;o<i;o++){const e=t.children[o];ys(s,t.leaf?n(e):e)}return s}function ys(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function _s(t,e){return t.minX-e.minX}function Bs(t,e){return t.minY-e.minY}function ws(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Cs(t){return t.maxX-t.minX+(t.maxY-t.minY)}function bs(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function vs(t,e){const i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,o-n)}function xs(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Es(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Fs(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ss(t,e,i,n,s){const o=[e,i];for(;o.length;){if((i=o.pop())-(e=o.pop())<=n)continue;const r=e+Math.ceil((i-e)/n/2)*n;hs(t,r,e,i,s),o.push(e,r,r,i)}}var Is=0,Ms=1,Ls=2,Us=3;function Qs(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function Ts(t){return t[0]>0&&t[1]>0}function ks(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function Rs(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}class Ps{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Rs(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Ps({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return et()}getImage(t){return et()}getHitDetectionImage(){return et()}getPixelRatio(t){return 1}getImageState(){return et()}getImageSize(){return et()}getOrigin(){return et()}getSize(){return et()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Rs(t)}listenImageChange(t){et()}load(){et()}unlistenImageChange(t){et()}}var Ds=Ps;const Os=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Ns=/^([a-z]*)$|^hsla?\(.*\)$/i;function Hs(t){return"string"==typeof t?t:Ws(t)}const Gs=function(){const t={};let e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){let i=0;for(const n in t)0==(3&i++)&&(delete t[n],--e)}n=function(t){let e,i,n,s,o;Ns.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t));if(Os.exec(t)){const r=t.length-1;let A;A=r<=4?1:2;const a=4===r||8===r;e=parseInt(t.substr(1+0*A,A),16),i=parseInt(t.substr(1+1*A,A),16),n=parseInt(t.substr(1+2*A,A),16),s=a?parseInt(t.substr(1+3*A,A),16):255,1==A&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,a&&(s=(s<<4)+s)),o=[e,i,n,s/255]}else t.startsWith("rgba(")?(o=t.slice(5,-1).split(",").map(Number),Vs(o)):t.startsWith("rgb(")?(o=t.slice(4,-1).split(",").map(Number),o.push(1),Vs(o)):M(!1,14);return o}(i),t[i]=n,++e}return n}}();function Ks(t){return Array.isArray(t)?t:Gs(t)}function Vs(t){return t[0]=Be(t[0]+.5|0,0,255),t[1]=Be(t[1]+.5|0,0,255),t[2]=Be(t[2]+.5|0,0,255),t[3]=Be(t[3],0,1),t}function Ws(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];n!=(0|n)&&(n=n+.5|0);return"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function zs(t){return Array.isArray(t)?Ws(t):t}function Xs(t,e,i,n){let s;return s=i&&i.length?i.shift():v?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",n)}function Ys(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function qs(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function js(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function Js(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function Zs(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function $s(t){for(;t.lastChild;)t.removeChild(t.lastChild)}const to="ol-hidden",eo="ol-unselectable",io="ol-control",no="ol-collapsed",so=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),oo=["style","variant","weight","size","lineHeight","family"],ro=function(t){const e=t.match(so);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,n=oo.length;t<n;++t){const n=e[t+1];void 0!==n&&(i[oo[t]]=n)}return i.families=i.family.split(/,\s?/),i},Ao="10px sans-serif",ao="#000",lo="round",ho=[],co="round",uo="#000",go="center",po="middle",fo=[0,0,0,0],mo=new ot;let yo,_o=null;const Bo={},wo=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10";let s,o;function r(s,r,A){let a=!0;for(let l=0;l<i;++l){const i=e[l];if(o=vo(s+" "+r+" "+t+i,n),A!=i){const e=vo(s+" "+r+" "+t+A+","+i,n);a=a&&e!=o}}return!!a}function A(){let t=!0;const e=mo.getKeys();for(let i=0,n=e.length;i<n;++i){const n=e[i];mo.get(n)<100&&(r.apply(this,n.split("\n"))?(X(Bo),_o=null,yo=void 0,mo.set(n,100)):(mo.set(n,mo.get(n)+1,!0),t=!1))}t&&(clearInterval(s),s=void 0)}return function(t){const e=ro(t);if(!e)return;const i=e.families;for(let t=0,n=i.length;t<n;++t){const n=i[t],o=e.style+"\n"+e.weight+"\n"+n;void 0===mo.get(o)&&(mo.set(o,100,!0),r(e.style,e.weight,n)||(mo.set(o,0,!0),void 0===s&&(s=setInterval(A,32))))}}}(),Co=function(){let t;return function(e){let i=Bo[e];if(null==i){if(v){const t=ro(e),n=bo(e,"Žg");i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);Bo[e]=i}return i}}();function bo(t,e){return _o||(_o=Xs(1,1)),t!=yo&&(_o.font=t,yo=_o.font),_o.measureText(e)}function vo(t,e){return bo(t,e).width}function xo(t,e,i){if(e in i)return i[e];const n=e.split("\n").reduce(((e,i)=>Math.max(e,vo(t,i))),0);return i[e]=n,n}function Eo(t,e,i,n,s,o,r,A,a,l,h){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(a,l),t.scale(h[0],h[1]),function(t,e){const i=t.contextInstructions;for(let t=0,n=i.length;t<n;t+=2)Array.isArray(i[t+1])?e[i[t]].apply(e,i[t+1]):e[i[t]]=i[t+1]}(n,t)):h[0]<0||h[1]<0?(t.translate(a,l),t.scale(h[0],h[1]),t.drawImage(n,s,o,r,A,0,0,r,A)):t.drawImage(n,s,o,r,A,a,l,r*h[0],A*h[1]),t.restore()}class Fo extends Ds{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Fo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=Xs(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return Ls}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let n=this.radius_,s=void 0===this.radius2_?n:this.radius2_;if(n<s){const t=n;n=s,s=t}const o=void 0===this.radius2_?this.points_:2*this.points_,r=2*Math.PI/o,A=s*Math.sin(r),a=n-Math.sqrt(s*s-A*A),l=Math.sqrt(A*A+a*a),h=l/A;if("miter"===t&&h<=i)return h*e;const c=e/2/h,u=e/2*(a/l),d=Math.sqrt((n+c)*(n+c)+u*u)-n;if(void 0===this.radius2_||"bevel"===t)return 2*d;const g=n*Math.sin(r),p=s-Math.sqrt(n*n-g*g),f=Math.sqrt(g*g+p*p)/g;if(f<=i){const t=f*e/2-s-n;return 2*Math.max(d,t)}return 2*d}createRenderOptions(){let t,e=co,i=0,n=null,s=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=uo),t=zs(t),o=this.stroke_.getWidth(),void 0===o&&(o=1),n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=co),i=this.stroke_.getMiterLimit(),void 0===i&&(i=10));const r=this.calculateLineJoinSize_(e,o,i),A=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*A+r),lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=ao),e.fillStyle=zs(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=Ks(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const e=Xs(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let r=0;r<e;r++){const e=s+r*o,A=r%2==0?i:n;t.lineTo(A*Math.cos(e),A*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ao,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}var So=Fo;class Io extends So{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Io({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var Mo=Io;class Lo{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new Lo({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var Uo=Lo;class Qo{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Qo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var To=Qo;class ko{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Oo,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new ko({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Oo,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let Ro=null;function Po(t,e){if(!Ro){const t=new Uo({color:"rgba(255,255,255,0.4)"}),e=new To({color:"#3399CC",width:1.25});Ro=[new ko({image:new Mo({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Ro}function Do(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new ko({fill:new Uo({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new ko({stroke:new To({color:e,width:5})}),new ko({stroke:new To({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new ko({image:new Mo({radius:6,fill:new Uo({color:i}),stroke:new To({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Oo(t){return t.getGeometry()}var No=ko;function Ho(t,e,i){return e+":"+t+":"+(i?Hs(i):"null")}const Go=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=Ho(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const s=Ho(t,e,i);this.cache_[s]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function Ko(t,i,n){const s=t;let o=!0,A=!1,a=!1;const l=[J(s,r,(function(){a=!0,A||i()}))];return s.src&&x?(A=!0,s.decode().then((function(){o&&i()})).catch((function(t){o&&(a?i():n())}))):l.push(J(s,e,n)),function(){o=!1,l.forEach(Z)}}let Vo=null;class Wo extends q{constructor(t,e,i,n,s,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=s,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Ls){Vo||(Vo=Xs(1,1)),Vo.drawImage(this.image_,0,0);try{Vo.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Vo=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(t)}handleImageError_(){this.imageState_=Us,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ls,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Xs(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Is){this.image_||this.initializeImage_(),this.imageState_=Ms;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Ko(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ls)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const n=i.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Hs(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class zo extends Ds{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,n=void 0!==t.scale?t.scale:1,s=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:n,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const o=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let r=t.src;M(!(void 0!==r&&o),4),M(!o||o&&this.imgSize_,5),void 0!==r&&0!==r.length||!o||(r=o.src||nt(o)),M(void 0!==r&&r.length>0,6);const A=void 0!==t.src?Is:Ls;this.color_=void 0!==t.color?Ks(t.color):null,this.iconImage_=function(t,e,i,n,s,o){let r=Go.get(e,n,o);return r||(r=new Wo(t,e,i,n,s,o),Go.set(e,n,o,r)),r}(o,r,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,A,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const t=this.getScale();return new zo({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(e){this.iconImage_.addEventListener(t,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(t,e)}}var Xo=zo;class Yo{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Rs(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new Uo({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new Yo({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Rs(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var qo=Yo;function jo(t){return new No({fill:Jo(t,""),stroke:Zo(t,""),text:$o(t),image:tr(t)})}function Jo(t,e){const i=t[e+"fill-color"];if(i)return new Uo({color:i})}function Zo(t,e){const i=t[e+"stroke-width"],n=t[e+"stroke-color"];if(i||n)return new To({width:i,color:n,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function $o(t){const e=t["text-value"];if(!e)return;return new qo({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:Jo(t,"text-"),backgroundFill:Jo(t,"text-background-"),stroke:Zo(t,"text-"),backgroundStroke:Zo(t,"text-background-")})}function tr(t){const e=t["icon-src"],i=t["icon-img"];if(e||i){return new Xo({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]})}const n=t["shape-points"];if(n){const e="shape-";return new So({points:n,fill:Jo(t,e),stroke:Zo(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const s=t["circle-radius"];if(s){const e="circle-";return new Mo({radius:s,fill:Jo(t,e),stroke:Zo(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const er="renderOrder";var ir=class extends ls{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(er)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new gs(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(er,t)}setStyle(t){let e;if(void 0===t)e=Po;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof No)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let e=0;e<i;++e){const i=t[e];n[e]=i instanceof No?i:jo(i)}e=n}else e=jo(t);this.style_=e,this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:(M("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}(this.style_),this.changed()}};const nr={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},sr=[nr.FILL],or=[nr.STROKE],rr=[nr.BEGIN_PATH],Ar=[nr.CLOSE_PATH];var ar=nr;var lr=class{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}};var hr=class extends lr{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let r=0,A=t.length;r<A;r+=e)n[0]=t[r],n[1]=t[r+1],Kt(i,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(t,e,i,n,s,o){const r=this.coordinates;let A=r.length;const a=this.getBufferedMaxExtent();o&&(e+=n);let l=t[e],h=t[e+1];const c=this.tmpCoordinate_;let u,d,g,p=!0;for(u=e+n;u<i;u+=n)c[0]=t[u],c[1]=t[u+1],g=zt(a,c),g!==d?(p&&(r[A++]=l,r[A++]=h,p=!1),r[A++]=c[0],r[A++]=c[1]):g===Tt?(r[A++]=c[0],r[A++]=c[1],p=!1):p=!0,l=c[0],h=c[1],d=g;return(s&&p||u===e+n)&&(r[A++]=l,r[A++]=h),A}drawCustomCoordinates_(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o],A=this.appendFlatLineCoordinates(t,e,r,n,!1,!1);s.push(A),e=r}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const s=t.getType(),o=t.getStride(),r=this.coordinates.length;let A,a,l,h,c;switch(s){case"MultiPolygon":A=t.getOrientedFlatCoordinates(),h=[];const e=t.getEndss();c=0;for(let t=0,i=e.length;t<i;++t){const i=[];c=this.drawCustomCoordinates_(A,c,e[t],o,i),h.push(i)}this.instructions.push([ar.CUSTOM,r,h,t,i,Ki]),this.hitDetectionInstructions.push([ar.CUSTOM,r,h,t,n||i,Ki]);break;case"Polygon":case"MultiLineString":l=[],A="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),c=this.drawCustomCoordinates_(A,0,t.getEnds(),o,l),this.instructions.push([ar.CUSTOM,r,l,t,i,Gi]),this.hitDetectionInstructions.push([ar.CUSTOM,r,l,t,n||i,Gi]);break;case"LineString":case"Circle":A=t.getFlatCoordinates(),a=this.appendFlatLineCoordinates(A,0,A.length,o,!1,!1),this.instructions.push([ar.CUSTOM,r,a,t,i,Hi]),this.hitDetectionInstructions.push([ar.CUSTOM,r,a,t,n||i,Hi]);break;case"MultiPoint":A=t.getFlatCoordinates(),a=this.appendFlatPointCoordinates(A,o),a>r&&(this.instructions.push([ar.CUSTOM,r,a,t,i,Hi]),this.hitDetectionInstructions.push([ar.CUSTOM,r,a,t,n||i,Hi]));break;case"Point":A=t.getFlatCoordinates(),this.coordinates.push(A[0],A[1]),a=this.coordinates.length,this.instructions.push([ar.CUSTOM,r,a,t,i]),this.hitDetectionInstructions.push([ar.CUSTOM,r,a,t,n||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[ar.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ar.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,s,o=-1;for(e=0;e<i;++e)n=t[e],s=n[0],s==ar.END_GEOMETRY?o=e:s==ar.BEGIN_GEOMETRY&&(n[2]=e,d(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=zs(e||ao)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=zs(t||uo);const n=e.getLineCap();i.lineCap=void 0!==n?n:lo;const s=e.getLineDash();i.lineDash=s?s.slice():ho;const o=e.getLineDashOffset();i.lineDashOffset=o||0;const r=e.getLineJoin();i.lineJoin=void 0!==r?r:co;const A=e.getWidth();i.lineWidth=void 0!==A?A:1;const a=e.getMiterLimit();i.miterLimit=void 0!==a?a:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[ar.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[ar.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,s=t.lineDash,o=t.lineDashOffset,r=t.lineJoin,A=t.lineWidth,a=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&&!p(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=r||t.currentLineWidth!=A||t.currentMiterLimit!=a)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=r,t.currentLineWidth=A,t.currentMiterLimit=a)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[ar.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ht(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Nt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};var cr=class extends hr{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([ar.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ar.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([ar.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ar.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}};var ur=class extends hr{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),r=[ar.MOVE_TO_LINE_TO,s,o];return this.instructions.push(r),this.hitDetectionInstructions.push(r),i}drawLineString(t,e){const i=this.state,n=i.strokeStyle,s=i.lineWidth;if(void 0===n||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,ho,0],rr);const o=t.getFlatCoordinates(),r=t.getStride();this.drawFlatCoordinates_(o,0,o.length,r),this.hitDetectionInstructions.push(or),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,n=i.strokeStyle,s=i.lineWidth;if(void 0===n||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],rr);const o=t.getEnds(),r=t.getFlatCoordinates(),A=t.getStride();let a=0;for(let t=0,e=o.length;t<e;++t)a=this.drawFlatCoordinates_(r,a,o[t],A);this.hitDetectionInstructions.push(or),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(or),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(or),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(rr)}};var dr=class extends hr{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const s=this.state,o=void 0!==s.fillStyle,r=void 0!==s.strokeStyle,A=i.length;this.instructions.push(rr),this.hitDetectionInstructions.push(rr);for(let s=0;s<A;++s){const o=i[s],A=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,o,n,!0,!r),l=[ar.MOVE_TO_LINE_TO,A,a];this.instructions.push(l),this.hitDetectionInstructions.push(l),r&&(this.instructions.push(Ar),this.hitDetectionInstructions.push(Ar)),e=o}return o&&(this.instructions.push(sr),this.hitDetectionInstructions.push(sr)),r&&(this.instructions.push(or),this.hitDetectionInstructions.push(or)),e}drawCircle(t,e){const i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0===n&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ar.SET_FILL_STYLE,ao]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getFlatCoordinates(),r=t.getStride(),A=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,r,!1,!1);const a=[ar.CIRCLE,A];this.instructions.push(rr,a),this.hitDetectionInstructions.push(rr,a),void 0!==i.fillStyle&&(this.instructions.push(sr),this.hitDetectionInstructions.push(sr)),void 0!==i.strokeStyle&&(this.instructions.push(or),this.hitDetectionInstructions.push(or)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0===n&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ar.SET_FILL_STYLE,ao]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getEnds(),r=t.getOrientedFlatCoordinates(),A=t.getStride();this.drawFlatCoordinatess_(r,0,o,A),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0===n&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([ar.SET_FILL_STYLE,ao]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([ar.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getEndss(),r=t.getOrientedFlatCoordinates(),A=t.getStride();let a=0;for(let t=0,e=o.length;t<e;++t)a=this.drawFlatCoordinatess_(r,a,o[t],A);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=Di(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}};function gr(t,e,i,n,s){let o,r,A,a,l,h,c,u,d,g,p=i,f=i,m=0,y=0,_=i;for(r=i;r<n;r+=s){const i=e[r],n=e[r+1];void 0!==l&&(d=i-l,g=n-h,a=Math.sqrt(d*d+g*g),void 0!==c&&(y+=A,o=Math.acos((c*d+u*g)/(A*a)),o>t&&(y>m&&(m=y,p=_,f=r),y=0,_=r-s)),A=a,c=d,u=g),l=i,h=n}return y+=a,y>m?[_,r]:[p,f]}const pr={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const fr={Circle:dr,Default:hr,Image:cr,LineString:ur,Polygon:dr,Text:class extends hr{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,n=this.textStrokeState_,s=this.textState_;if(""===this.text_||!s||!i&&!n)return;const o=this.coordinates;let r=o.length;const A=t.getType();let a=null,l=t.getStride();if("line"!==s.placement||"LineString"!=A&&"MultiLineString"!=A&&"Polygon"!=A&&"MultiPolygon"!=A){let i=s.overflow?null:[];switch(A){case"Point":case"MultiPoint":a=t.getFlatCoordinates();break;case"LineString":a=t.getFlatMidpoint();break;case"Circle":a=t.getCenter();break;case"MultiLineString":a=t.getFlatMidpoints(),l=2;break;case"Polygon":a=t.getFlatInteriorPoint(),s.overflow||i.push(a[2]/this.resolution),l=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();a=[];for(let t=0,n=e.length;t<n;t+=3)s.overflow||i.push(e[t+2]/this.resolution),a.push(e[t],e[t+1]);if(0===a.length)return;l=2}const n=this.appendFlatPointCoordinates(a,l);if(n===r)return;if(i&&(n-r)/2!=a.length/l){let t=r/2;i=i.filter(((e,i)=>{const n=o[2*(t+i)]===a[i*l]&&o[2*(t+i)+1]===a[i*l+1];return n||--t,n}))}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let h=s.padding;if(h!=fo&&(s.scale[0]<0||s.scale[1]<0)){let t=s.padding[0],e=s.padding[1],i=s.padding[2],n=s.padding[3];s.scale[0]<0&&(e=-e,n=-n),s.scale[1]<0&&(t=-t,i=-i),h=[t,e,i,n]}const c=this.pixelRatio;this.instructions.push([ar.DRAW_IMAGE,r,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,h==fo?fo:h.map((function(t){return t*c})),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const u=1/c;this.hitDetectionInstructions.push([ar.DRAW_IMAGE,r,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[u,u],NaN,void 0,this.declutterImageWithText_,h,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!fe(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(a=t.getFlatCoordinates(),"LineString"==A)i=[a.length];else if("MultiLineString"==A)i=t.getEnds();else if("Polygon"==A)i=t.getEnds().slice(0,1);else if("MultiPolygon"==A){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e);const n=s.textAlign;let h,c=0;for(let t=0,e=i.length;t<e;++t){if(null==n){const e=gr(s.maxAngle,a,c,i[t],l);c=e[0],h=e[1]}else h=i[t];for(let t=c;t<h;t+=l)o.push(a[t],a[t+1]);const e=o.length;c=i[t],this.drawChars_(r,e),r=e}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||go,justify:e.justify,textBaseline:e.textBaseline||po,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,r=this.fillKey_;this.saveTextStates_();const A=this.pixelRatio,a=pr[n.textBaseline],l=this.textOffsetY_*A,h=this.text_,c=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([ar.DRAW_CHARS,t,e,a,n.overflow,r,n.maxAngle,A,l,s,c*A,h,o,1]),this.hitDetectionInstructions.push([ar.DRAW_CHARS,t,e,a,n.overflow,r,n.maxAngle,1,l,s,c,h,o,1/A])}setTextStyle(t,e){let i,n,s;if(t){const e=t.getFill();e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=zs(e.getColor()||ao)):(n=null,this.textFillState_=n);const o=t.getStroke();if(o){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const t=o.getLineDash(),e=o.getLineDashOffset(),i=o.getWidth(),n=o.getMiterLimit();s.lineCap=o.getLineCap()||lo,s.lineDash=t?t.slice():ho,s.lineDashOffset=void 0===e?0:e,s.lineJoin=o.getLineJoin()||co,s.lineWidth=void 0===i?1:i,s.miterLimit=void 0===n?10:n,s.strokeStyle=zs(o.getColor()||uo)}else s=null,this.textStrokeState_=s;i=this.textState_;const r=t.getFont()||Ao;wo(r);const A=t.getScaleArray();i.overflow=t.getOverflow(),i.font=r,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||po,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||fo,i.scale=void 0===A?[1,1]:A;const a=t.getOffsetX(),l=t.getOffsetY(),h=t.getRotateWithView(),c=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===a?0:a,this.textOffsetY_=void 0===l?0:l,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0===c?0:c,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:nt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+nt(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}};var mr=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const s=i[n].finish();t[e][n]=s}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let s=n[e];if(void 0===s){s=new(0,fr[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s}return s}};var yr=class extends ${constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return et()}getData(t){return null}prepareFrame(t){return et()}renderFrame(t,e){return et()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(n,s){const o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,s,o)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===Ls&&this.renderIfReadyAndVisible()}loadImage(e){let i=e.getState();return i!=Ls&&i!=Us&&e.addEventListener(t,this.boundHandleImageChange_),i==Is&&(e.load(),i=e.getState()),i==Ls}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}};var _r=class extends V{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}};const Br=[];let wr=null;var Cr=class extends yr{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;wr||function(){const t=document.createElement("canvas");t.width=1,t.height=1,wr=t.getContext("2d")}(),wr.clearRect(0,0,1,1);try{wr.drawImage(t,e,i,1,1,0,0,1,1),n=wr.getImageData(0,0,1,1).data}catch(t){return wr=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,o;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&p(Ks(t.style.backgroundColor),Ks(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){s=document.createElement("div"),s.className=n;let t=s.style;t.position="absolute",t.width="100%",t.height="100%",o=Xs();const e=o.canvas;s.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=s,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=de(i),s=ge(i),o=re(i),r=oe(i);mi(e.coordinateToPixelTransform,n),mi(e.coordinateToPixelTransform,s),mi(e.coordinateToPixelTransform,o),mi(e.coordinateToPixelTransform,r);const A=this.inversePixelTransform;mi(A,n),mi(A,s),mi(A,o),mi(A,r),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new _r(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(ns,t,e)}postRender(t,e){this.dispatchRenderEvent_(ss,t,e)}getRenderTransform(t,e,i,n,s,o,r){const A=s/2,a=o/2,l=n/e,h=-l,c=-t[0]+r,u=-t[1];return yi(this.tempTransform,A,a,l,h,-i,c,u)}disposeInternal(){delete this.frameState,super.disposeInternal()}};function br(t,e,i,n,s,o,r,A,a,l,h,c){let u=t[e],d=t[e+1],g=0,p=0,f=0,m=0;function y(){g=u,p=d,u=t[e+=n],d=t[e+1],m+=f,f=Math.sqrt((u-g)*(u-g)+(d-p)*(d-p))}do{y()}while(e<i-n&&m+f<o);let _=0===f?0:(o-m)/f;const B=xe(g,u,_),w=xe(p,d,_),C=e-n,b=m,v=o+A*a(l,s,h);for(;e<i-n&&m+f<v;)y();_=0===f?0:(v-m)/f;const x=xe(g,u,_),E=xe(p,d,_);let F;if(c){const t=[B,w,x,E];bi(t,0,4,2,c,t,t),F=t[0]>t[2]}else F=B>x;const S=Math.PI,I=[],M=C+n===e;let L;if(f=0,m=b,u=t[e=C],d=t[e+1],M){y(),L=Math.atan2(d-p,u-g),F&&(L+=L>0?-S:S);const t=(x+B)/2,e=(E+w)/2;return I[0]=[t,e,(v-o)/2,L,s],I}for(let t=0,c=(s=s.replace(/\n/g," ")).length;t<c;){y();let B=Math.atan2(d-p,u-g);if(F&&(B+=B>0?-S:S),void 0!==L){let t=B-L;if(t+=t>S?-2*S:t<-S?2*S:0,Math.abs(t)>r)return null}L=B;const w=t;let C=0;for(;t<c;++t){const r=A*a(l,s[F?c-t-1:t],h);if(e+n<i&&m+f<o+C+r/2)break;C+=r}if(t===w)continue;const b=F?s.substring(c-w,c-t):s.substring(w,t);_=0===f?0:(o+C/2-m)/f;const v=xe(g,u,_),x=xe(p,d,_);I.push([v,x,C/2,B,b]),o+=C}return I}const vr=[1/0,1/0,-1/0,-1/0],xr=[],Er=[],Fr=[],Sr=[];function Ir(t){return t[3].declutterBox}const Mr=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Lr(t,e){return"start"!==e&&"end"!==e||Mr.test(t)||(e="start"===e?"left":"right"),pr[e]}function Ur(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var Qr=class{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const s=t+e+i+n;if(this.labels_[s])return this.labels_[s];const o=n?this.strokeStates[n]:null,r=i?this.fillStates[i]:null,A=this.textStates[e],a=this.pixelRatio,l=[A.scale[0]*a,A.scale[1]*a],h=Array.isArray(t),c=A.justify?pr[A.justify]:Lr(Array.isArray(t)?t[0]:t,A.textAlign||go),u=n&&o.lineWidth?o.lineWidth:0,d=h?t:t.split("\n").reduce(Ur,[]),{width:g,height:p,widths:f,heights:m,lineWidths:y}=function(t,e){const i=[],n=[],s=[];let o=0,r=0,A=0,a=0;for(let l=0,h=e.length;l<=h;l+=2){const c=e[l];if("\n"===c||l===h){o=Math.max(o,r),s.push(r),r=0,A+=a;continue}const u=e[l+1]||t.font,d=vo(u,c);i.push(d),r+=d;const g=Co(u);n.push(g),a=Math.max(a,g)}return{width:o,height:A,widths:i,heights:n,lineWidths:s}}(A,d),_=g+u,B=[],w=(_+2)*l[0],C=(p+u)*l[1],b={width:w<0?Math.floor(w):Math.ceil(w),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:B};1==l[0]&&1==l[1]||B.push("scale",l),n&&(B.push("strokeStyle",o.strokeStyle),B.push("lineWidth",u),B.push("lineCap",o.lineCap),B.push("lineJoin",o.lineJoin),B.push("miterLimit",o.miterLimit),B.push("setLineDash",[o.lineDash]),B.push("lineDashOffset",o.lineDashOffset)),i&&B.push("fillStyle",r.fillStyle),B.push("textBaseline","middle"),B.push("textAlign","center");const v=.5-c;let x=c*_+v*u;const E=[],F=[];let S,I=0,M=0,L=0,U=0;for(let t=0,e=d.length;t<e;t+=2){const e=d[t];if("\n"===e){M+=I,I=0,x=c*_+v*u,++U;continue}const s=d[t+1]||A.font;s!==S&&(n&&E.push("font",s),i&&F.push("font",s),S=s),I=Math.max(I,m[L]);const o=[e,x+v*f[L]+c*(f[L]-y[U]),.5*(u+I)+M];x+=f[L],n&&E.push("strokeText",o),i&&F.push("fillText",o),++L}return Array.prototype.push.apply(B,E),Array.prototype.push.apply(B,F),this.labels_[s]=b,b}replayTextBackground_(t,e,i,n,s,o,r){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),r&&(this.setStrokeStyle_(t,r),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,s,o,r,A,a,l,h,c,u,d,g,p){let f=i-(r*=c[0]),m=n-(A*=c[1]);const y=s+a>t?t-a:s,_=o+l>e?e-l:o,B=d[3]+y*c[0]+d[1],w=d[0]+_*c[1]+d[2],C=f-d[3],b=m-d[0];let v;return(g||0!==h)&&(xr[0]=C,Sr[0]=C,xr[1]=b,Er[1]=b,Er[0]=C+B,Fr[0]=Er[0],Fr[1]=b+w,Sr[1]=Fr[1]),0!==h?(v=yi([1,0,0,1,0,0],i,n,1,1,h,-i,-n),mi(v,xr),mi(v,Er),mi(v,Fr),mi(v,Sr),Yt(Math.min(xr[0],Er[0],Fr[0],Sr[0]),Math.min(xr[1],Er[1],Fr[1],Sr[1]),Math.max(xr[0],Er[0],Fr[0],Sr[0]),Math.max(xr[1],Er[1],Fr[1],Sr[1]),vr)):Yt(Math.min(C,C+B),Math.min(b,b+w),Math.max(C,C+B),Math.max(b,b+w),vr),u&&(f=Math.round(f),m=Math.round(m)),{drawImageX:f,drawImageY:m,drawImageW:y,drawImageH:_,originX:a,originY:l,declutterBox:{minX:vr[0],minY:vr[1],maxX:vr[2],maxY:vr[3],value:p},canvasTransform:v,scale:c}}replayImageOrLabel_(t,e,i,n,s,o,r){const A=!(!o&&!r),a=n.declutterBox,l=t.canvas,h=r?r[2]*n.scale[0]/2:0;return a.minX-h<=l.width/e&&a.maxX+h>=0&&a.minY-h<=l.height/e&&a.maxY+h>=0&&(A&&this.replayTextBackground_(t,xr,Er,Fr,Sr,o,r),Eo(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=mi(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const s=this.textStates[e],o=this.createLabel(t,e,n,i),r=this.strokeStates[i],A=this.pixelRatio,a=Lr(Array.isArray(t)?t[0]:t,s.textAlign||go),l=pr[s.textBaseline||po],h=r&&r.lineWidth?r.lineWidth:0;return{label:o,anchorX:a*(o.width/A-2*s.scale[0])+2*(.5-a)*h,anchorY:l*o.height/A+2*(.5-l)*h}}execute_(t,e,i,n,s,o,r,A){let a;var l,h;this.pixelCoordinates_&&p(i,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Ci(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),l=this.renderedTransform_,h=i,l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5]);let c=0;const u=n.length;let d,g,f,m,y,_,B,w,C,b,v,x,E=0,F=0,S=0,I=null,M=null;const L=this.coordinateCache_,U=this.viewRotation_,Q=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,T={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:U},k=this.instructions!=n||this.overlaps?0:200;let R,P,D,O;for(;c<u;){const i=n[c];switch(i[0]){case ar.BEGIN_GEOMETRY:R=i[1],O=i[3],R.getGeometry()?void 0===r||fe(r,O.getExtent())?++c:c=i[2]+1:c=i[2];break;case ar.BEGIN_PATH:F>k&&(this.fill_(t),F=0),S>k&&(t.stroke(),S=0),F||S||(t.beginPath(),m=NaN,y=NaN),++c;break;case ar.CIRCLE:E=i[1];const n=a[E],l=a[E+1],h=a[E+2]-n,u=a[E+3]-l,p=Math.sqrt(h*h+u*u);t.moveTo(n+p,l),t.arc(n,l,p,0,2*Math.PI,!0),++c;break;case ar.CLOSE_PATH:t.closePath(),++c;break;case ar.CUSTOM:E=i[1],d=i[2];const N=i[3],H=i[4],G=6==i.length?i[5]:void 0;T.geometry=N,T.feature=R,c in L||(L[c]=[]);const K=L[c];G?G(a,E,d,2,K):(K[0]=a[E],K[1]=a[E+1],K.length=2),H(K,T),++c;break;case ar.DRAW_IMAGE:E=i[1],d=i[2],w=i[3],g=i[4],f=i[5];let V=i[6];const W=i[7],z=i[8],X=i[9],Y=i[10];let q=i[11];const j=i[12];let J=i[13];const Z=i[14],$=i[15];if(!w&&i.length>=20){C=i[19],b=i[20],v=i[21],x=i[22];const t=this.drawLabelWithPointPlacement_(C,b,v,x);w=t.label,i[3]=w;const e=i[23];g=(t.anchorX-e)*this.pixelRatio,i[4]=g;const n=i[24];f=(t.anchorY-n)*this.pixelRatio,i[5]=f,V=w.height,i[6]=V,J=w.width,i[13]=J}let tt,et,it,nt;i.length>25&&(tt=i[25]),i.length>17?(et=i[16],it=i[17],nt=i[18]):(et=fo,it=!1,nt=!1),Y&&Q?q+=U:Y||Q||(q-=U);let st=0;for(;E<d;E+=2){if(tt&&tt[st++]<J/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(w.width,w.height,a[E],a[E+1],J,V,g,f,z,X,q,j,s,et,it||nt,R),n=[t,e,w,i,W,it?I:null,nt?M:null];if(A){if("none"===Z)continue;if("obstacle"===Z){A.insert(i.declutterBox);continue}{let t,e;if($){const i=d-E;if(!$[i]){$[i]=n;continue}if(t=$[i],delete $[i],e=Ir(t),A.collides(e))continue}if(A.collides(i.declutterBox))continue;t&&(A.insert(e),this.replayImageOrLabel_.apply(this,t)),A.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,n)}++c;break;case ar.DRAW_CHARS:const ot=i[1],rt=i[2],At=i[3],at=i[4];x=i[5];const lt=i[6],ht=i[7],ct=i[8];v=i[9];const ut=i[10];C=i[11],b=i[12];const dt=[i[13],i[13]],gt=this.textStates[b],pt=gt.font,ft=[gt.scale[0]*ht,gt.scale[1]*ht];let mt;pt in this.widths_?mt=this.widths_[pt]:(mt={},this.widths_[pt]=mt);const yt=kn(a,ot,rt,2),_t=Math.abs(ft[0])*xo(pt,C,mt);if(at||_t<=yt){const i=this.textStates[b].textAlign,n=br(a,ot,rt,2,C,(yt-_t)*pr[i],lt,Math.abs(ft[0]),xo,pt,mt,Q?0:this.viewRotation_);t:if(n){const i=[];let s,o,r,a,l;if(v)for(s=0,o=n.length;s<o;++s){l=n[s],r=l[4],a=this.createLabel(r,b,"",v),g=l[2]+(ft[0]<0?-ut:ut),f=At*a.height+2*(.5-At)*ut*ft[1]/ft[0]-ct;const o=this.calculateImageOrLabelDimensions_(a.width,a.height,l[0],l[1],a.width,a.height,g,f,0,0,l[3],dt,!1,fo,!1,R);if(A&&A.collides(o.declutterBox))break t;i.push([t,e,a,o,1,null,null])}if(x)for(s=0,o=n.length;s<o;++s){l=n[s],r=l[4],a=this.createLabel(r,b,x,""),g=l[2],f=At*a.height-ct;const o=this.calculateImageOrLabelDimensions_(a.width,a.height,l[0],l[1],a.width,a.height,g,f,0,0,l[3],dt,!1,fo,!1,R);if(A&&A.collides(o.declutterBox))break t;i.push([t,e,a,o,1,null,null])}A&&A.load(i.map(Ir));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++c;break;case ar.END_GEOMETRY:if(void 0!==o){R=i[1];const t=o(R,O);if(t)return t}++c;break;case ar.FILL:k?F++:this.fill_(t),++c;break;case ar.MOVE_TO_LINE_TO:for(E=i[1],d=i[2],P=a[E],D=a[E+1],_=P+.5|0,B=D+.5|0,_===m&&B===y||(t.moveTo(P,D),m=_,y=B),E+=2;E<d;E+=2)P=a[E],D=a[E+1],_=P+.5|0,B=D+.5|0,E!=d-2&&_===m&&B===y||(t.lineTo(P,D),m=_,y=B);++c;break;case ar.SET_FILL_STYLE:I=i,this.alignFill_=i[2],F&&(this.fill_(t),F=0,S&&(t.stroke(),S=0)),t.fillStyle=i[1],++c;break;case ar.SET_STROKE_STYLE:M=i,S&&(t.stroke(),S=0),this.setStrokeStyle_(t,i),++c;break;case ar.STROKE:k?S++:t.stroke(),++c;break;default:++c}}F&&this.fill_(t),S&&t.stroke()}execute(t,e,i,n,s,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,s)}};const Tr=["Polygon","Circle","LineString","Image","Text","Default"];const kr={};var Rr=class{constructor(t,e,i,n,s,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(s)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const t in n){const e=n[t];i[t]=new Qr(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,s,o){const r=2*(n=Math.round(n))+1,A=yi(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),a=!this.hitDetectionContext_;a&&(this.hitDetectionContext_=Xs(r,r));const l=this.hitDetectionContext_;let h;l.canvas.width!==r||l.canvas.height!==r?(l.canvas.width=r,l.canvas.height=r):a||l.clearRect(0,0,r,r),void 0!==this.renderBuffer_&&(h=[1/0,1/0,-1/0,-1/0],te(h,t),Nt(h,e*(this.renderBuffer_+n),h));const u=function(t){if(void 0!==kr[t])return kr[t];const e=2*t+1,i=t*t,n=new Array(i+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const r=s*s+o*o;if(r>i)break;let A=n[r];A||(A=[],n[r]=A),A.push(4*((t+s)*e+(t+o))+3),s>0&&A.push(4*((t-s)*e+(t+o))+3),o>0&&(A.push(4*((t+s)*e+(t-o))+3),s>0&&A.push(4*((t-s)*e+(t-o))+3))}const s=[];for(let t=0,e=n.length;t<e;++t)n[t]&&s.push(...n[t]);return kr[t]=s,s}(n);let d;function g(t,e){const i=l.getImageData(0,0,r,r).data;for(let A=0,a=u.length;A<a;A++)if(i[u[A]]>0){if(!o||"Image"!==d&&"Text"!==d||o.includes(t)){const i=(u[A]-3)/4,o=n-i%r,a=n-(i/r|0),l=s(t,e,o*o+a*a);if(l)return l}l.clearRect(0,0,r,r);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);let f,m,y,_,B;for(p.sort(c),f=p.length-1;f>=0;--f){const t=p[f].toString();for(y=this.executorsByZIndex_[t],m=Tr.length-1;m>=0;--m)if(d=Tr[m],_=y[d],void 0!==_&&(B=_.executeHitDetection(l,A,i,g,h),B))return B}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],s=e[2],o=e[3],r=[i,n,i,o,s,o,s,n];return Ci(r,0,8,2,t,r),r}isEmpty(){return Y(this.executorsByZIndex_)}execute(t,e,i,n,s,o,r){const A=Object.keys(this.executorsByZIndex_).map(Number);let a,l,h,u,d,g;for(A.sort(c),this.maxExtent_&&(t.save(),this.clip(t,i)),o=o||Tr,r&&A.reverse(),a=0,l=A.length;a<l;++a){const l=A[a].toString();for(d=this.executorsByZIndex_[l],h=0,u=o.length;h<u;++h){g=d[o[h]],void 0!==g&&g.execute(t,e,i,n,s,r)}}this.maxExtent_&&t.restore()}},Pr=0,Dr=1;var Or=class extends lr{constructor(t,e,i,n,s,o,r){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,i,n){if(!this.image_)return;const s=Ci(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,r=this.tmpLocalTransform_,A=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=A*this.imageOpacity_);let a=this.imageRotation_;this.imageRotateWithView_&&(a+=this.viewRotation_);for(let t=0,e=s.length;t<e;t+=2){const e=s[t]-this.imageAnchorX_,i=s[t+1]-this.imageAnchorY_;if(0!==a||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,n=i+this.imageAnchorY_;yi(r,t,n,1,1,a,-t,-n),o.setTransform.apply(o,r),o.translate(t,n),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=A)}drawText_(t,e,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Ci(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_;let r=this.textRotation_;for(this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=n){const t=s[e]+this.textOffsetX_,i=s[e+1]+this.textOffsetY_;0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(t-this.textOffsetX_,i-this.textOffsetY_),o.rotate(r),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,n,s){const o=this.context_,r=Ci(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);let A=r.length;s&&(A-=2);for(let t=2;t<A;t+=2)o.lineTo(r[t],r[t+1]);return s&&o.closePath(),i}drawRings_(t,e,i,n){for(let s=0,o=i.length;s<o;++s)e=this.moveToLineTo_(t,e,i[s],n,!0);return e}drawCircle(t){if(fe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,i){const n=t.getFlatCoordinates();if(n){const s=t.getStride();return Ci(n,0,n.length,s,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],s=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&fe(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),fe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(fe(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let n=0;const s=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=s.length;t<e;++t)n=this.moveToLineTo_(i,n,s[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),fe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),fe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const s=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=s.length;t<e;++t){const e=s[t];n=this.drawRings_(i,n,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),p(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:go;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:zs(e||ao)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),o=e.getLineJoin(),r=e.getWidth(),A=e.getMiterLimit(),a=n||ho;this.strokeState_={lineCap:void 0!==i?i:lo,lineDash:1===this.pixelRatio_?a:a.map((t=>t*this.pixelRatio_)),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==o?o:co,lineWidth:(void 0!==r?r:1)*this.pixelRatio_,miterLimit:void 0!==A?A:10,strokeStyle:zs(t||uo)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:zs(t||ao)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),s=i.getLineDashOffset(),o=i.getLineJoin(),r=i.getWidth(),A=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:lo,lineDash:n||ho,lineDashOffset:s||0,lineJoin:void 0!==o?o:co,lineWidth:void 0!==r?r:1,miterLimit:void 0!==A?A:10,strokeStyle:zs(t||uo)}}else this.textStrokeState_=null;const n=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),r=t.getRotateWithView(),A=t.getRotation(),a=t.getScaleArray(),l=t.getText(),h=t.getTextAlign(),c=t.getTextBaseline();this.textState_={font:void 0!==n?n:Ao,textAlign:void 0!==h?h:go,textBaseline:void 0!==c?c:po},this.text_=void 0!==l?Array.isArray(l)?l.reduce(((t,e,i)=>t+(i%2?" ":e)),""):l:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==r&&r,this.textRotation_=void 0!==A?A:0,this.textScale_=[this.pixelRatio_*a[0],this.pixelRatio_*a[1]]}else this.text_=""}};const Nr=.5;const Hr={Point:function(t,e,i,n,s){const o=i.getImage(),r=i.getText();let A;if(o){if(o.getImageState()!=Ls)return;let a=t;if(s){const l=o.getDeclutterMode();if("none"!==l)if(a=s,"obstacle"===l){const s=t.getBuilder(i.getZIndex(),"Image");s.setImageStyle(o,A),s.drawPoint(e,n)}else r&&r.getText()&&(A={})}const l=a.getBuilder(i.getZIndex(),"Image");l.setImageStyle(o,A),l.drawPoint(e,n)}if(r&&r.getText()){let o=t;s&&(o=s);const a=o.getBuilder(i.getZIndex(),"Text");a.setTextStyle(r,A),a.drawText(e,n)}},LineString:function(t,e,i,n,s){const o=i.getStroke();if(o){const s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawLineString(e,n)}const r=i.getText();if(r&&r.getText()){const o=(s||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(r),o.drawText(e,n)}},Polygon:function(t,e,i,n,s){const o=i.getFill(),r=i.getStroke();if(o||r){const s=t.getBuilder(i.getZIndex(),"Polygon");s.setFillStrokeStyle(o,r),s.drawPolygon(e,n)}const A=i.getText();if(A&&A.getText()){const o=(s||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(A),o.drawText(e,n)}},MultiPoint:function(t,e,i,n,s){const o=i.getImage(),r=i.getText();let A;if(o){if(o.getImageState()!=Ls)return;let a=t;if(s){const l=o.getDeclutterMode();if("none"!==l)if(a=s,"obstacle"===l){const s=t.getBuilder(i.getZIndex(),"Image");s.setImageStyle(o,A),s.drawMultiPoint(e,n)}else r&&r.getText()&&(A={})}const l=a.getBuilder(i.getZIndex(),"Image");l.setImageStyle(o,A),l.drawMultiPoint(e,n)}if(r&&r.getText()){let o=t;s&&(o=s);const a=o.getBuilder(i.getZIndex(),"Text");a.setTextStyle(r,A),a.drawText(e,n)}},MultiLineString:function(t,e,i,n,s){const o=i.getStroke();if(o){const s=t.getBuilder(i.getZIndex(),"LineString");s.setFillStrokeStyle(null,o),s.drawMultiLineString(e,n)}const r=i.getText();if(r&&r.getText()){const o=(s||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(r),o.drawText(e,n)}},MultiPolygon:function(t,e,i,n,s){const o=i.getFill(),r=i.getStroke();if(r||o){const s=t.getBuilder(i.getZIndex(),"Polygon");s.setFillStrokeStyle(o,r),s.drawMultiPolygon(e,n)}const A=i.getText();if(A&&A.getText()){const o=(s||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(A),o.drawText(e,n)}},GeometryCollection:function(t,e,i,n,s){const o=e.getGeometriesArray();let r,A;for(r=0,A=o.length;r<A;++r){(0,Hr[o[r].getType()])(t,o[r],i,n,s)}},Circle:function(t,e,i,n,s){const o=i.getFill(),r=i.getStroke();if(o||r){const s=t.getBuilder(i.getZIndex(),"Circle");s.setFillStrokeStyle(o,r),s.drawCircle(e,n)}const A=i.getText();if(A&&A.getText()){const o=(s||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(A),o.drawText(e,n)}}};function Gr(t,e){return parseInt(nt(t),10)-parseInt(nt(e),10)}function Kr(t,e){const i=Vr(t,e);return i*i}function Vr(t,e){return.5*t/e}function Wr(t,e,i,n,s,o,r){let A=!1;const a=i.getImage();if(a){const t=a.getImageState();t==Ls||t==Us?a.unlistenImageChange(s):(t==Is&&a.load(),a.listenImageChange(s),A=!0)}return function(t,e,i,n,s,o){const r=i.getGeometryFunction()(e);if(!r)return;const A=r.simplifyTransformed(n,s);if(i.getRenderer())zr(t,A,i,e);else{(0,Hr[A.getType()])(t,A,i,e,o)}}(t,e,i,n,o,r),A}function zr(t,e,i,n){if("GeometryCollection"==e.getType()){const s=e.getGeometries();for(let e=0,o=s.length;e<o;++e)zr(t,s[e],i,n);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer())}var Xr=class extends Cr{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,s=e.viewState,o=s.center,r=s.resolution,A=s.projection,a=s.rotation,l=A.getExtent(),h=this.getLayer().getSource(),c=e.pixelRatio,u=e.viewHints,d=!(u[Pr]||u[Dr]),g=this.compositionContext_,p=Math.round(e.size[0]*c),f=Math.round(e.size[1]*c),m=h.getWrapX()&&A.canWrapX(),y=m?pe(l):null,_=m?Math.ceil((n[2]-l[2])/y)+1:1;let B=m?Math.floor((n[0]-l[0])/y):0;do{const e=this.getRenderTransform(o,r,a,c,p,f,B*y);t.execute(g,1,e,a,d,void 0,i)}while(++B<_)}setupCompositionContext_(){if(1!==this.opacity_){const t=Xs(this.context.canvas.width,this.context.canvas.height,Br);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,Ys(this.compositionContext_),Br.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,i){(function(t,e,i,n,s,o,r){t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=o,t[5]=r})(t,e,0,0,i,0,0)}(this.pixelTransform,1/i,1/i),_i(this.inversePixelTransform,this.pixelTransform);const s=wi(this.pixelTransform);this.useContainer(e,s,this.getBackground(t));const o=this.context,r=o.canvas,A=this.replayGroup_,a=this.declutterExecutorGroup;if((!A||A.isEmpty())&&(!a||a.isEmpty()))return null;const l=Math.round(t.size[0]*i),h=Math.round(t.size[1]*i);r.width!=l||r.height!=h?(r.width=l,r.height=h,r.style.transform!==s&&(r.style.transform=s)):this.containerReused||o.clearRect(0,0,l,h),this.preRender(o,t);const c=t.viewState;c.projection,this.opacity_=n.opacity,this.setupCompositionContext_();let u=!1,d=!0;if(n.extent&&this.clipping){const e=hi(n.extent);d=fe(e,t.extent),u=d&&!Vt(e,t.extent),u&&this.clipUnrotated(this.compositionContext_,t,e)}return d&&this.renderWorlds(A,t),u&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,t),this.renderedRotation_!==c.rotation&&(this.renderedRotation_=c.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];mi(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,s=this.renderedProjection_,o=this.wrappedRenderedExtent_,r=this.getLayer(),A=[],a=t[0]*Nr,l=t[1]*Nr;A.push(this.getRenderTransform(e,i,n,Nr,a,l,0).slice());const h=r.getSource(),u=s.getExtent();if(h.getWrapX()&&s.canWrapX()&&!Vt(u,o)){let t=o[0];const s=pe(u);let r,h=0;for(;t<u[0];)--h,r=s*h,A.push(this.getRenderTransform(e,i,n,Nr,a,l,r).slice()),t+=s;for(h=0,t=o[2];t>u[2];)++h,r=s*h,A.push(this.getRenderTransform(e,i,n,Nr,a,l,r).slice()),t-=s}this.hitDetectionImageData_=function(t,e,i,n,s,o,r){const A=Xs(t[0]*Nr,t[1]*Nr);A.imageSmoothingEnabled=!1;const a=A.canvas,l=new Or(A,Nr,s,null,r),h=i.length,u=Math.floor(16777215/h),d={};for(let t=1;t<=h;++t){const e=i[t-1],r=e.getStyleFunction()||n;if(!n)continue;let A=r(e,o);if(!A)continue;Array.isArray(A)||(A=[A]);const a="#"+("000000"+(t*u).toString(16)).slice(-6);for(let t=0,i=A.length;t<i;++t){const i=A[t],n=i.getGeometryFunction()(e);if(!n||!fe(s,n.getExtent()))continue;const o=i.clone(),r=o.getFill();r&&r.setColor(a);const l=o.getStroke();l&&(l.setColor(a),l.setLineDash(null)),o.setText(void 0);const h=i.getImage();if(h&&0!==h.getOpacity()){const t=h.getImageSize();if(!t)continue;const e=Xs(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=a,e.fillRect(0,0,i.width,i.height),o.setImage(new Xo({img:i,imgSize:t,anchor:h.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:h.getOrigin(),opacity:1,size:h.getSize(),scale:h.getScale(),rotation:h.getRotation(),rotateWithView:h.getRotateWithView()}))}const c=o.getZIndex()||0;let u=d[c];u||(u={},d[c]=u,u.Polygon=[],u.Circle=[],u.LineString=[],u.Point=[]),u[n.getType().replace("Multi","")].push(n,o)}}const g=Object.keys(d).map(Number).sort(c);for(let t=0,i=g.length;t<i;++t){const i=d[g[t]];for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t+=2){l.setStyle(n[t+1]);for(let i=0,s=e.length;i<s;++i)l.setTransform(e[i]),l.drawGeometry(n[t])}}}return A.getImageData(0,0,a.width,a.height)}(t,A,this.renderedFeatures_,r.getStyleFunction(),o,i,n)}e(function(t,e,i){const n=[];if(i){const s=Math.floor(Math.round(t[0])*Nr),o=Math.floor(Math.round(t[1])*Nr),r=4*(Be(s,0,i.width-1)+Be(o,0,i.height-1)*i.width),A=i.data[r],a=i.data[r+1],l=i.data[r+2]+256*(a+256*A),h=Math.floor(16777215/e.length);l&&l%h==0&&n.push(e[l/h-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,n,s){if(!this.replayGroup_)return;const o=e.viewState.resolution,r=e.viewState.rotation,A=this.getLayer(),a={},l=function(t,e,i){const o=nt(t),r=a[o];if(r){if(!0!==r&&i<r.distanceSq){if(0===i)return a[o]=!0,s.splice(s.lastIndexOf(r),1),n(t,A,e);r.geometry=e,r.distanceSq=i}}else{if(0===i)return a[o]=!0,n(t,A,e);s.push(a[o]={feature:t,layer:A,geometry:e,distanceSq:i,callback:n})}};let h;const c=[this.replayGroup_];return this.declutterExecutorGroup&&c.push(this.declutterExecutorGroup),c.some((n=>h=n.forEachFeatureAtCoordinate(t,o,r,i,l,n===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),h}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[Pr],s=t.viewHints[Dr],o=e.getUpdateWhileAnimating(),r=e.getUpdateWhileInteracting();if(this.ready&&!o&&n||!r&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const A=t.extent,a=t.viewState,l=a.projection,h=a.resolution,c=t.pixelRatio,u=e.getRevision(),d=e.getRenderBuffer();let g=e.getRenderOrder();void 0===g&&(g=Gr);const f=a.center.slice(),m=Nt(A,d*h),y=m.slice(),_=[m.slice()],B=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!Vt(B,t.extent)){const t=pe(B),e=Math.max(pe(m)/2,t);m[0]=B[0]-e,m[2]=B[2]+e,Pe(f,l);const i=_e(_[0],l);i[0]<B[0]&&i[2]<B[2]?_.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>B[0]&&i[2]>B[2]&&_.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==u&&this.renderedRenderOrder_==g&&Vt(this.wrappedRenderedExtent_,m))return p(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=f,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new mr(Vr(h,c),m,h,c);let C;this.getLayer().getDeclutter()&&(C=new mr(Vr(h,c),m,h,c));for(let t=0,e=_.length;t<e;++t)i.loadFeatures(_[t],h,l);const b=Kr(h,c);let v=!0;const x=function(t){let i;const n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,h)),i){const e=this.renderFeature(t,b,i,w,undefined,C);v=v&&!e}}.bind(this),E=li(m),F=i.getFeaturesInExtent(E);g&&F.sort(g);for(let t=0,e=F.length;t<e;++t)x(F[t]);this.renderedFeatures_=F,this.ready=v;const S=w.finish(),I=new Rr(m,h,c,i.getOverlaps(),S,e.getRenderBuffer());return C&&(this.declutterExecutorGroup=new Rr(m,h,c,i.getOverlaps(),C.finish(),e.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=u,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.wrappedRenderedExtent_=m,this.renderedCenter_=f,this.renderedProjection_=l,this.replayGroup_=I,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,s,o){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let A=0,a=i.length;A<a;++A)r=Wr(n,t,i[A],e,this.boundHandleStyleImageChange_,s,o)||r;else r=Wr(n,t,i,e,this.boundHandleStyleImageChange_,s,o);return r}};var Yr=class extends ir{constructor(t){super(t)}createRenderer(){return new Xr(this)}},qr="add",jr="remove";const Jr="length";class Zr extends V{constructor(t,e,i){super(t),this.element=e,this.index=i}}var $r=class extends ot{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Jr)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Zr(qr,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Zr(jr,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Zr(jr,i,t)),this.dispatchEvent(new Zr(qr,e,t))}updateLength_(){this.set(Jr,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new I(58)}};var tA=class{constructor(t){this.rbush_=new gs(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[nt(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const s=t[n],o=e[n],r={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:o};i[n]=r,this.items_[nt(o)]=r}this.rbush_.load(i)}remove(t){const e=nt(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[nt(e)];Zt([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,s=t.length;n<s;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return Y(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Yt(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}};function eA(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var iA=class extends ot{constructor(t){super(),this.projection=je(t.projection),this.attributions_=eA(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return et()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=eA(t),this.changed()}setState(t){this.state_=t,this.changed()}},nA="addfeature",sA="changefeature",oA="clear",rA="removefeature",AA="featuresloadstart",aA="featuresloadend",lA="featuresloaderror";function hA(t,e){return[[-1/0,-1/0,1/0,1/0]]}function cA(t,e){return function(i,n,s,o,r){const A=this;!function(t,e,i,n,s,o,r){const A=new XMLHttpRequest;A.open("GET","function"==typeof t?t(i,n,s):t,!0),"arraybuffer"==e.getType()&&(A.responseType="arraybuffer"),A.withCredentials=!1,A.onload=function(t){if(!A.status||A.status>=200&&A.status<300){const t=e.getType();let n;"json"==t||"text"==t?n=A.responseText:"xml"==t?(n=A.responseXML,n||(n=(new DOMParser).parseFromString(A.responseText,"application/xml"))):"arraybuffer"==t&&(n=A.response),n?o(e.readFeatures(n,{extent:i,featureProjection:s}),e.readProjection(n)):r()}else r()},A.onerror=r,A.send()}(t,e,i,n,s,(function(t,e){A.addFeatures(t),void 0!==o&&o(t)}),r||y)}}class uA extends V{constructor(t,e,i){super(t),this.feature=e,this.features=i}}var dA=class extends iA{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=y,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(M(this.format_,7),this.loader_=cA(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:hA;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,n;this.featuresRtree_=e?new tA:null,this.loadedExtentsRtree_=new tA,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),e||void 0!==i||(i=new $r(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=nt(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new uA(nA,t))}setupChangeEvents_(e,i){this.featureChangeKeys_[e]=[j(i,t,this.handleFeatureChange_,this),j(i,W,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(M(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],s=nt(n);this.addToIndex_(s,n)&&i.push(n)}for(let t=0,s=i.length;t<s;t++){const s=i[t],o=nt(s);this.setupChangeEvents_(o,s);const r=s.getGeometry();if(r){const t=r.getExtent();e.push(t),n.push(s)}else this.nullGeometryFeatures_[o]=s}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(nA))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new uA(nA,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(nA,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(rA,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(qr,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(jr,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(Z)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=function(t){this.removeFeatureInternal(t)}.bind(this);this.featuresRtree_.forEach(t);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new uA(oA);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Y(this.nullGeometryFeatures_)||g(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=function(t,e){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];_e(t,e);const n=pe(i);if(pe(t)>n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+n,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-n,t[3]]]}return[t]}(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let s=null;const o=[NaN,NaN];let r=1/0;const A=[-1/0,-1/0,1/0,1/0];return e=e||f,this.featuresRtree_.forEachInExtent(A,(function(t){if(e(t)){const e=t.getGeometry(),a=r;if(r=e.closestPointXY(i,n,o,r),r<a){s=t;const e=Math.sqrt(r);A[0]=i-e,A[1]=n-e,A[2]=i+e,A[3]=n+e}}})),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=nt(e),n=e.getGeometry();if(n){const t=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const s=e.getId();if(void 0!==s){const t=s.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new uA(sA,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:nt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Y(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let t=0,o=s.length;t<o;++t){const o=s[t];n.forEachInExtent(o,(function(t){return Vt(t.extent,o)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new uA(AA)),this.loader_.call(this,o,e,i,function(t){--this.loadingExtentsCount_,this.dispatchEvent(new uA(aA,void 0,t))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new uA(lA))}.bind(this)),n.insert(o,{extent:o.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,(function(e){if(Zt(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=nt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=nt(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Z),delete this.featureChangeKeys_[e];const n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new uA(rA,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){M(this.format_,7),this.url_=t,this.setLoader(cA(t,this.format_))}};const gA="drawstart",pA="drawend",fA="drawabort";class mA extends V{constructor(t,e){super(t),this.feature=e}}function yA(t,e){return Ce(t[0],t[1],e[0],e[1])}function _A(t,e){const i=t.length;return e<0?t[e+i]:e>=i?t[e-i]:t[e]}function BA(t,e,i){let n,s;e<i?(n=e,s=i):(n=i,s=e);const o=Math.ceil(n),r=Math.floor(s);if(o>r){return yA(EA(t,n),EA(t,s))}let A=0;if(n<o){A+=yA(EA(t,n),_A(t,o))}if(r<s){A+=yA(_A(t,r),EA(t,s))}for(let e=o;e<r-1;++e){A+=yA(_A(t,e),_A(t,e+1))}return A}function wA(t,e,i){if(e instanceof Pn)bA(t,e.getCoordinates(),!1,i);else if(e instanceof Hn){const n=e.getCoordinates();for(let e=0,s=n.length;e<s;++e)bA(t,n[e],!1,i)}else if(e instanceof cn){const n=e.getCoordinates();for(let e=0,s=n.length;e<s;++e)bA(t,n[e],!0,i)}else if(e instanceof Wn){const n=e.getCoordinates();for(let e=0,s=n.length;e<s;++e){const s=n[e];for(let e=0,n=s.length;e<n;++e)bA(t,s[e],!0,i)}}else if(e instanceof Un){const n=e.getGeometries();for(let e=0;e<n.length;++e)wA(t,n[e],i)}else;}const CA={index:-1,endIndex:NaN};function bA(t,e,i,n){const s=t[0],o=t[1];for(let t=0,r=e.length-1;t<r;++t){const r=xA(s,o,e[t],e[t+1]);if(0===r.squaredDistance){const s=t+r.along;return void n.push({coordinates:e,ring:i,startIndex:s,endIndex:s})}}}const vA={along:0,squaredDistance:0};function xA(t,e,i,n){const s=i[0],o=i[1],r=n[0]-s,A=n[1]-o;let a=0,l=s,h=o;return 0===r&&0===A||(a=Be(((t-s)*r+(e-o)*A)/(r*r+A*A),0,1),l+=r*a,h+=A*a),vA.along=a,vA.squaredDistance=Ee(Ce(t,e,l,h),10),vA}function EA(t,e){const i=t.length;let n=Math.floor(e);const s=e-n;n>=i?n-=i:n<0&&(n+=i);let o=n+1;o>=i&&(o-=i);const r=t[n],A=r[0],a=r[1],l=t[o];return[A+(l[0]-A)*s,a+(l[1]-a)*s]}function FA(){const t=Do();return function(e,i){return t[e.getGeometry().getType()]}}function SA(t,e){return function(i,n,s){const o=ai(i[0]),r=ai(i[i.length-1]),A=Math.sqrt(Te(o,r));n=n||function(t,e,i){e=e||32;const n=t.getStride(),s=t.getLayout(),o=t.getCenter(),r=n*(e+1),A=new Array(r);for(let t=0;t<r;t+=n){A[t]=0,A[t+1]=0;for(let e=2;e<n;e++)A[t+e]=o[e]}const a=[A.length],l=new hn(A,s,a);return dn(l,o,t.getRadius(),i),l}(new Fn(o),t);let a=e;if(!e&&0!==e){const t=r[0]-o[0],e=r[1]-o[1];a=Math.atan2(e,t)}return dn(n,o,A,a),n}}var IA=class extends fi{constructor(t){const e=t;e.stopDown||(e.stopDown=m),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:f,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const t=this.mode_;if("Circle"===t)i=function(t,e,i){const n=e||new Fn([NaN,NaN]),s=ai(t[0]),o=Te(s,ai(t[t.length-1]));return n.setCenterAndRadius(s,Math.sqrt(o),this.geometryLayout_),n};else{let e;"Point"===t?e=qi:"LineString"===t?e=Pn:"Polygon"===t&&(e=cn),i=function(i,n,s){return n?"Polygon"===t?i[0].length?n.setCoordinates([i[0].concat([i[0][0]])],this.geometryLayout_):n.setCoordinates([],this.geometryLayout_):n.setCoordinates(i,this.geometryLayout_):n=new e(i,this.geometryLayout_),n}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new Yr({source:new dA({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:FA(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:D,this.freehandCondition_,t.freehand?this.freehandCondition_=T:this.freehandCondition_=t.freehandCondition?t.freehandCondition:N,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(rt,this.updateState_)}setTrace(t){let e;e=t?!0===t?T:t:R,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===i&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===h.POINTERMOVE,n=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===h.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===h.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===h.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=t.type===h.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===h.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===h.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new On(h.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=Ot([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(i);if(0===n.length)return;const s=function(t,e){const i=[];for(let n=0;n<e.length;++n)wA(t,e[n].getGeometry(),i);return i}(t.coordinate,n);s.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:s,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const n=Math.ceil(t);let s=Math.floor(e);s===e&&(s-=1),i=s-n+1}else{const n=Math.floor(t);let s=Math.ceil(e);s===e&&(s+=1),i=n-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e<i){const s=Math.ceil(e);let o=Math.floor(i);o===i&&(o-=1);for(let e=s;e<=o;++e)n.push(_A(t.coordinates,e))}else{const s=Math.floor(e);let o=Math.ceil(i);o===i&&(o+=1);for(let e=s;e>=o;--e)n.push(_A(t.coordinates,e))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active)return;if(-1===e.targetIndex&&ke(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(t,e,i,n){const s=t[0],o=t[1];let r=1/0,A=-1,a=NaN;for(let t=0;t<e.targets.length;++t){const i=e.targets[t],n=i.coordinates;let l,h=1/0;for(let t=0;t<n.length-1;++t){const e=xA(s,o,n[t],n[t+1]);e.squaredDistance<h&&(h=e.squaredDistance,l=t+e.along)}h<r&&(r=h,i.ring&&e.targetIndex===t&&(i.endIndex>i.startIndex?l<i.startIndex&&(l+=n.length):i.endIndex<i.startIndex&&l>i.startIndex&&(l-=n.length)),a=l,A=t)}const l=e.targets[A];let h=l.ring;if(e.targetIndex===A&&h){const t=EA(l.coordinates,a);ke(i.getPixelFromCoordinate(t),e.startPx)>n&&(h=!1)}if(h){const t=l.coordinates,e=t.length,i=l.startIndex,n=a;if(i<n){const s=BA(t,i,n);BA(t,i,n-e)<s&&(a-=e)}else{const s=BA(t,i,n);BA(t,i,n+e)<s&&(a+=e)}}return CA.index=A,CA.endIndex=a,CA}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[i.index];this.addTracedCoordinates_(t,t.startIndex,i.endIndex)}else{const t=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(t,i.endIndex)}e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const s=EA(n.coordinates,n.endIndex),o=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&"Point"!==this.mode_||(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],s=e[1]-i[1],o=n*n+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const o=this.mode_;if("Point"===o)i=!0;else if("Circle"===o)i=2===this.sketchCoords_.length;else if("LineString"===o)n=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){const t=this.sketchCoords_;n=t[0].length>this.minPoints_,s=[t[0][0],t[0][t[0].length-2]],s=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(n){const e=this.getMap();for(let n=0,o=s.length;n<o;n++){const o=s[n],r=e.getPixelFromCoordinate(o),A=t[0]-r[0],a=t[1]-r[1],l=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(A*A+a*a)<=l,i){this.finishCoordinate_=o;break}}}}return i}createOrUpdateSketchPoint_(t){if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}else this.sketchPoint_=new In(new qi(t)),this.updateSketchFeatures_()}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new In);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new Pn(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=Fi(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new In(new Pn(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new In,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new mA(gA,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),s=Fi(this.geometryLayout_);let o,r;for(;t.length<s;)t.push(0);if("Point"===this.mode_?r=this.sketchCoords_:"Polygon"===this.mode_?(o=this.sketchCoords_[0],r=o[o.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(o=this.sketchCoords_,r=o[o.length-1]),r[0]=t[0],r[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}if("Polygon"===i.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=t.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(t.slice()),this.geometryFunction_(s,e,i)):"Polygon"===o&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(t.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n&&this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<t;++s){let t;if("LineString"===n||"Circle"===n){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,i),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===n){t=this.sketchCoords_[0],t.splice(-2,1);const n=this.sketchLine_.getGeometry();if(t.length>=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}n.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,i,n)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new Kn([e])):"MultiLineString"===this.type_?t.setGeometry(new Hn([e])):"MultiPolygon"===this.type_&&t.setGeometry(new Wn([e])),this.dispatchEvent(new mA(pA,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new mA(fA,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let n;if(i&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)n=this.sketchCoords_;else{if("Polygon"!==e)return;n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&n.shift(),n.pop();for(let e=0;e<t.length;e++)this.addToDrawing_(t[e]);const s=t[t.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new In(new qi(i)),this.updateSketchFeatures_(),this.dispatchEvent(new mA(gA,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}},MA=37,LA=38,UA=39,QA=40;var TA=class extends ut{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return D(t)&&H(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==s){const i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(n==QA||n==MA||n==UA||n==LA)){const s=t.map.getView(),o=s.getResolution()*this.pixelDelta_;let r=0,A=0;n==QA?A=-o:n==MA?r=-o:n==UA?r=o:A=o;const a=[r,A];Qe(a,s.getRotation()),function(t,e,i){const n=t.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:ht,center:t.getConstrainedCenter(s)})}}(s,a,this.duration_),i.preventDefault(),e=!0}}return!e}};var kA=class extends ut{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:H,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==s||t.type==o){const i=t.originalEvent,n=i.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){const s=t.map,o=n=="+".charCodeAt(0)?this.delta_:-this.delta_;ct(s.getView(),o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},RA="postrender",PA="movestart",DA="moveend",OA="loadstart",NA="loadend";const HA=[0,0,0,0],GA=[],KA="modifystart",VA="modifyend";class WA extends V{constructor(t,e,i){super(t),this.features=e,this.mapBrowserEvent=i}}function zA(t,e){return t.index-e.index}function XA(t,e,i){const n=e.geometry;if("Circle"===n.getType()){let i=n;if(1===e.index){const e=Te(i.getCenter(),ai(t)),n=Math.sqrt(e)-i.getRadius();return n*n}}const s=ai(t);return GA[0]=ai(e.segment[0]),GA[1]=ai(e.segment[1]),function(t,e){return Te(t,Me(t,e))}(s,GA)}function YA(t,e,i){const n=e.geometry;if("Circle"===n.getType()&&1===e.index){return Ai(n.getClosestPoint(ai(t)))}const s=ai(t);return GA[0]=ai(e.segment[0]),GA[1]=ai(e.segment[1]),Ai(Me(s,GA))}function qA(){const t=Do();return function(e,i){return t.Point}}var jA=class extends fi{constructor(t){let e;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:K,this.defaultDeleteCondition_=function(t){return function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(t)&&P(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:T,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new tA,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Yr({source:new dA({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:qA(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&&(this.source_=t.source,e=new $r(this.source_.getFeatures()),this.source_.addEventListener(nA,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(rA,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(qr,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(jr,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(e){const i=e.getGeometry();if(i){const t=this.SEGMENT_WRITERS_[i.getType()];t&&t(e,i)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(t,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new $r;const i=this.featuresBeingModified_.getArray();for(let t=0,n=e.length;t<n;++t){const n=e[t];for(let t=0,e=n.length;t<e;++t){const e=n[t].feature;e&&!i.includes(e)&&this.featuresBeingModified_.push(e)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new WA(KA,this.featuresBeingModified_,t))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(t,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(let t=i.length-1;t>=0;--t){const n=i[t];for(let t=this.dragSegments_.length-1;t>=0;--t)this.dragSegments_[t][0]===n&&this.dragSegments_.splice(t,1);e.remove(n)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)}writeMultiPointGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n],o={feature:t,geometry:e,depth:[n],index:n,segment:[s,s]};this.rBush_.insert(e.getExtent(),o)}}writeLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length-1;n<s;++n){const s=i.slice(n,n+2),o={feature:t,geometry:e,index:n,segment:s};this.rBush_.insert(Ot(s),o)}}writeMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n];for(let i=0,o=s.length-1;i<o;++i){const o=s.slice(i,i+2),r={feature:t,geometry:e,depth:[n],index:i,segment:o};this.rBush_.insert(Ot(o),r)}}}writePolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n];for(let i=0,o=s.length-1;i<o;++i){const o=s.slice(i,i+2),r={feature:t,geometry:e,depth:[n],index:i,segment:o};this.rBush_.insert(Ot(o),r)}}}writeMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n];for(let i=0,o=s.length;i<o;++i){const o=s[i];for(let s=0,r=o.length-1;s<r;++s){const r=o.slice(s,s+2),A={feature:t,geometry:e,depth:[i,n],index:s,segment:r};this.rBush_.insert(Ot(r),A)}}}}writeCircleGeometry_(t,e){const i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},s={feature:t,geometry:e,index:1,segment:[i,i]},o=[n,s];n.featureSegments=o,s.featureSegments=o,this.rBush_.insert(jt(i),n);let r=e;this.rBush_.insert(r.getExtent(),s)}writeGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let e=0;e<i.length;++e){const n=i[e];(0,this.SEGMENT_WRITERS_[n.getType()])(t,n)}}createOrUpdateVertexFeature_(t,e,i){let n=this.vertexFeature_;if(n){n.getGeometry().setCoordinates(t)}else n=new In(new qi(t)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n);return n.set("features",e),n.set("geometries",i),n}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=h.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=h.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==h.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],n=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const o=this.dragSegments_[s],r=o[0],A=r.feature;i.includes(A)||i.push(A);const a=r.geometry;n.includes(a)||n.push(a);const l=r.depth;let h;const c=r.segment,u=o[1];for(;e.length<a.getStride();)e.push(c[u][e.length]);switch(a.getType()){case"Point":h=e,c[0]=e,c[1]=e;break;case"MultiPoint":h=a.getCoordinates(),h[r.index]=e,c[0]=e,c[1]=e;break;case"LineString":h=a.getCoordinates(),h[r.index+u]=e,c[u]=e;break;case"MultiLineString":case"Polygon":h=a.getCoordinates(),h[l[0]][r.index+u]=e,c[u]=e;break;case"MultiPolygon":h=a.getCoordinates(),h[l[1]][l[0]][r.index+u]=e,c[u]=e;break;case"Circle":if(c[0]=e,c[1]=e,0===r.index)this.changingFeature_=!0,a.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,t.map.getView().getProjection();let i=ke(ai(a.getCenter()),ai(e));a.setRadius(i),this.changingFeature_=!1}}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e,i,n)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){t.map.getView().getProjection();const n=[],s=i.getGeometry().getCoordinates(),o=Ot([s]),r=this.rBush_.getInExtent(o),A={};r.sort(zA);for(let i=0,o=r.length;i<o;++i){const o=r[i],a=o.segment;let l=nt(o.geometry);const h=o.depth;if(h&&(l+="-"+h.join("-")),A[l]||(A[l]=new Array(2)),"Circle"!==o.geometry.getType()||1!==o.index)if(!Ue(a[0],s)||A[l][0])if(!Ue(a[1],s)||A[l][1])nt(a)in this.vertexSegments_&&!A[l][0]&&!A[l][1]&&this.insertVertexCondition_(t)&&n.push(o);else{if(A[l][0]&&0===A[l][0].index){let t=o.geometry.getCoordinates();switch(o.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[h[1]];case"Polygon":if(o.index!==t[h[0]].length-2)continue}}this.dragSegments_.push([o,1]),A[l][1]=o}else this.dragSegments_.push([o,0]),A[l][0]=o;else{Ue(YA(e,o),s)&&!A[l][0]&&(this.dragSegments_.push([o,0]),A[l][0]=o)}}n.length&&this.willModifyFeatures_(t,[n]);for(let t=n.length-1;t>=0;--t)this.insertVertex_(n[t],s)}return!!this.vertexFeature_}handleUpEvent(t){for(let t=this.dragSegments_.length-1;t>=0;--t){const e=this.dragSegments_[t][0],i=e.geometry;if("Circle"===i.getType()){const t=i.getCenter(),n=e.featureSegments[0],s=e.featureSegments[1];n.segment[0]=t,n.segment[1]=t,s.segment[0]=t,s.segment[1]=t,this.rBush_.update(jt(t),n);let o=i;this.rBush_.update(o.getExtent(),s)}else this.rBush_.update(Ot(e.segment),e)}return this.featuresBeingModified_&&(this.dispatchEvent(new WA(VA,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,e,i){const n=i||e.getCoordinateFromPixel(t);e.getView().getProjection();const s=function(t,e){return XA(n,t)-XA(n,e)};let o,r;if(this.hitDetection_){const i="object"==typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;e.forEachFeatureAtPixel(t,((t,e,i)=>{if("Point"===(i=i||t.getGeometry()).getType()&&this.features_.getArray().includes(t)){r=i;const e=i.getFlatCoordinates().slice(0,2);o=[{feature:t,geometry:i,segment:[e,e]}]}return!0}),{layerFilter:i})}if(!o){const t=li(Nt(hi(jt(n,HA)),e.getView().getResolution()*this.pixelTolerance_,HA));o=this.rBush_.getInExtent(t)}if(o&&o.length>0){const i=o.sort(s)[0],A=i.segment;let a=YA(n,i);const l=e.getPixelFromCoordinate(a);let h=ke(t,l);if(r||h<=this.pixelTolerance_){const t={};if(t[nt(A)]=!0,this.snapToPointer_||(this.delta_[0]=a[0]-n[0],this.delta_[1]=a[1]-n[1]),"Circle"===i.geometry.getType()&&1===i.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(a,[i.feature],[i.geometry]);else{const n=e.getPixelFromCoordinate(A[0]),s=e.getPixelFromCoordinate(A[1]),r=Te(l,n),c=Te(l,s);h=Math.sqrt(Math.min(r,c)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(a=r>c?A[1]:A[0]),this.createOrUpdateVertexFeature_(a,[i.feature],[i.geometry]);const u={};u[nt(i.geometry)]=!0;for(let e=1,i=o.length;e<i;++e){const i=o[e].segment;if(!(Ue(A[0],i[0])&&Ue(A[1],i[1])||Ue(A[0],i[1])&&Ue(A[1],i[0])))break;{const n=nt(o[e].geometry);n in u||(u[n]=!0,t[nt(i)]=!0)}}}return void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const i=t.segment,n=t.feature,s=t.geometry,o=t.depth,r=t.index;let A;for(;e.length<s.getStride();)e.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":A=s.getCoordinates(),A[o[0]].splice(r+1,0,e);break;case"MultiPolygon":A=s.getCoordinates(),A[o[1]][o[0]].splice(r+1,0,e);break;case"LineString":A=s.getCoordinates(),A.splice(r+1,0,e);break;default:return}this.setGeometryCoordinates_(s,A);const a=this.rBush_;a.remove(t),this.updateSegmentIndices_(s,r,o,1);const l={segment:[i[0],e],feature:n,geometry:s,depth:o,index:r};a.insert(Ot(l.segment),l),this.dragSegments_.push([l,1]);const h={segment:[e,i[1]],feature:n,geometry:s,depth:o,index:r+1};a.insert(Ot(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=h.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new WA(VA,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let i,n,s,o,r,A,a,l,h,c,u,d=!1;for(r=t.length-1;r>=0;--r)s=t[r],c=s[0],u=nt(c.feature),c.depth&&(u+="-"+c.depth.join("-")),u in e||(e[u]={}),0===s[1]?(e[u].right=c,e[u].index=c.index):1==s[1]&&(e[u].left=c,e[u].index=c.index+1);for(u in e){switch(h=e[u].right,a=e[u].left,A=e[u].index,l=A-1,c=void 0!==a?a:h,l<0&&(l=0),o=c.geometry,n=o.getCoordinates(),i=n,d=!1,o.getType()){case"MultiLineString":n[c.depth[0]].length>2&&(n[c.depth[0]].splice(A,1),d=!0);break;case"LineString":n.length>2&&(n.splice(A,1),d=!0);break;case"MultiPolygon":i=i[c.depth[1]];case"Polygon":i=i[c.depth[0]],i.length>4&&(A==i.length-1&&(A=0),i.splice(A,1),d=!0,0===A&&(i.pop(),i.push(i[0]),l=i.length-1))}if(d){this.setGeometryCoordinates_(o,n);const e=[];if(void 0!==a&&(this.rBush_.remove(a),e.push(a.segment[0])),void 0!==h&&(this.rBush_.remove(h),e.push(h.segment[1])),void 0!==a&&void 0!==h){const t={depth:c.depth,feature:c.feature,geometry:c.geometry,index:l,segment:e};this.rBush_.insert(Ot(t.segment),t)}this.updateSegmentIndices_(o,A,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return d}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),(function(s){s.geometry===t&&(void 0===i||void 0===s.depth||p(s.depth,i))&&s.index>e&&(s.index+=n)}))}};var JA=class extends ut{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:T;this.condition_=t.onFocusOnly?L(Q,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==l)return!0;const e=t.map,i=t.originalEvent;let n;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==l&&(n=i.deltaY,B&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=b),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=n;const r=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),r),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Be(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),ct(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}};var ZA=class extends fi{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=m),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const o=t.map,r=o.getView();if(r.getConstraints().rotation===Cn)return;const A=o.getViewport().getBoundingClientRect(),a=pi(this.targetPointers);a[0]-=A.left,a[1]-=A.top,this.anchor_=o.getCoordinateFromPixelInternal(a),this.rotating_&&(o.render(),r.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};var $A=class extends fi{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=m),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,o=i.clientY-n.clientY,r=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;const A=t.map,a=A.getView();1!=e&&(this.lastScaleDelta_=e);const l=A.getViewport().getBoundingClientRect(),h=pi(this.targetPointers);h[0]-=l.left,h[1]-=l.top,this.anchor_=A.getCoordinateFromPixelInternal(h),A.render(),a.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};const ta="select";class ea extends V{constructor(t,e,i,n){super(t),this.selected=e,this.deselected=i,this.mapBrowserEvent=n}}const ia={};class na extends ut{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:P,this.addCondition_=t.addCondition?t.addCondition:R,this.removeCondition_=t.removeCondition?t.removeCondition:R,this.toggleCondition_=t.toggleCondition?t.toggleCondition:N,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:f,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=Do();return g(t.Polygon,t.LineString),g(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new $r,t.layers)if("function"==typeof t.layers)e=t.layers;else{const i=t.layers;e=function(t){return i.includes(t)}}else e=f;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[nt(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[nt(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(qr,this.boundAddFeature_),this.features_.addEventListener(jr,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(qr,this.boundAddFeature_),this.features_.removeEventListener(jr,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof Yr&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=nt(t);e in ia||(ia[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){const n=e[i];if(n!==this&&n instanceof na&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(n.getStyle())}const i=nt(t);t.setStyle(ia[i]),delete ia[i]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[nt(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),s=!e&&!i&&!n,o=t.map,r=this.getFeatures(),A=[],a=[];if(s){X(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(t instanceof In&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),a.push(t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=r.getLength()-1;t>=0;--t){const e=r.item(t),i=a.indexOf(e);i>-1?a.splice(i,1):(r.remove(e),A.push(e))}0!==a.length&&r.extend(a)}else{o.forEachFeatureAtPixel(t.pixel,function(t,s){if(t instanceof In&&this.filter_(t,s))return!e&&!n||r.getArray().includes(t)?(i||n)&&r.getArray().includes(t)&&(A.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,s),a.push(t)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=A.length-1;t>=0;--t)r.remove(A[t]);r.extend(a)}return(a.length>0||A.length>0)&&this.dispatchEvent(new ea(ta,a,A,t)),!0}}var sa=na;const oa="translatestart",ra="translating",Aa="translateend";class aa extends V{constructor(t,e,i,n,s){super(t),this.features=e,this.coordinate=i,this.startCoordinate=n,this.mapBrowserEvent=s}}var la=class extends fi{constructor(t){let e;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)e=t.layers;else{const i=t.layers;e=function(t){return i.includes(t)}}else e=f;this.layerFilter_=e,this.filter_=t.filter&&!this.features_?t.filter:f,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:T,this.lastFeature_=null,this.addChangeListener(rt,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const e=this.features_||new $r([this.lastFeature_]);return this.dispatchEvent(new aa(oa,e,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const e=this.features_||new $r([this.lastFeature_]);return this.dispatchEvent(new aa(Aa,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const e=t.coordinate,i=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],s=this.features_||new $r([this.lastFeature_]);s.forEach((function(t){const e=t.getGeometry();e.translate(i,n),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new aa(ra,s,e,this.startCoordinate_,t))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||this.features_.getArray().includes(t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const i=this.getActive();if((!e||!i)&&(e=e||t,e)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}}};var ha=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};function ca(t,e){return mi(t.inversePixelTransform,e.slice(0))}function ua(t,e,i){const n=[];let s=t(0),o=t(1),r=e(s),A=e(o);const a=[o,s],l=[A,r],h=[1,0],c={};let u,d,g,p,f,m,y=1e5;for(;--y>0&&h.length>0;)g=h.pop(),s=a.pop(),r=l.pop(),m=g.toString(),m in c||(n.push(r[0],r[1]),c[m]=!0),p=h.pop(),o=a.pop(),A=l.pop(),f=(g+p)/2,u=t(f),d=e(u),we(d[0],d[1],r[0],r[1],A[0],A[1])<i?(n.push(A[0],A[1]),m=p.toString(),c[m]=!0):(h.push(p,f,f,g),l.push(A,d,d,r),a.push(o,u,u,s));return n}const da=new To({color:"rgba(0,0,0,0.2)"}),ga=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];var pa=class extends Yr{constructor(t){t=t||{};const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:da,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?Le.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?Le.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new No({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new qo({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Uo({color:"rgba(0,0,0,1)"}),stroke:new To({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=function(t){const e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(this),this.latLabelStyleBase_=new No({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new qo({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Uo({color:"rgba(0,0,0,1)"}),stroke:new To({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=function(t){const e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(this),this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(ss,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:ga,this.setSource(new dA({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new $r,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new No({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let i=t.slice();var n,s,o;return this.projection_&&this.getSource().getWrapX()&&_e(i,this.projection_),this.loadedExtent_&&(n=this.loadedExtent_,s=i,o=e,Math.abs(n[0]-s[0])<o&&Math.abs(n[2]-s[2])<o&&Math.abs(n[1]-s[1])<o&&Math.abs(n[3]-s[3])<o?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(t,e,i){this.loadedExtent_=t;const n=this.getSource(),s=ue(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(this.renderedExtent_&&Zt(this.renderedExtent_,s)&&this.renderedResolution_===e)return;if(this.renderedExtent_=s,this.renderedResolution_=e,me(s))return;const o=Ae(s),r=e*e/4;(!this.projection_||!ni(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(s,o,e,r);let A,a=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(a+=this.meridians_.length),this.parallelsLabels_&&(a+=this.parallels_.length);a>this.featurePool_.length;)A=new In,this.featurePool_.push(A);const l=n.getFeaturesCollection();l.clear();let h,c,u=0;for(h=0,c=this.meridians_.length;h<c;++h)A=this.featurePool_[u++],A.setGeometry(this.meridians_[h]),A.setStyle(this.lineStyle_),l.push(A);for(h=0,c=this.parallels_.length;h<c;++h)A=this.featurePool_[u++],A.setGeometry(this.parallels_[h]),A.setStyle(this.lineStyle_),l.push(A)}addMeridian_(t,e,i,n,s,o){const r=this.getMeridian_(t,e,i,n,o);if(fe(r.getExtent(),s)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=e:this.meridiansLabels_[o]={geom:new qi([]),text:e}}this.meridians_[o++]=r}return o}addParallel_(t,e,i,n,s,o){const r=this.getParallel_(t,e,i,n,o);if(fe(r.getExtent(),s)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=e:this.parallelsLabels_[o]={geom:new qi([]),text:e}}this.parallels_[o++]=r}return o}drawLabels_(t){const e=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,n=t.frameState.size,s=t.frameState.extent,o=Ae(s);let r=s;if(e){const t=n[0]*i,e=n[1]*i;r=[o[0]-t/2,o[1]-e/2,o[0]+t/2,o[1]+e/2]}let A=0,a=0,l=this.latLabelPosition_<.5;const h=this.projection_.getExtent(),c=pe(h);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Vt(h,s)){A=Math.floor((s[0]-h[0])/c),a=Math.ceil((s[2]-h[2])/c);l=l!==Math.abs(e)>Math.PI/2}const u=function(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],i=t.frameState,n=function(t,e){const i=t[0],n=t[1],s=t[2],o=t[3],r=t[4],A=t[5],a=e[0],l=e[1],h=e[2],c=e[3],u=e[4],d=e[5];return t[0]=i*a+s*l,t[1]=n*a+o*l,t[2]=i*h+s*c,t[3]=n*h+o*c,t[4]=i*u+s*d+r,t[5]=n*u+o*d+A,t}(t.inversePixelTransform.slice(),i.coordinateToPixelTransform),s=Kr(i.viewState.resolution,e);return new Or(t.context,e,i.extent,n,i.viewState.rotation,s,void 0)}(t);for(let t=A;t<=a;++t){let i,n,h,d,g=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(n=0,h=this.meridiansLabels_.length;n<h;++n){const A=this.meridians_[n];if(e||0!==t){const i=A.clone();i.translate(t*c,0),i.rotate(-e,o),d=this.getMeridianPoint_(i,r,n),d.rotate(e,o)}else d=this.getMeridianPoint_(A,s,n);i=this.featurePool_[g++],i.setGeometry(d),i.set("graticule_label",this.meridiansLabels_[n].text),u.drawFeature(i,this.lonLabelStyle_(i))}if(this.parallelsLabels_&&(t===A&&l||t===a&&!l))for(n=0,h=this.parallels_.length;n<h;++n){const A=this.parallels_[n];if(e||0!==t){const i=A.clone();i.translate(t*c,0),i.rotate(-e,o),d=this.getParallelPoint_(i,r,n),d.rotate(e,o)}else d=this.getParallelPoint_(A,s,n);i=this.featurePool_[g++],i.setGeometry(d),i.set("graticule_label",this.parallelsLabels_[n].text),u.drawFeature(i,this.latLabelStyle_(i))}}}createGraticule_(t,e,i,n){const s=this.getInterval_(i);if(-1==s)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));let o=!1;const r=this.projection_.getExtent(),A=pe(r);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Vt(r,t)&&(pe(t)>=A?(t[0]=r[0],t[2]=r[2]):o=!0);const a=[Be(e[0],this.minX_,this.maxX_),Be(e[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(a);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let h=Be(l[0],this.minLon_,this.maxLon_),c=Be(l[1],this.minLat_,this.maxLat_);const u=this.maxLines_;let d,g,p,f,m=t;o||(m=[Be(t[0],this.minX_,this.maxX_),Be(t[1],this.minY_,this.maxY_),Be(t[2],this.minX_,this.maxX_),Be(t[3],this.minY_,this.maxY_)]);const y=ye(m,this.toLonLatTransform_,void 0,8);let _=y[3],B=y[2],w=y[1],C=y[0];if(o||(Kt(m,this.bottomLeft_)&&(C=this.minLon_,w=this.minLat_),Kt(m,this.bottomRight_)&&(B=this.maxLon_,w=this.minLat_),Kt(m,this.topLeft_)&&(C=this.minLon_,_=this.maxLat_),Kt(m,this.topRight_)&&(B=this.maxLon_,_=this.maxLat_),_=Be(_,c,this.maxLat_),B=Be(B,h,this.maxLon_),w=Be(w,this.minLat_,c),C=Be(C,this.minLon_,h)),h=Math.floor(h/s)*s,f=Be(h,this.minLon_,this.maxLon_),g=this.addMeridian_(f,w,_,n,t,0),d=0,o)for(;(f-=s)>=C&&d++<u;)g=this.addMeridian_(f,w,_,n,t,g);else for(;f!=this.minLon_&&d++<u;)f=Math.max(f-s,this.minLon_),g=this.addMeridian_(f,w,_,n,t,g);if(f=Be(h,this.minLon_,this.maxLon_),d=0,o)for(;(f+=s)<=B&&d++<u;)g=this.addMeridian_(f,w,_,n,t,g);else for(;f!=this.maxLon_&&d++<u;)f=Math.min(f+s,this.maxLon_),g=this.addMeridian_(f,w,_,n,t,g);for(this.meridians_.length=g,this.meridiansLabels_&&(this.meridiansLabels_.length=g),c=Math.floor(c/s)*s,p=Be(c,this.minLat_,this.maxLat_),g=this.addParallel_(p,C,B,n,t,0),d=0;p!=this.minLat_&&d++<u;)p=Math.max(p-s,this.minLat_),g=this.addParallel_(p,C,B,n,t,g);for(p=Be(c,this.minLat_,this.maxLat_),d=0;p!=this.maxLat_&&d++<u;)p=Math.min(p+s,this.maxLat_),g=this.addParallel_(p,C,B,n,t,g);this.parallels_.length=g,this.parallelsLabels_&&(this.parallelsLabels_.length=g)}getInterval_(t){const e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1];let n=-1;const s=Math.pow(this.targetSize_*t,2),o=[],r=[];for(let t=0,A=this.intervals_.length;t<A;++t){const A=Be(this.intervals_[t]/2,0,90),a=Be(i,-90+A,90-A);o[0]=e-A,o[1]=a-A,r[0]=e+A,r[1]=a+A,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(r,r);if(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)<=s)break;n=this.intervals_[t]}return n}getMeridian_(t,e,i,n,s){const o=function(t,e,i,n,s){return ua((function(n){return[t,e+(i-e)*n]}),oi(je("EPSG:4326"),n),s)}(t,e,i,this.projection_,n);let r=this.meridians_[s];return r?(r.setFlatCoordinates("XY",o),r.changed()):(r=new Pn(o,"XY"),this.meridians_[s]=r),r}getMeridianPoint_(t,e,i){const n=t.getFlatCoordinates();let s=1,o=n.length-1;n[s]>n[o]&&(s=o,o=1);const r=Math.max(e[1],n[s]),A=Math.min(e[3],n[o]),a=Be(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,r,A),l=[n[s-1]+(n[o-1]-n[s-1])*(a-n[s])/(n[o]-n[s]),a],h=this.meridiansLabels_[i].geom;return h.setCoordinates(l),h}getMeridians(){return this.meridians_}getParallel_(t,e,i,n,s){const o=function(t,e,i,n,s){return ua((function(n){return[e+(i-e)*n,t]}),oi(je("EPSG:4326"),n),s)}(t,e,i,this.projection_,n);let r=this.parallels_[s];return r?(r.setFlatCoordinates("XY",o),r.changed()):r=new Pn(o,"XY"),r}getParallelPoint_(t,e,i){const n=t.getFlatCoordinates();let s=0,o=n.length-2;n[s]>n[o]&&(s=o,o=0);const r=Math.max(e[0],n[s]),A=Math.min(e[2],n[o]),a=Be(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,r,A),l=[a,n[s+1]+(n[o+1]-n[s+1])*(a-n[s])/(n[o]-n[s])],h=this.parallelsLabels_[i].geom;return h.setCoordinates(l),h}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=je("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];const n=oi(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const t=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,i,s){const o=n(e,i,s=s||2);for(let e=0,i=o.length;e<i;e+=s)o[e]<t&&(o[e]+=360);return o}}this.fromLonLatTransform_=oi(e,t);const s=ye([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Ae(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}};class fa extends V{constructor(t,e){super(t),this.layer=e}}const ma="layers";class ya extends is{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ma,this.handleLayersChanged_),i?Array.isArray(i)?i=new $r(i.slice(),{unique:!0}):M("function"==typeof i.getArray,43):i=new $r(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Z),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(j(t,qr,this.handleLayersAdd_,this),j(t,jr,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(Z);X(this.listenerKeys_);const e=t.getArray();for(let t=0,i=e.length;t<i;t++){const i=e[t];this.registerLayerListeners_(i),this.dispatchEvent(new fa("addlayer",i))}this.changed()}registerLayerListeners_(e){const i=[j(e,W,this.handleLayerChange_,this),j(e,t,this.handleLayerChange_,this)];e instanceof ya&&i.push(j(e,"addlayer",this.handleLayerGroupAdd_,this),j(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[nt(e)]=i}handleLayerGroupAdd_(t){this.dispatchEvent(new fa("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new fa("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new fa("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=nt(e);this.listenerKeys_[i].forEach(Z),delete this.listenerKeys_[i],this.dispatchEvent(new fa("removelayer",e)),this.changed()}getLayers(){return this.get(ma)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new fa("removelayer",t[e]))}this.set(ma,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const n=this.getLayerState();let s=n.zIndex;t||void 0!==n.zIndex||(s=0);for(let t=i,o=e.length;t<o;t++){const i=e[t];i.opacity*=n.opacity,i.visible=i.visible&&n.visible,i.maxResolution=Math.min(i.maxResolution,n.maxResolution),i.minResolution=Math.max(i.minResolution,n.minResolution),i.minZoom=Math.max(i.minZoom,n.minZoom),i.maxZoom=Math.min(i.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==i.extent?i.extent=ue(i.extent,n.extent):i.extent=n.extent),void 0===i.zIndex&&(i.zIndex=s)}return e}getSourceState(){return"ready"}}var _a=ya;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;class Ba{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?je(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=je(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return et()}readFeature(t,e){return et()}readFeatures(t,e){return et()}readGeometry(t,e){return et()}readProjection(t){return et()}writeFeature(t,e){return et()}writeFeatures(t,e){return et()}writeGeometry(t,e){return et()}}function wa(t,e,i){const n=i?je(i.featureProjection):null,s=i?je(i.dataProjection):null;let o;if(o=n&&s&&!ni(n,s)?(e?t.clone():t).transform(e?n:s,e?s:n):t,e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*e)/e;return t};o===t&&(o=t.clone()),o.applyTransform(n)}return o}var Ca=0,ba=1,va=2,xa=3,Ea=4;var Fa=class extends q{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(t)}release(){this.state===xa&&this.setState(Ea)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==va)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==va){t.interimTile=null;break}t.getState()==ba?e=t:t.getState()==Ca?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==xa&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){et()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:At(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}};var Sa=class extends Fa{constructor(t,e,i,n,s,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=va,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=xa,this.unlistenImage_(),this.image_=function(){const t=Xs(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=va:this.state=Ea,this.unlistenImage_(),this.changed()}load(){this.state==xa&&(this.state=Ca,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ca&&(this.state=ba,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ko(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};var Ia=class{constructor(t,e,i,n,s,o){this.sourceProj_=t,this.targetProj_=e;let r={};const A=oi(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return r[e]||(r[e]=A(t)),r[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&pe(n)==pe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pe(this.targetProj_.getExtent()):null;const a=de(i),l=ge(i),h=re(i),c=oe(i),u=this.transformInv_(a),d=this.transformInv_(l),g=this.transformInv_(h),p=this.transformInv_(c),f=10+(o?Math.max(0,Math.ceil(Math.log2(se(i)/(o*o*256*256)))):0);if(this.addQuad_(a,l,h,c,u,d,g,p,f),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}.bind(this))}r={}}addTriangle_(t,e,i,n,s,o){this.triangles_.push({source:[n,s,o],target:[t,e,i]})}addQuad_(t,e,i,n,s,o,r,A,a){const l=Ot([s,o,r,A]),h=this.sourceWorldWidth_?pe(l)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,u=this.sourceProj_.canWrapX()&&h>.5&&h<1;let d=!1;if(a>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){d=pe(Ot([t,e,i,n]))/this.targetWorldWidth_>.25||d}!u&&this.sourceProj_.isGlobal()&&h&&(d=h>.25||d)}if(!d&&this.maxSourceExtent_&&isFinite(l[0])&&isFinite(l[1])&&isFinite(l[2])&&isFinite(l[3])&&!fe(l,this.maxSourceExtent_))return;let g=0;if(!(d||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(A[0])&&isFinite(A[1])))if(a>0)d=!0;else if(g=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(r[0])&&isFinite(r[1])?0:2)+(isFinite(A[0])&&isFinite(A[1])?0:1),1!=g&&2!=g&&4!=g&&8!=g)return;if(a>0){if(!d){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let o;if(u){o=(ve(s[0],c)+ve(r[0],c))/2-ve(n[0],c)}else o=(s[0]+r[0])/2-n[0];const A=(s[1]+r[1])/2-n[1];d=o*o+A*A>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const l=[(e[0]+i[0])/2,(e[1]+i[1])/2],h=this.transformInv_(l),c=[(n[0]+t[0])/2,(n[1]+t[1])/2],u=this.transformInv_(c);this.addQuad_(t,e,l,c,s,o,h,u,a-1),this.addQuad_(c,l,i,n,u,h,r,A,a-1)}else{const l=[(t[0]+e[0])/2,(t[1]+e[1])/2],h=this.transformInv_(l),c=[(i[0]+n[0])/2,(i[1]+n[1])/2],u=this.transformInv_(c);this.addQuad_(t,l,c,n,s,h,u,A,a-1),this.addQuad_(l,e,i,c,h,o,r,u,a-1)}return}}if(u){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&g)&&this.addTriangle_(t,i,n,s,r,A),0==(14&g)&&this.addTriangle_(t,i,e,s,r,o),g&&(0==(13&g)&&this.addTriangle_(e,n,t,o,A,s),0==(7&g)&&this.addTriangle_(e,n,i,o,A,r))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){const s=e.source;te(t,s[0]),te(t,s[1]),te(t,s[2])})),t}getTriangles(){return this.triangles_}};let Ma;const La=[];function Ua(t,e,i,n,s){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,s)),t.restore()}function Qa(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Ta(t,e,i,n){const s=ri(i,e,t);let o=Je(e,n,i);const r=e.getMetersPerUnit();void 0!==r&&(o*=r);const A=t.getMetersPerUnit();void 0!==A&&(o/=A);const a=t.getExtent();if(!a||Kt(a,s)){const e=Je(t,o,s)/o;isFinite(e)&&e>0&&(o/=e)}return o}function ka(t,e,i,n,s,o,r,A,a,l,h,c){const u=Xs(Math.round(i*t),Math.round(i*e),La);if(c||(u.imageSmoothingEnabled=!1),0===a.length)return u.canvas;function d(t){return Math.round(t*i)/i}u.scale(i,i),u.globalCompositeOperation="lighter";const g=[1/0,1/0,-1/0,-1/0];a.forEach((function(t,e,i){$t(g,t.extent)}));const p=pe(g),f=ce(g),m=Xs(Math.round(i*p/n),Math.round(i*f/n));c||(m.imageSmoothingEnabled=!1);const y=i/n;a.forEach((function(t,e,i){const n=t.extent[0]-g[0],s=-(t.extent[3]-g[3]),o=pe(t.extent),r=ce(t.extent);t.image.width>0&&t.image.height>0&&m.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*y,s*y,o*y,r*y)}));const _=de(r);return A.getTriangles().forEach((function(t,e,s){const r=t.source,A=t.target;let a=r[0][0],l=r[0][1],h=r[1][0],p=r[1][1],f=r[2][0],y=r[2][1];const B=d((A[0][0]-_[0])/o),w=d(-(A[0][1]-_[1])/o),C=d((A[1][0]-_[0])/o),b=d(-(A[1][1]-_[1])/o),v=d((A[2][0]-_[0])/o),x=d(-(A[2][1]-_[1])/o),E=a,F=l;a=0,l=0,h-=E,p-=F,f-=E,y-=F;const S=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(t[i][i]);for(let o=i+1;o<e;o++){const e=Math.abs(t[o][i]);e>s&&(s=e,n=o)}if(0===s)return null;const o=t[n];t[n]=t[i],t[i]=o;for(let n=i+1;n<e;n++){const s=-t[n][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[n][o]=0:t[n][o]+=s*t[i][o]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let s=n-1;s>=0;s--)t[s][e]-=t[s][n]*i[n]}return i}([[h,p,0,0,C-B],[f,y,0,0,v-B],[0,0,h,p,b-w],[0,0,f,y,x-w]]);if(S){if(u.save(),u.beginPath(),function(){if(void 0===Ma){const t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Ua(t,4,5,4,0),Ua(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Ma=Qa(e,0)||Qa(e,4)||Qa(e,8)}return Ma}()||!c){u.moveTo(C,b);const t=4,e=B-C,i=w-b;for(let n=0;n<t;n++)u.lineTo(C+d((n+1)*e/t),b+d(n*i/(t-1))),n!=t-1&&u.lineTo(C+d((n+1)*e/t),b+d((n+1)*i/(t-1)));u.lineTo(v,x)}else u.moveTo(C,b),u.lineTo(B,w),u.lineTo(v,x);u.clip(),u.transform(S[0],S[2],S[1],S[3],B,w),u.translate(g[0]-E,g[3]-F),u.scale(n/i,-n/i),u.drawImage(m.canvas,0,0),u.restore()}})),h&&(u.save(),u.globalCompositeOperation="source-over",u.strokeStyle="black",u.lineWidth=1,A.getTriangles().forEach((function(t,e,i){const n=t.target,s=(n[0][0]-_[0])/o,r=-(n[0][1]-_[1])/o,A=(n[1][0]-_[0])/o,a=-(n[1][1]-_[1])/o,l=(n[2][0]-_[0])/o,h=-(n[2][1]-_[1])/o;u.beginPath(),u.moveTo(A,a),u.lineTo(s,r),u.lineTo(l,h),u.closePath(),u.stroke()})),u.restore()),u.canvas}var Ra=class extends Fa{constructor(t,e,i,n,s,o,r,A,a,l,h,c){super(s,Ca,{interpolate:!!c}),this.renderEdges_=void 0!==h&&h,this.pixelRatio_=r,this.gutter_=A,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const u=n.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const p=d?ue(u,d):u;if(0===se(p))return void(this.state=Ea);const f=t.getExtent();f&&(g=g?ue(g,f):f);const m=n.getResolution(this.wrappedTileCoord_[0]),y=function(t,e,i,n){const s=Ae(i);let o=Ta(t,e,s,n);return(!isFinite(o)||o<=0)&&ne(i,(function(i){return o=Ta(t,e,i,n),isFinite(o)&&o>0})),o}(t,i,p,m);if(!isFinite(y)||y<=0)return void(this.state=Ea);const _=void 0!==l?l:.5;if(this.triangulation_=new Ia(t,i,p,g,y*_,m),0===this.triangulation_.getTriangles().length)return void(this.state=Ea);this.sourceZ_=e.getZForResolution(y);let B=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(B[1]=Be(B[1],g[1],g[3]),B[3]=Be(B[3],g[1],g[3])):B=ue(B,g)),se(B)){const t=e.getTileRangeForExtentAndZ(B,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=a(this.sourceZ_,e,i,r);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=Ea)}else this.state=Ea}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==va&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=xa;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),r=this.sourceTileGrid_.getResolution(this.sourceZ_),A=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ka(n,s,this.pixelRatio_,r,this.sourceTileGrid_.getExtent(),o,A,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=va}this.changed()}load(){if(this.state==Ca){this.state=ba,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(i,n,s){const o=i.getState();if(o==Ca||o==ba){e++;const n=j(i,t,(function(t){const s=i.getState();s!=va&&s!=xa&&s!=Ea||(Z(n),e--,0===e&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}}.bind(this)),0===e?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){t.getState()==Ca&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Z),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ys(this.canvas_.getContext("2d")),La.push(this.canvas_),this.canvas_=null),super.release()}};class Pa{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Da(t,e,i,n,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=i,s.maxY=n,s):new Pa(t,e,i,n)}var Oa=Pa;var Na=class extends Cr{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Oa(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==va||i==Ea||i==xa&&!n}getTile(t,e,i,n){const s=n.pixelRatio,o=n.viewState.projection,r=this.getLayer();let A=r.getSource().getTile(t,e,i,s,o);return A.getState()==xa&&r.getUseInterimTilesOnError()&&r.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(A)||(A=A.getInterimTile()),A}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=mi(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Kt(s,n))return null;const o=e.pixelRatio,r=e.viewState.projection,A=e.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(A.projection),h=a.getTilePixelRatio(e.pixelRatio);for(let t=l.getZForResolution(A.resolution);t>=l.getMinZoom();--t){const e=l.getTileCoordForCoordAndZ(n,t),i=a.getTile(t,e[1],e[2],o,r);if(!(i instanceof Sa||i instanceof Ra)||i instanceof Ra&&i.getState()===Ea)return null;if(i.getState()!==va)continue;const s=l.getOrigin(t),c=Rs(l.getTileSize(t)),u=l.getResolution(t),d=Math.floor(h*((n[0]-s[0])/u-e[1]*c[0])),g=Math.floor(h*((s[1]-n[1])/u-e[2]*c[1])),p=Math.round(h*a.getGutterForProjection(A.projection));return this.getImageData(i.getImage(),d+p,g+p)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,s=n.projection,o=n.resolution,r=n.center,A=n.rotation,a=t.pixelRatio,l=this.getLayer(),h=l.getSource(),u=h.getRevision(),d=h.getTileGridForProjection(s),g=d.getZForResolution(o,h.zDirection),p=d.getResolution(g);let f=t.extent;const m=t.viewState.resolution,y=h.getTilePixelRatio(a),_=Math.round(pe(f)/m*a),B=Math.round(ce(f)/m*a),w=i.extent&&hi(i.extent);w&&(f=ue(f,hi(i.extent)));const C=p*_/2/y,b=p*B/2/y,v=[r[0]-C,r[1]-b,r[0]+C,r[1]+b],x=d.getTileRangeForExtentAndZ(f,g),E={};E[g]={};const F=this.createLoadedTileFinder(h,s,E),S=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;const M=A?he(n.center,m,A,t.size):void 0;for(let e=x.minX;e<=x.maxX;++e)for(let n=x.minY;n<=x.maxY;++n){if(A&&!d.tileCoordIntersectsViewport([g,e,n],M))continue;const s=this.getTile(g,e,n,t);if(this.isDrawableTile(s)){const e=nt(this);if(s.getState()==va){E[g][s.tileCoord.toString()]=s;let t=s.inTransition(e);t&&1!==i.opacity&&(s.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(s)||(this.newTiles_=!0)}if(1===s.getAlpha(e,t.time))continue}const o=d.getTileCoordChildTileRange(s.tileCoord,I,S);let r=!1;o&&(r=F(g+1,o)),r||d.forEachTileCoordParentTileRange(s.tileCoord,F,I,S)}const L=p/o*a/y;yi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/a,1/a,A,-_/2,-B/2);const U=wi(this.pixelTransform);this.useContainer(e,U,this.getBackground(t));const Q=this.context,T=Q.canvas;_i(this.inversePixelTransform,this.pixelTransform),yi(this.tempTransform,_/2,B/2,L,L,0,-_/2,-B/2),T.width!=_||T.height!=B?(T.width=_,T.height=B):this.containerReused||Q.clearRect(0,0,_,B),w&&this.clipUnrotated(Q,t,w),h.getInterpolate()||(Q.imageSmoothingEnabled=!1),this.preRender(Q,t),this.renderedTiles.length=0;let k,R,P,D=Object.keys(E).map(Number);D.sort(c),1!==i.opacity||this.containerReused&&!h.getOpaque(t.viewState.projection)?(k=[],R=[]):D=D.reverse();for(let e=D.length-1;e>=0;--e){const i=D[e],n=h.getTilePixelSize(i,a,s),o=d.getResolution(i)/p,r=n[0]*o*L,A=n[1]*o*L,l=d.getTileCoordForCoordAndZ(de(v),i),c=d.getTileCoordExtent(l),u=mi(this.tempTransform,[y*(c[0]-v[0])/p,y*(v[3]-c[3])/p]),f=y*h.getGutterForProjection(s),m=E[i];for(const e in m){const n=m[e],s=n.tileCoord,o=l[1]-s[1],a=Math.round(u[0]-(o-1)*r),c=l[2]-s[2],d=Math.round(u[1]-(c-1)*A),p=Math.round(u[0]-o*r),y=Math.round(u[1]-c*A),_=a-p,B=d-y,w=g===i,C=w&&1!==n.getAlpha(nt(this),t.time);let b=!1;if(!C)if(k){P=[p,y,p+_,y,p+_,y+B,p,y+B];for(let t=0,e=k.length;t<e;++t)if(g!==i&&i<R[t]){const e=k[t];fe([p,y,p+_,y+B],[e[0],e[3],e[4],e[7]])&&(b||(Q.save(),b=!0),Q.beginPath(),Q.moveTo(P[0],P[1]),Q.lineTo(P[2],P[3]),Q.lineTo(P[4],P[5]),Q.lineTo(P[6],P[7]),Q.moveTo(e[6],e[7]),Q.lineTo(e[4],e[5]),Q.lineTo(e[2],e[3]),Q.lineTo(e[0],e[1]),Q.clip())}k.push(P),R.push(i)}else Q.clearRect(p,y,_,B);this.drawTileImage(n,t,p,y,_,B,f,w),k&&!C?(b&&Q.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,h,n)}}return this.renderedRevision=u,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Zt(this.renderedExtent_,v),this.renderedExtent_=v,this.renderedPixelRatio=a,this.renderedProjection=s,this.manageTilePyramid(t,h,d,a,s,f,g,l.getPreload()),this.scheduleExpireCache(t,h),this.postRender(Q,t),i.extent&&Q.restore(),Q.imageSmoothingEnabled=!0,U!==T.style.transform&&(T.style.transform=U),this.container}drawTileImage(t,e,i,n,s,o,r,A){const a=this.getTileImage(t);if(!a)return;const l=nt(this),h=e.layerStatesArray[e.layerIndex],c=h.opacity*(A?t.getAlpha(l,e.time):1),u=c!==this.context.globalAlpha;u&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(a,r,r,a.width-2*r,a.height-2*r,i,n,s,o),u&&this.context.restore(),c!==h.opacity?e.animate=!0:A&&t.endTransition(l)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const n=nt(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=nt(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,s,o,r,A,a){const l=nt(e);l in t.wantedTiles||(t.wantedTiles[l]={});const h=t.wantedTiles[l],c=t.tileQueue,u=i.getMinZoom(),d=t.viewState.rotation,g=d?he(t.viewState.center,t.viewState.resolution,d,t.size):void 0;let p,f,m,y,_,B,w=0;for(B=u;B<=r;++B)for(f=i.getTileRangeForExtentAndZ(o,B,f),m=i.getResolution(B),y=f.minX;y<=f.maxX;++y)for(_=f.minY;_<=f.maxY;++_)d&&!i.tileCoordIntersectsViewport([B,y,_],g)||(r-B<=A?(++w,p=e.getTile(B,y,_,n,s),p.getState()==Ca&&(h[p.getKey()]=!0,c.isKeyQueued(p.getKey())||c.enqueue([p,l,i.getTileCoordCenter(p.tileCoord),m])),void 0!==a&&a(p)):e.useTile(B,y,_,s));e.updateCacheSize(w,s)}},Ha="preload",Ga="useInterimTilesOnError";var Ka=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return M(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return M(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){M(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}};function Va(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function Wa(t,e,i){return t+"/"+e+"/"+i}function za(t){return Wa(t[0],t[1],t[2])}function Xa(t){return(t[1]<<t[0])+t[2]}var Ya=class extends Ka{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=function(t){return t.split("/").map(Number)}(this.peekFirstKey()),e=t[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(za(t.tileCoord)),t.release())}.bind(this))}};const qa=256,ja=[0,0,0];var Ja=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,M(function(t,e,i){const n=e||c;return t.every((function(e,s){if(0===s)return!0;const o=n(t[s-1],e);return!(o>0||i&&0===o)}))}(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,M(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=de(i)),M(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,M(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,M(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const n=new Oa(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let t=n.minX,s=n.maxX;t<=s;++t)for(let s=n.minY,o=n.maxY;s<=o;++s)i([e,t,s])}forEachTileCoordParentTileRange(t,e,i,n){let s,o,r,A=null,a=t[0]-1;for(2===this.zoomFactor_?(o=t[1],r=t[2]):A=this.getTileCoordExtent(t,n);a>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),r=Math.floor(r/2),s=Da(o,o,r,r,i)):s=this.getTileRangeForExtentAndZ(A,a,i),e(a,s))return!0;--a}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return Da(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],s=t[1],o=t[2];if(e===n)return Da(s,o,s,o,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),r=Math.floor(s*t),A=Math.floor(o*t);if(e<n)return Da(r,r,A,A,i);return Da(r,Math.floor(t*(s+1))-1,A,Math.floor(t*(o+1))-1,i)}const r=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e,i)}getTileRangeExtent(t,e,i){const n=this.getOrigin(t),s=this.getResolution(t),o=Rs(this.getTileSize(t),this.tmpSize_),r=n[0]+e.minX*o[0]*s,A=n[0]+(e.maxX+1)*o[0]*s;return Yt(r,n[1]+e.minY*o[1]*s,A,n[1]+(e.maxY+1)*o[1]*s,i)}getTileRangeForExtentAndZ(t,e,i){const n=ja;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);const s=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),Da(s,n[1],o,n[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Rs(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=Rs(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*n,r=i[1]-(t[2]+1)*s[1]*n;return Yt(o,r,o+s[0]*n,r+s[1]*n,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,s){const o=this.getZForResolution(i),r=i/this.getResolution(o),A=this.getOrigin(o),a=Rs(this.getTileSize(o),this.tmpSize_);let l=r*(t-A[0])/i/a[0],h=r*(A[1]-e)/i/a[1];return n?(l=Se(l,5)-1,h=Se(h,5)-1):(l=Fe(l,5),h=Fe(h,5)),Va(o,l,h,s)}getTileCoordForXYAndZ_(t,e,i,n,s){const o=this.getOrigin(i),r=this.getResolution(i),A=Rs(this.getTileSize(i),this.tmpSize_);let a=(t-o[0])/r/A[0],l=(o[1]-e)/r/A[1];return n?(a=Se(a,5)-1,l=Se(l,5)-1):(a=Fe(a,5),l=Fe(l,5)),Va(i,a,l,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return Be(u(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return nn(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}},Za="tileloadstart",$a="tileloadend",tl="tileloaderror";function el(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){n=void 0!==n?n:"top-left";const s=il(t,e,i);return new Ja({extent:t,origin:ae(t,n),resolutions:s,tileSize:i})}(nl(t),e,i,n)}(t),t.setDefaultTileGrid(e)),e}function il(t,e,i,n){e=void 0!==e?e:42,i=Rs(void 0!==i?i:256);const s=ce(t),o=pe(t);n=n>0?n:Math.max(o/i[0],s/i[1]);const r=e+1,A=new Array(r);for(let t=0;t<r;++t)A[t]=n/Math.pow(2,t);return A}function nl(t){let e=(t=je(t)).getExtent();if(!e){const i=180*gt.degrees/t.getMetersPerUnit();e=Yt(-i,-i,i,i)}return e}class sl extends V{constructor(t,e){super(t),this.tile=e}}var rl=class extends iA{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Rs(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new Ya(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o,r,A,a=!0;for(let t=i.minX;t<=i.maxX;++t)for(let l=i.minY;l<=i.maxY;++l)r=Wa(e,t,l),A=!1,s.containsKey(r)&&(o=s.get(r),A=o.getState()===va,A&&(A=!1!==n(o))),A||(a=!1);return a}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,n,s){return et()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:el(t)}getTileCacheForProjection(t){const e=this.getProjection();return M(null===e||ni(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=Rs(n.getTileSize(t),this.tmpSize);return 1==s?o:ks(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,i){const n=e[0],s=t.getTileCoordCenter(e),o=nl(i);if(Kt(o,s))return e;{const e=pe(o),i=Math.ceil((o[0]-s[0])/e);return s[0]+=e*i,t.getTileCoordForCoordAndZ(s,n)}}(i,t,e)),function(t,e){const i=t[0],n=t[1],s=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const o=e.getFullTileRange(i);return!o||o.containsXY(n,s)}(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}};function Al(t,e){const i=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(r,A,a){return r?t.replace(i,r[0].toString()).replace(n,r[1].toString()).replace(s,r[2].toString()).replace(o,(function(){const t=r[0],i=e.getFullTileRange(t);M(i,55);return(i.getHeight()-r[2]-1).toString()})):void 0}}function al(t,e){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Al(t[s],e);return function(t){if(1===t.length)return t[0];return function(e,i,n){if(e){const s=ve(Xa(e),t.length);return t[s](e,i,n)}}}(n)}class ll extends rl{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ll.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=nt(e),n=e.getState();let s;n==ba?(this.tileLoadingKeys_[i]=!0,s=Za):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==xa?tl:n==va?$a:void 0),null!=s&&this.dispatchEvent(new sl(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let o;for(o=n;o<=s;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(al(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=Wa(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}var hl=ll;function cl(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}var ul=class extends Ba{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(cl(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(cl(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return et()}readFeaturesFromObject(t,e){return et()}readGeometry(t,e){return this.readGeometryFromObject(cl(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return et()}readProjection(t){return this.readProjectionFromObject(cl(t))}readProjectionFromObject(t){return et()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return et()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return et()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return et()}};function dl(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(t){return new qi(t.coordinates)}(t);break;case"LineString":i=function(t){return new Pn(t.coordinates)}(t);break;case"Polygon":i=function(t){return new cn(t.coordinates)}(t);break;case"MultiPoint":i=function(t){return new Kn(t.coordinates)}(t);break;case"MultiLineString":i=function(t){return new Hn(t.coordinates)}(t);break;case"MultiPolygon":i=function(t){return new Wn(t.coordinates)}(t);break;case"GeometryCollection":i=function(t,e){const i=t.geometries.map((function(t){return dl(t,e)}));return new Un(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return wa(i,!1,e)}function gl(t,e){const i=(t=wa(t,!0,e)).getType();let n;switch(i){case"Point":n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":n=function(t,e){let i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"MultiPoint":n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":n=function(t,e){let i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"GeometryCollection":n=function(t,e){delete(e=Object.assign({},e)).featureProjection;return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){return gl(t,e)}))}}(t,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}var pl=class extends ul{constructor(t){t=t||{},super(),this.dataProjection=je(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=je(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const n=dl(i.geometry,e),s=new In;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(n),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){let i=null;if("FeatureCollection"===t.type){i=[];const n=t.features;for(let t=0,s=n.length;t<s;++t)i.push(this.readFeatureFromObject(n[t],e))}else i=[this.readFeatureFromObject(t,e)];return i}readGeometryFromObject(t,e){return dl(t,e)}readProjectionFromObject(t){const e=t.crs;let i;return e?"name"==e.type?i=je(e.properties.name):"EPSG"===e.type?i=je("EPSG:"+e.properties.code):M(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(i.id=n),!t.hasProperties())return i;const s=t.getProperties(),o=t.getGeometry();return o&&(i.geometry=gl(o,e),delete s[t.getGeometryName()]),Y(s)||(i.properties=s),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,s=t.length;n<s;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return gl(t,this.adaptOptions(e))}};function fl(t,e){Go.expire()}var ml=class extends z{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){et()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;yi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),_i(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,o,r,A){let a;const l=e.viewState;function h(t,e,i,n){return s.call(o,e,t?i:null,n)}const c=l.projection,u=Pe(t.slice(),c),d=[[0,0]];if(c.canWrapX()&&n){const t=pe(c.getExtent());d.push([-t,0],[t,0])}const g=e.layerStatesArray,p=g.length,f=[],m=[];for(let n=0;n<d.length;n++)for(let s=p-1;s>=0;--s){const o=g[s],c=o.layer;if(c.hasRenderer()&&as(o,l)&&r.call(A,c)){const s=c.getRenderer(),r=c.getSource();if(s&&r){const A=r.getWrapX()?u:t,l=h.bind(null,o.managed);m[0]=A[0]+d[n][0],m[1]=A[1]+d[n][1],a=s.forEachFeatureAtCoordinate(m,e,i,l,f)}if(a)return a}}if(0===f.length)return;const y=1/f.length;return f.forEach(((t,e)=>t.distanceSq+=e*y)),f.sort(((t,e)=>t.distanceSq-e.distanceSq)),f.some((t=>a=t.callback(t.feature,t.layer,t.geometry))),a}hasFeatureAtCoordinate(t,e,i,n,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,f,this,s,o)}getMap(){return this.map_}renderFrame(t){et()}scheduleExpireIconCache(t){Go.canExpireCache()&&t.postRenderFunctions.push(fl)}};var yl=class extends ml{constructor(t){super(t),this.fontChangeListenerKey_=j(mo,W,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className="ol-unselectable ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new _r(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){Z(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(os,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;const n=[];let s=null;for(let o=0,r=e.length;o<r;++o){const r=e[o];t.layerIndex=o;const A=r.layer,a=A.getSourceState();if(!as(r,i)||"ready"!=a&&"undefined"!=a){A.unrender();continue}const l=A.render(t,s);l&&(l!==s&&(this.children_.push(l),s=l),"getDeclutter"in A&&n.push(A))}for(let e=n.length-1;e>=0;--e)n[e].renderDeclutter(t);!function(t,e){const i=t.childNodes;for(let n=0;;++n){const s=i[n],o=e[n];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(rs,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}},_l="pointermove",Bl="pointerdown";var wl=class extends q{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=j(i,Bl,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=j(i,_l,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(a,this.boundHandleTouchMove_,!!E&&{passive:!1})}emulateClick_(t){let e=new On(h.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new On(h.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const e=new On(h.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==h.POINTERUP||e.type==h.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=h.POINTERDOWN&&e.type!=h.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new On(h.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(Z),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new On(h.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const e in t){const i=t[e];this.down_[e]="function"==typeof i?y:i}if(0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(j(t,h.POINTERMOVE,this.handlePointerMove_,this),j(t,h.POINTERUP,this.handlePointerUp_,this),j(this.element_,h.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(j(this.element_.getRootNode(),h.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new On(h.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new On(h.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Z(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(a,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Z(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Z),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Cl="layergroup",bl="size",vl="target",xl="view";const El=1/0;var Fl=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,X(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){M(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=El&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,s=e[t],o=i[t],r=t;for(;t<n>>1;){const s=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),r=o<n&&i[o]<i[s]?o:s;e[t]=e[r],i[t]=i[r],t=r}e[t]=s,i[t]=o,this.siftDown_(r,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,s=i[e],o=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>o))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=s,n[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const s=e.length;let o,r,A;for(r=0;r<s;++r)o=e[r],A=t(o),A==El?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=A,e[n++]=o);e.length=n,i.length=n,this.heapify_()}};var Sl=class extends Fl{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const i=super.enqueue(e);if(i){e[0].addEventListener(t,this.boundHandleTileChange_)}return i}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const i=e.target,n=i.getState();if(n===va||n===xa||n===Ea){n!==xa&&i.removeEventListener(t,this.boundHandleTileChange_);const e=i.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,s,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=this.dequeue()[0],s=n.getKey(),i=n.getState(),i!==Ca||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++o,n.load())}};var Il={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Ml(t,e,i){return function(n,s,o,r,A){if(!n)return;if(!s&&!e)return n;const a=e?0:o[0]*s,l=e?0:o[1]*s,h=A?A[0]:0,c=A?A[1]:0;let u=t[0]+a/2+h,d=t[2]-a/2+h,g=t[1]+l/2+c,p=t[3]-l/2+c;u>d&&(u=(d+u)/2,d=u),g>p&&(g=(p+g)/2,p=g);let f=Be(n[0],u,d),m=Be(n[1],g,p);if(r&&i&&s){const t=30*s;f+=-t*Math.log(1+Math.max(0,u-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-d)/t),m+=-t*Math.log(1+Math.max(0,g-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-p)/t)}return[f,m]}}function Ll(t){return t}function Ul(t,e,i,n){const s=pe(e)/i[0],o=ce(e)/i[1];return n?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function Ql(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),Be(n,i/2,2*e)}function Tl(t,e,i,n,s){return i=void 0===i||i,function(o,r,A,a){if(void 0!==o){const r=n?Ul(t,n,A,s):t;return i&&a?Ql(o,r,e):Be(o,e,r)}}}function kl(t,e){setTimeout((function(){t(e)}),0)}function Rl(t){return!(t.sourceCenter&&t.targetCenter&&!Ue(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function Pl(t,e,i,n,s){const o=Math.cos(-s);let r=Math.sin(-s),A=t[0]*o-t[1]*r,a=t[1]*o+t[0]*r;A+=(e[0]/2-i[0])*n,a+=(i[1]-e[1]/2)*n,r=-r;return[A*o-a*r,a*o+A*r]}var Dl=class extends ot{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=$e(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&ze(),t.center&&(t.center=ai(t.center,this.projection_)),t.extent&&(t.extent=hi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in Il)delete e[t];this.setProperties(e,!0);const i=function(t){let e,i,n;const s=28,o=2;let r=void 0!==t.minZoom?t.minZoom:0,A=void 0!==t.maxZoom?t.maxZoom:s;const a=void 0!==t.zoomFactor?t.zoomFactor:o,l=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,d=$e(t.projection,"EPSG:3857"),g=d.getExtent();let p=t.constrainOnlyCenter,f=t.extent;l||f||!d.isGlobal()||(p=!1,f=g);if(void 0!==t.resolutions){const s=t.resolutions;i=s[r],n=void 0!==s[A]?s[A]:s[s.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(s,o,r,A){if(void 0!==s){const a=t[0],l=t[t.length-1],h=i?Ul(a,i,r,n):a;if(A)return e?Ql(s,h,l):Be(s,l,h);const c=Math.min(h,s),d=Math.floor(u(t,c,o));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(s,h,!p&&f,c):Tl(i,n,h,!p&&f,c)}else{const l=(g?Math.max(pe(g),ce(g)):360*gt.degrees/d.getMetersPerUnit())/qa/Math.pow(o,0),u=l/Math.pow(o,s-0);i=t.maxResolution,void 0!==i?r=0:i=l/Math.pow(a,r),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(a,A):l/Math.pow(a,A):u),A=r+Math.floor(Math.log(i/n)/Math.log(a)),n=i/Math.pow(a,A-r),e=t.constrainResolution?function(t,e,i,n,s,o){return n=void 0===n||n,i=void 0!==i?i:0,function(r,A,a,l){if(void 0!==r){const h=s?Ul(e,s,a,o):e;if(l)return n?Ql(r,h,i):Be(r,i,h);const c=1e-9,u=Math.ceil(Math.log(e/h)/Math.log(t)-c),d=-A*(.5-c)+.5,g=Math.min(h,r),p=Math.floor(Math.log(e/g)/Math.log(t)+d),f=Math.max(u,p);return Be(e/Math.pow(t,f),i,h)}}}(a,i,n,h,!p&&f,c):Tl(i,n,h,!p&&f,c)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ml(t.extent,t.constrainOnlyCenter,e)}const e=$e(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Ml(t,!1,!1)}return Ll}(t),s=i.constraint,o=function(t){if(void 0===t.enableRotation||t.enableRotation){const i=t.constrainRotation;return void 0===i||!0===i?(e=e||be(5),function(t,i){return i?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}):!1===i?bn:"number"==typeof i?function(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(i):bn}return Cn;var e}(t);this.constraints_={center:n,resolution:s,rotation:o},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenter();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),r=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let i=arguments[t];i.center&&(i=Object.assign({},i),i.center=ai(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ai(i.anchor,this.getProjection())),e[t]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&kl(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),r=this.targetResolution_,A=this.targetRotation_;const a=[];for(;n<i;++n){const t=arguments[n],i={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||lt,callback:e};if(t.center&&(i.sourceCenter=o,i.targetCenter=t.center.slice(),o=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=r,i.targetResolution=this.getResolutionForZoom(t.zoom),r=i.targetResolution):t.resolution&&(i.sourceResolution=r,i.targetResolution=t.resolution,r=i.targetResolution),void 0!==t.rotation){i.sourceRotation=A;const e=ve(t.rotation-A+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=A+e,A=i.targetRotation}Rl(i)?i.complete=!0:s+=i.duration,a.push(i)}this.animations_.push(a),this.setHint(Pr,1),this.updateAnimations_()}getAnimating(){return this.hints_[Pr]>0}getInteracting(){return this.hints_[Dr]>0}cancelAnimations(){let t;this.setHint(Pr,-this.hints_[Pr]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&kl(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let i=0,o=n.length;i<o;++i){const o=n[i];if(o.complete)continue;const r=t-o.start;let A=o.duration>0?r/o.duration:1;A>=1?(o.complete=!0,A=1):s=!1;const a=o.easing(A);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],i=o.targetCenter[0],n=o.targetCenter[1];this.nextCenter_=o.targetCenter;const s=t+a*(i-t),r=e+a*(n-e);this.targetCenter_=[s,r]}if(o.sourceResolution&&o.targetResolution){const t=1===a?o.targetResolution:o.sourceResolution+a*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===a?ve(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+a*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(s){this.animations_[i]=null,this.setHint(Pr,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&kl(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();var s,o;return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],Qe(i,t-this.getRotation()),o=e,(s=i)[0]+=+o[0],s[1]+=+o[1]),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();if(void 0!==n&&void 0!==s){i=[e[0]-t*(e[0]-n[0])/s,e[1]-t*(e[1]-n[1])/s]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Ai(t,this.getProjection()):t}getCenterInternal(){return this.get(Il.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return li(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();M(e,1);const i=this.getResolution();M(void 0!==i,2);const n=this.getRotation();return M(void 0!==n,3),le(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Il.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(hi(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=pe(t)/e[0],n=ce(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(Il.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=Pl(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=u(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Be(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Be(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(M(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){M(!me(t),25);i=un(hi(t,this.getProjection()))}else if("Circle"===t.getType()){const e=hi(t.getExtent(),this.getProjection());i=un(e),i.rotate(this.getRotation(),Ae(e))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,A=1/0,a=-1/0,l=-1/0;for(let t=0,e=s.length;t<e;t+=o){const e=s[t]*i-s[t+1]*n,o=s[t]*n+s[t+1]*i;r=Math.min(r,e),A=Math.min(A,o),a=Math.max(a,e),l=Math.max(l,o)}return[r,A,a,l]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let A=this.getResolutionForExtentInternal(r,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);A=isNaN(A)?o:Math.max(A,o),A=this.getConstrainedResolution(A,s?0:1);const a=this.getRotation(),l=Math.sin(a),h=Math.cos(a),c=Ae(r);c[0]+=(n[1]-n[3])/2*A,c[1]+=(n[0]-n[2])/2*A;const u=c[0]*h-c[1]*l,d=c[1]*h+c[0]*l,g=this.getConstrainedCenter([u,d],A),p=e.callback?e.callback:y;void 0!==e.duration?this.animateInternal({resolution:A,center:g,duration:e.duration,easing:e.easing},p):(this.targetResolution_=A,this.targetCenter_=g,this.applyTargetState_(!1,!0),kl(p,!0))}centerOn(t,e,i){this.centerOnInternal(ai(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Pl(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-i),A=Pl(t,n,[r[0]/2+o[3],r[1]/2+o[0]],e,i);s=[t[0]-A[0],t[1]-A[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Ai(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ai(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ai(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?ai(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,i),r=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(Il.ROTATION)!==n&&this.set(Il.ROTATION,n),this.get(Il.RESOLUTION)!==o&&(this.set(Il.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),r&&this.get(Il.CENTER)&&Ue(this.get(Il.CENTER),r)||this.set(Il.CENTER,r),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,n,o),A=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=A,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&Ue(this.getCenterInternal(),A)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:A,resolution:r,duration:t,easing:at,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Dr,1)}endInteraction(t,e,i){i=i&&ai(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(Dr,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};var Ol=class extends ot{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Zs(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Zs(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)Z(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==y&&this.listenerKeys.push(j(t,RA,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}};var Nl=class extends Ol{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",s=void 0!==t.expandClassName?t.expandClassName:e+"-expand",o=void 0!==t.collapseLabel?t.collapseLabel:"›",r=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=r):this.collapseLabel_=o;const A=void 0!==t.label?t.label:"i";"string"==typeof A?(this.label_=document.createElement("span"),this.label_.textContent=A,this.label_.className=s):this.label_=A;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(n,this.handleClick_.bind(this),!1);const l=e+" "+"ol-unselectable "+io+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},i=[];let n=!0;const s=t.layerStatesArray;for(let o=0,r=s.length;o<r;++o){const r=s[o];if(!as(r,t.viewState))continue;const A=r.layer.getSource();if(!A)continue;const a=A.getAttributions();if(!a)continue;const l=a(t);if(l)if(n=n&&!1!==A.getAttributionsCollapsible(),Array.isArray(l))for(let t=0,n=l.length;t<n;++t)l[t]in e||(i.push(l[t]),e[l[t]]=!0);else l in e||(i.push(l),e[l]=!0)}return this.overrideCollapsible_||this.setCollapsible(n),i}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!p(e,this.renderedAttributions_)){$s(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(no),this.collapsed_?Js(this.collapseLabel_,this.label_):Js(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};var Hl=class extends Ol{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧",s=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const o=t.tipLabel?t.tipLabel:"Reset rotation",r=document.createElement("button");r.className=e+"-reset",r.setAttribute("type","button"),r.title=o,r.appendChild(this.label_),r.addEventListener(n,this.handleClick_.bind(this),!1);const A=e+" "+"ol-unselectable "+io,a=this.element;a.className=A,a.appendChild(r),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(to)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:at}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(to);t||0!==i?t&&0!==i&&this.element.classList.remove(to):this.element.classList.add(to)}this.label_.style.transform=t}this.rotation_=i}};var Gl=class extends Ol{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,s=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",o=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",r=void 0!==t.zoomInLabel?t.zoomInLabel:"+",A=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof r?document.createTextNode(r):r),h.addEventListener(n,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=o,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof A?document.createTextNode(A):A),c.addEventListener(n,this.handleClick_.bind(this,-i),!1);const u=e+" "+"ol-unselectable "+io,d=this.element;d.className=u,d.appendChild(h),d.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:at})):e.setZoom(n)}}};function Kl(t){t instanceof ls?t.setMapInternal(null):t instanceof _a&&t.getLayers().forEach(Kl)}function Vl(t,e){if(t instanceof ls)t.setMapInternal(e);else if(t instanceof _a){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)Vl(i[t],e)}}var Wl=class extends ot{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new _a({layers:t.layers});let s,o,r;i[Cl]=n,i[vl]=t.target,i[xl]=t.view instanceof Dl?t.view:new Dl,void 0!==t.controls&&(Array.isArray(t.controls)?s=new $r(t.controls.slice()):(M("function"==typeof t.controls.getArray,47),s=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new $r(t.interactions.slice()):(M("function"==typeof t.interactions.getArray,48),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new $r(t.overlays.slice()):(M("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new $r;return{controls:s,interactions:o,keyboardEventTarget:e,overlays:r,values:i}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:b,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||function(t){t=t||{};const e=new $r;return(void 0===t.zoom||t.zoom)&&e.push(new Gl(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Hl(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Nl(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new $r,i=new ha(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new vn),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new dt({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new wn({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new ZA),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new $A({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new TA),e.push(new kA({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new JA({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new xn({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Sl(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Cl,this.handleLayerGroupChanged_),this.addChangeListener(xl,this.handleViewChanged_),this.addChangeListener(bl,this.handleSizeChanged_),this.addChangeListener(vl,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof Dl||t.view.then((function(t){i.setView(new Dl(t))})),this.controls.addEventListener(qr,function(t){t.element.setMap(this)}.bind(this)),this.controls.addEventListener(jr,function(t){t.element.setMap(null)}.bind(this)),this.interactions.addEventListener(qr,function(t){t.element.setMap(this)}.bind(this)),this.interactions.addEventListener(jr,function(t){t.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(qr,function(t){this.addOverlayInternal_(t.element)}.bind(this)),this.overlays_.addEventListener(jr,function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(this)),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Vl(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:f,r=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,r,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];return function e(i){i.forEach((function(i){i instanceof _a?e(i.getLayers()):t.push(i)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:f,s=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(vl)}getTargetElement(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null}getCoordinateFromPixel(t){return Ai(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?mi(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Cl)}setLayers(t){const e=this.getLayerGroup();if(t instanceof $r)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=ai(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?mi(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(bl)}getView(){return this.get(xl)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(t,e,i,n,s){if(!t||!(i in t.wantedTiles))return El;if(!t.wantedTiles[i][e.getKey()])return El;const o=t.viewState.center,r=n[0]-o[0],A=n[1]-o[1];return 65536*Math.log(s)+Math.sqrt(r*r+A*A)/s}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new On(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Bl||i===l||i===s){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()!==this||!n.getActive()||!this.getTargetElement())continue;if(!n.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[Pr]||e[Dr]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(As)&&this.renderer_.dispatchRenderEvent(As,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Dn(NA,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Dn(OA,this,t))));const i=this.postRenderFunctions_;for(let e=0,n=i.length;e<n;++e)i[e](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Z(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(i,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(l,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Zs(this.viewport_)}const t=this.getTargetElement();if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new yl(this)),this.mapBrowserEventHandler_=new wl(this,this.moveTolerance_);for(const t in h)this.mapBrowserEventHandler_.addEventListener(h[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(i,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(l,this.boundHandleBrowserEvent_,!!E&&{passive:!1});const e=this.getOwnerDocument().defaultView,n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[j(n,s,this.handleBrowserEvent,this),j(n,o,this.handleBrowserEvent,this),j(e,A,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Z(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Z(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=j(e,W,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=j(e,t,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Z),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new fa("addlayer",e)),this.layerGroupPropertyListenerKeys_=[j(e,W,this.render,this),j(e,t,this.render,this),j(e,"addlayer",this.handleLayerAdd_,this),j(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Kl(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(void 0!==e&&Ts(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:le(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:n,wantedTiles:{},mapId:nt(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=le(o.nextCenter,o.nextResolution,t,e)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n){(!this.previousExtent_||!me(this.previousExtent_)&&!Zt(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Dn(PA,this,n)),this.previousExtent_=qt(this.previousExtent_))}this.previousExtent_&&!s.viewHints[Pr]&&!s.viewHints[Dr]&&!Zt(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Dn(DA,this,s)),Ht(s.extent,this.previousExtent_))}this.dispatchEvent(new Dn(RA,this,s)),this.renderComplete_=this.hasListener(OA)||this.hasListener(NA)||this.hasListener(As)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new fa("removelayer",e)),this.set(Cl,t)}setSize(t){this.set(bl,t)}setTarget(t){this.set(vl,t)}setView(t){if(!t||t instanceof Dl)return void this.set(xl,t);this.set(xl,new Dl);const e=this;t.then((function(t){e.setView(new Dl(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(n)||isNaN(s)||(e=[n,s],!Ts(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};function zl(t,e){t.getImage().src=e}var Xl=class extends hl{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:zl,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Sa,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const n=this.tileCacheForProjection[t];n.expireCache(n==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!ni(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!ni(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(!this.tileGrid||e&&!ni(e,t)){const e=nt(t);return e in this.tileGridForProjection||(this.tileGridForProjection[e]=el(t)),this.tileGridForProjection[e]}return this.tileGrid}getTileCacheForProjection(t){const e=this.getProjection();if(!e||ni(e,t))return this.tileCache;{const e=nt(t);return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new Ya(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}}createTile_(e,i,n,s,o,r){const A=[e,i,n],a=this.getTileCoordForTileUrlFunction(A,o),l=a?this.tileUrlFunction(a,s,o):void 0,h=new this.tileClass(A,void 0!==l?Ca:Ea,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=r,h.addEventListener(t,this.handleTileChange.bind(this)),h}getTile(t,e,i,n,s){const o=this.getProjection();if(o&&s&&!ni(o,s)){const r=this.getTileCacheForProjection(s),A=[t,e,i];let a;const l=za(A);r.containsKey(l)&&(a=r.get(l));const h=this.getKey();if(a&&a.key==h)return a;{const t=this.getTileGridForProjection(o),e=this.getTileGridForProjection(s),i=this.getTileCoordForTileUrlFunction(A,s),c=new Ra(o,t,s,e,A,i,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return c.key=h,a?(c.interimTile=a,c.refreshInterimChain(),r.replace(l,c)):r.set(l,c),c}}return this.getTileInternal(t,e,i,n,o||s)}getTileInternal(t,e,i,n,s){let o=null;const r=Wa(t,e,i),A=this.getKey();if(this.tileCache.containsKey(r)){if(o=this.tileCache.get(r),o.key!=A){const a=o;o=this.createTile_(t,e,i,n,s,A),a.getState()==Ca?o.interimTile=a.interimTile:o.interimTile=a,o.refreshInterimChain(),this.tileCache.replace(r,o)}}else o=this.createTile_(t,e,i,n,s,A),this.tileCache.set(r,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=je(t);if(i){const t=nt(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}};var Yl=class extends ls{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(Ha)}setPreload(t){this.set(Ha,t)}getUseInterimTilesOnError(){return this.get(Ga)}setUseInterimTilesOnError(t){this.set(Ga,t)}getData(t){return super.getData(t)}};var ql=class extends Yl{constructor(t){super(t)}createRenderer(){return new Na(this)}};var jl=class extends Xl{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},i=e.extent||je("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:il(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Ja(n)}({extent:nl(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}};function Jl(t,e){const i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));const n=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}const Zl="1.3.0",$l='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';var th=class extends jl{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:[$l];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",n=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}};const eh=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',$l],ih={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},nh={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}};var sh=class extends jl{constructor(t){const e=t.layer.indexOf("-"),i=-1==e?t.layer:t.layer.slice(0,e),n=nh[i],s=ih[t.layer],o=void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+s.extension;super({attributions:eh,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:null!=t.maxZoom?t.maxZoom:n.maxZoom,minZoom:null!=t.minZoom?t.minZoom:n.minZoom,opaque:s.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:o,wrapX:t.wrapX,zDirection:t.zDirection})}};var oh=class extends Xl{constructor(t){t=t||{};const e=Object.assign({},t.params),i=!("TRANSPARENT"in e)||e.TRANSPARENT;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const s=je(i),o=this.getProjection();let r=this.getTileGrid();r||(r=this.getTileGridForProjection(s));const A=r.getZForResolution(e,this.zDirection),a=r.getTileCoordForCoordAndZ(t,A);if(r.getResolutions().length<=a[0])return;let l=r.getResolution(a[0]),h=r.getTileCoordExtent(a,this.tmpExtent_),c=Rs(r.getTileSize(a[0]),this.tmpSize);const u=this.gutter_;var d;0!==u&&(c=Qs(c,u,this.tmpSize),h=Nt(h,l*u,h)),o&&o!==s&&(l=Ta(o,s,t,l),h=ye(h,oi(s,o),void 0,d),t=ri(t,s,o));const g={SERVICE:"WMS",VERSION:Zl,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,this.params_,n);const p=Math.floor((t[0]-h[0])/l),f=Math.floor((h[3]-t[1])/l);return g[this.v13_?"I":"X"]=p,g[this.v13_?"J":"Y"]=f,this.getRequestUrl_(a,c,h,1,o||s,g)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const i={SERVICE:"WMS",VERSION:Zl,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*e/n}return Object.assign(i,e),Jl(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,s,o){const r=this.urls;if(!r)return;if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":const t=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+t:o.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":o.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":o.DPI=90*n;break;default:M(!1,52)}const A=s.getAxisOrientation(),a=i;if(this.v13_&&"ne"==A.substr(0,2)){let t;t=i[0],a[0]=i[1],a[1]=t,t=i[2],a[2]=i[3],a[3]=t}let l;if(o.BBOX=a.join(","),1==r.length)l=r[0];else{l=r[ve(Xa(t),r.length)]}return Jl(l,o)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||Zl;this.v13_=function(t,e){const i=(""+t).split("."),n=(""+e).split(".");for(let t=0;t<Math.max(i.length,n.length);t++){const e=parseInt(i[t]||"0",10),s=parseInt(n[t]||"0",10);if(e>s)return 1;if(s>e)return-1}return 0}(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const s=n.getResolution(t[0]);let o=n.getTileCoordExtent(t,this.tmpExtent_),r=Rs(n.getTileSize(t[0]),this.tmpSize);const A=this.gutter_;0!==A&&(r=Qs(r,A,this.tmpSize),o=Nt(o,s*A,o)),1!=e&&(r=ks(r,e,this.tmpSize));const a={SERVICE:"WMS",VERSION:Zl,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,r,o,e,i,a)}};const rh=(t,e,...i)=>void 0!==t&&(!(0!==i.length||!Object.prototype.hasOwnProperty.call(t,e))||rh(t[e],...i)),Ah=function(t,...e){return rh(t,"oltb",e)},ah={Click:"click",ContextMenu:"contextmenu",KeyUp:"keyup",KeyDown:"keydown",Resize:"resize",Wheel:"wheel",Change:"change",MouseDown:"mousedown",MouseMove:"mousemove",MouseOut:"mouseout",DOMContentLoaded:"DOMContentLoaded",FullScreenChange:"fullscreenchange",Load:"load",Input:"input"},lh={Add:"add",Remove:"remove",DrawStart:"drawstart",DrawEnd:"drawend",DrawAbort:"drawabort",ModifyStart:"modifystart",ModifyEnd:"modifyend",MoveEnd:"moveend",TranslateStart:"translatestart",TranslateEnd:"translateend",Error:"error",Change:"change",PropertyChange:"propertychange",PreRender:"prerender",PostRender:"postrender",RenderComplete:"rendercomplete",SingleClick:"singleclick",PointerMove:"pointermove"},hh={ToolbarDirectionChange:"oltb.toolbar.direction.change",SettingsCleared:"oltb.settings.cleared",MapLayerAdded:"oltb.mapLayer.added",MapLayerRemoved:"oltb.mapLayer.removed",FeatureLayerAdded:"oltb.featureLayer.added",FeatureLayerRemoved:"oltb.featureLayer.removed",FeatureEdited:"oltb.feature.edited",FeatureRemoved:"oltb.feature.removed",ColorChange:"oltb.color.change"},ch={layer:"layer",marker:"marker",windbarb:"windbarb",measurement:"measurement",drawing:"drawing"},uh="tooltip",dh="notSelectable";class gh{static map;static activeFeatureLayer;static layerId=0;static queue={mapLayers:[],featureLayers:[]};static layers={mapLayers:[],featureLayers:[]};static init(t){this.map||(this.map=t,this.queue.mapLayers.forEach((t=>{this.addMapLayerToMap(t.layerWrapper,t.silent)})),this.queue.mapLayers=[],this.queue.featureLayers.forEach((t=>{this.addFeatureLayerToMap(t.layerWrapper,t.silent)})),this.queue.featureLayers=[])}static addMapLayers(t,e=!1){for(let i in t)this.addMapLayer(t[i],e)}static addMapLayer(t,e=!1){t.id=this.layerId,this.layerId=this.layerId+1,this.map?this.addMapLayerToMap(t,e):this.queue.mapLayers.push({layerWrapper:t,silent:e})}static addMapLayerToMap(t,e=!1){this.layers.mapLayers.push(t),this.map.addLayer(t.layer),window.dispatchEvent(new CustomEvent(hh.MapLayerAdded,{detail:{layerWrapper:t,silent:e}}))}static removeMapLayer(t,e=!1){this.layers.mapLayers=this.layers.mapLayers.filter((function(e){return e.id!==t.id})),this.map.removeLayer(t.layer),window.dispatchEvent(new CustomEvent(hh.MapLayerRemoved,{detail:{layerWrapper:t,silent:e}}))}static getMapLayers(){return this.layers.mapLayers}static getMapLayerById(t){return this.layers.mapLayers.find((e=>e.id===t))}static getOLMapLayers(){const t=[];for(let e in this.layers.mapLayers)t.push(this.layers.mapLayers[e].layer);return t}static setTopMapLayerAsOnlyVisible(){this.layers.mapLayers.forEach((t=>{t.layer.setVisible(!1)})),this.isMapLayersEmpty()||this.layers.mapLayers[0].layer.setVisible(!0)}static getMapLayerSize(){return this.layers.mapLayers.length}static isMapLayersEmpty(){return 0===this.getMapLayerSize()}static addFeatureLayer(t,e=!0,i=!1){(t=t.trim()).length||(t="New layer");const n={id:this.layerId,name:t,layer:new Yr({source:new dA,zIndex:1e3+this.layerId,visible:e})};return this.layerId=this.layerId+1,this.activeFeatureLayer=n,this.map?this.addFeatureLayerToMap(n,i):this.queue.featureLayers.push({layerWrapper:n,silent:i}),n}static addFeatureLayerToMap(t,e=!1){this.layers.featureLayers.push(t),this.map.addLayer(t.layer),window.dispatchEvent(new CustomEvent(hh.FeatureLayerAdded,{detail:{layerWrapper:t,silent:e}}))}static removeFeatureLayer(t,e=!1){this.layers.featureLayers=this.layers.featureLayers.filter((function(e){return e.id!==t.id})),t.layer.getSource().getFeatures().forEach((t=>{Ah(t.getProperties(),uh)&&this.map.removeOverlay(t.getProperties().oltb.tooltip)})),this.map.removeLayer(t.layer),this.activeFeatureLayer=this.isFeatureLayersEmpty()?null:this.layers.featureLayers[this.layers.featureLayers.length-1],window.dispatchEvent(new CustomEvent(hh.FeatureLayerRemoved,{detail:{layerWrapper:t,silent:e}}))}static getActiveFeatureLayer(t={}){return this.activeFeatureLayer||this.addFeatureLayer(t.fallback),this.activeFeatureLayer}static setActiveFeatureLayer(t){this.activeFeatureLayer=t}static getFeatureLayers(){return this.layers.featureLayers}static removeFeatureFromLayer(t){this.getFeatureLayers().forEach((e=>{e.layer.getSource().removeFeature(t)}))}static getFeatureLayerSize(){return this.layers.featureLayers.length}static isFeatureLayersEmpty(){return 0===this.getFeatureLayerSize()}}let ph=class{static createElement(t={}){const e=document.createElement(t.element);t.id&&(e.id=t.id),t.class&&(e.className=t.class),t.value&&(e.value=t.value),t.text&&(e.innerText=t.text),t.html&&(e.innerHTML=t.html),t.style&&(e.style=t.style),t.title&&(e.title=t.title);for(const i in t.attributes)e.setAttribute(i,t.attributes[i]);for(const i in t.listeners){const n=t.listeners[i];Array.isArray(n)?n.forEach((t=>{e.addEventListener(i,t)})):e.addEventListener(i,n)}return e}static appendChildren(t,e=[]){e.forEach((e=>{t.appendChild(e)}))}static rerunAnimation(t,e){t.classList.remove(e),t.offsetWidth,t.classList.add(e)}};const fh=document.getElementById("map");class mh{static createElement(t={}){const e=document.createElement(t.element);t.id&&(e.id=t.id),t.class&&(e.className=t.class),t.value&&(e.value=t.value),t.text&&(e.innerText=t.text),t.html&&(e.innerHTML=t.html),t.style&&(e.style=t.style),t.title&&(e.title=t.title);for(const i in t.attributes)e.setAttribute(i,t.attributes[i]);for(const i in t.listeners){const n=t.listeners[i];Array.isArray(n)?n.forEach((t=>{e.addEventListener(i,t)})):e.addEventListener(i,n)}return e}static appendChildren(t,e=[]){e.forEach((e=>{t.appendChild(e)}))}static rerunAnimation(t,e){t.classList.remove(e),t.offsetWidth,t.classList.add(e)}}const yh=mh.createElement({element:"div",class:"oltb-toast-container",attributes:{"data-html2canvas-ignore":"true"}});fh.appendChild(yh);class _h{static runtimeState=JSON.parse(localStorage.getItem("oltb-state"))||{};static init(t){}static updateStateObject(t,e){this.runtimeState[t]=e,this.saveState()}static getStateObject(t){return t in this.runtimeState?this.runtimeState[t]:null}static saveState(){localStorage.setItem("oltb-state",JSON.stringify(this.runtimeState))}static clear(){this.runtimeState={},localStorage.clear()}}const Bh=document.getElementById("oltb");Bh.setAttribute("data-html2canvas-ignore","true");"dark"===_h.getStateObject("theme")&&Bh.classList.add("dark");"light"===_h.getStateObject("theme")&&Bh.classList.remove("dark");"row"===_h.getStateObject("direction")&&Bh.classList.add("row");"col"===_h.getStateObject("direction")&&Bh.classList.remove("row"),Bh.classList.contains("dark")&&document.body.classList.add("oltb-dark"),Bh.classList.contains("row")&&document.body.classList.add("oltb-row"),Bh.addEventListener(ah.Wheel,(function(t){t.ctrlKey||(this.scrollLeft+=t.deltaY>0?100:-100)}));const wh=mh.createElement({element:"div",class:"oltb-toolbox-container",attributes:{"data-html2canvas-ignore":"true"}});fh.appendChild(wh);const Ch={width:24,height:24,fill:"currentColor",stroke:"none",class:"",path:void 0},bh=function(t={}){return`\n        <svg xmlns="http://www.w3.org/2000/svg" \n            width="${(t={...Ch,...t}).width}" \n            height="${t.height}" \n            fill="${t.fill}"\n            stroke="${t.stroke}" \n            class="${t.class}" \n            viewBox="0 0 16 16">\n            ${t.path}\n        </svg>\n    `},vh={About:'\n        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n        <path d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n    ',AspectRation:'\n        <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5v-9zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"/>\n        <path d="M2 4.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H3v2.5a.5.5 0 0 1-1 0v-3zm12 7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H13V8.5a.5.5 0 0 1 1 0v3z"/>\n    ',Bell:'\n        <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>\n    ',Bookmark:'\n        <path d="M7.84 4.1a.178.178 0 0 1 .32 0l.634 1.285a.178.178 0 0 0 .134.098l1.42.206c.145.021.204.2.098.303L9.42 6.993a.178.178 0 0 0-.051.158l.242 1.414a.178.178 0 0 1-.258.187l-1.27-.668a.178.178 0 0 0-.165 0l-1.27.668a.178.178 0 0 1-.257-.187l.242-1.414a.178.178 0 0 0-.05-.158l-1.03-1.001a.178.178 0 0 1 .098-.303l1.42-.206a.178.178 0 0 0 .134-.098L7.84 4.1z"/>\n        <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>\n    ',Brackets:'\n        <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6zM13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6z"/>\n    ',Close:'\n        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n    ',Compass:'\n        <path d="M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016zm6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n        <path d="M6.94 7.44l4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"/>\n    ',Coordinates:'\n        <path fill-rule="evenodd" d="M8.5 1.018V0h-1v1.018A7 7 0 0 0 1.018 7.5H0v1h1.018A7 7 0 0 0 7.5 14.982V16h1v-1.018A7 7 0 0 0 14.982 8.5H16v-1h-1.018A7 7 0 0 0 8.5 1.018zm-1 .877V4h1V1.895A6.125 6.125 0 0 1 14.105 7.5H12v1h2.105A6.125 6.125 0 0 1 8.5 14.105V12h-1v2.105A6.125 6.125 0 0 1 1.895 8.5H4v-1H1.895A6.125 6.125 0 0 1 7.5 1.895z"/>\n    ',Debug:'\n        <path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/>\n    ',DirectionHorizontal:'\n        <path d="M13.5 7a.5.5 0 0 0 .24-.939l-11-6A.5.5 0 0 0 2 .5v6a.5.5 0 0 0 .5.5h11zm.485 2.376a.5.5 0 0 1-.246.563l-11 6A.5.5 0 0 1 2 15.5v-6a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .485.376zM11.539 10H3v4.658L11.54 10z"/>\n    ',DirectionVertical:'\n        <path d="M7 2.5a.5.5 0 0 0-.939-.24l-6 11A.5.5 0 0 0 .5 14h6a.5.5 0 0 0 .5-.5v-11zm2.376-.484a.5.5 0 0 1 .563.245l6 11A.5.5 0 0 1 15.5 14h-6a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .376-.484zM10 4.46V13h4.658L10 4.46z"/>\n    ',Difference:'\n        <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5z"/>\n    ',Edit:'\n        <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103zM2.25 8.184l3.897 1.67a.5.5 0 0 1 .262.263l1.67 3.897L12.743 3.52 2.25 8.184z"/>\n    ',Exclude:'\n        <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm12 2H5a1 1 0 0 0-1 1v7h7a1 1 0 0 0 1-1V4z"/>\n    ',Export:'\n        <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n        <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>\n    ',EnterFullScreen:'\n        <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>\n    ',ExitFullScreen:'\n        <path d="M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"/>\n    ',FocusHere:'\n        <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5v-9zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"/>\n        <path d="M2 4.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H3v2.5a.5.5 0 0 1-1 0v-3zm12 7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H13V8.5a.5.5 0 0 1 1 0v3z"/>\n    ',GeoMarker:'\n        <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>\n        <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>\n    ',GeoMarkerFilled:'\n        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>\n    ',GeoPin:'\n        <path fill-rule="evenodd" d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>\n    ',GitHub:'\n        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>\n    ',Globe:'\n        <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855-.143.268-.276.56-.395.872.705.157 1.472.257 2.282.287V1.077zM4.249 3.539c.142-.384.304-.744.481-1.078a6.7 6.7 0 0 1 .597-.933A7.01 7.01 0 0 0 3.051 3.05c.362.184.763.349 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9.124 9.124 0 0 1-1.565-.667A6.964 6.964 0 0 0 1.018 7.5h2.49zm1.4-2.741a12.344 12.344 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332zM8.5 5.09V7.5h2.99a12.342 12.342 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.612 13.612 0 0 1 7.5 10.91V8.5H4.51zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741H8.5zm-3.282 3.696c.12.312.252.604.395.872.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a6.696 6.696 0 0 1-.598-.933 8.853 8.853 0 0 1-.481-1.079 8.38 8.38 0 0 0-1.198.49 7.01 7.01 0 0 0 2.276 1.522zm-1.383-2.964A13.36 13.36 0 0 1 3.508 8.5h-2.49a6.963 6.963 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667zm6.728 2.964a7.009 7.009 0 0 0 2.275-1.521 8.376 8.376 0 0 0-1.197-.49 8.853 8.853 0 0 1-.481 1.078 6.688 6.688 0 0 1-.597.933zM8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855.143-.268.276-.56.395-.872A12.63 12.63 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.963 6.963 0 0 0 14.982 8.5h-2.49a13.36 13.36 0 0 1-.437 3.008zM14.982 7.5a6.963 6.963 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008h2.49zM11.27 2.461c.177.334.339.694.482 1.078a8.368 8.368 0 0 0 1.196-.49 7.01 7.01 0 0 0-2.275-1.52c.218.283.418.597.597.932zm-.488 1.343a7.765 7.765 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"/>\n    ',Help:'\n        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>\n    ',Home:'\n        <path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>\n        <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>\n    ',Info:'\n        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n        <path d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n    ',Intersect:'\n        <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5zm6-8V2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2V6a2 2 0 0 1 2-2h5z"/>\n    ',Layers:'\n        <path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zm3.515 7.008L14.438 10 8 13.433 1.562 10 4.25 8.567l3.515 1.874a.5.5 0 0 0 .47 0l3.515-1.874zM8 9.433L1.562 6 8 2.567 14.438 6 8 9.433z"/>\n    ',LightOn:'\n        <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"/>\n    ',LightOff:'\n        <path fill-rule="evenodd" d="M2.23 4.35A6.004 6.004 0 0 0 2 6c0 1.691.7 3.22 1.826 4.31.203.196.359.4.453.619l.762 1.769A.5.5 0 0 0 5.5 13a.5.5 0 0 0 0 1 .5.5 0 0 0 0 1l.224.447a1 1 0 0 0 .894.553h2.764a1 1 0 0 0 .894-.553L10.5 15a.5.5 0 0 0 0-1 .5.5 0 0 0 0-1 .5.5 0 0 0 .288-.091L9.878 12H5.83l-.632-1.467a2.954 2.954 0 0 0-.676-.941 4.984 4.984 0 0 1-1.455-4.405l-.837-.836zm1.588-2.653.708.707a5 5 0 0 1 7.07 7.07l.707.707a6 6 0 0 0-8.484-8.484zm-2.172-.051a.5.5 0 0 1 .708 0l12 12a.5.5 0 0 1-.708.708l-12-12a.5.5 0 0 1 0-.708z"/>\n    ',Magnify:'\n        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>\n    ',Measure:'\n        <path d="M1 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h5v-1H2v-1h4v-1H4v-1h2v-1H2v-1h4V9H4V8h2V7H2V6h4V2h1v4h1V4h1v2h1V2h1v4h1V4h1v2h1V2h1v4h1V1a1 1 0 0 0-1-1H1z"/>\n    ',MoveCenter:'\n        <path fill-rule="evenodd" d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"/>\n    ',Open:'\n        <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/>\n    ',Pen:'\n        <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908l-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>\n        <path fill-rule="evenodd" d="M2.832 13.228L8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>\n    ',Plus:'\n        <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/>\n    ',PlusSmall:'\n        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n    ',Refresh:'\n        <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>\n        <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>\n    ',Rotate:'\n        <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n        <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>  \n    ',ScaleLine:'\n        <path d="M4.114 7.951l.397-.413L5.799 9.25h.742L4.935 7.097l1.439-1.545h-.77L4.453 6.769l-.339.406V4h-.632v5.25h.632V7.951zM7.638 5.962l-.017-.41h-.598V9.25h.632v-2.7c.153-.353.437-.53.851-.53.527 0 .79.269.79.807V9.25h.636V6.796a.846.846 0 01.27-.564.834.834 0 01.584-.212c.285 0 .488.066.609.198.12.13.18.327.18.592v2.44h.633V6.772c-.014-.86-.426-1.289-1.237-1.289-.27 0-.503.055-.701.164-.196.11-.355.253-.479.431-.186-.396-.538-.595-1.056-.595-.46 0-.826.16-1.097.479z"/>\n        <path d="M1.5 10.75v-2.5h-1v3a.5.5 0 00.5.5h14a.5.5 0 00.5-.5v-3h-1v2.5h-13z"/>\n    ',Settings:'\n        <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>\n        <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>\n    ',SplitView:'\n        <path fill-rule="evenodd" d="M8 14a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5zM.146 7.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 0 1 .708.708L1.707 6.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 1 1-.708.708l-2-2zM10 7a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.501.501 0 0 1-.708-.708L14.293 7.5H10.5A.5.5 0 0 1 10 7z"/>\n    ',Trash:'\n        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>  \n    ',Union:'\n        <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2z"/>\n    ',ZoomIn:'\n        <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n        <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>\n        <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/>\n    ',ZoomOut:'\n        <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n        <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>\n        <path fill-rule="evenodd" d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>\n    '},xh='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',Eh=function(t){if(!("tab"===t.key.toLowerCase()))return;const e=this.querySelectorAll(xh)[0],i=this.querySelectorAll(xh),n=i[i.length-1];t.shiftKey?document.activeElement===e&&(n.focus(),t.preventDefault()):document.activeElement===n&&(e.focus(),t.preventDefault())};class Fh{constructor(t,e){this.modalBackdrop=ph.createElement({element:"div",class:"oltb-modal-backdrop oltb-modal-backdrop--fixed",attributes:{tabindex:"-1"},listeners:{click:this.bounceAnimation.bind(this),keydown:Eh}}),this.modal=ph.createElement({element:"div",class:"oltb-modal oltb-animations--bounce"});const i=ph.createElement({element:"div",class:"oltb-modal__header"}),n=ph.createElement({element:"h2",html:t,class:"oltb-modal__title"}),s=ph.createElement({element:"button",html:bh({path:vh.Close,fill:"none",stroke:"currentColor"}),class:"oltb-modal__close oltb-btn oltb-btn--blank",attributes:{type:"button"},listeners:{click:this.close.bind(this)}});this.modalBackdrop.appendChild(this.modal),this.modal.appendChild(i),i.appendChild(n),i.appendChild(s),this.onClose=e,window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){"escape"===t.key.toLowerCase()&&this.close()}isBackdropClicked(t){return t.target===this.modalBackdrop}bounceAnimation(t){if(!this.isBackdropClicked(t))return;const e=this.modalBackdrop.firstElementChild;ph.rerunAnimation(e,"oltb-animations--bounce")}show(t){this.modal.appendChild(t),fh.appendChild(this.modalBackdrop),this.modalBackdrop.focus()}close(){this.modalBackdrop.removeEventListener(ah.KeyDown,Eh),this.modalBackdrop.remove(),"function"==typeof this.onClose&&this.onClose()}}const Sh=function(){return document.body.classList.contains("oltb-dark")},Ih={};class Mh extends Fh{constructor(t,e,i){const n=t.edit??!1;super((n?"Edit":"Create")+" marker"),this.options={...Ih,...t};const s=ph.createElement({element:"div",class:"oltb-m-0"});s.appendChild(ph.createElement({element:"label",text:"Name",class:"oltb-label",attributes:{for:"marker-name"}}));const o=ph.createElement({element:"input",id:"oltb-marker-modal-marker-name",class:"oltb-input",value:n&&this.options.name.length?this.options.name:"Marker",attributes:{type:"text"}});s.appendChild(o);const r=ph.createElement({element:"div",class:"oltb-mt-0625"});r.appendChild(ph.createElement({element:"label",text:"Info text",class:"oltb-label",attributes:{for:"oltb-marker-modal-marker-info"}}));const A=ph.createElement({element:"input",id:"oltb-marker-modal-marker-info",class:"oltb-input",value:n&&this.options.info.length?this.options.info:"",attributes:{type:"text",placeholder:"Some information about the marker"}});r.appendChild(A);const a=ph.createElement({element:"div",class:"oltb-mt-0625"}),l=ph.createElement({element:"select",id:"oltb-marker-modal-icon",class:"oltb-select"});for(const t in vh)l.appendChild(ph.createElement({element:"option",text:t,value:t}));const h=n?this.options.icon:"GeoPin";for(var c=0;c<l.length;c++)if(l[c].value===h){l.selectedIndex=c;break}a.appendChild(ph.createElement({element:"label",text:"Icon",class:"oltb-label",attributes:{for:"oltb-marker-modal-icon"}})),a.appendChild(l);const u=ph.createElement({element:"div",class:"oltb-mt-0625"});u.appendChild(ph.createElement({element:"label",text:"Latitud",class:"oltb-label",attributes:{for:"oltb-marker-modal-marker-lat"}}));const d=ph.createElement({element:"input",id:"oltb-marker-modal-marker-lat",class:"oltb-input",value:this.options.coordinates[1],attributes:{type:"text"}});u.appendChild(d);const g=ph.createElement({element:"div",class:"oltb-mt-0625"});g.appendChild(ph.createElement({element:"label",text:"Longitud",class:"oltb-label",attributes:{for:"oltb-marker-modal-marker-lon"}}));const p=ph.createElement({element:"input",id:"oltb-marker-modal-marker-lon",class:"oltb-input",value:this.options.coordinates[0],attributes:{type:"text"}});g.appendChild(p);const f=ph.createElement({element:"div",class:"oltb-mt-0625"});f.appendChild(ph.createElement({element:"label",text:"Background color",class:"oltb-label",attributes:{for:"oltb-marker-modal-marker-bgColor"}}));const m=n?this.options.backgroundColor:"#0166A5FF",y=ph.createElement({element:"div",id:"oltb-marker-modal-marker-bgColor",class:"oltb-color-input oltb-color-tippy",attributes:{tabindex:0,"data-oltb-color-target":"#oltb-marker-modal-marker-bgColor","data-oltb-color":m}});y.appendChild(ph.createElement({element:"div",style:`background-color: ${m}`,class:"oltb-color-input__inner"})),f.appendChild(y);const _=ph.createElement({element:"div",class:"oltb-mt-0625"});_.appendChild(ph.createElement({element:"label",text:"Color",class:"oltb-label",attributes:{for:"oltb-marker-modal-marker-color"}}));const B=n?this.options.color:"#FFFFFFFF",w=ph.createElement({element:"div",id:"oltb-marker-modal-marker-color",class:"oltb-color-input oltb-color-tippy",attributes:{tabindex:0,"data-oltb-color-target":"#oltb-marker-modal-marker-color","data-oltb-color":B}});w.appendChild(ph.createElement({element:"div",style:`background-color: ${B}`,class:"oltb-color-input__inner"})),_.appendChild(w);const C=ph.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-1"}),b=ph.createElement({element:"button",text:""+(n?"Save changes":"Create marker"),class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{const t={name:o.value.trim(),info:A.value.trim(),icon:l.value,latitude:parseFloat(d.value),longitude:parseFloat(p.value),backgroundColor:y.getAttribute("data-oltb-color"),color:w.getAttribute("data-oltb-color")};this.close(),"function"==typeof e&&e(t)}}}),v=ph.createElement({element:"button",text:"Cancel",class:"oltb-dialog__btn oltb-btn "+(Sh()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof i&&i()}}});C.appendChild(v),C.appendChild(b);const x=ph.createElement({element:"div",class:"oltb-modal__content"});ph.appendChildren(x,[s,r,a,u,g,f,_,C]),this.show(x)}}const Lh="element",Uh="map",Qh="offset",Th="position",kh="positioning";var Rh=class extends ot{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Lh,this.handleElementChanged),this.addChangeListener(Uh,this.handleMapChanged),this.addChangeListener(Qh,this.handleOffsetChanged),this.addChangeListener(Th,this.handlePositionChanged),this.addChangeListener(kh,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(Lh)}getId(){return this.id}getMap(){return this.get(Uh)||null}getOffset(){return this.get(Qh)}getPosition(){return this.get(Th)}getPositioning(){return this.get(kh)}handleElementChanged(){$s(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(Zs(this.element),Z(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=j(t,RA,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Lh,t)}setMap(t){this.set(Uh,t)}setOffset(t){this.set(Qh,t)}setPosition(t){this.set(Th,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Th))return;const i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),s=this.getRect(n,[qs(n),js(n)]),o=void 0===(t=t||{}).margin?20:t.margin;if(!Vt(i,s)){const n=s[0]-i[0],r=i[2]-s[2],A=s[1]-i[1],a=i[3]-s[3],l=[0,0];if(n<0?l[0]=n-o:r<0&&(l[0]=Math.abs(r)+o),A<0?l[1]=A-o:a<0&&(l[1]=Math.abs(a)+o),0!==l[0]||0!==l[1]){const i=e.getView().getCenterInternal(),n=e.getPixelFromCoordinateInternal(i);if(!n)return;const s=[n[0]+l[0],n[1]+l[1]],o=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(s),duration:o.duration,easing:o.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]}setPositioning(t){this.set(kh,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let o="0%",r="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?o="-100%":"bottom-center"!=s&&"center-center"!=s&&"top-center"!=s||(o="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?r="-100%":"center-left"!=s&&"center-center"!=s&&"center-right"!=s||(r="-50%");const A=`translate(${o}, ${r}) translate(${Math.round(t[0]+n[0])+"px"}, ${Math.round(t[1]+n[1])+"px"})`;this.rendered.transform_!=A&&(this.rendered.transform_=A,i.transform=A)}getOptions(){return this.options}};const Ph=.75,Dh=.1;var Oh=class extends Ol{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",i=void 0!==t.tipLabel?t.tipLabel:"Overview map",s=void 0!==t.collapseLabel?t.collapseLabel:"‹";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;const o=void 0!==t.label?t.label:"›";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o):this.label_=o;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,A=document.createElement("button");A.setAttribute("type","button"),A.title=i,A.appendChild(r),A.addEventListener(n,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const a=new Wl({view:t.view,controls:new $r,interactions:new $r});this.ovmap_=a,t.layers&&t.layers.forEach((function(t){a.addLayer(t)}));const l=document.createElement("div");l.className="ol-overviewmap-box",l.style.boxSizing="border-box",this.boxOverlay_=new Rh({position:[0,0],positioning:"center-center",element:l}),this.ovmap_.addOverlay(this.boxOverlay_);const h=e+" "+"ol-unselectable "+io+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=h,c.appendChild(this.ovmapDiv_),c.appendChild(A);const u=this,d=this.boxOverlay_,g=this.boxOverlay_.getElement(),p=function(t){const e={clientX:(i=t).clientX,clientY:i.clientY};var i;const n=a.getEventCoordinateInternal(e);d.setPosition(n)},f=function(t){const e=a.getEventCoordinateInternal(t);u.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",f)};g.addEventListener("mousedown",(function(){window.addEventListener("mousemove",p),window.addEventListener("mouseup",f)}))}setMap(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(j(t,W,this.handleMapPropertyChange_,this));const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===xl){const e=t.oldValue;e&&this.unbindView_(e);const i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||t.key!==vl&&t.key!==bl||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new Dl({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(Il.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(t){t.removeChangeListener(Il.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView().calculateExtentInternal(i);if(this.viewExtent_&&Zt(n,this.viewExtent_))return;this.viewExtent_=n;const s=e.getSize(),o=e.getView().calculateExtentInternal(s),r=e.getPixelFromCoordinateInternal(de(n)),A=e.getPixelFromCoordinateInternal(re(n)),a=Math.abs(r[0]-A[0]),l=Math.abs(r[1]-A[1]),h=s[0],c=s[1];a<h*Dh||l<c*Dh||a>h*Ph||l>c*Ph?this.resetExtent_():Vt(o,n)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtentInternal(i),s=e.getView(),o=Math.log(7.5)/Math.LN2;!function(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}(n,1/(Math.pow(2,o/2)*Dh)),s.fitInternal(un(n))}recenter_(){const t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView(),s=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),r=this.boxOverlay_,A=this.boxOverlay_.getElement(),a=n.getCenterInternal(),l=n.getResolution(),h=s.getResolution(),c=i[0]*l/h,u=i[1]*l/h;if(r.setPosition(a),A){A.style.width=c+"px",A.style.height=u+"px";const t="rotate("+o+"rad)";A.style.transform=t}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=J(this.ovmap_,RA,(function(t){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(no),this.collapsed_?Js(this.collapseLabel_,this.label_):Js(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}};const Nh="units",Hh=[1,2,5],Gh=25.4/.28;var Kh=class extends Ol{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+eo,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Nh,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Nh)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Nh,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,n=this.getUnits(),s="degrees"==n?"degrees":"m";let o=Je(i,t.resolution,e,s);const r=this.minWidth_*(this.dpi_||Gh)/Gh,A=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||Gh)/Gh:void 0;let a=r*o,l="";if("degrees"==n){const t=gt.degrees;a*=t,a<t/60?(l="″",o*=3600):a<t?(l="′",o*=60):l="°"}else"imperial"==n?a<.9144?(l="in",o/=.0254):a<1609.344?(l="ft",o/=.3048):(l="mi",o/=1609.344):"nautical"==n?(o/=1852,l="NM"):"metric"==n?a<.001?(l="μm",o*=1e6):a<1?(l="mm",o*=1e3):a<1e3?l="m":(l="km",o/=1e3):"us"==n?a<.9144?(l="in",o*=39.37):a<1609.344?(l="ft",o/=.30480061):(l="mi",o/=1609.3472):M(!1,33);let h,c,u,d,g,p,f=3*Math.floor(Math.log(r*o)/Math.log(10));for(;;){u=Math.floor(f/3);const t=Math.pow(10,u);if(h=Hh[(f%3+3)%3]*t,c=Math.round(h/o),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==A&&c>=A){h=d,c=g,u=p;break}if(c>=r)break;d=h,g=c,p=u,++f}const m=this.scaleBar_?this.createScaleBar(c,h,l):h.toFixed(u<0?-u:0)+" "+l;this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,r=t/o,A=[this.createMarker("absolute")];for(let n=0;n<o;++n){const s=n%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";A.push(`<div><div class="ol-scale-singlebar ${s}" style="width: ${r}px;"></div>`+this.createMarker("relative")+(n%2==0||2===o?this.createStepText(n,t,!1,e,i):"")+"</div>")}A.push(this.createStepText(o,t,!0,e,i));return(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+A.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,i,n,s){const o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+s);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${i?e+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){return Je(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||Gh)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}};const Vh={name:void 0,info:void 0,lat:void 0,lon:void 0,backgroundColor:"#0166A5FF",color:"#FFFFFF",iconName:void 0,icon:bh({path:vh.GeoPin,width:20,height:20,fill:"rgb(255, 255, 255)",stroke:"none"}),width:15,radius:15,scale:.7,notSelectable:!1,infoWindow:void 0},Wh=function(t={}){t={...Vh,...t};const e=new In({geometry:new qi(ii([t.lon,t.lat]))});return e.setStyle([new No({image:new Mo({radius:t.radius,fill:new Uo({color:t.backgroundColor}),stroke:new To({color:t.backgroundColor.slice(0,-2)+"66",width:t.width})})}),new No({image:new Xo({src:"data:image/svg+xml;utf8,"+t.icon,scale:t.scale,color:t.color})})]),e.setProperties({oltb:{type:ch.marker,notSelectable:t.notSelectable,infoWindow:t.infoWindow,name:t.name,info:t.info,backgroundColor:t.backgroundColor,color:t.color,icon:t.iconName}}),e};const zh={version:"1.0.0-beta3",locale:"en-us",projection:"EPSG:3857",wgs84Projection:"EPSG:4326",deviceWidth:{xs:"0",sm:"576",md:"768",lg:"992",xl:"1200",xxl:"1400"},animationDuration:{slow:450,normal:350,fast:250}},Xh={},Yh=new Map,qh=new Map;class jh extends Ol{constructor(t={}){super({element:ph.createElement({element:"ul",class:"oltb-context-menu",attributes:{tabindex:"-1","data-contextmenu":t.name},listeners:{keydown:Eh}})}),this.menu=this.element,this.options={...Xh,...t},this.MENU_ITEMS=Yh.get(this.options.name),this.target=null,this.create(),qh.set(this.options.name,this)}create(){this.MENU_ITEMS.forEach(((t,e)=>{this.addMenuItem(t,e)})),fh.appendChild(this.menu)}addMenuItem(t,e){if(rh(t,"name")){const i=ph.createElement({element:"li",text:t.name,class:"oltb-context-menu__item",attributes:{tabindex:"0","data-contextmenuitem":e},listeners:{click:this.click.bind(this),keyup:t=>{const e=t.key.toLowerCase();"enter"===e?this.click(t):"escape"===e&&this.hide()}}}),n=ph.createElement({element:"span",html:t.icon,class:"oltb-context-menu__icon"});i.prepend(n),this.menu.appendChild(i)}else{const t=ph.createElement({element:"li",class:"oltb-context-menu__divider"});this.menu.appendChild(t)}}show(t){this.coordinates=ri(this.getMap().getEventCoordinate(t),zh.projection,zh.wgs84Projection),this.menu.style.left=`${t.clientX}px`,this.menu.style.top=`${t.clientY}px`,this.menu.classList.add("oltb-context-menu--show"),this.target=t.target,this.menu.focus(),t.preventDefault()}hide(){this.menu.classList.remove("oltb-context-menu--show"),this.target=null}click(t){const e=t.target.getAttribute("data-contextmenuitem"),i=this.MENU_ITEMS[e];i&&i.fn(this.getMap(),this.coordinates,this.target),this.hide()}}fh.addEventListener(ah.ContextMenu,(t=>{qh.forEach((e=>{t.target.matches(e.options.selector)&&e.show(t)}))})),fh.addEventListener(ah.Click,(t=>{qh.forEach((t=>{t.hide()}))}));const Jh=function(t,e){if(Yh.has(t)||Yh.set(t,[]),Yh.get(t).push(e),qh.has(t)){const i=qh.get(t),n=Yh.get(t).length-1;i.addMenuItem(e,n)}},Zh="main.map.context.menu",$h="oltb-info-window",tc={};const ec="mapData",ic={lon:18.6435,lat:60.1282,zoom:4,rotation:0},nc={focusZoom:2};const sc={text:"Default toast",type:"info",autoremove:void 0,clickToRemove:!0,spinner:!1};class oc{constructor(t={}){this.options={...sc,...t};const e=ph.createElement({element:"div",class:`oltb-toast oltb-toast--${this.options.type} oltb-animations--slide-in oltb-d-flex`});if(this.toast=e,this.options.clickToRemove&&(e.classList.add("oltb-toast--clickable"),e.addEventListener(ah.Click,this.remove.bind(this))),this.options.spinner){const t=ph.createElement({element:"div",class:"oltb-spinner oltb-spinner--small oltb-animations--linear-spinner"});e.appendChild(t)}const i=ph.createElement({element:"p",text:this.options.text,class:"oltb-toast__message "+(this.options.spinner?"oltb-ml-0625":"")});e.appendChild(i),yh.prepend(e),this.options.autoremove&&setTimeout((()=>{this.remove()}),this.options.autoremove)}remove(){this.toast.classList.add("oltb-toast--remove","oltb-animations--slide-out"),setTimeout((()=>{this.toast.remove(),"function"==typeof this.options.onRemove&&this.options.onRemove()}),zh.animationDuration.fast)}static get Info(){return"info"}static get Warning(){return"warning"}static get Error(){return"error"}static get Success(){return"success"}}class rc{static info(t){return new oc({...t,type:oc.Info})}static warning(t){return new oc({...t,type:oc.Warning})}static success(t){return new oc({...t,type:oc.Success})}static error(t){return new oc({...t,type:oc.Error})}}const Ac=function(t,e){return!("TEXTAREA"===document.activeElement.nodeName||"INPUT"===document.activeElement.nodeName||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||t.key.toLocaleUpperCase()!==e)},ac="A",lc="B",hc="C",cc="D",uc="E",dc="F",gc="G",pc="H",fc="I",mc="J",yc="K",_c="L",Bc="M",wc="N",Cc="O",bc="P",vc="Q",xc="R",Ec="S",Fc="T",Sc="U",Ic="V",Mc="W",Lc="X",Uc="Y",Qc="Z",Tc="F1",kc={zoom:1,lon:0,lat:0};const Rc={};const Pc={};const Dc=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Oc="enterfullscreen",Nc="leavefullscreen",Hc=function(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)},Gc=function(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},Kc=function(){return document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():void 0},Vc={};
/*!
   * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
   * Released under MIT License
   */
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var Wc=function(t,e){return Wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},Wc(t,e)};function zc(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Wc(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Xc=function(){return Xc=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},Xc.apply(this,arguments)};function Yc(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{a(n.next(t))}catch(t){o(t)}}function A(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,A)}a((n=n.apply(t,e||[])).next())}))}function qc(t,e){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function A(o){return function(A){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,n=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(6===o[0]&&r.label<s[1]){r.label=s[1],s=o;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(o);break}s[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,A])}}}function jc(t,e,i){if(i||2===arguments.length)for(var n,s=0,o=e.length;s<o;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||e)}for(var Jc=function(){function t(t,e,i,n){this.left=t,this.top=e,this.width=i,this.height=n}return t.prototype.add=function(e,i,n,s){return new t(this.left+e,this.top+i,this.width+n,this.height+s)},t.fromClientRect=function(e,i){return new t(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},t.fromDOMRectList=function(e,i){var n=Array.from(i).find((function(t){return 0!==t.width}));return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),Zc=function(t,e){return Jc.fromClientRect(t,e.getBoundingClientRect())},$c=function(t){for(var e=[],i=0,n=t.length;i<n;){var s=t.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&s)<<10)+(1023&o)+65536):(e.push(s),i--)}else e.push(s)}return e},tu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],s=-1,o="";++s<i;){var r=t[s];r<=65535?n.push(r):(r-=65536,n.push(55296+(r>>10),r%1024+56320)),(s+1===i||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},eu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),nu=0;nu<eu.length;nu++)iu[eu.charCodeAt(nu)]=nu;for(var su="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ou="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ru=0;ru<su.length;ru++)ou[su.charCodeAt(ru)]=ru;for(var Au=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},au=function(){function t(t,e,i,n,s,o){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),cu=0;cu<lu.length;cu++)hu[lu.charCodeAt(cu)]=cu;var uu=10,du=13,gu=15,pu=17,fu=18,mu=19,yu=20,_u=21,Bu=22,wu=24,Cu=25,bu=26,vu=27,xu=28,Eu=30,Fu=32,Su=33,Iu=34,Mu=35,Lu=37,Uu=38,Qu=39,Tu=40,ku=42,Ru=[9001,65288],Pu="×",Du="÷",Ou=function(t,e){var i=function(t){var e,i,n,s,o,r=.75*t.length,A=t.length,a=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(r):new Array(r),h=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<A;e+=4)i=ou[t.charCodeAt(e)],n=ou[t.charCodeAt(e+1)],s=ou[t.charCodeAt(e+2)],o=ou[t.charCodeAt(e+3)],h[a++]=i<<2|n>>4,h[a++]=(15&n)<<4|s>>2,h[a++]=(3&s)<<6|63&o;return l}(t),n=Array.isArray(i)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i}(i):new Uint32Array(i),s=Array.isArray(i)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i}(i):new Uint16Array(i),o=Au(s,12,n[4]/2),r=2===n[5]?Au(s,(24+n[4])/2):function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))}(n,Math.ceil((24+n[4])/4));return new au(n[0],n[1],n[2],n[3],o,r)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Nu=[Eu,36],Hu=[1,2,3,5],Gu=[uu,8],Ku=[vu,bu],Vu=Hu.concat(Gu),Wu=[Uu,Qu,Tu,Iu,Mu],zu=[gu,du],Xu=function(t,e,i,n){var s=n[i];if(Array.isArray(t)?-1!==t.indexOf(s):t===s)for(var o=i;o<=n.length;){if((a=n[++o])===e)return!0;if(a!==uu)break}if(s===uu)for(o=i;o>0;){var r=n[--o];if(Array.isArray(t)?-1!==t.indexOf(r):t===r)for(var A=i;A<=n.length;){var a;if((a=n[++A])===e)return!0;if(a!==uu)break}if(r!==uu)break}return!1},Yu=function(t,e){for(var i=t;i>=0;){var n=e[i];if(n!==uu)return n;i--}return 0},qu=function(t,e,i,n,s){if(0===i[n])return Pu;var o=n-1;if(Array.isArray(s)&&!0===s[o])return Pu;var r=o-1,A=o+1,a=e[o],l=r>=0?e[r]:0,h=e[A];if(2===a&&3===h)return Pu;if(-1!==Hu.indexOf(a))return"!";if(-1!==Hu.indexOf(h))return Pu;if(-1!==Gu.indexOf(h))return Pu;if(8===Yu(o,e))return Du;if(11===Ou.get(t[o]))return Pu;if((a===Fu||a===Su)&&11===Ou.get(t[A]))return Pu;if(7===a||7===h)return Pu;if(9===a)return Pu;if(-1===[uu,du,gu].indexOf(a)&&9===h)return Pu;if(-1!==[pu,fu,mu,wu,xu].indexOf(h))return Pu;if(Yu(o,e)===Bu)return Pu;if(Xu(23,Bu,o,e))return Pu;if(Xu([pu,fu],_u,o,e))return Pu;if(Xu(12,12,o,e))return Pu;if(a===uu)return Du;if(23===a||23===h)return Pu;if(16===h||16===a)return Du;if(-1!==[du,gu,_u].indexOf(h)||14===a)return Pu;if(36===l&&-1!==zu.indexOf(a))return Pu;if(a===xu&&36===h)return Pu;if(h===yu)return Pu;if(-1!==Nu.indexOf(h)&&a===Cu||-1!==Nu.indexOf(a)&&h===Cu)return Pu;if(a===vu&&-1!==[Lu,Fu,Su].indexOf(h)||-1!==[Lu,Fu,Su].indexOf(a)&&h===bu)return Pu;if(-1!==Nu.indexOf(a)&&-1!==Ku.indexOf(h)||-1!==Ku.indexOf(a)&&-1!==Nu.indexOf(h))return Pu;if(-1!==[vu,bu].indexOf(a)&&(h===Cu||-1!==[Bu,gu].indexOf(h)&&e[A+1]===Cu)||-1!==[Bu,gu].indexOf(a)&&h===Cu||a===Cu&&-1!==[Cu,xu,wu].indexOf(h))return Pu;if(-1!==[Cu,xu,wu,pu,fu].indexOf(h))for(var c=o;c>=0;){if((u=e[c])===Cu)return Pu;if(-1===[xu,wu].indexOf(u))break;c--}if(-1!==[vu,bu].indexOf(h))for(c=-1!==[pu,fu].indexOf(a)?r:o;c>=0;){var u;if((u=e[c])===Cu)return Pu;if(-1===[xu,wu].indexOf(u))break;c--}if(Uu===a&&-1!==[Uu,Qu,Iu,Mu].indexOf(h)||-1!==[Qu,Iu].indexOf(a)&&-1!==[Qu,Tu].indexOf(h)||-1!==[Tu,Mu].indexOf(a)&&h===Tu)return Pu;if(-1!==Wu.indexOf(a)&&-1!==[yu,bu].indexOf(h)||-1!==Wu.indexOf(h)&&a===vu)return Pu;if(-1!==Nu.indexOf(a)&&-1!==Nu.indexOf(h))return Pu;if(a===wu&&-1!==Nu.indexOf(h))return Pu;if(-1!==Nu.concat(Cu).indexOf(a)&&h===Bu&&-1===Ru.indexOf(t[A])||-1!==Nu.concat(Cu).indexOf(h)&&a===fu)return Pu;if(41===a&&41===h){for(var d=i[o],g=1;d>0&&41===e[--d];)g++;if(g%2!=0)return Pu}return a===Fu&&h===Su?Pu:Du},ju=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=function(t,e){void 0===e&&(e="strict");var i=[],n=[],s=[];return t.forEach((function(t,o){var r=Ou.get(t);if(r>50?(s.push(!0),r-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return n.push(o),i.push(16);if(4===r||11===r){if(0===o)return n.push(o),i.push(Eu);var A=i[o-1];return-1===Vu.indexOf(A)?(n.push(n[o-1]),i.push(A)):(n.push(o),i.push(Eu))}return n.push(o),31===r?i.push("strict"===e?_u:Lu):r===ku||29===r?i.push(Eu):43===r?t>=131072&&t<=196605||t>=196608&&t<=262141?i.push(Lu):i.push(Eu):void i.push(r)})),[n,i,s]}(t,e.lineBreak),n=i[0],s=i[1],o=i[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(s=s.map((function(t){return-1!==[Cu,Eu,ku].indexOf(t)?Lu:t})));var r="keep-all"===e.wordBreak?o.map((function(e,i){return e&&t[i]>=19968&&t[i]<=40959})):void 0;return[n,s,r]},Ju=function(){function t(t,e,i,n){this.codePoints=t,this.required="!"===e,this.start=i,this.end=n}return t.prototype.slice=function(){return tu.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Zu=45,$u=43,td=-1,ed=function(t){return t>=48&&t<=57},id=function(t){return ed(t)||t>=65&&t<=70||t>=97&&t<=102},nd=function(t){return 10===t||9===t||32===t},sd=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},od=function(t){return sd(t)||ed(t)||t===Zu},rd=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},Ad=function(t,e){return 92===t&&10!==e},ad=function(t,e,i){return t===Zu?sd(e)||Ad(e,i):!!sd(t)||!(92!==t||!Ad(t,e))},ld=function(t,e,i){return t===$u||t===Zu?!!ed(e)||46===e&&ed(i):ed(46===t?e:t)},hd=function(t){var e=0,i=1;t[e]!==$u&&t[e]!==Zu||(t[e]===Zu&&(i=-1),e++);for(var n=[];ed(t[e]);)n.push(t[e++]);var s=n.length?parseInt(tu.apply(void 0,n),10):0;46===t[e]&&e++;for(var o=[];ed(t[e]);)o.push(t[e++]);var r=o.length,A=r?parseInt(tu.apply(void 0,o),10):0;69!==t[e]&&101!==t[e]||e++;var a=1;t[e]!==$u&&t[e]!==Zu||(t[e]===Zu&&(a=-1),e++);for(var l=[];ed(t[e]);)l.push(t[e++]);var h=l.length?parseInt(tu.apply(void 0,l),10):0;return i*(s+A*Math.pow(10,-r))*Math.pow(10,a*h)},cd={type:2},ud={type:3},dd={type:4},gd={type:13},pd={type:8},fd={type:21},md={type:9},yd={type:10},_d={type:11},Bd={type:12},wd={type:14},Cd={type:23},bd={type:1},vd={type:25},xd={type:24},Ed={type:26},Fd={type:27},Sd={type:28},Id={type:29},Md={type:31},Ld={type:32},Ud=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat($c(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Ld;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(od(e)||Ad(i,n)){var s=ad(e,i,n)?2:1;return{type:5,value:this.consumeName(),flags:s}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),gd;break;case 39:return this.consumeStringToken(39);case 40:return cd;case 41:return ud;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),wd;break;case $u:if(ld(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return dd;case Zu:var o=t,r=this.peekCodePoint(0),A=this.peekCodePoint(1);if(ld(o,r,A))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(ad(o,r,A))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(r===Zu&&62===A)return this.consumeCodePoint(),this.consumeCodePoint(),xd;break;case 46:if(ld(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var a=this.consumeCodePoint();if(42===a&&47===(a=this.consumeCodePoint()))return this.consumeToken();if(a===td)return this.consumeToken()}break;case 58:return Ed;case 59:return Fd;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===Zu&&this.peekCodePoint(2)===Zu)return this.consumeCodePoint(),this.consumeCodePoint(),vd;break;case 64:var l=this.peekCodePoint(0),h=this.peekCodePoint(1),c=this.peekCodePoint(2);if(ad(l,h,c))return{type:7,value:this.consumeName()};break;case 91:return Sd;case 92:if(Ad(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return Id;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),pd;break;case 123:return _d;case 125:return Bd;case 117:case 85:var u=this.peekCodePoint(0),d=this.peekCodePoint(1);return u!==$u||!id(d)&&63!==d||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),md;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),fd;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yd;break;case td:return Ld}return nd(t)?(this.consumeWhiteSpace(),Md):ed(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):sd(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:tu(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();id(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var i=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(tu.apply(void 0,t.map((function(t){return 63===t?48:t}))),16),end:parseInt(tu.apply(void 0,t.map((function(t){return 63===t?70:t}))),16)};var n=parseInt(tu.apply(void 0,t),16);if(this.peekCodePoint(0)===Zu&&id(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var s=[];id(e)&&s.length<6;)s.push(e),e=this.consumeCodePoint();return{type:30,start:n,end:parseInt(tu.apply(void 0,s),16)}}return{type:30,start:n,end:n}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===td)return{type:22,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var i=this.consumeStringToken(this.consumeCodePoint());return 0===i.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===td||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),Cd)}for(;;){var n=this.consumeCodePoint();if(n===td||41===n)return{type:22,value:tu.apply(void 0,t)};if(nd(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===td||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:tu.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Cd);if(34===n||39===n||40===n||rd(n))return this.consumeBadUrlRemnants(),Cd;if(92===n){if(!Ad(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Cd;t.push(this.consumeEscapedCodePoint())}else t.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;nd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||t===td)return;Ad(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e="";t>0;){var i=Math.min(5e4,t);e+=tu.apply(void 0,this._value.splice(0,i)),t-=i}return this._value.shift(),e},t.prototype.consumeStringToken=function(t){for(var e="",i=0;;){var n=this._value[i];if(n===td||void 0===n||n===t)return{type:0,value:e+=this.consumeStringSlice(i)};if(10===n)return this._value.splice(0,i),bd;if(92===n){var s=this._value[i+1];s!==td&&void 0!==s&&(10===s?(e+=this.consumeStringSlice(i),i=-1,this._value.shift()):Ad(n,s)&&(e+=this.consumeStringSlice(i),e+=tu(this.consumeEscapedCodePoint()),i=-1))}i++}},t.prototype.consumeNumber=function(){var t=[],e=4,i=this.peekCodePoint(0);for(i!==$u&&i!==Zu||t.push(this.consumeCodePoint());ed(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===i&&ed(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;ed(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((69===i||101===i)&&((n===$u||n===Zu)&&ed(s)||ed(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;ed(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[hd(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],i=t[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),o=this.peekCodePoint(2);return ad(n,s,o)?{type:15,number:e,flags:i,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:e,flags:i}):{type:17,number:e,flags:i}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(id(t)){for(var e=tu(t);id(this.peekCodePoint(0))&&e.length<6;)e+=tu(this.consumeCodePoint());nd(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(e,16);return 0===i||function(t){return t>=55296&&t<=57343}(i)||i>1114111?65533:i}return t===td?65533:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(od(e))t+=tu(e);else{if(!Ad(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=tu(this.consumeEscapedCodePoint())}}},t}(),Qd=function(){function t(t){this._tokens=t}return t.create=function(e){var i=new Ud;return i.write(e),new t(i.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},i=this.consumeToken();;){if(32===i.type||Gd(i,t))return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue()),i=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?Ld:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),Td=function(t){return 15===t.type},kd=function(t){return 17===t.type},Rd=function(t){return 20===t.type},Pd=function(t){return 0===t.type},Dd=function(t,e){return Rd(t)&&t.value===e},Od=function(t){return 31!==t.type},Nd=function(t){return 31!==t.type&&4!==t.type},Hd=function(t){var e=[],i=[];return t.forEach((function(t){if(4===t.type){if(0===i.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(i),void(i=[])}31!==t.type&&i.push(t)})),i.length&&e.push(i),e},Gd=function(t,e){return 11===e&&12===t.type||(28===e&&29===t.type||2===e&&3===t.type)},Kd=function(t){return 17===t.type||15===t.type},Vd=function(t){return 16===t.type||Kd(t)},Wd=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},zd={type:17,number:0,flags:4},Xd={type:16,number:50,flags:4},Yd={type:16,number:100,flags:4},qd=function(t,e,i){var n=t[0],s=t[1];return[jd(n,e),jd(void 0!==s?s:n,i)]},jd=function(t,e){if(16===t.type)return t.number/100*e;if(Td(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},Jd="grad",Zd="turn",$d=function(t,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case Jd:return Math.PI/200*e.number;case"rad":return e.number;case Zd:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},tg=function(t){return 15===t.type&&("deg"===t.unit||t.unit===Jd||"rad"===t.unit||t.unit===Zd)},eg=function(t){switch(t.filter(Rd).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zd,zd];case"to top":case"bottom":return ig(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zd,Yd];case"to right":case"left":return ig(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Yd,Yd];case"to bottom":case"top":return ig(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Yd,zd];case"to left":case"right":return ig(270)}return 0},ig=function(t){return Math.PI*t/180},ng=function(t,e){if(18===e.type){var i=cg[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(t,e.values)}if(5===e.type){if(3===e.value.length){var n=e.value.substring(0,1),s=e.value.substring(1,2),o=e.value.substring(2,3);return rg(parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16),1)}if(4===e.value.length){n=e.value.substring(0,1),s=e.value.substring(1,2),o=e.value.substring(2,3);var r=e.value.substring(3,4);return rg(parseInt(n+n,16),parseInt(s+s,16),parseInt(o+o,16),parseInt(r+r,16)/255)}if(6===e.value.length){n=e.value.substring(0,2),s=e.value.substring(2,4),o=e.value.substring(4,6);return rg(parseInt(n,16),parseInt(s,16),parseInt(o,16),1)}if(8===e.value.length){n=e.value.substring(0,2),s=e.value.substring(2,4),o=e.value.substring(4,6),r=e.value.substring(6,8);return rg(parseInt(n,16),parseInt(s,16),parseInt(o,16),parseInt(r,16)/255)}}if(20===e.type){var A=dg[e.value.toUpperCase()];if(void 0!==A)return A}return dg.TRANSPARENT},sg=function(t){return 0==(255&t)},og=function(t){var e=255&t,i=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+i+","+e/255+")":"rgb("+s+","+n+","+i+")"},rg=function(t,e,i,n){return(t<<24|e<<16|i<<8|Math.round(255*n)<<0)>>>0},Ag=function(t,e){if(17===t.type)return t.number;if(16===t.type){var i=3===e?1:255;return 3===e?t.number/100*i:Math.round(t.number/100*i)}return 0},ag=function(t,e){var i=e.filter(Nd);if(3===i.length){var n=i.map(Ag),s=n[0],o=n[1],r=n[2];return rg(s,o,r,1)}if(4===i.length){var A=i.map(Ag),a=(s=A[0],o=A[1],r=A[2],A[3]);return rg(s,o,r,a)}return 0};function lg(t,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-t)*i*6+t:i<.5?e:i<2/3?6*(e-t)*(2/3-i)+t:t}var hg=function(t,e){var i=e.filter(Nd),n=i[0],s=i[1],o=i[2],r=i[3],A=(17===n.type?ig(n.number):$d(t,n))/(2*Math.PI),a=Vd(s)?s.number/100:0,l=Vd(o)?o.number/100:0,h=void 0!==r&&Vd(r)?jd(r,1):1;if(0===a)return rg(255*l,255*l,255*l,1);var c=l<=.5?l*(a+1):l+a-l*a,u=2*l-c,d=lg(u,c,A+1/3),g=lg(u,c,A),p=lg(u,c,A-1/3);return rg(255*d,255*g,255*p,h)},cg={hsl:hg,hsla:hg,rgb:ag,rgba:ag},ug=function(t,e){return ng(t,Qd.create(e).parseComponentValue())},dg={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},gg={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Rd(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},pg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fg=function(t,e){var i=ng(t,e[0]),n=e[1];return n&&Vd(n)?{color:i,stop:n}:{color:i,stop:null}},mg=function(t,e){var i=t[0],n=t[t.length-1];null===i.stop&&(i.stop=zd),null===n.stop&&(n.stop=Yd);for(var s=[],o=0,r=0;r<t.length;r++){var A=t[r].stop;if(null!==A){var a=jd(A,e);a>o?s.push(a):s.push(o),o=a}else s.push(null)}var l=null;for(r=0;r<s.length;r++){var h=s[r];if(null===h)null===l&&(l=r);else if(null!==l){for(var c=r-l,u=(h-s[l-1])/(c+1),d=1;d<=c;d++)s[l+d-1]=u*d;l=null}}return t.map((function(t,i){return{color:t.color,stop:Math.max(Math.min(1,s[i]/e),0)}}))},yg=function(t,e,i){var n="number"==typeof t?t:function(t,e,i){var n=e/2,s=i/2,o=jd(t[0],e)-n,r=s-jd(t[1],i);return(Math.atan2(r,o)+2*Math.PI)%(2*Math.PI)}(t,e,i),s=Math.abs(e*Math.sin(n))+Math.abs(i*Math.cos(n)),o=e/2,r=i/2,A=s/2,a=Math.sin(n-Math.PI/2)*A,l=Math.cos(n-Math.PI/2)*A;return[s,o-l,o+l,r-a,r+a]},_g=function(t,e){return Math.sqrt(t*t+e*e)},Bg=function(t,e,i,n,s){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var o=e[0],r=e[1],A=_g(i-o,n-r);return(s?A<t.optimumDistance:A>t.optimumDistance)?{optimumCorner:e,optimumDistance:A}:t}),{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},wg=function(t,e){var i=ig(180),n=[];return Hd(e).forEach((function(e,s){if(0===s){var o=e[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(i=eg(e));if(tg(o))return void(i=($d(t,o)+ig(270))%ig(360))}var r=fg(t,e);n.push(r)})),{angle:i,stops:n,type:1}},Cg="closest-side",bg="farthest-side",vg="closest-corner",xg="farthest-corner",Eg="circle",Fg="ellipse",Sg="cover",Ig="contain",Mg=function(t,e){var i=0,n=3,s=[],o=[];return Hd(e).forEach((function(e,r){var A=!0;if(0===r?A=e.reduce((function(t,e){if(Rd(e))switch(e.value){case"center":return o.push(Xd),!1;case"top":case"left":return o.push(zd),!1;case"right":case"bottom":return o.push(Yd),!1}else if(Vd(e)||Kd(e))return o.push(e),!1;return t}),A):1===r&&(A=e.reduce((function(t,e){if(Rd(e))switch(e.value){case Eg:return i=0,!1;case Fg:return i=1,!1;case Ig:case Cg:return n=0,!1;case bg:return n=1,!1;case vg:return n=2,!1;case Sg:case xg:return n=3,!1}else if(Kd(e)||Vd(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return t}),A)),A){var a=fg(t,e);s.push(a)}})),{size:n,shape:i,stops:s,position:o,type:2}},Lg=function(t,e){if(22===e.type){var i={url:e.value,type:0};return t.cache.addImage(e.value),i}if(18===e.type){var n=Qg[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)};var Ug,Qg={"linear-gradient":function(t,e){var i=ig(180),n=[];return Hd(e).forEach((function(e,s){if(0===s){var o=e[0];if(20===o.type&&"to"===o.value)return void(i=eg(e));if(tg(o))return void(i=$d(t,o))}var r=fg(t,e);n.push(r)})),{angle:i,stops:n,type:1}},"-moz-linear-gradient":wg,"-ms-linear-gradient":wg,"-o-linear-gradient":wg,"-webkit-linear-gradient":wg,"radial-gradient":function(t,e){var i=0,n=3,s=[],o=[];return Hd(e).forEach((function(e,r){var A=!0;if(0===r){var a=!1;A=e.reduce((function(t,e){if(a)if(Rd(e))switch(e.value){case"center":return o.push(Xd),t;case"top":case"left":return o.push(zd),t;case"right":case"bottom":return o.push(Yd),t}else(Vd(e)||Kd(e))&&o.push(e);else if(Rd(e))switch(e.value){case Eg:return i=0,!1;case Fg:return i=1,!1;case"at":return a=!0,!1;case Cg:return n=0,!1;case Sg:case bg:return n=1,!1;case Ig:case vg:return n=2,!1;case xg:return n=3,!1}else if(Kd(e)||Vd(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return t}),A)}if(A){var l=fg(t,e);s.push(l)}})),{size:n,shape:i,stops:s,position:o,type:2}},"-moz-radial-gradient":Mg,"-ms-radial-gradient":Mg,"-o-radial-gradient":Mg,"-webkit-radial-gradient":Mg,"-webkit-gradient":function(t,e){var i=ig(180),n=[],s=1;return Hd(e).forEach((function(e,i){var o=e[0];if(0===i){if(Rd(o)&&"linear"===o.value)return void(s=1);if(Rd(o)&&"radial"===o.value)return void(s=2)}if(18===o.type)if("from"===o.name){var r=ng(t,o.values[0]);n.push({stop:zd,color:r})}else if("to"===o.name){r=ng(t,o.values[0]);n.push({stop:Yd,color:r})}else if("color-stop"===o.name){var A=o.values.filter(Nd);if(2===A.length){r=ng(t,A[1]);var a=A[0];kd(a)&&n.push({stop:{type:16,number:100*a.number,flags:a.flags},color:r})}}})),1===s?{angle:(i+ig(180))%ig(360),stops:n,type:s}:{size:3,shape:0,stops:n,position:[],type:s}}},Tg={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var i=e[0];return 20===i.type&&"none"===i.value?[]:e.filter((function(t){return Nd(t)&&function(t){return!(20===t.type&&"none"===t.value||18===t.type&&!Qg[t.name])}(t)})).map((function(e){return Lg(t,e)}))}},kg={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Rd(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Rg={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Hd(e).map((function(t){return t.filter(Vd)})).map(Wd)}},Pg={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Hd(e).map((function(t){return t.filter(Rd).map((function(t){return t.value})).join(" ")})).map(Dg)}},Dg=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(Ug||(Ug={}));var Og,Ng={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Hd(e).map((function(t){return t.filter(Hg)}))}},Hg=function(t){return Rd(t)||Vd(t)},Gg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Kg=Gg("top"),Vg=Gg("right"),Wg=Gg("bottom"),zg=Gg("left"),Xg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return Wd(e.filter(Vd))}}},Yg=Xg("top-left"),qg=Xg("top-right"),jg=Xg("bottom-right"),Jg=Xg("bottom-left"),Zg=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},$g=Zg("top"),tp=Zg("right"),ep=Zg("bottom"),ip=Zg("left"),np=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Td(e)?e.number:0}}},sp=np("top"),op=np("right"),rp=np("bottom"),Ap=np("left"),ap={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lp={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"===e?1:0}},hp={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Rd).reduce((function(t,e){return t|cp(e.value)}),0)}},cp=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},up={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},dp={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(Og||(Og={}));var gp,pp={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"strict"===e?Og.STRICT:Og.NORMAL}},fp={name:"line-height",initialValue:"normal",prefix:!1,type:4},mp=function(t,e){return Rd(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:Vd(t)?jd(t,e):e},yp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:Lg(t,e)}},_p={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"===e?0:1}},Bp={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},wp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Cp=wp("top"),bp=wp("right"),vp=wp("bottom"),xp=wp("left"),Ep={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Rd).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Fp={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"===e?"break-word":"normal"}},Sp=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Ip=Sp("top"),Mp=Sp("right"),Lp=Sp("bottom"),Up=Sp("left"),Qp={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Tp={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},kp={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&Dd(e[0],"none")?[]:Hd(e).map((function(e){for(var i={color:dg.TRANSPARENT,offsetX:zd,offsetY:zd,blur:zd},n=0,s=0;s<e.length;s++){var o=e[s];Kd(o)?(0===n?i.offsetX=o:1===n?i.offsetY=o:i.blur=o,n++):i.color=ng(t,o)}return i}))}},Rp={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Pp={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var i=Dp[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},Dp={matrix:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},matrix3d:function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),i=e[0],n=e[1];e[2],e[3];var s=e[4],o=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var r=e[12],A=e[13];return e[14],e[15],16===e.length?[i,n,s,o,r,A]:null}},Op={type:16,number:50,flags:4},Np=[Op,Op],Hp={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var i=e.filter(Vd);return 2!==i.length?Np:[i[0],i[1]]}},Gp={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(gp||(gp={}));for(var Kp={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return gp.BREAK_ALL;case"keep-all":return gp.KEEP_ALL;default:return gp.NORMAL}}},Vp={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(kd(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Wp=function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},zp={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return kd(e)?e.number:1}},Xp={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Yp={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Rd).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},qp={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var i=[],n=[];return e.forEach((function(t){switch(t.type){case 20:case 0:i.push(t.value);break;case 17:i.push(t.number.toString());break;case 4:n.push(i.join(" ")),i.length=0}})),i.length&&n.push(i.join(" ")),n.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},jp={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Jp={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return kd(e)?e.number:Rd(e)&&"bold"===e.value?700:400}},Zp={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Rd).map((function(t){return t.value}))}},$p={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},tf=function(t,e){return 0!=(t&e)},ef={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var i=e[0];return 20===i.type&&"none"===i.value?[]:e}},nf={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;for(var n=[],s=e.filter(Od),o=0;o<s.length;o++){var r=s[o],A=s[o+1];if(20===r.type){var a=A&&kd(A)?A.number:1;n.push({counter:r.value,increment:a})}}return n}},sf={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var i=[],n=e.filter(Od),s=0;s<n.length;s++){var o=n[s],r=n[s+1];if(Rd(o)&&"none"!==o.value){var A=r&&kd(r)?r.number:0;i.push({counter:o.value,reset:A})}}return i}},of={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Td).map((function(e){return Wp(t,e)}))}},rf={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;var n=[],s=e.filter(Pd);if(s.length%2!=0)return null;for(var o=0;o<s.length;o+=2){var r=s[o].value,A=s[o+1].value;n.push({open:r,close:A})}return n}},Af=function(t,e,i){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?i?n.open:n.close:""},af={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&Dd(e[0],"none")?[]:Hd(e).map((function(e){for(var i={color:255,offsetX:zd,offsetY:zd,blur:zd,spread:zd,inset:!1},n=0,s=0;s<e.length;s++){var o=e[s];Dd(o,"inset")?i.inset=!0:Kd(o)?(0===n?i.offsetX=o:1===n?i.offsetY=o:2===n?i.blur=o:i.spread=o,n++):i.color=ng(t,o)}return i}))}},lf={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var i=[];return e.filter(Rd).forEach((function(t){switch(t.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2)}})),[0,1,2].forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),i}},hf={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},cf={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Td(e)?e.number:0}},uf=function(){function t(t,e){var i,n;this.animationDuration=pf(t,of,e.animationDuration),this.backgroundClip=pf(t,gg,e.backgroundClip),this.backgroundColor=pf(t,pg,e.backgroundColor),this.backgroundImage=pf(t,Tg,e.backgroundImage),this.backgroundOrigin=pf(t,kg,e.backgroundOrigin),this.backgroundPosition=pf(t,Rg,e.backgroundPosition),this.backgroundRepeat=pf(t,Pg,e.backgroundRepeat),this.backgroundSize=pf(t,Ng,e.backgroundSize),this.borderTopColor=pf(t,Kg,e.borderTopColor),this.borderRightColor=pf(t,Vg,e.borderRightColor),this.borderBottomColor=pf(t,Wg,e.borderBottomColor),this.borderLeftColor=pf(t,zg,e.borderLeftColor),this.borderTopLeftRadius=pf(t,Yg,e.borderTopLeftRadius),this.borderTopRightRadius=pf(t,qg,e.borderTopRightRadius),this.borderBottomRightRadius=pf(t,jg,e.borderBottomRightRadius),this.borderBottomLeftRadius=pf(t,Jg,e.borderBottomLeftRadius),this.borderTopStyle=pf(t,$g,e.borderTopStyle),this.borderRightStyle=pf(t,tp,e.borderRightStyle),this.borderBottomStyle=pf(t,ep,e.borderBottomStyle),this.borderLeftStyle=pf(t,ip,e.borderLeftStyle),this.borderTopWidth=pf(t,sp,e.borderTopWidth),this.borderRightWidth=pf(t,op,e.borderRightWidth),this.borderBottomWidth=pf(t,rp,e.borderBottomWidth),this.borderLeftWidth=pf(t,Ap,e.borderLeftWidth),this.boxShadow=pf(t,af,e.boxShadow),this.color=pf(t,ap,e.color),this.direction=pf(t,lp,e.direction),this.display=pf(t,hp,e.display),this.float=pf(t,up,e.cssFloat),this.fontFamily=pf(t,qp,e.fontFamily),this.fontSize=pf(t,jp,e.fontSize),this.fontStyle=pf(t,$p,e.fontStyle),this.fontVariant=pf(t,Zp,e.fontVariant),this.fontWeight=pf(t,Jp,e.fontWeight),this.letterSpacing=pf(t,dp,e.letterSpacing),this.lineBreak=pf(t,pp,e.lineBreak),this.lineHeight=pf(t,fp,e.lineHeight),this.listStyleImage=pf(t,yp,e.listStyleImage),this.listStylePosition=pf(t,_p,e.listStylePosition),this.listStyleType=pf(t,Bp,e.listStyleType),this.marginTop=pf(t,Cp,e.marginTop),this.marginRight=pf(t,bp,e.marginRight),this.marginBottom=pf(t,vp,e.marginBottom),this.marginLeft=pf(t,xp,e.marginLeft),this.opacity=pf(t,zp,e.opacity);var s=pf(t,Ep,e.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=pf(t,Fp,e.overflowWrap),this.paddingTop=pf(t,Ip,e.paddingTop),this.paddingRight=pf(t,Mp,e.paddingRight),this.paddingBottom=pf(t,Lp,e.paddingBottom),this.paddingLeft=pf(t,Up,e.paddingLeft),this.paintOrder=pf(t,lf,e.paintOrder),this.position=pf(t,Tp,e.position),this.textAlign=pf(t,Qp,e.textAlign),this.textDecorationColor=pf(t,Xp,null!==(i=e.textDecorationColor)&&void 0!==i?i:e.color),this.textDecorationLine=pf(t,Yp,null!==(n=e.textDecorationLine)&&void 0!==n?n:e.textDecoration),this.textShadow=pf(t,kp,e.textShadow),this.textTransform=pf(t,Rp,e.textTransform),this.transform=pf(t,Pp,e.transform),this.transformOrigin=pf(t,Hp,e.transformOrigin),this.visibility=pf(t,Gp,e.visibility),this.webkitTextStrokeColor=pf(t,hf,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=pf(t,cf,e.webkitTextStrokeWidth),this.wordBreak=pf(t,Kp,e.wordBreak),this.zIndex=pf(t,Vp,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return sg(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return tf(this.display,4)||tf(this.display,33554432)||tf(this.display,268435456)||tf(this.display,536870912)||tf(this.display,67108864)||tf(this.display,134217728)},t}(),df=function(t,e){this.content=pf(t,ef,e.content),this.quotes=pf(t,rf,e.quotes)},gf=function(t,e){this.counterIncrement=pf(t,nf,e.counterIncrement),this.counterReset=pf(t,sf,e.counterReset)},pf=function(t,e,i){var n=new Ud,s=null!=i?i.toString():e.initialValue;n.write(s);var o=new Qd(n.read());switch(e.type){case 2:var r=o.parseComponentValue();return e.parse(t,Rd(r)?r.value:e.initialValue);case 0:return e.parse(t,o.parseComponentValue());case 1:return e.parse(t,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(e.format){case"angle":return $d(t,o.parseComponentValue());case"color":return ng(t,o.parseComponentValue());case"image":return Lg(t,o.parseComponentValue());case"length":var A=o.parseComponentValue();return Kd(A)?A:zd;case"length-percentage":var a=o.parseComponentValue();return Vd(a)?a:zd;case"time":return Wp(t,o.parseComponentValue())}}},ff=function(t,e){var i=function(t){switch(t.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(t);return 1===i||e===i},mf=function(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,ff(e,3),this.styles=new uf(t,window.getComputedStyle(e,null)),wm(e)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=Zc(this.context,e),ff(e,4)&&(this.flags|=16)},yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_f="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Bf=0;Bf<yf.length;Bf++)_f[yf.charCodeAt(Bf)]=Bf;for(var wf=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},Cf=function(){function t(t,e,i,n,s,o){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vf="undefined"==typeof Uint8Array?[]:new Uint8Array(256),xf=0;xf<bf.length;xf++)vf[bf.charCodeAt(xf)]=xf;var Ef,Ff=8,Sf=9,If=11,Mf=12,Lf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],s=-1,o="";++s<i;){var r=t[s];r<=65535?n.push(r):(r-=65536,n.push(55296+(r>>10),r%1024+56320)),(s+1===i||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},Uf=function(t,e){var i=function(t){var e,i,n,s,o,r=.75*t.length,A=t.length,a=0;"="===t[t.length-1]&&(r--,"="===t[t.length-2]&&r--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(r):new Array(r),h=Array.isArray(l)?l:new Uint8Array(l);for(e=0;e<A;e+=4)i=_f[t.charCodeAt(e)],n=_f[t.charCodeAt(e+1)],s=_f[t.charCodeAt(e+2)],o=_f[t.charCodeAt(e+3)],h[a++]=i<<2|n>>4,h[a++]=(15&n)<<4|s>>2,h[a++]=(3&s)<<6|63&o;return l}(t),n=Array.isArray(i)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i}(i):new Uint32Array(i),s=Array.isArray(i)?function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i}(i):new Uint16Array(i),o=wf(s,12,n[4]/2),r=2===n[5]?wf(s,(24+n[4])/2):function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))}(n,Math.ceil((24+n[4])/4));return new Cf(n[0],n[1],n[2],n[3],o,r)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Qf="×",Tf=function(t){return Uf.get(t)},kf=function(t,e,i){var n=i-2,s=e[n],o=e[i-1],r=e[i];if(2===o&&3===r)return Qf;if(2===o||3===o||4===o)return"÷";if(2===r||3===r||4===r)return"÷";if(o===Ff&&-1!==[Ff,Sf,If,Mf].indexOf(r))return Qf;if(!(o!==If&&o!==Sf||r!==Sf&&10!==r))return Qf;if((o===Mf||10===o)&&10===r)return Qf;if(13===r||5===r)return Qf;if(7===r)return Qf;if(1===o)return Qf;if(13===o&&14===r){for(;5===s;)s=e[--n];if(14===s)return Qf}if(15===o&&15===r){for(var A=0;15===s;)A++,s=e[--n];if(A%2==0)return Qf}return"÷"},Rf=function(t){var e=function(t){for(var e=[],i=0,n=t.length;i<n;){var s=t.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&s)<<10)+(1023&o)+65536):(e.push(s),i--)}else e.push(s)}return e}(t),i=e.length,n=0,s=0,o=e.map(Tf);return{next:function(){if(n>=i)return{done:!0,value:null};for(var t=Qf;n<i&&(t=kf(0,o,++n))===Qf;);if(t!==Qf||n===i){var r=Lf.apply(null,e.slice(s,n));return s=n,{value:r,done:!1}}return{done:!0,value:null}}}},Pf=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Df=function(t,e,i,n,s){var o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),A=document.createElementNS(o,"foreignObject");return r.setAttributeNS(null,"width",t.toString()),r.setAttributeNS(null,"height",e.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",i.toString()),A.setAttributeNS(null,"y",n.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),r.appendChild(A),A.appendChild(s),r},Of=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Nf={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var i=t.createElement("boundtest");i.style.height="123px",i.style.display="block",t.body.appendChild(i),e.selectNode(i);var n=e.getBoundingClientRect(),s=Math.round(n.height);if(t.body.removeChild(i),123===s)return!0}}return!1}(document);return Object.defineProperty(Nf,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Nf.SUPPORT_RANGE_BOUNDS&&function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var i=t.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=e.firstChild,s=$c(n.data).map((function(t){return tu(t)})),o=0,r={},A=s.every((function(t,e){i.setStart(n,o),i.setEnd(n,o+t.length);var s=i.getBoundingClientRect();o+=t.length;var A=s.x>r.x||s.y>r.y;return r=s,0===e||A}));return t.body.removeChild(e),A}(document);return Object.defineProperty(Nf,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,i=t.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),i.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(Nf,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),i=100;e.width=i,e.height=i;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var s=new Image,o=e.toDataURL();s.src=o;var r=Df(i,i,0,0,s);return n.fillStyle="red",n.fillRect(0,0,i,i),Of(r).then((function(e){n.drawImage(e,0,0);var s=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var r=t.createElement("div");return r.style.backgroundImage="url("+o+")",r.style.height="100px",Pf(s)?Of(Df(i,i,0,0,r)):Promise.reject(!1)})).then((function(t){return n.drawImage(t,0,0),Pf(n.getImageData(0,0,i,i).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Nf,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(Nf,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Nf,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Nf,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Nf,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Hf=function(t,e){this.text=t,this.bounds=e},Gf=function(t,e){var i=e.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var o=Zc(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),o}}return Jc.EMPTY},Kf=function(t,e,i){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+i),s},Vf=function(t){if(Nf.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return function(t){for(var e,i=Rf(t),n=[];!(e=i.next()).done;)e.value&&n.push(e.value.slice());return n}(t)},Wf=function(t,e){return 0!==e.letterSpacing?Vf(t):function(t,e){if(Nf.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(t)).map((function(t){return t.segment}))}return Xf(t,e)}(t,e)},zf=[32,160,4961,65792,65793,4153,4241],Xf=function(t,e){for(var i,n=function(t,e){var i=$c(t),n=ju(i,e),s=n[0],o=n[1],r=n[2],A=i.length,a=0,l=0;return{next:function(){if(l>=A)return{done:!0,value:null};for(var t=Pu;l<A&&(t=qu(i,o,s,++l,r))===Pu;);if(t!==Pu||l===A){var e=new Ju(i,t,a,l);return a=l,{value:e,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),s=[],o=function(){if(i.value){var t=i.value.slice(),e=$c(t),n="";e.forEach((function(t){-1===zf.indexOf(t)?n+=tu(t):(n.length&&s.push(n),s.push(tu(t)),n="")})),n.length&&s.push(n)}};!(i=n.next()).done;)o();return s},Yf=function(t,e,i){this.text=qf(e.data,i.textTransform),this.textBounds=function(t,e,i,n){var s=Wf(e,i),o=[],r=0;return s.forEach((function(e){if(i.textDecorationLine.length||e.trim().length>0)if(Nf.SUPPORT_RANGE_BOUNDS){var s=Kf(n,r,e.length).getClientRects();if(s.length>1){var A=Vf(e),a=0;A.forEach((function(e){o.push(new Hf(e,Jc.fromDOMRectList(t,Kf(n,a+r,e.length).getClientRects()))),a+=e.length}))}else o.push(new Hf(e,Jc.fromDOMRectList(t,s)))}else{var l=n.splitText(e.length);o.push(new Hf(e,Gf(t,n))),n=l}else Nf.SUPPORT_RANGE_BOUNDS||(n=n.splitText(e.length));r+=e.length})),o}(t,this.text,i,e)},qf=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(jf,Jf);case 2:return t.toUpperCase();default:return t}},jf=/(^|\s|:|-|\(|\))([a-z])/g,Jf=function(t,e,i){return t.length>0?e+i.toUpperCase():t},Zf=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return zc(e,t),e}(mf),$f=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return zc(e,t),e}(mf),tm=function(t){function e(e,i){var n=t.call(this,e,i)||this,s=new XMLSerializer,o=Zc(e,i);return i.setAttribute("width",o.width+"px"),i.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return zc(e,t),e}(mf),em=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.value=i.value,n}return zc(e,t),e}(mf),im=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.start=i.start,n.reversed="boolean"==typeof i.reversed&&!0===i.reversed,n}return zc(e,t),e}(mf),nm=[{type:15,flags:0,unit:"px",number:3}],sm=[{type:16,flags:0,number:50}],om="checkbox",rm="radio",Am="password",am=707406591,lm=function(t){function e(e,i){var n,s,o,r=t.call(this,e,i)||this;switch(r.type=i.type.toLowerCase(),r.checked=i.checked,r.value=0===(s=(n=i).type===Am?new Array(n.value.length+1).join("•"):n.value).length?n.placeholder||"":s,r.type!==om&&r.type!==rm||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=(o=r.bounds).width>o.height?new Jc(o.left+(o.width-o.height)/2,o.top,o.height,o.height):o.width<o.height?new Jc(o.left,o.top+(o.height-o.width)/2,o.width,o.width):o),r.type){case om:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=nm;break;case rm:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=sm}return r}return zc(e,t),e}(mf),hm=function(t){function e(e,i){var n=t.call(this,e,i)||this,s=i.options[i.selectedIndex||0];return n.value=s&&s.text||"",n}return zc(e,t),e}(mf),cm=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.value=i.value,n}return zc(e,t),e}(mf),um=function(t){function e(e,i){var n=t.call(this,e,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=fm(e,i.contentWindow.document.documentElement);var s=i.contentWindow.document.documentElement?ug(e,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):dg.TRANSPARENT,o=i.contentWindow.document.body?ug(e,getComputedStyle(i.contentWindow.document.body).backgroundColor):dg.TRANSPARENT;n.backgroundColor=sg(s)?sg(o)?n.styles.backgroundColor:o:s}}catch(t){}return n}return zc(e,t),e}(mf),dm=["OL","UL","MENU"],gm=function(t,e,i,n){for(var s=e.firstChild,o=void 0;s;s=o)if(o=s.nextSibling,_m(s)&&s.data.trim().length>0)i.textNodes.push(new Yf(t,s,i.styles));else if(Bm(s))if(km(s)&&s.assignedNodes)s.assignedNodes().forEach((function(e){return gm(t,e,i,n)}));else{var r=pm(t,s);r.styles.isVisible()&&(mm(s,r,n)?r.flags|=4:ym(r.styles)&&(r.flags|=2),-1!==dm.indexOf(s.tagName)&&(r.flags|=8),i.elements.push(r),s.slot,s.shadowRoot?gm(t,s.shadowRoot,r,n):Qm(s)||Em(s)||Tm(s)||gm(t,s,r,n))}},pm=function(t,e){return Mm(e)?new Zf(t,e):Sm(e)?new $f(t,e):Em(e)?new tm(t,e):bm(e)?new em(t,e):vm(e)?new im(t,e):xm(e)?new lm(t,e):Tm(e)?new hm(t,e):Qm(e)?new cm(t,e):Lm(e)?new um(t,e):new mf(t,e)},fm=function(t,e){var i=pm(t,e);return i.flags|=4,gm(t,e,i,i),i},mm=function(t,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Fm(t)&&i.styles.isTransparent()},ym=function(t){return t.isPositioned()||t.isFloating()},_m=function(t){return t.nodeType===Node.TEXT_NODE},Bm=function(t){return t.nodeType===Node.ELEMENT_NODE},wm=function(t){return Bm(t)&&void 0!==t.style&&!Cm(t)},Cm=function(t){return"object"==typeof t.className},bm=function(t){return"LI"===t.tagName},vm=function(t){return"OL"===t.tagName},xm=function(t){return"INPUT"===t.tagName},Em=function(t){return"svg"===t.tagName},Fm=function(t){return"BODY"===t.tagName},Sm=function(t){return"CANVAS"===t.tagName},Im=function(t){return"VIDEO"===t.tagName},Mm=function(t){return"IMG"===t.tagName},Lm=function(t){return"IFRAME"===t.tagName},Um=function(t){return"STYLE"===t.tagName},Qm=function(t){return"TEXTAREA"===t.tagName},Tm=function(t){return"SELECT"===t.tagName},km=function(t){return"SLOT"===t.tagName},Rm=function(t){return t.tagName.indexOf("-")>0},Pm=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){var e=this.counters[t];return e||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,i=t.counterIncrement,n=t.counterReset,s=!0;null!==i&&i.forEach((function(t){var i=e.counters[t.counter];i&&0!==t.increment&&(s=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=t.increment)}));var o=[];return s&&n.forEach((function(t){var i=e.counters[t.counter];o.push(t.counter),i||(i=e.counters[t.counter]=[]),i.push(t.reset)})),o},t}(),Dm={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Om={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Nm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Hm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Gm=function(t,e,i,n,s,o){return t<e||t>i?Jm(t,s,o.length>0):n.integers.reduce((function(e,i,s){for(;t>=i;)t-=i,e+=n.values[s];return e}),"")+o},Km=function(t,e,i,n){var s="";do{i||t--,s=n(t)+s,t/=e}while(t*e>=e);return s},Vm=function(t,e,i,n,s){var o=i-e+1;return(t<0?"-":"")+(Km(Math.abs(t),o,n,(function(t){return tu(Math.floor(t%o)+e)}))+s)},Wm=function(t,e,i){void 0===i&&(i=". ");var n=e.length;return Km(Math.abs(t),n,!1,(function(t){return e[Math.floor(t%n)]}))+i},zm=function(t,e,i,n,s,o){if(t<-9999||t>9999)return Jm(t,4,s.length>0);var r=Math.abs(t),A=s;if(0===r)return e[0]+A;for(var a=0;r>0&&a<=4;a++){var l=r%10;0===l&&tf(o,1)&&""!==A?A=e[l]+A:l>1||1===l&&0===a||1===l&&1===a&&tf(o,2)||1===l&&1===a&&tf(o,4)&&t>100||1===l&&a>1&&tf(o,8)?A=e[l]+(a>0?i[a-1]:"")+A:1===l&&a>0&&(A=i[a-1]+A),r=Math.floor(r/10)}return(t<0?n:"")+A},Xm="十百千萬",Ym="拾佰仟萬",qm="マイナス",jm="마이너스",Jm=function(t,e,i){var n=i?". ":"",s=i?"、":"",o=i?", ":"",r=i?" ":"";switch(e){case 0:return"•"+r;case 1:return"◦"+r;case 2:return"◾"+r;case 5:var A=Vm(t,48,57,!0,n);return A.length<4?"0"+A:A;case 4:return Wm(t,"〇一二三四五六七八九",s);case 6:return Gm(t,1,3999,Dm,3,n).toLowerCase();case 7:return Gm(t,1,3999,Dm,3,n);case 8:return Vm(t,945,969,!1,n);case 9:return Vm(t,97,122,!1,n);case 10:return Vm(t,65,90,!1,n);case 11:return Vm(t,1632,1641,!0,n);case 12:case 49:return Gm(t,1,9999,Om,3,n);case 35:return Gm(t,1,9999,Om,3,n).toLowerCase();case 13:return Vm(t,2534,2543,!0,n);case 14:case 30:return Vm(t,6112,6121,!0,n);case 15:return Wm(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Wm(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return zm(t,"零一二三四五六七八九",Xm,"負",s,14);case 47:return zm(t,"零壹貳參肆伍陸柒捌玖",Ym,"負",s,15);case 42:return zm(t,"零一二三四五六七八九",Xm,"负",s,14);case 41:return zm(t,"零壹贰叁肆伍陆柒捌玖",Ym,"负",s,15);case 26:return zm(t,"〇一二三四五六七八九","十百千万",qm,s,0);case 25:return zm(t,"零壱弐参四伍六七八九","拾百千万",qm,s,7);case 31:return zm(t,"영일이삼사오육칠팔구","십백천만",jm,o,7);case 33:return zm(t,"零一二三四五六七八九","十百千萬",jm,o,0);case 32:return zm(t,"零壹貳參四五六七八九","拾百千",jm,o,7);case 18:return Vm(t,2406,2415,!0,n);case 20:return Gm(t,1,19999,Hm,3,n);case 21:return Vm(t,2790,2799,!0,n);case 22:return Vm(t,2662,2671,!0,n);case 22:return Gm(t,1,10999,Nm,3,n);case 23:return Wm(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Wm(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Vm(t,3302,3311,!0,n);case 28:return Wm(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Wm(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return Vm(t,3792,3801,!0,n);case 37:return Vm(t,6160,6169,!0,n);case 38:return Vm(t,4160,4169,!0,n);case 39:return Vm(t,2918,2927,!0,n);case 40:return Vm(t,1776,1785,!0,n);case 43:return Vm(t,3046,3055,!0,n);case 44:return Vm(t,3174,3183,!0,n);case 45:return Vm(t,3664,3673,!0,n);case 46:return Vm(t,3872,3881,!0,n);default:return Vm(t,48,57,!0,n)}},Zm="data-html2canvas-ignore",$m=function(){function t(t,e,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=e,this.counters=new Pm,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,e){var i=this,n=ey(t,e);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,r=n.contentWindow,A=r.document,a=sy(n).then((function(){return Yc(i,void 0,void 0,(function(){var t,i;return qc(this,(function(s){switch(s.label){case 0:return this.scrolledElements.forEach(ly),r&&(r.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||r.scrollY===e.top&&r.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(r.scrollX-e.left,r.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(i=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:s.sent(),s.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ny(A)]:[3,4];case 3:s.sent(),s.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(A,i)})).then((function(){return n}))]:[2,n]}}))}))}));return A.open(),A.write(Ay(document.doctype)+"<html></html>"),ay(this.referenceElement.ownerDocument,s,o),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),a},t.prototype.createElementClone=function(t){if(ff(t,2),Sm(t))return this.createCanvasClone(t);if(Im(t))return this.createVideoClone(t);if(Um(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return Mm(e)&&(Mm(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),Rm(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return ry(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var i=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),n=t.cloneNode(!1);return n.textContent=i,n}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var s=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&s)o.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var r=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(r){var A=r.getContextAttributes();!1===(null==A?void 0:A.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var i=e.getContext("2d");try{return i&&(i.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||i.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},t.prototype.appendChildNode=function(t,e,i){Bm(e)&&("SCRIPT"===e.tagName||e.hasAttribute(Zm)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&Bm(e)&&Um(e)||t.appendChild(this.cloneNode(e,i))},t.prototype.cloneChildNodes=function(t,e,i){for(var n=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Bm(s)&&km(s)&&"function"==typeof s.assignedNodes){var o=s.assignedNodes();o.length&&o.forEach((function(t){return n.appendChildNode(e,t,i)}))}else this.appendChildNode(e,s,i)},t.prototype.cloneNode=function(t,e){if(_m(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&Bm(t)&&(wm(t)||Cm(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var s=i.getComputedStyle(t),o=i.getComputedStyle(t,":before"),r=i.getComputedStyle(t,":after");this.referenceElement===t&&wm(n)&&(this.clonedReferenceElement=n),Fm(n)&&dy(n);var A=this.counters.parse(new gf(this.context,s)),a=this.resolvePseudoContent(t,n,o,Ef.BEFORE);Rm(t)&&(e=!0),Im(t)||this.cloneChildNodes(t,n,e),a&&n.insertBefore(a,n.firstChild);var l=this.resolvePseudoContent(t,n,r,Ef.AFTER);return l&&n.appendChild(l),this.counters.pop(A),(s&&(this.options.copyStyles||Cm(t))&&!Lm(t)||e)&&ry(s,n),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Qm(t)||Tm(t))&&(Qm(n)||Tm(n))&&(n.value=t.value),n}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,i,n){var s=this;if(i){var o=i.content,r=e.ownerDocument;if(r&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==i.display){this.counters.parse(new gf(this.context,i));var A=new df(this.context,i),a=r.createElement("html2canvaspseudoelement");ry(i,a),A.content.forEach((function(e){if(0===e.type)a.appendChild(r.createTextNode(e.value));else if(22===e.type){var i=r.createElement("img");i.src=e.value,i.style.opacity="1",a.appendChild(i)}else if(18===e.type){if("attr"===e.name){var n=e.values.filter(Rd);n.length&&a.appendChild(r.createTextNode(t.getAttribute(n[0].value)||""))}else if("counter"===e.name){var o=e.values.filter(Nd),l=o[0],h=o[1];if(l&&Rd(l)){var c=s.counters.getCounterValue(l.value),u=h&&Rd(h)?Bp.parse(s.context,h.value):3;a.appendChild(r.createTextNode(Jm(c,u,!1)))}}else if("counters"===e.name){var d=e.values.filter(Nd),g=(l=d[0],d[1]);h=d[2];if(l&&Rd(l)){var p=s.counters.getCounterValues(l.value),f=h&&Rd(h)?Bp.parse(s.context,h.value):3,m=g&&0===g.type?g.value:"",y=p.map((function(t){return Jm(t,f,!1)})).join(m);a.appendChild(r.createTextNode(y))}}}else if(20===e.type)switch(e.value){case"open-quote":a.appendChild(r.createTextNode(Af(A.quotes,s.quoteDepth++,!0)));break;case"close-quote":a.appendChild(r.createTextNode(Af(A.quotes,--s.quoteDepth,!1)));break;default:a.appendChild(r.createTextNode(e.value))}})),a.className=hy+" "+cy;var l=n===Ef.BEFORE?" "+hy:" "+cy;return Cm(e)?e.className.baseValue+=l:e.className+=l,a}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(Ef||(Ef={}));var ty,ey=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(Zm,"true"),t.body.appendChild(i),i},iy=function(t){return new Promise((function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()}))},ny=function(t){return Promise.all([].slice.call(t.images,0).map(iy))},sy=function(t){return new Promise((function(e,i){var n=t.contentWindow;if(!n)return i("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval((function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(i),e(t))}),50)}}))},oy=["all","d","content"],ry=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t.item(i);-1===oy.indexOf(n)&&e.style.setProperty(n,t.getPropertyValue(n))}return e},Ay=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},ay=function(t,e,i){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||i!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,i)},ly=function(t){var e=t[0],i=t[1],n=t[2];e.scrollLeft=i,e.scrollTop=n},hy="___html2canvas___pseudoelement_before",cy="___html2canvas___pseudoelement_after",uy='{\n    content: "" !important;\n    display: none !important;\n}',dy=function(t){gy(t,"."+hy+":before"+uy+"\n         ."+cy+":after"+uy)},gy=function(t,e){var i=t.ownerDocument;if(i){var n=i.createElement("style");n.textContent=e,t.appendChild(n)}},py=function(){function t(){}return t.getOrigin=function(e){var i=t._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),fy=function(){function t(t,e){this.context=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:by(t)||By(t)?((this._cache[t]=this.loadImage(t)).catch((function(){})),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return Yc(this,void 0,void 0,(function(){var e,i,n,s,o=this;return qc(this,(function(r){switch(r.label){case 0:return e=py.isSameOrigin(t),i=!wy(t)&&!0===this._options.useCORS&&Nf.SUPPORT_CORS_IMAGES&&!e,n=!wy(t)&&!e&&!by(t)&&"string"==typeof this._options.proxy&&Nf.SUPPORT_CORS_XHR&&!i,e||!1!==this._options.allowTaint||wy(t)||by(t)||n||i?(s=t,n?[4,this.proxy(s)]:[3,2]):[2];case 1:s=r.sent(),r.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var n=new Image;n.onload=function(){return t(n)},n.onerror=e,(Cy(s)||i)&&(n.crossOrigin="anonymous"),n.src=s,!0===n.complete&&setTimeout((function(){return t(n)}),500),o._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,r.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise((function(s,o){var r=Nf.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(200===A.status)if("text"===r)s(A.response);else{var t=new FileReader;t.addEventListener("load",(function(){return s(t.result)}),!1),t.addEventListener("error",(function(t){return o(t)}),!1),t.readAsDataURL(A.response)}else o("Failed to proxy resource "+n+" with status code "+A.status)},A.onerror=o;var a=i.indexOf("?")>-1?"&":"?";if(A.open("GET",""+i+a+"url="+encodeURIComponent(t)+"&responseType="+r),"text"!==r&&A instanceof XMLHttpRequest&&(A.responseType=r),e._options.imageTimeout){var l=e._options.imageTimeout;A.timeout=l,A.ontimeout=function(){return o("Timed out ("+l+"ms) proxying "+n)}}A.send()}))},t}(),my=/^data:image\/svg\+xml/i,yy=/^data:image\/.*;base64,/i,_y=/^data:image\/.*/i,By=function(t){return Nf.SUPPORT_SVG_DRAWING||!vy(t)},wy=function(t){return _y.test(t)},Cy=function(t){return yy.test(t)},by=function(t){return"blob"===t.substr(0,4)},vy=function(t){return"svg"===t.substr(-3).toLowerCase()||my.test(t)},xy=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,i){return new t(this.x+e,this.y+i)},t}(),Ey=function(t,e,i){return new xy(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},Fy=function(){function t(t,e,i,n){this.type=1,this.start=t,this.startControl=e,this.endControl=i,this.end=n}return t.prototype.subdivide=function(e,i){var n=Ey(this.start,this.startControl,e),s=Ey(this.startControl,this.endControl,e),o=Ey(this.endControl,this.end,e),r=Ey(n,s,e),A=Ey(s,o,e),a=Ey(r,A,e);return i?new t(this.start,n,r,a):new t(a,A,o,this.end)},t.prototype.add=function(e,i){return new t(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Sy=function(t){return 1===t.type},Iy=function(t){var e=t.styles,i=t.bounds,n=qd(e.borderTopLeftRadius,i.width,i.height),s=n[0],o=n[1],r=qd(e.borderTopRightRadius,i.width,i.height),A=r[0],a=r[1],l=qd(e.borderBottomRightRadius,i.width,i.height),h=l[0],c=l[1],u=qd(e.borderBottomLeftRadius,i.width,i.height),d=u[0],g=u[1],p=[];p.push((s+A)/i.width),p.push((d+h)/i.width),p.push((o+g)/i.height),p.push((a+c)/i.height);var f=Math.max.apply(Math,p);f>1&&(s/=f,o/=f,A/=f,a/=f,h/=f,c/=f,d/=f,g/=f);var m=i.width-A,y=i.height-c,_=i.width-h,B=i.height-g,w=e.borderTopWidth,C=e.borderRightWidth,b=e.borderBottomWidth,v=e.borderLeftWidth,x=jd(e.paddingTop,t.bounds.width),E=jd(e.paddingRight,t.bounds.width),F=jd(e.paddingBottom,t.bounds.width),S=jd(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||o>0?My(i.left+v/3,i.top+w/3,s-v/3,o-w/3,ty.TOP_LEFT):new xy(i.left+v/3,i.top+w/3),this.topRightBorderDoubleOuterBox=s>0||o>0?My(i.left+m,i.top+w/3,A-C/3,a-w/3,ty.TOP_RIGHT):new xy(i.left+i.width-C/3,i.top+w/3),this.bottomRightBorderDoubleOuterBox=h>0||c>0?My(i.left+_,i.top+y,h-C/3,c-b/3,ty.BOTTOM_RIGHT):new xy(i.left+i.width-C/3,i.top+i.height-b/3),this.bottomLeftBorderDoubleOuterBox=d>0||g>0?My(i.left+v/3,i.top+B,d-v/3,g-b/3,ty.BOTTOM_LEFT):new xy(i.left+v/3,i.top+i.height-b/3),this.topLeftBorderDoubleInnerBox=s>0||o>0?My(i.left+2*v/3,i.top+2*w/3,s-2*v/3,o-2*w/3,ty.TOP_LEFT):new xy(i.left+2*v/3,i.top+2*w/3),this.topRightBorderDoubleInnerBox=s>0||o>0?My(i.left+m,i.top+2*w/3,A-2*C/3,a-2*w/3,ty.TOP_RIGHT):new xy(i.left+i.width-2*C/3,i.top+2*w/3),this.bottomRightBorderDoubleInnerBox=h>0||c>0?My(i.left+_,i.top+y,h-2*C/3,c-2*b/3,ty.BOTTOM_RIGHT):new xy(i.left+i.width-2*C/3,i.top+i.height-2*b/3),this.bottomLeftBorderDoubleInnerBox=d>0||g>0?My(i.left+2*v/3,i.top+B,d-2*v/3,g-2*b/3,ty.BOTTOM_LEFT):new xy(i.left+2*v/3,i.top+i.height-2*b/3),this.topLeftBorderStroke=s>0||o>0?My(i.left+v/2,i.top+w/2,s-v/2,o-w/2,ty.TOP_LEFT):new xy(i.left+v/2,i.top+w/2),this.topRightBorderStroke=s>0||o>0?My(i.left+m,i.top+w/2,A-C/2,a-w/2,ty.TOP_RIGHT):new xy(i.left+i.width-C/2,i.top+w/2),this.bottomRightBorderStroke=h>0||c>0?My(i.left+_,i.top+y,h-C/2,c-b/2,ty.BOTTOM_RIGHT):new xy(i.left+i.width-C/2,i.top+i.height-b/2),this.bottomLeftBorderStroke=d>0||g>0?My(i.left+v/2,i.top+B,d-v/2,g-b/2,ty.BOTTOM_LEFT):new xy(i.left+v/2,i.top+i.height-b/2),this.topLeftBorderBox=s>0||o>0?My(i.left,i.top,s,o,ty.TOP_LEFT):new xy(i.left,i.top),this.topRightBorderBox=A>0||a>0?My(i.left+m,i.top,A,a,ty.TOP_RIGHT):new xy(i.left+i.width,i.top),this.bottomRightBorderBox=h>0||c>0?My(i.left+_,i.top+y,h,c,ty.BOTTOM_RIGHT):new xy(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=d>0||g>0?My(i.left,i.top+B,d,g,ty.BOTTOM_LEFT):new xy(i.left,i.top+i.height),this.topLeftPaddingBox=s>0||o>0?My(i.left+v,i.top+w,Math.max(0,s-v),Math.max(0,o-w),ty.TOP_LEFT):new xy(i.left+v,i.top+w),this.topRightPaddingBox=A>0||a>0?My(i.left+Math.min(m,i.width-C),i.top+w,m>i.width+C?0:Math.max(0,A-C),Math.max(0,a-w),ty.TOP_RIGHT):new xy(i.left+i.width-C,i.top+w),this.bottomRightPaddingBox=h>0||c>0?My(i.left+Math.min(_,i.width-v),i.top+Math.min(y,i.height-b),Math.max(0,h-C),Math.max(0,c-b),ty.BOTTOM_RIGHT):new xy(i.left+i.width-C,i.top+i.height-b),this.bottomLeftPaddingBox=d>0||g>0?My(i.left+v,i.top+Math.min(B,i.height-b),Math.max(0,d-v),Math.max(0,g-b),ty.BOTTOM_LEFT):new xy(i.left+v,i.top+i.height-b),this.topLeftContentBox=s>0||o>0?My(i.left+v+S,i.top+w+x,Math.max(0,s-(v+S)),Math.max(0,o-(w+x)),ty.TOP_LEFT):new xy(i.left+v+S,i.top+w+x),this.topRightContentBox=A>0||a>0?My(i.left+Math.min(m,i.width+v+S),i.top+w+x,m>i.width+v+S?0:A-v+S,a-(w+x),ty.TOP_RIGHT):new xy(i.left+i.width-(C+E),i.top+w+x),this.bottomRightContentBox=h>0||c>0?My(i.left+Math.min(_,i.width-(v+S)),i.top+Math.min(y,i.height+w+x),Math.max(0,h-(C+E)),c-(b+F),ty.BOTTOM_RIGHT):new xy(i.left+i.width-(C+E),i.top+i.height-(b+F)),this.bottomLeftContentBox=d>0||g>0?My(i.left+v+S,i.top+B,Math.max(0,d-(v+S)),g-(b+F),ty.BOTTOM_LEFT):new xy(i.left+v+S,i.top+i.height-(b+F))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(ty||(ty={}));var My=function(t,e,i,n,s){var o=(Math.sqrt(2)-1)/3*4,r=i*o,A=n*o,a=t+i,l=e+n;switch(s){case ty.TOP_LEFT:return new Fy(new xy(t,l),new xy(t,l-A),new xy(a-r,e),new xy(a,e));case ty.TOP_RIGHT:return new Fy(new xy(t,e),new xy(t+r,e),new xy(a,l-A),new xy(a,l));case ty.BOTTOM_RIGHT:return new Fy(new xy(a,e),new xy(a,e+A),new xy(t+r,l),new xy(t,l));case ty.BOTTOM_LEFT:default:return new Fy(new xy(a,l),new xy(a-r,l),new xy(t,e+A),new xy(t,e))}},Ly=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Uy=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Qy=function(t,e,i){this.offsetX=t,this.offsetY=e,this.matrix=i,this.type=0,this.target=6},Ty=function(t,e){this.path=t,this.target=e,this.type=1},ky=function(t){this.opacity=t,this.type=2,this.target=6},Ry=function(t){return 1===t.type},Py=function(t,e){return t.length===e.length&&t.some((function(t,i){return t===e[i]}))},Dy=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Oy=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new Iy(this.container),this.container.styles.opacity<1&&this.effects.push(new ky(this.container.styles.opacity)),null!==this.container.styles.transform){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new Qy(i,n,s))}if(0!==this.container.styles.overflowX){var o=Ly(this.curves),r=Uy(this.curves);Py(o,r)?this.effects.push(new Ty(o,6)):(this.effects.push(new Ty(o,2)),this.effects.push(new Ty(r,4)))}}return t.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,n=this.effects.slice(0);i;){var s=i.effects.filter((function(t){return!Ry(t)}));if(e||0!==i.container.styles.position||!i.parent){if(n.unshift.apply(n,s),e=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX){var o=Ly(i.curves),r=Uy(i.curves);Py(o,r)||n.unshift(new Ty(r,6))}}else n.unshift.apply(n,s);i=i.parent}return n.filter((function(e){return tf(e.target,t)}))},t}(),Ny=function(t,e,i,n){t.container.elements.forEach((function(s){var o=tf(s.flags,4),r=tf(s.flags,2),A=new Oy(s,t);tf(s.styles.display,2048)&&n.push(A);var a=tf(s.flags,8)?[]:n;if(o||r){var l=o||s.styles.isPositioned()?i:e,h=new Dy(A);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var c=s.styles.zIndex.order;if(c<0){var u=0;l.negativeZIndex.some((function(t,e){return c>t.element.container.styles.zIndex.order?(u=e,!1):u>0})),l.negativeZIndex.splice(u,0,h)}else if(c>0){var d=0;l.positiveZIndex.some((function(t,e){return c>=t.element.container.styles.zIndex.order?(d=e+1,!1):d>0})),l.positiveZIndex.splice(d,0,h)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else s.styles.isFloating()?l.nonPositionedFloats.push(h):l.nonPositionedInlineLevel.push(h);Ny(A,h,o?h:i,a)}else s.styles.isInlineLevel()?e.inlineLevel.push(A):e.nonInlineLevel.push(A),Ny(A,e,i,a);tf(s.flags,8)&&Hy(s,a)}))},Hy=function(t,e){for(var i=t instanceof im?t.start:1,n=t instanceof im&&t.reversed,s=0;s<e.length;s++){var o=e[s];o.container instanceof em&&"number"==typeof o.container.value&&0!==o.container.value&&(i=o.container.value),o.listValue=Jm(i,o.container.styles.listStyleType,!0),i+=n?-1:1}},Gy=function(t,e){switch(e){case 0:return Vy(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Vy(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Vy(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return Vy(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Ky=function(t,e){var i=[];return Sy(t)?i.push(t.subdivide(.5,!1)):i.push(t),Sy(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},Vy=function(t,e,i,n){var s=[];return Sy(t)?s.push(t.subdivide(.5,!1)):s.push(t),Sy(i)?s.push(i.subdivide(.5,!0)):s.push(i),Sy(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Sy(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},Wy=function(t){var e=t.bounds,i=t.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},zy=function(t){var e=t.styles,i=t.bounds,n=jd(e.paddingLeft,i.width),s=jd(e.paddingRight,i.width),o=jd(e.paddingTop,i.width),r=jd(e.paddingBottom,i.width);return i.add(n+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+o+r))},Xy=function(t,e,i){var n=function(t,e){return 0===t?e.bounds:2===t?zy(e):Wy(e)}(Jy(t.styles.backgroundOrigin,e),t),s=function(t,e){return 0===t?e.bounds:2===t?zy(e):Wy(e)}(Jy(t.styles.backgroundClip,e),t),o=jy(Jy(t.styles.backgroundSize,e),i,n),r=o[0],A=o[1],a=qd(Jy(t.styles.backgroundPosition,e),n.width-r,n.height-A);return[Zy(Jy(t.styles.backgroundRepeat,e),a,o,n,s),Math.round(n.left+a[0]),Math.round(n.top+a[1]),r,A]},Yy=function(t){return Rd(t)&&t.value===Ug.AUTO},qy=function(t){return"number"==typeof t},jy=function(t,e,i){var n=e[0],s=e[1],o=e[2],r=t[0],A=t[1];if(!r)return[0,0];if(Vd(r)&&A&&Vd(A))return[jd(r,i.width),jd(A,i.height)];var a=qy(o);if(Rd(r)&&(r.value===Ug.CONTAIN||r.value===Ug.COVER))return qy(o)?i.width/i.height<o!=(r.value===Ug.COVER)?[i.width,i.width/o]:[i.height*o,i.height]:[i.width,i.height];var l=qy(n),h=qy(s),c=l||h;if(Yy(r)&&(!A||Yy(A)))return l&&h?[n,s]:a||c?c&&a?[l?n:s*o,h?s:n/o]:[l?n:i.width,h?s:i.height]:[i.width,i.height];if(a){var u=0,d=0;return Vd(r)?u=jd(r,i.width):Vd(A)&&(d=jd(A,i.height)),Yy(r)?u=d*o:A&&!Yy(A)||(d=u/o),[u,d]}var g=null,p=null;if(Vd(r)?g=jd(r,i.width):A&&Vd(A)&&(p=jd(A,i.height)),null===g||A&&!Yy(A)||(p=l&&h?g/n*s:i.height),null!==p&&Yy(r)&&(g=l&&h?p/s*n:i.width),null!==g&&null!==p)return[g,p];throw new Error("Unable to calculate background-size for element")},Jy=function(t,e){var i=t[e];return void 0===i?t[0]:i},Zy=function(t,e,i,n,s){var o=e[0],r=e[1],A=i[0],a=i[1];switch(t){case 2:return[new xy(Math.round(n.left),Math.round(n.top+r)),new xy(Math.round(n.left+n.width),Math.round(n.top+r)),new xy(Math.round(n.left+n.width),Math.round(a+n.top+r)),new xy(Math.round(n.left),Math.round(a+n.top+r))];case 3:return[new xy(Math.round(n.left+o),Math.round(n.top)),new xy(Math.round(n.left+o+A),Math.round(n.top)),new xy(Math.round(n.left+o+A),Math.round(n.height+n.top)),new xy(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new xy(Math.round(n.left+o),Math.round(n.top+r)),new xy(Math.round(n.left+o+A),Math.round(n.top+r)),new xy(Math.round(n.left+o+A),Math.round(n.top+r+a)),new xy(Math.round(n.left+o),Math.round(n.top+r+a))];default:return[new xy(Math.round(s.left),Math.round(s.top)),new xy(Math.round(s.left+s.width),Math.round(s.top)),new xy(Math.round(s.left+s.width),Math.round(s.height+s.top)),new xy(Math.round(s.left),Math.round(s.height+s.top))]}},$y="Hidden Text",t_=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var i=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),o=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",o.appendChild(i),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode($y)),i.appendChild(s),i.appendChild(n);var r=n.offsetTop-s.offsetTop+2;i.removeChild(s),i.appendChild(this._document.createTextNode($y)),i.style.lineHeight="normal",n.style.verticalAlign="super";var A=n.offsetTop-i.offsetTop+2;return o.removeChild(i),{baseline:r,middle:A}},t.prototype.getMetrics=function(t,e){var i=t+" "+e;return void 0===this._data[i]&&(this._data[i]=this.parseMetrics(t,e)),this._data[i]},t}(),e_=function(t,e){this.context=t,this.options=e},i_=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new t_(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return zc(e,t),e.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach((function(t){return e.applyEffect(t)}))},e.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 2===t.type}(t)&&(this.ctx.globalAlpha=t.opacity),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Ry(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Yc(this,void 0,void 0,(function(){return qc(this,(function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.renderNode=function(t){return Yc(this,void 0,void 0,(function(){return qc(this,(function(e){switch(e.label){case 0:return tf(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.renderTextWithLetterSpacing=function(t,e,i){var n=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i):Vf(t.text).reduce((function(e,s){return n.ctx.fillText(s,e,t.bounds.top+i),e+n.ctx.measureText(s).width}),t.bounds.left)},e.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),i=A_(t.fontFamily).join(", "),n=Td(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,n,i].join(" "),i,n]},e.prototype.renderTextNode=function(t,e){return Yc(this,void 0,void 0,(function(){var i,n,s,o,r,A,a,l,h=this;return qc(this,(function(c){return i=this.createFontStyle(e),n=i[0],s=i[1],o=i[2],this.ctx.font=n,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(s,o),A=r.baseline,a=r.middle,l=e.paintOrder,t.textBounds.forEach((function(t){l.forEach((function(i){switch(i){case 0:h.ctx.fillStyle=og(e.color),h.renderTextWithLetterSpacing(t,e.letterSpacing,A);var n=e.textShadow;n.length&&t.text.trim().length&&(n.slice(0).reverse().forEach((function(i){h.ctx.shadowColor=og(i.color),h.ctx.shadowOffsetX=i.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=i.offsetY.number*h.options.scale,h.ctx.shadowBlur=i.blur.number,h.renderTextWithLetterSpacing(t,e.letterSpacing,A)})),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),e.textDecorationLine.length&&(h.ctx.fillStyle=og(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+A),t.bounds.width,1);break;case 2:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:h.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+a),t.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(h.ctx.strokeStyle=og(e.webkitTextStrokeColor),h.ctx.lineWidth=e.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+A)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter"}}))})),[2]}))}))},e.prototype.renderReplacedElement=function(t,e,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var n=zy(t),s=Uy(e);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Yc(this,void 0,void 0,(function(){var i,n,s,o,r,A,a,l,h,c,u,d,g,p,f,m,y,_;return qc(this,(function(B){switch(B.label){case 0:this.applyEffects(t.getEffects(4)),i=t.container,n=t.curves,s=i.styles,o=0,r=i.textNodes,B.label=1;case 1:return o<r.length?(A=r[o],[4,this.renderTextNode(A,s)]):[3,4];case 2:B.sent(),B.label=3;case 3:return o++,[3,1];case 4:if(!(i instanceof Zf))return[3,8];B.label=5;case 5:return B.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return f=B.sent(),this.renderReplacedElement(i,n,f),[3,8];case 7:return B.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof $f&&this.renderReplacedElement(i,n,i.canvas),!(i instanceof tm))return[3,12];B.label=9;case 9:return B.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return f=B.sent(),this.renderReplacedElement(i,n,f),[3,12];case 11:return B.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof um&&i.tree?[4,new e(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}).render(i.tree)]:[3,14];case 13:a=B.sent(),i.width&&i.height&&this.ctx.drawImage(a,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),B.label=14;case 14:if(i instanceof lm&&(l=Math.min(i.bounds.width,i.bounds.height),i.type===om?i.checked&&(this.ctx.save(),this.path([new xy(i.bounds.left+.39363*l,i.bounds.top+.79*l),new xy(i.bounds.left+.16*l,i.bounds.top+.5549*l),new xy(i.bounds.left+.27347*l,i.bounds.top+.44071*l),new xy(i.bounds.left+.39694*l,i.bounds.top+.5649*l),new xy(i.bounds.left+.72983*l,i.bounds.top+.23*l),new xy(i.bounds.left+.84*l,i.bounds.top+.34085*l),new xy(i.bounds.left+.39363*l,i.bounds.top+.79*l)]),this.ctx.fillStyle=og(am),this.ctx.fill(),this.ctx.restore()):i.type===rm&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+l/2,i.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=og(am),this.ctx.fill(),this.ctx.restore())),n_(i)&&i.value.length){switch(h=this.createFontStyle(s),y=h[0],c=h[1],u=this.fontMetrics.getMetrics(y,c).baseline,this.ctx.font=y,this.ctx.fillStyle=og(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=o_(i.styles.textAlign),_=zy(i),d=0,i.styles.textAlign){case 1:d+=_.width/2;break;case 2:d+=_.width}g=_.add(d,0,0,-_.height/2+1),this.ctx.save(),this.path([new xy(_.left,_.top),new xy(_.left+_.width,_.top),new xy(_.left+_.width,_.top+_.height),new xy(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Hf(i.value,g),s.letterSpacing,u),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!tf(i.styles.display,2048))return[3,20];if(null===i.styles.listStyleImage)return[3,19];if(0!==(p=i.styles.listStyleImage).type)return[3,18];f=void 0,m=p.url,B.label=15;case 15:return B.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return f=B.sent(),this.ctx.drawImage(f,i.bounds.left-(f.width+10),i.bounds.top),[3,18];case 17:return B.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==i.styles.listStyleType&&(y=this.createFontStyle(s)[0],this.ctx.font=y,this.ctx.fillStyle=og(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new Jc(i.bounds.left,i.bounds.top+jd(i.styles.paddingTop,i.bounds.width),i.bounds.width,mp(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Hf(t.listValue,_),s.letterSpacing,mp(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),B.label=20;case 20:return[2]}}))}))},e.prototype.renderStackContent=function(t){return Yc(this,void 0,void 0,(function(){var e,i,n,s,o,r,A,a,l,h,c,u,d,g,p;return qc(this,(function(f){switch(f.label){case 0:return tf(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:f.sent(),e=0,i=t.negativeZIndex,f.label=2;case 2:return e<i.length?(p=i[e],[4,this.renderStack(p)]):[3,5];case 3:f.sent(),f.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:f.sent(),n=0,s=t.nonInlineLevel,f.label=7;case 7:return n<s.length?(p=s[n],[4,this.renderNode(p)]):[3,10];case 8:f.sent(),f.label=9;case 9:return n++,[3,7];case 10:o=0,r=t.nonPositionedFloats,f.label=11;case 11:return o<r.length?(p=r[o],[4,this.renderStack(p)]):[3,14];case 12:f.sent(),f.label=13;case 13:return o++,[3,11];case 14:A=0,a=t.nonPositionedInlineLevel,f.label=15;case 15:return A<a.length?(p=a[A],[4,this.renderStack(p)]):[3,18];case 16:f.sent(),f.label=17;case 17:return A++,[3,15];case 18:l=0,h=t.inlineLevel,f.label=19;case 19:return l<h.length?(p=h[l],[4,this.renderNode(p)]):[3,22];case 20:f.sent(),f.label=21;case 21:return l++,[3,19];case 22:c=0,u=t.zeroOrAutoZIndexOrTransformedOrOpacity,f.label=23;case 23:return c<u.length?(p=u[c],[4,this.renderStack(p)]):[3,26];case 24:f.sent(),f.label=25;case 25:return c++,[3,23];case 26:d=0,g=t.positiveZIndex,f.label=27;case 27:return d<g.length?(p=g[d],[4,this.renderStack(p)]):[3,30];case 28:f.sent(),f.label=29;case 29:return d++,[3,27];case 30:return[2]}}))}))},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var e=this;t.forEach((function(t,i){var n=Sy(t)?t.start:t;0===i?e.ctx.moveTo(n.x,n.y):e.ctx.lineTo(n.x,n.y),Sy(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},e.prototype.renderRepeat=function(t,e,i,n){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(i,n),this.ctx.fill(),this.ctx.translate(-i,-n)},e.prototype.resizeImage=function(t,e,i){var n;if(t.width===e&&t.height===i)return t;var s=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return s.width=Math.max(1,e),s.height=Math.max(1,i),s.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,i),s},e.prototype.renderBackgroundImage=function(t){return Yc(this,void 0,void 0,(function(){var e,i,n,s,o,r;return qc(this,(function(A){switch(A.label){case 0:e=t.styles.backgroundImage.length-1,i=function(i){var s,o,r,A,a,l,h,c,u,d,g,p,f,m,y,_,B,w,C,b,v,x,E,F,S,I,M,L,U,Q,T;return qc(this,(function(k){switch(k.label){case 0:if(0!==i.type)return[3,5];s=void 0,o=i.url,k.label=1;case 1:return k.trys.push([1,3,,4]),[4,n.context.cache.match(o)];case 2:return s=k.sent(),[3,4];case 3:return k.sent(),n.context.logger.error("Error loading background-image "+o),[3,4];case 4:return s&&(r=Xy(t,e,[s.width,s.height,s.width/s.height]),_=r[0],x=r[1],E=r[2],C=r[3],b=r[4],m=n.ctx.createPattern(n.resizeImage(s,C,b),"repeat"),n.renderRepeat(_,m,x,E)),[3,6];case 5:1===i.type?(A=Xy(t,e,[null,null,null]),_=A[0],x=A[1],E=A[2],C=A[3],b=A[4],a=yg(i.angle,C,b),l=a[0],h=a[1],c=a[2],u=a[3],d=a[4],(g=document.createElement("canvas")).width=C,g.height=b,p=g.getContext("2d"),f=p.createLinearGradient(h,u,c,d),mg(i.stops,l).forEach((function(t){return f.addColorStop(t.stop,og(t.color))})),p.fillStyle=f,p.fillRect(0,0,C,b),C>0&&b>0&&(m=n.ctx.createPattern(g,"repeat"),n.renderRepeat(_,m,x,E))):function(t){return 2===t.type}(i)&&(y=Xy(t,e,[null,null,null]),_=y[0],B=y[1],w=y[2],C=y[3],b=y[4],v=0===i.position.length?[Xd]:i.position,x=jd(v[0],C),E=jd(v[v.length-1],b),F=function(t,e,i,n,s){var o=0,r=0;switch(t.size){case 0:0===t.shape?o=r=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-s)):1===t.shape&&(o=Math.min(Math.abs(e),Math.abs(e-n)),r=Math.min(Math.abs(i),Math.abs(i-s)));break;case 2:if(0===t.shape)o=r=Math.min(_g(e,i),_g(e,i-s),_g(e-n,i),_g(e-n,i-s));else if(1===t.shape){var A=Math.min(Math.abs(i),Math.abs(i-s))/Math.min(Math.abs(e),Math.abs(e-n)),a=Bg(n,s,e,i,!0),l=a[0],h=a[1];r=A*(o=_g(l-e,(h-i)/A))}break;case 1:0===t.shape?o=r=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-s)):1===t.shape&&(o=Math.max(Math.abs(e),Math.abs(e-n)),r=Math.max(Math.abs(i),Math.abs(i-s)));break;case 3:if(0===t.shape)o=r=Math.max(_g(e,i),_g(e,i-s),_g(e-n,i),_g(e-n,i-s));else if(1===t.shape){A=Math.max(Math.abs(i),Math.abs(i-s))/Math.max(Math.abs(e),Math.abs(e-n));var c=Bg(n,s,e,i,!1);l=c[0],h=c[1],r=A*(o=_g(l-e,(h-i)/A))}}return Array.isArray(t.size)&&(o=jd(t.size[0],n),r=2===t.size.length?jd(t.size[1],s):o),[o,r]}(i,x,E,C,b),S=F[0],I=F[1],S>0&&I>0&&(M=n.ctx.createRadialGradient(B+x,w+E,0,B+x,w+E,S),mg(i.stops,2*S).forEach((function(t){return M.addColorStop(t.stop,og(t.color))})),n.path(_),n.ctx.fillStyle=M,S!==I?(L=t.bounds.left+.5*t.bounds.width,U=t.bounds.top+.5*t.bounds.height,T=1/(Q=I/S),n.ctx.save(),n.ctx.translate(L,U),n.ctx.transform(1,0,0,Q,0,0),n.ctx.translate(-L,-U),n.ctx.fillRect(B,T*(w-U)+U,C,b*T),n.ctx.restore()):n.ctx.fill())),k.label=6;case 6:return e--,[2]}}))},n=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return s<o.length?(r=o[s],[5,i(r)]):[3,4];case 2:A.sent(),A.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},e.prototype.renderSolidBorder=function(t,e,i){return Yc(this,void 0,void 0,(function(){return qc(this,(function(n){return this.path(Gy(i,e)),this.ctx.fillStyle=og(t),this.ctx.fill(),[2]}))}))},e.prototype.renderDoubleBorder=function(t,e,i,n){return Yc(this,void 0,void 0,(function(){var s,o;return qc(this,(function(r){switch(r.label){case 0:return e<3?[4,this.renderSolidBorder(t,i,n)]:[3,2];case 1:return r.sent(),[2];case 2:return s=function(t,e){switch(e){case 0:return Vy(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Vy(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Vy(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return Vy(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}}(n,i),this.path(s),this.ctx.fillStyle=og(t),this.ctx.fill(),o=function(t,e){switch(e){case 0:return Vy(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Vy(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Vy(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return Vy(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}}(n,i),this.path(o),this.ctx.fill(),[2]}}))}))},e.prototype.renderNodeBackgroundAndBorders=function(t){return Yc(this,void 0,void 0,(function(){var e,i,n,s,o,r,A,a,l=this;return qc(this,(function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,i=!sg(e.backgroundColor)||e.backgroundImage.length,n=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],s=s_(Jy(e.backgroundClip,0),t.curves),i||e.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),sg(e.backgroundColor)||(this.ctx.fillStyle=og(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){l.ctx.save();var i,n,s,o,r,A=Ly(t.curves),a=e.inset?0:1e4,h=(i=A,n=-a+(e.inset?1:-1)*e.spread.number,s=(e.inset?1:-1)*e.spread.number,o=e.spread.number*(e.inset?-2:2),r=e.spread.number*(e.inset?-2:2),i.map((function(t,e){switch(e){case 0:return t.add(n,s);case 1:return t.add(n+o,s);case 2:return t.add(n+o,s+r);case 3:return t.add(n,s+r)}return t})));e.inset?(l.path(A),l.ctx.clip(),l.mask(h)):(l.mask(A),l.ctx.clip(),l.path(h)),l.ctx.shadowOffsetX=e.offsetX.number+a,l.ctx.shadowOffsetY=e.offsetY.number,l.ctx.shadowColor=og(e.color),l.ctx.shadowBlur=e.blur.number,l.ctx.fillStyle=e.inset?og(e.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),h.label=2;case 2:o=0,r=0,A=n,h.label=3;case 3:return r<A.length?0!==(a=A[r]).style&&!sg(a.color)&&a.width>0?2!==a.style?[3,5]:[4,this.renderDashedDottedBorder(a.color,a.width,o,t.curves,2)]:[3,11]:[3,13];case 4:return h.sent(),[3,11];case 5:return 3!==a.style?[3,7]:[4,this.renderDashedDottedBorder(a.color,a.width,o,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return 4!==a.style?[3,9]:[4,this.renderDoubleBorder(a.color,a.width,o,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(a.color,o,t.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return r++,[3,3];case 13:return[2]}}))}))},e.prototype.renderDashedDottedBorder=function(t,e,i,n,s){return Yc(this,void 0,void 0,(function(){var o,r,A,a,l,h,c,u,d,g,p,f,m,y,_,B;return qc(this,(function(w){return this.ctx.save(),o=function(t,e){switch(e){case 0:return Ky(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Ky(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Ky(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return Ky(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}}(n,i),r=Gy(n,i),2===s&&(this.path(r),this.ctx.clip()),Sy(r[0])?(A=r[0].start.x,a=r[0].start.y):(A=r[0].x,a=r[0].y),Sy(r[1])?(l=r[1].end.x,h=r[1].end.y):(l=r[1].x,h=r[1].y),c=0===i||2===i?Math.abs(A-l):Math.abs(a-h),this.ctx.beginPath(),3===s?this.formatPath(o):this.formatPath(r.slice(0,2)),u=e<3?3*e:2*e,d=e<3?2*e:e,3===s&&(u=e,d=e),g=!0,c<=2*u?g=!1:c<=2*u+d?(u*=p=c/(2*u+d),d*=p):(f=Math.floor((c+d)/(u+d)),m=(c-f*u)/(f-1),d=(y=(c-(f+1)*u)/f)<=0||Math.abs(d-m)<Math.abs(d-y)?m:y),g&&(3===s?this.ctx.setLineDash([0,u+d]):this.ctx.setLineDash([u,d])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=og(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(Sy(r[0])&&(_=r[3],B=r[0],this.ctx.beginPath(),this.formatPath([new xy(_.end.x,_.end.y),new xy(B.start.x,B.start.y)]),this.ctx.stroke()),Sy(r[1])&&(_=r[1],B=r[2],this.ctx.beginPath(),this.formatPath([new xy(_.end.x,_.end.y),new xy(B.start.x,B.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},e.prototype.render=function(t){return Yc(this,void 0,void 0,(function(){var e;return qc(this,(function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=og(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new Oy(t,null),s=new Dy(n),Ny(n,s,s,o=[]),Hy(n.container,o),e=s,[4,this.renderStack(e)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}var n,s,o}))}))},e}(e_),n_=function(t){return t instanceof cm||(t instanceof hm||t instanceof lm&&t.type!==rm&&t.type!==om)},s_=function(t,e){switch(t){case 0:return Ly(e);case 2:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);default:return Uy(e)}},o_=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},r_=["-apple-system","system-ui"],A_=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===r_.indexOf(t)})):t},a_=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return zc(e,t),e.prototype.render=function(t){return Yc(this,void 0,void 0,(function(){var e,i;return qc(this,(function(n){switch(n.label){case 0:return e=Df(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,l_(e)];case 1:return i=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=og(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},e}(e_),l_=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},h_=function(){function t(t){var e=t.id,i=t.enabled;this.id=e,this.enabled=i,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,jc([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,jc([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,jc([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,jc([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),c_=function(){function t(e,i){var n;this.windowBounds=i,this.instanceName="#"+t.instanceCount++,this.logger=new h_({id:this.instanceName,enabled:e.logging}),this.cache=null!==(n=e.cache)&&void 0!==n?n:new fy(this,e)}return t.instanceCount=1,t}();"undefined"!=typeof window&&py.setContext(window);var u_=function(t,e){return Yc(void 0,void 0,void 0,(function(){var i,n,s,o,r,A,a,l,h,c,u,d,g,p,f,m,y,_,B,w,C,b,v,x,E,F,S,I,M,L,U,Q,T,k,R,P,D,O;return qc(this,(function(N){switch(N.label){case 0:if(!t||"object"!=typeof t)return[2,Promise.reject("Invalid element provided as first argument")];if(!(i=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=i.defaultView))throw new Error("Document is not attached to a Window");return s={allowTaint:null!==(b=e.allowTaint)&&void 0!==b&&b,imageTimeout:null!==(v=e.imageTimeout)&&void 0!==v?v:15e3,proxy:e.proxy,useCORS:null!==(x=e.useCORS)&&void 0!==x&&x},o=Xc({logging:null===(E=e.logging)||void 0===E||E,cache:e.cache},s),r={windowWidth:null!==(F=e.windowWidth)&&void 0!==F?F:n.innerWidth,windowHeight:null!==(S=e.windowHeight)&&void 0!==S?S:n.innerHeight,scrollX:null!==(I=e.scrollX)&&void 0!==I?I:n.pageXOffset,scrollY:null!==(M=e.scrollY)&&void 0!==M?M:n.pageYOffset},A=new Jc(r.scrollX,r.scrollY,r.windowWidth,r.windowHeight),a=new c_(o,A),l=null!==(L=e.foreignObjectRendering)&&void 0!==L&&L,h={allowTaint:null!==(U=e.allowTaint)&&void 0!==U&&U,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:l,copyStyles:l},a.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),c=new $m(a,t,h),(u=c.clonedReferenceElement)?[4,c.toIFrame(i,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=N.sent(),g=Fm(u)||"HTML"===u.tagName?function(t){var e=t.body,i=t.documentElement;if(!e||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),s=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new Jc(0,0,n,s)}(u.ownerDocument):Zc(a,u),p=g.width,f=g.height,m=g.left,y=g.top,_=d_(a,u,e.backgroundColor),B={canvas:e.canvas,backgroundColor:_,scale:null!==(T=null!==(Q=e.scale)&&void 0!==Q?Q:n.devicePixelRatio)&&void 0!==T?T:1,x:(null!==(k=e.x)&&void 0!==k?k:0)+m,y:(null!==(R=e.y)&&void 0!==R?R:0)+y,width:null!==(P=e.width)&&void 0!==P?P:Math.ceil(p),height:null!==(D=e.height)&&void 0!==D?D:Math.ceil(f)},l?(a.logger.debug("Document cloned, using foreign object rendering"),[4,new a_(a,B).render(u)]):[3,3];case 2:return w=N.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+m+","+y+" with size "+p+"x"+f+" using computed rendering"),a.logger.debug("Starting DOM parsing"),C=fm(a,u),_===C.styles.backgroundColor&&(C.styles.backgroundColor=dg.TRANSPARENT),a.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),[4,new i_(a,B).render(C)];case 4:w=N.sent(),N.label=5;case 5:return(null===(O=e.removeContainer)||void 0===O||O)&&($m.destroy(d)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,w]}}))}))},d_=function(t,e,i){var n=e.ownerDocument,s=n.documentElement?ug(t,getComputedStyle(n.documentElement).backgroundColor):dg.TRANSPARENT,o=n.body?ug(t,getComputedStyle(n.body).backgroundColor):dg.TRANSPARENT,r="string"==typeof i?ug(t,i):null===i?dg.TRANSPARENT:4294967295;return e===n.documentElement?sg(s)?sg(o)?r:o:s:r};const g_=function(t,e){const i=ph.createElement({element:"a",style:"display: none;",attributes:{download:t}});p_(t)?i.setAttribute("href",e):i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),i.click()},p_=function(t){return null!==t.split(".").pop().match(/jpg|jpeg|png|gif|svg/i)},f_={},m_="map.png";const y_="alt.shift.drag.rotate",__="always.new.layers",B_="copy.coordinates.on.click",w_="drag.pan",C_="keyboard.pan",b_="keyboard.zoom",v_="mouse.wheel.zoom",x_="select.vector.map.shapes",E_="settings",F_={};class S_{static localStorageState=JSON.parse(_h.getStateObject(E_))||{};static localStorage={...F_,...this.localStorageState};static init(t){}static settings=new Map([[v_,{state:!1,text:"Enable zooming using mousewheel only"}],[y_,{state:!0,text:"Enable rotate of map using Shift + Alt + Drag"}],[w_,{state:!0,text:"Enable dragging using mouse only"}],[b_,{state:!0,text:"Enable zooming using keyboard"}],[C_,{state:!0,text:"Enable panning using keyboard"}],[x_,{state:!1,text:"Enable select of shapes in vector map layers"}],[__,{state:!1,text:"Always create new layer when selecting tool"}]]);static init(){this.settings.forEach(((t,e)=>{e in this.localStorage&&(t.state=this.localStorage[e])}))}static addSetting(t,e){this.settings.set(t,e)}static getSettings(){return this.settings}static setSetting(t,e){this.settings.get(t).state=e,this.localStorage[t]=e,_h.updateStateObject(E_,JSON.stringify(this.localStorage))}static getSetting(t){return this.settings.get(t).state}}window.addEventListener(ah.DOMContentLoaded,(function(){S_.init()}));class I_{static tool;static init(t){}static setActiveTool(t){this.tool&&this.tool!==t&&this.tool.deSelect(),this.tool=t}static getActiveTool(){return this.tool}static hasActiveTool(){return void 0!==this.tool}static removeActiveTool(){this.tool=void 0}}const M_=function(t,e,i=!1,n=!0){const s=new Event(e,{bubbles:i,cancelable:n,composed:!1});t.forEach((t=>{t.dispatchEvent(s)}))},L_="drawTool",U_={active:!1,collapsed:!1,toolTypeIndex:5,strokeWidthIndex:4,strokeColor:"#4A86B8",fillColor:"#D7E3FA80"},Q_={};class T_{static map;static tooltipElement;static tooltipOverlay;static tooltips={};static init(t){if(this.map)return;this.map=t;const e=ph.createElement({element:"div",class:"oltb-overlay-tooltip"});this.tooltipOverlay=new Rh({stopEvent:!1,element:e,offset:[0,-6],positioning:"bottom-center"})}static isEmpty(){return 0===Object.keys(this.tooltips).length}static push(t){const e=ph.createElement({element:"span",class:"oltb-overlay-tooltip__item"});return this.isEmpty()&&(this.map.addOverlay(this.tooltipOverlay),this.onPointerMoveListener=this.map.on(lh.PointerMove,this.onPointerMove.bind(this))),this.tooltips[t]=e,this.tooltipOverlay.getElement().prepend(e),e}static pop(t){const e=this.tooltips[t];return delete this.tooltips[t],this.tooltipOverlay.getElement().removeChild(e),this.isEmpty()&&(tt(this.onPointerMoveListener),this.map.removeOverlay(this.tooltipOverlay),this.tooltipOverlay.setPosition(null)),e}static onPointerMove(t){this.tooltipOverlay.setPosition(t.coordinate)}}const k_=function(t){return t instanceof cn?D_(t):P_(t)},R_=function(t){return t instanceof cn?t.getInteriorPoint().getCoordinates():t.getLastCoordinate()},P_=function(t){const e=Ge(t);return e>100?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m"},D_=function(t){const e=Ve(t);return e>1e4?Math.round(e/1e6*100)/100+" km<sup>2</sup>":Math.round(100*e)/100+" m<sup>2</sup>"},O_=function(t=""){const e=mh.createElement({element:"div",class:"oltb-overlay-tooltip"}),i=mh.createElement({html:t,element:"span",class:"oltb-overlay-tooltip__item"});e.appendChild(i);const n=new Rh({element:e,offset:[0,-7],positioning:"bottom-center"});return{getOverlay:()=>n,setPosition:t=>{n.setPosition(t)},setData:t=>{i.innerHTML=t}}},N_="measureTool",H_={active:!1,collapsed:!1,toolTypeIndex:0,strokeColor:"#4A86B8",fillColor:"#D7E3FA80"},G_={};class K_{constructor(){this.dialogBackdrop=mh.createElement({element:"div",class:"oltb-dialog-backdrop oltb-dialog-backdrop--fixed",attributes:{tabindex:"-1"},listeners:{click:this.bounceAnimation.bind(this),keydown:Eh}}),this.isDark=Sh(),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){"escape"===t.key.toLowerCase()&&this.close()}isBackdropClicked(t){return t.target===this.dialogBackdrop}bounceAnimation(t){if(!this.isBackdropClicked(t))return;const e=this.dialogBackdrop.firstElementChild;mh.rerunAnimation(e,"oltb-animations--bounce")}close(){this.dialogBackdrop.removeEventListener(ah.KeyDown,Eh),this.dialogBackdrop.remove()}}const V_={text:void 0,html:void 0,confirmText:"Ok"};class W_ extends K_{constructor(t={}){super(),this.options={...V_,...t};const e=mh.createElement({element:"div",class:"oltb-dialog oltb-dialog--alert oltb-animations--bounce"});if(this.options.text){const t=mh.createElement({element:"p",text:this.options.text});e.appendChild(t)}this.options.html&&(e.innerHTML=this.options.html);const i=mh.createElement({element:"div",class:"oltb-dialog__button-wrapper"}),n=mh.createElement({element:"button",text:this.options.confirmText,class:"oltb-dialog__btn oltb-btn oltb-btn--blue-mid",attributes:{type:"button"},listeners:{click:this.close.bind(this)}});i.appendChild(n),e.appendChild(i),this.dialogBackdrop.appendChild(e),fh.appendChild(this.dialogBackdrop),this.dialogBackdrop.focus()}}const z_={text:void 0,html:void 0,onConfirm:void 0,onCancel:void 0,confirmClass:"oltb-btn--red-mid",confirmText:"Yes"};class X_ extends K_{constructor(t={}){super(),this.options={...z_,...t};const e=mh.createElement({element:"div",class:"oltb-dialog oltb-dialog--confirm oltb-animations--bounce"}),i=mh.createElement({element:"p"});this.options.text&&(i.innerText=this.options.text),this.options.html&&(i.innerHTML=this.options.html);const n=mh.createElement({element:"div",class:"oltb-dialog__button-wrapper"}),s=mh.createElement({element:"button",text:this.options.confirmText,class:`oltb-dialog__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof this.options.onConfirm&&this.options.onConfirm()}}}),o=mh.createElement({element:"button",text:"Cancel",class:"oltb-dialog__btn oltb-btn "+(this.isDark?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof this.options.onCancel&&this.options.onCancel()}}});n.appendChild(o),n.appendChild(s),e.appendChild(i),e.appendChild(n),this.dialogBackdrop.appendChild(e),fh.appendChild(this.dialogBackdrop),this.dialogBackdrop.focus()}}const Y_={text:void 0,placeholder:void 0,value:void 0,onConfirm:void 0,onCancel:void 0,confirmClass:"oltb-btn--green-mid",confirmText:"Confirm"};class q_ extends K_{constructor(t={}){super(),this.options={...Y_,...t};const e=mh.createElement({element:"div",class:"oltb-dialog oltb-dialog--prompt oltb-animations--bounce"}),i=mh.createElement({element:"p",text:this.options.text}),n=mh.createElement({element:"input",class:"oltb-dialog__input oltb-input",attributes:{type:"text"}});void 0!==this.options.placeholder&&null!==this.options.placeholder&&n.setAttribute("placeholder",this.options.placeholder),void 0!==this.options.value&&null!==this.options.value&&(n.value=this.options.value);const s=mh.createElement({element:"div",class:"oltb-dialog__button-wrapper"}),o=mh.createElement({element:"button",text:this.options.confirmText,class:`oltb-dialog__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof this.options.onConfirm&&this.options.onConfirm(n.value.trim())}}}),r=mh.createElement({element:"button",text:"Cancel",class:"oltb-dialog__btn oltb-btn "+(this.isDark?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof this.options.onCancel&&this.options.onCancel()}}});s.appendChild(r),s.appendChild(o),e.appendChild(i),e.appendChild(n),e.appendChild(s),this.dialogBackdrop.appendChild(e),fh.appendChild(this.dialogBackdrop),this.dialogBackdrop.focus()}}class j_{static alert(t){return new W_(t)}static confirm(t){return new X_(t)}static prompt(t){return new q_(t)}static get Success(){return"oltb-btn--green-mid"}static get Danger(){return"oltb-btn--red-mid"}}const J_=(t,e,...i)=>{if(void 0!==t)return 0===i.length&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:J_(t[e],...i)},Z_=function(t,...e){return J_(t,"oltb",e)};class $_{static equalsWithTolerance(t,e,i){return Math.abs(t-e)<=i}}class tB extends Error{constructor(t){super(t),this.name=Object.keys({Exception:tB})[0]}toString(){return this.message}}class eB extends tB{constructor(t){super(t),this.name=Object.keys({IllegalArgumentException:eB})[0]}}class iB{constructor(t,e){this.low=e||0,this.high=t||0}static toBinaryString(t){let e,i="";for(e=2147483648;e>0;e>>>=1)i+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)i+=(t.low&e)===e?"1":"0";return i}}function nB(){}function sB(){}function oB(){}function rB(){}function AB(){}nB.NaN=NaN,nB.isNaN=t=>Number.isNaN(t),nB.isInfinite=t=>!Number.isFinite(t),nB.MAX_VALUE=Number.MAX_VALUE,nB.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,nB.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=2146435072,e=new Float64Array(1),i=new Int32Array(e.buffer);nB.doubleToLongBits=function(n){e[0]=n;let s=0|i[0],o=0|i[1];return(o&t)===t&&0!=(1048575&o)&&0!==s&&(s=0,o=2146959360),new iB(o,s)},nB.longBitsToDouble=function(t){return i[0]=t.low,i[1]=t.high,e[0]}}():function(){const t=1023,e=Math.log2,i=Math.floor,n=Math.pow,s=function(){for(let t=53;t>0;t--){const s=n(2,t)-1;if(i(e(s))+1===t)return s}return 0}();nB.doubleToLongBits=function(o){let r,A,a,l,h,c,u,d,g;if(o<0||1/o===Number.NEGATIVE_INFINITY?(c=1<<31,o=-o):c=0,0===o)return g=0,d=c,new iB(d,g);if(o===1/0)return g=0,d=2146435072|c,new iB(d,g);if(o!=o)return g=0,d=2146959360,new iB(d,g);if(l=0,g=0,r=i(o),r>1)if(r<=s)l=i(e(r)),l<=20?(g=0,d=r<<20-l&1048575):(a=l-20,A=n(2,a),g=r%A<<32-a,d=r/A&1048575);else for(a=r,g=0;A=a/2,a=i(A),0!==a;)l++,g>>>=1,g|=(1&d)<<31,d>>>=1,A!==a&&(d|=524288);if(u=l+t,h=0===r,r=o-r,l<52&&0!==r)for(a=0;;){if(A=2*r,A>=1?(r=A-1,h?(u--,h=!1):(a<<=1,a|=1,l++)):(r=A,h?0==--u&&(l++,h=!1):(a<<=1,l++)),20===l)d|=a,a=0;else if(52===l){g|=a;break}if(1===A){l<20?d|=a<<20-l:l<52&&(g|=a<<52-l);break}}return d|=u<<20,d|=c,new iB(d,g)},nB.longBitsToDouble=function(e){let i,s,o,r;const A=e.high,a=e.low,l=A&1<<31?-1:1;for(o=((2146435072&A)>>20)-t,r=0,s=1<<19,i=1;i<=20;i++)A&s&&(r+=n(2,-i)),s>>>=1;for(s=1<<31,i=21;i<=52;i++)a&s&&(r+=n(2,-i)),s>>>=1;if(-1023===o){if(0===r)return 0*l;o=-1022}else{if(1024===o)return 0===r?l/0:NaN;r+=1}return l*r*n(2,o)}}();class aB extends tB{constructor(t){super(t),this.name=Object.keys({RuntimeException:aB})[0]}}class lB extends aB{constructor(){super(),lB.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)aB.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];aB.constructor_.call(this,t)}}}class hB{static shouldNeverReachHere(){if(0===arguments.length)hB.shouldNeverReachHere(null);else if(1===arguments.length){const t=arguments[0];throw new lB("Should never reach here"+(null!==t?": "+t:""))}}static isTrue(){if(1===arguments.length){const t=arguments[0];hB.isTrue(t,null)}else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new lB:new lB(t)}}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];hB.equals(t,e,null)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(!e.equals(t))throw new lB("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))}}}const cB=new ArrayBuffer(8),uB=new Float64Array(cB),dB=new Int32Array(cB);class gB{constructor(){gB.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)gB.constructor_.call(this,0,0);else if(1===arguments.length){const t=arguments[0];gB.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];gB.constructor_.call(this,t,e,gB.NULL_ORDINATE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.x=t,this.y=e,this.z=i}}static hashCode(t){return uB[0]=t,dB[0]^dB[1]}getM(){return nB.NaN}setOrdinate(t,e){switch(t){case gB.X:this.x=e;break;case gB.Y:this.y=e;break;case gB.Z:this.setZ(e);break;default:throw new eB("Invalid ordinate index: "+t)}}equals2D(){if(1===arguments.length){const t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){const t=arguments[0],e=arguments[1];return!!$_.equalsWithTolerance(this.x,t.x,e)&&!!$_.equalsWithTolerance(this.y,t.y,e)}}setM(t){throw new eB("Invalid ordinate index: "+gB.M)}getZ(){return this.z}getOrdinate(t){switch(t){case gB.X:return this.x;case gB.Y:return this.y;case gB.Z:return this.getZ()}throw new eB("Invalid ordinate index: "+t)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||nB.isNaN(this.getZ())&&nB.isNaN(t.getZ()))}equals(t){return t instanceof gB&&this.equals2D(t)}equalInZ(t,e){return $_.equalsWithTolerance(this.getZ(),t.getZ(),e)}setX(t){this.x=t}compareTo(t){const e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}getX(){return this.x}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return hB.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}copy(){return new gB(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){const e=this.x-t.x,i=this.y-t.y,n=this.getZ()-t.getZ();return Math.sqrt(e*e+i*i+n*n)}getY(){return this.y}setY(t){this.y=t}distance(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}hashCode(){let t=17;return t=37*t+gB.hashCode(this.x),t=37*t+gB.hashCode(this.y),t}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[sB,oB,AB]}}class pB{constructor(){pB.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)pB.constructor_.call(this,2);else if(1===arguments.length){const t=arguments[0];if(2!==t&&3!==t)throw new eB("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,e){return t<e?-1:t>e?1:nB.isNaN(t)?nB.isNaN(e)?0:-1:nB.isNaN(e)?1:0}compare(t,e){const i=pB.compare(t.x,e.x);if(0!==i)return i;const n=pB.compare(t.y,e.y);if(0!==n)return n;if(this._dimensionsToTest<=2)return 0;return pB.compare(t.getZ(),e.getZ())}get interfaces_(){return[rB]}}function fB(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}gB.DimensionalComparator=pB,gB.NULL_ORDINATE=nB.NaN,gB.X=0,gB.Y=1,gB.Z=2,gB.M=3;class mB{getM(t){if(this.hasM()){const e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return nB.NaN}setOrdinate(t,e,i){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):nB.NaN}size(){}getOrdinate(t,e){}getCoordinate(){}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}get interfaces_(){return[oB]}}mB.X=0,mB.Y=1,mB.Z=2,mB.M=3;class yB{create(){if(1===arguments.length)arguments[0]instanceof Array||fB(arguments[0],mB);else if(2===arguments.length);else if(3===arguments.length){const t=arguments[0],e=arguments[1];return this.create(t,e)}}}class _B{filter(t){}}class BB{constructor(){BB.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof gB){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof BB){const t=arguments[0];this.init(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.init(t,e,i,n)}}static intersects(){if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];let s=Math.min(i.x,n.x),o=Math.max(i.x,n.x),r=Math.min(t.x,e.x),A=Math.max(t.x,e.x);return!(r>o)&&(!(A<s)&&(s=Math.min(i.y,n.y),o=Math.max(i.y,n.y),r=Math.min(t.y,e.y),A=Math.max(t.y,e.y),!(r>o)&&!(A<s)))}}getArea(){return this.getWidth()*this.getHeight()}equals(t){if(!(t instanceof BB))return!1;const e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new BB;const e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,s=this._maxy<t._maxy?this._maxy:t._maxy;return new BB(e,n,i,s)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof gB){const t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof BB){const t=arguments[0];return!this.isNull()&&!t.isNull()&&(t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return!this.isNull()&&(t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof BB){const t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof gB){const t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof gB&&arguments[1]instanceof gB){const t=arguments[0],e=arguments[1];if(this.isNull())return!1;if((t.x<e.x?t.x:e.x)>this._maxx)return!1;if((t.x>e.x?t.x:e.x)<this._minx)return!1;if((t.y<e.y?t.y:e.y)>this._maxy)return!1;return!((t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof gB){const t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof BB){const t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}minExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(t){const e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}copy(){return new BB(this)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t>e?t:e}expandBy(){if(1===arguments.length){const t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof BB){const t=arguments[0];return this.covers(t)}if(arguments[0]instanceof gB){const t=arguments[0];return this.covers(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.covers(t,e)}}centre(){return this.isNull()?null:new gB((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof gB){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof BB){const t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),i<n?(this._miny=i,this._maxy=n):(this._miny=n,this._maxy=i)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);let i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)}hashCode(){let t=17;return t=37*t+gB.hashCode(this._minx),t=37*t+gB.hashCode(this._maxx),t=37*t+gB.hashCode(this._miny),t=37*t+gB.hashCode(this._maxy),t}get interfaces_(){return[sB,AB]}}class wB{constructor(){wB.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===wB.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(wB.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){const e=arguments[0],i=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,i)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(t){if(t.getTypeCode()===wB.TYPECODE_GEOMETRYCOLLECTION)throw new eB("This method does not support GeometryCollection arguments")}equal(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new BB(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){const i=t.iterator(),n=e.iterator();for(;i.hasNext()&&n.hasNext();){const t=i.next(),e=n.next(),s=t.compareTo(e);if(0!==s)return s}return i.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getClass()===t.getClass()}isGeometryCollectionOrDerived(){return this.getTypeCode()===wB.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===wB.TYPECODE_MULTIPOINT||this.getTypeCode()===wB.TYPECODE_MULTILINESTRING||this.getTypeCode()===wB.TYPECODE_MULTIPOLYGON}get interfaces_(){return[oB,sB,AB]}getClass(){return wB}static hasNonEmptyElements(t){for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(let e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}wB.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},wB.TYPECODE_POINT=0,wB.TYPECODE_MULTIPOINT=1,wB.TYPECODE_LINESTRING=2,wB.TYPECODE_LINEARRING=3,wB.TYPECODE_MULTILINESTRING=4,wB.TYPECODE_POLYGON=5,wB.TYPECODE_MULTIPOLYGON=6,wB.TYPECODE_GEOMETRYCOLLECTION=7,wB.TYPENAME_POINT="Point",wB.TYPENAME_MULTIPOINT="MultiPoint",wB.TYPENAME_LINESTRING="LineString",wB.TYPENAME_LINEARRING="LinearRing",wB.TYPENAME_MULTILINESTRING="MultiLineString",wB.TYPENAME_POLYGON="Polygon",wB.TYPENAME_MULTIPOLYGON="MultiPolygon",wB.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",wB.geometryChangedFilter={get interfaces_(){return[_B]},filter(t){t.geometryChangedAction()}};class CB{filter(t){}}class bB{static ofLine(t){const e=t.size();if(e<=1)return 0;let i=0;const n=new gB;t.getCoordinate(0,n);let s=n.x,o=n.y;for(let r=1;r<e;r++){t.getCoordinate(r,n);const e=n.x,A=n.y,a=e-s,l=A-o;i+=Math.sqrt(a*a+l*l),s=e,o=A}return i}}class vB{}class xB{static copyCoord(t,e,i,n){const s=Math.min(t.getDimension(),i.getDimension());for(let o=0;o<s;o++)i.setOrdinate(n,o,t.getOrdinate(e,o))}static isRing(t){const e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,mB.X)===t.getOrdinate(e-1,mB.X)&&t.getOrdinate(0,mB.Y)===t.getOrdinate(e-1,mB.Y))}static scroll(){if(2===arguments.length){if(fB(arguments[0],mB)&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];xB.scroll(t,e,xB.isRing(t))}else if(fB(arguments[0],mB)&&arguments[1]instanceof gB){const t=arguments[0],e=arguments[1],i=xB.indexOf(e,t);if(i<=0)return null;xB.scroll(t,i)}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(e<=0)return null;const n=t.copy(),s=i?t.size()-1:t.size();for(let i=0;i<s;i++)for(let o=0;o<t.getDimension();o++)t.setOrdinate(i,o,n.getOrdinate((e+i)%s,o));if(i)for(let e=0;e<t.getDimension();e++)t.setOrdinate(s,e,t.getOrdinate(0,e))}}static isEqual(t,e){const i=t.size();if(i!==e.size())return!1;const n=Math.min(t.getDimension(),e.getDimension());for(let s=0;s<i;s++)for(let i=0;i<n;i++){const n=t.getOrdinate(s,i),o=e.getOrdinate(s,i);if(t.getOrdinate(s,i)!==e.getOrdinate(s,i)&&(!nB.isNaN(n)||!nB.isNaN(o)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const t=arguments[0];return xB.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let i=-1,n=null;for(let s=arguments[1];s<=e;s++){const e=t.getCoordinate(s);(null===n||n.compareTo(e)>0)&&(n=e,i=s)}return i}}static extend(t,e,i){const n=t.create(i,e.getDimension()),s=e.size();if(xB.copy(e,0,n,0,s),s>0)for(let t=s;t<i;t++)xB.copy(e,s-1,n,t,1);return n}static reverse(t){const e=t.size()-1,i=Math.trunc(e/2);for(let n=0;n<=i;n++)xB.swap(t,n,e-n)}static swap(t,e,i){if(e===i)return null;for(let n=0;n<t.getDimension();n++){const s=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(i,n)),t.setOrdinate(i,n,s)}}static copy(t,e,i,n,s){for(let o=0;o<s;o++)xB.copyCoord(t,e+o,i,n+o)}static ensureValidRing(t,e){const i=e.size();if(0===i)return e;if(i<=3)return xB.createClosedRing(t,e,4);return e.getOrdinate(0,mB.X)===e.getOrdinate(i-1,mB.X)&&e.getOrdinate(0,mB.Y)===e.getOrdinate(i-1,mB.Y)?e:xB.createClosedRing(t,e,i+1)}static indexOf(t,e){for(let i=0;i<e.size();i++)if(t.x===e.getOrdinate(i,mB.X)&&t.y===e.getOrdinate(i,mB.Y))return i;return-1}static createClosedRing(t,e,i){const n=t.create(i,e.getDimension()),s=e.size();xB.copy(e,0,n,0,s);for(let t=s;t<i;t++)xB.copy(e,0,n,t,1);return n}static minCoordinate(t){let e=null;for(let i=0;i<t.size();i++){const n=t.getCoordinate(i);(null===e||e.compareTo(n)>0)&&(e=n)}return e}}class EB extends tB{constructor(t){super(t),this.name=Object.keys({UnsupportedOperationException:EB})[0]}}class FB{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class SB{static toDimensionSymbol(t){switch(t){case SB.FALSE:return SB.SYM_FALSE;case SB.TRUE:return SB.SYM_TRUE;case SB.DONTCARE:return SB.SYM_DONTCARE;case SB.P:return SB.SYM_P;case SB.L:return SB.SYM_L;case SB.A:return SB.SYM_A}throw new eB("Unknown dimension value: "+t)}static toDimensionValue(t){switch(FB.toUpperCase(t)){case SB.SYM_FALSE:return SB.FALSE;case SB.SYM_TRUE:return SB.TRUE;case SB.SYM_DONTCARE:return SB.DONTCARE;case SB.SYM_P:return SB.P;case SB.SYM_L:return SB.L;case SB.SYM_A:return SB.A}throw new eB("Unknown dimension symbol: "+t)}}SB.P=0,SB.L=1,SB.A=2,SB.FALSE=-1,SB.TRUE=-2,SB.DONTCARE=-3,SB.SYM_FALSE="F",SB.SYM_TRUE="T",SB.SYM_DONTCARE="*",SB.SYM_P="0",SB.SYM_L="1",SB.SYM_A="2";class IB{filter(t){}}class MB{filter(t,e){}isDone(){}isGeometryChanged(){}}class LB extends wB{constructor(){super(),LB.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];wB.constructor_.call(this,e),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new BB:this._points.expandEnvelope(new BB)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new LB(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const i=t;if(this._points.size()!==i._points.size())return!1;for(let t=0;t<this._points.size();t++)if(!this.equal(this._points.getCoordinate(t),i._points.getCoordinate(t),e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){const e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){const t=this._points.copy();xB.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?SB.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const t=this._points.copy();return xB.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return wB.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return bB.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let e=0,i=0;for(;e<this._points.size()&&i<t._points.size();){const n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i));if(0!==n)return n;e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(fB(arguments[0],CB)){const t=arguments[0];for(let e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(fB(arguments[0],MB)){const t=arguments[0];if(0===this._points.size())return null;for(let e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(fB(arguments[0],IB)){arguments[0].filter(this)}else if(fB(arguments[0],_B)){arguments[0].filter(this)}}getBoundary(){throw new EB}isEquivalentClass(t){return t instanceof LB}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return wB.TYPENAME_LINESTRING}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new eB("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}get interfaces_(){return[vB]}}class UB{}class QB extends tB{constructor(t){super(t),this.name=Object.keys({IllegalStateException:QB})[0]}}let TB=class extends wB{constructor(){super(),TB.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const t=arguments[0],e=arguments[1];wB.constructor_.call(this,e),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new BB;const t=new BB;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new TB(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return SB.FALSE}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return wB.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new QB("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(fB(arguments[0],CB)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(fB(arguments[0],MB)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else if(fB(arguments[0],IB)){arguments[0].filter(this)}else if(fB(arguments[0],_B)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return wB.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new QB("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),hB.isTrue(t.size()<=1),this._coordinates=t}isSimple(){return!0}get interfaces_(){return[UB]}};class kB{static ofRing(){if(arguments[0]instanceof Array){const t=arguments[0];return Math.abs(kB.ofRingSigned(t))}if(fB(arguments[0],mB)){const t=arguments[0];return Math.abs(kB.ofRingSigned(t))}}static ofRingSigned(){if(arguments[0]instanceof Array){const t=arguments[0];if(t.length<3)return 0;let e=0;const i=t[0].x;for(let n=1;n<t.length-1;n++){const s=t[n].x-i,o=t[n+1].y;e+=s*(t[n-1].y-o)}return e/2}if(fB(arguments[0],mB)){const t=arguments[0],e=t.size();if(e<3)return 0;const i=new gB,n=new gB,s=new gB;t.getCoordinate(0,n),t.getCoordinate(1,s);const o=n.x;s.x-=o;let r=0;for(let A=1;A<e-1;A++)i.y=n.y,n.x=s.x,n.y=s.y,t.getCoordinate(A+1,s),s.x-=o,r+=n.x*(i.y-s.y);return r/2}}}class RB{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class PB extends tB{constructor(t){super(t),this.name=Object.keys({IndexOutOfBoundsException:PB})[0]}}class DB extends RB{get(){}set(){}isEmpty(){}}class OB extends tB{constructor(t){super(t),this.name=Object.keys({NoSuchElementException:OB})[0]}}class NB extends DB{constructor(t){super(),this.array=[],t instanceof RB&&this.addAll(t)}get interfaces_(){return[DB,RB]}ensureCapacity(){}add(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(const e of t)this.array.push(e)}set(t,e){const i=this.array[t];return this.array[t]=e,i}iterator(){return new HB(this)}get(t){if(t<0||t>=this.size())throw new PB;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort(((e,i)=>t.compare(e,i))):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let e=0,i=this.array.length;e<i;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}[Symbol.iterator](){return this.array.values()}}let HB=class{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new OB;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}};class GB{static sort(){const t=arguments[0];if(1===arguments.length)t.sort(((t,e)=>t.compareTo(e)));else if(2===arguments.length)t.sort(((t,e)=>arguments[1].compare(t,e)));else if(3===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort();const i=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of i)t.push(e)}else if(4===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort(((t,e)=>arguments[3].compare(t,e)));const i=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of i)t.push(e)}}static asList(t){const e=new NB;for(const i of t)e.add(i);return e}static copyOf(t,e){return t.slice(0,e)}}class KB{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class VB{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:this.value>t?1:0}static compare(t,e){return t<e?-1:t>e?1:0}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new VB(t)}}class WB{constructor(){WB.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this.init(t)}else if(arguments[0]instanceof WB){const t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){const t=arguments[0];WB.constructor_.call(this,WB.parse(t))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t,e)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];return WB.determinant(WB.valueOf(t),WB.valueOf(e),WB.valueOf(i),WB.valueOf(n))}if(arguments[3]instanceof WB&&arguments[2]instanceof WB&&arguments[0]instanceof WB&&arguments[1]instanceof WB){const t=arguments[1],e=arguments[2],i=arguments[3];return arguments[0].multiply(i).selfSubtract(t.multiply(e))}}static sqr(t){return WB.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){const t=arguments[0];return WB.parse(t)}if("number"==typeof arguments[0]){return new WB(arguments[0])}}static sqrt(t){return WB.valueOf(t).sqrt()}static parse(t){let e=0;const i=t.length;for(;FB.isWhitespace(t.charAt(e));)e++;let n=!1;if(e<i){const i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}const s=new WB;let o=0,r=0,A=0,a=!1;for(;!(e>=i);){const i=t.charAt(e);if(e++,FB.isDigit(i)){const t=i-"0";s.selfMultiply(WB.TEN),s.selfAdd(t),o++}else{if("."!==i){if("e"===i||"E"===i){const i=t.substring(e);try{A=VB.parseInt(i)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+i+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+i+"' at position "+e+" in string "+t)}r=o,a=!0}}let l=s;a||(r=o);const h=o-r-A;if(0===h)l=s;else if(h>0){const t=WB.TEN.pow(h);l=s.divide(t)}else if(h<0){const t=WB.TEN.pow(-h);l=s.multiply(t)}return n?l.negate():l}static createNaN(){return new WB(nB.NaN,nB.NaN)}static copy(t){return new WB(t)}static magnitude(t){const e=Math.abs(t),i=Math.log(e)/Math.log(10);let n=Math.trunc(Math.floor(i));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){const i=new KB;for(let n=0;n<e;n++)i.append(t);return i.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){let i=this.abs(),n=WB.magnitude(i._hi);const s=WB.TEN.pow(n);i=i.divide(s),i.gt(WB.TEN)?(i=i.divide(WB.TEN),n+=1):i.lt(WB.ONE)&&(i=i.multiply(WB.TEN),n-=1);const o=n+1,r=new KB,A=WB.MAX_PRINT_DIGITS-1;for(let e=0;e<=A;e++){t&&e===o&&r.append(".");const n=Math.trunc(i._hi);if(n<0)break;let s=!1,a=0;n>9?(s=!0,a="9"):a="0"+n,r.append(a),i=i.subtract(WB.valueOf(n)).multiply(WB.TEN),s&&i.selfAdd(WB.TEN);let l=!0;const h=WB.magnitude(i._hi);if(h<0&&Math.abs(h)>=A-e&&(l=!1),!l)break}return e[0]=n,r.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof WB){const t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){const t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof WB){const t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof WB){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof WB){const t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null,n=null,s=null,o=null,r=null,A=null,a=null,l=null;return r=this._hi/t,A=WB.SPLIT*r,i=A-r,l=WB.SPLIT*t,i=A-i,n=r-i,s=l-t,a=r*t,s=l-s,o=t-s,l=i*s-a+i*o+n*s+n*o,A=(this._hi-a-l+this._lo-r*e)/t,l=r+A,this._hi=l,this._lo=r-l+A,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof WB){const t=arguments[0];let e=null,i=null,n=null,s=null,o=null,r=null,A=null,a=null;o=this._hi/t._hi,r=WB.SPLIT*o,e=r-o,a=WB.SPLIT*t._hi,e=r-e,i=o-e,n=a-t._hi,A=o*t._hi,n=a-n,s=t._hi-n,a=e*n-A+e*s+i*n+i*s,r=(this._hi-A-a+this._lo-o*t._lo)/t._hi,a=o+r;return new WB(a,o-a+r)}if("number"==typeof arguments[0]){const t=arguments[0];return nB.isNaN(t)?WB.createNaN():WB.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return WB.valueOf(1);let e=new WB(this),i=WB.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&i.selfMultiply(e),n/=2,n>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i}ceil(){if(this.isNaN())return WB.NaN;const t=Math.ceil(this._hi);let e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new WB(t,e)}compareTo(t){const e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){if(this.isNaN())return this;return this.add(.5).floor()}setValue(){if(arguments[0]instanceof WB){const t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){const t=arguments[0];return this.init(t),this}}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return WB.valueOf(0);if(this.isNegative())return WB.NaN;const t=1/Math.sqrt(this._hi),e=this._hi*t,i=WB.valueOf(e),n=this.subtract(i.sqr())._hi*(.5*t);return i.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof WB){const t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];let e=null,i=null,n=null,s=null,o=null,r=null;return n=this._hi+t,o=n-this._hi,s=n-o,s=t-o+(this._hi-s),r=s+this._lo,e=n+r,i=r+(n-e),this._hi=e+i,this._lo=i+(e-this._hi),this}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null,n=null,s=null,o=null,r=null,A=null,a=null,l=null;r=this._hi+t,s=this._lo+e,a=r-this._hi,l=s-this._lo,A=r-a,o=s-l,A=t-a+(this._hi-A),o=e-l+(this._lo-o),a=A+s,i=r+a,n=a+(r-i),a=o+n;const h=i+a,c=a+(i-h);return this._hi=h,this._lo=c,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof WB){const t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null,n=null,s=null,o=null,r=null,A=null;r=WB.SPLIT*this._hi,i=r-this._hi,A=WB.SPLIT*t,i=r-i,n=this._hi-i,s=A-t,r=this._hi*t,s=A-s,o=t-s,A=i*s-r+i*o+n*s+n*o+(this._hi*e+this._lo*t);const a=r+A;i=r-a;const l=A+i;return this._hi=a,this._lo=l,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return WB.NaN;const t=Math.floor(this._hi);let e=0;return t===this._hi&&(e=Math.floor(this._lo)),new WB(t,e)}negate(){return this.isNaN()?this:new WB(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}multiply(){if(arguments[0]instanceof WB){const t=arguments[0];return t.isNaN()?WB.createNaN():WB.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){const t=arguments[0];return nB.isNaN(t)?WB.createNaN():WB.copy(this).selfMultiply(t,0)}}isNaN(){return nB.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){const t=WB.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),n=e[0]+1;let s=i;if("."===i.charAt(0))s="0"+i;else if(n<0)s="0."+WB.stringOfChar("0",-n)+i;else if(-1===i.indexOf(".")){const t=n-i.length;s=i+WB.stringOfChar("0",t)+".0"}return this.isNegative()?"-"+s:s}reciprocal(){let t=null,e=null,i=null,n=null,s=null,o=null,r=null,A=null;s=1/this._hi,o=WB.SPLIT*s,t=o-s,A=WB.SPLIT*this._hi,t=o-t,e=s-t,i=A-this._hi,r=s*this._hi,i=A-i,n=this._hi-i,A=t*i-r+t*n+e*i+e*n,o=(1-r-A-s*this._lo)/this._hi;const a=s+o;return new WB(a,s-a+o)}toSciNotation(){if(this.isZero())return WB.SCI_NOT_ZERO;const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),n=WB.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new QB("Found leading zero: "+i);let s="";i.length>1&&(s=i.substring(1));const o=i.charAt(0)+"."+s;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?WB.NaN:this.isNegative()?this.negate():new WB(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof WB){const t=arguments[0];return WB.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){const t=arguments[0];return WB.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof WB){const t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?WB.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[AB,sB,oB]}}WB.PI=new WB(3.141592653589793,12246467991473532e-32),WB.TWO_PI=new WB(6.283185307179586,24492935982947064e-32),WB.PI_2=new WB(1.5707963267948966,6123233995736766e-32),WB.E=new WB(2.718281828459045,14456468917292502e-32),WB.NaN=new WB(nB.NaN,nB.NaN),WB.EPS=123259516440783e-46,WB.SPLIT=134217729,WB.MAX_PRINT_DIGITS=32,WB.TEN=WB.valueOf(10),WB.ONE=WB.valueOf(1),WB.SCI_NOT_EXPONENT_CHAR="E",WB.SCI_NOT_ZERO="0.0E0";class zB{static orientationIndex(t,e,i){const n=zB.orientationIndexFilter(t,e,i);if(n<=1)return n;const s=WB.valueOf(e.x).selfAdd(-t.x),o=WB.valueOf(e.y).selfAdd(-t.y),r=WB.valueOf(i.x).selfAdd(-e.x),A=WB.valueOf(i.y).selfAdd(-e.y);return s.selfMultiply(A).selfSubtract(o.selfMultiply(r)).signum()}static signOfDet2x2(){if(arguments[3]instanceof WB&&arguments[2]instanceof WB&&arguments[0]instanceof WB&&arguments[1]instanceof WB){const t=arguments[1],e=arguments[2],i=arguments[3];return arguments[0].multiply(i).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=WB.valueOf(t),o=WB.valueOf(e),r=WB.valueOf(i),A=WB.valueOf(n);return s.multiply(A).selfSubtract(o.multiply(r)).signum()}}static intersection(t,e,i,n){const s=new WB(t.y).selfSubtract(e.y),o=new WB(e.x).selfSubtract(t.x),r=new WB(t.x).selfMultiply(e.y).selfSubtract(new WB(e.x).selfMultiply(t.y)),A=new WB(i.y).selfSubtract(n.y),a=new WB(n.x).selfSubtract(i.x),l=new WB(i.x).selfMultiply(n.y).selfSubtract(new WB(n.x).selfMultiply(i.y)),h=o.multiply(l).selfSubtract(a.multiply(r)),c=A.multiply(r).selfSubtract(s.multiply(l)),u=s.multiply(a).selfSubtract(A.multiply(o)),d=h.selfDivide(u).doubleValue(),g=c.selfDivide(u).doubleValue();return nB.isNaN(d)||nB.isInfinite(d)||nB.isNaN(g)||nB.isInfinite(g)?null:new gB(d,g)}static orientationIndexFilter(t,e,i){let n=null;const s=(t.x-i.x)*(e.y-i.y),o=(t.y-i.y)*(e.x-i.x),r=s-o;if(s>0){if(o<=0)return zB.signum(r);n=s+o}else{if(!(s<0))return zB.signum(r);if(o>=0)return zB.signum(r);n=-s-o}const A=zB.DP_SAFE_EPSILON*n;return r>=A||-r>=A?zB.signum(r):2}static signum(t){return t>0?1:t<0?-1:0}}zB.DP_SAFE_EPSILON=1e-15;class XB{static index(t,e,i){return zB.orientationIndex(t,e,i)}static isCCW(){if(arguments[0]instanceof Array){const t=arguments[0],e=t.length-1;if(e<3)throw new eB("Ring has fewer than 4 points, so orientation cannot be determined");let i=t[0],n=0;for(let s=1;s<=e;s++){const e=t[s];e.y>i.y&&(i=e,n=s)}let s=n;do{s-=1,s<0&&(s=e)}while(t[s].equals2D(i)&&s!==n);let o=n;do{o=(o+1)%e}while(t[o].equals2D(i)&&o!==n);const r=t[s],A=t[o];if(r.equals2D(i)||A.equals2D(i)||r.equals2D(A))return!1;const a=XB.index(r,i,A);let l=null;return l=0===a?r.x>A.x:a>0,l}if(fB(arguments[0],mB)){const t=arguments[0],e=t.size()-1;if(e<3)throw new eB("Ring has fewer than 4 points, so orientation cannot be determined");let i=t.getCoordinate(0),n=0;for(let s=1;s<=e;s++){const e=t.getCoordinate(s);e.y>i.y&&(i=e,n=s)}let s=null,o=n;do{o-=1,o<0&&(o=e),s=t.getCoordinate(o)}while(s.equals2D(i)&&o!==n);let r=null,A=n;do{A=(A+1)%e,r=t.getCoordinate(A)}while(r.equals2D(i)&&A!==n);if(s.equals2D(i)||r.equals2D(i)||s.equals2D(r))return!1;const a=XB.index(s,i,r);let l=null;return l=0===a?s.x>r.x:a>0,l}}}XB.CLOCKWISE=-1,XB.RIGHT=XB.CLOCKWISE,XB.COUNTERCLOCKWISE=1,XB.LEFT=XB.COUNTERCLOCKWISE,XB.COLLINEAR=0,XB.STRAIGHT=XB.COLLINEAR;class YB{}class qB extends wB{constructor(){super(),qB.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],i=arguments[2];if(wB.constructor_.call(this,i),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),wB.hasNullElements(e))throw new eB("holes must not contain null elements");if(t.isEmpty()&&wB.hasNonEmptyElements(e))throw new eB("shell is empty but holes are not");this._shell=t,this._holes=e}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const t=new Array(this.getNumPoints()).fill(null);let e=-1;const i=this._shell.getCoordinates();for(let n=0;n<i.length;n++)e++,t[e]=i[n];for(let i=0;i<this._holes.length;i++){const n=this._holes[i].getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i]}return t}getArea(){let t=0;t+=kB.ofRing(this._shell.getCoordinateSequence());for(let e=0;e<this._holes.length;e++)t-=kB.ofRing(this._holes[e].getCoordinateSequence());return t}copyInternal(){const t=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(let t=0;t<this._holes.length;t++)e[t]=this._holes[t].copy();return new qB(t,e,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal();for(let i=0;i<5;i++){const n=t.getX(i);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;const s=t.getY(i);if(s!==e.getMinY()&&s!==e.getMaxY())return!1}let i=t.getX(0),n=t.getY(0);for(let e=1;e<=4;e++){const s=t.getX(e),o=t.getY(e);if(s!==i===(o!==n))return!1;i=s,n=o}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const i=t,n=this._shell,s=i._shell;if(!n.equalsExact(s,e))return!1;if(this._holes.length!==i._holes.length)return!1;for(let t=0;t<this._holes.length;t++)if(!this._holes[t].equalsExact(i._holes[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);GB.sort(this._holes)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t.isEmpty())return null;const i=t.getCoordinateSequence(),n=xB.minCoordinateIndex(i,0,i.size()-2);xB.scroll(i,n,!0),XB.isCCW(i)===e&&xB.reverse(i)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}reverseInternal(){const t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null);for(let t=0;t<e.length;t++)e[t]=this.getInteriorRingN(t).reverse();return this.getFactory().createPolygon(t,e)}getTypeCode(){return wB.TYPECODE_POLYGON}getDimension(){return 2}getLength(){let t=0;t+=this._shell.getLength();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,e){const i=t.copy();return this.normalize(i,e),i}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=this._shell,i=t._shell;return e.compareToSameClass(i)}if(2===arguments.length){const t=arguments[1],e=arguments[0],i=this._shell,n=e._shell,s=i.compareToSameClass(n,t);if(0!==s)return s;const o=this.getNumInteriorRing(),r=e.getNumInteriorRing();let A=0;for(;A<o&&A<r;){const i=this.getInteriorRingN(A),n=e.getInteriorRingN(A),s=i.compareToSameClass(n,t);if(0!==s)return s;A++}return A<o?1:A<r?-1:0}}apply(){if(fB(arguments[0],CB)){const t=arguments[0];this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(fB(arguments[0],MB)){const t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(fB(arguments[0],IB)){arguments[0].filter(this)}else if(fB(arguments[0],_B)){const t=arguments[0];t.filter(this),this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return wB.TYPENAME_POLYGON}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[YB]}}let jB=class extends RB{contains(){}};class JB extends jB{}class ZB extends JB{constructor(t){super(),this.array=[],t instanceof RB&&this.addAll(t)}contains(t){for(const e of this.array)if(0===e.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let e=0,i=this.array.length;e<i;e++){if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t)}return this.array.push(t),!0}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new EB}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new $B(this.array)}}let $B=class{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new OB;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new EB}};class tw extends wB{constructor(){super(),tw.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(wB.constructor_.call(this,e),null===t&&(t=[]),wB.hasNullElements(t))throw new eB("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){const t=new BB;for(let e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){const t=new Array(this.getNumPoints()).fill(null);let e=-1;for(let i=0;i<this._geometries.length;i++){const n=this._geometries[i].getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i]}return t}getArea(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new tw(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const i=t;if(this._geometries.length!==i._geometries.length)return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].equalsExact(i._geometries[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();GB.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=SB.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}reverseInternal(){const t=this._geometries.length,e=new NB(t);for(let i=0;i<t;i++)e.add(this._geometries[i].reverse());return this.getFactory().buildGeometry(e)}getTypeCode(){return wB.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=SB.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getLength(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}getNumGeometries(){return this._geometries.length}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=new ZB(GB.asList(this._geometries)),i=new ZB(GB.asList(t._geometries));return this.compare(e,i)}if(2===arguments.length){const t=arguments[1],e=arguments[0],i=this.getNumGeometries(),n=e.getNumGeometries();let s=0;for(;s<i&&s<n;){const i=this.getGeometryN(s),n=e.getGeometryN(s),o=i.compareToSameClass(n,t);if(0!==o)return o;s++}return s<i?1:s<n?-1:0}}apply(){if(fB(arguments[0],CB)){const t=arguments[0];for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(fB(arguments[0],MB)){const t=arguments[0];if(0===this._geometries.length)return null;for(let e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(fB(arguments[0],IB)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(fB(arguments[0],_B)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}getBoundary(){return wB.checkNotGeometryCollection(this),hB.shouldNeverReachHere(),null}getGeometryType(){return wB.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}class ew extends tw{constructor(){super(),ew.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];tw.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new ew(t,this._factory)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){const t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return SB.FALSE}getTypeCode(){return wB.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return wB.TYPENAME_MULTIPOINT}get interfaces_(){return[UB]}}class iw extends LB{constructor(){super(),iw.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];LB.constructor_.call(this,t,e),this.validateConstruction()}copyInternal(){return new iw(this._points.copy(),this._factory)}getBoundaryDimension(){return SB.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return xB.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return wB.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new eB("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<iw.MINIMUM_VALID_SIZE)throw new eB("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return wB.TYPENAME_LINEARRING}}iw.MINIMUM_VALID_SIZE=4;class nw extends gB{constructor(){super(),nw.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)gB.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof nw){const t=arguments[0];gB.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof gB){const t=arguments[0];gB.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];gB.constructor_.call(this,t,e,gB.NULL_ORDINATE)}}setOrdinate(t,e){switch(t){case nw.X:this.x=e;break;case nw.Y:this.y=e;break;default:throw new eB("Invalid ordinate index: "+t)}}getZ(){return gB.NULL_ORDINATE}getOrdinate(t){switch(t){case nw.X:return this.x;case nw.Y:return this.y}throw new eB("Invalid ordinate index: "+t)}setZ(t){throw new eB("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new nw(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}nw.X=0,nw.Y=1,nw.Z=-1,nw.M=-1;class sw extends gB{constructor(){super(),sw.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)gB.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof sw){const t=arguments[0];gB.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof gB){const t=arguments[0];gB.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];gB.constructor_.call(this,t,e,gB.NULL_ORDINATE),this._m=i}}getM(){return this._m}setOrdinate(t,e){switch(t){case sw.X:this.x=e;break;case sw.Y:this.y=e;break;case sw.M:this._m=e;break;default:throw new eB("Invalid ordinate index: "+t)}}setM(t){this._m=t}getZ(){return gB.NULL_ORDINATE}getOrdinate(t){switch(t){case sw.X:return this.x;case sw.Y:return this.y;case sw.M:return this._m}throw new eB("Invalid ordinate index: "+t)}setZ(t){throw new eB("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new sw(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}sw.X=0,sw.Y=1,sw.Z=-1,sw.M=2;class ow extends gB{constructor(){super(),ow.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)gB.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof ow){const t=arguments[0];gB.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof gB){const t=arguments[0];gB.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];gB.constructor_.call(this,t,e,i),this._m=n}}getM(){return this._m}setOrdinate(t,e){switch(t){case gB.X:this.x=e;break;case gB.Y:this.y=e;break;case gB.Z:this.z=e;break;case gB.M:this._m=e;break;default:throw new eB("Invalid ordinate index: "+t)}}setM(t){this._m=t}getOrdinate(t){switch(t){case gB.X:return this.x;case gB.Y:return this.y;case gB.Z:return this.getZ();case gB.M:return this.getM()}throw new eB("Invalid ordinate index: "+t)}copy(){return new ow(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}class rw{static measures(t){return t instanceof nw?0:t instanceof sw||t instanceof ow?1:0}static dimension(t){return t instanceof nw?2:t instanceof sw?3:t instanceof ow?4:3}static create(){if(1===arguments.length){const t=arguments[0];return rw.create(t,0)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return 2===t?new nw:3===t&&0===e?new gB:3===t&&1===e?new sw:4===t&&1===e?new ow:new gB}}}class Aw extends NB{constructor(){super(),Aw.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&fB(arguments[0],RB)){const t=arguments[1];let e=!1;for(let i=arguments[0].iterator();i.hasNext();)this.add(i.next(),t),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){const t=super.clone.call(this);for(let e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}toCoordinateArray(){if(0===arguments.length)return this.toArray(Aw.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(Aw.coordArrayType);const t=this.size(),e=new Array(t).fill(null);for(let i=0;i<t;i++)e[i]=this.get(t-i-1);return e}}add(){if(1===arguments.length){const t=arguments[0];return super.add.call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof gB&&"boolean"==typeof arguments[1]){const t=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(t))return null}super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(arguments[2])for(let i=0;i<t.length;i++)this.add(t[i],e);else for(let i=t.length-1;i>=0;i--)this.add(t[i],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof gB){const t=arguments[0],e=arguments[1];if(!arguments[2]){const i=this.size();if(i>0){if(t>0){if(this.get(t-1).equals2D(e))return null}if(t<i){if(this.get(t).equals2D(e))return null}}}super.add.call(this,t,e)}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];let s=1;i>n&&(s=-1);for(let o=i;o!==n;o+=s)this.add(t[o],e);return!0}}closeRing(){if(this.size()>0){const t=this.get(0).copy();this.add(t,!1)}}}Aw.coordArrayType=new Array(0).fill(null);class aw{static log10(t){const e=Math.log(t);return nB.isInfinite(e)||nB.isNaN(e)?e:e/aw.LOG_10}static min(t,e,i,n){let s=t;return e<s&&(s=e),i<s&&(s=i),n<s&&(s=n),s}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){const t=arguments[1],e=arguments[2];let i=arguments[0];return t>i&&(i=t),e>i&&(i=e),i}if(4===arguments.length){const t=arguments[1],e=arguments[2],i=arguments[3];let n=arguments[0];return t>n&&(n=t),e>n&&(n=e),i>n&&(n=i),n}}static average(t,e){return(t+e)/2}}aw.LOG_10=Math.log(10);class lw{static arraycopy(t,e,i,n,s){let o=0;for(let r=e;r<e+s;r++)i[n+o]=t[r],o++}static getProperty(t){return{"line.separator":"\n"}[t]}}class hw{static isRing(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}static ptNotInList(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(hw.indexOf(n,e)<0)return n}return null}static scroll(t,e){const i=hw.indexOf(e,t);if(i<0)return null;const n=new Array(t.length).fill(null);lw.arraycopy(t,i,n,0,t.length-i),lw.arraycopy(t,0,n,t.length-i,i),lw.arraycopy(n,0,t,0,t.length)}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(0!==i.compare(t[n],e[n]))return!1;return!0}}static intersection(t,e){const i=new Aw;for(let n=0;n<t.length;n++)e.intersects(t[n])&&i.add(t[n],!0);return i.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let e=0;for(const i of t)e=Math.max(e,rw.measures(i));return e}static hasRepeatedPoints(t){for(let e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static removeRepeatedPoints(t){if(!hw.hasRepeatedPoints(t))return t;return new Aw(t,!1).toCoordinateArray()}static reverse(t){const e=t.length-1,i=Math.trunc(e/2);for(let n=0;n<=i;n++){const i=t[n];t[n]=t[e-n],t[e-n]=i}}static removeNull(t){let e=0;for(let i=0;i<t.length;i++)null!==t[i]&&e++;const i=new Array(e).fill(null);if(0===e)return i;let n=0;for(let e=0;e<t.length;e++)null!==t[e]&&(i[n++]=t[e]);return i}static copyDeep(){if(1===arguments.length){const t=arguments[0],e=new Array(t.length).fill(null);for(let i=0;i<t.length;i++)e[i]=t[i].copy();return e}if(5===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4];for(let o=0;o<s;o++)i[n+o]=t[e+o].copy()}}static isEqualReversed(t,e){for(let i=0;i<t.length;i++){const n=t[i],s=e[t.length-i-1];if(0!==n.compareTo(s))return!1}return!0}static envelope(t){const e=new BB;for(let i=0;i<t.length;i++)e.expandToInclude(t[i]);return e}static toCoordinateArray(t){return t.toArray(hw.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let e=0;for(const i of t)e=Math.max(e,rw.dimension(i));return e}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(let i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1}static increasingDirection(t){for(let e=0;e<Math.trunc(t.length/2);e++){const i=t.length-1-e,n=t[e].compareTo(t[i]);if(0!==n)return n}return 1}static compare(t,e){let i=0;for(;i<t.length&&i<e.length;){const n=t[i].compareTo(e[i]);if(0!==n)return n;i++}return i<e.length?-1:i<t.length?1:0}static minCoordinate(t){let e=null;for(let i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e}static extract(t,e,i){e=aw.clamp(e,0,t.length);let n=(i=aw.clamp(i,-1,t.length))-e+1;i<0&&(n=0),e>=t.length&&(n=0),i<e&&(n=0);const s=new Array(n).fill(null);if(0===n)return s;let o=0;for(let n=e;n<=i;n++)s[o++]=t[n];return s}}hw.ForwardComparator=class{compare(t,e){const i=t,n=e;return hw.compare(i,n)}get interfaces_(){return[rB]}},hw.BidirectionalComparator=class{compare(t,e){const i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;const s=hw.compare(i,n);return hw.isEqualReversed(i,n)?0:s}OLDcompare(t,e){const i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;const s=hw.increasingDirection(i),o=hw.increasingDirection(n);let r=s>0?0:i.length-1,A=o>0?0:i.length-1;for(let t=0;t<i.length;t++){const t=i[r].compareTo(n[A]);if(0!==t)return t;r+=s,A+=o}return 0}get interfaces_(){return[rB]}},hw.coordArrayType=new Array(0).fill(null);class cw{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class uw{constructor(){uw.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];uw.constructor_.call(this,t,hw.dimension(t),hw.measures(t))}else if(Number.isInteger(arguments[0])){const t=arguments[0];this._coordinates=new Array(t).fill(null);for(let e=0;e<t;e++)this._coordinates[e]=new gB}else if(fB(arguments[0],mB)){const t=arguments[0];if(null===t)return this._coordinates=new Array(0).fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=new Array(t.size()).fill(null);for(let e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];uw.constructor_.call(this,t,e,hw.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];this._coordinates=new Array(t).fill(null),this._dimension=e;for(let i=0;i<t;i++)this._coordinates[i]=rw.create(e)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];this._dimension=e,this._measures=i,this._coordinates=null===t?new Array(0).fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];this._coordinates=new Array(t).fill(null),this._dimension=e,this._measures=i;for(let e=0;e<t;e++)this._coordinates[e]=this.createCoordinate()}}getM(t){return this.hasM()?this._coordinates[t].getM():nB.NaN}setOrdinate(t,e,i){switch(e){case mB.X:this._coordinates[t].x=i;break;case mB.Y:this._coordinates[t].y=i;break;default:this._coordinates[t].setOrdinate(e,i)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():nB.NaN}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case mB.X:return this._coordinates[t].x;case mB.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}getCoordinate(){if(1===arguments.length){const t=arguments[0];return this._coordinates[t]}if(2===arguments.length){const t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}getCoordinateCopy(t){const e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}createCoordinate(){return rw.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){const t=new Array(this.size()).fill(null);for(let e=0;e<this._coordinates.length;e++){const i=this.createCoordinate();i.setCoordinate(this._coordinates[e]),t[e]=i}return new uw(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const t=new cw(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}get interfaces_(){return[mB,AB]}}class dw{static instance(){return dw.instanceObject}readResolve(){return dw.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){return new uw(arguments[0])}if(fB(arguments[0],mB)){return new uw(arguments[0])}}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new uw(arguments[0],t)}if(3===arguments.length){let t=arguments[2],e=arguments[1]-t;return t>1&&(t=1),e>3&&(e=3),e<2&&(e=2),new uw(arguments[0],e+t,t)}}}get interfaces_(){return[yB,AB]}}dw.instanceObject=new dw;class gw extends tw{constructor(){super(),gw.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];tw.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new gw(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return wB.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new NB;for(let e=0;e<this._geometries.length;e++){const i=this._geometries[e].getBoundary();for(let e=0;e<i.getNumGeometries();e++)t.add(i.getGeometryN(e))}const e=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(e))}getGeometryType(){return wB.TYPENAME_MULTIPOLYGON}get interfaces_(){return[YB]}}let pw=class{get(){}put(){}size(){}values(){}entrySet(){}};class fw extends jB{constructor(t){super(),this.map=new Map,t instanceof RB&&this.addAll(t)}contains(t){const e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}add(t){const e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new EB}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new mw(this.map)}[Symbol.iterator](){return this.map}}let mw=class{constructor(t){this.iterator=t.values();const{done:e,value:i}=this.iterator.next();this.done=e,this.value=i}next(){if(this.done)throw new OB;const t=this.value,{done:e,value:i}=this.iterator.next();return this.done=e,this.value=i,t}hasNext(){return!this.done}remove(){throw new EB}};class yw extends pw{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,e){return this.map.set(t,e),e}values(){const t=new NB,e=this.map.values();let i=e.next();for(;!i.done;)t.add(i.value),i=e.next();return t}entrySet(){const t=new fw;return this.map.entries().forEach((e=>t.add(e))),t}size(){return this.map.size()}}class _w{constructor(){_w.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=_w.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Bw){const t=arguments[0];this._modelType=t,t===_w.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const t=arguments[0];this._modelType=_w.FIXED,this.setScale(t)}else if(arguments[0]instanceof _w){const t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof _w))return!1;const e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){const e=t,i=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return VB.compare(i,n)}getScale(){return this._scale}isFloating(){return this._modelType===_w.FLOATING||this._modelType===_w.FLOATING_SINGLE}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===_w.FLOATING?t="Floating":this._modelType===_w.FLOATING_SINGLE?t="Floating-Single":this._modelType===_w.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){const t=arguments[0];if(nB.isNaN(t))return t;if(this._modelType===_w.FLOATING_SINGLE){return t}return this._modelType===_w.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof gB){const t=arguments[0];if(this._modelType===_w.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===_w.FLOATING?t=16:this._modelType===_w.FLOATING_SINGLE?t=6:this._modelType===_w.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}get interfaces_(){return[AB,sB]}}class Bw{constructor(){Bw.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const t=arguments[0];this._name=t,Bw.nameToTypeMap.put(t,this)}readResolve(){return Bw.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[AB]}}Bw.nameToTypeMap=new yw,_w.Type=Bw,_w.FIXED=new Bw("FIXED"),_w.FLOATING=new Bw("FLOATING"),_w.FLOATING_SINGLE=new Bw("FLOATING SINGLE"),_w.maximumPreciseValue=9007199254740992;class ww extends tw{constructor(){super(),ww.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];tw.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new ww(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof wB){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?SB.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return wB.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new EB}getGeometryType(){return wB.TYPENAME_MULTILINESTRING}get interfaces_(){return[vB]}}class Cw{constructor(){Cw.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)Cw.constructor_.call(this,new _w,0);else if(1===arguments.length){if(fB(arguments[0],yB)){const t=arguments[0];Cw.constructor_.call(this,new _w,0,t)}else if(arguments[0]instanceof _w){const t=arguments[0];Cw.constructor_.call(this,t,0,Cw.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];Cw.constructor_.call(this,t,e,Cw.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=i,this._SRID=e}}static toMultiPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;const e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return dw.instance()}static toMultiLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}createEmpty(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new eB("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new gB(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new gB(t.getMinX(),t.getMinY()),new gB(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new gB(t.getMinX(),t.getMinY()),new gB(t.getMinX(),t.getMaxY()),new gB(t.getMaxX(),t.getMaxY()),new gB(t.getMaxX(),t.getMinY()),new gB(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(fB(arguments[0],mB)){return new LB(arguments[0],this)}}}createMultiLineString(){if(0===arguments.length)return new ww(null,this);if(1===arguments.length){return new ww(arguments[0],this)}}buildGeometry(t){let e=null,i=!1,n=!1;for(let s=t.iterator();s.hasNext();){const t=s.next(),o=t.getTypeCode();null===e&&(e=o),o!==e&&(i=!0),t instanceof tw&&(n=!0)}if(null===e)return this.createGeometryCollection();if(i||n)return this.createGeometryCollection(Cw.toGeometryArray(t));const s=t.iterator().next();if(t.size()>1){if(s instanceof qB)return this.createMultiPolygon(Cw.toPolygonArray(t));if(s instanceof LB)return this.createMultiLineString(Cw.toLineStringArray(t));if(s instanceof TB)return this.createMultiPoint(Cw.toPointArray(t));hB.shouldNeverReachHere("Unhandled geometry type: "+s.getGeometryType())}return s}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof gB){const t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(fB(arguments[0],mB)){return new TB(arguments[0],this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(fB(arguments[0],mB)){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof iw){const t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length){return new qB(arguments[0],arguments[1],this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new tw(null,this);if(1===arguments.length){return new tw(arguments[0],this)}}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(fB(arguments[0],mB)){return new iw(arguments[0],this)}}}createMultiPolygon(){if(0===arguments.length)return new gw(null,this);if(1===arguments.length){return new gw(arguments[0],this)}}createMultiPoint(){if(0===arguments.length)return new ew(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new ew(arguments[0],this)}if(fB(arguments[0],mB)){const t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));const e=new Array(t.size()).fill(null);for(let i=0;i<t.size();i++){const n=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());xB.copy(t,i,n,0,1),e[i]=this.createPoint(n)}return this.createMultiPoint(e)}}}get interfaces_(){return[AB]}}function bw(t){return[t.x,t.y]}class vw{constructor(t,e){this.geometryFactory=t||new Cw,this.ol=e||"undefined"!=typeof ol&&ol}inject(t,e,i,n,s,o,r,A){this.ol={geom:{Point:t,LineString:e,LinearRing:i,Polygon:n,MultiPoint:s,MultiLineString:o,MultiPolygon:r,GeometryCollection:A}}}read(t){const e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0}convertFromPoint(t){const e=t.getCoordinates();return this.geometryFactory.createPoint(new gB(e[0],e[1]))}convertFromLineString(t){return this.geometryFactory.createLineString(t.getCoordinates().map((function(t){return new gB(t[0],t[1])})))}convertFromLinearRing(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map((function(t){return new gB(t[0],t[1])})))}convertFromPolygon(t){const e=t.getLinearRings();let i=null;const n=[];for(let t=0;t<e.length;t++){const s=this.convertFromLinearRing(e[t]);0===t?i=s:n.push(s)}return this.geometryFactory.createPolygon(i,n)}convertFromMultiPoint(t){const e=t.getPoints().map((function(t){return this.convertFromPoint(t)}),this);return this.geometryFactory.createMultiPoint(e)}convertFromMultiLineString(t){const e=t.getLineStrings().map((function(t){return this.convertFromLineString(t)}),this);return this.geometryFactory.createMultiLineString(e)}convertFromMultiPolygon(t){const e=t.getPolygons().map((function(t){return this.convertFromPolygon(t)}),this);return this.geometryFactory.createMultiPolygon(e)}convertFromCollection(t){const e=t.getGeometries().map((function(t){return this.read(t)}),this);return this.geometryFactory.createGeometryCollection(e)}write(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}convertToPoint(t){return new this.ol.geom.Point([t.x,t.y])}convertToLineString(t){const e=t._points._coordinates.map(bw);return new this.ol.geom.LineString(e)}convertToLinearRing(t){const e=t._points._coordinates.map(bw);return new this.ol.geom.LinearRing(e)}convertToPolygon(t){const e=[t._shell._points._coordinates.map(bw)];for(let i=0;i<t._holes.length;i++)e.push(t._holes[i]._points._coordinates.map(bw));return new this.ol.geom.Polygon(e)}convertToMultiPoint(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(bw))}convertToMultiLineString(t){const e=[];for(let i=0;i<t._geometries.length;i++)e.push(this.convertToLineString(t._geometries[i]).getCoordinates());return new this.ol.geom.MultiLineString(e)}convertToMultiPolygon(t){const e=[];for(let i=0;i<t._geometries.length;i++)e.push(this.convertToPolygon(t._geometries[i]).getCoordinates());return new this.ol.geom.MultiPolygon(e)}convertToCollection(t){const e=[];for(let i=0;i<t._geometries.length;i++){const n=t._geometries[i];e.push(this.write(n))}return new this.ol.geom.GeometryCollection(e)}}class xw{constructor(){xw.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}transformPoint(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}transformPolygon(t,e){let i=!0;const n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof iw&&!n.isEmpty()||(i=!1);const s=new NB;for(let e=0;e<t.getNumInteriorRing();e++){const n=this.transformLinearRing(t.getInteriorRingN(e),t);null===n||n.isEmpty()||(n instanceof iw||(i=!1),s.add(n))}if(i)return this._factory.createPolygon(n,s.toArray([]));{const t=new NB;return null!==n&&t.add(n),t.addAll(s),this._factory.buildGeometry(t)}}createCoordinateSequence(t){return this._factory.getCoordinateSequenceFactory().create(t)}getInputGeometry(){return this._inputGeom}transformMultiLineString(t,e){const i=new NB;for(let e=0;e<t.getNumGeometries();e++){const n=this.transformLineString(t.getGeometryN(e),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)}transformCoordinates(t,e){return this.copy(t)}transformLineString(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}transformMultiPoint(t,e){const i=new NB;for(let e=0;e<t.getNumGeometries();e++){const n=this.transformPoint(t.getGeometryN(e),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)}transformMultiPolygon(t,e){const i=new NB;for(let e=0;e<t.getNumGeometries();e++){const n=this.transformPolygon(t.getGeometryN(e),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)}copy(t){return t.copy()}transformGeometryCollection(t,e){const i=new NB;for(let e=0;e<t.getNumGeometries();e++){const n=this.transform(t.getGeometryN(e));null!==n&&(this._pruneEmptyGeometry&&n.isEmpty()||i.add(n))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Cw.toGeometryArray(i)):this._factory.buildGeometry(i)}transform(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof TB)return this.transformPoint(t,null);if(t instanceof ew)return this.transformMultiPoint(t,null);if(t instanceof iw)return this.transformLinearRing(t,null);if(t instanceof LB)return this.transformLineString(t,null);if(t instanceof ww)return this.transformMultiLineString(t,null);if(t instanceof qB)return this.transformPolygon(t,null);if(t instanceof gw)return this.transformMultiPolygon(t,null);if(t instanceof tw)return this.transformGeometryCollection(t,null);throw new eB("Unknown Geometry subtype: "+t.getGeometryType())}transformLinearRing(t,e){const i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);const n=i.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)}}class Ew{static intersection(t,e,i,n){const s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,r=t.x>e.x?t.x:e.x,A=t.y>e.y?t.y:e.y,a=i.x<n.x?i.x:n.x,l=i.y<n.y?i.y:n.y,h=i.x>n.x?i.x:n.x,c=i.y>n.y?i.y:n.y,u=((s>a?s:a)+(r<h?r:h))/2,d=((o>l?o:l)+(A<c?A:c))/2,g=t.x-u,p=t.y-d,f=e.x-u,m=e.y-d,y=i.x-u,_=i.y-d,B=n.x-u,w=n.y-d,C=p-m,b=f-g,v=g*m-f*p,x=_-w,E=B-y,F=y*w-B*_,S=C*E-x*b,I=(b*F-E*v)/S,M=(x*v-C*F)/S;return nB.isNaN(I)||nB.isInfinite(I)||nB.isNaN(M)||nB.isInfinite(M)?null:new gB(I+u,M+d)}}class Fw{static segmentToSegment(t,e,i,n){if(t.equals(e))return Fw.pointToSegment(t,i,n);if(i.equals(n))return Fw.pointToSegment(n,t,e);let s=!1;if(BB.intersects(t,e,i,n)){const o=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(0===o)s=!0;else{const r=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y),A=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o,a=r/o;(a<0||a>1||A<0||A>1)&&(s=!0)}}else s=!0;return s?aw.min(Fw.pointToSegment(t,i,n),Fw.pointToSegment(e,i,n),Fw.pointToSegment(i,t,e),Fw.pointToSegment(n,t,e)):0}static pointToSegment(t,e,i){if(e.x===i.x&&e.y===i.y)return t.distance(e);const n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),s=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;if(s<=0)return t.distance(e);if(s>=1)return t.distance(i);const o=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(t,e,i){const n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),s=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(s)*Math.sqrt(n)}static pointToSegmentString(t,e){if(0===e.length)throw new eB("Line array must contain at least one vertex");let i=t.distance(e[0]);for(let n=0;n<e.length-1;n++){const s=Fw.pointToSegment(t,e[n],e[n+1]);s<i&&(i=s)}return i}}const Sw="XY",Iw="XYZ",Mw="XYM",Lw="XYZM",Uw={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Qw="EMPTY",Tw=1,kw=2,Rw=3,Pw=4,Dw=5,Ow=6;for(const t in Uw)Uw[t].toUpperCase();class Nw{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let i,n=t;if("("==t)i=kw;else if(","==t)i=Dw;else if(")"==t)i=Rw;else if(this.isNumeric_(t)||"-"==t)i=Pw,n=this.readNumber_();else if(this.isAlpha_(t))i=Tw,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);i=Ow}return{position:e,value:n,type:i}}readNumber_(){let t;const e=this.index_;let i=!1,n=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}function Hw(t){if(t.isEmpty())return"";const e=t.getCoordinate(),i=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||i.push(e.z),void 0===e.m||Number.isNaN(e.m)||i.push(e.m),i.join(" ")}function Gw(t){const e=t.getCoordinates().map((t=>{const e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t].join(" "));return i.join(", ")}function Kw(t){const e=[];e.push("("+Gw(t.getExteriorRing())+")");for(let i=0,n=t.getNumInteriorRing();i<n;++i)e.push("("+Gw(t.getInteriorRingN(i))+")");return e.join(", ")}const Vw={Point:Hw,LineString:Gw,LinearRing:Gw,Polygon:Kw,MultiPoint:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push("("+Hw(t.getGeometryN(i))+")");return e.join(", ")},MultiLineString:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push("("+Gw(t.getGeometryN(i))+")");return e.join(", ")},MultiPolygon:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push("("+Kw(t.getGeometryN(i))+")");return e.join(", ")},GeometryCollection:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push(Ww(t.getGeometryN(i)));return e.join(", ")}};function Ww(t){let e=t.getGeometryType();const i=Vw[e];e=e.toUpperCase();const n=function(t){let e="";if(t.isEmpty())return e;const i=t.getCoordinate();return void 0===i.z||Number.isNaN(i.z)||(e+="Z"),void 0===i.m||Number.isNaN(i.m)||(e+="M"),e}(t);if(n.length>0&&(e+=" "+n),t.isEmpty())return e+" "+Qw;return e+" ("+i(t)+")"}class zw{constructor(t){this.geometryFactory=t||new Cw,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){const e=new Nw(t),i=new class{constructor(t,e){this.lexer_=t,this.token_,this.layout_=Sw,this.factory=e}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t=Sw;const e=this.token_;if(this.isTokenType(Tw)){const i=e.value;"Z"===i?t=Iw:"M"===i?t=Mw:"ZM"===i&&(t=Lw),t!==Sw&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(kw)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(Dw));if(this.match(Rw))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(kw)){const t=this.parsePoint_();if(this.match(Rw))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(kw)){const t=this.parsePointList_();if(this.match(Rw))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(kw)){const t=this.parseLineStringTextList_();if(this.match(Rw))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(kw)){let t;if(t=this.token_.type==kw?this.parsePointTextList_():this.parsePointList_(),this.match(Rw))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(kw)){const t=this.parseLineStringTextList_();if(this.match(Rw))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(kw)){const t=this.parsePolygonTextList_();if(this.match(Rw))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let i=0;i<e;++i){const e=this.token_;if(!this.match(Pw))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(Dw);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(Dw);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(Dw);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(Dw);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(Tw)&&this.token_.value==Qw;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.factory,e=t=>new gB(...t),i=i=>{const n=i.map((i=>t.createLinearRing(i.map(e))));return n.length>1?t.createPolygon(n[0],n.slice(1)):t.createPolygon(n[0])},n=this.token_;if(this.match(Tw)){const s=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==s){const e=this.parseGeometryCollectionText_();return t.createGeometryCollection(e)}switch(s){case"POINT":{const e=this.parsePointText_();return e?t.createPoint(new gB(...e)):t.createPoint()}case"LINESTRING":{const i=this.parseLineStringText_().map(e);return t.createLineString(i)}case"LINEARRING":{const i=this.parseLineStringText_().map(e);return t.createLinearRing(i)}case"POLYGON":{const e=this.parsePolygonText_();return e&&0!==e.length?i(e):t.createPolygon()}case"MULTIPOINT":{const i=this.parseMultiPointText_();if(!i||0===i.length)return t.createMultiPoint();const n=i.map(e).map((e=>t.createPoint(e)));return t.createMultiPoint(n)}case"MULTILINESTRING":{const i=this.parseMultiLineStringText_().map((i=>t.createLineString(i.map(e))));return t.createMultiLineString(i)}case"MULTIPOLYGON":{const e=this.parseMultiPolygonText_();if(!e||0===e.length)return t.createMultiPolygon();const n=e.map(i);return t.createMultiPolygon(n)}default:throw new Error("Invalid geometry type: "+s)}}throw new Error(this.formatErrorMessage_())}}(e,this.geometryFactory);return i.parse()}write(t){return Ww(t)}}class Xw{constructor(t){this.parser=new zw(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class Yw{constructor(){Yw.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map((()=>Array(2))),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new gB,this._intPt[1]=new gB,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static computeEdgeDistance(t,e,i){const n=Math.abs(i.x-e.x),s=Math.abs(i.y-e.y);let o=-1;if(t.equals(e))o=0;else if(t.equals(i))o=n>s?n:s;else{const i=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y);o=n>s?i:r,0!==o||t.equals(e)||(o=Math.max(i,r))}return hB.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(t,e,i){const n=t.x-e.x,s=t.y-e.y,o=Math.sqrt(n*n+s*s);return hB.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){const t=new cw;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}computeIntersection(t,e,i,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,i,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((()=>Array(2))),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const t=arguments[0];for(let e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==Yw.NO_INTERSECTION}getEdgeDistance(t,e){return Yw.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===Yw.COLLINEAR_INTERSECTION}toString(){return Xw.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Xw.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}isIntersection(t){for(let e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}Yw.DONT_INTERSECT=0,Yw.DO_INTERSECT=1,Yw.COLLINEAR=2,Yw.NO_INTERSECTION=0,Yw.POINT_INTERSECTION=1,Yw.COLLINEAR_INTERSECTION=2;class qw extends Yw{constructor(){super()}static nearestEndpoint(t,e,i,n){let s=t,o=Fw.pointToSegment(t,i,n),r=Fw.pointToSegment(e,i,n);return r<o&&(o=r,s=e),r=Fw.pointToSegment(i,t,e),r<o&&(o=r,s=i),r=Fw.pointToSegment(n,t,e),r<o&&(o=r,s=n),s}isInSegmentEnvelopes(t){const e=new BB(this._inputLines[0][0],this._inputLines[0][1]),i=new BB(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&i.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const t=arguments[0],e=arguments[1],i=arguments[2];if(this._isProper=!1,BB.intersects(e,i,t)&&0===XB.index(e,i,t)&&0===XB.index(i,e,t))return this._isProper=!0,(t.equals(e)||t.equals(i))&&(this._isProper=!1),this._result=Yw.POINT_INTERSECTION,null;this._result=Yw.NO_INTERSECTION}}intersection(t,e,i,n){let s=this.intersectionSafe(t,e,i,n);return this.isInSegmentEnvelopes(s)||(s=new gB(qw.nearestEndpoint(t,e,i,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(s),s}checkDD(t,e,i,n,s){const o=zB.intersection(t,e,i,n),r=this.isInSegmentEnvelopes(o);lw.out.println("DD in env = "+r+"  --------------------- "+o),s.distance(o)>1e-4&&lw.out.println("Distance = "+s.distance(o))}intersectionSafe(t,e,i,n){let s=Ew.intersection(t,e,i,n);return null===s&&(s=qw.nearestEndpoint(t,e,i,n)),s}computeCollinearIntersection(t,e,i,n){const s=BB.intersects(t,e,i),o=BB.intersects(t,e,n),r=BB.intersects(i,n,t),A=BB.intersects(i,n,e);return s&&o?(this._intPt[0]=i,this._intPt[1]=n,Yw.COLLINEAR_INTERSECTION):r&&A?(this._intPt[0]=t,this._intPt[1]=e,Yw.COLLINEAR_INTERSECTION):s&&r?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||o||A?Yw.COLLINEAR_INTERSECTION:Yw.POINT_INTERSECTION):s&&A?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||r?Yw.COLLINEAR_INTERSECTION:Yw.POINT_INTERSECTION):o&&r?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||A?Yw.COLLINEAR_INTERSECTION:Yw.POINT_INTERSECTION):o&&A?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||r?Yw.COLLINEAR_INTERSECTION:Yw.POINT_INTERSECTION):Yw.NO_INTERSECTION}computeIntersect(t,e,i,n){if(this._isProper=!1,!BB.intersects(t,e,i,n))return Yw.NO_INTERSECTION;const s=XB.index(t,e,i),o=XB.index(t,e,n);if(s>0&&o>0||s<0&&o<0)return Yw.NO_INTERSECTION;const r=XB.index(i,n,t),A=XB.index(i,n,e);if(r>0&&A>0||r<0&&A<0)return Yw.NO_INTERSECTION;return 0===s&&0===o&&0===r&&0===A?this.computeCollinearIntersection(t,e,i,n):(0===s||0===o||0===r||0===A?(this._isProper=!1,t.equals2D(i)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(i)||e.equals2D(n)?this._intPt[0]=e:0===s?this._intPt[0]=new gB(i):0===o?this._intPt[0]=new gB(n):0===r?this._intPt[0]=new gB(t):0===A&&(this._intPt[0]=new gB(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,i,n)),Yw.POINT_INTERSECTION)}}class jw{constructor(){jw.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)jw.constructor_.call(this,new gB,new gB);else if(1===arguments.length){const t=arguments[0];jw.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];jw.constructor_.call(this,new gB(t,e),new gB(i,n))}}static midPoint(t,e){return new gB((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof jw){const t=arguments[0],e=XB.index(this.p0,this.p1,t.p0),i=XB.index(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof gB){const t=arguments[0];return XB.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(t){if(!(t instanceof jw))return!1;const e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){const e=new qw;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof gB){const t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new gB(t);const e=this.projectionFactor(t),i=new gB;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof jw){const t=arguments[0],e=this.projectionFactor(t.p0),i=this.projectionFactor(t.p1);if(e>=1&&i>=1)return null;if(e<=0&&i<=0)return null;let n=this.project(t.p0);e<0&&(n=this.p0),e>1&&(n=this.p1);let s=this.project(t.p1);return i<0&&(s=this.p0),i>1&&(s=this.p1),new jw(n,s)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return Fw.pointToLinePerpendicular(t,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return jw.midPoint(this.p0,this.p1)}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;const e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,n=e*e+i*i;if(n<=0)return nB.NaN;return((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/n}closestPoints(t){const e=this.intersection(t);if(null!==e)return[e,e];const i=new Array(2).fill(null);let n=nB.MAX_VALUE,s=null;const o=this.closestPoint(t.p0);n=o.distance(t.p0),i[0]=o,i[1]=t.p0;const r=this.closestPoint(t.p1);s=r.distance(t.p1),s<n&&(n=s,i[0]=r,i[1]=t.p1);const A=t.closestPoint(this.p0);s=A.distance(this.p0),s<n&&(n=s,i[0]=this.p0,i[1]=A);const a=t.closestPoint(this.p1);return s=a.distance(this.p1),s<n&&(n=s,i[0]=this.p1,i[1]=a),i}closestPoint(t){const e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);return this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){const e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)}reverse(){const t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return Ew.intersection(this.p0,this.p1,t.p0,t.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){const i=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,r=Math.sqrt(s*s+o*o);let A=0,a=0;if(0!==e){if(r<=0)throw new QB("Cannot compute offset from zero-length line segment");A=e*s/r,a=e*o/r}return new gB(i-a,n+A)}setCoordinates(){if(1===arguments.length){const t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){let e=this.projectionFactor(t);return e<0?e=0:(e>1||nB.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){const e=this.p1.getY()-this.p0.getY(),i=this.p0.getX()-this.p1.getX(),n=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),s=e*e+i*i,o=e*e-i*i,r=t.getX(),A=t.getY();return new gB((-o*r-2*e*i*A-2*e*n)/s,(o*A-2*e*i*r-2*i*n)/s)}distance(){if(arguments[0]instanceof jw){const t=arguments[0];return Fw.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof gB){const t=arguments[0];return Fw.pointToSegment(t,this.p0,this.p1)}}pointAlong(t){const e=new gB;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){let t=nB.doubleToLongBits(this.p0.x);t^=31*nB.doubleToLongBits(this.p0.y);const e=Math.trunc(t)^Math.trunc(t>>32);let i=nB.doubleToLongBits(this.p1.x);i^=31*nB.doubleToLongBits(this.p1.y);return e^(Math.trunc(i)^Math.trunc(i>>32))}get interfaces_(){return[sB,AB]}}class Jw{constructor(){Jw.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new jw,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof LB&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];Jw.constructor_.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];this._srcPts=t,this._isClosed=Jw.isClosed(t),this._snapTolerance=e}}static isClosed(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}snapVertices(t,e){const i=this._isClosed?t.size()-1:t.size();for(let n=0;n<i;n++){const i=t.get(n),s=this.findSnapForVertex(i,e);null!==s&&(t.set(n,new gB(s)),0===n&&this._isClosed&&t.set(t.size()-1,new gB(s)))}}findSnapForVertex(t,e){for(let i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this._snapTolerance)return e[i]}return null}snapTo(t){const e=new Aw(this._srcPts);this.snapVertices(e,t),this.snapSegments(e,t);return e.toCoordinateArray()}snapSegments(t,e){if(0===e.length)return null;let i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(let n=0;n<i;n++){const i=e[n],s=this.findSegmentIndexToSnap(i,t);s>=0&&t.add(s+1,new gB(i),!1)}}findSegmentIndexToSnap(t,e){let i=nB.MAX_VALUE,n=-1;for(let s=0;s<e.size()-1;s++){if(this._seg.p0=e.get(s),this._seg.p1=e.get(s+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}const o=this._seg.distance(t);o<this._snapTolerance&&o<i&&(i=o,n=s)}return n}setAllowSnappingToSourceVertices(t){this._allowSnappingToSourceVertices=t}}class Zw{constructor(){Zw.constructor_.apply(this,arguments)}static constructor_(){this._srcGeom=null;const t=arguments[0];this._srcGeom=t}static snap(t,e,i){const n=new Array(2).fill(null),s=new Zw(t);n[0]=s.snapTo(e,i);const o=new Zw(e);return n[1]=o.snapTo(n[0],i),n}static computeOverlaySnapTolerance(){if(1===arguments.length){const t=arguments[0];let e=Zw.computeSizeBasedSnapTolerance(t);const i=t.getPrecisionModel();if(i.getType()===_w.FIXED){const t=1/i.getScale()*2/1.415;t>e&&(e=t)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1];return Math.min(Zw.computeOverlaySnapTolerance(t),Zw.computeOverlaySnapTolerance(e))}}static computeSizeBasedSnapTolerance(t){const e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zw.SNAP_PRECISION_FACTOR}static snapToSelf(t,e,i){return new Zw(t).snapToSelf(e,i)}snapTo(t,e){const i=this.extractTargetCoordinates(t);return new $w(e,i).transform(this._srcGeom)}snapToSelf(t,e){const i=this.extractTargetCoordinates(this._srcGeom),n=new $w(t,i,!0).transform(this._srcGeom);let s=n;return e&&fB(s,YB)&&(s=n.buffer(0)),s}computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10}extractTargetCoordinates(t){const e=new ZB,i=t.getCoordinates();for(let t=0;t<i.length;t++)e.add(i[t]);return e.toArray(new Array(0).fill(null))}computeMinimumSegmentLength(t){let e=nB.MAX_VALUE;for(let i=0;i<t.length-1;i++){const n=t[i].distance(t[i+1]);n<e&&(e=n)}return e}}Zw.SNAP_PRECISION_FACTOR=1e-9;class $w extends xw{constructor(){super(),$w.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){const t=arguments[0],e=arguments[1];this._snapTolerance=t,this._snapPts=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._snapTolerance=t,this._snapPts=e,this._isSelfSnap=i}}snapLine(t,e){const i=new Jw(t,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(e)}transformCoordinates(t,e){const i=t.toCoordinateArray(),n=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)}}class tC{static toLocationSymbol(t){switch(t){case tC.EXTERIOR:return"e";case tC.BOUNDARY:return"b";case tC.INTERIOR:return"i";case tC.NONE:return"-"}throw new eB("Unknown location value: "+t)}}tC.INTERIOR=0,tC.BOUNDARY=1,tC.EXTERIOR=2,tC.NONE=-1;class eC{constructor(){eC.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;const t=arguments[0];this._p=t}static locatePointInRing(){if(arguments[0]instanceof gB&&fB(arguments[1],mB)){const t=arguments[1],e=new eC(arguments[0]),i=new gB,n=new gB;for(let s=1;s<t.size();s++)if(t.getCoordinate(s,i),t.getCoordinate(s-1,n),e.countSegment(i,n),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof gB&&arguments[1]instanceof Array){const t=arguments[1],e=new eC(arguments[0]);for(let i=1;i<t.length;i++){const n=t[i],s=t[i-1];if(e.countSegment(n,s),e.isOnSegment())return e.getLocation()}return e.getLocation()}}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){let i=t.x,n=e.x;return i>n&&(i=e.x,n=t.x),this._p.x>=i&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){let i=XB.index(t,e,this._p);if(i===XB.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===XB.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==tC.EXTERIOR}getLocation(){return this._isPointOnSegment?tC.BOUNDARY:this._crossingCount%2==1?tC.INTERIOR:tC.EXTERIOR}isOnSegment(){return this._isPointOnSegment}}class iC{static isOnLine(){if(arguments[0]instanceof gB&&fB(arguments[1],mB)){const t=arguments[0],e=arguments[1],i=new qw,n=new gB,s=new gB,o=e.size();for(let r=1;r<o;r++)if(e.getCoordinate(r-1,n),e.getCoordinate(r,s),i.computeIntersection(t,n,s),i.hasIntersection())return!0;return!1}if(arguments[0]instanceof gB&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1],i=new qw;for(let n=1;n<e.length;n++){const s=e[n-1],o=e[n];if(i.computeIntersection(t,s,o),i.hasIntersection())return!0}return!1}}static locateInRing(t,e){return eC.locatePointInRing(t,e)}static isInRing(t,e){return iC.locateInRing(t,e)!==tC.EXTERIOR}}class nC{isInBoundary(t){}}class sC{isInBoundary(t){return t%2==1}get interfaces_(){return[nC]}}class oC{isInBoundary(t){return t>0}get interfaces_(){return[nC]}}class rC{isInBoundary(t){return t>1}get interfaces_(){return[nC]}}class AC{isInBoundary(t){return 1===t}get interfaces_(){return[nC]}}nC.Mod2BoundaryNodeRule=sC,nC.EndPointBoundaryNodeRule=oC,nC.MultiValentEndPointBoundaryNodeRule=rC,nC.MonoValentEndPointBoundaryNodeRule=AC,nC.MOD2_BOUNDARY_RULE=new sC,nC.ENDPOINT_BOUNDARY_RULE=new oC,nC.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new rC,nC.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new AC,nC.OGC_SFS_BOUNDARY_RULE=nC.MOD2_BOUNDARY_RULE;class aC{hasNext(){}next(){}remove(){}}class lC{constructor(){lC.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof tw)}next(){if(this._atStart)return this._atStart=!1,lC.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new OB;const t=this._parent.getGeometryN(this._index++);return t instanceof tw?(this._subcollectionIterator=new lC(t),this._subcollectionIterator.next()):t}remove(){throw new EB(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}get interfaces_(){return[aC]}}class hC{constructor(){hC.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=nC.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];if(null===t)throw new eB("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?iC.locateInRing(t,e.getCoordinates()):tC.EXTERIOR}intersects(t,e){return this.locate(t,e)!==tC.EXTERIOR}updateLocationInfo(t){t===tC.INTERIOR&&(this._isIn=!0),t===tC.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof TB&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof LB)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof qB)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof ww){const i=e;for(let e=0;e<i.getNumGeometries();e++){const n=i.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,n))}}else if(e instanceof gw){const i=e;for(let e=0;e<i.getNumGeometries();e++){const n=i.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,n))}}else if(e instanceof tw){const i=new lC(e);for(;i.hasNext();){const n=i.next();n!==e&&this.computeLocation(t,n)}}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?tC.INTERIOR:tC.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return tC.EXTERIOR;const i=e.getCoordinateSequence();return e.isClosed()||!t.equals(i.getCoordinate(0))&&!t.equals(i.getCoordinate(i.size()-1))?iC.isOnLine(t,i)?tC.INTERIOR:tC.EXTERIOR:tC.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return tC.EXTERIOR;const i=e.getExteriorRing(),n=this.locateInPolygonRing(t,i);if(n===tC.EXTERIOR)return tC.EXTERIOR;if(n===tC.BOUNDARY)return tC.BOUNDARY;for(let i=0;i<e.getNumInteriorRing();i++){const n=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,n);if(s===tC.INTERIOR)return tC.EXTERIOR;if(s===tC.BOUNDARY)return tC.BOUNDARY}return tC.INTERIOR}locate(t,e){return e.isEmpty()?tC.EXTERIOR:e instanceof LB?this.locateOnLineString(t,e):e instanceof qB?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?tC.BOUNDARY:this._numBoundaries>0||this._isIn?tC.INTERIOR:tC.EXTERIOR)}}class cC{static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eB("Cannot compute the octant for point ( "+t+", "+e+" )");const i=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?i>=n?0:1:i>=n?7:6:e>=0?i>=n?3:2:i>=n?4:5}if(arguments[0]instanceof gB&&arguments[1]instanceof gB){const t=arguments[0],e=arguments[1],i=e.x-t.x,n=e.y-t.y;if(0===i&&0===n)throw new eB("Cannot compute the octant for two identical points "+t);return cC.octant(i,n)}}}class uC{getCoordinates(){}size(){}getCoordinate(t){}isClosed(){}setData(t){}getData(){}}class dC{constructor(){dC.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._data=null;const t=arguments[0],e=arguments[1];this._pts=t,this._data=e}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:cC.octant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}getData(){return this._data}toString(){return Xw.toLineString(new uw(this._pts))}get interfaces_(){return[uC]}}class gC{getBounds(){}}class pC{constructor(){pC.constructor_.apply(this,arguments)}static constructor_(){this._bounds=null,this._item=null;const t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}getItem(){return this._item}getBounds(){return this._bounds}get interfaces_(){return[gC,AB]}}class fC{constructor(){fC.constructor_.apply(this,arguments)}static constructor_(){this._size=null,this._items=null,this._size=0,this._items=new NB,this._items.add(null)}poll(){if(this.isEmpty())return null;const t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}size(){return this._size}reorder(t){let e=null;const i=this._items.get(t);for(;2*t<=this._size&&(e=2*t,e!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)}clear(){this._size=0,this._items.clear()}peek(){if(this.isEmpty())return null;return this._items.get(1)}isEmpty(){return 0===this._size}add(t){this._items.add(null),this._size+=1;let e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}class mC{insert(t,e){}remove(t,e){}query(){}}class yC{constructor(){yC.constructor_.apply(this,arguments)}static constructor_(){if(this._childBoundables=new NB,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._level=t}}getLevel(){return this._level}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}addChildBoundable(t){hB.isTrue(null===this._bounds),this._childBoundables.add(t)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}get interfaces_(){return[gC,AB]}}const _C={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return _C.sort(t),t.get(0)},sort:function(t,e){const i=t.toArray();e?GB.sort(i,e):GB.sort(i);const n=t.iterator();for(let t=0,e=i.length;t<e;t++)n.next(),n.set(i[t])},singletonList:function(t){const e=new NB;return e.add(t),e}};class BC{static maxDistance(t,e,i,n,s,o,r,A){let a=BC.distance(t,e,s,o);return a=Math.max(a,BC.distance(t,e,r,A)),a=Math.max(a,BC.distance(i,n,s,o)),a=Math.max(a,BC.distance(i,n,r,A)),a}static distance(t,e,i,n){const s=i-t,o=n-e;return Math.sqrt(s*s+o*o)}static maximumDistance(t,e){const i=Math.min(t.getMinX(),e.getMinX()),n=Math.min(t.getMinY(),e.getMinY()),s=Math.max(t.getMaxX(),e.getMaxX()),o=Math.max(t.getMaxY(),e.getMaxY());return BC.distance(i,n,s,o)}static minMaxDistance(t,e){const i=t.getMinX(),n=t.getMinY(),s=t.getMaxX(),o=t.getMaxY(),r=e.getMinX(),A=e.getMinY(),a=e.getMaxX(),l=e.getMaxY();let h=BC.maxDistance(i,n,i,o,r,A,r,l);return h=Math.min(h,BC.maxDistance(i,n,i,o,r,A,a,A)),h=Math.min(h,BC.maxDistance(i,n,i,o,a,l,r,l)),h=Math.min(h,BC.maxDistance(i,n,i,o,a,l,a,A)),h=Math.min(h,BC.maxDistance(i,n,s,n,r,A,r,l)),h=Math.min(h,BC.maxDistance(i,n,s,n,r,A,a,A)),h=Math.min(h,BC.maxDistance(i,n,s,n,a,l,r,l)),h=Math.min(h,BC.maxDistance(i,n,s,n,a,l,a,A)),h=Math.min(h,BC.maxDistance(s,o,i,o,r,A,r,l)),h=Math.min(h,BC.maxDistance(s,o,i,o,r,A,a,A)),h=Math.min(h,BC.maxDistance(s,o,i,o,a,l,r,l)),h=Math.min(h,BC.maxDistance(s,o,i,o,a,l,a,A)),h=Math.min(h,BC.maxDistance(s,o,s,n,r,A,r,l)),h=Math.min(h,BC.maxDistance(s,o,s,n,r,A,a,A)),h=Math.min(h,BC.maxDistance(s,o,s,n,a,l,r,l)),h=Math.min(h,BC.maxDistance(s,o,s,n,a,l,a,A)),h}}class wC{constructor(){wC.constructor_.apply(this,arguments)}static constructor_(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;const t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()}static area(t){return t.getBounds().getArea()}static isComposite(t){return t instanceof yC}maximumDistance(){return BC.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}expandToQueue(t,e){const i=wC.isComposite(this._boundable1),n=wC.isComposite(this._boundable2);if(i&&n)return wC.area(this._boundable1)>wC.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new eB("neither boundable is composite")}isLeaves(){return!(wC.isComposite(this._boundable1)||wC.isComposite(this._boundable2))}compareTo(t){const e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}expand(t,e,i,n,s){for(let o=t.getChildBoundables().iterator();o.hasNext();){const t=o.next();let r=null;r=i?new wC(e,t,this._itemDistance):new wC(t,e,this._itemDistance),r.getDistance()<s&&n.add(r)}}getBoundable(t){return 0===t?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}get interfaces_(){return[sB]}}class CC{visitItem(t){}}class bC{constructor(){bC.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._built=!1,this._itemBoundables=new NB,this._nodeCapacity=null,0===arguments.length)bC.constructor_.call(this,bC.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];hB.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}static compareDoubles(t,e){return t>e?1:t<e?-1:0}queryInternal(){if(fB(arguments[2],CC)&&arguments[0]instanceof Object&&arguments[1]instanceof yC){const t=arguments[0],e=arguments[2],i=arguments[1].getChildBoundables();for(let n=0;n<i.size();n++){const s=i.get(n);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof yC?this.queryInternal(t,s,e):s instanceof pC?e.visitItem(s.getItem()):hB.shouldNeverReachHere())}}else if(fB(arguments[2],DB)&&arguments[0]instanceof Object&&arguments[1]instanceof yC){const t=arguments[0],e=arguments[2],i=arguments[1].getChildBoundables();for(let n=0;n<i.size();n++){const s=i.get(n);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof yC?this.queryInternal(t,s,e):s instanceof pC?e.add(s.getItem()):hB.shouldNeverReachHere())}}}getNodeCapacity(){return this._nodeCapacity}lastNode(t){return t.get(t.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const i=e.next();i instanceof yC?t+=this.size(i):i instanceof pC&&(t+=1)}return t}}removeItem(t,e){let i=null;for(let n=t.getChildBoundables().iterator();n.hasNext();){const t=n.next();t instanceof pC&&t.getItem()===e&&(i=t)}return null!==i&&(t.getChildBoundables().remove(i),!0)}itemsTree(){if(0===arguments.length){this.build();const t=this.itemsTree(this._root);return null===t?new NB:t}if(1===arguments.length){const t=arguments[0],e=new NB;for(let i=t.getChildBoundables().iterator();i.hasNext();){const t=i.next();if(t instanceof yC){const i=this.itemsTree(t);null!==i&&e.add(i)}else t instanceof pC?e.add(t.getItem()):hB.shouldNeverReachHere()}return e.size()<=0?null:e}}insert(t,e){hB.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new pC(t,e))}boundablesAtLevel(){if(1===arguments.length){const t=arguments[0],e=new NB;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(hB.isTrue(t>-2),e.getLevel()===t)return i.add(e),null;for(let n=e.getChildBoundables().iterator();n.hasNext();){const e=n.next();e instanceof yC?this.boundablesAtLevel(t,e,i):(hB.isTrue(e instanceof pC),-1===t&&i.add(e))}return null}}query(){if(1===arguments.length){const t=arguments[0];this.build();const e=new NB;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];let n=this.removeItem(e,i);if(n)return!0;let s=null;for(let o=e.getChildBoundables().iterator();o.hasNext();){const e=o.next();if(this.getIntersectsOp().intersects(e.getBounds(),t)&&(e instanceof yC&&(n=this.remove(t,e,i),n))){s=e;break}}return null!==s&&s.getChildBoundables().isEmpty()&&e.getChildBoundables().remove(s),n}}createHigherLevels(t,e){hB.isTrue(!t.isEmpty());const i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const i=e.next();if(i instanceof yC){const e=this.depth(i);e>t&&(t=e)}}return t+1}}createParentBoundables(t,e){hB.isTrue(!t.isEmpty());const i=new NB;i.add(this.createNode(e));const n=new NB(t);_C.sort(n,this.getComparator());for(let t=n.iterator();t.hasNext();){const n=t.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(n)}return i}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}get interfaces_(){return[AB]}}bC.IntersectsOp=function(){},bC.DEFAULT_NODE_CAPACITY=10;class vC{distance(t,e){}}class xC extends bC{constructor(){super(),xC.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)xC.constructor_.call(this,xC.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];bC.constructor_.call(this,t)}}static centreX(t){return xC.avg(t.getMinX(),t.getMaxX())}static avg(t,e){return(t+e)/2}static getItems(t){const e=new Array(t.size()).fill(null);let i=0;for(;!t.isEmpty();){const n=t.poll();e[i]=n.getBoundable(0).getItem(),i++}return e}static centreY(t){return xC.avg(t.getMinY(),t.getMaxY())}createParentBoundablesFromVerticalSlices(t,e){hB.isTrue(t.length>0);const i=new NB;for(let n=0;n<t.length;n++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return i}nearestNeighbourK(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,nB.POSITIVE_INFINITY,e)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let i=arguments[1];const n=new fC;n.add(t);const s=new fC;for(;!n.isEmpty()&&i>=0;){const t=n.poll(),o=t.getDistance();if(o>=i)break;if(t.isLeaves())if(s.size()<e)s.add(t);else{s.peek().getDistance()>o&&(s.poll(),s.add(t));i=s.peek().getDistance()}else t.expandToQueue(n,i)}return xC.getItems(s)}}createNode(t){return new EC(t)}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof BB))return super.insert.apply(this,arguments);{const t=arguments[0],e=arguments[1];if(t.isNull())return null;super.insert.call(this,t,e)}}getIntersectsOp(){return xC.intersectsOp}verticalSlices(t,e){const i=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),s=t.iterator();for(let t=0;t<e;t++){n[t]=new NB;let e=0;for(;s.hasNext()&&e<i;){const i=s.next();n[t].add(i),e++}}return n}query(){if(1===arguments.length){const t=arguments[0];return super.query.call(this,t)}if(2===arguments.length){const t=arguments[0],e=arguments[1];super.query.call(this,t,e)}}getComparator(){return xC.yComparator}createParentBoundablesFromVerticalSlice(t,e){return super.createParentBoundables.call(this,t,e)}remove(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof BB){const t=arguments[0],e=arguments[1];return super.remove.call(this,t,e)}return super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(t,e){hB.isTrue(!t.isEmpty());const i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),n=new NB(t);_C.sort(n,xC.xComparator);const s=this.verticalSlices(n,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(s,e)}nearestNeighbour(){if(1===arguments.length){if(fB(arguments[0],vC)){const t=arguments[0];if(this.isEmpty())return null;const e=new wC(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof wC){const t=arguments[0];let e=nB.POSITIVE_INFINITY,i=null;const n=new fC;for(n.add(t);!n.isEmpty()&&e>0;){const t=n.poll(),s=t.getDistance();if(s>=e)break;t.isLeaves()?(e=s,i=t):t.expandToQueue(n,e)}return null===i?null:[i.getBoundable(0).getItem(),i.getBoundable(1).getItem()]}}else{if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isEmpty()||t.isEmpty())return null;const i=new wC(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour(i)}if(3===arguments.length){const t=arguments[2],e=new pC(arguments[0],arguments[1]),i=new wC(this.getRoot(),e,t);return this.nearestNeighbour(i)[0]}if(4===arguments.length){const t=arguments[2],e=arguments[3],i=new pC(arguments[0],arguments[1]),n=new wC(this.getRoot(),i,t);return this.nearestNeighbourK(n,e)}}}isWithinDistance(){if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=nB.POSITIVE_INFINITY;const n=new fC;for(n.add(t);!n.isEmpty();){const t=n.poll(),s=t.getDistance();if(s>e)return!1;if(t.maximumDistance()<=e)return!0;if(t.isLeaves()){if(i=s,i<=e)return!0}else t.expandToQueue(n,i)}return!1}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=new wC(this.getRoot(),t.getRoot(),e);return this.isWithinDistance(n,i)}}get interfaces_(){return[mC,AB]}}class EC extends yC{constructor(){super(),EC.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0];yC.constructor_.call(this,t)}computeBounds(){let t=null;for(let e=this.getChildBoundables().iterator();e.hasNext();){const i=e.next();null===t?t=new BB(i.getBounds()):t.expandToInclude(i.getBounds())}return t}}xC.STRtreeNode=EC,xC.xComparator=new class{get interfaces_(){return[rB]}compare(t,e){return bC.compareDoubles(xC.centreX(t.getBounds()),xC.centreX(e.getBounds()))}},xC.yComparator=new class{get interfaces_(){return[rB]}compare(t,e){return bC.compareDoubles(xC.centreY(t.getBounds()),xC.centreY(e.getBounds()))}},xC.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(t,e){return t.intersects(e)}},xC.DEFAULT_NODE_CAPACITY=10;class FC{static relativeSign(t,e){return t<e?-1:t>e?1:0}static compare(t,e,i){if(e.equals2D(i))return 0;const n=FC.relativeSign(e.x,i.x),s=FC.relativeSign(e.y,i.y);switch(t){case 0:return FC.compareValue(n,s);case 1:return FC.compareValue(s,n);case 2:return FC.compareValue(s,-n);case 3:return FC.compareValue(-n,s);case 4:return FC.compareValue(-n,-s);case 5:return FC.compareValue(-s,-n);case 6:return FC.compareValue(-s,n);case 7:return FC.compareValue(n,-s)}return hB.shouldNeverReachHere("invalid octant value"),0}static compareValue(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}class SC{constructor(){SC.constructor_.apply(this,arguments)}static constructor_(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._segString=t,this.coord=new gB(e),this.segmentIndex=i,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(i))}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}compareTo(t){const e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?FC.compare(this._segmentOctant,this.coord,e.coord):1:-1}isEndPoint(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}toString(){return this.segmentIndex+":"+this.coord.toString()}isInterior(){return this._isInterior}get interfaces_(){return[sB]}}class IC extends pw{}function MC(t){return null==t?0:t.color}function LC(t){return null==t?null:t.parent}function UC(t,e){null!==t&&(t.color=e)}function QC(t){return null==t?null:t.left}function TC(t){return null==t?null:t.right}class kC extends IC{constructor(){super(),this.root_=null,this.size_=0}get(t){let e=this.root_;for(;null!==e;){const i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null}put(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let i,n,s=this.root_;do{if(i=s,n=t.compareTo(s.key),n<0)s=s.left;else{if(!(n>0)){const t=s.value;return s.value=e,t}s=s.right}}while(null!==s);const o={key:t,left:null,right:null,value:e,parent:i,color:0,getValue(){return this.value},getKey(){return this.key}};return n<0?i.left=o:i.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(t){let e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)LC(t)===QC(LC(LC(t)))?(e=TC(LC(LC(t))),1===MC(e)?(UC(LC(t),0),UC(e,0),UC(LC(LC(t)),1),t=LC(LC(t))):(t===TC(LC(t))&&(t=LC(t),this.rotateLeft(t)),UC(LC(t),0),UC(LC(LC(t)),1),this.rotateRight(LC(LC(t))))):(e=QC(LC(LC(t))),1===MC(e)?(UC(LC(t),0),UC(e,0),UC(LC(LC(t)),1),t=LC(LC(t))):(t===QC(LC(t))&&(t=LC(t),this.rotateRight(t)),UC(LC(t),0),UC(LC(LC(t)),1),this.rotateLeft(LC(LC(t)))));this.root_.color=0}values(){const t=new NB;let e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=kC.successor(e));)t.add(e.value);return t}entrySet(){const t=new fw;let e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=kC.successor(e));)t.add(e);return t}rotateLeft(t){if(null!=t){const e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}rotateRight(t){if(null!=t){const e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}{e=t.parent;let i=t;for(;null!==e&&i===e.right;)i=e,e=e.parent;return e}}size(){return this.size_}containsKey(t){let e=this.root_;for(;null!==e;){const i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return!0;e=e.right}}return!1}}class RC{constructor(){RC.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new kC,this._edge=null;const t=arguments[0];this._edge=t}getSplitCoordinates(){const t=new Aw;this.addEndpoints();const e=this.iterator();let i=e.next();for(;e.hasNext();){const n=e.next();this.addEdgeCoordinates(i,n,t),i=n}return t.toCoordinateArray()}addCollapsedNodes(){const t=new NB;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(let e=t.iterator();e.hasNext();){const t=e.next().intValue();this.add(this._edge.getCoordinate(t),t)}}createSplitEdgePts(t,e){let i=e.segmentIndex-t.segmentIndex+2;if(2===i)return[new gB(t.coord),new gB(e.coord)];const n=this._edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(n);s||i--;const o=new Array(i).fill(null);let r=0;o[r++]=new gB(t.coord);for(let i=t.segmentIndex+1;i<=e.segmentIndex;i++)o[r++]=this._edge.getCoordinate(i);return s&&(o[r]=new gB(e.coord)),o}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();){e.next().print(t)}}findCollapsesFromExistingVertices(t){for(let e=0;e<this._edge.size()-2;e++){const i=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);const n=this._edge.getCoordinate(e+2);i.equals2D(n)&&t.add(VB.valueOf(e+1))}}addEdgeCoordinates(t,e,i){const n=this.createSplitEdgePts(t,e);i.add(n,!1)}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints(),this.addCollapsedNodes();const e=this.iterator();let i=e.next();for(;e.hasNext();){const n=e.next(),s=this.createSplitEdge(i,n);t.add(s),i=n}}findCollapseIndex(t,e,i){if(!t.coord.equals2D(e.coord))return!1;let n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(i[0]=t.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(t){const e=new Array(1).fill(null),i=this.iterator();let n=i.next();for(;i.hasNext();){const s=i.next();this.findCollapseIndex(n,s,e)&&t.add(VB.valueOf(e[0])),n=s}}getEdge(){return this._edge}addEndpoints(){const t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}createSplitEdge(t,e){const i=this.createSplitEdgePts(t,e);return new DC(i,this._edge.getData())}add(t,e){const i=new SC(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(i);return null!==n?(hB.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(i,i),i)}checkSplitEdgesCorrectness(t){const e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new aB("bad split edge start point at "+i);const n=t.get(t.size()-1).getCoordinates(),s=n[n.length-1];if(!s.equals2D(e[e.length-1]))throw new aB("bad split edge end point at "+s)}}class PC{addIntersection(t,e){}get interfaces_(){return[uC]}}class DC{constructor(){DC.constructor_.apply(this,arguments)}static constructor_(){this._nodeList=new RC(this),this._pts=null,this._data=null;const t=arguments[0],e=arguments[1];this._pts=t,this._data=e}static getNodedSubstrings(){if(1===arguments.length){const t=arguments[0],e=new NB;return DC.getNodedSubstrings(t,e),e}if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){e.next().getNodeList().addSplitEdges(t)}}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}safeOctant(t,e){return t.equals2D(e)?0:cC.octant(t,e)}getData(){return this._data}addIntersection(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){const t=arguments[1],e=arguments[3],i=new gB(arguments[0].getIntersection(e));this.addIntersection(i,t)}}toString(){return Xw.toLineString(new uw(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(t,e){let i=e;const n=i+1;if(n<this._pts.length){const e=this._pts[n];t.equals2D(e)&&(i=n)}return this._nodeList.add(t,i)}addIntersections(t,e,i){for(let n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)}get interfaces_(){return[PC]}}class OC{constructor(){OC.constructor_.apply(this,arguments)}static constructor_(){this._overlapSeg1=new jw,this._overlapSeg2=new jw}overlap(){if(2===arguments.length);else if(4===arguments.length){const t=arguments[1],e=arguments[2],i=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}let NC=class{constructor(){NC.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=i,this._context=n}getLineSegment(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}computeSelect(t,e,i,n){const s=this._pts[e],o=this._pts[i];if(i-e==1)return n.select(this,e),null;if(!t.intersects(s,o))return null;const r=Math.trunc((e+i)/2);e<r&&this.computeSelect(t,e,r,n),r<i&&this.computeSelect(t,r,i,n)}getCoordinates(){const t=new Array(this._end-this._start+1).fill(null);let e=0;for(let i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t}computeOverlaps(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],o=arguments[5];if(e-t==1&&s-n==1)return o.overlap(this,t,i,n),null;if(!this.overlaps(t,e,i,n,s))return null;const r=Math.trunc((t+e)/2),A=Math.trunc((n+s)/2);t<r&&(n<A&&this.computeOverlaps(t,r,i,n,A,o),A<s&&this.computeOverlaps(t,r,i,A,s,o)),r<e&&(n<A&&this.computeOverlaps(r,e,i,n,A,o),A<s&&this.computeOverlaps(r,e,i,A,s,o))}}setId(t){this._id=t}select(t,e){this.computeSelect(t,this._start,this._end,e)}getEnvelope(){if(null===this._env){const t=this._pts[this._start],e=this._pts[this._end];this._env=new BB(t,e)}return this._env}overlaps(t,e,i,n,s){return BB.intersects(this._pts[t],this._pts[e],i._pts[n],i._pts[s])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}};class HC{static isNorthern(t){return t===HC.NE||t===HC.NW}static isOpposite(t,e){if(t===e)return!1;return 2===(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;const i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i}static isInHalfPlane(t,e){return e===HC.SE?t===HC.SE||t===HC.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new eB("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?HC.NE:HC.SE:e>=0?HC.NW:HC.SW}if(arguments[0]instanceof gB&&arguments[1]instanceof gB){const t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new eB("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?HC.NE:HC.SE:e.y>=t.y?HC.NW:HC.SW}}}HC.NE=0,HC.NW=1,HC.SW=2,HC.SE=3;class GC{static findChainEnd(t,e){let i=e;for(;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;const n=HC.quadrant(t[i],t[i+1]);let s=e+1;for(;s<t.length;){if(!t[s-1].equals2D(t[s])){if(HC.quadrant(t[s-1],t[s])!==n)break}s++}return s-1}static getChains(){if(1===arguments.length){const t=arguments[0];return GC.getChains(t,null)}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new NB;let n=0;do{const s=GC.findChainEnd(t,n),o=new NC(t,n,s,e);i.add(o),n=s}while(n<t.length-1);return i}}}class KC{computeNodes(t){}getNodedSubstrings(){}}class VC{constructor(){VC.constructor_.apply(this,arguments)}static constructor_(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.setSegmentIntersector(t)}}setSegmentIntersector(t){this._segInt=t}get interfaces_(){return[KC]}}class WC extends VC{constructor(){super(),WC.constructor_.apply(this,arguments)}static constructor_(){if(this._monoChains=new NB,this._index=new xC,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){const t=arguments[0];VC.constructor_.call(this,t)}}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return DC.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(t){for(let e=GC.getChains(t.getCoordinates(),t).iterator();e.hasNext();){const t=e.next();t.setId(this._idCounter++),this._index.insert(t.getEnvelope(),t),this._monoChains.add(t)}}computeNodes(t){this._nodedSegStrings=t;for(let e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}intersectChains(){const t=new zC(this._segInt);for(let e=this._monoChains.iterator();e.hasNext();){const i=e.next();for(let e=this._index.query(i.getEnvelope()).iterator();e.hasNext();){const n=e.next();if(n.getId()>i.getId()&&(i.computeOverlaps(n,t),this._nOverlaps++),this._segInt.isDone())return null}}}}class zC extends OC{constructor(){super(),zC.constructor_.apply(this,arguments)}static constructor_(){this._si=null;const t=arguments[0];this._si=t}overlap(){if(4!==arguments.length)return super.overlap.apply(this,arguments);{const t=arguments[1],e=arguments[2],i=arguments[3],n=arguments[0].getContext(),s=e.getContext();this._si.processIntersections(n,t,s,i)}}}WC.SegmentOverlapAction=zC;class XC extends aB{constructor(t,e){super(e?t+" [ "+e+" ]":t),this.pt=e?new gB(e):void 0,this.name=Object.keys({TopologyException:XC})[0]}getCoordinate(){return this.pt}}let YC=class{processIntersections(t,e,i,n){}isDone(){}};class qC{constructor(){qC.constructor_.apply(this,arguments)}static constructor_(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._keepIntersections=!0,this._isInteriorIntersectionsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new NB,this._intersectionCount=0;const t=arguments[0];this._li=t,this._interiorIntersection=null}static createAllIntersectionsFinder(t){const e=new qC(t);return e.setFindAllIntersections(!0),e}static isInteriorVertexIntersection(){if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[3];return(!arguments[2]||!i)&&!!t.equals2D(e)}if(8===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],o=arguments[5],r=arguments[6],A=arguments[7];return!!qC.isInteriorVertexIntersection(t,i,s,r)||(!!qC.isInteriorVertexIntersection(t,n,s,A)||(!!qC.isInteriorVertexIntersection(e,i,o,r)||!!qC.isInteriorVertexIntersection(e,n,o,A)))}}static createInteriorIntersectionCounter(t){const e=new qC(t);return e.setInteriorIntersectionsOnly(!0),e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}static createIntersectionCounter(t){const e=new qC(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}static isEndSegment(t,e){return 0===e||e>=t.size()-2}static createAnyIntersectionFinder(t){return new qC(t)}static createInteriorIntersectionsFinder(t){const e=new qC(t);return e.setFindAllIntersections(!0),e.setInteriorIntersectionsOnly(!0),e}setCheckEndSegmentsOnly(t){this._isCheckEndSegmentsOnly=t}getIntersectionSegments(){return this._intSegments}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(t){this._findAllIntersections=t}setKeepIntersections(t){this._keepIntersections=t}getIntersection(){return this._interiorIntersection}processIntersections(t,e,i,n){if(!this._findAllIntersections&&this.hasIntersection())return null;const s=t===i;if(s&&e===n)return null;if(this._isCheckEndSegmentsOnly){if(!(qC.isEndSegment(t,e)||qC.isEndSegment(i,n)))return null}const o=t.getCoordinate(e),r=t.getCoordinate(e+1),A=i.getCoordinate(n),a=i.getCoordinate(n+1),l=0===e,h=e+2===t.size(),c=0===n,u=n+2===i.size();this._li.computeIntersection(o,r,A,a);const d=this._li.hasIntersection()&&this._li.isInteriorIntersection();let g=!1;if(!this._isInteriorIntersectionsOnly){g=!(s&&Math.abs(n-e)<=1)&&qC.isInteriorVertexIntersection(o,r,A,a,l,h,c,u)}(d||g)&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=r,this._intSegments[2]=A,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}setInteriorIntersectionsOnly(t){this._isInteriorIntersectionsOnly=t}get interfaces_(){return[YC]}}class jC{constructor(){jC.constructor_.apply(this,arguments)}static constructor_(){this._li=new qw,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;const t=arguments[0];this._segStrings=t}static computeIntersections(t){const e=new jC(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()}execute(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}getIntersections(){return this._segInt.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(t){this._findAllIntersections=t}checkInteriorIntersections(){this._isValid=!0,this._segInt=new qC(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);const t=new WC;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new XC(this.getErrorMessage(),this._segInt.getIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";const t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Xw.toLineString(t[0],t[1])+" and "+Xw.toLineString(t[2],t[3])}}class JC{constructor(){JC.constructor_.apply(this,arguments)}static constructor_(){this._nv=null;const t=arguments[0];this._nv=new jC(JC.toSegmentStrings(t))}static toSegmentStrings(t){const e=new NB;for(let i=t.iterator();i.hasNext();){const t=i.next();e.add(new dC(t.getCoordinates(),t))}return e}static checkValid(t){new JC(t).checkValid()}checkValid(){this._nv.checkValid()}}class ZC{constructor(){ZC.constructor_.apply(this,arguments)}static constructor_(){this._mapOp=null;const t=arguments[0];this._mapOp=t}static map(t,e){return new ZC(e).map(t)}map(t){const e=new NB;for(let i=0;i<t.getNumGeometries();i++){const n=this._mapOp.map(t.getGeometryN(i));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(Cw.toGeometryArray(e))}}class $C{static opposite(t){return t===$C.LEFT?$C.RIGHT:t===$C.RIGHT?$C.LEFT:t}}$C.ON=0,$C.LEFT=1,$C.RIGHT=2;class tb{constructor(){tb.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){const t=arguments[0];this.init(1),this.location[$C.ON]=t}else if(arguments[0]instanceof tb){const t=arguments[0];if(this.init(t.location.length),null!==t)for(let e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.init(3),this.location[$C.ON]=t,this.location[$C.LEFT]=e,this.location[$C.RIGHT]=i}}setAllLocations(t){for(let e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==tC.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let e=0;e<this.location.length;e++)this.location[e]===tC.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){const t=new Array(3).fill(null);t[$C.ON]=this.location[$C.ON],t[$C.LEFT]=tC.NONE,t[$C.RIGHT]=tC.NONE,this.location=t}for(let e=0;e<this.location.length;e++)this.location[e]===tC.NONE&&e<t.location.length&&(this.location[e]=t.location[e])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const t=this.location[$C.LEFT];this.location[$C.LEFT]=this.location[$C.RIGHT],this.location[$C.RIGHT]=t}toString(){const t=new KB;return this.location.length>1&&t.append(tC.toLocationSymbol(this.location[$C.LEFT])),t.append(tC.toLocationSymbol(this.location[$C.ON])),this.location.length>1&&t.append(tC.toLocationSymbol(this.location[$C.RIGHT])),t.toString()}setLocations(t,e,i){this.location[$C.ON]=t,this.location[$C.LEFT]=e,this.location[$C.RIGHT]=i}get(t){return t<this.location.length?this.location[t]:tC.NONE}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===tC.NONE)return!0;return!1}setLocation(){if(1===arguments.length){const t=arguments[0];this.setLocation($C.ON,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(tC.NONE)}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(let e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}class eb{constructor(){eb.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const t=arguments[0];this.elt[0]=new tb(t),this.elt[1]=new tb(t)}else if(arguments[0]instanceof eb){const t=arguments[0];this.elt[0]=new tb(t.elt[0]),this.elt[1]=new tb(t.elt[1])}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[0]=new tb(tC.NONE),this.elt[1]=new tb(tC.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.elt[0]=new tb(t,e,i),this.elt[1]=new tb(t,e,i)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.elt[0]=new tb(tC.NONE,tC.NONE,tC.NONE),this.elt[1]=new tb(tC.NONE,tC.NONE,tC.NONE),this.elt[t].setLocations(e,i,n)}}static toLineLabel(t){const e=new eb(tC.NONE);for(let i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(let e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new tb(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){const t=arguments[0];return this.elt[t].get($C.ON)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){const t=new KB;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){const t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}setLocation(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setLocation($C.ON,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.elt[t].setLocation(e,i)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new tb(this.elt[t].location[0]))}}class ib{constructor(){ib.constructor_.apply(this,arguments)}static constructor_(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new NB,this._pts=new NB,this._label=new eb(tC.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new NB,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}computeRing(){if(null!==this._ring)return null;const t=new Array(this._pts.size()).fill(null);for(let e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=XB.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(t){this._startDe=t;let e=t,i=!0;do{if(null===e)throw new XC("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new XC("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);const t=e.getLabel();hB.isTrue(t.isArea()),this.mergeLabel(t),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(t){return this._pts.get(t)}computeMaxNodeDegree(){this._maxNodeDegree=0;let t=this._startDe;do{const e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}addPoints(t,e,i){const n=t.getCoordinates();if(e){let t=1;i&&(t=0);for(let e=t;e<n.length;e++)this._pts.add(n[e])}else{let t=n.length-2;i&&(t=n.length-1);for(let e=t;e>=0;e--)this._pts.add(n[e])}}isHole(){return this._isHole}setInResult(){let t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}containsPoint(t){const e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!iC.isInRing(t,e.getCoordinates()))return!1;for(let e=this._holes.iterator();e.hasNext();){if(e.next().containsPoint(t))return!1}return!0}addHole(t){this._holes.add(t)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){const t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){const t=arguments[1],e=arguments[0].getLocation(t,$C.RIGHT);if(e===tC.NONE)return null;if(this._label.getLocation(t)===tC.NONE)return this._label.setLocation(t,e),null}}setShell(t){this._shell=t,null!==t&&t.addHole(this)}toPolygon(t){const e=new Array(this._holes.size()).fill(null);for(let t=0;t<this._holes.size();t++)e[t]=this._holes.get(t).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}class nb extends ib{constructor(){super(),nb.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];ib.constructor_.call(this,t,e)}setEdgeRing(t,e){t.setMinEdgeRing(e)}getNext(t){return t.getNextMin()}}class sb extends ib{constructor(){super(),sb.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];ib.constructor_.call(this,t,e)}buildMinimalRings(){const t=new NB;let e=this._startDe;do{if(null===e.getMinEdgeRing()){const i=new nb(e,this._geometryFactory);t.add(i)}e=e.getNext()}while(e!==this._startDe);return t}setEdgeRing(t,e){t.setEdgeRing(e)}linkDirectedEdgesForMinimalEdgeRings(){let t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}getNext(t){return t.getNext()}}class ob{constructor(){ob.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._label=t}}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){hB.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}let rb=class extends ob{constructor(){super(),rb.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new eb(0,tC.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}computeMergedLocation(t,e){let i=tC.NONE;if(i=this._label.getLocation(e),!t.isNull(e)){const n=t.getLocation(e);i!==tC.BOUNDARY&&(i=n)}return i}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const t=arguments[0],e=arguments[1];null===this._label?this._label=new eb(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof rb){const t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof eb){const t=arguments[0];for(let e=0;e<2;e++){const i=this.computeMergedLocation(t,e);this._label.getLocation(e)===tC.NONE&&this._label.setLocation(e,i)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let e=tC.NONE;null!==this._label&&(e=this._label.getLocation(t));let i=null;switch(e){case tC.BOUNDARY:i=tC.INTERIOR;break;case tC.INTERIOR:default:i=tC.BOUNDARY}this._label.setLocation(t,i)}};class Ab{constructor(){Ab.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new kC,this.nodeFact=null;const t=arguments[0];this.nodeFact=t}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof gB){const t=arguments[0];let e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof rb){const t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}print(t){for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){const e=new NB;for(let i=this.iterator();i.hasNext();){const n=i.next();n.getLabel().getLocation(t)===tC.BOUNDARY&&e.add(n)}return e}add(t){const e=t.getCoordinate();this.addNode(e).add(t)}}class ab{constructor(){ab.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){const t=arguments[0];this._edge=t}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];ab.constructor_.call(this,t,e,i,null)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];ab.constructor_.call(this,t),this.init(e,i),this._label=n}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:XB.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(t){this._node=t}print(t){const e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),n=i.lastIndexOf("."),s=i.substring(n+1);t.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}compareTo(t){const e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){const t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=HC.quadrant(this._dx,this._dy),hB.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}get interfaces_(){return[sB]}}class lb extends ab{constructor(){super(),lb.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const t=arguments[0],e=arguments[1];if(ab.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{const e=t.getNumPoints()-1;this.init(t.getCoordinate(e),t.getCoordinate(e-1))}this.computeDirectedLabel()}static depthFactor(t,e){return t===tC.EXTERIOR&&e===tC.INTERIOR?1:t===tC.INTERIOR&&e===tC.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}setVisited(t){this._isVisited=t}computeDirectedLabel(){this._label=new eb(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new XC("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){let t=!0;for(let e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,$C.LEFT)===tC.INTERIOR&&this._label.getLocation(e,$C.RIGHT)===tC.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[$C.LEFT]+"/"+this._depth[$C.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}isLineEdge(){const t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,tC.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,tC.EXTERIOR);return t&&e&&i}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}setEdgeDepths(t,e){let i=this.getEdge().getDepthDelta();this._isForward||(i=-i);let n=1;t===$C.LEFT&&(n=-1);const s=$C.opposite(t),o=e+i*n;this.setDepth(t,e),this.setDepth(s,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}}class hb{createNode(t){return new rb(t,null)}}class cb{constructor(){cb.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new NB,this._nodes=null,this._edgeEndList=new NB,0===arguments.length)this._nodes=new Ab(new hb);else if(1===arguments.length){const t=arguments[0];this._nodes=new Ab(t)}}static linkResultDirectedEdges(t){for(let e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}printEdges(t){t.println("Edges:");for(let e=0;e<this._edges.size();e++){t.println("edge "+e+":");const i=this._edges.get(e);i.print(t),i.eiList.print(t)}}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof rb){const t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof gB){const t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}debugPrintln(t){lw.out.println(t)}isBoundaryNode(t,e){const i=this._nodes.find(e);if(null===i)return!1;const n=i.getLabel();return null!==n&&n.getLocation(t)===tC.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(t,e,i,n){return!!t.equals(i)&&(XB.index(t,e,n)===XB.COLLINEAR&&HC.quadrant(t,e)===HC.quadrant(i,n))}getEdgeEnds(){return this._edgeEndList}debugPrint(t){lw.out.print(t)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(let i=0;i<this._edges.size();i++){const n=this._edges.get(i),s=n.getCoordinates();if(this.matchInSameDirection(t,e,s[0],s[1]))return n;if(this.matchInSameDirection(t,e,s[s.length-1],s[s.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}findEdgeEnd(t){for(let e=this.getEdgeEnds().iterator();e.hasNext();){const i=e.next();if(i.getEdge()===t)return i}return null}addEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._edges.add(t);const i=new lb(t,!0),n=new lb(t,!1);i.setSym(n),n.setSym(i),this.add(i),this.add(n)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}getNodes(){return this._nodes.values()}findEdge(t,e){for(let i=0;i<this._edges.size();i++){const n=this._edges.get(i),s=n.getCoordinates();if(t.equals(s[0])&&e.equals(s[1]))return n}return null}}class ub{constructor(){ub.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=null,this._shellList=new NB;const t=arguments[0];this._geometryFactory=t}static findEdgeRingContaining(t,e){const i=t.getLinearRing(),n=i.getEnvelopeInternal();let s=i.getCoordinateN(0),o=null,r=null;for(let t=e.iterator();t.hasNext();){const e=t.next(),A=e.getLinearRing(),a=A.getEnvelopeInternal();if(a.equals(n))continue;if(!a.contains(n))continue;s=hw.ptNotInList(i.getCoordinates(),A.getCoordinates());let l=!1;iC.isInRing(s,A.getCoordinates())&&(l=!0),l&&(null===o||r.contains(a))&&(o=e,r=o.getLinearRing().getEnvelopeInternal())}return o}sortShellsAndHoles(t,e,i){for(let n=t.iterator();n.hasNext();){const t=n.next();t.isHole()?i.add(t):e.add(t)}}computePolygons(t){const e=new NB;for(let i=t.iterator();i.hasNext();){const t=i.next().toPolygon(this._geometryFactory);e.add(t)}return e}placeFreeHoles(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next();if(null===e.getShell()){const i=ub.findEdgeRingContaining(e,t);if(null===i)throw new XC("unable to assign hole to a shell",e.getCoordinate(0));e.setShell(i)}}}buildMinimalEdgeRings(t,e,i){const n=new NB;for(let s=t.iterator();s.hasNext();){const t=s.next();if(t.getMaxNodeDegree()>2){t.linkDirectedEdgesForMinimalEdgeRings();const n=t.buildMinimalRings(),s=this.findShell(n);null!==s?(this.placePolygonHoles(s,n),e.add(s)):i.addAll(n)}else n.add(t)}return n}buildMaximalEdgeRings(t){const e=new NB;for(let i=t.iterator();i.hasNext();){const t=i.next();if(t.isInResult()&&t.getLabel().isArea()&&null===t.getEdgeRing()){const i=new sb(t,this._geometryFactory);e.add(i),i.setInResult()}}return e}placePolygonHoles(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next();e.isHole()&&e.setShell(t)}}getPolygons(){return this.computePolygons(this._shellList)}findShell(t){let e=0,i=null;for(let n=t.iterator();n.hasNext();){const t=n.next();t.isHole()||(i=t,e++)}return hB.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i}add(){if(1===arguments.length){const t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];cb.linkResultDirectedEdges(e);const i=this.buildMaximalEdgeRings(t),n=new NB,s=this.buildMinimalEdgeRings(i,this._shellList,n);this.sortShellsAndHoles(s,this._shellList,n),this.placeFreeHoles(this._shellList,n)}}}class db{constructor(){db.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new NB,this._resultLineList=new NB;const t=arguments[0],e=arguments[1],i=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=i}collectLines(t){for(let e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){const i=e.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}}labelIsolatedLine(t,e){const i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,i)}build(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList}collectLineEdge(t,e,i){const n=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Zb.isResultOfOp(n,e)||s.isCovered()||(i.add(s),t.setVisitedEdge(!0)))}findCoveredLineEdges(){for(let t=this._op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(let t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){const e=t.next(),i=e.getEdge();if(e.isLineEdge()&&!i.isCoveredSet()){const t=this._op.isCoveredByA(e.getCoordinate());i.setCovered(t)}}}labelIsolatedLines(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),i=t.getLabel();t.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(t,0):this.labelIsolatedLine(t,1))}}buildLines(t){for(let t=this._lineEdgesList.iterator();t.hasNext();){const e=t.next(),i=this._geometryFactory.createLineString(e.getCoordinates());this._resultLineList.add(i),e.setInResult(!0)}}collectBoundaryTouchEdge(t,e,i){const n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(hB.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Zb.isResultOfOp(n,e)&&e===Zb.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))}}class gb{constructor(){gb.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._resultPointList=new NB;const t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}filterCoveredNodeToPoint(t){const e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){const t=this._geometryFactory.createPoint(e);this._resultPointList.add(t)}}extractNonCoveredResultNodes(t){for(let e=this._op.getGraph().getNodes().iterator();e.hasNext();){const i=e.next();if(!i.isInResult()&&(!i.isIncidentEdgeInResult()&&(0===i.getEdges().getDegree()||t===Zb.INTERSECTION))){const e=i.getLabel();Zb.isResultOfOp(e,t)&&this.filterCoveredNodeToPoint(i)}}}build(t){return this.extractNonCoveredResultNodes(t),this._resultPointList}}class pb{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new iB,this._commonSignExp=null}getCommon(){return nB.longBitsToDouble(this._commonBits)}add(t){const e=nB.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=pb.signExpBits(this._commonBits),this._isFirst=!1,null;if(pb.signExpBits(e)!==this._commonSignExp)return this._commonBits.high=0,this._commonBits.low=0,null;this._commonMantissaBitsCount=pb.numCommonMostSigMantissaBits(this._commonBits,e),this._commonBits=pb.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))}toString(){if(1===arguments.length){const t=arguments[0],e=nB.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+iB.toBinaryString(t),n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}}getClass(){return pb}get interfaces_(){return[]}static getBit(t,e){const i=1<<e%32;return e<32?0!=(t.low&i)?1:0:0!=(t.high&i)?1:0}static signExpBits(t){return t.high>>>20}static zeroLowerBits(t,e){let i="low";if(e>32&&(t.low=0,e%=32,i="high"),e>0){const n=e<32?~((1<<e)-1):0;t[i]&=n}return t}static numCommonMostSigMantissaBits(t,e){let i=0;for(let n=52;n>=0;n--){if(pb.getBit(t,n)!==pb.getBit(e,n))return i;i++}return 52}}class fb{constructor(){fb.constructor_.apply(this,arguments)}static constructor_(){this._commonCoord=null,this._ccFilter=new mb}addCommonBits(t){const e=new yb(this._commonCoord);t.apply(e),t.geometryChanged()}removeCommonBits(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;const e=new gB(this._commonCoord);e.x=-e.x,e.y=-e.y;const i=new yb(e);return t.apply(i),t.geometryChanged(),t}getCommonCoordinate(){return this._commonCoord}add(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}}class mb{constructor(){mb.constructor_.apply(this,arguments)}static constructor_(){this._commonBitsX=new pb,this._commonBitsY=new pb}filter(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)}getCommonCoordinate(){return new gB(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}get interfaces_(){return[CB]}}class yb{constructor(){yb.constructor_.apply(this,arguments)}static constructor_(){this.trans=null;const t=arguments[0];this.trans=t}filter(t,e){const i=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)}isDone(){return!1}isGeometryChanged(){return!0}get interfaces_(){return[MB]}}fb.CommonCoordinateFilter=mb,fb.Translater=yb;class _b{constructor(){_b.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;const t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}static overlayOp(t,e,i){return new _b(t,e).getResultGeometry(i)}static union(t,e){return _b.overlayOp(t,e,Zb.UNION)}static intersection(t,e){return _b.overlayOp(t,e,Zb.INTERSECTION)}static symDifference(t,e){return _b.overlayOp(t,e,Zb.SYMDIFFERENCE)}static difference(t,e){return _b.overlayOp(t,e,Zb.DIFFERENCE)}selfSnap(t){return new Zw(t).snapTo(t,this._snapTolerance)}removeCommonBits(t){this._cbr=new fb,this._cbr.add(t[0]),this._cbr.add(t[1]);const e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e}prepareResult(t){return this._cbr.addCommonBits(t),t}getResultGeometry(t){const e=this.snap(this._geom),i=Zb.overlayOp(e[0],e[1],t);return this.prepareResult(i)}checkValid(t){t.isValid()||lw.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=Zw.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(t){const e=this.removeCommonBits(t);return Zw.snap(e[0],e[1],this._snapTolerance)}}class Bb{constructor(){Bb.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null);const t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e}static overlayOp(t,e,i){return new Bb(t,e).getResultGeometry(i)}static union(t,e){return Bb.overlayOp(t,e,Zb.UNION)}static intersection(t,e){return Bb.overlayOp(t,e,Zb.INTERSECTION)}static symDifference(t,e){return Bb.overlayOp(t,e,Zb.SYMDIFFERENCE)}static difference(t,e){return Bb.overlayOp(t,e,Zb.DIFFERENCE)}getResultGeometry(t){let e=null,i=!1,n=null;try{e=Zb.overlayOp(this._geom[0],this._geom[1],t);!0&&(i=!0)}catch(t){if(!(t instanceof aB))throw t;n=t}if(!i)try{e=_b.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof aB?n:t}return e}}class wb{locate(t){}}class Cb{constructor(){Cb.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;const t=arguments[0];this._geom=t}static locatePointInPolygon(t,e){if(e.isEmpty())return tC.EXTERIOR;const i=e.getExteriorRing(),n=Cb.locatePointInRing(t,i);if(n!==tC.INTERIOR)return n;for(let i=0;i<e.getNumInteriorRing();i++){const n=e.getInteriorRingN(i),s=Cb.locatePointInRing(t,n);if(s===tC.BOUNDARY)return tC.BOUNDARY;if(s===tC.INTERIOR)return tC.EXTERIOR}return tC.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?iC.locateInRing(t,e.getCoordinates()):tC.EXTERIOR}static containsPointInPolygon(t,e){return tC.EXTERIOR!==Cb.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof qB)return Cb.locatePointInPolygon(t,e);if(e instanceof tw){const i=new lC(e);for(;i.hasNext();){const n=i.next();if(n!==e){const e=Cb.locateInGeometry(t,n);if(e!==tC.EXTERIOR)return e}}}return tC.EXTERIOR}static isContained(t,e){return tC.EXTERIOR!==Cb.locate(t,e)}static locate(t,e){return e.isEmpty()?tC.EXTERIOR:e.getEnvelopeInternal().intersects(t)?Cb.locateInGeometry(t,e):tC.EXTERIOR}locate(t){return Cb.locate(t,this._geom)}get interfaces_(){return[wb]}}class bb{constructor(){bb.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new kC,this._edgeList=null,this._ptInAreaLocation=[tC.NONE,tC.NONE]}getNextCW(t){this.getEdges();const e=this._edgeList.indexOf(t);let i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)}propagateSideLabels(t){let e=tC.NONE;for(let i=this.iterator();i.hasNext();){const n=i.next().getLabel();n.isArea(t)&&n.getLocation(t,$C.LEFT)!==tC.NONE&&(e=n.getLocation(t,$C.LEFT))}if(e===tC.NONE)return null;let i=e;for(let e=this.iterator();e.hasNext();){const n=e.next(),s=n.getLabel();if(s.getLocation(t,$C.ON)===tC.NONE&&s.setLocation(t,$C.ON,i),s.isArea(t)){const e=s.getLocation(t,$C.LEFT),o=s.getLocation(t,$C.RIGHT);if(o!==tC.NONE){if(o!==i)throw new XC("side location conflict",n.getCoordinate());e===tC.NONE&&hB.shouldNeverReachHere("found single null side (at "+n.getCoordinate()+")"),i=e}else hB.isTrue(s.getLocation(t,$C.LEFT)===tC.NONE,"found single null side"),s.setLocation(t,$C.RIGHT,i),s.setLocation(t,$C.LEFT,i)}}}getCoordinate(){const t=this.iterator();if(!t.hasNext())return null;return t.next().getCoordinate()}print(t){lw.out.println("EdgeEndStar:   "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){e.next().print(t)}}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(t){const e=this.getEdges();if(e.size()<=0)return!0;const i=e.size()-1,n=e.get(i).getLabel().getLocation(t,$C.LEFT);hB.isTrue(n!==tC.NONE,"Found unlabelled area edge");let s=n;for(let e=this.iterator();e.hasNext();){const i=e.next().getLabel();hB.isTrue(i.isArea(t),"Found non-area edge");const n=i.getLocation(t,$C.LEFT),o=i.getLocation(t,$C.RIGHT);if(n===o)return!1;if(o!==s)return!1;s=n}return!0}findIndex(t){this.iterator();for(let e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new NB(this._edgeMap.values())),this._edgeList}getLocation(t,e,i){return this._ptInAreaLocation[t]===tC.NONE&&(this._ptInAreaLocation[t]=Cb.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]}toString(){const t=new KB;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let e=this.iterator();e.hasNext();){const i=e.next();t.append(i),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const e=[!1,!1];for(let t=this.iterator();t.hasNext();){const i=t.next().getLabel();for(let t=0;t<2;t++)i.isLine(t)&&i.getLocation(t)===tC.BOUNDARY&&(e[t]=!0)}for(let i=this.iterator();i.hasNext();){const n=i.next(),s=n.getLabel();for(let i=0;i<2;i++)if(s.isAnyNull(i)){let o=tC.NONE;if(e[i])o=tC.EXTERIOR;else{const e=n.getCoordinate();o=this.getLocation(i,e,t)}s.setAllLocationsIfNull(i,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}}class vb extends bb{constructor(){super(),vb.constructor_.apply(this,arguments)}static constructor_(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}linkResultDirectedEdges(){this.getResultAreaEdges();let t=null,e=null,i=this._SCANNING_FOR_INCOMING;for(let n=0;n<this._resultAreaEdgeList.size();n++){const s=this._resultAreaEdgeList.get(n),o=s.getSym();if(s.getLabel().isArea())switch(null===t&&s.isInResult()&&(t=s),i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!s.isInResult())continue;e.setNext(s),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new XC("no outgoing dirEdge found",this.getCoordinate());hB.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}insert(t){const e=t;this.insertEdgeEnd(e,e)}getRightmostEdge(){const t=this.getEdges(),e=t.size();if(e<1)return null;const i=t.get(0);if(1===e)return i;const n=t.get(e-1),s=i.getQuadrant(),o=n.getQuadrant();return HC.isNorthern(s)&&HC.isNorthern(o)?i:HC.isNorthern(s)||HC.isNorthern(o)?0!==i.getDy()?i:0!==n.getDy()?n:(hB.shouldNeverReachHere("found two horizontal edges incident on node"),null):n}print(t){lw.out.println("DirectedEdgeStar: "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){const i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new NB;for(let t=this.iterator();t.hasNext();){const e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}updateLabelling(t){for(let e=this.iterator();e.hasNext();){const i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();let t=null,e=null;for(let i=this._edgeList.size()-1;i>=0;i--){const n=this._edgeList.get(i),s=n.getSym();null===e&&(e=s),null!==t&&s.setNext(t),t=n}e.setNext(t)}computeDepths(){if(1===arguments.length){const t=arguments[0],e=this.findIndex(t),i=t.getDepth($C.LEFT),n=t.getDepth($C.RIGHT),s=this.computeDepths(e+1,this._edgeList.size(),i);if(this.computeDepths(0,e,s)!==n)throw new XC("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){const t=arguments[1];let e=arguments[2];for(let i=arguments[0];i<t;i++){const t=this._edgeList.get(i);t.setEdgeDepths($C.RIGHT,e),e=t.getDepth($C.LEFT)}return e}}mergeSymLabels(){for(let t=this.iterator();t.hasNext();){const e=t.next();e.getLabel().merge(e.getSym().getLabel())}}linkMinimalDirectedEdges(t){let e=null,i=null,n=this._SCANNING_FOR_INCOMING;for(let s=this._resultAreaEdgeList.size()-1;s>=0;s--){const o=this._resultAreaEdgeList.get(s),r=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(r.getEdgeRing()!==t)continue;i=r,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;i.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(hB.isTrue(null!==e,"found null for first outgoing dirEdge"),hB.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))}getOutgoingDegree(){if(0===arguments.length){let t=0;for(let e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){const t=arguments[0];let e=0;for(let i=this.iterator();i.hasNext();){i.next().getEdgeRing()===t&&e++}return e}}getLabel(){return this._label}findCoveredLineEdges(){let t=tC.NONE;for(let e=this.iterator();e.hasNext();){const i=e.next(),n=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){t=tC.INTERIOR;break}if(n.isInResult()){t=tC.EXTERIOR;break}}}if(t===tC.NONE)return null;let e=t;for(let t=this.iterator();t.hasNext();){const i=t.next(),n=i.getSym();i.isLineEdge()?i.getEdge().setCovered(e===tC.INTERIOR):(i.isInResult()&&(e=tC.EXTERIOR),n.isInResult()&&(e=tC.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new eb(tC.NONE);for(let t=this.iterator();t.hasNext();){const e=t.next().getEdge().getLabel();for(let t=0;t<2;t++){const i=e.getLocation(t);i!==tC.INTERIOR&&i!==tC.BOUNDARY||this._label.setLocation(t,tC.INTERIOR)}}}}class xb extends hb{constructor(){super()}createNode(t){return new rb(t,new vb)}}class Eb{constructor(){Eb.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}class Fb{constructor(){Fb.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._eventType=Fb.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._eventType=Fb.INSERT,this._label=t,this._xValue=e,this._obj=i}}isDelete(){return this._eventType===Fb.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}getObject(){return this._obj}compareTo(t){const e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===Fb.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}getDeleteEventIndex(){return this._deleteEventIndex}get interfaces_(){return[sB]}}Fb.INSERT=1,Fb.DELETE=2;class Sb{}class Ib{constructor(){Ib.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[0],e=arguments[1],i=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=i}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(Ib.isAdjacentSegments(e,n))return!0;if(t.isClosed()){const i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;const s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],r=i.getCoordinates()[n],A=i.getCoordinates()[n+1];this._li.computeIntersection(s,o,r,A),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}class Mb extends Sb{constructor(){super(),Mb.constructor_.apply(this,arguments)}static constructor_(){this.events=new NB,this.nOverlaps=null}prepareEvents(){_C.sort(this.events);for(let t=0;t<this.events.size();t++){const e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){const t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let e=0;e<this.events.size();e++){const i=this.events.get(e);if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Ib&&fB(arguments[0],DB)&&fB(arguments[1],DB)){const t=arguments[0],e=arguments[1],i=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(i)}else if("boolean"==typeof arguments[2]&&fB(arguments[0],DB)&&arguments[1]instanceof Ib){const t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){const i=t.getMonotoneChainEdge(),n=i.getStartIndexes();for(let t=0;t<n.length-1;t++){const n=new Eb(i,t),s=new Fb(e,i.getMinX(t),n);this.events.add(s),this.events.add(new Fb(i.getMaxX(t),s))}}processOverlaps(t,e,i,n){const s=i.getObject();for(let o=t;o<e;o++){const t=this.events.get(o);if(t.isInsert()){const e=t.getObject();i.isSameLabel(t)||(s.computeIntersections(e,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.addEdge(e,e)}}else if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const i=e.next();this.addEdge(i,t)}}}}class Lb{constructor(){Lb.constructor_.apply(this,arguments)}static constructor_(){this._min=nB.POSITIVE_INFINITY,this._max=nB.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return Xw.toLineString(new gB(this._min,0),new gB(this._max,0))}}Lb.NodeComparator=class{compare(t,e){const i=t,n=e,s=(i._min+i._max)/2,o=(n._min+n._max)/2;return s<o?-1:s>o?1:0}get interfaces_(){return[rB]}};class Ub extends Lb{constructor(){super(),Ub.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[0],e=arguments[1],i=arguments[2];this._min=t,this._max=e,this._item=i}query(t,e,i){if(!this.intersects(t,e))return null;i.visitItem(this._item)}}class Qb extends Lb{constructor(){super(),Qb.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,i){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,i),null!==this._node2&&this._node2.query(t,e,i)}}class Tb{constructor(){Tb.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new NB,this._root=null,this._level=0}buildTree(){_C.sort(this._leaves,new Lb.NodeComparator);let t=this._leaves,e=null,i=new NB;for(;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}}insert(t,e,i){if(null!==this._root)throw new QB("Index cannot be added to once it has been queried");this._leaves.add(new Ub(t,e,i))}query(t,e,i){if(this.init(),null===this._root)return null;this._root.query(t,e,i)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){lw.out.println(Xw.toLineString(new gB(t._min,this._level),new gB(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(let i=0;i<t.size();i+=2){const n=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(n);else{const n=new Qb(t.get(i),t.get(i+1));e.add(n)}}}}class kb{constructor(){kb.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){const t=arguments[0];this._lines=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}}static getGeometry(){if(1===arguments.length){const t=arguments[0];return t.getFactory().buildGeometry(kb.getLines(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(kb.getLines(t,e))}}static getLines(){if(1===arguments.length){const t=arguments[0];return kb.getLines(t,!1)}if(2===arguments.length){if(fB(arguments[0],RB)&&fB(arguments[1],RB)){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const i=e.next();kb.getLines(i,t)}return t}if(arguments[0]instanceof wB&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=new NB;return t.apply(new kb(i,e)),i}if(arguments[0]instanceof wB&&fB(arguments[1],RB)){const t=arguments[0],e=arguments[1];return t instanceof LB?e.add(t):t.apply(new kb(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&fB(arguments[0],RB)&&fB(arguments[1],RB)){const t=arguments[1],e=arguments[2];for(let i=arguments[0].iterator();i.hasNext();){const n=i.next();kb.getLines(n,t,e)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof wB&&fB(arguments[1],RB)){const t=arguments[1],e=arguments[2];return arguments[0].apply(new kb(t,e)),t}}}filter(t){if(this._isForcedToLineString&&t instanceof iw){const e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof LB&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[_B]}}class Rb{constructor(){Rb.constructor_.apply(this,arguments)}static constructor_(){this._items=new NB}visitItem(t){this._items.add(t)}getItems(){return this._items}get interfaces_(){return[CC]}}class Pb{constructor(){Pb.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const t=arguments[0];if(!(fB(t,YB)||t instanceof iw))throw new eB("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new Ob(this._geom),this._geom=null);const e=new eC(t),i=new Db(e);return this._index.query(t.y,t.y,i),e.getLocation()}get interfaces_(){return[wb]}}class Db{constructor(){Db.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;const t=arguments[0];this._counter=t}visitItem(t){const e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}get interfaces_(){return[CC]}}class Ob{constructor(){Ob.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new Tb;const t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let e=kb.getLines(t).iterator();e.hasNext();){const t=e.next().getCoordinates();this.addLine(t)}}addLine(t){for(let e=1;e<t.length;e++){const i=new jw(t[e-1],t[e]),n=Math.min(i.p0.y,i.p1.y),s=Math.max(i.p0.y,i.p1.y);this._index.insert(n,s,i)}}query(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isEmpty)return new NB;const i=new Rb;return this._index.query(t,e,i),i.getItems()}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(this._isEmpty)return null;this._index.query(t,e,i)}}}Pb.SegmentVisitor=Db,Pb.IntervalIndexedGeometry=Ob;class Nb{constructor(){Nb.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new gB(t),this.segmentIndex=e,this.dist=i}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){const e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}get interfaces_(){return[sB]}}class Hb{constructor(){Hb.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new kC,this.edge=null;const t=arguments[0];this.edge=t}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();){e.next().print(t)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();const e=this.iterator();let i=e.next();for(;e.hasNext();){const n=e.next(),s=this.createSplitEdge(i,n);t.add(s),i=n}}addEndpoints(){const t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){let i=e.segmentIndex-t.segmentIndex+2;const n=this.edge.pts[e.segmentIndex],s=e.dist>0||!e.coord.equals2D(n);s||i--;const o=new Array(i).fill(null);let r=0;o[r++]=new gB(t.coord);for(let i=t.segmentIndex+1;i<=e.segmentIndex;i++)o[r++]=this.edge.pts[i];return s&&(o[r]=e.coord),new Xb(o,new eb(this.edge._label))}add(t,e,i){const n=new Nb(t,e,i),s=this._nodeMap.get(n);return null!==s?s:(this._nodeMap.put(n,n),n)}isIntersection(t){for(let e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}}class Gb{constructor(){Gb.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((()=>Array(3))),this.setAll(SB.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const t=arguments[0];Gb.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof Gb){const t=arguments[0];Gb.constructor_.call(this),this._matrix[tC.INTERIOR][tC.INTERIOR]=t._matrix[tC.INTERIOR][tC.INTERIOR],this._matrix[tC.INTERIOR][tC.BOUNDARY]=t._matrix[tC.INTERIOR][tC.BOUNDARY],this._matrix[tC.INTERIOR][tC.EXTERIOR]=t._matrix[tC.INTERIOR][tC.EXTERIOR],this._matrix[tC.BOUNDARY][tC.INTERIOR]=t._matrix[tC.BOUNDARY][tC.INTERIOR],this._matrix[tC.BOUNDARY][tC.BOUNDARY]=t._matrix[tC.BOUNDARY][tC.BOUNDARY],this._matrix[tC.BOUNDARY][tC.EXTERIOR]=t._matrix[tC.BOUNDARY][tC.EXTERIOR],this._matrix[tC.EXTERIOR][tC.INTERIOR]=t._matrix[tC.EXTERIOR][tC.INTERIOR],this._matrix[tC.EXTERIOR][tC.BOUNDARY]=t._matrix[tC.EXTERIOR][tC.BOUNDARY],this._matrix[tC.EXTERIOR][tC.EXTERIOR]=t._matrix[tC.EXTERIOR][tC.EXTERIOR]}}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return e===SB.SYM_DONTCARE||(e===SB.SYM_TRUE&&(t>=0||t===SB.TRUE)||(e===SB.SYM_FALSE&&t===SB.FALSE||(e===SB.SYM_P&&t===SB.P||(e===SB.SYM_L&&t===SB.L||e===SB.SYM_A&&t===SB.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new Gb(arguments[0]).matches(t)}}static isTrue(t){return t>=0||t===SB.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])||Gb.isTrue(this._matrix[tC.INTERIOR][tC.BOUNDARY])||Gb.isTrue(this._matrix[tC.BOUNDARY][tC.INTERIOR])||Gb.isTrue(this._matrix[tC.BOUNDARY][tC.BOUNDARY]))&&this._matrix[tC.EXTERIOR][tC.INTERIOR]===SB.FALSE&&this._matrix[tC.EXTERIOR][tC.BOUNDARY]===SB.FALSE}isCoveredBy(){return(Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])||Gb.isTrue(this._matrix[tC.INTERIOR][tC.BOUNDARY])||Gb.isTrue(this._matrix[tC.BOUNDARY][tC.INTERIOR])||Gb.isTrue(this._matrix[tC.BOUNDARY][tC.BOUNDARY]))&&this._matrix[tC.INTERIOR][tC.EXTERIOR]===SB.FALSE&&this._matrix[tC.BOUNDARY][tC.EXTERIOR]===SB.FALSE}set(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const i=Math.trunc(e/3),n=e%3;this._matrix[i][n]=SB.toDimensionValue(t.charAt(e))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._matrix[t][e]=i}}isContains(){return Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])&&this._matrix[tC.EXTERIOR][tC.INTERIOR]===SB.FALSE&&this._matrix[tC.EXTERIOR][tC.BOUNDARY]===SB.FALSE}setAtLeast(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const i=Math.trunc(e/3),n=e%3;this.setAtLeast(i,n,SB.toDimensionValue(t.charAt(e)))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._matrix[t][e]<i&&(this._matrix[t][e]=i)}}setAtLeastIfValid(t,e,i){t>=0&&e>=0&&this.setAtLeast(t,e,i)}isWithin(){return Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])&&this._matrix[tC.INTERIOR][tC.EXTERIOR]===SB.FALSE&&this._matrix[tC.BOUNDARY][tC.EXTERIOR]===SB.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===SB.A&&e===SB.A||t===SB.L&&e===SB.L||t===SB.L&&e===SB.A||t===SB.P&&e===SB.A||t===SB.P&&e===SB.L)&&(this._matrix[tC.INTERIOR][tC.INTERIOR]===SB.FALSE&&(Gb.isTrue(this._matrix[tC.INTERIOR][tC.BOUNDARY])||Gb.isTrue(this._matrix[tC.BOUNDARY][tC.INTERIOR])||Gb.isTrue(this._matrix[tC.BOUNDARY][tC.BOUNDARY])))}isOverlaps(t,e){return t===SB.P&&e===SB.P||t===SB.A&&e===SB.A?Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])&&Gb.isTrue(this._matrix[tC.INTERIOR][tC.EXTERIOR])&&Gb.isTrue(this._matrix[tC.EXTERIOR][tC.INTERIOR]):t===SB.L&&e===SB.L&&(1===this._matrix[tC.INTERIOR][tC.INTERIOR]&&Gb.isTrue(this._matrix[tC.INTERIOR][tC.EXTERIOR])&&Gb.isTrue(this._matrix[tC.EXTERIOR][tC.INTERIOR]))}isEquals(t,e){return t===e&&(Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])&&this._matrix[tC.INTERIOR][tC.EXTERIOR]===SB.FALSE&&this._matrix[tC.BOUNDARY][tC.EXTERIOR]===SB.FALSE&&this._matrix[tC.EXTERIOR][tC.INTERIOR]===SB.FALSE&&this._matrix[tC.EXTERIOR][tC.BOUNDARY]===SB.FALSE)}toString(){const t=new cw("123456789");for(let e=0;e<3;e++)for(let i=0;i<3;i++)t.setCharAt(3*e+i,SB.toDimensionSymbol(this._matrix[e][i]));return t.toString()}setAll(t){for(let e=0;e<3;e++)for(let i=0;i<3;i++)this._matrix[e][i]=t}get(t,e){return this._matrix[t][e]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}matches(t){if(9!==t.length)throw new eB("Should be length 9: "+t);for(let e=0;e<3;e++)for(let i=0;i<3;i++)if(!Gb.matches(this._matrix[e][i],t.charAt(3*e+i)))return!1;return!0}add(t){for(let e=0;e<3;e++)for(let i=0;i<3;i++)this.setAtLeast(e,i,t.get(e,i))}isDisjoint(){return this._matrix[tC.INTERIOR][tC.INTERIOR]===SB.FALSE&&this._matrix[tC.INTERIOR][tC.BOUNDARY]===SB.FALSE&&this._matrix[tC.BOUNDARY][tC.INTERIOR]===SB.FALSE&&this._matrix[tC.BOUNDARY][tC.BOUNDARY]===SB.FALSE}isCrosses(t,e){return t===SB.P&&e===SB.L||t===SB.P&&e===SB.A||t===SB.L&&e===SB.A?Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])&&Gb.isTrue(this._matrix[tC.INTERIOR][tC.EXTERIOR]):t===SB.L&&e===SB.P||t===SB.A&&e===SB.P||t===SB.A&&e===SB.L?Gb.isTrue(this._matrix[tC.INTERIOR][tC.INTERIOR])&&Gb.isTrue(this._matrix[tC.EXTERIOR][tC.INTERIOR]):t===SB.L&&e===SB.L&&0===this._matrix[tC.INTERIOR][tC.INTERIOR]}get interfaces_(){return[oB]}}class Kb{constructor(){Kb.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0===arguments.length)Kb.constructor_.call(this,10);else if(1===arguments.length){const t=arguments[0];this._data=new Array(t).fill(null)}}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),lw.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;const e=Math.max(t,2*this._data.length);this._data=GB.copyOf(this._data,e)}toArray(){const t=new Array(this._size).fill(null);return lw.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class Vb{static toIntArray(t){const e=new Array(t.size()).fill(null);for(let i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e}getChainStartIndices(t){let e=0;const i=new Kb(Math.trunc(t.length/2));i.add(e);do{const n=this.findChainEnd(t,e);i.add(n),e=n}while(e<t.length-1);return i.toArray()}findChainEnd(t,e){const i=HC.quadrant(t[e],t[e+1]);let n=e+1;for(;n<t.length;){if(HC.quadrant(t[n-1],t[n])!==i)break;n++}return n-1}OLDgetChainStartIndices(t){let e=0;const i=new NB;i.add(e);do{const n=this.findChainEnd(t,e);i.add(n),e=n}while(e<t.length-1);return Vb.toIntArray(i)}}class Wb{constructor(){Wb.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const t=arguments[0];this.e=t,this.pts=t.getCoordinates();const e=new Vb;this.startIndex=e.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){const e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i}getMinX(t){const e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i}computeIntersectsForChain(){if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],n)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],o=arguments[5];if(e-t==1&&s-n==1)return o.addIntersections(this.e,t,i.e,n),null;if(!this.overlaps(t,e,i,n,s))return null;const r=Math.trunc((t+e)/2),A=Math.trunc((n+s)/2);t<r&&(n<A&&this.computeIntersectsForChain(t,r,i,n,A,o),A<s&&this.computeIntersectsForChain(t,r,i,A,s,o)),r<e&&(n<A&&this.computeIntersectsForChain(r,e,i,n,A,o),A<s&&this.computeIntersectsForChain(r,e,i,A,s,o))}}overlaps(t,e,i,n,s){return BB.intersects(this.pts[t],this.pts[e],i.pts[n],i.pts[s])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(let i=0;i<this.startIndex.length-1;i++)for(let n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(i,t,n,e)}}class zb{constructor(){zb.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map((()=>Array(3)));for(let t=0;t<2;t++)for(let e=0;e<3;e++)this._depth[t][e]=zb.NULL_VALUE}static depthAtLocation(t){return t===tC.EXTERIOR?0:t===tC.INTERIOR?1:zb.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,i){this._depth[t][e]=i}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let e=0;e<3;e++)if(this._depth[t][e]!==zb.NULL_VALUE)return!1;return!0}if(1===arguments.length){const t=arguments[0];return this._depth[t][1]===zb.NULL_VALUE}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._depth[t][e]===zb.NULL_VALUE}}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(let i=1;i<3;i++){let n=0;this._depth[t][i]>e&&(n=1),this._depth[t][i]=n}}}getDelta(t){return this._depth[t][$C.RIGHT]-this._depth[t][$C.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?tC.EXTERIOR:tC.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<2;e++)for(let i=1;i<3;i++){const n=t.getLocation(e,i);n!==tC.EXTERIOR&&n!==tC.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=zb.depthAtLocation(n):this._depth[e][i]+=zb.depthAtLocation(n))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1];arguments[2]===tC.INTERIOR&&this._depth[t][e]++}}}zb.NULL_VALUE=-1;class Xb extends ob{constructor(){super(),Xb.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new Hb(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new zb,this._depthDelta=0,1===arguments.length){const t=arguments[0];Xb.constructor_.call(this,t,null)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.pts=t,this._label=e}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof Gb&&arguments[0]instanceof eb))return super.updateIM.apply(this,arguments);{const t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,$C.ON),t.getLocation(1,$C.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,$C.LEFT),t.getLocation(1,$C.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,$C.RIGHT),t.getLocation(1,$C.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];return new Xb(t,eb.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(t){if(!(t instanceof Xb))return!1;const e=t;if(this.pts.length!==e.pts.length)return!1;let i=!0,n=!0,s=this.pts.length;for(let t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(e.pts[t])||(i=!1),this.pts[t].equals2D(e.pts[--s])||(n=!1),!i&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){const t=arguments[0];return this.pts[t]}}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(t){Xb.updateIM(this._label,t)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new Wb(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new BB;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,i,n){const s=new gB(t.getIntersection(n));let o=e,r=t.getEdgeDistance(i,n);const A=o+1;if(A<this.pts.length){const t=this.pts[A];s.equals2D(t)&&(o=A,r=0)}this.eiList.add(s,o,r)}toString(){const t=new cw;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,i){for(let n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)}}class Yb extends cb{constructor(){super(),Yb.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new yw,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new hC,2===arguments.length){const t=arguments[0],e=arguments[1];Yb.constructor_.call(this,t,e,nC.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=i,null!==e&&this.add(e)}}static determineBoundary(t,e){return t.isInBoundary(e)?tC.BOUNDARY:tC.INTERIOR}insertBoundaryPoint(t,e){const i=this._nodes.addNode(e).getLabel();let n=1,s=tC.NONE;s=i.getLocation(t,$C.ON),s===tC.BOUNDARY&&n++;const o=Yb.determineBoundary(this._boundaryNodeRule,n);i.setLocation(t,o)}computeSelfNodes(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){const t=arguments[1],e=arguments[2],i=new Ib(arguments[0],!0,!1);i.setIsDoneIfProperInt(e);const n=this.createEdgeSetIntersector(),s=this._parentGeom instanceof iw||this._parentGeom instanceof qB||this._parentGeom instanceof gw,o=t||!s;return n.computeIntersections(this._edges,i,o),this.addSelfIntersectionNodes(this._argIndex),i}}computeSplitEdges(t){for(let e=this._edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}}computeEdgeIntersections(t,e,i){const n=new Ib(e,i,!0);n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof TB){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,tC.INTERIOR)}else if(arguments[0]instanceof gB){const t=arguments[0];this.insertPoint(this._argIndex,t,tC.INTERIOR)}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),tC.EXTERIOR,tC.INTERIOR);for(let e=0;e<t.getNumInteriorRing();e++){const i=t.getInteriorRingN(e);this.addPolygonRing(i,tC.INTERIOR,tC.EXTERIOR)}}addEdge(t){this.insertEdge(t);const e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],tC.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],tC.BOUNDARY)}addLineString(t){const e=hw.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;const i=new Xb(e,new eb(this._argIndex,tC.INTERIOR));this._lineEdgeMap.put(t,i),this.insertEdge(i),hB.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null);let i=0;for(let n=t.iterator();n.hasNext();){const t=n.next();e[i++]=t.getCoordinate().copy()}return e}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,i){if(this.isBoundaryNode(t,e))return null;i===tC.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)}addPolygonRing(t,e,i){if(t.isEmpty())return null;const n=hw.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;let s=e,o=i;XB.isCCW(n)&&(s=i,o=e);const r=new Xb(n,new eb(this._argIndex,tC.BOUNDARY,s,o));this._lineEdgeMap.put(t,r),this.insertEdge(r),this.insertPoint(this._argIndex,n[0],tC.BOUNDARY)}insertPoint(t,e,i){const n=this._nodes.addNode(e),s=n.getLabel();null===s?n._label=new eb(t,i):s.setLocation(t,i)}createEdgeSetIntersector(){return new Mb}addSelfIntersectionNodes(t){for(let e=this._edges.iterator();e.hasNext();){const i=e.next(),n=i.getLabel().getLocation(t);for(let e=i.eiList.iterator();e.hasNext();){const i=e.next();this.addSelfIntersectionNode(t,i.coord,n)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof wB))return super.add.apply(this,arguments);{const t=arguments[0];if(t.isEmpty())return null;if(t instanceof gw&&(this._useBoundaryDeterminationRule=!1),t instanceof qB)this.addPolygon(t);else if(t instanceof LB)this.addLineString(t);else if(t instanceof TB)this.addPoint(t);else if(t instanceof ew)this.addCollection(t);else if(t instanceof ww)this.addCollection(t);else if(t instanceof gw)this.addCollection(t);else{if(!(t instanceof tw))throw new EB(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);this.add(i)}}locate(t){return fB(this._parentGeom,YB)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Pb(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof LB){const t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}}class qb{constructor(){qb.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new qw,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Yb(0,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];qb.constructor_.call(this,t,e,nC.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Yb(0,t,i),this._arg[1]=new Yb(1,e,i)}}getArgGeometry(t){return this._arg[t].getGeometry()}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}}class jb{constructor(){jb.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._orientation=null;const t=arguments[0];this._pts=t,this._orientation=jb.orientation(t)}static orientation(t){return 1===hw.increasingDirection(t)}static compareOriented(t,e,i,n){const s=e?1:-1,o=n?1:-1,r=e?t.length:-1,A=n?i.length:-1;let a=e?0:t.length-1,l=n?0:i.length-1;for(;;){const e=t[a].compareTo(i[l]);if(0!==e)return e;a+=s,l+=o;const n=a===r,h=l===A;if(n&&!h)return-1;if(!n&&h)return 1;if(n&&h)return 0}}compareTo(t){const e=t;return jb.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}get interfaces_(){return[sB]}}class Jb{constructor(){Jb.constructor_.apply(this,arguments)}static constructor_(){this._edges=new NB,this._ocaMap=new kC}print(t){t.print("MULTILINESTRING ( ");for(let e=0;e<this._edges.size();e++){const i=this._edges.get(e);e>0&&t.print(","),t.print("(");const n=i.getCoordinates();for(let e=0;e<n.length;e++)e>0&&t.print(","),t.print(n[e].x+" "+n[e].y);t.println(")")}t.print(")  ")}addAll(t){for(let e=t.iterator();e.hasNext();)this.add(e.next())}findEdgeIndex(t){for(let e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(t){return this._edges.get(t)}findEqualEdge(t){const e=new jb(t.getCoordinates());return this._ocaMap.get(e)}add(t){this._edges.add(t);const e=new jb(t.getCoordinates());this._ocaMap.put(e,t)}}class Zb extends qb{constructor(){super(),Zb.constructor_.apply(this,arguments)}static constructor_(){this._ptLocator=new hC,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Jb,this._resultPolyList=new NB,this._resultLineList=new NB,this._resultPointList=new NB;const t=arguments[0],e=arguments[1];qb.constructor_.call(this,t,e),this._graph=new cb(new xb),this._geomFact=t.getFactory()}static overlayOp(t,e,i){return new Zb(t,e).getResultGeometry(i)}static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zb.createEmptyResult(Zb.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new eB("This method does not support GeometryCollection arguments");return Bb.overlayOp(t,e,Zb.UNION)}static intersection(t,e){if(t.isEmpty()||e.isEmpty())return Zb.createEmptyResult(Zb.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){const i=e;return ZC.map(t,new class{get interfaces_(){return[MapOp]}map(t){return Zb.intersection(t,i)}})}return Bb.overlayOp(t,e,Zb.INTERSECTION)}static symDifference(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zb.createEmptyResult(Zb.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new eB("This method does not support GeometryCollection arguments");return Bb.overlayOp(t,e,Zb.SYMDIFFERENCE)}static resultDimension(t,e,i){const n=e.getDimension(),s=i.getDimension();let o=-1;switch(t){case Zb.INTERSECTION:o=Math.min(n,s);break;case Zb.UNION:o=Math.max(n,s);break;case Zb.DIFFERENCE:o=n;break;case Zb.SYMDIFFERENCE:o=Math.max(n,s)}return o}static createEmptyResult(t,e,i,n){const s=Zb.resultDimension(t,e,i);return n.createEmpty(s)}static difference(t,e){if(t.isEmpty())return Zb.createEmptyResult(Zb.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new eB("This method does not support GeometryCollection arguments");return Bb.overlayOp(t,e,Zb.DIFFERENCE)}static isResultOfOp(){if(2===arguments.length){const t=arguments[0],e=arguments[1],i=t.getLocation(0),n=t.getLocation(1);return Zb.isResultOfOp(i,n,e)}if(3===arguments.length){let t=arguments[0],e=arguments[1],i=arguments[2];switch(t===tC.BOUNDARY&&(t=tC.INTERIOR),e===tC.BOUNDARY&&(e=tC.INTERIOR),i){case Zb.INTERSECTION:return t===tC.INTERIOR&&e===tC.INTERIOR;case Zb.UNION:return t===tC.INTERIOR||e===tC.INTERIOR;case Zb.DIFFERENCE:return t===tC.INTERIOR&&e!==tC.INTERIOR;case Zb.SYMDIFFERENCE:return t===tC.INTERIOR&&e!==tC.INTERIOR||t!==tC.INTERIOR&&e===tC.INTERIOR}return!1}}insertUniqueEdge(t){const e=this._edgeList.findEqualEdge(t);if(null!==e){const i=e.getLabel();let n=t.getLabel();e.isPointwiseEqual(t)||(n=new eb(t.getLabel()),n.flip());const s=e.getDepth();s.isNull()&&s.add(i),s.add(n),i.merge(n)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(let t=this._graph.getEdgeEnds().iterator();t.hasNext();){const e=t.next(),i=e.getSym();e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}}isCoveredByLA(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)}computeGeometry(t,e,i,n){const s=new NB;return s.addAll(t),s.addAll(e),s.addAll(i),s.isEmpty()?Zb.createEmptyResult(n,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)}mergeSymLabels(){for(let t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}}isCovered(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next();if(this._ptLocator.locate(t,e)!==tC.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){const t=new NB;for(let e=this._edgeList.iterator();e.hasNext();){const i=e.next();i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this._edgeList.addAll(t)}updateNodeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next(),i=e.getEdges().getLabel();e.getLabel().merge(i)}}getResultGeometry(t){return this.computeOverlay(t),this._resultGeom}insertUniqueEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this.insertUniqueEdge(t)}}computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);const e=new NB;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),JC.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();const i=new ub(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();const n=new db(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);const s=new gb(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}labelIncompleteNode(t,e){const i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,i)}copyPoints(t){for(let e=this._arg[t].getNodeIterator();e.hasNext();){const i=e.next();this._graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}}findResultAreaEdges(t){for(let e=this._graph.getEdgeEnds().iterator();e.hasNext();){const i=e.next(),n=i.getLabel();n.isArea()&&!i.isInteriorAreaEdge()&&Zb.isResultOfOp(n.getLocation(0,$C.RIGHT),n.getLocation(1,$C.RIGHT),t)&&i.setInResult(!0)}}computeLabelsFromDepths(){for(let t=this._edgeList.iterator();t.hasNext();){const e=t.next(),i=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(let t=0;t<2;t++)i.isNull(t)||!i.isArea()||n.isNull(t)||(0===n.getDelta(t)?i.toLine(t):(hB.isTrue(!n.isNull(t,$C.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(t,$C.LEFT,n.getLocation(t,$C.LEFT)),hB.isTrue(!n.isNull(t,$C.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(t,$C.RIGHT,n.getLocation(t,$C.RIGHT))))}}}computeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this._arg)}this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next(),i=e.getLabel();e.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}}isCoveredByA(t){return!!this.isCovered(t,this._resultPolyList)}}Zb.INTERSECTION=1,Zb.UNION=2,Zb.DIFFERENCE=3,Zb.SYMDIFFERENCE=4;const $b="editTool",tv={active:!1,collapsed:!1,hitTolerance:5,strokeColor:"#4A86B8",fillColor:"#D7E3FA80"},ev={},iv={width:20,height:20,fill:"rgb(255, 255, 255)",stroke:"none",class:"oltb-btn__icon"},nv=new No({fill:new Uo({color:"#D7E3FA80"}),stroke:new To({color:"#4A86B8",width:2.5})}),sv=new No({fill:new Uo({color:"rgba(255, 255, 255, .5)"}),stroke:new To({color:"#3B4352",lineDash:[2,5],width:2.5})});var ov="top",rv="bottom",Av="right",av="left",lv="auto",hv=[ov,rv,Av,av],cv="start",uv="end",dv="viewport",gv="popper",pv=hv.reduce((function(t,e){return t.concat([e+"-"+cv,e+"-"+uv])}),[]),fv=[].concat(hv,[lv]).reduce((function(t,e){return t.concat([e,e+"-"+cv,e+"-"+uv])}),[]),mv=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function yv(t){return t?(t.nodeName||"").toLowerCase():null}function _v(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Bv(t){return t instanceof _v(t).Element||t instanceof Element}function wv(t){return t instanceof _v(t).HTMLElement||t instanceof HTMLElement}function Cv(t){return"undefined"!=typeof ShadowRoot&&(t instanceof _v(t).ShadowRoot||t instanceof ShadowRoot)}var bv={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];wv(s)&&yv(s)&&(Object.assign(s.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});wv(n)&&yv(n)&&(Object.assign(n.style,o),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function vv(t){return t.split("-")[0]}var xv=Math.max,Ev=Math.min,Fv=Math.round;function Sv(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Iv(){return!/^((?!chrome|android).)*safari/i.test(Sv())}function Mv(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),s=1,o=1;e&&wv(t)&&(s=t.offsetWidth>0&&Fv(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Fv(n.height)/t.offsetHeight||1);var r=(Bv(t)?_v(t):window).visualViewport,A=!Iv()&&i,a=(n.left+(A&&r?r.offsetLeft:0))/s,l=(n.top+(A&&r?r.offsetTop:0))/o,h=n.width/s,c=n.height/o;return{width:h,height:c,top:l,right:a+h,bottom:l+c,left:a,x:a,y:l}}function Lv(t){var e=Mv(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Uv(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&Cv(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Qv(t){return _v(t).getComputedStyle(t)}function Tv(t){return["table","td","th"].indexOf(yv(t))>=0}function kv(t){return((Bv(t)?t.ownerDocument:t.document)||window.document).documentElement}function Rv(t){return"html"===yv(t)?t:t.assignedSlot||t.parentNode||(Cv(t)?t.host:null)||kv(t)}function Pv(t){return wv(t)&&"fixed"!==Qv(t).position?t.offsetParent:null}function Dv(t){for(var e=_v(t),i=Pv(t);i&&Tv(i)&&"static"===Qv(i).position;)i=Pv(i);return i&&("html"===yv(i)||"body"===yv(i)&&"static"===Qv(i).position)?e:i||function(t){var e=/firefox/i.test(Sv());if(/Trident/i.test(Sv())&&wv(t)&&"fixed"===Qv(t).position)return null;var i=Rv(t);for(Cv(i)&&(i=i.host);wv(i)&&["html","body"].indexOf(yv(i))<0;){var n=Qv(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function Ov(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Nv(t,e,i){return xv(t,Ev(e,i))}function Hv(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Gv(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}var Kv={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,n=t.name,s=t.options,o=i.elements.arrow,r=i.modifiersData.popperOffsets,A=vv(i.placement),a=Ov(A),l=[av,Av].indexOf(A)>=0?"height":"width";if(o&&r){var h=function(t,e){return Hv("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Gv(t,hv))}(s.padding,i),c=Lv(o),u="y"===a?ov:av,d="y"===a?rv:Av,g=i.rects.reference[l]+i.rects.reference[a]-r[a]-i.rects.popper[l],p=r[a]-i.rects.reference[a],f=Dv(o),m=f?"y"===a?f.clientHeight||0:f.clientWidth||0:0,y=g/2-p/2,_=h[u],B=m-c[l]-h[d],w=m/2-c[l]/2+y,C=Nv(_,w,B),b=a;i.modifiersData[n]=((e={})[b]=C,e.centerOffset=C-w,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&Uv(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vv(t){return t.split("-")[1]}var Wv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zv(t){var e,i=t.popper,n=t.popperRect,s=t.placement,o=t.variation,r=t.offsets,A=t.position,a=t.gpuAcceleration,l=t.adaptive,h=t.roundOffsets,c=t.isFixed,u=r.x,d=void 0===u?0:u,g=r.y,p=void 0===g?0:g,f="function"==typeof h?h({x:d,y:p}):{x:d,y:p};d=f.x,p=f.y;var m=r.hasOwnProperty("x"),y=r.hasOwnProperty("y"),_=av,B=ov,w=window;if(l){var C=Dv(i),b="clientHeight",v="clientWidth";if(C===_v(i)&&"static"!==Qv(C=kv(i)).position&&"absolute"===A&&(b="scrollHeight",v="scrollWidth"),s===ov||(s===av||s===Av)&&o===uv)B=rv,p-=(c&&C===w&&w.visualViewport?w.visualViewport.height:C[b])-n.height,p*=a?1:-1;if(s===av||(s===ov||s===rv)&&o===uv)_=Av,d-=(c&&C===w&&w.visualViewport?w.visualViewport.width:C[v])-n.width,d*=a?1:-1}var x,E=Object.assign({position:A},l&&Wv),F=!0===h?function(t){var e=t.x,i=t.y,n=window.devicePixelRatio||1;return{x:Fv(e*n)/n||0,y:Fv(i*n)/n||0}}({x:d,y:p}):{x:d,y:p};return d=F.x,p=F.y,a?Object.assign({},E,((x={})[B]=y?"0":"",x[_]=m?"0":"",x.transform=(w.devicePixelRatio||1)<=1?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",x)):Object.assign({},E,((e={})[B]=y?p+"px":"",e[_]=m?d+"px":"",e.transform="",e))}var Xv={passive:!0};var Yv={left:"right",right:"left",bottom:"top",top:"bottom"};function qv(t){return t.replace(/left|right|bottom|top/g,(function(t){return Yv[t]}))}var jv={start:"end",end:"start"};function Jv(t){return t.replace(/start|end/g,(function(t){return jv[t]}))}function Zv(t){var e=_v(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $v(t){return Mv(kv(t)).left+Zv(t).scrollLeft}function tx(t){var e=Qv(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function ex(t){return["html","body","#document"].indexOf(yv(t))>=0?t.ownerDocument.body:wv(t)&&tx(t)?t:ex(Rv(t))}function ix(t,e){var i;void 0===e&&(e=[]);var n=ex(t),s=n===(null==(i=t.ownerDocument)?void 0:i.body),o=_v(n),r=s?[o].concat(o.visualViewport||[],tx(n)?n:[]):n,A=e.concat(r);return s?A:A.concat(ix(Rv(r)))}function nx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function sx(t,e,i){return e===dv?nx(function(t,e){var i=_v(t),n=kv(t),s=i.visualViewport,o=n.clientWidth,r=n.clientHeight,A=0,a=0;if(s){o=s.width,r=s.height;var l=Iv();(l||!l&&"fixed"===e)&&(A=s.offsetLeft,a=s.offsetTop)}return{width:o,height:r,x:A+$v(t),y:a}}(t,i)):Bv(e)?function(t,e){var i=Mv(t,!1,"fixed"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):nx(function(t){var e,i=kv(t),n=Zv(t),s=null==(e=t.ownerDocument)?void 0:e.body,o=xv(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=xv(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),A=-n.scrollLeft+$v(t),a=-n.scrollTop;return"rtl"===Qv(s||i).direction&&(A+=xv(i.clientWidth,s?s.clientWidth:0)-o),{width:o,height:r,x:A,y:a}}(kv(t)))}function ox(t,e,i,n){var s="clippingParents"===e?function(t){var e=ix(Rv(t)),i=["absolute","fixed"].indexOf(Qv(t).position)>=0&&wv(t)?Dv(t):t;return Bv(i)?e.filter((function(t){return Bv(t)&&Uv(t,i)&&"body"!==yv(t)})):[]}(t):[].concat(e),o=[].concat(s,[i]),r=o[0],A=o.reduce((function(e,i){var s=sx(t,i,n);return e.top=xv(s.top,e.top),e.right=Ev(s.right,e.right),e.bottom=Ev(s.bottom,e.bottom),e.left=xv(s.left,e.left),e}),sx(t,r,n));return A.width=A.right-A.left,A.height=A.bottom-A.top,A.x=A.left,A.y=A.top,A}function rx(t){var e,i=t.reference,n=t.element,s=t.placement,o=s?vv(s):null,r=s?Vv(s):null,A=i.x+i.width/2-n.width/2,a=i.y+i.height/2-n.height/2;switch(o){case ov:e={x:A,y:i.y-n.height};break;case rv:e={x:A,y:i.y+i.height};break;case Av:e={x:i.x+i.width,y:a};break;case av:e={x:i.x-n.width,y:a};break;default:e={x:i.x,y:i.y}}var l=o?Ov(o):null;if(null!=l){var h="y"===l?"height":"width";switch(r){case cv:e[l]=e[l]-(i[h]/2-n[h]/2);break;case uv:e[l]=e[l]+(i[h]/2-n[h]/2)}}return e}function Ax(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=void 0===n?t.placement:n,o=i.strategy,r=void 0===o?t.strategy:o,A=i.boundary,a=void 0===A?"clippingParents":A,l=i.rootBoundary,h=void 0===l?dv:l,c=i.elementContext,u=void 0===c?gv:c,d=i.altBoundary,g=void 0!==d&&d,p=i.padding,f=void 0===p?0:p,m=Hv("number"!=typeof f?f:Gv(f,hv)),y=u===gv?"reference":gv,_=t.rects.popper,B=t.elements[g?y:u],w=ox(Bv(B)?B:B.contextElement||kv(t.elements.popper),a,h,r),C=Mv(t.elements.reference),b=rx({reference:C,element:_,strategy:"absolute",placement:s}),v=nx(Object.assign({},_,b)),x=u===gv?v:C,E={top:w.top-x.top+m.top,bottom:x.bottom-w.bottom+m.bottom,left:w.left-x.left+m.left,right:x.right-w.right+m.right},F=t.modifiersData.offset;if(u===gv&&F){var S=F[s];Object.keys(E).forEach((function(t){var e=[Av,rv].indexOf(t)>=0?1:-1,i=[ov,rv].indexOf(t)>=0?"y":"x";E[t]+=S[i]*e}))}return E}function ax(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=i.boundary,o=i.rootBoundary,r=i.padding,A=i.flipVariations,a=i.allowedAutoPlacements,l=void 0===a?fv:a,h=Vv(n),c=h?A?pv:pv.filter((function(t){return Vv(t)===h})):hv,u=c.filter((function(t){return l.indexOf(t)>=0}));0===u.length&&(u=c);var d=u.reduce((function(e,i){return e[i]=Ax(t,{placement:i,boundary:s,rootBoundary:o,padding:r})[vv(i)],e}),{});return Object.keys(d).sort((function(t,e){return d[t]-d[e]}))}var lx={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=i.mainAxis,o=void 0===s||s,r=i.altAxis,A=void 0===r||r,a=i.fallbackPlacements,l=i.padding,h=i.boundary,c=i.rootBoundary,u=i.altBoundary,d=i.flipVariations,g=void 0===d||d,p=i.allowedAutoPlacements,f=e.options.placement,m=vv(f),y=a||(m===f||!g?[qv(f)]:function(t){if(vv(t)===lv)return[];var e=qv(t);return[Jv(t),e,Jv(e)]}(f)),_=[f].concat(y).reduce((function(t,i){return t.concat(vv(i)===lv?ax(e,{placement:i,boundary:h,rootBoundary:c,padding:l,flipVariations:g,allowedAutoPlacements:p}):i)}),[]),B=e.rects.reference,w=e.rects.popper,C=new Map,b=!0,v=_[0],x=0;x<_.length;x++){var E=_[x],F=vv(E),S=Vv(E)===cv,I=[ov,rv].indexOf(F)>=0,M=I?"width":"height",L=Ax(e,{placement:E,boundary:h,rootBoundary:c,altBoundary:u,padding:l}),U=I?S?Av:av:S?rv:ov;B[M]>w[M]&&(U=qv(U));var Q=qv(U),T=[];if(o&&T.push(L[F]<=0),A&&T.push(L[U]<=0,L[Q]<=0),T.every((function(t){return t}))){v=E,b=!1;break}C.set(E,T)}if(b)for(var k=function(t){var e=_.find((function(e){var i=C.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return v=e,"break"},R=g?3:1;R>0;R--){if("break"===k(R))break}e.placement!==v&&(e.modifiersData[n]._skip=!0,e.placement=v,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function hx(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function cx(t){return[ov,Av,rv,av].some((function(e){return t[e]>=0}))}var ux={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,o=void 0===s?[0,0]:s,r=fv.reduce((function(t,i){return t[i]=function(t,e,i){var n=vv(t),s=[av,ov].indexOf(n)>=0?-1:1,o="function"==typeof i?i(Object.assign({},e,{placement:t})):i,r=o[0],A=o[1];return r=r||0,A=(A||0)*s,[av,Av].indexOf(n)>=0?{x:A,y:r}:{x:r,y:A}}(i,e.rects,o),t}),{}),A=r[e.placement],a=A.x,l=A.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=l),e.modifiersData[n]=r}};var dx={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.mainAxis,o=void 0===s||s,r=i.altAxis,A=void 0!==r&&r,a=i.boundary,l=i.rootBoundary,h=i.altBoundary,c=i.padding,u=i.tether,d=void 0===u||u,g=i.tetherOffset,p=void 0===g?0:g,f=Ax(e,{boundary:a,rootBoundary:l,padding:c,altBoundary:h}),m=vv(e.placement),y=Vv(e.placement),_=!y,B=Ov(m),w="x"===B?"y":"x",C=e.modifiersData.popperOffsets,b=e.rects.reference,v=e.rects.popper,x="function"==typeof p?p(Object.assign({},e.rects,{placement:e.placement})):p,E="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,S={x:0,y:0};if(C){if(o){var I,M="y"===B?ov:av,L="y"===B?rv:Av,U="y"===B?"height":"width",Q=C[B],T=Q+f[M],k=Q-f[L],R=d?-v[U]/2:0,P=y===cv?b[U]:v[U],D=y===cv?-v[U]:-b[U],O=e.elements.arrow,N=d&&O?Lv(O):{width:0,height:0},H=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=H[M],K=H[L],V=Nv(0,b[U],N[U]),W=_?b[U]/2-R-V-G-E.mainAxis:P-V-G-E.mainAxis,z=_?-b[U]/2+R+V+K+E.mainAxis:D+V+K+E.mainAxis,X=e.elements.arrow&&Dv(e.elements.arrow),Y=X?"y"===B?X.clientTop||0:X.clientLeft||0:0,q=null!=(I=null==F?void 0:F[B])?I:0,j=Q+z-q,J=Nv(d?Ev(T,Q+W-q-Y):T,Q,d?xv(k,j):k);C[B]=J,S[B]=J-Q}if(A){var Z,$="x"===B?ov:av,tt="x"===B?rv:Av,et=C[w],it="y"===w?"height":"width",nt=et+f[$],st=et-f[tt],ot=-1!==[ov,av].indexOf(m),rt=null!=(Z=null==F?void 0:F[w])?Z:0,At=ot?nt:et-b[it]-v[it]-rt+E.altAxis,at=ot?et+b[it]+v[it]-rt-E.altAxis:st,lt=d&&ot?function(t,e,i){var n=Nv(t,e,i);return n>i?i:n}(At,et,at):Nv(d?At:nt,et,d?at:st);C[w]=lt,S[w]=lt-et}e.modifiersData[n]=S}},requiresIfExists:["offset"]};function gx(t,e,i){void 0===i&&(i=!1);var n,s,o=wv(e),r=wv(e)&&function(t){var e=t.getBoundingClientRect(),i=Fv(e.width)/t.offsetWidth||1,n=Fv(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),A=kv(e),a=Mv(t,r,i),l={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(o||!o&&!i)&&(("body"!==yv(e)||tx(A))&&(l=(n=e)!==_v(n)&&wv(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:Zv(n)),wv(e)?((h=Mv(e,!0)).x+=e.clientLeft,h.y+=e.clientTop):A&&(h.x=$v(A))),{x:a.left+l.scrollLeft-h.x,y:a.top+l.scrollTop-h.y,width:a.width,height:a.height}}function px(t){var e=new Map,i=new Set,n=[];function s(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||s(t)})),n}var fx={placement:"bottom",modifiers:[],strategy:"absolute"};function mx(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function yx(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,s=e.defaultOptions,o=void 0===s?fx:s;return function(t,e,i){void 0===i&&(i=o);var s,r,A={placement:"bottom",orderedModifiers:[],options:Object.assign({},fx,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},a=[],l=!1,h={state:A,setOptions:function(i){var s="function"==typeof i?i(A.options):i;c(),A.options=Object.assign({},o,A.options,s),A.scrollParents={reference:Bv(t)?ix(t):t.contextElement?ix(t.contextElement):[],popper:ix(e)};var r,l,u=function(t){var e=px(t);return mv.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((r=[].concat(n,A.options.modifiers),l=r.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(l).map((function(t){return l[t]}))));return A.orderedModifiers=u.filter((function(t){return t.enabled})),A.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,s=t.effect;if("function"==typeof s){var o=s({state:A,name:e,instance:h,options:n}),r=function(){};a.push(o||r)}})),h.update()},forceUpdate:function(){if(!l){var t=A.elements,e=t.reference,i=t.popper;if(mx(e,i)){A.rects={reference:gx(e,Dv(i),"fixed"===A.options.strategy),popper:Lv(i)},A.reset=!1,A.placement=A.options.placement,A.orderedModifiers.forEach((function(t){return A.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<A.orderedModifiers.length;n++)if(!0!==A.reset){var s=A.orderedModifiers[n],o=s.fn,r=s.options,a=void 0===r?{}:r,c=s.name;"function"==typeof o&&(A=o({state:A,options:a,name:c,instance:h})||A)}else A.reset=!1,n=-1}}},update:(s=function(){return new Promise((function(t){h.forceUpdate(),t(A)}))},function(){return r||(r=new Promise((function(t){Promise.resolve().then((function(){r=void 0,t(s())}))}))),r}),destroy:function(){c(),l=!0}};if(!mx(t,e))return h;function c(){a.forEach((function(t){return t()})),a=[]}return h.setOptions(i).then((function(t){!l&&i.onFirstUpdate&&i.onFirstUpdate(t)})),h}}var _x=yx({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,o=void 0===s||s,r=n.resize,A=void 0===r||r,a=_v(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&l.forEach((function(t){t.addEventListener("scroll",i.update,Xv)})),A&&a.addEventListener("resize",i.update,Xv),function(){o&&l.forEach((function(t){t.removeEventListener("scroll",i.update,Xv)})),A&&a.removeEventListener("resize",i.update,Xv)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=rx({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=void 0===n||n,o=i.adaptive,r=void 0===o||o,A=i.roundOffsets,a=void 0===A||A,l={placement:vv(e.placement),variation:Vv(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,zv(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:r,roundOffsets:a})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,zv(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},bv,ux,lx,dx,Kv,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,r=Ax(e,{elementContext:"reference"}),A=Ax(e,{altBoundary:!0}),a=hx(r,n),l=hx(A,s,o),h=cx(a),c=cx(l);e.modifiersData[i]={referenceClippingOffsets:a,popperEscapeOffsets:l,isReferenceHidden:h,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}}]}),Bx="tippy-content",wx="tippy-arrow",Cx="tippy-svg-arrow",bx={passive:!0,capture:!0},vx=function(){return document.body};function xx(t,e,i){if(Array.isArray(t)){var n=t[e];return null==n?Array.isArray(i)?i[e]:i:n}return t}function Ex(t,e){var i={}.toString.call(t);return 0===i.indexOf("[object")&&i.indexOf(e+"]")>-1}function Fx(t,e){return"function"==typeof t?t.apply(void 0,e):t}function Sx(t,e){return 0===e?t:function(n){clearTimeout(i),i=setTimeout((function(){t(n)}),e)};var i}function Ix(t,e){var i=Object.assign({},t);return e.forEach((function(t){delete i[t]})),i}function Mx(t){return[].concat(t)}function Lx(t,e){-1===t.indexOf(e)&&t.push(e)}function Ux(t){return[].slice.call(t)}function Qx(t){return Object.keys(t).reduce((function(e,i){return void 0!==t[i]&&(e[i]=t[i]),e}),{})}function Tx(){return document.createElement("div")}function kx(t){return["Element","Fragment"].some((function(e){return Ex(t,e)}))}function Rx(t){return kx(t)?[t]:function(t){return Ex(t,"NodeList")}(t)?Ux(t):Array.isArray(t)?t:Ux(document.querySelectorAll(t))}function Px(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function Dx(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function Ox(t,e,i){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[n](e,i)}))}function Nx(t,e){for(var i=e;i;){var n;if(t.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var Hx={isTouch:!1},Gx=0;function Kx(){Hx.isTouch||(Hx.isTouch=!0,window.performance&&document.addEventListener("mousemove",Vx))}function Vx(){var t=performance.now();t-Gx<20&&(Hx.isTouch=!1,document.removeEventListener("mousemove",Vx)),Gx=t}function Wx(){var t,e=document.activeElement;if((t=e)&&t._tippy&&t._tippy.reference===t){var i=e._tippy;e.blur&&!i.state.isVisible&&e.blur()}}var zx=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,Xx=Object.assign({appendTo:vx,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Yx=Object.keys(Xx);function qx(t){var e=(t.plugins||[]).reduce((function(e,i){var n,s=i.name,o=i.defaultValue;s&&(e[s]=void 0!==t[s]?t[s]:null!=(n=Xx[s])?n:o);return e}),{});return Object.assign({},t,e)}function jx(t,e){var i=Object.assign({},e,{content:Fx(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(qx(Object.assign({},Xx,{plugins:e}))):Yx).reduce((function(e,i){var n=(t.getAttribute("data-tippy-"+i)||"").trim();if(!n)return e;if("content"===i)e[i]=n;else try{e[i]=JSON.parse(n)}catch(t){e[i]=n}return e}),{})}(t,e.plugins));return i.aria=Object.assign({},Xx.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?e.interactive:i.aria.expanded,content:"auto"===i.aria.content?e.interactive?null:"describedby":i.aria.content},i}function Jx(t,e){t.innerHTML=e}function Zx(t){var e=Tx();return!0===t?e.className=wx:(e.className=Cx,kx(t)?e.appendChild(t):Jx(e,t)),e}function $x(t,e){kx(e.content)?(Jx(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Jx(t,e.content):t.textContent=e.content)}function tE(t){var e=t.firstElementChild,i=Ux(e.children);return{box:e,content:i.find((function(t){return t.classList.contains(Bx)})),arrow:i.find((function(t){return t.classList.contains(wx)||t.classList.contains(Cx)})),backdrop:i.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function eE(t){var e=Tx(),i=Tx();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=Tx();function s(i,n){var s=tE(e),o=s.box,r=s.content,A=s.arrow;n.theme?o.setAttribute("data-theme",n.theme):o.removeAttribute("data-theme"),"string"==typeof n.animation?o.setAttribute("data-animation",n.animation):o.removeAttribute("data-animation"),n.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?o.setAttribute("role",n.role):o.removeAttribute("role"),i.content===n.content&&i.allowHTML===n.allowHTML||$x(r,t.props),n.arrow?A?i.arrow!==n.arrow&&(o.removeChild(A),o.appendChild(Zx(n.arrow))):o.appendChild(Zx(n.arrow)):A&&o.removeChild(A)}return n.className=Bx,n.setAttribute("data-state","hidden"),$x(n,t.props),e.appendChild(i),i.appendChild(n),s(t.props,t.props),{popper:e,onUpdate:s}}eE.$$tippy=!0;var iE=1,nE=[],sE=[];function oE(t,e){var i,n,s,o,r,A,a,l,h=jx(t,Object.assign({},Xx,qx(Qx(e)))),c=!1,u=!1,d=!1,g=!1,p=[],f=Sx(X,h.interactiveDebounce),m=iE++,y=(l=h.plugins).filter((function(t,e){return l.indexOf(t)===e})),_={id:m,reference:t,popper:Tx(),popperInstance:null,props:h,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:y,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(s)},setProps:function(e){if(_.state.isDestroyed)return;Q("onBeforeUpdate",[_,e]),W();var i=_.props,n=jx(t,Object.assign({},i,Qx(e),{ignoreAttributes:!0}));_.props=n,V(),i.interactiveDebounce!==n.interactiveDebounce&&(R(),f=Sx(X,n.interactiveDebounce));i.triggerTarget&&!n.triggerTarget?Mx(i.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):n.triggerTarget&&t.removeAttribute("aria-expanded");k(),U(),C&&C(i,n);_.popperInstance&&(J(),$().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));Q("onAfterUpdate",[_,e])},setContent:function(t){_.setProps({content:t})},show:function(){var t=_.state.isVisible,e=_.state.isDestroyed,i=!_.state.isEnabled,n=Hx.isTouch&&!_.props.touch,s=xx(_.props.duration,0,Xx.duration);if(t||e||i||n)return;if(S().hasAttribute("disabled"))return;if(Q("onShow",[_],!1),!1===_.props.onShow(_))return;_.state.isVisible=!0,F()&&(w.style.visibility="visible");U(),N(),_.state.isMounted||(w.style.transition="none");if(F()){var o=M(),r=o.box,a=o.content;Px([r,a],0)}A=function(){var t;if(_.state.isVisible&&!g){if(g=!0,w.offsetHeight,w.style.transition=_.props.moveTransition,F()&&_.props.animation){var e=M(),i=e.box,n=e.content;Px([i,n],s),Dx([i,n],"visible")}T(),k(),Lx(sE,_),null==(t=_.popperInstance)||t.forceUpdate(),Q("onMount",[_]),_.props.animation&&F()&&function(t,e){G(t,e)}(s,(function(){_.state.isShown=!0,Q("onShown",[_])}))}},function(){var t,e=_.props.appendTo,i=S();t=_.props.interactive&&e===vx||"parent"===e?i.parentNode:Fx(e,[i]);t.contains(w)||t.appendChild(w);_.state.isMounted=!0,J()}()},hide:function(){var t=!_.state.isVisible,e=_.state.isDestroyed,i=!_.state.isEnabled,n=xx(_.props.duration,1,Xx.duration);if(t||e||i)return;if(Q("onHide",[_],!1),!1===_.props.onHide(_))return;_.state.isVisible=!1,_.state.isShown=!1,g=!1,c=!1,F()&&(w.style.visibility="hidden");if(R(),H(),U(!0),F()){var s=M(),o=s.box,r=s.content;_.props.animation&&(Px([o,r],n),Dx([o,r],"hidden"))}T(),k(),_.props.animation?F()&&function(t,e){G(t,(function(){!_.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&e()}))}(n,_.unmount):_.unmount()},hideWithInteractivity:function(t){I().addEventListener("mousemove",f),Lx(nE,f),f(t)},enable:function(){_.state.isEnabled=!0},disable:function(){_.hide(),_.state.isEnabled=!1},unmount:function(){_.state.isVisible&&_.hide();if(!_.state.isMounted)return;Z(),$().forEach((function(t){t._tippy.unmount()})),w.parentNode&&w.parentNode.removeChild(w);sE=sE.filter((function(t){return t!==_})),_.state.isMounted=!1,Q("onHidden",[_])},destroy:function(){if(_.state.isDestroyed)return;_.clearDelayTimeouts(),_.unmount(),W(),delete t._tippy,_.state.isDestroyed=!0,Q("onDestroy",[_])}};if(!h.render)return _;var B=h.render(_),w=B.popper,C=B.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+_.id,_.popper=w,t._tippy=_,w._tippy=_;var b=y.map((function(t){return t.fn(_)})),v=t.hasAttribute("aria-expanded");return V(),k(),U(),Q("onCreate",[_]),h.showOnCreate&&tt(),w.addEventListener("mouseenter",(function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()})),w.addEventListener("mouseleave",(function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&I().addEventListener("mousemove",f)})),_;function x(){var t=_.props.touch;return Array.isArray(t)?t:[t,0]}function E(){return"hold"===x()[0]}function F(){var t;return!(null==(t=_.props.render)||!t.$$tippy)}function S(){return a||t}function I(){var t,e,i=S().parentNode;return i?null!=(e=Mx(i)[0])&&null!=(t=e.ownerDocument)&&t.body?e.ownerDocument:document:document}function M(){return tE(w)}function L(t){return _.state.isMounted&&!_.state.isVisible||Hx.isTouch||o&&"focus"===o.type?0:xx(_.props.delay,t?0:1,Xx.delay)}function U(t){void 0===t&&(t=!1),w.style.pointerEvents=_.props.interactive&&!t?"":"none",w.style.zIndex=""+_.props.zIndex}function Q(t,e,i){var n;(void 0===i&&(i=!0),b.forEach((function(i){i[t]&&i[t].apply(i,e)})),i)&&(n=_.props)[t].apply(n,e)}function T(){var e=_.props.aria;if(e.content){var i="aria-"+e.content,n=w.id;Mx(_.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(i);if(_.state.isVisible)t.setAttribute(i,e?e+" "+n:n);else{var s=e&&e.replace(n,"").trim();s?t.setAttribute(i,s):t.removeAttribute(i)}}))}}function k(){!v&&_.props.aria.expanded&&Mx(_.props.triggerTarget||t).forEach((function(t){_.props.interactive?t.setAttribute("aria-expanded",_.state.isVisible&&t===S()?"true":"false"):t.removeAttribute("aria-expanded")}))}function R(){I().removeEventListener("mousemove",f),nE=nE.filter((function(t){return t!==f}))}function P(e){if(!Hx.isTouch||!d&&"mousedown"!==e.type){var i=e.composedPath&&e.composedPath()[0]||e.target;if(!_.props.interactive||!Nx(w,i)){if(Mx(_.props.triggerTarget||t).some((function(t){return Nx(t,i)}))){if(Hx.isTouch)return;if(_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else Q("onClickOutside",[_,e]);!0===_.props.hideOnClick&&(_.clearDelayTimeouts(),_.hide(),u=!0,setTimeout((function(){u=!1})),_.state.isMounted||H())}}}function D(){d=!0}function O(){d=!1}function N(){var t=I();t.addEventListener("mousedown",P,!0),t.addEventListener("touchend",P,bx),t.addEventListener("touchstart",O,bx),t.addEventListener("touchmove",D,bx)}function H(){var t=I();t.removeEventListener("mousedown",P,!0),t.removeEventListener("touchend",P,bx),t.removeEventListener("touchstart",O,bx),t.removeEventListener("touchmove",D,bx)}function G(t,e){var i=M().box;function n(t){t.target===i&&(Ox(i,"remove",n),e())}if(0===t)return e();Ox(i,"remove",r),Ox(i,"add",n),r=n}function K(e,i,n){void 0===n&&(n=!1),Mx(_.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,i,n),p.push({node:t,eventType:e,handler:i,options:n})}))}function V(){var t;E()&&(K("touchstart",z,{passive:!0}),K("touchend",Y,{passive:!0})),(t=_.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(K(t,z),t){case"mouseenter":K("mouseleave",Y);break;case"focus":K(zx?"focusout":"blur",q);break;case"focusin":K("focusout",q)}}))}function W(){p.forEach((function(t){var e=t.node,i=t.eventType,n=t.handler,s=t.options;e.removeEventListener(i,n,s)})),p=[]}function z(t){var e,i=!1;if(_.state.isEnabled&&!j(t)&&!u){var n="focus"===(null==(e=o)?void 0:e.type);o=t,a=t.currentTarget,k(),!_.state.isVisible&&Ex(t,"MouseEvent")&&nE.forEach((function(e){return e(t)})),"click"===t.type&&(_.props.trigger.indexOf("mouseenter")<0||c)&&!1!==_.props.hideOnClick&&_.state.isVisible?i=!0:tt(t),"click"===t.type&&(c=!i),i&&!n&&et(t)}}function X(t){var e=t.target,i=S().contains(e)||w.contains(e);if("mousemove"!==t.type||!i){var n=$().concat(w).map((function(t){var e,i=null==(e=t._tippy.popperInstance)?void 0:e.state;return i?{popperRect:t.getBoundingClientRect(),popperState:i,props:h}:null})).filter(Boolean);(function(t,e){var i=e.clientX,n=e.clientY;return t.every((function(t){var e=t.popperRect,s=t.popperState,o=t.props.interactiveBorder,r=s.placement.split("-")[0],A=s.modifiersData.offset;if(!A)return!0;var a="bottom"===r?A.top.y:0,l="top"===r?A.bottom.y:0,h="right"===r?A.left.x:0,c="left"===r?A.right.x:0,u=e.top-n+a>o,d=n-e.bottom-l>o,g=e.left-i+h>o,p=i-e.right-c>o;return u||d||g||p}))})(n,t)&&(R(),et(t))}}function Y(t){j(t)||_.props.trigger.indexOf("click")>=0&&c||(_.props.interactive?_.hideWithInteractivity(t):et(t))}function q(t){_.props.trigger.indexOf("focusin")<0&&t.target!==S()||_.props.interactive&&t.relatedTarget&&w.contains(t.relatedTarget)||et(t)}function j(t){return!!Hx.isTouch&&E()!==t.type.indexOf("touch")>=0}function J(){Z();var e=_.props,i=e.popperOptions,n=e.placement,s=e.offset,o=e.getReferenceClientRect,r=e.moveTransition,a=F()?tE(w).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||S()}:t,h={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(F()){var i=M().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?i.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?i.setAttribute("data-"+t,""):i.removeAttribute("data-"+t)})),e.attributes.popper={}}}},c=[{name:"offset",options:{offset:s}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!r}},h];F()&&a&&c.push({name:"arrow",options:{element:a,padding:3}}),c.push.apply(c,(null==i?void 0:i.modifiers)||[]),_.popperInstance=_x(l,w,Object.assign({},i,{placement:n,onFirstUpdate:A,modifiers:c}))}function Z(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function $(){return Ux(w.querySelectorAll("[data-tippy-root]"))}function tt(t){_.clearDelayTimeouts(),t&&Q("onTrigger",[_,t]),N();var e=L(!0),n=x(),s=n[0],o=n[1];Hx.isTouch&&"hold"===s&&o&&(e=o),e?i=setTimeout((function(){_.show()}),e):_.show()}function et(t){if(_.clearDelayTimeouts(),Q("onUntrigger",[_,t]),_.state.isVisible){if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&c)){var e=L(!1);e?n=setTimeout((function(){_.state.isVisible&&_.hide()}),e):s=requestAnimationFrame((function(){_.hide()}))}}else H()}}function rE(t,e){void 0===e&&(e={});var i=Xx.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",Kx,bx),window.addEventListener("blur",Wx);var n=Object.assign({},e,{plugins:i}),s=Rx(t).reduce((function(t,e){var i=e&&oE(e,n);return i&&t.push(i),t}),[]);return kx(t)?s[0]:s}rE.defaultProps=Xx,rE.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Xx[e]=t[e]}))},rE.currentInput=Hx;var AE=Object.assign({},bv,{effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow)}}),aE={mouseover:"mouseenter",focusin:"focus",click:"click"};function lE(t,e){var i=[],n=[],s=!1,o=e.target,r=Ix(e,["target"]),A=Object.assign({},r,{trigger:"manual",touch:!1}),a=Object.assign({touch:Xx.touch},r,{showOnCreate:!0}),l=rE(t,A);function h(t){if(t.target&&!s){var i=t.target.closest(o);if(i){var r=i.getAttribute("data-tippy-trigger")||e.trigger||Xx.trigger;if(!i._tippy&&!("touchstart"===t.type&&"boolean"==typeof a.touch||"touchstart"!==t.type&&r.indexOf(aE[t.type])<0)){var A=rE(i,a);A&&(n=n.concat(A))}}}}function c(t,e,n,s){void 0===s&&(s=!1),t.addEventListener(e,n,s),i.push({node:t,eventType:e,handler:n,options:s})}return Mx(l).forEach((function(t){var e=t.destroy,o=t.enable,r=t.disable;t.destroy=function(t){void 0===t&&(t=!0),t&&n.forEach((function(t){t.destroy()})),n=[],i.forEach((function(t){var e=t.node,i=t.eventType,n=t.handler,s=t.options;e.removeEventListener(i,n,s)})),i=[],e()},t.enable=function(){o(),n.forEach((function(t){return t.enable()})),s=!1},t.disable=function(){r(),n.forEach((function(t){return t.disable()})),s=!0},function(t){var e=t.reference;c(e,"touchstart",h,bx),c(e,"mouseover",h),c(e,"focusin",h),c(e,"click",h)}(t)})),l}rE.setDefaultProps({render:eE});const hE=["Abaft","Abandoned","Abased","Abashed","Abasic","Abbatial","Abdicable","Abdicant","Abdicative","Abdominal","Abdominous","Abducent","Aberrant","Abeyant","Abhorrent","Abiotic","Ablaze","Able","Ablebodied","Abnormal","Abominable","Aboriginal","Above","Abrupt","Absent","Absolute","Abstract","Abstracted","Absurd","Abusive","Abysmal","Abyssal","Academic","Academical","Acardiac","Acceptable","Accepted","Accessible","Accurate","Accused","Achronite","Acid","Acidfast","Acidic","Acidotic","Acidulous","Aciduric","Acidy","Acoustic","Acrid","Acrobatic","Acrophobic","Acrylic","Actinide","Actinium","Activated","Active","Actual","Actuarial","Actuarian","Acute","Adamantine","Adamantium","Added","Addictive","Additional","Adept","Adequate","Adhesive","Adjacent","Adjoining","Adobe","Adolescent","Adorable","Adored","Adoring","Adrenal","Adroit","Adult","Advanced","Adverse","Advertent","Aerial","Aerobic","Aeromarine","Aeronautic","Aerophobic","Aesthetic","Afeard","Affable","Afflicted","Affluent","Affordable","Afraid","Agate","Agatoid","Ageold","Aged","Ageless","Aggressive","Aghast","Agile","Agitable","Agitative","Agonizing","Agrarian","Agreeable","Agreed","Agrologic","Agronomic","Ahistoric","Ailing","Aimless","Airborne","Airsick","Airtight","Airworthy","Airy","Alabaster","Alamode","Albinic","Albinistic","Albino","Albite","Alchemic","Alert","Algebraic","Algophobic","Alien","Alive","Alkalic","Alkaline","Alkaloidal","Alkylic","Allpurpose","Allstar","Allayed","Alleged","Allegro","Allergenic","Allergic","Allied","Alluring","Almond","Almondy","Alphabetic","Alphameric","Alright","Altophobic","Altruistic","Amaranth","Amateur","Amateurish","Amazing","Amber","Amberous","Ambery","Ambient","Ambigious","Ambitious","Ambivalent","Amebic","Ameboid","Amenable","Americium","Amethyst","Amiable","Amicable","Ammoniac","Ammoniacal","Ammonic","Ammonitic","Ammonitoid","Ammophilic","Amnestic","Amoebaean","Amoebalike","Amoebic","Amoeboid","Amoral","Amphibian","Amphibious","Amphibole","Amphibolic","Ample","Amputated","Amused","Amusing","Anachronic","Anaemic","Analogical","Analogous","Analytical","Anarchic","Anarthric","Anarthrous","Anatomical","Ancestral","Ancient","Androgenic","Anecdotal","Anesthetic","Angelic","Angry","Angsty","Anguished","Angular","Anhydrite","Animalic","Animated","Animist","Animistic","Annoyed","Annoying","Anonymous","Anorthite","Antarctic","Antebellum","Antelopian","Antelopine","Anthracite","Anthropoid","Antiheroic","Antidotal","Antifungal","Antigorite","Antihuman","Antimoral","Antiquated","Antique","Antischool","Antisocial","Antisolar","Antitoxic","Antiutopic","Antiviral","Antivirus","Antsy","Anxious","Apathetic","Apelike","Aphidian","Aphidious","Apian","Apiarian","Apidologic","Apiologic","Apiphobic","Apish","Apivorous","Apolitical","Apostolic","Apothecial","Appalling","Apparent","Appealing","Appetitive","Appetizing","Applicable","Apprentice","Apricot","Apt","Aquamarine","Aquaphobic","Aquarial","Aquatic","Aqueous","Aquiline","Arachnidan","Aragonite","Arbitrary","Arboreal","Arbored","Arboreous","Arboresque","Arborous","Arcane","Archaic","Archaistic","Archetypal","Archetypic","Archival","Arctic","Ardent","Arduous","Arid","Armed","Armless","Armourclad","Armoured","Aromatic","Arrogant","Arterial","Artful","Arthralgic","Arthritic","Arthrodial","Arthrodic","Artificial","Artistic","Artless","Arty","Artycrafty","Asbestine","Asbestoid","Asbestos","Asbestous","Ash","Ashamed","Ashen","Ashy","Asinine","Asocial","Asphalt","Asphaltic","Asphaltum","Aspherical","Aspiring","Assertive","Assiduous","Assistant","Associated","Astatine","Asteria","Asthmatic","Asthmatoid","Astounding","Astrakhan","Astral","Astute","Asyllabic","Athletic","Atomic","Atrocious","Atrophic","Atrophied","Attack","Attentive","Attractive","Atypical","Auburn","Audacious","Augite","Augmented","Auroral","Aurorean","Aurous","Auspicial","Auspicious","Authentic","Authorial","Authorized","Autoimmune","Automatic","Automotive","Autonomous","Autophobic","Autositic","Autumnal","Auxiliary","Available","Avaricious","Avengeful","Aventurine","Average","Avian","Aviaphobic","Aviophobic","Avoided","Awake","Aware","Awestruck","Awesome","Awful","Awkward","Axiomatic","Azure","Baboonish","Baby","BabyFaced","Babyish","Bacciform","Backward","Bacterial","Bacteroid","Bad","Baffling","Baggy","Bairnish","Bairnly","Balanced","Bald","Baldheaded","Balding","Baldish","Baleful","Balky","Balladic","Balmy","Balneal","Balsamic","Balsamy","Banal","Baneful","Barathea","Barbarian","Barbaric","Barbarous","Bardic","Bardish","Bardlike","Bardy","Bare","Bared","Barite","Barky","Barnacled","Baroque","Barren","Baryte","Basalt","Basaltic","Basaltine","Base","Baseborn","Bashful","Basic","Batiste","Battlesome","Batty","Beachy","Beaming","Beamish","Beamlike","Beamy","Beaten","Beatific","Beauish","Beauteous","Beautiful","Becoming","Bediasite","Bedridden","BeefWitted","Beefy","Beelike","Beeswax","Befuddled","Befuddling","Beggarly","Beguiling","Behavioral","Beige","Belated","Bellicose","Belocolus","Beloved","Bemused","Beneficent","Beneficial","Benevolent","Benighted","Benign","Benignant","Bereaved","Bereft","Beribboned","Berkelium","Berrylike","Berserk","Beryl","Besotted","Best","Bestial","Beton","Betrothed","Bewildered","Bewitched","Bewitching","Bicolor","Big","BigBoned","BigHearted","Biggish","Bigheaded","Bigoted","Bilinear","Bilineate","Bilingual","Bimetallic","Binary","Binding","Biological","Biomedical","Bionic","Biophilic","Biotite","Bipartisan","Birdlike","Birthstone","BiteSized","Bitter","Bitty","Bitumen","Bixbite","Bizarre","Black","Blackish","Blamable","Blameable","Blameful","Blameless","Bland","Blank","Bleached","Bleak","Bleakish","BlearEyed","Bleary","Blessed","Blind","Blissful","Blithe","Blitheful","Blithesome","Blizzardly","Blizzardy","Bloated","Blockish","Blocky","Blond","Blonde","Blondish","Bloodshot","Blotchy","Blousy","Blowsy","Blowy","Blowzy","Blubbery","Blue","BlueBlack","BlueCollar","BlueRibbon","Bluecoated","Blueish","Blunt","Blushing","Blusterous","Boarish","Boastful","Bohrium","Boiled","Boiling","Bold","BoldFaced","Bolstered","Bombastic","BoneDry","Boneheaded","Bonelike","Bonny","Bony","Bookish","Boolean","Boorish","Boreal","Bored","Boring","Bort","Bosky","Bossy","Botanic","Botanical","Botchy","Bothersome","Bottom","Bouncy","Boundless","Bovid","Bovine","Boyish","Braced","Braided","Brainless","Brainsick","Brainy","Brambly","Branny","Brash","Brashy","Brass","Brassbound","Brassish","Brassy","Brattish","Bratty","Brave","Braving","Brazen","Breaded","Breakable","Breathless","Breezelike","Breezy","Bribable","Bribeable","Brick","BrickRed","Brickish","Brickred","Bricky","Bridal","Brief","Brigandish","Bright","Brightish","Brilliant","Brimstone","Brimstony","Brinish","Briny","Brisk","Brittle","Broad","BroadFaced","Broadish","Brocatel","Brocatello","Broke","Broken","BrokenDown","Bronchial","Bronze","Bronzy","Broody","Brotherly","Brown","Brownish","Browny","Brunette","Brusque","Brutal","Brutish","Bubbly","Bubonic","Buckskin","Buggy","Bullish","Bulllike","Bullous","Bumbling","Bumpkinish","Bumpkinly","Bumpy","Buoyant","Burdensome","Burgundy","Buried","Burlap","Burly","Burned","BurnedOut","Burning","Burnt","Bushy","Busied","Busy","Busying","Buttery","Byzantine","Byzantium","Cabbagy","Cacotopic","CactusLike","Cactuslike","Cadaveric","Cadaverous","Caffeinic","Cagophilic","Calceiform","Calcite","Calicoed","Callous","Calm","Calmative","Calmy","Caloric","Caloried","Calorific","Calx","CameraShy","Camlet","Camoflage","Camouflage","Campy","Candid","Candied","Canine","Cankered","Cankerous","Cannibal","Canophilic","Capable","Capillary","Capitalist","Capitate","Capless","Capricious","Capsizable","Captious","Capturable","Carbasus","Carbon","Carbonic","Carbonless","Carbonous","Cardboard","Cardiac","Cardinal","Carefree","Careful","Careless","Caressive","Careworn","Caring","Carmine","Carnauba","Carnelian","Carneous","Carnivoral","Carnose","Carnous","Carping","Carriable","Carroty","Carryable","Carsick","Cashmere","CastIron","CastOff","CastSteel","Castoff","Catatonic","Catchable","Catching","Catchy","Catlike","Cattish","Cattlehide","Catty","Causable","Causative","Causeless","Caustic","Caustical","Cautious","Cavalier","Cavelike","Cavernous","Cavitied","Cayenned","Celadon","Celebrated","Celestial","Celestine","Celestite","CellLike","Cellular","Cement","Censorable","Censorial","Censorian","Censorious","Censual","Censurable","Centaurial","Centaurian","Centauric","Centerable","Centered","Centipedal","Central","Centric","Cepevorous","Cephalic","Cepivorous","Ceramic","Cerate","Cere","Cerebellar","Cerebral","Cerebric","Cerebroid","Cerise","Certain","Certified","Cerulean","Cetologic","Chalcedony","Chalk","Chalkstony","Chalky","Chanceful","Chancy","Changeable","Changeful","Chantable","Chaotic","Charcoal","Charcoaly","Chargeable","Chargeful","Chargeless","Charming","Charred","Charitable","Chartreuse","Chaseable","Chaste","Chattable","Chattery","Chatty","Chauvinist","Cheap","Cheatable","Checkable","Checked","Checkered","Cheeky","Cheerful","Cheerless","Cheery","CheeseLike","Cheesy","Chemic","Chemical","Cherubic","Cherubical","Chevrette","Chevroned","Chewable","Chewed","Chewy","Chiasmic","Chic","Chief","Chiffon","Childish","Childless","Childlike","Childly","Childproof","Childsafe","Chilled","Chilly","Chino","Chintzy","Chippable","Chipper","Chiselled","Chitchatty","Chivalric","Chivalrous","Chocolate","Chocolatey","Chocolaty","Choky","Choleric","Chondrite","Choosable","Choosey","Choosy","Choppy","Choral","Chordal","Chorded","Chosen","Chromatnic","Chromic","Chromite","Chromium","Chubby","Chuffy","Chummy","Chunky","Churchless","Churchly","Churchy","Churlish","Churnable","Cibophobic","Cilia","Cilium","Cinderlike","Cinderous","Cindery","Cinematic","Cinnabar","Cinnamic","Cinnamoned","Cinnamonic","Cipolin","Circular","Citable","Citatory","Citeable","Citied","Citified","Citizenly","Citreous","Citric","Citrine","Citylike","Civic","Civil","CivilLaw","Civilian","Civilized","Claimable","Clamlike","Clammy","Clannish","Classic","Classical","Classified","Classless","Classy","Clay","Clayey","Clayish","Clean","CleanCut","CleanFaced","Cleanable","Cleansable","ClearCut","ClearEyed","Clearable","Clerical","Clerkish","Clever","Cleverish","Cliffy","Climactic","Climatic","Climbing","Clingy","Clinical","Clippable","Clockwork","Cloddy","Cloggy","Cloistered","Cloned","Close","CloseBy","CloseIn","CloseKnit","Closed","Cloth","Clothed","Clotty","Cloudy","ClownLike","Clownish","Clubbable","Clubby","Clubfooted","Clueless","Clumpish","Clumpy","Clumsy","Cluttered","CoEd","Coachable","Coal","Coaly","Coarse","Coastal","Coated","Cob","Cobwebby","Cockeyed","Cocksure","Cocky","Cocoa","Coercive","Coexistent","Cogitative","Cognisant","Cognitive","Cognizant","Coherent","Cohesive","Cold","ColdWater","Coldish","Collective","Collielike","Collinear","Colloquial","Collusive","Colluvium","Colonial","Coloristic","Colossal","Colourable","Coloured","Colourific","Colourless","Coltish","Columnar","Columned","Combatable","Combative","Combustive","Comedial","Comely","Comfy","Comic","Comical","Commanding","Commercial","Commodious","Common","CommonLaw","Commonable","Communal","Communist","Communital","Community","Commutable","Commutual","Compact","Comparable","Compatible","Compellent","Compentant","Complacent","Complete","Complex","Compliable","Compliant","Compulsive","Compulsory","Computable","Concave","Conceited","Conceptual","Concerned","Concessive","Conchin","Conchiolin","Concise","Conclusive","Concrete","Concurrent","Condemned","Condensed","Confident","Confined","Confirmed","Confluent","Confounded","Confused","Confusing","Congenial","Congested","Congruent","Congruous","Conscious","Consensual","Consistent","Consolable","Constant","Consumable","Consummate","Contactual","Contagious","Contained","Content","Contented","Contextual","Contiguous","Continual","Continued","Continuing","Continuous","Contorted","Contortive","Contrary","Contrite","Contrived","Controlled","Convective","Convenable","Convenient","Conventual","Convergent","Conversant","Converted","Conveyable","Convictive","Convincing","Convivial","Convulsant","Convulsive","Cookable","Cooked","Cool","Copacetic","Coplanar","Copper","Coppery","Coquettish","Coral","Coralline","Coralloid","Cordial","Corduroy","Corelative","Cork","Corked","Corking","Corky","Cornmeal","Corny","Coronary","Corporal","Corporate","Corporeal","Correct","Corrective","Corrodible","Corrosive","Corrupt","Corrupted","Corruptful","Corrupting","Corruptive","Cosey","Coseys","Cosie","Cosies","Cosmic","Cosmogonal","Cosmogonic","Cosmologic","Costless","Costly","Cosy","Cotton","Cottony","Countable","Couped","Courageous","Courteous","Courtly","Coverable","Covered","Covert","Covetable","Coveting","Covetous","Cowardly","Cowlike","Coy","Coyish","Cozey","Cozy","Crabbed","Crabby","Crackable","Cracked","Crackless","Crafty","Craggy","Cramped","Cranial","Craniate","Cranky","Crashing","Crass","Craven","Crawly","Crazed","Crazy","Cream","Creamy","Creased","Creasy","Creatable","Creational","Creative","Creatural","Creaturely","Credible","Creditable","Credulous","Creeded","Creepy","Crematory","Cretaceous","Cretinoid","Cretinous","Creviced","Criminal","Crimpy","Crimson","Crippling","Crispy","Critical","Cronish","Crooked","Crotchety","Crowning","Crucial","Crude","Cruel","Crumbable","Crumbly","Crumby","Crumply","Cruse","Crushable","Crushing","Crusted","Crusty","Crying","Cryogenic","Cryophilic","Cryptic","Cryptozoic","Crystal","Cubic","Cubical","Cubiform","Cubistic","Cuboid","Cuddlesome","Cuddly","Culinary","Culm","Culpable","Cultic","Cultish","Cultivable","Cultivated","Cultual","Cultural","Cultured","Cumbersome","Cumbrous","Cummy","Cumulative","Cuneiform","Cunning","Cupulate","Curable","Curative","Curatorial","Curbable","Curdy","Cured","Curious","Curium","Curly","Current","Curricular","Cursed","Cursive","Cursorial","Cursory","Curt","Curvaceous","Curved","Curvy","Cushiony","Cushy","Cussed","Custodial","CustomMade","Customable","Customary","Cut","CutPrice","CutRate","Cute","Cuttable","Cyan","Cybernetic","Cyberpunk","Cyclopean","Cynical","Cynophobic","Cystic","Czarist","Dacite","Daemonic","Daffy","Daft","Dainty","Damageable","Damaged","Damaging","Damask","Damp","DampProof","Dampish","Dampproof","Dandriffy","Dandruffy","Dangerous","Dank","Dapper","DappleGray","Daredevil","Daring","Dark","Darkish","Darksome","Dashing","Dastardly","Dated","Daughterly","Dauntless","Daydreamy","Dazed","Dazzling","Dead","DeadSmooth","Deadbeat","Deadly","Deadpan","Dear","Deathful","Deathless","Deathlike","Deathly","Debatable","Debonair","Decadent","Decagonal","Decahedral","Decayable","Decayed","Deceased","Deceitful","Decent","Deceptive","Deciduous","Decisive","Declared","Declinable","Declinate","Decomposed","Decorated","Decorative","Decorous","Decrepit","Dedicated","Deducible","Deductible","Deductive","Deep","Deerskin","Defaceable","Defamatory","Defeasible","Defeated","Defectible","Defective","Defensive","Deferable","Deferent","Defiable","Defiant","Deficient","Definable","Definite","Definitive","Deflated","Deformable","Deformed","Deft","Defunct","Defunctive","Degradable","Degraded","Degrading","Dehydrated","Deific","Deiform","Deistic","Deistical","Dejected","Delayable","Delayed","Delectable","Delegable","Deliberate","Delicate","Delicious","Delighted","Delightful","Delirious","Delusional","Delusive","Demandable","Demanding","Demented","Democratic","Demoded","Demoniac","Demonian","Demonic","Demotic","Demure","Demurrable","Dendric","Dendriform","Dendritic","Dendroid","Deniable","Denim","Dense","Dental","Dentine","Departed","Dependable","Dependent","Depictive","Depilatory","Depleted","Depletive","Depletory","Deplorable","Deportable","Deposable","Depraved","Depressant","Depressed","Depressing","Depressive","Deprivable","Deprived","Deranged","Derelict","Derisible","Derisive","Derivable","Derivative","Dermal","Dermatic","Dermatoid","Dermatomic","Dermic","Dermoid","Derogative","Derogatory","Descendent","Desecrated","DesertLike","Deserted","Desertic","Desertlike","Deserved","Deserving","Desirable","Desired","Desirous","Despairful","Despairing","Desperate","Despicable","Despisable","Despiteful","Despiteous","Despondent","Despotic","Destined","Destitute","Destroyed","Detachable","Detailed","Detainable","Detectable","Detectible","Determined","Detestable","Detonable","Detonative","Detoxicant","Detractive","Deviant","Deviative","Deviceful","Devious","Devoid","Devoted","Devotional","Devout","Dewy","DewyEyed","Dexterous","Diabetic","Diabolic","Diagnostic","Diagonal","Dialectal","Diamant","Diamantine","Diamond","Dicey","Didactic","Diet","Dietary","Dietetic","Different","Difficult","Diffident","Diffusible","Digestible","Digestive","Digital","Digitiform","Dignified","Digressive","Dihedral","Dihydrated","Dihydric","Dilligent","Dim","DimWitted","Diminished","Diminutive","Dimmed","Dimming","Dimply","Dingy","Dinky","Diopside","Diplomatic","Dippy","Dire","Direful","Dirgeful","Dirt","Dirty","DirtyFaced","Disabled","Disarming","Disastrous","Discerning","Discreet","Discrepant","Discrete","Disdainful","Diseased","Disgusted","Disgustful","Disgusting","Dishonest","Disliked","Disloyal","Dismal","Dismissive","Disordered","Disparaged","Dispirited","Dispiteous","Displayed","Displeased","Disposable","Disputable","Disquieted","Disruptive","Dissected","Dissident","Dissimilar","Dissocial","Dissonant","Dissuasive","Distant","Distended","Distent","Distinct","Distorted","Distortive","Distracted","Disturbed","Disturbing","Disused","Disyllabic","Divergent","Diverse","Divinable","Divinatory","Divine","Diving","Dizzied","Dizzy","Dizzying","Docile","Doctoral","Doctorial","Doctrinal","Doddered","Doddering","DogPoor","DogTired","Dogged","Doggish","Doggoned","Doglike","Dogmatic","Dollfaced","Dollish","Dolomite","Dolorous","Dolostone","Doltish","Domestic","Dominant","Dominating","Doomed","Dopey","Dopy","Dorky","Dormant","Dorsal","Dotted","Doubtful","Doughty","Doughy","Dour","Doused","Dovish","Dowdy","Downcast","Downfallen","Downy","Dozing","Dozy","Drab","Draconian","Draconic","Drafty","Dragonish","Dragonlike","Dramatic","Drastic","Draughty","Drawn","Dreadable","Dreadful","Dreamful","Dreamlike","Dreamy","Drear","Drearisome","Dreary","Dressy","Drifty","Drinkable","DripDry","Dripping","Drippy","Driveable","Drizzly","Droll","Dronish","Drooly","Droopy","Drossy","Droughty","Drouthy","Drowsy","Druidic","Druidical","Dry","Dryadic","Dubious","Dubnium","Ducal","Duckie","Duelistic","Dull","Dullish","Dumb","Dumbstruck","Dumpish","Dumpy","Duncical","Duncish","Dungy","Dunite","Durable","Durational","Durative","Duskish","Dusky","Dustless","Dustproof","Dusty","Duteous","Dutiable","Dutiful","DutyBound","Dwarfed","Dwarfish","Dwarven","Dyable","Dying","Dynamic","Dynamistic","Dynamitic","Dynastic","Dynastical","Dystopian","Dystopic","Eager","EagleEyed","Earnest","Earth","Earthborn","Earthbound","Earthen","Earthly","Earthy","Easeful","Eastbound","Eastern","Eastmost","Easy","EasyGoing","Eatable","Eaved","Ebony","Ebullient","Eccentric","Eclectic","Eclogite","Ecologic","Ecological","Economic","Economical","Ecstatic","Ecumenical","Edacious","Edgy","Edible","Edificial","Editorial","Educable","Educated","Educative","Educatory","Eerie","Effaceable","Effectible","Effective","Effectual","Effeminate","Effete","Efficient","Effigial","Effortful","Effortless","Effusive","Egocentric","Egoistic","Egoistical","Egotistic","Egregious","Ejective","Elaborate","Elastic","Elated","Elder","Elderly","Electoral","Electric","Electrical","Electronic","Elegant","Elemental","Elementary","Elevated","Elfin","Elfish","Elicitable","Eligible","Eliminable","Elite","Elliptic","Elliptical","Elmy","Eloquent","Elusive","Elvish","Emaciated","Emanatory","Embattled","Emblematic","Embolic","Embolismic","Embracive","Emerald","Emeritus","Emersed","Emigrative","Emigratory","Eminent","Emo","Emotional","Emotive","Empathetic","Empathic","Emphatic","Empirical","Empiristic","Employable","Emptiable","Emptied","Empty","Empyrean","Emulsible","Emulsive","Encephalic","Enchanted","Enchanting","Endangered","Endemic","Endless","Endocrine","Endodermal","Endodermic","Endowed","Endurable","Endurant","Enduring","Energetic","Energistic","Enervated","Enervative","Engaged","Engaging","Enginous","Englacial","Engrammic","Enhanced","Enhancive","Enharmonic","Enigmatic","Enjambed","Enjoyable","Enormous","Enraged","Enrapt","Enslaved","Enstatite","Enthralled","Enthroned","Entire","Entitled","Entodermal","Entodermic","Enumerable","Enunciable","Enviable","Envious","Enzymatic","Eolithic","Eonian","Ephemeral","Epicardiac","Epicardial","Epicentral","Epicurean","Epidemic","Epidermal","Epidermic","Epidermoid","Episodic","Epitaphic","Epoxy","Equable","Equal","Equanimous","Equatable","Equational","Equatorial","Equestrian","Equine","Equipable","Equitable","Equivalent","Eradicable","Erasable","Erect","Erectable","Erectile","Erective","Ergonomic","Ergophilic","Ergophobic","Ermined","Erosive","Errable","Erratic","Escapable","Esophageal","Esoteric","Especial","Essential","Esthetic","Esthetical","Eternal","Ethereal","Ethical","Ethnic","Ethnogenic","Ethnologic","Ethologic","Etymologic","Eucalyptic","Euhedral","Euphoric","Evacuated","Evadable","Evadible","Evaluable","Evasive","Even","EvenHanded","EvenMinded","Eventful","Evergreen","Everyday","Evident","Evil","EvilEyed","EvilMinded","Evocable","Evolutive","Evolvable","Evolved","Exact","Exactable","Exacting","Exalted","Exceedable","Excellent","Excess","Excessive","Excisable","Excitable","Excited","Exciting","Exclusive","Excusable","Executable","Exemplary","Exemptible","Exhaustive","Exilable","Existent","Exodermal","Exorable","Exorcismal","Exorcistic","Exoteric","Exothermic","Exotic","Expandable","Expanded","Expansive","Expectable","Expectant","Expected","Expecting","Expedient","Expensive","Expert","Explicable","Exploding","Exploitive","Explorable","Explosive","Exportable","Exposable","Exposed","Exquisite","Extended","Extendible","Extensible","Exterior","External","Extinct","Extra","Extralegal","Extremal","Extreme","Extrovert","Exuberant","Exultant","Eyeable","Fab","Fabled","Fabric","Fabulous","Facial","Facile","Factional","Factorable","Fadable","Faded","Faint","Faintish","Fair","Fairish","Fairylike","Faithful","Faithless","Fake","Falconine","Falconnoid","Famed","Fameless","Familial","Familiar","Familyish","Famished","Famous","Fanatical","Fanciful","Fancy","Far","FarFlung","FarSeeing","FarSighted","Farcical","Fascinated","Fascist","Fast","FastMoving","Fat","FatFaced","FatLike","FatWitted","Fatal","Fatherly","Fathomable","Fatigable","Fatlike","Fattening","Fattish","Fatty","Faulty","Favourite","Fawning","Fearful","Fearless","Fearsome","Feasible","Feather","Feathered","Feathery","Federal","Feeble","Feeblish","Feedable","Feisty","Fel","Feldspar","Felicific","Felicitous","Feline","Fellow","Felonious","Felt","Female","Feminine","Feminist","Feministic","Femoral","Feral","Fermium","Fernlike","Ferny","Ferocious","Ferreous","Ferrety","Ferric","Ferrous","Fertile","Fervent","Fervid","Festive","Fetid","Feudal","Feudalist","Feverish","Feverous","Fibered","Fiberglass","Fibre","Fibroid","Fibrous","Fickle","Fictional","Fidgety","Fiendish","Fierce","Fiery","Fightable","Figurable","Filched","Fillable","Filmable","Filterable","Filthy","Finable","Final","Financial","Findable","Fine","FineDrawn","FineGrain","Fineable","Finespun","Finical","Finicky","Finnicky","Fireless","Fireproof","Firm","First","FirstBorn","Fiscal","Fishable","Fishy","Fit","Fittable","Fixable","Fixed","Fizzy","Flabby","Flaky","Flamboyant","Flameproof","Flaming","Flammable","Flamy","Flannel","Flashy","Flat","Flattering","Flattish","Flaunty","Flavorous","Flavoured","Flavourful","Flavoury","Flawless","Flax","Flayed","Fleece","Fleecy","Fleeting","Fleshless","Fleshly","Fleshy","Flexible","Flighty","Flimsy","Flinty","Flirty","Floatable","Floating","Floaty","Floggable","Floodable","Floppy","Floral","Floreated","Floriated","Florid","Floristic","Floury","Flowable","Flowered","Flowering","Flowery","Fluent","Fluffy","Fluid","Fluidal","Fluidic","Fluorite","Fluorspar","Flushed","Flyable","Flying","Foamy","Fogbound","Fogged","Foggy","Foggyish","Foil","Foilable","Foldable","Foliaceous","Foliaged","Foliated","Followable","Fond","Foolhardy","Foolish","Foolproof","Footed","Forbidden","Forbidding","Forcible","Fordable","Foreign","Forensic","Forest","Forestial","Forgeable","Forgetful","Forgivable","Forlorn","Formable","Formal","Former","Formidable","Fortified","Fortuitous","Fortunate","Forworn","FossilLike","Fossillike","Foulard","Foxlike","Foxy","Fozy","Fractious","Fragile","Fragrant","Frail","Framable","Francium","Frangible","Frank","Frantic","Fraternal","Freakish","Freaky","Freckled","Freckly","Free","FreeTrade","Freeborn","Freezable","Freezing","Frenzied","Fresh","Fretful","Freudian","Friended","Friendless","Friendly","Frightened","Frigid","Frilly","Frisky","Frivolous","Frizzly","Frizzy","Frogged","Froggy","Frolicky","Frolicsome","Front","Frosted","Frosty","Frothy","Frousy","Frouzy","Frowsy","Frowzy","Frozen","Frugal","Fruitarian","Fruited","Fruitful","Fruity","Fruticose","Fuchsia","Full","FullGrown","FullTime","Fumbling","Fun","Functional","Fungal","Fungic","Fungicidal","Fungiform","Fungoid","Fungous","Fungus","Funny","Fur","Furious","Furred","Furry","Furtive","Fusible","Fussy","Futile","Future","Futuristic","Fuzzy","Gabardine","Gabby","Gadgety","Gainable","Galactic","Galactoid","Gallant","Galloping","Gamboge","Gammy","Gamy","Gangly","Gangrene","Gangrenous","Gargantuan","Garish","Garlicky","Garnet","Gaseous","Gasolinic","Gassy","Gastric","Gatherable","Gauche","Gaudy","Gaugeable","Gaunt","Gauze","Gauzy","Gelatinoid","Gelatinous","Gem","Gemmy","Gemstone","Genealogic","General","Generic","Generous","Genetic","Genial","Genius","Genocidal","Gentile","Gentle","Gentled","Gentling","Genuine","Geode","Geologic","Geological","Geomedical","Geometric","Geophilic","Georgiaite","Germfree","Germicidal","Germinable","Germless","Germlike","Germproof","Ghast","Ghastful","Ghastly","Ghetto","Ghostlike","Ghostly","Ghoulish","Giant","Giddied","Giddy","Giddying","Gifted","Gigantean","Gigantic","Giggly","Gimmicky","Girlish","Girly","Giveable","Glacial","Glaciered","Glad","Glamorous","Glandlike","Glandular","Glandulous","Glass","Glassy","Glazed","Gleaming","Gleeful","Gleesome","Glistening","Glittery","Global","Gloomful","Gloomy","Glorious","Glossy","Glowing","Gluey","Glum","Gluteal","Glutinous","Gluttonous","Glycemic","Gnarled","Gnarly","Gnatty","Gnawable","Gnomic","Gnomish","Gnomologic","Gnomonic","GodFearing","Godless","Godlike","Godly","Godsent","Gold","GoldFilled","GoldFoil","GoldLeaf","Golden","Goldenrod","Good","GoodSized","Goodish","Goodly","Gooey","Goofy","Goosebumpy","Gorgeable","Gorgeous","Gorillian","Gorilline","Gorilloid","Gossipy","Gothic","Gourdlike","Governable","Governing","Grabbable","Graceful","Graceless","Gracious","Gradable","Grained","Grainy","Grand","Grandiose","Granite","Granitic","Grantable","Grapey","Graphic","Graphicial","Graphite","Grapy","Graspable","GrassGreen","Grasslike","Grassy","Grateful","Gratis","Gratuitous","Grave","Gravelish","Gravelly","Gray","Grayish","Grazeable","Greasy","Great","Greedsome","Greedy","Green","Greenish","Greensick","Gregarious","Greisen","Grey","Greyish","Grieving","Grievous","Griffinish","Grilled","Grim","Grindable","Grisly","Groggy","Groovelike","Groovy","Gross","Grotesque","Grouchy","Groundable","Growable","Grown","GrownUp","Grubby","Grumpy","Grusome","Guardable","Guerdon","Guessable","Guidable","Guileless","Guiltless","Guilty","Gullible","Gummous","Gummy","GunMetal","GunShy","Gushy","Gustable","Gutless","Gutsy","Gymnasial","Gymnastic","Gynephilic","Gynophobic","Gypsum","Habitual","Hairy","Half","HalfAlive","HalfAngry","HalfAsleep","HalfAwake","HalfBare","HalfBoiled","HalfCrazed","HalfCrazy","HalfDazed","HalfDivine","HalfJoking","HalfLinen","HalfMinded","HalfRound","HalfWhite","HalfWitted","HalfWoolen","Halite","Hallowed","Halophilic","HandDrawn","HandHeld","Handheld","Handmade","Handsewn","Handsome","Handwoven","Handy","Hapless","Happy","Harassed","Hard","HardHeaded","HardShell","Harmful","Harmless","Harmonic","Harmonious","Harsh","Hassium","Hasteful","Hasteless","Hasty","Hated","Hateful","Haughty","Haunted","HawkEyed","Hawkish","Haywire","Hazardous","Hazy","Head","Headless","Headstrong","Healthful","Healthy","HeartFree","HeartWhole","Heartfelt","Heartless","Heartsick","Heartsore","Heated","Heathen","Heathenish","HeavenSent","Heavenly","Heavy","Heavyset","Hedonistic","Heedful","Heedless","Heinous","Heliodor","Helpful","Helpless","Hemihedral","Hemophobic","Hemp","Hennish","Heptagonal","Herbaceous","Herbal","Herbicidal","Herby","Herculean","Heretical","Hermitic","Hermitical","Hermitish","Hermitlike","Heroic","Hesitant","Hessian","Hexadic","Hexaemeric","Hexagonal","Hexahedral","Hexametral","Hexametric","Hexangular","Hexed","Hick","Hidden","Hideous","High","HighClass","Highborn","Highbred","Highhanded","Hilarious","Hillocked","Hillocky","Hilly","Hip","Hippy","Historic","Historical","Historied","Hogged","Hoggish","Hoglike","Holistic","Hollow","Holohedral","Holy","HomeGrown","HomeMade","Homebred","Homebrewed","Homeless","Homely","Homemade","Homesick","Homespun","Homey","Homicidal","Hominine","Hominoid","Honest","HoneySweet","Honeyed","Honeyful","Honorary","Honorific","Honourable","Honourless","Hopeful","Hopping","Horizontal","Hormonal","HornMad","Hornblende","Horoscopic","Horrendous","Horrible","Horrid","Horrific","Horrified","Horrifying","Horselike","Horsey","Horsy","Hospitable","Hostile","Hot","HotHeaded","Hotheaded","Houndish","Houndlike","Houndy","Huge","Hulky","Human","Humane","Humanlike","Humanoid","Humble","Humbled","Humdrum","Humid","Humiliated","Humoristic","Humorous","Humourful","Humourless","Humoursome","Hungry","Hurried","Hurt","Hurtful","HushHush","Hyacinth","Hydrated","Hydrogen","Hygenic","Hygienic","Hyperbolic","Hypnotic","Hypnotised","Hypoactive","Hypodermal","Hysterical","Iambic","Ice","IceCold","Icebound","Iced","Icicled","Icky","Iconic","Icy","Ideal","Idealistic","Identical","Idiocratic","Idiotic","Idiotproof","Idle","Idled","Idling","Igneous","Ignitable","Igniteable","Ignoble","Ignorant","Ignored","Ill","IllAdvised","IllBehaved","IllBred","IllDefined","IllFated","IllGotten","IllJudged","IllLooking","IllNatured","IllSorted","IllStarred","IllSuited","IllTimed","IllWilled","Illegal","Illegible","Illhumored","Illicit","Illiterate","Illogical","Illusory","Immaculate","Immaterial","Immature","Immediate","Immense","Imminent","Immobile","Immoderate","Immolated","Immoral","Immortal","Immovable","Immoveable","Immune","Impatient","Impeccable","Impending","Imperfect","Imperial","Imperious","Impervious","Impious","Impish","Impolite","Important","Imported","Imposing","Impossible","Impotent","Imprecise","Impressed","Impressive","Improbable","Improved","Improvised","Imprudent","Impudent","Impulsive","Inaccurate","Inadequate","Inanimate","Inartistic","Inborn","Inbred","Incapable","Incautious","Incendiary","Incensed","Incoherent","Incomplete","Inconstant","Incorrupt","Increased","Incredible","Incurable","Indecisive","Indefinite","Indicolite","Indigenous","Indigo","IndigoBlue","Indigoid","Indiscreet","Indisposed","Indistinct","Individual","Indoor","Industrial","Inedible","Inept","Inexistent","Infamous","Infantile","Infantine","Infatuated","Infectious","Inferior","Infertile","Infinite","Infirm","Inflatable","Influenzal","Informal","Ingenious","Ingenuous","Inglorious","Inherent","Inherited","Inhuman","Inhumane","Initial","Injured","Injurious","Inky","Inland","Inner","Innocent","Innocuous","Innovative","Inodorous","Inorganic","Inquiring","Insane","Insanitary","Insectean","Insectile","Insectival","Insecure","Insensate","Insensible","Insentient","Inside","Insidious","Insincere","Insipid","Insistent","Insolent","Insomniac","Instant","Insulted","Insulting","Insured","Intact","Intangible","Integral","Intense","Intensive","Interested","Interfaith","Interior","Internal","Intestinal","Intimate","Intolerant","Intravert","Intriguing","Introvert","Intrusive","Invaluable","Invasive","Inverse","Inversive","Invincible","Invisible","Involved","Ionic","Irascible","Irate","Iridescent","Irksome","IronGray","IronGrey","Ironbound","Ironclad","Ironfisted","Ironhanded","Ironic","Ironical","Irradiated","Irrational","Irregular","Irrelevant","Irritable","Irritated","Irritating","Isinglass","Islandish","Islandless","Islandlike","Isleless","Isleted","Isoceles","Isogonal","Isogonic","Isolated","Isotope","Itching","Itchy","IttyBitty","Ivory","Jade","JadeGreen","Jaded","Jadeite","Jadish","Jagged","Jaunty","Jazzy","Jealous","JeanLike","Jellied","Jestful","Jesting","Jet","JetBlack","Jewel","Jingoistic","Jittery","Jobless","Jockeyish","Jocund","Jokeless","Joking","Jolly","Journalary","Journalish","Jovial","Joyful","Joyless","Joyous","Jubilant","Judgmental","Judicial","Judicious","Juice","Juiced","Juicy","Jumping","Jumpy","Junior","Just","Jute","Juvenal","Juvenile","Kakotopic","Kamikaze","Kaolin","Kaolinite","Kaput","Karmic","Katatonic","Keen","Ketogenic","Ketonic","Key","Khaki","Kilted","Kimberlite","Kind","Kindly","Kinetic","KingSize","Kinglike","Kingly","Kitschy","Kittenish","Klepto","Klutzy","Knavish","KneeDeep","KneeHigh","KneeLength","Knightly","Knitted","Knotted","Knotty","Knowing","Known","Kooky","Kosher","Kunzite","Kyanite","Laborious","Lace","LaceLike","Lacklustre","Laconic","Lacquer","Lacy","Ladyish","Ladylike","Lagging","Lambskin","Lambswool","Lame","Lamentable","Laminate","Lamproite","LandPoor","Lapis","Lardy","Large","LargeScale","Largish","Larval","Larvicidal","Last","Late","Latticed","Laudable","Lavender","Lavish","LawAbiding","Lawful","Lawless","Lawlike","Lawrencium","Lawyerlike","Lawyerly","Lax","Lazuline","Lazy","Lazyish","Leachy","Lead","Leading","Leady","Leafed","Leaflike","Leafy","Lean","Learned","Leather","Leathern","Leathery","LeekGreen","Leery","Left","Leftist","Legal","Legalistic","Legatine","Legendary","Legged","Leggy","Legible","Legless","Leisurable","Leisured","Lemon","Lemonish","Lemony","Lemuroid","Lengthy","Lepidolite","Leprous","Lethal","Lethargic","LetterHigh","Lettered","Level","Lexical","Lherzolite","Liable","Liberal","Liberated","Liberating","LifeSize","Lifeless","Light","Lighted","Lightsome","Lignite","Likable","Like","LikeMinded","Liked","Likely","Lilac","LilyWhite","Limbless","Lime","Limestone","Limitless","Limivorous","Limpid","Limping","Limy","Linear","Linen","Lineny","Linguistic","Linoleum","Linty","Lionesque","Lionly","Lipophobic","Liquid","Literal","Literary","Literate","Lithe","Little","Littlish","Live","Lively","Livid","Living","Loath","Loathful","Loathsome","Local","Locomotive","Locomotor","Locustal","Logical","Logophilic","Lonely","Lonesome","Long","LongTerm","Longish","Looney","Loony","Loopy","Lopsided","Lost","Lousy","Loutish","Lovable","Loveable","Loved","Loveless","Lovelorn","Lovely","Loverless","Lovesick","Lovesome","LoveyDovey","Loving","Low","LowCost","LowFat","LowKey","Lowborn","Lowbred","LowerClass","Lowish","Lowly","Loyal","Lucid","Lucky","Ludicrous","Lukewarm","Luminous","Lumpish","Lumpy","Lunar","Lunatic","Lunies","Lunisolar","Luny","Lupine","Luscious","Lush","Lustered","Lustrous","Luxuriant","Luxurious","Lygophilic","Lygophobic","Lying","Lyrical","Macabre","Macho","Mad","Maddening","Maddish","Magenta","Magic","Magical","Magnesial","Magnesian","Magnesic","Magnesium","Magnetic","Magnific","Mahogany","Main","Maize","Majestic","Major","Makeshift","Maladroit","Malcontent","Male","Maleficent","Malevolent","Malicious","Malignant","Maligned","Malleable","Malodorous","Malophilic","Mammalian","Mammoth","ManMade","Managerial","Managing","Maniacal","Manic","Manlike","Manly","Mannerly","Marauding","Marble","Marginal","Marine","Marital","Maritime","Marked","Marmatite","Maroon","Married","Marshlike","Marshy","Marvellous","Masculine","Masonic","Massive","Master","Masterful","Masticated","Material","Maternal","Matricidal","Matronal","Matronly","Mature","Maudlin","Mauve","Maximum","Maxixe","Mazelike","Meagre","Mean","Meaningful","Measled","Measly","Meaty","Mechanical","Meddlesome","Mediaeval","Medical","Medicinal","Medicore","Medium","Meek","Mega","Meitnerium","Melancholy","Mellow","Melodic","Melodious","Melting","Menial","Mental","Mercantile","Mercenary","Merciful","Mercurial","Mere","Meritocrat","Merry","Mesodermal","Mesodermic","Messianic","Messy","Metal","Metalled","Metallic","Metalline","Metaphoric","Metazoic","Meticulous","Mettlesome","Mica","Microbial","Microbian","Microbic","Mid","Middle","Mighty","Mild","Militant","Military","MilkWhite","Milky","Minced","Mindful","Mindless","Mini","Miniature","Minimal","Minimum","Miniscule","Minor","Minuscular","Minute","Miraculous","Mirky","Mirthful","Miry","Misandrist","Misandrous","Miscreant","Miserable","Miserly","Misleading","Misogynic","Misogynous","Missing","Misty","Mobile","Moderate","Modern","Modest","Modish","Moist","Moistful","Moldavite","Molecular","Moleskin","Momentary","Monarchal","Monarchist","Monetary","Monkeyish","Monochrome","Monogamous","Monolithic","Monotonous","Monstrous","Monumental","Moody","Moonish","Moonlit","Moonstone","Moony","Mopey","Moral","Morbid","Moronic","Morose","Mossy","Motherly","Motionless","Moudly","Mountable","Mousey","Mousy","Moving","Mucky","Mudbrick","Muddled","Muddy","Mundane","Murderous","Murky","Muscovite","Mushroomy","Mushy","Musical","Musicianly","Musophobic","Mustard","Mutant","Mutated","Mutinous","Mutual","Muzzled","Mycologic","Myocardial","Myopic","Myrtle","Mysophobic","Mysterious","Mystical","Mythical","Mythopoeic","Naggish","Naggy","Naive","Naptunium","Narcistic","Narrow","Nasty","Natant","Natatorial","Natatory","National","Native","Natural","Naughty","Nauseating","Nauseous","Nautical","Naval","Navy","Near","Nearby","Neat","Nebulous","Necessary","Necrotic","Needless","Needy","Negative","Neglectful","Negligent","Nemophilic","Neofascist","Neon","Neophilic","Neophobic","Nepheline","Nephelite","Nephrite","Nepotic","Nepotistic","Nerdy","Nervous","Nettlesome","Neurotic","Neutered","Neutral","New","NewRich","Newborn","Newsworthy","Newsy","Next","Nice","Nickel","Nickelic","Nickelous","Nifty","Niggling","Nihilistic","Nimble","Nirvanic","Nitpicking","Nitro","Nobelium","Noble","Nocturnal","Noetic","Noir","Nomadic","Nomophobic","NonMoving","Nonangelic","Nonblack","Nonchalant","Nondeadly","Nonempty","Nonfat","Nonfatal","Nonglacial","Nongreen","Nonlegal","Nonlineal","Nonlinear","Nonliteral","Nonliving","Nonmedical","Nonmystic","Nonodorous","Nonorganic","Nonproift","Nonpsychic","Nonround","Nonroyal","Nonsecular","Nonskeptic","Nonsolar","Nonspheral","Nonspheric","Nonspinal","Nonspiny","Nonstick","Nonsticky","Nonstop","Nontoxic","Nonvacant","Nonvagrant","Nonvalued","Normal","Northbound","Northern","Northmost","Nosey","Nosophobic","Nostalgic","Nosy","Notable","Notaphilic","Noteworthy","Notorious","Novel","Novice","Nubuck","Nuclear","Nude","Numb","Numbing","Numeric","Numerical","Nuptial","Nutbrown","Nutlike","Nutritious","Nutty","Nylon","Oafish","Obedient","Obeliskoid","Obese","Objective","Oblivious","Oblong","Obnoxious","Obscene","Obsequious","Observant","Obsessive","Obsidian","Obsolete","Obtuse","Obvious","Occasional","Oceangoing","Oceanic","Oceanlike","Ochre","Octagonal","Octahedral","Odd","Odious","Odorful","Odorous","Odourful","Odourless","Offcolour","Offbeat","Offended","Offensive","Official","Ogreish","Oily","Ok","Okay","Old","Olive","Olivine","Olympic","Ominous","Omnipotent","Omniscient","Omnivorous","Omphacite","Onerous","Oniony","Only","Onyx","Oozy","Opal","Open","Openminded","Operatic","Operose","Opposite","Oppressed","Oppressive","Optic","Optical","Optimal","Optimistic","Optometric","Orange","Orchestral","Orcish","Ordinary","Ore","Organic","Oriental","Original","Ornamental","Ornate","Ornery","Orthoclase","Orthodox","Orthogonal","Oscitant","Osmophilic","Osmophobic","Ossivorous","Ostracized","Other","Outdoor","Outdoorsy","Outer","Outgoing","Outraged","Outrageous","Outside","Oval","Overbig","Overbrutal","Overcooked","Overdry","Overempty","Overgrown","Overjoyed","Overjoyful","Overjoyous","Overnoble","Overpriced","Overrated","Overseas","Oversize","Oversolemn","Overweak","Overweight","Oxygen","Oxymoronic","Pacified","Pacifist","Pacifistic","Paediatric","Pagan","Paganist","Paganistic","Painful","Painted","Pale","Palish","Pallid","Pancratic","Pancreatic","Panicky","Panoramic","Panphobic","Panpsychic","Paper","Papery","Papyral","Paradoxal","Paraffin","Paragonit","Paragonita","Paragonite","Parallel","Paralysed","Paralytic","Paralyzed","Paralyzing","Paramount","Paranoiac","Paranoid","Paranormal","Parasitic","Parochial","Parodic","Parodistic","Parttime","Partial","Particular","Passionate","Passive","Pastoral","Pasty","Pastyfaced","Patchwork","Patchy","Paternal","Pathetic","Pathworky","Patient","Patrician","Patricidal","Patriotic","Patronal","Pattern","Patterned","Patterny","Peaceable","Peaceful","Peach","Peachy","Peacockish","Peacocky","Pear","Pearl","Pearlized","Pearly","Peat","Pebbly","Peckish","Peculiar","Pedagogic","Pedagogish","Pedantic","Pediatric","Pedophobic","Peerless","Peevish","Peewee","Pegmatite","Pelage","Penniless","Pennywise","Pensive","Pentagonal","Pepperish","Peppery","Peppy","Perceptive","Perfect","Perfumy","Peridental","Peridot","Peridotite","Perilous","Periwinkle","Perkish","Perky","Perlucin","Permanent","Permier","Pernicious","Pernickety","Perovskite","Perpetual","Perplexed","Persimmon","Persistent","Personal","Persuasive","Pesky","Pestersome","Pesticidal","Pestilent","Petaled","Petaline","Petalled","Petalless","Petalous","Petit","Petite","Petrified","Pettish","Petty","Petulant","Phantasmal","Phantastic","Phenocryst","Phenomenal","Philologic","Phlegmy","Phlogopite","Phobic","Phonolite","Phony","Phosphorus","Physical","Pickled","Picky","Pictorial","Pictural","Piecemeal","Piercing","Pigeonite","Piggish","Pigish","Pilfered","Pillared","Pilotable","Pine","Pinelike","Pink","Pinkish","Pintsize","Piny","Pious","Piratic","Piratical","Piscatory","Pisciform","Piscine","Pisiform","Pitchblack","Pitchdark","Piteous","Pitiful","Pixilated","Pixyish","Placid","Plaid","Plaided","Plain","Planetary","Plaster","Plastered","Plastery","Plastic","Platonic","Plausible","Playful","Pleasable","Pleasant","Pleased","Pleasing","Plucky","Plugugly","Plump","Plush","Plushed","Plutonium","Poachable","Pockmarked","Poetic","Pointless","Poisoned","Poisonous","Pokeable","Polar","Polarized","Polished","Polite","Political","Polluted","Polonium","Polyester","Polygonal","Polyhedral","Pompous","Poor","Poorly","Popular","Porcelain","Porcine","Porky","Porous","Portable","Portly","Positive","Possessive","Possible","Postmodern","Postwar","Postal","Postdental","Postlegal","Potbellied","Potbellied","Potent","Potential","Potty","Powderblue","Powdery","Powellite","Powerful","Practical","Pragmatic","Preachy","Prebeloved","Prebronze","Precardiac","Precious","Precise","Precosmic","Precranial","Predacious","Predatory","Predictive","Preferred","Preggers","Preglacial","Pregnant","Prelawful","Prelegal","Premature","Premedical","Premium","Premolar","Prenatal","Preoceanic","Preodorous","Preregal","Preroyal","Prescient","Presecular","Preshrunk","Presolar","Prespinal","Prettied","Pretty","Prettying","Prettyish","Previous","Priceless","Pricey","Prickly","Prideful","Priestless","Priestly","Priggish","Prim","Primaeval","Primary","Prime","Primitive","Primordial","Princely","Principal","Printed","Prior","Prismatic","Prissy","Pristine","Private","Privatized","Privileged","Privy","Probable","Prochurch","Proclergy","Productive","Profascist","Proficient","Profitable","Profound","Prolific","Promethean","Prominent","Promising","Proper","Prophetic","Proposed","Prosaic","Proscience","Prosperous","Protactium","Protected","Protective","Proud","Provincial","Prudent","Prudish","Psychic","Psychotic","Pubescent","Public","Publicized","Pudgy","Puerile","Puffy","Pugnacious","Pumice","Pumpkin","Punctual","Puny","Puppyish","Puppylike","Pure","Purebred","Purple","Purplish","Purply","Purposeful","Pusslike","Putrid","Puzzled","Puzzling","Pygmy","Pygmyish","Pyrite","Pyrophobic","Pyroxene","Quaint","Qualified","Quartz","Quartzitic","Quasiempty","Quasilegal","Quasipoor","Quasiroyal","Queasy","Queenlike","Queenly","Quelled","Quenched","Quenching","Querulous","Quibbling","Quick","Quiescent","Quilted","Quixotic","Rabid","Radiant","Radiated","Radiation","Radical","Radium","Radon","Raging","Rainbow","Rainbowy","Rainproof","Rainy","Rancid","Rancorous","Rancour","Random","Rapid","Rapt","Raptorial","Rapturous","Rare","Rash","Raskly","Raspberry","Rational","Ratlike","Rattish","Ravenous","Raw","Rawhide","Rayon","Ready","Real","Realisable","Rear","Rearmost","Reasonable","Reasonless","Rebel","Rebellious","Rebuffable","Rebuttable","Receivable","Recent","Receptive","Recitable","Reckless","Reckonable","Reclinable","Reclining","Reclusive","Recognized","Recordable","Red","Redblooded","Reddish","Redeemable","Reduced","Redundant","Reedy","Refillable","Reflective","Reflexive","Reformable","Refractive","Refreshful","Refreshing","Refundable","Refusable","Refutable","Regainable","Regal","Regardable","Regional","Registered","Regretful","Regulable","Regular","Reinforced","Reissuable","Rejectable","Rejoiceful","Relapsable","Relatable","Relative","Relaxative","Relaxatory","Relaxed","Relaxer","Releasable","Relegable","Relevant","Reliable","Reliant","Relievable","Relieved","Religious","Relishable","Reluctant","Remaining","Remarkable","Remittable","Remorseful","Removable","Renderable","Renewed","Renowned","Repairable","Repayable","Repealable","Repeatable","Repellent","Reponsible","Reportable","Repressed","Repressive","Reptilian","Reptiloid","Republican","Repulsive","Reputable","Required","Resalable","Resealable","Resentful","Reservable","Reserved","Resident","Resigned","Resistant","Resolvable","Respected","Respectful","Respirable","Responsive","Restful","Resting","Restless","Restorable","Restored","Restoring","Retail","Retired","Retiring","Returnable","Reunitable","Reusable","Revealable","Revengeful","Revenual","Revenued","Revered","Reverend","Reverent","Reversible","Reviewable","Reviled","Revivable","Revocable","Revolting","Rheophilic","Rhinestone","Rhombic","Rhyolite","Ribbonlike","Ribbony","Rich","Rideable","Ridiculous","Right","Rightwing","Rightable","Righteous","Rightist","Riotous","Ripe","Ripening","Risky","Ritzy","Rival","Roastable","Roasted","Roasting","Robo","Robotic","Robotlike","Robust","Rockbound","Rockfaced","Rockable","Rocky","Roguish","Rollable","Romantic","Rookie","Roomy","Ropable","Ropeable","Roseate","Roselike","Rosy","Rotatable","Rotten","Rough","Round","Roundbuilt","Rounded","Rowable","Royal","Royalistic","Rubber","Rubbery","Rubbly","Rubellite","Rubidium","Rubied","Ruby","Ruddy","Rude","Ruinable","Ruinous","Ruling","Runic","Running","Runtish","Runty","Rural","Russet","Rust","Rusted","Rustic","Rusty","Rutile","Saccharine","Sacred","Sad","Saddened","Saddening","Sadistic","Safe","Sagacious","Sainted","Saintless","Saintly","Salaried","Saline","Salmon","Salmonlike","Salmonoid","Salted","Saltish","Saltwater","Salty","Sanctified","Sand","Sanded","Sandpapery","Sandstone","Sandy","Sane","Sangria","Sanguine","Sanidine","Sanitarian","Sanitary","Sapient","Sapphire","Sappy","Sarcastic","Sardonic","Sassy","Satiated","Satin","Satiny","Satirical","Satisfied","Savage","Savorous","Savourless","Savoury","Savvy","Sawdustish","Sawdusty","Scabby","Scabrous","Scaled","Scaley","Scaly","Scandalous","Scarecrowy","Scared","Scarlet","Scarred","Scary","Scathing","Scattered","Scavenger","Sceptical","Scheelite","Schematic","Scholarly","Scholastic","Scientific","Sciophilic","Scornful","Scorpioid","Scorpionic","Scowlful","Scrapable","Scratchy","Scrawny","Screaming","Scrummy","Scummy","Seagreen","Seaisland","Seaborgium","Seaborne","Seafaring","Seagoing","Sealbrown","Seared","Seasick","Seasonal","Seaworthy","Secluded","Seclusive","Secondbest","Secondhand","Secondrate","Secondary","Secret","Secretive","Secular","Secure","Sedate","Sedentary","Sediment","Sedulous","Seedy","Seemly","Segregated","Seismic","Select","Selective","Selenite","Selenium","Selfaware","Selftaught","Selfish","Selfless","Semantic","Semiironic","Semiacidic","Semiboiled","Semidivine","Semidry","Semifluid","Semiliquid","Semimarine","Semimythic","Semiround","Semisolemn","Senatorial","Senile","Senior","Senseless","Sensible","Sensitive","Sensualist","Sentient","Separate","Sepia","Septic","Sequined","Seraphic","Serene","Serge","Sericate","Sericeous","Serious","Serpentine","Servile","Severe","Sewable","Shabby","Shaded","Shadeful","Shadowed","Shadowy","Shady","Shaggy","Shagreen","Shallow","Shamanic","Shamefaced","Shameful","Shameless","Shapable","Shapeable","Shapely","Shared","Sharp","Sharpcut","Sharpeyed","Sharpset","Shaven","Sheepish","Sheepskin","Sheer","Shelled","Shelly","Shiftable","Shifty","Shimmery","Shiny","Shocked","Shockproof","Shoddy","Shogunal","Short","Shortterm","Shorted","Shortish","Shrewd","Shrinkable","Shrubby","Shrunken","Shy","Sibling","Sick","Sickening","Sicklied","Sickly","Sienna","Sighted","Sightless","Sightly","Silicone","Silk","Silken","Silky","Silly","Silt","Silty","Silvan","Silver","Silverish","Silvern","Silvery","Simian","Similar","Simious","Simple","Sincere","Sinful","Single","Sinister","Sinistrous","Sinking","Sinless","Sirenian","Sirenic","Sisterlike","Sisterly","Sitophobic","Sizable","Sizeable","Sized","Sizy","Skaldic","Skarn","Skeletal","Skeptical","Sketched","Sketchy","Skilful","Skilled","Skimpy","Skinny","Skipping","Skittish","Skyblue","Skyborne","Slandered","Slate","Slavish","Sleepful","Sleeping","Sleepless","Sleepy","Slender","Slick","Slight","Slim","Slimline","Slimming","Slimy","Slippery","Slithery","Slobbery","Sloppy","Slothful","Slovenly","Slow","Slowmotion","Slowmoving","Slowwitted","Sludgy","Sluggish","Slumberous","Slushy","Sly","Small","Smallscale","Smalltime","Smallish","Smart","Smartaleck","Smarty","Smashable","Smashed","Smellable","Smelly","Smileless","Smiling","Smoggy","Smoking","Smoky","Smooth","Smudgeless","Smug","Snaky","Snappish","Snappy","Snazzy","Sneaking","Sneaky","Snide","Snippy","Snively","Snobbish","Snoopy","Snooty","Snoozy","Snotty","Snowclad","Snowwhite","Snowbound","Snowcapped","Snowy","Snug","Snugging","Socalled","Soaked","Soaplike","Soaplike","Soapstone","Soapsudsy","Soapy","Sociable","Social","Socialist","Socialized","Sodalite","Sodium","Soft","Softish","Soggy","Solar","Soldierly","Sole","Solemn","Solid","Solitary","Sombre","Sombrous","Some","Songful","Sonic","Sonorous","Soot","Sooty","Sophomoric","Sopping","Soppy","Sorcerous","Sorrowless","Sorry","Soulful","Soulless","Sound","Soupy","Sour","Sourdough","Soured","Sourish","Southbound","Southern","Southmost","Spacious","Spangly","Spare","Sparkling","Sparse","Spatial","Special","Specific","Specified","Specious","Specular","Speedful","Speedless","Speedy","Spellbound","Sphalerite","Sphene","Spheral","Sphereless","Spherelike","Spherical","Spheroidal","Spherular","Sphingine","Sphinxian","Spicey","Spicy","Spidersilk","Spidery","Spiky","Spinal","Spined","Spineless","Spinelike","Spinescent","Spinous","Spinulose","Spiny","Spirited","Spiritless","Spiritous","Spiritual","Spiteful","Splendid","Splintery","Splurgy","Spodumene","Spoiled","Spongy","Spooky","Sporadic","Sportful","Sporting","Sportive","Sporty","Spotless","Spottable","Spotted","Spotty","Sprightful","Sprightly","Springy","Sprucing","Spy","Squalid","Square","Squarish","Squeamish","Squirrelly","Squishy","Stable","Stagnant","Stainable","Stale","Stalwart","Stampable","Standard","Starchy","Starred","Starry","Starved","Starving","Static","Stational","Stationary","Statued","Statuelike","Statuesque","Statutory","Steadfast","Stealthful","Stealthy","Steamy","Steel","Steep","Stellar","Stenchful","Sterile","Sterilised","Sterilized","Sterling","Sticky","Still","Stilllife","Stimulated","Stingy","Stinky","Stoic","Stoical","Stolen","Stomachy","Stone","Stonebroke","Stoned","Stonelike","Stoneware","Stoney","Stony","Stoppable","Stormproof","Stormy","Stout","Stoutish","Straight","Strained","Strange","Strategic","Streaky","Streetwise","Strenuous","Stressed","Stressful","Stretchy","Stricken","Strict","Striking","Stringent","Striped","Stripy","Strong","Strongish","Strontium","Structural","Stubborn","Stuck","Stuckup","Studious","Stuffed","Stumplike","Stumpy","Stunty","Stupendous","Stupid","Stylish","Suave","Subatomic","Subaverage","Subcranial","Subdermal","Subdermic","Subdivine","Subdued","Suberin","Subglacial","Subhedral","Subjective","Sublime","Subliminal","Sublinear","Submissive","Subocean","Suboceanic","Subsequent","Subsimian","Subsimious","Subsolar","Subsonic","Subspheric","Subtle","Suburban","Subversive","Subwealthy","Subzero","Successful","Successive","Succinct","Succulent","Sudden","Sudorific","Sudsy","Suede","Sufficient","Suffixal","Sugar","Sugarcandy","Sugarcane","Sugarloaf","Sugared","Sugarless","Sugary","Suicidal","Suitable","Sulfur","Sulfureous","Sulfuric","Sulfurous","Sulfuryl","Sulky","Sullen","Sultanic","Sultanlike","Sundried","Sunbaked","Sunbeamed","Sunbeamy","Sunlit","Sunny","Sunshiny","Super","Superduper","Superb","Superior","Superlucky","Superregal","Supersafe","Supersmart","Supersolar","Supersonic","Supersweet","Superugly","Suppletive","Supporting","Supportive","Supreme","Surah","Sure","Surefooted","Surgical","Surly","Surprised","Surprising","Surreal","Suspect","Suspicious","Svelte","Swampy","Swanky","Sweated","Sweating","Sweaty","Sweepable","Sweet","Sweltering","Swift","Swimming","Swindled","Swinish","Swirly","Sybaritic","Syllabic","Sylphic","Sylphish","Sylphlike","Sylphy","Symbiotic","Symbolic","Symmetric","Symphonic","Synarchist","Synonymous","Synthetic","Syrupy","Tabarded","Taboo","Tacky","Tactful","Tactical","Tailormade","Tailored","Tainted","Talented","Talismanic","Talkable","Talkative","Talky","Tall","Tame","Tamed","Taming","Tan","Tangerine","Tangible","Tangled","Tangy","Tanned","Tantalous","Tanzanite","Tapestried","Tardy","Targeted","Tart","Tasteful","Tasteless","Tasty","Tattooed","Taupe","Taurine","Taut","Tawdry","Taxexempt","Taxidermal","Taxidermic","Taxidermy","Taxing","Taxonomic","Teal","Tearful","Tearing","Teary","Technical","Technocrat","Techy","Tectonic","Tedious","Teen","Teenage","Teensy","Teeny","Teenytiny","Teenyweeny","Tekite","Telepathic","Temperate","Temporal","Temporary","Tempting","Temptuous","Tender","Tense","Tenuous","Teriyaki","Termitic","Terracotta","Terrazzo","Terrible","Terrific","Terrified","Terrifying","Terrorful","Terrorless","Terse","Tertiary","Testy","Tetragonal","Textile","Thankful","Thankless","Theatrical","Theocratic","Theodicean","Theophilic","Theosophic","Thermal","Thick","Thickset","Thieving","Thievish","Thin","Thinnish","Thirsty","Thistle","Thistly","Thorium","Thorny","Thorough","Thoughtful","Threadbare","Threatful","Thrifty","Thrillful","Thrilling","Ticklish","Tidal","Tidy","Tiff","Tigerseye","Tightknit","Timeless","Timely","Timid","Tin","Tinfoil","Tinned","Tinny","Tinted","Tiny","Tippable","Tired","Tireless","Tiresome","Titanic","Titanite","Titanium","Titanous","Toadish","Toadyish","Tokophobic","Tolerant","Tomophobic","Tonguetied","Toothsome","Topsecret","Topaz","Topazine","Topiary","Topnotch","Torrential","Torrid","Touchy","Tough","Touristic","Touristy","Tourmaline","Towcolored","Towering","Toxic","Toxophilic","Toy","Toylike","Trachyte","Tragic","Trainsick","Traitorous","Tranquil","Transhuman","Transient","Translunar","Trapezial","Trashy","Traumatic","Travelsick","Travelsick","Treasonous","Treelike","Tremendous","Trendy","Tribal","Trickish","Tricksome","Tricksy","Tricky","Tricolour","Tridymite","Trifling","Trigonal","Trigonous","Trihedral","Trilateral","Trilinear","Triliteral","Triumphal","Triumphant","Trivial","Trogonoid","Trophic","Trophied","Tropical","Troubled","Troubling","Trueblue","Trueborn","Trustful","Trusting","Truthful","Tsarist","Tsaristic","Tsunamic","Tubby","Tuneful","Turbid","Turophilic","Turquoise","Tweed","Tweedy","Twill","Twofaced","Typical","Tyrannical","Tyrannous","Tzarist","Tzaristic","Uber","Ubiquitary","Ubiquitous","Ugly","Ulcerative","Ulcerous","Ultimate","Ultrapink","Ultrashort","Ultrasonic","Umbral","Unable","Unacademic","Unaccepted","Unacidic","Unadhesive","Unadored","Unadult","Unadvised","Unafraid","Unagrarian","Unallergic","Unamazed","Unamiable","Unamicable","Unamorous","Unamusable","Unamused","Unamusing","Unanarchic","Unangry","Unanimated","Unappeased","Unarmed","Unaroused","Unartful","Unartistic","Unassuming","Unathletic","Unawake","Unaware","Unbackward","Unbathed","Unbeatable","Unbeaten","Unbecoming","Unbeloved","Unbiased","Unblacked","Unblued","Unbrowned","Unbuoyant","Unburied","Unburning","Uncanny","Uncertain","Unchanged","Uncheered","Uncheerful","Uncheering","Uncheery","Unchildish","Uncivic","Uncivil","Unclean","Uncleaned","Uncleansed","Unclear","Uncoloured","Uncommon","Unconstant","Uncooked","Uncouth","Uncovered","Uncreative","Uncultured","Uncurable","Undamaged","Undamaging","Undead","Undecided","Undefeated","Undefiled","Undeified","Undejected","Undeniable","Underage","Undercover","Understood","Undesired","Undesirous","Undespised","Undespotic","Undestined","Undevilish","Undiseased","Undivined","Undivining","Undramatic","Undyed","Unearthly","Uneasy","Uneconomic","Uneducated","Unemployed","Unemptied","Unempty","Unequal","Unequaled","Unequalled","Unethical","Unevolved","Unevolving","Unexistent","Unexisting","Unexpected","Unfair","Unfaithful","Unfeared","Unfearful","Unfearing","Unfeeling","Unfired","Unfiring","Unfit","Unfleshly","Unfooled","Unfoolish","Unfragrant","Unfriended","Unglacial","Ungodlike","Ungodly","Ungracious","Ungreened","Unhappy","Unhealthy","Unheavenly","Unheedful","Unheeding","Unhelpful","Unhelping","Unhistoric","Unholy","Unhonoured","Unhuman","Unhumane","Unhydrated","Unhygenic","Unhygienic","Unicolor","Uniform","Unilateral","Uniliteral","Uninfected","Uninfested","Uninformed","Uninspired","Uninsured","Uninvolved","Unique","Unisex","United","Universal","Unjust","Unkempt","Unkind","Unkissed","Unknown","Unlawful","Unlegal","Unlight","Unlighted","Unlikely","Unlimited","Unlit","Unliterary","Unliterate","Unlovable","Unloved","Unlovely","Unlucky","Unlunar","Unmarried","Unmedical","Unmelted","Unmerciful","Unmetalled","Unmetallic","Unmindful","Unmodified","Unmystic","Unmystical","Unmythical","Unnational","Unneeded","Unnoted","Unnoticed","Unoceanic","Unodorous","Unoutlawed","Unpacified","Unpaid","Unplayable","Unplayful","Unpleasant","Unpleased","Unpleasing","Unpoliced","Unpopular","Unpsychic","Unpurified","Unquenched","Unquiet","Unquieted","Unquieting","Unrational","Unread","Unreadable","Unreal","Unregal","Unrelative","Unrelaxed","Unrelaxing","Unrideable","Unritual","Unrivaled","Unromantic","Unrounded","Unruly","Unsafe","Unsainted","Unsaintly","Unsalted","Unsalty","Unsanitary","Unsavoury","Unschooled","Unsecular","Unsecure","Unselfish","Unsentient","Unshakable","Unshaken","Unsightly","Unsinful","Unsinkable","Unskillful","Unsleepy","Unsocial","Unsolar","Unsolemn","Unspecific","Unspirited","Unstable","Unsuitable","Unsuited","Unsure","Unsweet","Untalented","Untameable","Unthankful","Unthanking","Untheatric","Unthinking","Untidied","Untidy","Untidying","Untimely","Untiring","Untrusting","Untruthful","Ununbium","Ununhexium","Ununoctium","Ununtrium","Unusual","Unvacant","Unvagrant","Unverified","Unwanted","Unwashed","Unwasteful","Unwealthy","Unwearied","Unwelcome","Unwhite","Unwhited","Unwhitened","Unwieldy","Unwilling","Unwise","Unwitty","Unwomanish","Unworldly","Unworthy","Upbeat","Upper","Upperclass","Uppity","Upright","Upset","Upstanding","Uptight","Uranium","Urban","Urbane","Urgent","Urological","Usable","Used","Useful","Useless","Usual","Usurious","Utilizable","Utopian","Utopic","Vacant","Vaccinated","Vacuous","Vague","Vain","Valiant","Valid","Valorous","Valuable","Valued","Vampiric","Vanilla","Vanillic","Vanitied","Vapid","Vaporific","Vaporish","Vaporous","Vapory","Vapourific","Vapourish","Vapoury","Variable","Varied","Varve","Varying","Vast","Vaterite","Vegan","Vegetal","Vegetarian","Vegetative","Veiny","Vellum","Velour","Velvet","Velveteen","Velvety","Venal","Venerable","Venerated","Vengeful","Venomous","Venturous","Verastile","Verbose","Verifiable","Verified","Vermicidal","Vermicular","Vermiform","Vermillion","Verminous","Vernal","Versicolor","Vertical","Veryblue","Veryflying","Verymad","Vestigial","Vexatious","Vibrant","Viceregal","Vicious","Victimized","Victorious","Viewable","Vigilant","Vigorous","Vile","Villainous","Vincible","Vinegarish","Vinegary","Vinifera","Vinyl","Violent","Violet","Violety","Viperine","Viperish","Viperous","Viral","Virile","Virtuous","Visible","Visionary","Vital","Vitriolic","Vivacious","Vivid","Vixenish","Vixenly","Vocational","Voguish","Volatile","Volcanic","Voltaic","Volumed","Voluminous","Voluptuary","Voluptuous","Voracious","Vulcanian","Vulgar","Vulnerable","Vulpine","Wacky","Wafery","Wageless","Wailful","Wailsome","Waiting","Wakeful","Wakeless","Walking","Wandering","Wanted","Warless","Warlike","Warm","Warmish","Warmthless","Wartlike","Warty","Wary","Washable","Washedout","Washedup","Waspish","Waspy","Wasteful","Watchful","Waterborne","Waterish","Waterlog","Waterproof","Watertight","Waterworn","Watery","Wavy","Wax","Waxy","Wayfaring","Wayward","Weak","Weakminded","Weakened","Weakhanded","Weakish","Weakly","Weakwilled","Wealthy","Weaponed","Weaponised","Weaponless","Wearable","Wearied","Weariful","Weariless","Wearing","Wearish","Wearisome","Wearproof","Weary","Wearying","Weathered","Webbed","Webby","Wedded","Wee","Weedy","Weeping","Weepy","Weighable","Weighted","Weightless","Weighty","Weird","Welcome","Well","Wellborn","Wellknown","Wellloved","Wellmade","Wellneeded","Welloff","Westbound","Western","Wet","Wetproof","Wetproof","Wettish","Whacky","Wheat","Wheezy","Whimsical","White","Whitefaced","Whited","Whitish","Wholewheat","Wholesome","Wicked","Wide","Wideawake","Wideeyed","Widespread","Widish","Wieldable","Wieldy","Wifely","Wild","Wilful","Willing","Wily","Wimpy","Winded","Windowy","Windy","Winged","Wingless","Winning","Winsome","Winterish","Wintery","Wintry","Wired","Wisdomless","Wise","Wised","Wishful","Wispy","Wisteria","Wistful","Witching","Witchy","Witless","Witted","Witting","Witty","Wizardlike","Wizardly","Woebegone","Woeful","Woesome","Wolfish","Wolflike","Womanish","Womanly","Wonderful","Wondrous","Wood","Woodblock","Wooded","Wooden","Woodsy","Woody","Wool","Woollen","Woolly","Woozy","Wordy","Working","Worldwide","Wormish","Wormlike","Wormy","Wornout","Worried","Worriless","Worrisome","Worrying","Worse","Worthless","Worthwhile","Worthy","Wounded","Wraithlike","Wrapped","Wrathful","Wretched","Wrinkled","Wrinkly","Written","Wrongful","Wroth","Wuthering","Xenophobic","Xerophobic","Yeasty","Yellow","Yellowish","Yester","Yestern","Yielding","Yokelish","Young","Youthful","Yummy","Yogic","Zany","Zanyish","Zealous","Zebraprint","Zebraic","Zebraprint","Zebrine","Zincic","Zincky","Zincoid","Zincous","Zincy","Zippered","Zippy","Zircon","Zodiacal","Zoisite","Zombie","Zombified","Zoographic","Zoolatrous","Zoological","Zoometric","Zoophagous","Zoophobic"],cE=["Aardvark","Aardwolf","Abalone","Acaciarat","Acouchi","Addax","Adder","Adouri","Aegeancat","Agama","Agouti","Aidi","Airedale","Akitainu","Albatross","Albino","Alleycat","Alligator","Allosaurus","Alpaca","Alpinegoat","Ambushbug","Ammonite","Amoeba","Amphibian","Amphiuma","Amurminnow","Anaconda","Anchovy","Andeancat","Anemone","Angelfish","Anglerfish","Angora","Angwantibo","Anhinga","Ankole","Annelid","Annelida","Anole","Ant","Antbear","Anteater","Antelope","Antlion","Anura","Aoudad","Apatosaur","Ape","Aphid","Appaloosa","Aracari","Arachnid","Arawana","Archerfish","Arcticduck","Arcticfox","Arctichare","Arcticseal","Arcticwolf","Argali","Argusfish","Arkshell","Armadillo","Armedcrab","Armyant","Armyworm","Arrowana","Arrowcrab","Arrowworm","Arthropod","Aruana","Asianlion","Asp","Astarte","Atlasmoth","Auk","Auklet","Aurochs","Avian","Avocet","Axisdeer","Axolotl","Ayeaye","Aztecant","Azurevase","Babirusa","Baboon","Bactrian","Badger","Bagworm","Baiji","Baldeagle","Ballpython","Bandicoot","Banteng","Barasingha","Barb","Barbet","Barnacle","Barnowl","Barracuda","Basenji","Basil","Basilisk","Bass","Bat","Beagle","Bear","Beauceron","Beaver","Bedbug","Bee","Beetle","Bellfrog","Bellsnake","Betafish","Bettong","Bighorn","Bilby","Billygoat","Binturong","Bird","Bison","Bittern","Blackbear","Blackbird","Blackbuck","Blackfish","Blackfly","Blacklab","Blacklemur","Blackmamba","Blackrhino","Blesbok","Blobfish","Blowfish","Bluebird","Bluebottle","Bluefish","Bluegill","Bluejay","Blueshark","Bluet","Bluewhale","Boa","Boar","Bobcat","Bobolink","Bobwhite","Boilweevil","Bongo","Bonobo","Booby","Borer","Borzoi","Boto","Boubou","Boutu","Bovine","Brahmancow","Brant","Bream","Bronco","Brownbear","Bubblefish","Buck","Budgie","Bufeo","Buffalo","Bufflehead","Bug","Bull","Bullfrog","Bumblebee","Bunny","Bunting","Burro","Bushbaby","Bustard","Butterfly","Buzzard","Caecilian","Caiman","Calf","Camel","Canary","Canine","Canvasback","Capuchin","Capybara","Caracal","Cardinal","Caribou","Carp","Cassowary","Cat","Catbird","Catfish","Cattle","Caudata","Cavy","Centipede","Cero","Chafer","Chameleon","Chamois","Cheetah","Chevrotain","Chick","Chickadee","Chicken","Chihuahua","Chimpanzee","Chinchilla","Chipmunk","Chital","Chrysalis","Chuckwalla","Chupacabra","Cicada","Cirriped","Civet","Clam","Clingfish","Clumber","Coati","Cob","Cobra","Cock","Cockatiel","Cockatoo","Cockroach","Cod","Coelacanth","Collie","Colobus","Colt","Comet","Conch","Condor","Coney","Conure","Cony","Coot","Cooter","Copepod","Copperhead","Coqui","Coral","Cormorant","Cornsnake","Cottontail","Cougar","Cow","Cowbird","Cowrie","Coyote","Coypu","Crab","Crane","Cranefly","Crayfish","Creature","Cricket","Crocodile","Crossbill","Crow","Crustacean","Cub","Cuckoo","Cur","Curassow","Curlew","Cuscus","Cusimanse","Cuttlefish","Cutworm","Cygnet","Dachshund","Dairycow","Dalmatian","Damselfly","Dartfrog","Darwinsfox","Dassie","Dassierat","Deer","Deermouse","Degu","Devilfish","Dikdik","Dikkop","Dingo","Dinosaur","Diplodocus","Dipper","Discus","Doctorfish","Dodo","Dodobird","Doe","Dog","Dogfish","Dolphin","Donkey","Dorado","Dore","Dorking","Dormouse","Dotterel","Douc","Dove","Dowitcher","Drafthorse","Dragon","Dragonfly","Drake","Drever","Dromedary","Drongo","Duck","Duckling","Dugong","Duiker","Dungbeetle","Dunlin","Dunnart","Eagle","Earthworm","Earwig","Echidna","Eel","Eeve","Eft","Egg","Egret","Eider","Ekaltadeta","Eland","Elephant","Elk","Elkhound","Elver","Emu","Equestrian","Equine","Erin","Ermine","Erne","Eskimodog","Esok","Ewe","Eyas","Eyra","Fairyfly","Falcon","Fallowdeer","Fantail","Fanworm","Fawn","Feline","Fennecfox","Ferret","Fieldmouse","Finch","Finwhale","Fireant","Firecrest","Firefly","Fish","Fishingcat","Flamingo","Flatfish","Flea","Flee","Flicker","Flounder","Fluke","Fly","Flycatcher","Flyingfish","Flyingfox","Foal","Fossa","Fowl","Fox","Foxhound","Foxterrier","Frog","Frogmouth","Fruitbat","Fruitfly","Fugu","Fulmar","Furseal","Gadwall","Galago","Galah","Gallinule","Gander","Gannet","Gar","Garpike","Gaur","Gavial","Gazelle","Gecko","Geese","Gelada","Gemsbok","Gemsbuck","Genet","Gerbil","Gerenuk","Gharial","Gibbon","Giraffe","Glassfrog","Globefish","Glowworm","Gnat","Gnu","Goa","Goat","Godwit","Goitered","Goldeneye","Goldfinch","Goldfish","Gonolek","Goose","Goosefish","Gopher","Goral","Gorilla","Goshawk","Gosling","Gourami","Grackle","Grayfox","Grayling","Graywolf","Greatargus","Greatdane","Grebe","Grison","Grivet","Grosbeak","Groundhog","Grouper","Grouse","Grub","Grunion","Guanaco","Guenon","Guereza","Guillemot","Guineafowl","Guineapig","Gull","Guppy","Gypsymoth","Gyrfalcon","Hackee","Haddock","Hagfish","Hairstreak","Hake","Halcyon","Halibut","Halicore","Hamadryad","Hamadryas","Hammerkop","Hamster","Hapuka","Hapuku","Harborseal","Hare","Harpseal","Harpyeagle","Harrier","Hart","Hartebeest","Harvestmen","Hawk","Hedgehog","Heifer","Hellbender","Hen","Herald","Hermitcrab","Heron","Herring","Hind","Hoatzin","Hog","Hogget","Hoiho","Hoki","Honeybee","Honeyeater","Hoopoe","Hornbill","Hornedtoad","Hornet","Hornshark","Horse","Horsefly","Horsemouse","Hound","Housefly","Hoverfly","Howler","Huemul","Huia","Human","Husky","Hydra","Hyena","Hyrax","Ibex","Ibis","Ibisbill","Icefish","Ichidna","Iguana","Iguanodon","Illadopsis","Imago","Impala","Incatern","Inchworm","Indianabat","Indiancow","Indianhare","Indri","Inganue","Insect","Isopod","Ivorygull","Izuthrush","Jabiru","Jackal","Jackrabbit","Jaeger","Jaguar","Jaguarundi","Janenschia","Javalina","Jay","Jellyfish","Jenny","Jerboa","Joey","Johndory","Junco","Junebug","Kagu","Kakapo","Kakariki","Kangaroo","Karakul","Katydid","Kawala","Kestrel","Kid","Killdeer","Killifish","Kingbird","Kingfisher","Kinglet","Kingsnake","Kinkajou","Kipunji","Kiskadee","Kissingbug","Kite","Kitfox","Kitten","Kittiwake","Kitty","Kiwi","Koala","Koalabear","Kob","Kodiakbear","Koi","Koodoo","Kookaburra","Kouprey","Krill","Kudu","Kusimanse","Lacewing","Ladybird","Ladybug","Lamb","Lamprey","Langur","Lark","Larva","Leafbird","Leafhopper","Leafwing","Leech","Lemming","Lemur","Leonberger","Leopard","Leveret","Lhasaapso","Lice","Liger","Limpet","Limpkin","Ling","Lion","Lionfish","Lizard","Llama","Lobo","Lobster","Locust","Longhorn","Longspur","Loon","Lorikeet","Loris","Louse","Lovebird","Lowchen","Lunamoth","Lungfish","Lutung","Lynx","Macaque","Macaw","Macropod","Maggot","Magpie","Maiasaura","Malamute","Malbrouck","Mallard","Maltesedog","Mamba","Mammal","Mammoth","Manatee","Mandrill","Mangabey","Manta","Mantaray","Mantid","Mantis","Mantisray","Manxcat","Mara","Marabou","Mare","Marlin","Marmoset","Marmot","Marten","Martin","Massasauga","Mastiff","Mastodon","Mayfly","Meadowhawk","Meadowlark","Mealworm","Meerkat","Megaraptor","Merganser","Merlin","Mice","Midge","Milksnake","Millipede","Minibeast","Mink","Minnow","Mite","Moa","Mole","Mollusk","Molly","Monarch","Mongoose","Mongrel","Monkey","Monkfish","Moorhen","Moose","Moray","Morayeel","Morpho","Mosasaur","Mosquito","Moth","Motmot","Mouflon","Mouse","Mousebird","Mudpuppy","Mule","Mullet","Muntjac","Murrelet","Muskox","Muskrat","Mussaurus","Mussel","Mustang","Mutt","Myna","Mynah","Myotis","Nabarlek","Nag","Naga","Nagapie","Nandine","Nandoo","Nandu","Narwhal","Narwhale","Nauplius","Nautilus","Needlefish","Needletail","Nematode","Nene","Neontetra","Nerka","Nettlefish","Newt","Newtnutria","Nighthawk","Nightheron","Nightjar","Nilgai","Noctilio","Noctule","Noddy","Noolbenger","Norwayrat","Nubiangoat","Nudibranch","Numbat","Nurseshark","Nutcracker","Nuthatch","Nutria","Nyala","Nymph","Ocelot","Octopus","Okapi","Olingo","Olm","Opossum","Orangutan","Orca","Oriole","Oropendola","Oropendula","Oryx","Osprey","Ostracod","Ostrich","Otter","Ovenbird","Owl","Ox","Oxen","Oxpecker","Oyster","Paca","Pachyderm","Paddlefish","Panda","Pangolin","Panther","Paperwasp","Papillon","Parakeet","Parrot","Partridge","Peacock","Peafowl","Peccary","Pekingese","Pelican","Penguin","Perch","Person","Pewee","Phalarope","Pheasant","Phoebe","Phoenix","Pig","Pigeon","Piglet","Pika","Pike","Pikeperch","Pilchard","Pinemarten","Pinniped","Pintail","Pipit","Piranha","Pitbull","Pittabird","Plankton","Platypus","Plover","Polarbear","Polecat","Polliwog","Polyp","Pomeranian","Pondskater","Pony","Pooch","Poodle","Porcupine","Porpoise","Possum","Potto","Prairiedog","Prawn","Primate","Pronghorn","Ptarmigan","Pterosaurs","Puffer","Pufferfish","Puffin","Pug","Pullet","Puma","Pupa","Pupfish","Puppy","Pygmy","Python","Quagga","Quahog","Quail","Queenant","Queenbee","Queenconch","Queensnake","Quelea","Quetzal","Quillback","Quokka","Quoll","Rabbit","Raccoon","Racer","Racerunner","Ragfish","Rail","Ram","Raptor","Rasbora","Rat","Ratfish","Rattail","Raven","Ray","Redhead","Redpoll","Redstart","Reindeer","Reptile","Reynard","Rhea","Rhino","Rhinoceros","Ringworm","Roach","Roadrunner","Roan","Robberfly","Robin","Rockrat","Rodent","Roebuck","Roller","Rook","Rooster","Rottweiler","Sable","Sablefish","Saiga","Sakimonkey","Salamander","Salmon","Sambar","Samoyeddog","Sanddollar","Sanderling","Sandpiper","Sapsucker","Sardine","Sawfish","Scallop","Scarab","Scaup","Schipperke","Schnauzer","Scorpion","Scoter","Screamer","Seabird","Seagull","Seahog","Seahorse","Seal","Sealion","Seamonkey","Seaslug","Seaurchin","Seriema","Serpent","Serval","Shark","Shearwater","Sheep","Sheldrake","Shelduck","Shibainu","Shihtzu","Shorebird","Shoveler","Shrew","Shrike","Shrimp","Siamang","Siamesecat","Sidewinder","Sifaka","Silkworm","Silverfish","Silverfox","Siskin","Skimmer","Skink","Skipper","Skua","Skunk","Skylark","Sloth","Slothbear","Slug","Smelt","Smew","Snail","Snake","Snipe","Snowdog","Snowgeese","Snowmonkey","Snowyowl","Solenodon","Solitaire","Songbird","Sora","Sow","Spadefoot","Sparrow","Sphinx","Spider","Spiketail","Spittlebug","Sponge","Spoonbill","Spreadwing","Springbok","Springtail","Squab","Squamata","Squeaker","Squid","Squirrel","Stag","Stagbeetle","Stallion","Starfish","Starling","Steed","Steer","Stilt","Stingray","Stinkbug","Stinkpot","Stoat","Stonefly","Stork","Stud","Sturgeon","Sunbear","Sunbittern","Sunfish","Surili","Swallow","Swan","Swellfish","Swift","Swordfish","Tadpole","Tahr","Takin","Talapoin","Tamarin","Tanager","Tapaculo","Tapeworm","Tapir","Tarantula","Tarpan","Tarsier","Taruca","Tattler","Tayra","Teal","Tegu","Teledu","Tench","Tenrec","Termite","Tern","Terrapin","Terrier","Thrasher","Thrip","Thrush","Thylacine","Tick","Tiger","Tigermoth","Tigershark","Tilefish","Tinamou","Titi","Titmouse","Toad","Toadfish","Tomtit","Topi","Tortoise","Toucan","Towhee","Tragopan","Trex","Trogon","Trout","Tsetsefly","Tuatara","Tuna","Turaco","Turkey","Turnstone","Turtle","Turtledove","Uakari","Ugandakob","Umbrette","Unau","Ungulate","Unicorn","Upupa","Urchin","Urial","Urson","Urubu","Urus","Urutu","Urva","Vampirebat","Vaquita","Veery","Velvetcrab","Velvetworm","Verdin","Vervet","Vicuna","Viper","Viperfish","Vipersquid","Vireo","Vixen","Vole","Volvox","Vulture","Wallaby","Wallaroo","Walleye","Walrus","Warbler","Warthog","Wasp","Waterbuck","Waterbug","Waterdog","Wattlebird","Watussi","Waxwing","Weasel","Weaverbird","Weevil","Whale","Whapuku","Whelp","Whimbrel","Whippet","Whiteeye","Whiterhino","Whooper","Widgeon","Wildcat","Wildebeast","Willet","Wireworm","Wisent","Wolf","Wolfspider","Wolverine","Wombat","Woodborer","Woodchuck","Woodcock","Woodpecker","Woodstork","Worm","Wrasse","Wreckfish","Wren","Wrenchbird","Wryneck","Wyvern","Xanclomys","Xanthareel","Xantus","Xeme","Xenarthra","Xenops","Xenopus","Xenurine","Xerus","Xiaosaurus","Xiphias","Xiphosuran","Xoni","Xrayfish","Xraytetra","Yaffle","Yak","Yapok","Yardant","Yearling","Yellowlegs","Yeti","Ynambu","Yucker","Zander","Zebra","Zebradove","Zebrafinch","Zebrafish","Zebu","Zenaida","Zeren","Zethuswasp","Zopilote","Zorilla"],uE=function(t=1,e=Number.MAX_SAFE_INTEGER){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)},dE="bookmarkTool",gE={active:!1,collapsed:!1,bookmarks:[]},pE={storeDataInLocalStorage:!1};class fE extends Fh{constructor(t,e){super("Create map layer");const i=ph.createElement({element:"div",class:"oltb-m-0"}),n=ph.createElement({element:"input",id:"oltb-layer-modal-layer-name",class:"oltb-input",value:"New map layer",attributes:{type:"text"}});i.appendChild(ph.createElement({element:"label",text:"Name",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-name"}})),i.appendChild(n);const s=ph.createElement({element:"div",class:"oltb-mt-0625"}),o=ph.createElement({element:"select",id:"oltb-layer-modal-layer-type",class:"oltb-select"});["Tile","Vector"].forEach((t=>{o.appendChild(ph.createElement({element:"option",text:t,value:t}))})),s.appendChild(ph.createElement({element:"label",text:"Layer",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-type"}})),s.appendChild(o);const r=ph.createElement({element:"div",class:"oltb-mt-0625"}),A=ph.createElement({element:"select",id:"oltb-layer-modal-layer-source",class:"oltb-select"});["TileWMS","XYZ","OSM","Vector"].forEach((t=>{A.appendChild(ph.createElement({element:"option",text:t,value:t}))})),r.appendChild(ph.createElement({element:"label",text:"Source",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-source"}})),r.appendChild(A);const a=ph.createElement({element:"div",class:"oltb-mt-0625"}),l=ph.createElement({element:"input",id:"oltb-layer-modal-layer-projection",class:"oltb-input",attributes:{type:"text",placeholder:zh.projection}});a.appendChild(ph.createElement({element:"label",text:"Projection",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-projection"}})),a.appendChild(l);const h=ph.createElement({element:"div",class:"oltb-mt-0625"}),c=ph.createElement({element:"input",id:"oltb-layer-modal-layer-url",class:"oltb-input",attributes:{type:"text"}});h.appendChild(ph.createElement({element:"label",text:"URL",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-url"}})),h.appendChild(c);const u=ph.createElement({element:"div",class:"oltb-mt-0625"}),d=ph.createElement({element:"input",id:"oltb-layer-modal-layer-parameters",class:"oltb-input",attributes:{type:"text",placeholder:'{"Layers": "HPD_TRP"}'}});u.appendChild(ph.createElement({element:"label",text:"Parameters (JSON)",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-parameters"}})),u.appendChild(d);const g=ph.createElement({element:"div",class:"oltb-mt-0625"}),p=ph.createElement({element:"select",id:"oltb-layer-modal-layer-wrapx",class:"oltb-select"});["False","True"].forEach((t=>{p.appendChild(ph.createElement({element:"option",text:t,value:t}))})),g.appendChild(ph.createElement({element:"label",text:"WrapX",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-wrapx"}})),g.appendChild(p);const f=ph.createElement({element:"div",class:"oltb-mt-0625"}),m=ph.createElement({element:"input",id:"oltb-layer-modal-layer-attributions",class:"oltb-input",attributes:{type:"text"}});f.appendChild(ph.createElement({element:"label",text:"Attributions",class:"oltb-label",attributes:{for:"oltb-layer-modal-layer-attributions"}})),f.appendChild(m);const y=ph.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-1"}),_=ph.createElement({element:"button",text:"Create layer",class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{const e={name:n.value,layer:o.value,source:A.value,url:c.value,parameters:d.value||"{}",wrapX:p.value,attributions:m.value};this.close(),"function"==typeof t&&t(e)}}}),B=ph.createElement({element:"button",text:"Cancel",class:"oltb-dialog__btn oltb-btn "+(Sh()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof e&&e()}}});y.appendChild(B),y.appendChild(_);const w=ph.createElement({element:"div",class:"oltb-modal__content"});ph.appendChildren(w,[i,s,r,a,h,u,g,f,y]),this.show(w)}}const mE=async function(t){(async function(t=""){return navigator.clipboard.writeText(t.trim()).then((()=>!0)).catch((t=>(console.error(`Error copying data [${t}]`),!1)))})(t).then((()=>{rc.success({text:"Data copied to clipboard",autoremove:4e3})})).catch((()=>{rc.error({text:"Failed to copy data"})}))},yE=function(t){j_.confirm({text:"Do you want to delete this marker?",onConfirm:()=>{gh.removeFeatureFromLayer(t),this.hideOverlay(),window.dispatchEvent(new CustomEvent(hh.FeatureRemoved,{detail:{feature:t}}))}})},_E="oltb-info-window-marker",BE=function(t){const e=t.getProperties().oltb;new Mh({edit:!0,coordinates:ri(t.getGeometry().getCoordinates(),zh.projection,zh.wgs84Projection),name:e.name,info:e.info,backgroundColor:e.backgroundColor,color:e.color,icon:e.icon},(function(e){vE.hideOverlay(),gh.removeFeatureFromLayer(t);const i=Re([e.longitude,e.latitude]),n=`\n            <h3 class="oltb-text-center">${e.name}</h3>\n            <p class="oltb-text-center">${e.info}</p>\n            <p class="oltb-text-center">${i}</p>\n            <div class="oltb-d-flex oltb-justify-content-center">\n                <button class="oltb-func-btn oltb-func-btn--delete oltb-tippy" title="Delete marker" id="${_E}-remove"></button>\n                <button class="oltb-func-btn oltb-func-btn--copy oltb-tippy" title="Copy marker text" id="${_E}-copy-location" data-copy="${e.name} ${e.info} Coordinates ${i}"></button>\n                <button class="oltb-func-btn oltb-func-btn--edit oltb-tippy" title="Edit marker" id="${_E}-edit"></button>\n            </div>\n        `,s=bh({path:vh[e.icon],width:20,height:20,fill:"rgb(255, 255, 255)",stroke:"none"}),o=new Wh({name:e.name,info:e.info,lat:e.latitude,lon:e.longitude,iconName:e.icon,icon:s,backgroundColor:e.backgroundColor,color:e.color,notSelectable:!0,infoWindow:n});gh.getActiveFeatureLayer({fallback:"Markers"}).layer.getSource().addFeature(o),window.dispatchEvent(new CustomEvent(hh.FeatureEdited,{detail:{before:t,after:o}}))}))},wE={Click:"click",ContextMenu:"contextmenu",KeyUp:"keyup",KeyDown:"keydown",Resize:"resize",Wheel:"wheel",Change:"change",MouseDown:"mousedown",MouseMove:"mousemove",MouseOut:"mouseout",DOMContentLoaded:"DOMContentLoaded",FullScreenChange:"fullscreenchange",Load:"load",Input:"input"},CE={Add:"add",Remove:"remove",DrawStart:"drawstart",DrawEnd:"drawend",DrawAbort:"drawabort",ModifyStart:"modifystart",ModifyEnd:"modifyend",MoveEnd:"moveend",TranslateStart:"translatestart",TranslateEnd:"translateend",Error:"error",Change:"change",PropertyChange:"propertychange",PreRender:"prerender",PostRender:"postrender",RenderComplete:"rendercomplete",SingleClick:"singleclick",PointerMove:"pointermove"},bE="oltb-info-window-marker";class vE{static map;static overlay;static content;static lastFeature;static init(t){if(this.map)return;this.map=t,this.infoWindow=ph.createElement({element:"div",class:"oltb-info-window",attributes:{tabindex:"-1"},listeners:{keydown:Eh}}),this.content=ph.createElement({element:"div",class:"oltb-info-window__content"});const e=ph.createElement({element:"button",html:bh({path:vh.Close,fill:"none",stroke:"currentColor"}),class:"oltb-info-window__close oltb-btn oltb-btn--blank",listeners:{click:this.hideOverlay.bind(this)}});this.infoWindow.appendChild(e),this.infoWindow.appendChild(this.content),this.overlay=new Rh({element:this.infoWindow,autoPan:!0,autoPanAnimation:{duration:zh.animationDuration.normal}}),this.map.addOverlay(this.overlay),this.map.on(CE.SingleClick,this.onSingleClick.bind(this)),this.map.on(CE.PointerMove,this.onPointerMove.bind(this))}static onSingleClick(t){const e=this.map.forEachFeatureAtPixel(t.pixel,(function(t){return t})),i=e?.getProperties()?.oltb?.infoWindow;i?this.showOverly(e):this.hideOverlay()}static onPointerMove(t){const e=this.map.forEachFeatureAtPixel(t.pixel,(function(t){return t}));!this.lastFeature||e&&this.lastFeature===e||this.lastFeature.setStyle(null);const i=e?.getProperties()?.oltb?.highlightOnHover;i&&this.hightlightVectorSection(e);const n=e?.getProperties()?.oltb?.infoWindow;this.map.getViewport().style.cursor=n?"pointer":"default"}static hightlightVectorSection(t){const e=new No({fill:new Uo({color:"#254372AA"}),stroke:new To({color:"#369ACDFF",width:1.5})});t.setStyle(e),this.lastFeature=t}static showOverly(t,e){const i=t.getProperties().oltb.infoWindow;this.content.innerHTML=i,e?this.overlay.setPosition(e):this.overlay.setPosition(Ae(t.getGeometry().getExtent())),ph.rerunAnimation(this.infoWindow,"oltb-animations--centered-bounce");const n=this.content.querySelector(`#${bE}-remove`);n&&n.addEventListener(wE.Click,yE.bind(this,t));const s=this.content.querySelector(`#${bE}-copy-location`);s&&s.addEventListener(wE.Click,mE.bind(this,s.getAttribute("data-copy")));const o=this.content.querySelector(`#${bE}-edit`);o&&o.addEventListener(wE.Click,BE.bind(this,t))}static hideOverlay(){this.content.innerHTML="",this.overlay.setPosition(void 0)}}const xE="oltb-download-layer-modal";class EE extends Fh{constructor(t,e){super("Download layer");const i=ph.createElement({element:"div",class:"oltb-mt-0625"}),n=ph.createElement({element:"select",id:xE+"-layer-type",class:"oltb-select"});["GeoJSON","KML"].forEach((t=>{n.appendChild(ph.createElement({element:"option",text:t,value:t}))})),i.appendChild(ph.createElement({element:"label",text:"Layer format",class:"oltb-label",attributes:{for:xE+"-layer-wrapx"}})),i.appendChild(n);const s=ph.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-1"}),o=ph.createElement({element:"button",text:"Download layer",class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{const e={format:n.value};this.close(),"function"==typeof t&&t(e)}}}),r=ph.createElement({element:"button",text:"Cancel",class:"oltb-dialog__btn oltb-btn "+(Sh()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:()=>{this.close(),"function"==typeof e&&e()}}});s.appendChild(r),s.appendChild(o);const A=ph.createElement({element:"div",class:"oltb-modal__content"});ph.appendChildren(A,[i,s]),this.show(A)}}const FE={Tile:ql,Vector:Yr},SE=function(t,e){return t in FE?new FE[t](e):null},IE={TileWMS:oh,XYZ:jl,OSM:th,Vector:dA},ME="http://www.w3.org/2001/XMLSchema-instance";function LE(t,e){return jE().createElementNS(t,e)}function UE(t,e){return QE(t,e,[]).join("")}function QE(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)QE(n,e,i)}return i}function TE(t){return"documentElement"in t}function kE(t){return(new DOMParser).parseFromString(t,"application/xml")}function RE(t,e){return function(i,n){const s=t.call(void 0!==e?e:this,i,n);if(void 0!==s){g(n[n.length-1],s)}}}function PE(t,e){return function(i,n){const s=t.call(void 0!==e?e:this,i,n);if(void 0!==s){n[n.length-1].push(s)}}}function DE(t,e){return function(i,n){const s=t.call(void 0!==e?e:this,i,n);void 0!==s&&(n[n.length-1]=s)}}function OE(t,e,i){return function(n,s){const o=t.call(void 0!==i?i:this,n,s);if(void 0!==o){s[s.length-1][void 0!==e?e:n.localName]=o}}}function NE(t,e){return function(i,n,s){t.call(void 0!==e?e:this,i,n,s);s[s.length-1].node.appendChild(i)}}function HE(t,e){return function(i,n,s){const o=n[n.length-1].node;let r=t;void 0===r&&(r=s);return LE(void 0!==e?e:o.namespaceURI,r)}}const GE=HE();function KE(t,e){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=t[e[s]];return n}function VE(t,e,i){let n,s;for(i=void 0!==i?i:{},n=0,s=t.length;n<s;++n)i[t[n]]=e;return i}function WE(t,e,i,n){let s;for(s=e.firstElementChild;s;s=s.nextElementSibling){const e=t[s.namespaceURI];if(void 0!==e){const t=e[s.localName];void 0!==t&&t.call(n,s,i)}}}function zE(t,e,i,n,s){return n.push(t),WE(e,i,n,s),n.pop()}function XE(t,e,i,n,s,o,r){return s.push(t),function(t,e,i,n,s,o){const r=(void 0!==s?s:i).length;let A,a;for(let l=0;l<r;++l)A=i[l],void 0!==A&&(a=e.call(void 0!==o?o:this,A,n,void 0!==s?s[l]:void 0),void 0!==a&&t[a.namespaceURI][a.localName].call(o,a,A,n))}(e,i,n,s,o,r),s.pop()}let YE,qE;function jE(){return void 0===qE&&"undefined"!=typeof document&&(qE=document.implementation.createDocument("","",null)),qE}var JE=class extends Ba{constructor(){super(),this.xmlSerializer_=(void 0===YE&&"undefined"!=typeof XMLSerializer&&(YE=new XMLSerializer),YE)}getType(){return"xml"}readFeature(t,e){if(t){if("string"==typeof t){const i=kE(t);return this.readFeatureFromDocument(i,e)}return TE(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null}readFeatureFromDocument(t,e){const i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(t){if("string"==typeof t){const i=kE(t);return this.readFeaturesFromDocument(i,e)}return TE(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]}readFeaturesFromDocument(t,e){const i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&g(i,this.readFeaturesFromNode(n,e));return i}readFeaturesFromNode(t,e){return et()}readGeometry(t,e){if(t){if("string"==typeof t){const i=kE(t);return this.readGeometryFromDocument(i,e)}return TE(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(t){if("string"==typeof t){const e=kE(t);return this.readProjectionFromDocument(e)}return TE(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(t,e){return null}};function ZE(t){return function(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}(UE(t,!1))}function $E(t){return function(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}(UE(t,!1))}function tF(t){return UE(t,!1).trim()}function eF(t,e){nF(t,e?"1":"0")}function iF(t,e){const i=e.toPrecision();t.appendChild(jE().createTextNode(i))}function nF(t,e){t.appendChild(jE().createTextNode(e))}const sF=["http://www.google.com/kml/ext/2.2"],oF=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],rF={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},AF=VE(oF,{ExtendedData:lS,Region:hS,MultiGeometry:OE(tS,"geometry"),LineString:OE(JF,"geometry"),LinearRing:OE(ZF,"geometry"),Point:OE(eS,"geometry"),Polygon:OE(nS,"geometry"),Style:OE(oS),StyleMap:function(t,e){const i=PF.call(this,t,e);if(!i)return;const n=e[e.length-1];Array.isArray(i)?n.Style=i:"string"==typeof i?n.styleUrl=i:M(!1,38)},address:OE(tF),description:OE(tF),name:OE(tF),open:OE(ZE),phoneNumber:OE(tF),styleUrl:OE(TF),visibility:OE(ZE)},VE(sF,{MultiTrack:OE((function(t,e){const i=zE([],VF,t,e);if(!i)return;return new Hn(i)}),"geometry"),Track:OE(zF,"geometry")})),aF=VE(oF,{ExtendedData:lS,Region:hS,Link:function(t,e){WE(lF,t,e)},address:OE(tF),description:OE(tF),name:OE(tF),open:OE(ZE),phoneNumber:OE(tF),visibility:OE(ZE)}),lF=VE(oF,{href:OE(QF)}),hF=VE(oF,{LatLonAltBox:function(t,e){const i=zE({},dS,t,e);if(!i)return;const n=e[e.length-1],s=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];n.extent=s,n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,e){const i=zE({},gS,t,e);if(!i)return;const n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),cF=VE(oF,["Document","Placemark"]),uF=VE(oF,{Document:NE((function(t,e,i){XE({node:t},_S,BS,e,i,void 0,this)})),Placemark:NE(VS)});let dF,gF,pF,fF,mF,yF,_F,BF,wF,CF=null,bF=null,vF=null,xF=null,EF=null,FF=null;function SF(t){return 32/Math.min(t[0],t[1])}function IF(t){return t}function MF(t,e,i){return Array.isArray(t)?t:"string"==typeof t?MF(i[t],e,i):e}function LF(t){const e=UE(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){const t=i[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function UF(t){let e=UE(t,!1);const i=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let s;for(;s=n.exec(e);){const t=parseFloat(s[1]),n=parseFloat(s[2]),o=s[3]?parseFloat(s[3]):0;i.push(t,n,o),e=e.substr(s[0].length)}if(""===e)return i}function QF(t){const e=UE(t,!1).trim();let i=t.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i){return new URL(e,i).href}return e}function TF(t){const e=UE(t,!1).trim().replace(/^(?!.*#)/,"#");let i=t.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i){return new URL(e,i).href}return e}function kF(t){return $E(t)}const RF=VE(oF,{Pair:function(t,e){const i=zE({},cS,t,e,this);if(!i)return;const n=i.key;if(n&&"normal"==n){const t=i.styleUrl;t&&(e[e.length-1]=t);const n=i.Style;n&&(e[e.length-1]=n)}}});function PF(t,e){return zE(void 0,RF,t,e,this)}const DF=VE(oF,{Icon:OE((function(t,e){const i=zE({},XF,t,e);return i||null})),color:OE(LF),heading:OE($E),hotSpot:OE((function(t){const e=t.getAttribute("xunits"),i=t.getAttribute("yunits");let n;return n="insetPixels"!==e?"insetPixels"!==i?"bottom-left":"top-left":"insetPixels"!==i?"bottom-right":"top-right",{x:parseFloat(t.getAttribute("x")),xunits:rF[e],y:parseFloat(t.getAttribute("y")),yunits:rF[i],origin:n}})),scale:OE(kF)});const OF=VE(oF,{color:OE(LF),scale:OE(kF)});const NF=VE(oF,{color:OE(LF),width:OE($E)});const HF=VE(oF,{color:OE(LF),fill:OE(ZE),outline:OE(ZE)});const GF=VE(oF,{coordinates:DE(UF)});function KF(t,e){return zE(null,GF,t,e)}const VF=VE(sF,{Track:PE(zF)});const WF=VE(oF,{when:function(t,e){const i=e[e.length-1].whens,n=UE(t,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}},VE(sF,{coord:function(t,e){const i=e[e.length-1].coordinates,n=UE(t,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(s){const t=parseFloat(s[1]),e=parseFloat(s[2]),n=parseFloat(s[3]);i.push([t,e,n])}else i.push([])}}));function zF(t,e){const i=zE({coordinates:[],whens:[]},WF,t,e);if(!i)return;const n=[],s=i.coordinates,o=i.whens;for(let t=0,e=Math.min(s.length,o.length);t<e;++t)3==s[t].length&&n.push(s[t][0],s[t][1],s[t][2],o[t]);return new Pn(n,"XYZM")}const XF=VE(oF,{href:OE(QF)},VE(sF,{x:OE($E),y:OE($E),w:OE($E),h:OE($E)}));const YF=VE(oF,{coordinates:DE(UF)});function qF(t,e){return zE(null,YF,t,e)}const jF=VE(oF,{extrude:OE(ZE),tessellate:OE(ZE),altitudeMode:OE(tF)});function JF(t,e){const i=zE({},jF,t,e),n=qF(t,e);if(n){const t=new Pn(n,"XYZ");return t.setProperties(i,!0),t}}function ZF(t,e){const i=zE({},jF,t,e),n=qF(t,e);if(n){const t=new cn(n,"XYZ",[n.length]);return t.setProperties(i,!0),t}}const $F=VE(oF,{LineString:PE(JF),LinearRing:PE(ZF),MultiGeometry:PE(tS),Point:PE(eS),Polygon:PE(nS)});function tS(t,e){const i=zE([],$F,t,e);if(!i)return null;if(0===i.length)return new Un(i);let n,s=!0;const o=i[0].getType();let r;for(let t=1,e=i.length;t<e;++t)if(r=i[t],r.getType()!=o){s=!1;break}if(s){let t,e;if("Point"==o){const s=i[0];t=s.getLayout(),e=s.getFlatCoordinates();for(let t=1,n=i.length;t<n;++t)r=i[t],g(e,r.getFlatCoordinates());n=new Kn(e,t),rS(n,i)}else"LineString"==o?(n=new Hn(i),rS(n,i)):"Polygon"==o?(n=new Wn(i),rS(n,i)):"GeometryCollection"==o?n=new Un(i):M(!1,37)}else n=new Un(i);return n}function eS(t,e){const i=zE({},jF,t,e),n=qF(t,e);if(n){const t=new qi(n,"XYZ");return t.setProperties(i,!0),t}}const iS=VE(oF,{innerBoundaryIs:function(t,e){const i=zE([],pS,t,e);if(i.length>0){e[e.length-1].push(...i)}},outerBoundaryIs:function(t,e){const i=zE(void 0,fS,t,e);if(i){e[e.length-1][0]=i}}});function nS(t,e){const i=zE({},jF,t,e),n=zE([null],iS,t,e);if(n&&n[0]){const t=n[0],e=[t.length];for(let i=1,s=n.length;i<s;++i)g(t,n[i]),e.push(t.length);const s=new cn(t,"XYZ",e);return s.setProperties(i,!0),s}}const sS=VE(oF,{IconStyle:function(t,e){const i=zE({},DF,t,e);if(!i)return;const n=e[e.length-1],s="Icon"in i?i.Icon:{},o=!("Icon"in i)||Object.keys(s).length>0;let r;const A=s.href;let a,l,h;A?r=A:o&&(r=yF);let c="bottom-left";const u=i.hotSpot;let d;u?(a=[u.x,u.y],l=u.xunits,h=u.yunits,c=u.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(r.includes("pushpin")?(a=gF,l=pF,h=fF):r.includes("arrow-reverse")?(a=[54,42],l=pF,h=fF):r.includes("paddle")&&(a=[32,1],l=pF,h=fF));const g=s.x,p=s.y;let f;void 0!==g&&void 0!==p&&(d=[g,p]);const m=s.w,y=s.h;let _;void 0!==m&&void 0!==y&&(f=[m,y]);const B=i.heading;void 0!==B&&(_=be(B));const w=i.scale,C=i.color;if(o){r==yF&&(f=mF);const t=new Xo({anchor:a,anchorOrigin:c,anchorXUnits:l,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:d,offsetOrigin:"bottom-left",rotation:_,scale:w,size:f,src:this.iconUrlFunction_(r),color:C}),e=t.getScaleArray()[0],i=t.getSize();if(null===i){const i=t.getImageState();if(i===Is||i===Ms){const n=function(){const i=t.getImageState();if(i!==Is&&i!==Ms){const i=t.getSize();if(i&&2==i.length){const n=SF(i);t.setScale(e*n)}t.unlistenImageChange(n)}};t.listenImageChange(n),i===Is&&t.load()}}else if(2==i.length){const n=SF(i);t.setScale(e*n)}n.imageStyle=t}else n.imageStyle=_F},LabelStyle:function(t,e){const i=zE({},OF,t,e);if(!i)return;const n=e[e.length-1],s=new qo({fill:new Uo({color:"color"in i?i.color:dF}),scale:i.scale});n.textStyle=s},LineStyle:function(t,e){const i=zE({},NF,t,e);if(!i)return;const n=e[e.length-1],s=new To({color:"color"in i?i.color:dF,width:"width"in i?i.width:1});n.strokeStyle=s},PolyStyle:function(t,e){const i=zE({},HF,t,e);if(!i)return;const n=e[e.length-1],s=new Uo({color:"color"in i?i.color:dF});n.fillStyle=s;const o=i.fill;void 0!==o&&(n.fill=o);const r=i.outline;void 0!==r&&(n.outline=r)}});function oS(t,e){const i=zE({},sS,t,e,this);if(!i)return null;let n="fillStyle"in i?i.fillStyle:CF;const s=i.fill;let o;void 0===s||s||(n=null),"imageStyle"in i?i.imageStyle!=_F&&(o=i.imageStyle):o=bF;const r="textStyle"in i?i.textStyle:xF,A="strokeStyle"in i?i.strokeStyle:vF,a=i.outline;return void 0===a||a?[new No({fill:n,image:o,stroke:A,text:r,zIndex:void 0})]:[new No({geometry:function(t){const e=t.getGeometry(),i=e.getType();if("GeometryCollection"===i){return new Un(e.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"!==e&&"MultiPolygon"!==e})))}if("Polygon"!==i&&"MultiPolygon"!==i)return e},fill:n,image:o,stroke:A,text:r,zIndex:void 0}),new No({geometry:function(t){const e=t.getGeometry(),i=e.getType();if("GeometryCollection"===i){return new Un(e.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})))}if("Polygon"===i||"MultiPolygon"===i)return e},fill:n,stroke:null,zIndex:void 0})]}function rS(t,e){const i=e.length,n=new Array(e.length),s=new Array(e.length),o=new Array(e.length);let r,A,a;r=!1,A=!1,a=!1;for(let t=0;t<i;++t){const i=e[t];n[t]=i.get("extrude"),s[t]=i.get("tessellate"),o[t]=i.get("altitudeMode"),r=r||void 0!==n[t],A=A||void 0!==s[t],a=a||o[t]}r&&t.set("extrude",n),A&&t.set("tessellate",s),a&&t.set("altitudeMode",o)}const AS=VE(oF,{displayName:OE(tF),value:OE(tF)});const aS=VE(oF,{Data:function(t,e){const i=t.getAttribute("name");WE(AS,t,e);const n=e[e.length-1];i&&n.displayName?n[i]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){WE(uS,t,e)}});function lS(t,e){WE(aS,t,e)}function hS(t,e){WE(hF,t,e)}const cS=VE(oF,{Style:OE(oS),key:OE(tF),styleUrl:OE(TF)});const uS=VE(oF,{SimpleData:function(t,e){const i=t.getAttribute("name");if(null!==i){const n=tF(t);e[e.length-1][i]=n}}});const dS=VE(oF,{altitudeMode:OE(tF),minAltitude:OE($E),maxAltitude:OE($E),north:OE($E),south:OE($E),east:OE($E),west:OE($E)});const gS=VE(oF,{minLodPixels:OE($E),maxLodPixels:OE($E),minFadeExtent:OE($E),maxFadeExtent:OE($E)});const pS=VE(oF,{LinearRing:PE(KF)});const fS=VE(oF,{LinearRing:DE(KF)});function mS(t,e){const i=Ks(e),n=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]];for(let t=0;t<4;++t){const e=Math.floor(n[t]).toString(16);n[t]=1==e.length?"0"+e:e}nF(t,n.join(""))}const yS=VE(oF,{Data:NE((function(t,e,i){t.setAttribute("name",e.name);const n={node:t},s=e.value;"object"==typeof s?(null!==s&&s.displayName&&XE(n,yS,GE,[s.displayName],i,["displayName"]),null!==s&&s.value&&XE(n,yS,GE,[s.value],i,["value"])):XE(n,yS,GE,[s],i,["value"])})),value:NE((function(t,e){nF(t,e)})),displayName:NE((function(t,e){!function(t,e){t.appendChild(jE().createCDATASection(e))}(t,e)}))});const _S=VE(oF,{Placemark:NE(VS)}),BS=function(t,e,i){return LE(e[e.length-1].node.namespaceURI,"Placemark")};const wS=HE("Data");const CS=VE(oF,["href"],VE(sF,["x","y","w","h"])),bS=VE(oF,{href:NE(nF)},VE(sF,{x:NE(iF),y:NE(iF),w:NE(iF),h:NE(iF)})),vS=function(t,e,i){return LE(sF[0],"gx:"+i)};const xS=VE(oF,["scale","heading","Icon","color","hotSpot"]),ES=VE(oF,{Icon:NE((function(t,e,i){const n={node:t},s=i[i.length-1].node;let o=CS[s.namespaceURI],r=KE(e,o);XE(n,bS,GE,r,i,o),o=CS[sF[0]],r=KE(e,o),XE(n,bS,vS,r,i,o)})),color:NE(mS),heading:NE(iF),hotSpot:NE((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:NE(tI)});const FS=VE(oF,["color","scale"]),SS=VE(oF,{color:NE(mS),scale:NE(tI)});const IS=VE(oF,["color","width"]),MS=VE(oF,{color:NE(mS),width:NE(iF)});const LS={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},US=function(t,e,i){if(t){return LE(e[e.length-1].node.namespaceURI,LS[t.getType()])}},QS=HE("Point"),TS=HE("LineString"),kS=HE("LinearRing"),RS=HE("Polygon"),PS=VE(oF,{LineString:NE(XS),Point:NE(XS),Polygon:NE(ZS),GeometryCollection:NE(DS)});function DS(t,e,i){const n={node:t},s=e.getType();let o,r=[];"GeometryCollection"===s?(e.getGeometriesArrayRecursive().forEach((function(t){const e=t.getType();"MultiPoint"===e?r=r.concat(t.getPoints()):"MultiLineString"===e?r=r.concat(t.getLineStrings()):"MultiPolygon"===e?r=r.concat(t.getPolygons()):"Point"===e||"LineString"===e||"Polygon"===e?r.push(t):M(!1,39)})),o=US):"MultiPoint"===s?(r=e.getPoints(),o=QS):"MultiLineString"===s?(r=e.getLineStrings(),o=TS):"MultiPolygon"===s?(r=e.getPolygons(),o=RS):M(!1,39),XE(n,PS,o,r,i)}const OS=VE(oF,{LinearRing:NE(XS)});function NS(t,e,i){XE({node:t},OS,kS,[e],i)}const HS=VE(oF,{ExtendedData:NE((function(t,e,i){const n={node:t},s=e.names,o=e.values,r=s.length;for(let t=0;t<r;t++)XE(n,yS,wS,[{name:s[t],value:o[t]}],i)})),MultiGeometry:NE(DS),LineString:NE(XS),LinearRing:NE(XS),Point:NE(XS),Polygon:NE(ZS),Style:NE((function(t,e,i){const n={node:t},s={};if(e.pointStyles.length){const t=e.pointStyles[0].getText();t&&(s.LabelStyle=t);const i=e.pointStyles[0].getImage();i&&"function"==typeof i.getSrc&&(s.IconStyle=i)}if(e.lineStyles.length){const t=e.lineStyles[0].getStroke();t&&(s.LineStyle=t)}if(e.polyStyles.length){const t=e.polyStyles[0].getStroke();t&&!s.LineStyle&&(s.LineStyle=t),s.PolyStyle=e.polyStyles[0]}const o=i[i.length-1].node,r=eI[o.namespaceURI],A=KE(s,r);XE(n,iI,GE,A,i,r)})),address:NE(nF),description:NE(nF),name:NE(nF),open:NE(eF),phoneNumber:NE(nF),styleUrl:NE(nF),visibility:NE(eF)}),GS=VE(oF,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),KS=HE("ExtendedData");function VS(t,e,i){const n={node:t};e.getId()&&t.setAttribute("id",e.getId());const s=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;const r=Object.keys(s||{}).sort().filter((function(t){return!o[t]})),A=e.getStyleFunction();if(A){const t=A(e,0);if(t){const i=Array.isArray(t)?t:[t];let n=i;if(e.getGeometry()&&(n=i.filter((function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})).length:"Point"===t||"MultiPoint"===t}}))),this.writeStyles_){let t=i,o=i;e.getGeometry()&&(t=i.filter((function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"LineString"===e||"MultiLineString"===e})).length:"LineString"===t||"MultiLineString"===t}})),o=i.filter((function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})).length:"Polygon"===t||"MultiPolygon"===t}}))),s.Style={pointStyles:n,lineStyles:t,polyStyles:o}}if(n.length&&void 0===s.name){const t=n[0].getText();t&&(s.name=t.getText())}}}const a=i[i.length-1].node,l=GS[a.namespaceURI],h=KE(s,l);if(XE(n,HS,GE,h,i,l),r.length>0){const t=KE(s,r);XE(n,HS,KS,[{names:r,values:t}],i)}const c=i[0];let u=e.getGeometry();u&&(u=wa(u,!0,c)),XE(n,HS,US,[u],i)}const WS=VE(oF,["extrude","tessellate","altitudeMode","coordinates"]),zS=VE(oF,{extrude:NE(eF),tessellate:NE(eF),altitudeMode:NE(nF),coordinates:NE((function(t,e,i){const n=i[i.length-1],s=n.layout,o=n.stride;let r;"XY"==s||"XYM"==s?r=2:"XYZ"==s||"XYZM"==s?r=3:M(!1,34);const A=e.length;let a="";if(A>0){a+=e[0];for(let t=1;t<r;++t)a+=","+e[t];for(let t=o;t<A;t+=o){a+=" "+e[t];for(let i=1;i<r;++i)a+=","+e[t+i]}}nF(t,a)}))});function XS(t,e,i){const n=e.getFlatCoordinates(),s={node:t};s.layout=e.getLayout(),s.stride=e.getStride();const o=e.getProperties();o.coordinates=n;const r=i[i.length-1].node,A=WS[r.namespaceURI],a=KE(o,A);XE(s,zS,GE,a,i,A)}const YS=VE(oF,["color","fill","outline"]),qS=VE(oF,{outerBoundaryIs:NE(NS),innerBoundaryIs:NE(NS)}),jS=HE("innerBoundaryIs"),JS=HE("outerBoundaryIs");function ZS(t,e,i){const n=e.getLinearRings(),s=n.shift(),o={node:t};XE(o,qS,jS,n,i),XE(o,qS,JS,[s],i)}const $S=VE(oF,{color:NE(mS),fill:NE(eF),outline:NE(eF)});function tI(t,e){iF(t,Math.round(1e6*e)/1e6)}const eI=VE(oF,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),iI=VE(oF,{IconStyle:NE((function(t,e,i){const n={node:t},s={},o=e.getSrc(),r=e.getSize(),A=e.getImageSize(),a={href:o};if(r){a.w=r[0],a.h=r[1];const t=e.getAnchor(),i=e.getOrigin();if(i&&A&&0!==i[0]&&i[1]!==r[1]&&(a.x=i[0],a.y=A[1]-(i[1]+r[1])),t&&(t[0]!==r[0]/2||t[1]!==r[1]/2)){const e={x:t[0],xunits:"pixels",y:r[1]-t[1],yunits:"pixels"};s.hotSpot=e}}s.Icon=a;let l=e.getScaleArray()[0],h=r;if(null===h&&(h=mF),2==h.length){l/=SF(h)}1!==l&&(s.scale=l);const c=e.getRotation();0!==c&&(s.heading=c);const u=e.getColor();u&&(s.color=u);const d=i[i.length-1].node,g=xS[d.namespaceURI],p=KE(s,g);XE(n,ES,GE,p,i,g)})),LabelStyle:NE((function(t,e,i){const n={node:t},s={},o=e.getFill();o&&(s.color=o.getColor());const r=e.getScale();r&&1!==r&&(s.scale=r);const A=i[i.length-1].node,a=FS[A.namespaceURI],l=KE(s,a);XE(n,SS,GE,l,i,a)})),LineStyle:NE((function(t,e,i){const n={node:t},s={color:e.getColor(),width:Number(e.getWidth())||1},o=i[i.length-1].node,r=IS[o.namespaceURI],A=KE(s,r);XE(n,MS,GE,A,i,r)})),PolyStyle:NE((function(t,e,i){const n={node:t},s=e.getFill(),o=e.getStroke(),r={color:s?s.getColor():void 0,fill:!!s&&void 0,outline:!!o&&void 0},A=i[i.length-1].node,a=YS[A.namespaceURI],l=KE(r,a);XE(n,$S,GE,l,i,a)}))});var nI=class extends JE{constructor(t){super(),t=t||{},FF||(dF=[255,255,255,1],CF=new Uo({color:dF}),gF=[20,2],pF="pixels",fF="pixels",mF=[64,64],yF="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",bF=new Xo({anchor:gF,anchorOrigin:"bottom-left",anchorXUnits:pF,anchorYUnits:fF,crossOrigin:"anonymous",rotation:0,scale:SF(mF),size:mF,src:yF}),_F="NO_IMAGE",vF=new To({color:dF,width:1}),BF=new To({color:[51,51,51,1],width:2}),xF=new qo({font:"bold 16px Helvetica",fill:CF,stroke:BF,scale:.8}),EF=new No({fill:CF,image:bF,text:xF,stroke:vF,zIndex:0}),FF=[EF]),this.dataProjection=je("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:FF,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:IF,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const i=zE([],VE(oF,{Document:RE(this.readDocumentOrFolder_,this),Folder:RE(this.readDocumentOrFolder_,this),Placemark:PE(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);return i||void 0}readPlacemark_(t,e){const i=zE({geometry:null},AF,t,e,this);if(!i)return;const n=new In,s=t.getAttribute("id");null!==s&&n.setId(s);const o=e[0],r=i.geometry;if(r&&wa(r,!1,o),n.setGeometry(r),delete i.geometry,this.extractStyles_){const t=function(t,e,i,n,s){return function(o,r){let A=s,a="",l=[];if(A){const t=o.getGeometry();if(t)if(t instanceof Un)l=t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})),A=l.length>0;else{const e=t.getType();A="Point"===e||"MultiPoint"===e}}A&&(a=o.get("name"),A=A&&!!a,A&&/&[^&]+;/.test(a)&&(wF||(wF=document.createElement("textarea")),wF.innerHTML=a,a=wF.value));let h=i;if(t?h=t:e&&(h=MF(e,i,n)),A){const t=function(t,e){const i=[0,0];let n="start";const s=t.getImage();if(s){const t=s.getSize();if(t&&2==t.length){const e=s.getScaleArray(),o=s.getAnchor();i[0]=e[0]*(t[0]-o[0]),i[1]=e[1]*(t[1]/2-o[1]),n="left"}}let o=t.getText();o?(o=o.clone(),o.setFont(o.getFont()||xF.getFont()),o.setScale(o.getScale()||xF.getScale()),o.setFill(o.getFill()||xF.getFill()),o.setStroke(o.getStroke()||BF)):o=xF.clone();o.setText(e),o.setOffsetX(i[0]),o.setOffsetY(i[1]),o.setTextAlign(n);return new No({image:s,text:o})}(h[0],a);if(l.length>0){t.setGeometry(new Un(l));return[t,new No({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null})].concat(h.slice(1))}return t}return h}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(t)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(t,e){const i=t.getAttribute("id");if(null!==i){const n=oS.call(this,t,e);if(n){let e,s=t.baseURI;if(s&&"about:blank"!=s||(s=window.location.href),s){e=new URL("#"+i,s).href}else e="#"+i;this.sharedStyles_[e]=n}}}readSharedStyleMap_(t,e){const i=t.getAttribute("id");if(null===i)return;const n=PF.call(this,t,e);if(!n)return;let s,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o){s=new URL("#"+i,o).href}else s="#"+i;this.sharedStyles_[s]=n}readFeatureFromNode(t,e){if(!oF.includes(t.namespaceURI))return null;const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i||null}readFeaturesFromNode(t,e){if(!oF.includes(t.namespaceURI))return[];let i;const n=t.localName;if("Document"==n||"Folder"==n)return i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),i||[];if("Placemark"==n){const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=this.readFeaturesFromNode(n,e);t&&g(i,t)}return i}return[]}readName(t){if(t){if("string"==typeof t){const e=kE(t);return this.readNameFromDocument(e)}return TE(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const t=this.readNameFromNode(e);if(t)return t}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(oF.includes(e.namespaceURI)&&"name"==e.localName)return tF(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const t=e.localName;if(oF.includes(e.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){const t=this.readNameFromNode(e);if(t)return t}}}readNetworkLinks(t){const e=[];if("string"==typeof t){const i=kE(t);g(e,this.readNetworkLinksFromDocument(i))}else TE(t)?g(e,this.readNetworkLinksFromDocument(t)):g(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&g(e,this.readNetworkLinksFromNode(i));return e}readNetworkLinksFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(oF.includes(i.namespaceURI)&&"NetworkLink"==i.localName){const t=zE({},aF,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!oF.includes(i.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||g(e,this.readNetworkLinksFromNode(i))}return e}readRegion(t){const e=[];if("string"==typeof t){const i=kE(t);g(e,this.readRegionFromDocument(i))}else TE(t)?g(e,this.readRegionFromDocument(t)):g(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&g(e,this.readRegionFromNode(i));return e}readRegionFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(oF.includes(i.namespaceURI)&&"Region"==i.localName){const t=zE({},hF,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!oF.includes(i.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||g(e,this.readRegionFromNode(i))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const i=LE(oF[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",sF[0]),i.setAttributeNS(n,"xmlns:xsi",ME),i.setAttributeNS(ME,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const s={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);const r=cF[i.namespaceURI],A=KE(o,r);return XE(s,uF,GE,A,[e],r,this),i}};const sI={GeoJSON:pl,KML:nI},oI=function(t,e){return t in sI?new sI[t](e):null},rI="layerTool",AI={active:!1,"oltb-layer-map-toolbox-collapsed":!1,"oltb-layer-feature-toolbox-collapsed":!1},aI={disableMapCreateLayerButton:!1,disableMapLayerVisibilityButton:!1,disableMapLayerEditButton:!1,disableMapLayerDeleteButton:!1,disableFeatureCreateLayerButton:!1,disableFeatureLayerVisibilityButton:!1,disableFeatureLayerEditButton:!1,disableFeatureLayerDeleteButton:!1,disableFeatureLayerDownloadButton:!1};const lI="oltb-split-view",hI="splitViewTool",cI={active:!1,collapsed:!1},uI={};const dI="overviewTool",gI={active:!1,collapsed:!1},pI={};const fI="graticuleTool",mI={active:!1},yI={color:"rgba(59, 67, 82, 0.9)",dashed:!0,width:2,showLabels:!0,wrapX:!0};const _I="magnifyTool",BI={active:!1},wI={};const CI={};const bI=async function(t=""){return navigator.clipboard.writeText(t.trim()).then((()=>!0)).catch((t=>(console.error(`Error copying data [${t}]`),!1)))},vI="coordinateTool",xI={active:!1},EI={};const FI="oltb-info-window-marker",SI={enableHighAccuracy:!0,timeout:1e4};const II={};const MI="scaleLineTool",LI={active:!1},UI={units:"metric"};const QI={};const TI="theme",kI={};const RI=function(){return document.body.classList.contains("oltb-row")};var PI={exports:{}};
/*!
   * a-color-picker (https://github.com/narsenico/a-color-picker)
   * 
   * Copyright (c) 2017-2018, Gianfranco Caldi.
   * Released under the MIT License.
   */"undefined"!=typeof self&&self,PI.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){
/*!
  	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
  	 *
  	 * Copyright (c) 2014-2017, Jon Schlinkert.
  	 * Released under the MIT License.
  	 */
var n=i(3);function s(t){return!0===n(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,i;return!1!==s(t)&&"function"==typeof(e=t.constructor)&&!1!==s(i=e.prototype)&&!1!==i.hasOwnProperty("isPrototypeOf")}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=e.PALETTE_MATERIAL_CHROME=e.PALETTE_MATERIAL_500=e.COLOR_NAMES=e.getLuminance=e.intToRgb=e.rgbToInt=e.rgbToHsv=e.rgbToHsl=e.hslToRgb=e.rgbToHex=e.parseColor=e.parseColorToHsla=e.parseColorToHsl=e.parseColorToRgba=e.parseColorToRgb=e.from=e.createPicker=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,A=t[Symbol.iterator]();!(n=(r=A.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,o=t}finally{try{!n&&A.return&&A.return()}finally{if(s)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=i(2),r=a(i(0)),A=a(i(4));function a(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}
/*!
  	 * a-color-picker
  	 * https://github.com/narsenico/a-color-picker
  	 *
  	 * Copyright (c) 2017-2019, Gianfranco Caldi.
  	 * Released under the MIT License.
  	 */var c="undefined"!=typeof window&&window.navigator.userAgent.indexOf("Edge")>-1,u="undefined"!=typeof window&&window.navigator.userAgent.indexOf("rv:")>-1,d={id:null,attachTo:"body",showHSL:!0,showRGB:!0,showHEX:!0,showAlpha:!1,color:"#ff0000",palette:null,paletteEditable:!1,useAlphaInPalette:"auto",slBarSize:[232,150],hueBarSize:[150,11],alphaBarSize:[150,11]},g="COLOR",p="RGBA_USER",f="HSLA_USER";function m(t,e,i){return t?t instanceof HTMLElement?t:t instanceof NodeList?t[0]:"string"==typeof t?document.querySelector(t):t.jquery?t.get(0):i?e:null:e}function y(t){var e=t.getContext("2d"),i=+t.width,n=+t.height,r=e.createLinearGradient(1,1,1,n-1);return r.addColorStop(0,"white"),r.addColorStop(1,"black"),{setHue:function(t){var s=e.createLinearGradient(1,0,i-1,0);s.addColorStop(0,"hsla("+t+", 100%, 50%, 0)"),s.addColorStop(1,"hsla("+t+", 100%, 50%, 1)"),e.fillStyle=r,e.fillRect(0,0,i,n),e.fillStyle=s,e.globalCompositeOperation="multiply",e.fillRect(0,0,i,n),e.globalCompositeOperation="source-over"},grabColor:function(t,i){return e.getImageData(t,i,1,1).data},findColor:function(t,e,r){var A=(0,o.rgbToHsv)(t,e,r),a=s(A,3),l=a[1],h=a[2];return[l*i,n-h*n]}}}function _(t,e,i){return null===t?e:/^\s*$/.test(t)?i:!!/true|yes|1/i.test(t)||!/false|no|0/i.test(t)&&e}function B(t,e,i){if(null===t)return e;if(/^\s*$/.test(t))return i;var n=t.split(",").map(Number);return 2===n.length&&n[0]&&n[1]?n:e}var w=function(){function t(e,i){if(l(this,t),i?(e=m(e),this.options=Object.assign({},d,i)):e&&(0,r.default)(e)?(this.options=Object.assign({},d,e),e=m(this.options.attachTo)):(this.options=Object.assign({},d),e=m((0,o.nvl)(e,this.options.attachTo))),!e)throw new Error("Container not found: "+this.options.attachTo);!function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"acp-";if(e.hasAttribute(i+"show-hsl")&&(t.showHSL=_(e.getAttribute(i+"show-hsl"),d.showHSL,!0)),e.hasAttribute(i+"show-rgb")&&(t.showRGB=_(e.getAttribute(i+"show-rgb"),d.showRGB,!0)),e.hasAttribute(i+"show-hex")&&(t.showHEX=_(e.getAttribute(i+"show-hex"),d.showHEX,!0)),e.hasAttribute(i+"show-alpha")&&(t.showAlpha=_(e.getAttribute(i+"show-alpha"),d.showAlpha,!0)),e.hasAttribute(i+"palette-editable")&&(t.paletteEditable=_(e.getAttribute(i+"palette-editable"),d.paletteEditable,!0)),e.hasAttribute(i+"sl-bar-size")&&(t.slBarSize=B(e.getAttribute(i+"sl-bar-size"),d.slBarSize,[232,150])),e.hasAttribute(i+"hue-bar-size")&&(t.hueBarSize=B(e.getAttribute(i+"hue-bar-size"),d.hueBarSize,[150,11]),t.alphaBarSize=t.hueBarSize),e.hasAttribute(i+"palette")){var n=e.getAttribute(i+"palette");switch(n){case"PALETTE_MATERIAL_500":t.palette=o.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":case"":t.palette=o.PALETTE_MATERIAL_CHROME;break;default:t.palette=n.split(/[;|]/)}}e.hasAttribute(i+"color")&&(t.color=e.getAttribute(i+"color"))}(this.options,e),this.H=0,this.S=0,this.L=0,this.R=0,this.G=0,this.B=0,this.A=1,this.palette={},this.element=document.createElement("div"),this.options.id&&(this.element.id=this.options.id),this.element.className="a-color-picker",this.element.innerHTML=A.default,e.appendChild(this.element);var n=this.element.querySelector(".a-color-picker-h");this.setupHueCanvas(n),this.hueBarHelper=y(n),this.huePointer=this.element.querySelector(".a-color-picker-h+.a-color-picker-dot");var s=this.element.querySelector(".a-color-picker-sl");this.setupSlCanvas(s),this.slBarHelper=y(s),this.slPointer=this.element.querySelector(".a-color-picker-sl+.a-color-picker-dot"),this.preview=this.element.querySelector(".a-color-picker-preview"),this.setupClipboard(this.preview.querySelector(".a-color-picker-clipbaord")),this.options.showHSL?(this.setupInput(this.inputH=this.element.querySelector(".a-color-picker-hsl>input[nameref=H]")),this.setupInput(this.inputS=this.element.querySelector(".a-color-picker-hsl>input[nameref=S]")),this.setupInput(this.inputL=this.element.querySelector(".a-color-picker-hsl>input[nameref=L]"))):this.element.querySelector(".a-color-picker-hsl").remove(),this.options.showRGB?(this.setupInput(this.inputR=this.element.querySelector(".a-color-picker-rgb>input[nameref=R]")),this.setupInput(this.inputG=this.element.querySelector(".a-color-picker-rgb>input[nameref=G]")),this.setupInput(this.inputB=this.element.querySelector(".a-color-picker-rgb>input[nameref=B]"))):this.element.querySelector(".a-color-picker-rgb").remove(),this.options.showHEX?this.setupInput(this.inputRGBHEX=this.element.querySelector("input[nameref=RGBHEX]")):this.element.querySelector(".a-color-picker-rgbhex").remove(),this.options.paletteEditable||this.options.palette&&this.options.palette.length>0?this.setPalette(this.paletteRow=this.element.querySelector(".a-color-picker-palette")):(this.paletteRow=this.element.querySelector(".a-color-picker-palette"),this.paletteRow.remove()),this.options.showAlpha?(this.setupAlphaCanvas(this.element.querySelector(".a-color-picker-a")),this.alphaPointer=this.element.querySelector(".a-color-picker-a+.a-color-picker-dot")):this.element.querySelector(".a-color-picker-alpha").remove(),this.element.style.width=this.options.slBarSize[0]+"px",this.onValueChanged(g,this.options.color)}return n(t,[{key:"setupHueCanvas",value:function(t){var e=this;t.width=this.options.hueBarSize[0],t.height=this.options.hueBarSize[1];for(var i=t.getContext("2d"),n=i.createLinearGradient(0,0,this.options.hueBarSize[0],0),s=0;s<=1;s+=1/360)n.addColorStop(s,"hsl("+360*s+", 100%, 50%)");i.fillStyle=n,i.fillRect(0,0,this.options.hueBarSize[0],this.options.hueBarSize[1]);var r=function(i){var n=(0,o.limit)(i.clientX-t.getBoundingClientRect().left,0,e.options.hueBarSize[0]),s=Math.round(360*n/e.options.hueBarSize[0]);e.huePointer.style.left=n-7+"px",e.onValueChanged("H",s)},A=function t(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",(function(t){r(t),document.addEventListener("mousemove",r),document.addEventListener("mouseup",A)}))}},{key:"setupSlCanvas",value:function(t){var e=this;t.width=this.options.slBarSize[0],t.height=this.options.slBarSize[1];var i=function(i){var n=(0,o.limit)(i.clientX-t.getBoundingClientRect().left,0,e.options.slBarSize[0]-1),s=(0,o.limit)(i.clientY-t.getBoundingClientRect().top,0,e.options.slBarSize[1]-1),r=e.slBarHelper.grabColor(n,s);e.slPointer.style.left=n-7+"px",e.slPointer.style.top=s-7+"px",e.onValueChanged("RGB",r)},n=function t(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",(function(t){i(t),document.addEventListener("mousemove",i),document.addEventListener("mouseup",n)}))}},{key:"setupAlphaCanvas",value:function(t){var e=this;t.width=this.options.alphaBarSize[0],t.height=this.options.alphaBarSize[1];var i=t.getContext("2d"),n=i.createLinearGradient(0,0,t.width-1,0);n.addColorStop(0,"hsla(0, 0%, 50%, 0)"),n.addColorStop(1,"hsla(0, 0%, 50%, 1)"),i.fillStyle=n,i.fillRect(0,0,this.options.alphaBarSize[0],this.options.alphaBarSize[1]);var s=function(i){var n=(0,o.limit)(i.clientX-t.getBoundingClientRect().left,0,e.options.alphaBarSize[0]),s=+(n/e.options.alphaBarSize[0]).toFixed(2);e.alphaPointer.style.left=n-7+"px",e.onValueChanged("ALPHA",s)},r=function t(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",(function(t){s(t),document.addEventListener("mousemove",s),document.addEventListener("mouseup",r)}))}},{key:"setupInput",value:function(t){var e=this,i=+t.min,n=+t.max,s=t.getAttribute("nameref");t.hasAttribute("select-on-focus")&&t.addEventListener("focus",(function(){t.select()})),"text"===t.type?t.addEventListener("change",(function(){e.onValueChanged(s,t.value)})):((c||u)&&t.addEventListener("keydown",(function(r){"Up"===r.key?(t.value=(0,o.limit)(+t.value+1,i,n),e.onValueChanged(s,t.value),r.returnValue=!1):"Down"===r.key&&(t.value=(0,o.limit)(+t.value-1,i,n),e.onValueChanged(s,t.value),r.returnValue=!1)})),t.addEventListener("change",(function(){var r=+t.value;e.onValueChanged(s,(0,o.limit)(r,i,n))})))}},{key:"setupClipboard",value:function(t){var e=this;t.title="click to copy",t.addEventListener("click",(function(){t.value=(0,o.parseColor)([e.R,e.G,e.B,e.A],"hexcss4"),t.select(),document.execCommand("copy")}))}},{key:"setPalette",value:function(t){var e=this,i="auto"===this.options.useAlphaInPalette?this.options.showAlpha:this.options.useAlphaInPalette,n=null;switch(this.options.palette){case"PALETTE_MATERIAL_500":n=o.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":n=o.PALETTE_MATERIAL_CHROME;break;default:n=(0,o.ensureArray)(this.options.palette)}if(this.options.paletteEditable||n.length>0){var s=function(i,n,s){var o=t.querySelector('.a-color-picker-palette-color[data-color="'+i+'"]')||document.createElement("div");o.className="a-color-picker-palette-color",o.style.backgroundColor=i,o.setAttribute("data-color",i),o.title=i,t.insertBefore(o,n),e.palette[i]=!0,s&&e.onPaletteColorAdd(i)},r=function(i,n){i?(t.removeChild(i),e.palette[i.getAttribute("data-color")]=!1,n&&e.onPaletteColorRemove(i.getAttribute("data-color"))):(t.querySelectorAll(".a-color-picker-palette-color[data-color]").forEach((function(e){t.removeChild(e)})),Object.keys(e.palette).forEach((function(t){e.palette[t]=!1})),n&&e.onPaletteColorRemove())};if(n.map((function(t){return(0,o.parseColor)(t,i?"rgbcss4":"hex")})).filter((function(t){return!!t})).forEach((function(t){return s(t)})),this.options.paletteEditable){var A=document.createElement("div");A.className="a-color-picker-palette-color a-color-picker-palette-add",A.innerHTML="+",t.appendChild(A),t.addEventListener("click",(function(t){/a-color-picker-palette-add/.test(t.target.className)?t.shiftKey?r(null,!0):s(i?(0,o.parseColor)([e.R,e.G,e.B,e.A],"rgbcss4"):(0,o.rgbToHex)(e.R,e.G,e.B),t.target,!0):/a-color-picker-palette-color/.test(t.target.className)&&(t.shiftKey?r(t.target,!0):e.onValueChanged(g,t.target.getAttribute("data-color")))}))}else t.addEventListener("click",(function(t){/a-color-picker-palette-color/.test(t.target.className)&&e.onValueChanged(g,t.target.getAttribute("data-color"))}))}else t.style.display="none"}},{key:"updatePalette",value:function(t){this.paletteRow.innerHTML="",this.palette={},this.paletteRow.parentElement||this.element.appendChild(this.paletteRow),this.options.palette=t,this.setPalette(this.paletteRow)}},{key:"onValueChanged",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{silent:!1};switch(t){case"H":this.H=e;var n=(0,o.hslToRgb)(this.H,this.S,this.L),r=s(n,3);this.R=r[0],this.G=r[1],this.B=r[2],this.slBarHelper.setHue(e),this.updatePointerH(this.H),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"S":this.S=e;var A=(0,o.hslToRgb)(this.H,this.S,this.L),a=s(A,3);this.R=a[0],this.G=a[1],this.B=a[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"L":this.L=e;var l=(0,o.hslToRgb)(this.H,this.S,this.L),h=s(l,3);this.R=h[0],this.G=h[1],this.B=h[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"R":this.R=e;var c=(0,o.rgbToHsl)(this.R,this.G,this.B),u=s(c,3);this.H=u[0],this.S=u[1],this.L=u[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"G":this.G=e;var d=(0,o.rgbToHsl)(this.R,this.G,this.B),m=s(d,3);this.H=m[0],this.S=m[1],this.L=m[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"B":this.B=e;var y=(0,o.rgbToHsl)(this.R,this.G,this.B),_=s(y,3);this.H=_[0],this.S=_[1],this.L=_[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"RGB":var B=s(e,3);this.R=B[0],this.G=B[1],this.B=B[2];var w=(0,o.rgbToHsl)(this.R,this.G,this.B),C=s(w,3);this.H=C[0],this.S=C[1],this.L=C[2],this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case p:var b=s(e,4);this.R=b[0],this.G=b[1],this.B=b[2],this.A=b[3];var v=(0,o.rgbToHsl)(this.R,this.G,this.B),x=s(v,3);this.H=x[0],this.S=x[1],this.L=x[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case f:var E=s(e,4);this.H=E[0],this.S=E[1],this.L=E[2],this.A=E[3];var F=(0,o.hslToRgb)(this.H,this.S,this.L),S=s(F,3);this.R=S[0],this.G=S[1],this.B=S[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"RGBHEX":var I=(0,o.cssColorToRgb)(e)||[this.R,this.G,this.B],M=s(I,3);this.R=M[0],this.G=M[1],this.B=M[2];var L=(0,o.rgbToHsl)(this.R,this.G,this.B),U=s(L,3);this.H=U[0],this.S=U[1],this.L=U[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B);break;case g:var Q=(0,o.parseColor)(e,"rgba")||[0,0,0,1],T=s(Q,4);this.R=T[0],this.G=T[1],this.B=T[2],this.A=T[3];var k=(0,o.rgbToHsl)(this.R,this.G,this.B),R=s(k,3);this.H=R[0],this.S=R[1],this.L=R[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"ALPHA":this.A=e}1===this.A?this.preview.style.backgroundColor="rgb("+this.R+","+this.G+","+this.B+")":this.preview.style.backgroundColor="rgba("+this.R+","+this.G+","+this.B+","+this.A+")",i&&i.silent||this.onchange&&this.onchange(this.preview.style.backgroundColor)}},{key:"onPaletteColorAdd",value:function(t){this.oncoloradd&&this.oncoloradd(t)}},{key:"onPaletteColorRemove",value:function(t){this.oncolorremove&&this.oncolorremove(t)}},{key:"updateInputHSL",value:function(t,e,i){this.options.showHSL&&(this.inputH.value=t,this.inputS.value=e,this.inputL.value=i)}},{key:"updateInputRGB",value:function(t,e,i){this.options.showRGB&&(this.inputR.value=t,this.inputG.value=e,this.inputB.value=i)}},{key:"updateInputRGBHEX",value:function(t,e,i){this.options.showHEX&&(this.inputRGBHEX.value=(0,o.rgbToHex)(t,e,i))}},{key:"updatePointerH",value:function(t){var e=this.options.hueBarSize[0]*t/360;this.huePointer.style.left=e-7+"px"}},{key:"updatePointerSL",value:function(t,e,i){var n=(0,o.hslToRgb)(t,e,i),r=s(n,3),A=r[0],a=r[1],l=r[2],h=this.slBarHelper.findColor(A,a,l),c=s(h,2),u=c[0],d=c[1];u>=0&&(this.slPointer.style.left=u-7+"px",this.slPointer.style.top=d-7+"px")}},{key:"updatePointerA",value:function(t){if(this.options.showAlpha){var e=this.options.alphaBarSize[0]*t;this.alphaPointer.style.left=e-7+"px"}}}]),t}(),C=function(){function t(e){l(this,t),this.name=e,this.listeners=[]}return n(t,[{key:"on",value:function(t){t&&this.listeners.push(t)}},{key:"off",value:function(t){this.listeners=t?this.listeners.filter((function(e){return e!==t})):[]}},{key:"emit",value:function(t,e){for(var i=this.listeners.slice(0),n=0;n<i.length;n++)i[n].apply(e,t)}}]),t}();function b(t,e){var i=new w(t,e),n={change:new C("change"),coloradd:new C("coloradd"),colorremove:new C("colorremove")},r=!0,A={},a={get element(){return i.element},get rgb(){return[i.R,i.G,i.B]},set rgb(t){var e=s(t,3),n=e[0],r=e[1],A=e[2],a=[(0,o.limit)(n,0,255),(0,o.limit)(r,0,255),(0,o.limit)(A,0,255)];n=a[0],r=a[1],A=a[2],i.onValueChanged(p,[n,r,A,1])},get hsl(){return[i.H,i.S,i.L]},set hsl(t){var e=s(t,3),n=e[0],r=e[1],A=e[2],a=[(0,o.limit)(n,0,360),(0,o.limit)(r,0,100),(0,o.limit)(A,0,100)];n=a[0],r=a[1],A=a[2],i.onValueChanged(f,[n,r,A,1])},get rgbhex(){return this.all.hex},get rgba(){return[i.R,i.G,i.B,i.A]},set rgba(t){var e=s(t,4),n=e[0],r=e[1],A=e[2],a=e[3],l=[(0,o.limit)(n,0,255),(0,o.limit)(r,0,255),(0,o.limit)(A,0,255),(0,o.limit)(a,0,1)];n=l[0],r=l[1],A=l[2],a=l[3],i.onValueChanged(p,[n,r,A,a])},get hsla(){return[i.H,i.S,i.L,i.A]},set hsla(t){var e=s(t,4),n=e[0],r=e[1],A=e[2],a=e[3],l=[(0,o.limit)(n,0,360),(0,o.limit)(r,0,100),(0,o.limit)(A,0,100),(0,o.limit)(a,0,1)];n=l[0],r=l[1],A=l[2],a=l[3],i.onValueChanged(f,[n,r,A,a])},get color(){return this.all.toString()},set color(t){i.onValueChanged(g,t)},setColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.onValueChanged(g,t,{silent:e})},get all(){if(r){var t=[i.R,i.G,i.B,i.A],e=i.A<1?"rgba("+i.R+","+i.G+","+i.B+","+i.A+")":o.rgbToHex.apply(void 0,t);(A=(0,o.parseColor)(t,A)).toString=function(){return e},r=!1}return Object.assign({},A)},get onchange(){return n.change&&n.change.listeners[0]},set onchange(t){this.off("change").on("change",t)},get oncoloradd(){return n.coloradd&&n.coloradd.listeners[0]},set oncoloradd(t){this.off("coloradd").on("coloradd",t)},get oncolorremove(){return n.colorremove&&n.colorremove.listeners[0]},set oncolorremove(t){this.off("colorremove").on("colorremove",t)},get palette(){return Object.keys(i.palette).filter((function(t){return i.palette[t]}))},set palette(t){i.updatePalette(t)},show:function(){i.element.classList.remove("hidden")},hide:function(){i.element.classList.add("hidden")},toggle:function(){i.element.classList.toggle("hidden")},on:function(t,e){return t&&n[t]&&n[t].on(e),this},off:function(t,e){return t&&n[t]&&n[t].off(e),this},destroy:function(){n.change.off(),n.coloradd.off(),n.colorremove.off(),i.element.remove(),n=null,i=null}};return i.onchange=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];r=!0,n.change.emit([a].concat(e),a)},i.oncoloradd=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.coloradd.emit([a].concat(e),a)},i.oncolorremove=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.colorremove.emit([a].concat(e),a)},i.element.ctrl=a,a}if("undefined"!=typeof window&&!document.querySelector('head>style[data-source="a-color-picker"]')){var v=i(5).toString(),x=document.createElement("style");x.setAttribute("type","text/css"),x.setAttribute("data-source","a-color-picker"),x.innerHTML=v,document.querySelector("head").appendChild(x)}e.createPicker=b,e.from=function(t,e){var i=function(t){return t?Array.isArray(t)?t:t instanceof HTMLElement?[t]:t instanceof NodeList?[].concat(h(t)):"string"==typeof t?[].concat(h(document.querySelectorAll(t))):t.jquery?t.get():[]:[]}(t).map((function(t,i){var n=b(t,e);return n.index=i,n}));return i.on=function(t,e){return i.forEach((function(i){return i.on(t,e)})),this},i.off=function(t){return i.forEach((function(e){return e.off(t)})),this},i},e.parseColorToRgb=o.parseColorToRgb,e.parseColorToRgba=o.parseColorToRgba,e.parseColorToHsl=o.parseColorToHsl,e.parseColorToHsla=o.parseColorToHsla,e.parseColor=o.parseColor,e.rgbToHex=o.rgbToHex,e.hslToRgb=o.hslToRgb,e.rgbToHsl=o.rgbToHsl,e.rgbToHsv=o.rgbToHsv,e.rgbToInt=o.rgbToInt,e.intToRgb=o.intToRgb,e.getLuminance=o.getLuminance,e.COLOR_NAMES=o.COLOR_NAMES,e.PALETTE_MATERIAL_500=o.PALETTE_MATERIAL_500,e.PALETTE_MATERIAL_CHROME=o.PALETTE_MATERIAL_CHROME,e.VERSION="1.2.1"},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.nvl=e.ensureArray=e.limit=e.getLuminance=e.parseColor=e.parseColorToHsla=e.parseColorToHsl=e.cssHslaToHsla=e.cssHslToHsl=e.parseColorToRgba=e.parseColorToRgb=e.cssRgbaToRgba=e.cssRgbToRgb=e.cssColorToRgba=e.cssColorToRgb=e.intToRgb=e.rgbToInt=e.rgbToHsv=e.rgbToHsl=e.hslToRgb=e.rgbToHex=e.PALETTE_MATERIAL_CHROME=e.PALETTE_MATERIAL_500=e.COLOR_NAMES=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,A=t[Symbol.iterator]();!(n=(r=A.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,o=t}finally{try{!n&&A.return&&A.return()}finally{if(s)throw o}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(t){return t&&t.__esModule?t:{default:t}}(i(0));function o(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var r={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4","indianred ":"#CD5C5C","indigo ":"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function A(t,e,i){return t=+t,isNaN(t)||t<e?e:t>i?i:t}function a(t,e){return null==t?e:t}function l(t,e,i){var n=[A(t,0,255),A(e,0,255),A(i,0,255)];return"#"+("000000"+((t=n[0])<<16|(e=n[1])<<8|(i=n[2])).toString(16)).slice(-6)}function h(t,e,i){var n=void 0,s=void 0,o=void 0,r=[A(t,0,360)/360,A(e,0,100)/100,A(i,0,100)/100];if(t=r[0],i=r[2],0==(e=r[1]))n=s=o=i;else{var a=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},l=i<.5?i*(1+e):i+e-i*e,h=2*i-l;n=a(h,l,t+1/3),s=a(h,l,t),o=a(h,l,t-1/3)}return[255*n,255*s,255*o].map(Math.round)}function c(t,e,i){var n=[A(t,0,255)/255,A(e,0,255)/255,A(i,0,255)/255];t=n[0],e=n[1],i=n[2];var s=Math.max(t,e,i),o=Math.min(t,e,i),r=void 0,a=void 0,l=(s+o)/2;if(s==o)r=a=0;else{var h=s-o;switch(a=l>.5?h/(2-s-o):h/(s+o),s){case t:r=(e-i)/h+(e<i?6:0);break;case e:r=(i-t)/h+2;break;case i:r=(t-e)/h+4}r/=6}return[360*r,100*a,100*l].map(Math.round)}function u(t,e,i){return t<<16|e<<8|i}function d(t){if(t){var e=r[t.toString().toLowerCase()],i=/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F]))|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})))\s*$/i.exec(e||t)||[],s=n(i,10),o=s[3],A=s[4],a=s[5],l=s[7],h=s[8],c=s[9];if(void 0!==o)return[parseInt(o+o,16),parseInt(A+A,16),parseInt(a+a,16)];if(void 0!==l)return[parseInt(l,16),parseInt(h,16),parseInt(c,16)]}}function g(t){if(t){var e=r[t.toString().toLowerCase()],i=/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F])([0-9A-F])?)|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?))\s*$/i.exec(e||t)||[],s=n(i,12),o=s[3],A=s[4],a=s[5],l=s[6],h=s[8],c=s[9],u=s[10],d=s[11];if(void 0!==o)return[parseInt(o+o,16),parseInt(A+A,16),parseInt(a+a,16),l?+(parseInt(l+l,16)/255).toFixed(2):1];if(void 0!==h)return[parseInt(h,16),parseInt(c,16),parseInt(u,16),d?+(parseInt(d,16)/255).toFixed(2):1]}}function p(t){if(t){var e=/^rgb\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(t)||[],i=n(e,4),s=i[0],o=i[1],r=i[2],a=i[3];return s?[A(o,0,255),A(r,0,255),A(a,0,255)]:void 0}}function f(t){if(t){var e=/^rgba?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(t)||[],i=n(e,6),s=i[0],o=i[1],r=i[2],l=i[3],h=i[5];return s?[A(o,0,255),A(r,0,255),A(l,0,255),A(a(h,1),0,1)]:void 0}}function m(t){if(Array.isArray(t))return[A(t[0],0,255),A(t[1],0,255),A(t[2],0,255),A(a(t[3],1),0,1)];var e=g(t)||f(t);return e&&3===e.length&&e.push(1),e}function y(t){if(t){var e=/^hsl\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(t)||[],i=n(e,4),s=i[0],o=i[1],r=i[2],a=i[3];return s?[A(o,0,360),A(r,0,100),A(a,0,100)]:void 0}}function _(t){if(t){var e=/^hsla?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(t)||[],i=n(e,6),s=i[0],o=i[1],r=i[2],l=i[3],h=i[5];return s?[A(o,0,255),A(r,0,255),A(l,0,255),A(a(h,1),0,1)]:void 0}}function B(t){if(Array.isArray(t))return[A(t[0],0,360),A(t[1],0,100),A(t[2],0,100),A(a(t[3],1),0,1)];var e=_(t);return e&&3===e.length&&e.push(1),e}function w(t,e){switch(e){case"rgb":default:return t.slice(0,3);case"rgbcss":return"rgb("+t[0]+", "+t[1]+", "+t[2]+")";case"rgbcss4":return"rgb("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";case"rgba":return t;case"rgbacss":return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";case"hsl":return c.apply(void 0,o(t));case"hslcss":return"hsl("+(t=c.apply(void 0,o(t)))[0]+", "+t[1]+", "+t[2]+")";case"hslcss4":var i=c.apply(void 0,o(t));return"hsl("+i[0]+", "+i[1]+", "+i[2]+", "+t[3]+")";case"hsla":return[].concat(o(c.apply(void 0,o(t))),[t[3]]);case"hslacss":var n=c.apply(void 0,o(t));return"hsla("+n[0]+", "+n[1]+", "+n[2]+", "+t[3]+")";case"hex":return l.apply(void 0,o(t));case"hexcss4":return l.apply(void 0,o(t))+("00"+parseInt(255*t[3]).toString(16)).slice(-2);case"int":return u.apply(void 0,o(t))}}e.COLOR_NAMES=r,e.PALETTE_MATERIAL_500=["#F44336","#E91E63","#E91E63","#9C27B0","#9C27B0","#673AB7","#673AB7","#3F51B5","#3F51B5","#2196F3","#2196F3","#03A9F4","#03A9F4","#00BCD4","#00BCD4","#009688","#009688","#4CAF50","#4CAF50","#8BC34A","#8BC34A","#CDDC39","#CDDC39","#FFEB3B","#FFEB3B","#FFC107","#FFC107","#FF9800","#FF9800","#FF5722","#FF5722","#795548","#795548","#9E9E9E","#9E9E9E","#607D8B","#607D8B"],e.PALETTE_MATERIAL_CHROME=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],e.rgbToHex=l,e.hslToRgb=h,e.rgbToHsl=c,e.rgbToHsv=function(t,e,i){var n=[A(t,0,255)/255,A(e,0,255)/255,A(i,0,255)/255];t=n[0],e=n[1],i=n[2];var s,o=Math.max(t,e,i),r=Math.min(t,e,i),a=void 0,l=o,h=o-r;if(s=0===o?0:h/o,o==r)a=0;else{switch(o){case t:a=(e-i)/h+(e<i?6:0);break;case e:a=(i-t)/h+2;break;case i:a=(t-e)/h+4}a/=6}return[a,s,l]},e.rgbToInt=u,e.intToRgb=function(t){return[t>>16&255,t>>8&255,255&t]},e.cssColorToRgb=d,e.cssColorToRgba=g,e.cssRgbToRgb=p,e.cssRgbaToRgba=f,e.parseColorToRgb=function(t){return Array.isArray(t)?t=[A(t[0],0,255),A(t[1],0,255),A(t[2],0,255)]:d(t)||p(t)},e.parseColorToRgba=m,e.cssHslToHsl=y,e.cssHslaToHsla=_,e.parseColorToHsl=function(t){return Array.isArray(t)?t=[A(t[0],0,360),A(t[1],0,100),A(t[2],0,100)]:y(t)},e.parseColorToHsla=B,e.parseColor=function(t,e){if(e=e||"rgb",null!=t){var i=void 0;if((i=m(t))||(i=B(t))&&(i=[].concat(o(h.apply(void 0,o(i))),[i[3]])))return(0,s.default)(e)?["rgb","rgbcss","rgbcss4","rgba","rgbacss","hsl","hslcss","hslcss4","hsla","hslacss","hex","hexcss4","int"].reduce((function(t,e){return t[e]=w(i,e),t}),e||{}):w(i,e.toString().toLowerCase())}},e.getLuminance=function(t,e,i){return.2126*(t=(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e=(e/=255)<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*((i/=255)<.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},e.limit=A,e.ensureArray=function(t){return t?Array.from(t):[]},e.nvl=a},function(t,e,i){
/*!
  	 * isobject <https://github.com/jonschlinkert/isobject>
  	 *
  	 * Copyright (c) 2014-2017, Jon Schlinkert.
  	 * Released under the MIT License.
  	 */
t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,e){t.exports='<div class="a-color-picker-row a-color-picker-stack a-color-picker-row-top"> <canvas class="a-color-picker-sl a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> <div class=a-color-picker-row> <div class="a-color-picker-stack a-color-picker-transparent a-color-picker-circle"> <div class=a-color-picker-preview> <input class=a-color-picker-clipbaord type=text> </div> </div> <div class=a-color-picker-column> <div class="a-color-picker-cell a-color-picker-stack"> <canvas class=a-color-picker-h></canvas> <div class=a-color-picker-dot></div> </div> <div class="a-color-picker-cell a-color-picker-alpha a-color-picker-stack" show-on-alpha> <canvas class="a-color-picker-a a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> </div> </div> <div class="a-color-picker-row a-color-picker-hsl" show-on-hsl> <label>H</label> <input nameref=H type=number maxlength=3 min=0 max=360 value=0> <label>S</label> <input nameref=S type=number maxlength=3 min=0 max=100 value=0> <label>L</label> <input nameref=L type=number maxlength=3 min=0 max=100 value=0> </div> <div class="a-color-picker-row a-color-picker-rgb" show-on-rgb> <label>R</label> <input nameref=R type=number maxlength=3 min=0 max=255 value=0> <label>G</label> <input nameref=G type=number maxlength=3 min=0 max=255 value=0> <label>B</label> <input nameref=B type=number maxlength=3 min=0 max=255 value=0> </div> <div class="a-color-picker-row a-color-picker-rgbhex a-color-picker-single-input" show-on-single-input> <label>HEX</label> <input nameref=RGBHEX type=text select-on-focus> </div> <div class="a-color-picker-row a-color-picker-palette"></div>'},function(t,e,i){var n=i(6);t.exports="string"==typeof n?n:n.toString()},function(t,e,i){(t.exports=i(7)(!1)).push([t.i,"/*!\n * a-color-picker\n * https://github.com/narsenico/a-color-picker\n *\n * Copyright (c) 2017-2018, Gianfranco Caldi.\n * Released under the MIT License.\n */.a-color-picker{background-color:#fff;padding:0;display:inline-flex;flex-direction:column;user-select:none;width:232px;font:400 10px Helvetica,Arial,sans-serif;border-radius:3px;box-shadow:0 0 0 1px rgba(0,0,0,.05),0 2px 4px rgba(0,0,0,.25)}.a-color-picker,.a-color-picker-row,.a-color-picker input{box-sizing:border-box}.a-color-picker-row{padding:15px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;user-select:none}.a-color-picker-row-top{padding:0}.a-color-picker-row:not(:first-child){border-top:1px solid #f5f5f5}.a-color-picker-column{display:flex;flex-direction:column}.a-color-picker-cell{flex:1 1 auto;margin-bottom:4px}.a-color-picker-cell:last-child{margin-bottom:0}.a-color-picker-stack{position:relative}.a-color-picker-dot{position:absolute;width:14px;height:14px;top:0;left:0;background:#fff;pointer-events:none;border-radius:50px;z-index:1000;box-shadow:0 1px 2px rgba(0,0,0,.75)}.a-color-picker-a,.a-color-picker-h,.a-color-picker-sl{cursor:cell}.a-color-picker-a+.a-color-picker-dot,.a-color-picker-h+.a-color-picker-dot{top:-2px}.a-color-picker-a,.a-color-picker-h{border-radius:2px}.a-color-picker-preview{box-sizing:border-box;width:30px;height:30px;user-select:none;border-radius:15px}.a-color-picker-circle{border-radius:50px;border:1px solid #eee}.a-color-picker-hsl,.a-color-picker-rgb,.a-color-picker-single-input{justify-content:space-evenly}.a-color-picker-hsl>label,.a-color-picker-rgb>label,.a-color-picker-single-input>label{padding:0 8px;flex:0 0 auto;color:#969696}.a-color-picker-hsl>input,.a-color-picker-rgb>input,.a-color-picker-single-input>input{text-align:center;padding:2px 0;width:0;flex:1 1 auto;border:1px solid #e0e0e0;line-height:20px}.a-color-picker-hsl>input::-webkit-inner-spin-button,.a-color-picker-rgb>input::-webkit-inner-spin-button,.a-color-picker-single-input>input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.a-color-picker-hsl>input:focus,.a-color-picker-rgb>input:focus,.a-color-picker-single-input>input:focus{border-color:#04a9f4;outline:none}.a-color-picker-transparent{background-image:linear-gradient(-45deg,#cdcdcd 25%,transparent 0),linear-gradient(45deg,#cdcdcd 25%,transparent 0),linear-gradient(-45deg,transparent 75%,#cdcdcd 0),linear-gradient(45deg,transparent 75%,#cdcdcd 0);background-size:11px 11px;background-position:0 0,0 -5.5px,-5.5px 5.5px,5.5px 0}.a-color-picker-sl{border-radius:3px 3px 0 0}.a-color-picker.hide-alpha [show-on-alpha],.a-color-picker.hide-hsl [show-on-hsl],.a-color-picker.hide-rgb [show-on-rgb],.a-color-picker.hide-single-input [show-on-single-input]{display:none}.a-color-picker-clipbaord{width:100%;height:100%;opacity:0;cursor:pointer}.a-color-picker-palette{flex-flow:wrap;flex-direction:row;justify-content:flex-start;padding:10px}.a-color-picker-palette-color{width:15px;height:15px;flex:0 1 15px;margin:3px;box-sizing:border-box;cursor:pointer;border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1)}.a-color-picker-palette-add{text-align:center;line-height:13px;color:#607d8b}.a-color-picker.hidden{display:none}",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),o=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[i].concat(o).concat([s]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(n[o]=!0)}for(s=0;s<t.length;s++){var r=t[s];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),e.push(r))}},e}}]);const DI=mh.createElement({element:"div",id:"otlb-color-picker",class:"oltb-mt-0313 oltb-mb-0313",attributes:{"acp-color":"#D7E3FA","acp-show-alpha":"yes","acp-show-rgb":"no","acp-show-hsl":"no","acp-show-hex":"yes","acp-palette":"#FFFFFF|#D7E3FA|#6397C2|#0166A5|#BCFAF4|#3CAEA3|#007C70|#FFF1C5|#FBDD83|#FBBD02|#FFDDBC|#FCBE80|#FCBE80|#F67D2C|#FDB5B4|#E96B69|#EB4542|#D3D9E6|#959DAD|#3B4352|#000000"}}),OI=PI.exports.createPicker(DI),NI=function(t,e){var i;void 0===e&&(e={});var n,s=t,o=[],r=[],A=e.overrides,a=[],l=!1;function h(){r=s.map((function(t){return Mx(t.props.triggerTarget||t.reference)})).reduce((function(t,e){return t.concat(e)}),[])}function c(){o=s.map((function(t){return t.reference}))}function u(t){s.forEach((function(e){t?e.enable():e.disable()}))}function d(t){return s.map((function(e){var i=e.setProps;return e.setProps=function(s){i(s),e.reference===n&&t.setProps(s)},function(){e.setProps=i}}))}function g(t,e){var i=r.indexOf(e);if(e!==n){n=e;var a=(A||[]).concat("content").reduce((function(t,e){return t[e]=s[i].props[e],t}),{});t.setProps(Object.assign({},a,{getReferenceClientRect:"function"==typeof a.getReferenceClientRect?a.getReferenceClientRect:function(){var t;return null==(t=o[i])?void 0:t.getBoundingClientRect()}}))}}u(!1),c(),h();var p={fn:function(){return{onDestroy:function(){u(!0)},onHidden:function(){n=null},onClickOutside:function(t){t.props.showOnCreate&&!l&&(l=!0,n=null)},onShow:function(t){t.props.showOnCreate&&!l&&(l=!0,g(t,o[0]))},onTrigger:function(t,e){g(t,e.currentTarget)}}}},f=rE(Tx(),Object.assign({},Ix(e,["overrides"]),{plugins:[p].concat(e.plugins||[]),triggerTarget:r,popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((null==(i=e.popperOptions)?void 0:i.modifiers)||[],[AE])})})),m=f.show;f.show=function(t){if(m(),!n&&null==t)return g(f,o[0]);if(!n||null!=t){if("number"==typeof t)return o[t]&&g(f,o[t]);if(s.indexOf(t)>=0){var e=t.reference;return g(f,e)}return o.indexOf(t)>=0?g(f,t):void 0}},f.showNext=function(){var t=o[0];if(!n)return f.show(0);var e=o.indexOf(n);f.show(o[e+1]||t)},f.showPrevious=function(){var t=o[o.length-1];if(!n)return f.show(t);var e=o.indexOf(n),i=o[e-1]||t;f.show(i)};var y=f.setProps;return f.setProps=function(t){A=t.overrides||A,y(t)},f.setInstances=function(t){u(!0),a.forEach((function(t){return t()})),s=t,u(!1),c(),h(),a=d(f),f.setProps({triggerTarget:r})},a=d(f),f}([],{placement:"right",appendTo:fh,offset:[0,12],theme:"oltb"});lE(fh,{content(t){const e=t.getAttribute("title");return t.removeAttribute("title"),e},target:".oltb-tippy",placement:"top",appendTo:fh,theme:"oltb oltb-themed",delay:[600,100]}),lE(fh,{target:".oltb-color-tippy",placement:"left",offset:[0,25],trigger:"click",appendTo:fh,theme:"oltb oltb-inverted-themed",interactive:!0,allowHTML:!0,onShow(t){!function(t){t.setProps({placement:window.innerWidth<=zh.deviceWidth.sm||RI()?"bottom":"left"});const e=t.reference.getAttribute("data-oltb-color-target"),i=document.querySelector(e);t.setContent(DI),OI.setColor(t.reference.getAttribute("data-oltb-color")),OI.on(ah.Change,((e,n)=>{n=PI.exports.parseColor(n,"hexcss4"),i.setAttribute("data-oltb-color",n),i.firstElementChild.style.backgroundColor=n,M_([t.reference],hh.ColorChange)}))}(t)},onHide(t){OI.off(ah.Change)},onHidden(t){t.setContent(null)}});const HI=function(t){NI.setProps({placement:window.innerWidth<=zh.deviceWidth.sm||RI()?"bottom":"right"})};window.addEventListener(hh.ToolbarDirectionChange,HI),window.addEventListener(ah.Resize,HI),window.addEventListener(ah.DOMContentLoaded,(function(t){NI.setInstances(rE(".oltb-tool-button")),HI()}));const GI="direction",KI={};const VI={title:"Modal title",content:"Modal content"};class WI extends Fh{constructor(t={}){super(t.title||VI.title,t.onClose),this.options={...VI,...t},this.modalContent=ph.createElement({element:"div",class:"oltb-modal__content"}),this.setContent(this.options.content),this.show(this.modalContent)}setContent(t){"string"==typeof t?this.modalContent.innerHTML=t:this.modalContent.appendChild(t)}}class zI{static create(t){return new WI(t)}}const XI={title:"Hey!",content:"This is the default content, try adding some content of your own."};const YI={};const qI={url:"https://github.com/qulle/oltb",target:"_blank"};class jI extends Fh{constructor(t={}){super("Settings",t.onClose);const e=ph.createElement({element:"div",class:"oltb-modal__content"});S_.getSettings().forEach(((t,i)=>{const n=ph.createElement({element:"div",class:"oltb-checkbox-wrapper"}),s=ph.createElement({element:"label",text:t.text,class:"oltb-checkbox-wrapper__title oltb-label--inline oltb-m-0",attributes:{for:i}}),o=ph.createElement({element:"input",id:i,class:"oltb-checkbox-wrapper__checkbox",attributes:{type:"checkbox"},listeners:{click:()=>S_.setSetting(i,o.checked)}});t.state&&o.setAttribute("checked",""),ph.appendChildren(n,[o,s]),e.appendChild(n)})),this.show(e)}}const JI={};class ZI extends Fh{constructor(t={}){super("Debug information",t.onClose);const e=ph.createElement({element:"textarea",value:JSON.stringify(t.information,void 0,4),class:"oltb-input oltb-thin-scrollbars",attributes:{rows:15,cols:100,spellcheck:"false"}}),i=ph.createElement({element:"button",text:"Copy debug info",class:"oltb-btn oltb-btn--green-mid oltb-mt-1",attributes:{type:"button"},listeners:{click:async()=>{bI(e.value).then((()=>{rc.success({text:"Debug info copied to clipboard",autoremove:4e3})})).catch((()=>{rc.error({text:"Failed to copy debug info"})}))}}}),n=ph.createElement({element:"button",text:"Log map object",class:"oltb-btn oltb-btn--green-mid oltb-mt-1 oltb-ml-0625",attributes:{type:"button"},listeners:{click:()=>{console.log(t.map),rc.success({text:"Map object logged to console (F12)",autoremove:4e3})}}}),s=ph.createElement({element:"div"});ph.appendChildren(s,[i,n]);const o=ph.createElement({element:"div",class:"oltb-modal__content oltb-flex-content-center"});ph.appendChildren(o,[e,s]),this.show(o)}}class $I{static assign(t){window.location.assign(t)}static init(t){}static replaceParameter(t){history.replaceState(null,null,"?"+t.toString())}static getParameters(){const t=decodeURI(window.location.search);return new URLSearchParams(t)}static getParameter(t){return(this.getParameters().get(t)||"").toLowerCase()}static setParameter(t,e){const i=this.getParameters();i.set(t,e),this.replaceParameter(i)}static deleteParameter(t){const e=this.getParameters();e.delete(t),this.replaceParameter(e)}}const tM=[{code:"3857",name:"WGS 84 / Pseudo-Mercator",proj4def:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs",bbox:"85.06,-180,-85.06,180"},{code:"4326",name:"WGS 84",proj4def:"+proj=longlat +datum=WGS84 +no_defs +type=crs",bbox:"90,-180,-90,180"},{code:"7789",name:"ITRF2014",proj4def:"+proj=geocent +ellps=GRS80 +units=m +no_defs +type=crs",bbox:"90,-180,-90,180"},{code:"3006",name:"SWEREF99 TM",proj4def:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs",bbox:"69.07,10.03,54.96,24.17"}],eM={showWhenGetParameter:!1};const iM=[{name:"HiddenMarkerTool",tool:class extends Ol{constructor(t={}){super({element:Bh}),this.options={...tc,...t};const e=bh({path:vh.Plus});Jh(Zh,{icon:e,name:"Create marker",fn:this.onContextMenuCreateMarker.bind(this)}),Jh(Zh,{}),window.addEventListener(hh.FeatureEdited,this.onWindowFeatureEdited.bind(this)),window.addEventListener(hh.FeatureRemoved,this.onWindowFeatureRemoved.bind(this))}onContextMenuCreateMarker(t,e,i){new Mh({coordinates:e},(t=>{const e=Re([t.longitude,t.latitude]),i=`\n                <h3 class="oltb-text-center">${t.name}</h3>\n                <p class="oltb-text-center">${t.info}</p>\n                <p class="oltb-text-center">${e}</p>\n                <div class="oltb-d-flex oltb-justify-content-center">\n                    <button class="oltb-func-btn oltb-func-btn--delete oltb-tippy" title="Delete marker" id="${$h}-marker-remove"></button>\n                    <button class="oltb-func-btn oltb-func-btn--copy oltb-tippy" title="Copy marker text" id="${$h}-marker-copy-location" data-copy="${t.name} ${t.info}"></button>\n                    <button class="oltb-func-btn oltb-func-btn--edit oltb-tippy" title="Edit marker" id="${$h}-marker-edit"></button>\n                </div>\n            `,n=bh({path:vh[t.icon],width:20,height:20,fill:"rgb(255, 255, 255)",stroke:"none"}),s=new Wh({name:t.name,info:t.info,lat:t.latitude,lon:t.longitude,iconName:t.icon,icon:n,backgroundColor:t.backgroundColor,color:t.color,notSelectable:!0,infoWindow:i});gh.getActiveFeatureLayer({fallback:"Markers"}).layer.getSource().addFeature(s),"function"==typeof this.options.added&&this.options.added(s)}))}onWindowFeatureEdited(t){"function"==typeof this.options.edited&&this.options.edited(t.detail.before,t.detail.after)}onWindowFeatureRemoved(t){"function"==typeof this.options.removed&&this.options.removed(t.detail.feature)}}},{name:"HiddenMapNavigationTool",tool:class extends Ol{constructor(t={}){super({element:Bh}),this.options={...nc,...t};const e=JSON.parse(_h.getStateObject(ec))||{};this.localStorage={...ic,...e};const i=bh({path:vh.MoveCenter}),n=bh({path:vh.FocusHere});Jh(Zh,{icon:i,name:"Center map here",fn:this.onContextMenuCenterMap.bind(this)}),Jh(Zh,{icon:n,name:"Focus here",fn:this.onContextMenuFocusHere.bind(this)}),Jh(Zh,{}),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onDOMContentLoaded(t){const e=this.getMap();e&&e.on(lh.MoveEnd,this.onMoveEnd.bind(this))}onContextMenuCenterMap(t,e,i){const n=t.getView();n.getAnimating()&&n.cancelAnimations(),n.animate({center:ii(e),duration:zh.animationDuration.normal,easing:at})}onContextMenuFocusHere(t,e,i){const n=t.getView();n.getAnimating()&&n.cancelAnimations(),n.animate({center:ii(e),zoom:this.options.focusZoom,duration:zh.animationDuration.normal,easing:at})}onMoveEnd(t){const e=this.getMap().getView(),i=function(t,e){const i=ri(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=ve(n+180,360)-180),i}(e.getCenter());this.localStorage.lon=i[0],this.localStorage.lat=i[1],this.localStorage.zoom=e.getZoom(),this.localStorage.rotation=e.getRotation(),_h.updateStateObject(ec,JSON.stringify(this.localStorage))}}},{name:"HomeTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Home,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Zoom home (${pc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...kc,...t},this.homeLocation=ii([this.options.lon,this.options.lat]),this.homeZoom=this.options.zoom,this.userDefinedHomeLocation=null,this.userDefinedHomeZoom=null,Jh(Zh,{icon:e,name:"Set as home",fn:this.onContextMenuSetHomeLocation.bind(this)}),window.addEventListener(hh.SettingsCleared,this.onWindowClearHomeLocation.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,pc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){const t=this.getMap().getView();t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:this.userDefinedHomeZoom?this.userDefinedHomeZoom:this.homeZoom,center:this.userDefinedHomeLocation?this.userDefinedHomeLocation:this.homeLocation,duration:zh.animationDuration.normal,easing:at}),setTimeout((()=>{"function"==typeof this.options.home&&this.options.home()}),zh.animationDuration.normal)}onWindowClearHomeLocation(){this.userDefinedHomeLocation=null,this.userDefinedHomeZoom=null}onContextMenuSetHomeLocation(){const t=this.getMap().getView();this.userDefinedHomeZoom=t.getZoom(),this.userDefinedHomeLocation=t.getCenter(),rc.success({text:"Home location successfully set"})}}},{name:"ZoomInTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.ZoomIn,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Zoom in (${vc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...Rc,...t},this.delta=1,window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,vc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){const t=this.getMap().getView(),e=t.getZoom(),i=t.getConstrainedZoom(e+this.delta);t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:i,duration:zh.animationDuration.normal,easing:at}),setTimeout((()=>{"function"==typeof this.options.zoomed&&this.options.zoomed()}),zh.animationDuration.normal)}}},{name:"ZoomOutTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.ZoomOut,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Zoom out (${Mc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...Pc,...t},this.delta=-1,window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Mc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){const t=this.getMap().getView(),e=t.getZoom(),i=t.getConstrainedZoom(e+this.delta);t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:i,duration:zh.animationDuration.normal,easing:at}),setTimeout((()=>{"function"==typeof this.options.zoomed&&this.options.zoomed()}),zh.animationDuration.normal)}}},{name:"FullscreenTool",tool:class extends Ol{constructor(t={}){super({element:Bh}),this.enterFullscreenIcon=bh({path:vh.EnterFullScreen,class:"oltb-tool-button__icon"}),this.exitFullscreenIcon=bh({path:vh.ExitFullScreen,class:"oltb-tool-button__icon"});const e=ph.createElement({element:"button",html:Hc()?this.exitFullscreenIcon:this.enterFullscreenIcon,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":(Hc()?"Exit fullscreen":"Enter fullscreen")+` (${dc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(e),this.button=e,this.active=!1,this.options={...Vc,...t},document.addEventListener(ah.FullScreenChange,this.onFullScreenChange.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,dc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){if(function(){const t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}())if(Hc())Kc();else{let t=this.getMap().getTargetElement();this.keys?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():Gc(t)}(t):Gc(t)}else rc.info({text:"Fullscreen is not supported"})}onFullScreenChange(t){document.fullscreenElement?(this.button._tippy.setContent(`Exit fullscreen (${dc})`),"function"==typeof this.options.enter&&this.options.enter(t)):(this.button._tippy.setContent(`Enter fullscreen (${dc})`),"function"==typeof this.options.leave&&this.options.leave(t))}handleFullScreenChange(){Hc()?(this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.exitFullscreenIcon),this.dispatchEvent(Oc)):(this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.enterFullscreenIcon),this.dispatchEvent(Nc)),this.getMap().updateSize(),this.active=!this.active,this.button.classList.toggle("oltb-tool-button--active")}setMap(t){super.setMap(t);for(let t=0,e=Dc.length;t<e;++t)this.listenerKeys.push(j(document,Dc[t],this.handleFullScreenChange,this))}}},{name:"ExportPNGTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Export,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Export PNG (${uc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...f_,...t},window.addEventListener(ah.DOMContentLoaded,this.onWindowLoaded.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,uc)&&this.handleClick(t)}onWindowLoaded(){const t=fh.querySelector(".ol-attribution");t&&t.setAttribute("data-html2canvas-ignore","true")}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){const t=this.getMap();t.once(lh.RenderComplete,this.onRenderComplete.bind(this)),t.renderSync()}async onRenderComplete(){try{const i=this.getMap().getSize(),n=ph.createElement({element:"canvas",attributes:{width:i[0],height:i[1]}}),s=n.getContext("2d"),o=fh.querySelector(".ol-layer canvas"),r=o.parentNode.style.opacity;s.globalAlpha=""===r?1:Number(r);const A=o.style.transform.match(/^matrix\(([^\(]*)\)$/)[1].split(",").map(Number);CanvasRenderingContext2D.prototype.setTransform.apply(s,A),s.drawImage(o,0,0);const a=fh.querySelector(".ol-overlaycontainer-stopevent"),l=await(t=a,e={backgroundColor:null,logging:!1},void 0===e&&(e={}),u_(t,e));s.drawImage(l,0,0),this.downloadCanvas(n)}catch(t){console.error(`Error exporting PNG [${t}]`),rc.error({text:"Could not export the PNG"})}var t,e}downloadCanvas(t){navigator.msSaveBlob?navigator.msSaveBlob(t.msToBlob(),m_):g_(m_,t.toDataURL()),"function"==typeof this.options.exported&&this.options.exported()}}},{name:"DrawTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Pen,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Draw (${bc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.intersectedFeatures=[],this.options={...Q_,...t};const n=JSON.parse(_h.getStateObject(L_))||{};this.localStorage={...U_,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="oltb-draw-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-draw-toolbox-collapsed">\n                        Draw tool\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-draw-toolbox-collapsed" style="display: ${this.localStorage.collapsed?"none":"block"}">\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-draw-type">Shape</label>\n                        <select id="oltb-draw-type" class="oltb-select">\n                            <option value="Circle">Circle</option>\n                            <option value="Square">Square</option>\n                            <option value="Rectangle">Rectangle</option>\n                            <option value="LineString">Line</option>\n                            <option value="Point">Point</option>\n                            <option value="Polygon">Polygon</option>\n                        </select>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-draw-intersection-enable">Intersection</label>\n                        <select id="oltb-draw-intersection-enable" class="oltb-select">\n                            <option value="false" selected>False</option>\n                            <option value="true">True</option>\n                        </select>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-draw-stroke-width">Stroke width</label>\n                        <select id="oltb-draw-stroke-width" class="oltb-select">\n                            <option value="1">1</option>\n                            <option value="1.25">1.25</option>\n                            <option value="1.5">1.5</option>\n                            <option value="2">2</option>\n                            <option value="2.5">2.5</option>\n                            <option value="3">3</option>\n                            <option value="4">4</option>\n                            <option value="5">5</option>\n                            <option value="6">6</option>\n                            <option value="7">7</option>\n                            <option value="8">8</option>\n                            <option value="9">9</option>\n                            <option value="10">10</option>\n                        </select>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-draw-stroke-color">Stroke color</label>\n                        <div id="oltb-draw-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#oltb-draw-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">\n                            <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>\n                        </div>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-draw-fill-color">Fill color</label>\n                        <div id="oltb-draw-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#oltb-draw-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">\n                            <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `),this.drawToolbox=document.querySelector("#oltb-draw-toolbox");this.drawToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))})),this.toolType=this.drawToolbox.querySelector("#oltb-draw-type"),this.toolType.addEventListener(ah.Change,this.updateTool.bind(this)),this.intersectionEnable=this.drawToolbox.querySelector("#oltb-draw-intersection-enable"),this.intersectionEnable.addEventListener(ah.Change,this.updateTool.bind(this)),this.fillColor=this.drawToolbox.querySelector("#oltb-draw-fill-color"),this.fillColor.addEventListener(hh.ColorChange,this.updateTool.bind(this)),this.strokeWidth=this.drawToolbox.querySelector("#oltb-draw-stroke-width"),this.strokeWidth.addEventListener(ah.Change,this.updateTool.bind(this)),this.strokeColor=this.drawToolbox.querySelector("#oltb-draw-stroke-color"),this.strokeColor.addEventListener(hh.ColorChange,this.updateTool.bind(this)),this.toolType.selectedIndex=this.localStorage.toolTypeIndex,this.strokeWidth.selectedIndex=this.localStorage.strokeWidthIndex,window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowSettingsCleared.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage.collapsed=t,_h.updateStateObject(L_,JSON.stringify(this.localStorage))}))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}isIntersectionEnabled(){return"true"===this.intersectionEnable.value.toLowerCase()}onWindowKeyUp(t){const e=t.key.toLowerCase();"escape"===e?this.interaction&&this.interaction.abortDrawing():t.ctrlKey&&"z"===e?this.interaction&&this.interaction.removeLastPoint():Ac(t,bc)&&this.handleClick(t)}onWindowSettingsCleared(){this.localStorage={...U_},this.fillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.fillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.strokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.strokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor,this.active&&this.updateTool()}updateTool(){this.localStorage.toolTypeIndex=this.toolType.selectedIndex,this.localStorage.strokeWidthIndex=this.strokeWidth.selectedIndex,this.localStorage.fillColor=this.fillColor.getAttribute("data-oltb-color"),this.localStorage.strokeColor=this.strokeColor.getAttribute("data-oltb-color"),_h.updateStateObject(L_,JSON.stringify(this.localStorage)),"LineString"===this.toolType.value||"Point"===this.toolType.value?(this.intersectionEnable.selectedIndex=0,this.intersectionEnable.disabled=!0):this.intersectionEnable.disabled=!1,this.selectDraw(this.toolType.value,this.strokeWidth.value,this.fillColor.getAttribute("data-oltb-color"),this.strokeColor.getAttribute("data-oltb-color"))}deSelect(){this.deActivateTool()}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.active=!0,this.drawToolbox.classList.add("oltb-toolbox-section--show"),this.button.classList.add("oltb-tool-button--active"),I_.setActiveTool(this),S_.getSetting(__)&&gh.addFeatureLayer("Drawing layer"),M_([this.toolType],ah.Change),this.localStorage.active=!0,_h.updateStateObject(L_,JSON.stringify(this.localStorage))}deActivateTool(){this.active=!1,this.drawToolbox.classList.remove("oltb-toolbox-section--show"),this.button.classList.remove("oltb-tool-button--active"),this.getMap().removeInteraction(this.interaction),this.interaction=void 0,I_.removeActiveTool(),this.localStorage.active=!1,_h.updateStateObject(L_,JSON.stringify(this.localStorage))}selectDraw(t,e,i,n){const s=this.getMap();this.interaction&&s.removeInteraction(this.interaction),this.style=new No({image:new Mo({fill:new Uo({color:i}),stroke:new To({color:n,width:e}),radius:5}),fill:new Uo({color:i}),stroke:new To({color:n,width:e})});let o=null;"Square"===t?(o=SA(4),t="Circle"):"Rectangle"===t?(o=function(t,e,i){const n=Ot([t[0],t[t.length-1]].map((function(t){return ai(t)}))),s=[[oe(n),re(n),ge(n),de(n),oe(n)]];return e?e.setCoordinates(s):e=new cn(s),e},t="Circle"):"Circle"===t&&(o=SA(32)),this.interaction=new IA({type:t,style:this.style,stopClick:!0,geometryFunction:o}),s.addInteraction(this.interaction),this.interaction.on(lh.DrawStart,this.onDrawStart.bind(this)),this.interaction.on(lh.DrawEnd,this.onDrawEnd.bind(this)),this.interaction.on(lh.DrawAbort,this.onDrawAbort.bind(this)),this.interaction.on(lh.Error,this.onDrawError.bind(this))}onDrawStart(t){"function"==typeof this.options.start&&this.options.start(t)}onDrawEnd(t){const e=gh.getActiveFeatureLayer({fallback:"Drawing layer"}),i=e.layer.getSource();this.isIntersectionEnabled()?this.onDrawEndIntersection(i,t):this.onDrawEndNormal(i,t),e.layer.getVisible()||rc.info({text:"You are drawing in a hidden layer",autoremove:4e3})}onDrawEndNormal(t,e){const i=e.feature;i.setStyle(this.style),i.setProperties({oltb:{type:ch.drawing}}),t.addFeature(i),"function"==typeof this.options.end&&this.options.end(e)}onDrawEndIntersection(t,e){const i=e.feature.getGeometry();t.forEachFeatureIntersectingExtent(i.getExtent(),(t=>{const e=t.getProperties()?.oltb?.type;(function(t,e){return t!==ch.marker&&t!==ch.measurement&&t!==ch.windbarb&&t!==ch.layer&&"LineString"!==e.getType()&&"Point"!==e.getType()})(e,t.getGeometry())&&this.intersectedFeatures.push(t)})),this.intersectedFeatures.forEach((t=>{const e=t.getGeometry().getCoordinates(),n=new cn(e.slice(0,e.length)),s=new Xi(i.getCoordinates()[0]);n.appendLinearRing(s),t.setGeometry(n)})),0===this.intersectedFeatures.length&&rc.info({text:"No intersecting objects found",autoremove:4e3}),"function"==typeof this.options.intersected&&this.options.intersected(e,this.intersectedFeatures),this.intersectedFeatures=[]}onDrawAbort(t){"function"==typeof this.options.abort&&this.options.abort(t)}onDrawError(t){"function"==typeof this.options.error&&this.options.error(t)}}},{name:"MeasureTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Measure,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Measure (${Bc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...G_,...t};const n=JSON.parse(_h.getStateObject(N_))||{};this.localStorage={...H_,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="oltb-measure-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-measure-toolbox-collapsed">\n                        Measure tool\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-measure-toolbox-collapsed" style="display: ${this.localStorage.collapsed?"none":"block"}">\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-measure-type">Type</label>\n                        <select id="oltb-measure-type" class="oltb-select">\n                            <option value="LineString">Length</option>\n                            <option value="Polygon">Area</option>\n                        </select>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-measure-stroke-color">Stroke color</label>\n                        <div id="oltb-measure-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#oltb-measure-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">\n                            <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>\n                        </div>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-measure-fill-color">Fill color</label>\n                        <div id="oltb-measure-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#oltb-measure-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">\n                            <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `),this.measureToolbox=document.querySelector("#oltb-measure-toolbox");this.measureToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))})),this.toolType=this.measureToolbox.querySelector("#oltb-measure-type"),this.toolType.addEventListener(ah.Change,this.updateTool.bind(this)),this.fillColor=this.measureToolbox.querySelector("#oltb-measure-fill-color"),this.fillColor.addEventListener(hh.ColorChange,this.updateTool.bind(this)),this.strokeColor=this.measureToolbox.querySelector("#oltb-measure-stroke-color"),this.strokeColor.addEventListener(hh.ColorChange,this.updateTool.bind(this)),this.toolType.selectedIndex=this.localStorage.toolTypeIndex,window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowSettingsCleared.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage.collapsed=t,_h.updateStateObject(N_,JSON.stringify(this.localStorage))}))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){const e=t.key.toLowerCase();"escape"===e?this.interaction&&this.interaction.abortDrawing():t.ctrlKey&&"z"===e?this.interaction&&this.interaction.removeLastPoint():Ac(t,Bc)&&this.handleClick(t)}onWindowSettingsCleared(){this.localStorage={...H_},this.fillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.fillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.strokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.strokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor,this.active&&this.updateTool()}updateTool(){this.localStorage.toolTypeIndex=this.toolType.selectedIndex,this.localStorage.fillColor=this.fillColor.getAttribute("data-oltb-color"),this.localStorage.strokeColor=this.strokeColor.getAttribute("data-oltb-color"),_h.updateStateObject(N_,JSON.stringify(this.localStorage)),this.selectMeasure(this.toolType.value,this.fillColor.getAttribute("data-oltb-color"),this.strokeColor.getAttribute("data-oltb-color"))}deSelect(){this.deActivateTool()}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.active=!0,this.measureToolbox.classList.add("oltb-toolbox-section--show"),this.button.classList.add("oltb-tool-button--active"),I_.setActiveTool(this),S_.getSetting(__)&&gh.addFeatureLayer("Measurements layer"),M_([this.toolType],ah.Change),this.localStorage.active=!0,_h.updateStateObject(N_,JSON.stringify(this.localStorage))}deActivateTool(){this.active=!1,this.measureToolbox.classList.remove("oltb-toolbox-section--show"),this.button.classList.remove("oltb-tool-button--active"),this.getMap().removeInteraction(this.interaction),this.interaction=void 0,I_.removeActiveTool(),this.localStorage.active=!1,_h.updateStateObject(N_,JSON.stringify(this.localStorage))}selectMeasure(t,e,i){const n=this.getMap();this.interaction&&n.removeInteraction(this.interaction),this.styles=[new No({image:new Mo({fill:new Uo({color:e}),stroke:new To({color:i,width:2}),radius:5}),fill:new Uo({color:e}),stroke:new To({color:i,lineDash:[2,5],width:2.5})})],this.interaction=new IA({type:t,stopClick:!0,style:this.styles}),n.addInteraction(this.interaction),this.interaction.on(lh.DrawStart,this.onDrawStart.bind(this)),this.interaction.on(lh.DrawEnd,this.onDrawEnd.bind(this)),this.interaction.on(lh.DrawAbort,this.onDrawAbort.bind(this)),this.interaction.on(lh.Error,this.onDrawEnd.bind(this))}onDrawStart(t){const e=t.feature,i=T_.push("measure");this.onChangeListener=e.getGeometry().on(lh.Change,(t=>{i.innerHTML=k_(t.target)})),"function"==typeof this.options.start&&this.options.start(t)}onDrawEnd(t){tt(this.onChangeListener);const e=this.getMap(),i=t.feature;i.setStyle(this.styles),T_.pop("measure");const n=O_();i.setProperties({oltb:{type:ch.measurement,tooltip:n.getOverlay()}});const s=i.getGeometry();n.setPosition(R_(s)),n.setData(k_(s));const o=gh.getActiveFeatureLayer({fallback:"Measurements layer"});o.layer.getSource().addFeature(i),o.layer.getVisible()||rc.info({text:"You are measuring in a hidden layer",autoremove:4e3}),e.addOverlay(n.getOverlay()),o.layer.getVisible()?n.getOverlay().setMap(e):n.getOverlay().setMap(null),"function"==typeof this.options.end&&this.options.end(t)}onDrawAbort(t){tt(this.onChangeListener),T_.pop("measure"),"function"==typeof this.options.abort&&this.options.abort(t)}onDrawError(t){"function"==typeof this.options.error&&this.options.error(t)}}},{name:"EditTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Edit,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Edit (${Ic})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.lastStyle=void 0,this.options={...ev,...t},this.parser=new vw,this.parser.inject(qi,Pn,Xi,cn,Kn,Hn,Wn,Un);const n=JSON.parse(_h.getStateObject($b))||{};this.localStorage={...tv,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="oltb-edit-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-edit-toolbox-collapsed">\n                        Edit tool\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-edit-toolbox-collapsed" style="display: ${this.localStorage.collapsed?"none":"block"}">\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label">Misc</label>\n                        <button type="button" id="oltb-edit-delete-selected-btn" class="oltb-btn oltb-btn--blue-mid oltb-tippy" title="Delete">\n                            ${bh({...iv,path:vh.Trash})}\n                        </button>\n                    </div>\n                    <div class="oltb-toolbox-section__group oltb-toolbox-section__group--sub-toolbar">\n                        <label class="oltb-label">Shapes</label>\n                        <button type="button" id="oltb-edit-union-selected-btn" class="oltb-btn oltb-btn--blue-mid oltb-tippy" title="Union">\n                            ${bh({...iv,path:vh.Union})}\n                        </button>\n                        <button type="button" id="oltb-edit-intersect-selected-btn" class="oltb-btn oltb-btn--blue-mid oltb-tippy" title="Intersect">\n                            ${bh({...iv,path:vh.Intersect})}\n                        </button>\n                        <button type="button" id="oltb-edit-exclude-selected-btn" class="oltb-btn oltb-btn--blue-mid oltb-tippy" title="Exclude">\n                            ${bh({...iv,path:vh.Exclude})}\n                        </button>\n                        <button type="button" id="oltb-edit-difference-selected-btn" class="oltb-btn oltb-btn--blue-mid oltb-tippy" title="Difference">\n                            ${bh({...iv,path:vh.Difference})}\n                        </button>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-edit-stroke-color">Stroke color</label>\n                        <div id="oltb-edit-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#oltb-edit-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">\n                            <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>\n                        </div>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="oltb-edit-fill-color">Fill color</label>\n                        <div id="oltb-edit-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#oltb-edit-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">\n                            <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `),this.editToolbox=document.querySelector("#oltb-edit-toolbox"),this.deleteSelectedButton=this.editToolbox.querySelector("#oltb-edit-delete-selected-btn"),this.deleteSelectedButton.addEventListener(ah.Click,this.onDeleteSelectedFeatures.bind(this)),this.unionSelectedButton=this.editToolbox.querySelector("#oltb-edit-union-selected-btn"),this.unionSelectedButton.addEventListener(ah.Click,this.onShapeOperator.bind(this,this.unionFeatures,"union")),this.intersectSelectedButton=this.editToolbox.querySelector("#oltb-edit-intersect-selected-btn"),this.intersectSelectedButton.addEventListener(ah.Click,this.onShapeOperator.bind(this,this.intersectFeatures,"intersect")),this.excludeSelectedButton=this.editToolbox.querySelector("#oltb-edit-exclude-selected-btn"),this.excludeSelectedButton.addEventListener(ah.Click,this.onShapeOperator.bind(this,this.excludeFeatures,"exclude")),this.differenceSelectedButton=this.editToolbox.querySelector("#oltb-edit-difference-selected-btn"),this.differenceSelectedButton.addEventListener(ah.Click,this.onShapeOperator.bind(this,this.differenceFeatures,"difference")),this.fillColor=this.editToolbox.querySelector("#oltb-edit-fill-color"),this.fillColor.addEventListener(hh.ColorChange,this.onFeatureColorChange.bind(this)),this.strokeColor=this.editToolbox.querySelector("#oltb-edit-stroke-color"),this.strokeColor.addEventListener(hh.ColorChange,this.onFeatureColorChange.bind(this));this.editToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))})),this.select=new sa({hitTolerance:this.options.hitTolerance,filter:function(t,e){const i=!Ah(t.getProperties(),dh),n=gh.getFeatureLayers().find((e=>e.layer.getSource().hasFeature(t)));return i&&(n||S_.getSetting(x_))},style:this.lastStyle}),this.modify=new jA({features:this.select.getFeatures(),condition:function(t){return N(t)}}),this.translate=new la({features:this.select.getFeatures()}),this.select.getFeatures().on(lh.Add,this.onSelectFeatureAdd.bind(this)),this.select.getFeatures().on(lh.Remove,this.onSelectFeatureRemove.bind(this)),this.modify.addEventListener(lh.ModifyStart,this.onModifyStart.bind(this)),this.modify.addEventListener(lh.ModifyEnd,this.onModifyEnd.bind(this)),this.translate.addEventListener(lh.TranslateStart,this.onTranslateStart.bind(this)),this.translate.addEventListener(lh.TranslateEnd,this.onTranslateEnd.bind(this)),window.addEventListener(hh.FeatureLayerRemoved,this.onWindowFeatureLayerRemoved.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowSettingsCleared.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onSelectFeatureAdd(t){"function"==typeof this.options.selectadd&&this.options.selectadd(t)}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onSelectFeatureRemove(t){const e=t.element;setTimeout((()=>{if(this.colorHasChanged){if(e.setStyle(this.lastStyle),Z_(e.getProperties(),"type")===ch.measurement){const t=new No({fill:new Uo({color:this.lastStyle.getFill().getColor()}),stroke:new To({color:this.lastStyle.getStroke().getColor(),width:this.lastStyle.getStroke().getWidth(),lineDash:[2,5]})});e.setStyle(t)}"function"==typeof this.options.styleChange&&this.options.styleChange(t,this.lastStyle),0===t.index&&(this.colorHasChanged=!1)}})),"function"==typeof this.options.selectremove&&this.options.selectremove(t)}onModifyStart(t){t.features.forEach((t=>{Ah(t.getProperties(),uh)&&this.attachOnChange(t)})),"function"==typeof this.options.modifystart&&this.options.modifystart(t)}onModifyEnd(t){t.features.forEach((t=>{Ah(t.getProperties(),uh)&&this.detachOnChange(t)})),"function"==typeof this.options.modifyend&&this.options.modifyend(t)}onTranslateStart(t){t.features.forEach((t=>{Ah(t.getProperties(),uh)&&this.attachOnChange(t)})),"function"==typeof this.options.translatestart&&this.options.translatestart(t)}onTranslateEnd(t){t.features.forEach((t=>{Ah(t.getProperties(),uh)&&this.detachOnChange(t)})),"function"==typeof this.options.translateend&&this.options.translateend(t)}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage.collapsed=t,_h.updateStateObject($b,JSON.stringify(this.localStorage))}))}onWindowKeyUp(t){Ac(t,Ic)?this.handleClick(t):"delete"===t.key.toLowerCase()&&this.active&&this.onDeleteSelectedFeatures()}onWindowSettingsCleared(){this.localStorage={...tv},this.fillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.fillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.strokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.strokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}onDeleteSelectedFeatures(){const t=this.select.getFeatures().getArray().length;0!==t?j_.confirm({text:`Delete ${t} selected feature${t>1?"s":""}?`,onConfirm:()=>{const t=[...this.select.getFeatures().getArray()];this.deleteFeatures(t)}}):rc.info({text:"No features selected to delete",autoremove:4e3})}deleteFeatures(t){const e=gh.getFeatureLayers();t.forEach((t=>{e.forEach((e=>{const i=e.layer.getSource();i.hasFeature(t)&&(i.removeFeature(t),this.select.getFeatures().remove(t),Ah(t.getProperties(),uh)&&this.getMap().removeOverlay(t.getProperties().oltb.tooltip),"function"==typeof this.options.removedfeature&&this.options.removedfeature(t))}))}))}onFeatureColorChange(t){this.colorHasChanged=!0;const e=this.fillColor.getAttribute("data-oltb-color"),i=this.strokeColor.getAttribute("data-oltb-color"),n=[...this.select.getFeatures().getArray()];this.lastStyle=new No({fill:new Uo({color:e}),stroke:new To({color:i,width:2.5})}),n.forEach((t=>{t.setStyle(this.lastStyle)})),this.localStorage.fillColor=this.lastStyle.getFill().getColor(),this.localStorage.strokeColor=this.lastStyle.getStroke().getColor(),_h.updateStateObject($b,JSON.stringify(this.localStorage))}onShapeOperator(t,e){const i=[...this.select.getFeatures().getArray()];if(2===i.length)try{const n=i[0],s=i[1],o=this.parser.read(n.getGeometry()),r=t(o,this.parser.read(s.getGeometry())),A=new In({geometry:new cn(this.parser.write(r).getCoordinates())});if(Z_(n.getProperties(),"type")===ch.measurement||Z_(s.getProperties(),"type")===ch.measurement){const t=O_();A.setProperties({oltb:{type:ch.measurement,tooltip:t.getOverlay()}});const e=A.getGeometry();t.setPosition(R_(e)),t.setData(k_(e)),this.getMap().addOverlay(t.getOverlay()),A.setStyle(sv)}else A.setStyle(nv);const a=gh.getActiveFeatureLayer();a.layer.getSource().addFeature(A),this.deleteFeatures(i),"function"==typeof this.options.shapeOperation&&this.options.shapeOperation(e,n,s,A)}catch(t){const e="Could not perform shape operation";console.error(`${e} [${t}]`),rc.error({text:e}),"function"==typeof this.options.error&&this.options.error(t)}else rc.info({text:"Two overlapping features must be selected",autoremove:4e3})}unionFeatures(t,e){return Zb.union(t,e)}intersectFeatures(t,e){return Zb.intersection(t,e)}excludeFeatures(t,e){return Zb.symDifference(t,e)}differenceFeatures(t,e){return Zb.difference(t,e)}onWindowFeatureLayerRemoved(t){this.select.getFeatures().clear()}attachOnChange(t){const e=this.select.getFeatures().getArray(),i=!T_.isEmpty();i&&1===e.length&&(this.tooltipItem=T_.push("edit"));const n=t.getProperties(),s=i&&1===e.length;n.oltb.tooltip.getElement().className="oltb-overlay-tooltip "+(s?"oltb-overlay-tooltip--hidden":""),n.oltb.onChangeListener=t.getGeometry().on(lh.Change,this.onFeatureChange.bind(this,t))}detachOnChange(t){const e=this.select.getFeatures().getArray();!T_.isEmpty()&&1===e.length&&T_.pop("edit");const i=t.getProperties(),n=t.getGeometry();tt(i.oltb.onChangeListener);const s=i.oltb.tooltip;s.setPosition(R_(n));const o=s.getElement();o.className="oltb-overlay-tooltip",o.firstElementChild.innerHTML=k_(n)}onFeatureChange(t){const e=this.select.getFeatures().getArray(),i=!T_.isEmpty(),n=t.getGeometry();if(i&&1===e.length)this.tooltipItem.innerHTML=k_(n);else{const e=t.getProperties().oltb.tooltip;e.setPosition(R_(n));e.getElement().firstElementChild.innerHTML=k_(n)}}deSelect(){this.deActivateTool()}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){[this.select,this.translate,this.modify].forEach((t=>{this.getMap().addInteraction(t)})),I_.setActiveTool(this),this.active=!0,this.editToolbox.classList.add("oltb-toolbox-section--show"),this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject($b,JSON.stringify(this.localStorage))}deActivateTool(){[this.select,this.translate,this.modify].forEach((t=>{this.getMap().removeInteraction(t)})),I_.removeActiveTool(),this.active=!1,this.editToolbox.classList.remove("oltb-toolbox-section--show"),this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject($b,JSON.stringify(this.localStorage))}}},{name:"BookmarkTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Bookmark,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Bookmarks (${lc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...pE,...t};const n=JSON.parse(_h.getStateObject(dE))||{};this.localStorage={...gE,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="oltb-bookmark-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-bookmark-toolbox-collapsed">\n                        Bookmarks\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-bookmark-toolbox-collapsed" style="display: ${this.localStorage.collapsed?"none":"block"}">\n                    <div class="oltb-toolbox-section__group">\n                        <div class="oltb-input-button-group">\n                            <input type="text" id="oltb-bookmark-add-txt" class="oltb-input" placeholder="Bookmark name">\n                            <button type="button" id="oltb-bookmark-add-btn" class="oltb-btn oltb-btn--green-mid oltb-tippy" title="Add Bookmark">\n                                ${bh({path:vh.PlusSmall,width:20,height:20,fill:"none",stroke:"rgb(255, 255, 255)",class:"oltb-btn__icon"})}\n                            </button>\n                        </div>\n                    </div>\n                    <div class="oltb-toolbox-section__group oltb-m-0">\n                        <ul id="oltb-bookmark-stack" class="oltb-toolbox-list"></ul>\n                    </div>\n                </div>\n            </div>\n        `),this.bookmarkToolbox=document.querySelector("#oltb-bookmark-toolbox"),this.bookmarkStack=this.bookmarkToolbox.querySelector("#oltb-bookmark-stack"),this.addBookmarkBtn=this.bookmarkToolbox.querySelector("#oltb-bookmark-add-btn"),this.addBookmarkTxt=this.bookmarkToolbox.querySelector("#oltb-bookmark-add-txt"),this.addBookmarkBtn.addEventListener(ah.Click,this.onBookmarkAdd.bind(this)),this.addBookmarkTxt.addEventListener(ah.KeyUp,this.onBookmarkAdd.bind(this));this.bookmarkToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))})),this.localStorage.bookmarks.forEach((t=>{this.createBookmark(t)})),Jh(Zh,{icon:e,name:"Add location as bookmark",fn:this.onContextMenuBookmarkAdd.bind(this)}),Jh(Zh,{icon:e,name:"Clear all bookmarks",fn:this.onContextMenuBookmarksClear.bind(this)}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowSettingsCleared.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage.collapsed=t,_h.updateStateObject(dE,JSON.stringify(this.localStorage))}))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onContextMenuBookmarkAdd(t,e,i){this.addBookmark("")}onContextMenuBookmarksClear(t,e,i){j_.confirm({text:"Do you want to clear all bookmarks?",onConfirm:()=>{this.clearBookmarks(),rc.success({text:"All bookmarks was cleared",autoremove:4e3})}})}onWindowKeyUp(t){Ac(t,lc)&&this.handleClick(t)}onWindowSettingsCleared(){this.localStorage={...gE}}onBookmarkAdd(t){"keyup"===t.type&&"enter"!==t.key.toLowerCase()||(this.addBookmark(this.addBookmarkTxt.value),this.addBookmarkTxt.value="")}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.active=!0,this.bookmarkToolbox.classList.add("oltb-toolbox-section--show"),this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(dE,JSON.stringify(this.localStorage))}deActivateTool(){this.active=!1,this.bookmarkToolbox.classList.remove("oltb-toolbox-section--show"),this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(dE,JSON.stringify(this.localStorage))}addBookmark(t){const e=this.getMap().getView(),i=e.getZoom(),n=e.getCenter();t||(t=function(){const t=uE(0,cE.length-1),e=uE(0,hE.length-1);return(hE[e]+" "+cE[t]).capitalize()}()),t=t.trim();const s={id:uE(),name:t,zoom:i,location:n};this.options.storeDataInLocalStorage&&(this.localStorage.bookmarks.push(s),_h.updateStateObject(dE,JSON.stringify(this.localStorage))),this.createBookmark(s),this.active||rc.success({text:"Bookmark created",autoremove:4e3}),"function"==typeof this.options.added&&this.options.added(s)}clearBookmarks(){_h.updateStateObject(dE,JSON.stringify(gE)),this.bookmarkStack.innerHTML="","function"==typeof this.options.cleared&&this.options.cleared()}createBookmark(t){const e=ph.createElement({element:"li",id:`oltb-bookmark-${t.id}`,class:"oltb-toolbox-list__item"}),i=ph.createElement({element:"span",text:t.name.ellipsis(20),class:"oltb-toolbox-list__title oltb-tippy",title:t.name});rE(i,{content(t){const e=t.getAttribute("title");return t.removeAttribute("title"),e},placement:"top",theme:"oltb oltb-themed",delay:[600,100]});const n=ph.createElement({element:"div",class:"oltb-toolbox-list__wrapper"});n.appendChild(i),e.appendChild(n);const s=ph.createElement({element:"div",class:"oltb-toolbox-list__wrapper"}),o=ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--geo-pin oltb-tippy",title:"Zoom to location",attributes:{type:"button"},listeners:{click:this.zoomToBookmark.bind(this,t)}}),r=ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--edit oltb-tippy",title:"Rename bookmark",attributes:{type:"button"},listeners:{click:this.editBookmark.bind(this,t,i)}}),A=ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--delete oltb-tippy",title:"Delete bookmark",attributes:{type:"button"},listeners:{click:this.deleteBookmark.bind(this,t,e)}});ph.appendChildren(s,[o,r,A]),e.appendChild(s),this.bookmarkStack.prepend(e)}zoomToBookmark(t){const e=this.getMap().getView();e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:t.zoom,center:t.location,duration:zh.animationDuration.normal,easing:at}),"function"==typeof this.options.zoomedTo&&this.options.zoomedTo(t)}deleteBookmark(t,e){j_.confirm({html:`Do you want to delete bookmark <strong>${t.name}</strong>?`,onConfirm:()=>{e.remove(),this.localStorage.bookmarks=this.localStorage.bookmarks.filter((e=>e.id!==t.id)),_h.updateStateObject(dE,JSON.stringify(this.localStorage)),"function"==typeof this.options.removed&&this.options.removed(t)}})}editBookmark(t,e){j_.prompt({text:"Edit bookmark name",value:t.name,confirmText:"Rename",onConfirm:i=>{null!==i&&i.length&&(t.name=i,e.innerText=i.ellipsis(20),e._tippy.setContent(i),_h.updateStateObject(dE,JSON.stringify(this.localStorage)),"function"==typeof this.options.renamed&&this.options.renamed(t))}})}}},{name:"LayerTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Layers,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Layers (${_c})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...aI,...t};const n=JSON.parse(_h.getStateObject(rI))||{};this.localStorage={...AI,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="oltb-layer-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-layer-map-toolbox-collapsed">\n                        Map layers\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-layer-map-toolbox-collapsed" style="display: ${this.localStorage["oltb-layer-map-toolbox-collapsed"]?"none":"block"}">\n                    ${this.options.disableMapCreateLayerButton?"":'\n                            <div class="oltb-toolbox-section__group">\n                                <button type="button" id="oltb-layer-map-stack-add-btn" class="oltb-btn oltb-btn--green-mid oltb-w-100">Create map layer</button>\n                            </div>\n                        '}\n                    <div class="oltb-toolbox-section__group ${this.options.disableMapCreateLayerButton?"oltb-toolbox-section__group--topmost":""} oltb-m-0">\n                        <ul id="oltb-layer-map-stack" class="oltb-toolbox-list"></ul>\n                    </div>\n                </div>\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-layer-feature-toolbox-collapsed">\n                        Feature layers\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-layer-feature-toolbox-collapsed" style="display: ${this.localStorage["oltb-layer-feature-toolbox-collapsed"]?"none":"block"}">\n                    <div class="oltb-toolbox-section__group">\n                        ${this.options.disableFeatureCreateLayerButton?"":`\n                                <div class="oltb-input-button-group">\n                                    <input type="text" id="oltb-layer-feature-stack-add-txt" class="oltb-input" placeholder="Layer name">\n                                    <button type="button" id="oltb-layer-feature-stack-add-btn" class="oltb-btn oltb-btn--green-mid oltb-tippy" title="Create feature layer">\n                                        ${bh({path:vh.PlusSmall,width:20,height:20,fill:"none",stroke:"rgb(255, 255, 255)",class:"oltb-btn__icon"})}\n                                    </button>\n                                </div>\n                            `}\n                    </div>\n                    <div class="oltb-toolbox-section__group ${this.options.disableFeatureCreateLayerButton?"oltb-toolbox-section__group--topmost":""} oltb-m-0">\n                        <ul id="oltb-layer-feature-stack" class="oltb-toolbox-list oltb-toolbox-list--selectable"></ul>\n                    </div>\n                </div>\n            </div>\n        `),this.layersToolbox=document.querySelector("#oltb-layer-toolbox");this.layersToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))})),this.mapLayerStack=this.layersToolbox.querySelector("#oltb-layer-map-stack"),this.featureLayerStack=this.layersToolbox.querySelector("#oltb-layer-feature-stack"),this.addFeatureLayerBtn=this.layersToolbox.querySelector("#oltb-layer-feature-stack-add-btn"),this.addFeatureLayerTxt=this.layersToolbox.querySelector("#oltb-layer-feature-stack-add-txt"),this.addFeatureLayerBtn&&this.addFeatureLayerBtn.addEventListener(ah.Click,this.onFeatureLayerAdd.bind(this)),this.addFeatureLayerTxt&&this.addFeatureLayerTxt.addEventListener(ah.KeyUp,this.onFeatureLayerAdd.bind(this));const s=this.layersToolbox.querySelector("#oltb-layer-map-stack-add-btn");s&&s.addEventListener(ah.Click,this.showAddMapLayerModal.bind(this)),this.options.disableMapCreateLayerButton||Jh(Zh,{icon:e,name:"Add map layer",fn:this.onContextMenuAddMapLayerModal.bind(this)}),window.addEventListener(hh.MapLayerAdded,this.onWindowMapLayerAdded.bind(this)),window.addEventListener(hh.MapLayerRemoved,this.onWindowMapLayerRemoved.bind(this)),window.addEventListener(hh.FeatureLayerAdded,this.onWindowFeatureLayerAdded.bind(this)),window.addEventListener(hh.FeatureLayerRemoved,this.onWindowFeatureLayerRemoved.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage[e]=t,_h.updateStateObject(rI,JSON.stringify(this.localStorage))}))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,_c)&&this.handleClick(t)}onContextMenuAddMapLayerModal(){this.showAddMapLayerModal()}onFeatureLayerAdd(t){"keyup"===t.type&&"enter"!==t.key.toLowerCase()||(gh.addFeatureLayer(this.addFeatureLayerTxt.value),this.addFeatureLayerTxt.value="")}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.active=!0,this.layersToolbox.classList.add("oltb-toolbox-section--show"),this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(rI,JSON.stringify(this.localStorage))}deActivateTool(){this.active=!1,this.layersToolbox.classList.remove("oltb-toolbox-section--show"),this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(rI,JSON.stringify(this.localStorage))}showAddMapLayerModal(){new fE((function(t){try{gh.addMapLayer({name:t.name,layer:SE(t.layer,{projection:t.projection||zh.projection,source:(e=t.source,i={url:t.url,params:JSON.parse(t.parameters),wrapX:t.wrapX,attributions:t.attributions,format:oI(t.source)},e in IE?new IE[e](i):null)})})}catch(t){console.error(`Error adding layer [${t}]`),rc.error({text:"Something went wrong adding the layer"})}var e,i}))}onWindowMapLayerAdded(t){const e=t.detail.layerWrapper,i=t.detail.silent,n=this.options.disableMapLayerVisibilityButton,s=this.options.disableMapLayerEditButton,o=this.options.disableMapLayerDeleteButton;this.createLayerItem(e,{idPrefix:"oltb-layer-map",target:this.mapLayerStack,buttons:{...!n&&{visibilityButton:{function:this.createVisibilityButton,callback:this.options.mapLayerVisibilityChanged}},...!s&&{editButton:{function:this.createEditButton,callback:this.options.mapLayerRenamed}},...!o&&{deleteButton:{function:this.createDeleteButton,callback:gh.removeMapLayer.bind(gh)}}}}),"function"!=typeof this.options.mapLayerAdded||i||this.options.mapLayerAdded(e)}onWindowMapLayerRemoved(t){vE.hideOverlay();const e=t.detail.layerWrapper,i=t.detail.silent;this.mapLayerStack.querySelector(`#oltb-layer-map-${e.id}`).remove(),"function"!=typeof this.options.mapLayerRemoved||i||this.options.mapLayerRemoved(e)}onWindowFeatureLayerAdded(t){const e=t.detail.layerWrapper,i=t.detail.silent,n=this.options.disableFeatureLayerVisibilityButton,s=this.options.disableFeatureLayerEditButton,o=this.options.disableFeatureLayerDownloadButton,r=this.options.disableFeatureLayerDeleteButton;this.createLayerItem(e,{idPrefix:"oltb-layer-feature",target:this.featureLayerStack,buttons:{...!n&&{visibilityButton:{function:this.createVisibilityButton,callback:this.options.featureLayerVisibilityChanged}},...!s&&{editButton:{function:this.createEditButton,callback:this.options.featureLayerRenamed}},...!o&&{downloadButton:{function:this.createDownloadButton,callback:this.options.featureLayerDownloaded}},...!r&&{deleteButton:{function:this.createDeleteButton,callback:gh.removeFeatureLayer.bind(gh)}}}}),"function"!=typeof this.options.featureLayerAdded||i||this.options.featureLayerAdded(e)}onWindowFeatureLayerRemoved(t){vE.hideOverlay();const e=t.detail.layerWrapper,i=t.detail.silent;this.featureLayerStack.querySelector(`#oltb-layer-feature-${e.id}`).remove();this.featureLayerStack.querySelectorAll("li").length>0&&this.featureLayerStack.firstChild.classList.add("oltb-toolbox-list__item--active"),"function"!=typeof this.options.featureLayerRemoved||i||this.options.featureLayerRemoved(e)}createLayerItem(t,e){this.featureLayerStack.querySelectorAll("li").forEach((t=>{t.classList.remove("oltb-toolbox-list__item--active")}));const i=ph.createElement({element:"li",id:`${e.idPrefix}-${t.id}`,class:"oltb-toolbox-list__item oltb-toolbox-list__item--active"+(t.layer.getVisible()?"":" oltb-toolbox-list__item--hidden")});t.layer.on(lh.PropertyChange,(function(t){"visible"===t.key&&i.classList.toggle("oltb-toolbox-list__item--hidden")}));const n=ph.createElement({element:"span",text:t.name.ellipsis(20),class:"oltb-toolbox-list__title",title:t.name});rE(n,{content(t){const e=t.getAttribute("title");return t.removeAttribute("title"),e},placement:"top",theme:"oltb oltb-themed",delay:[600,100]}),"oltb-layer-feature"===e.idPrefix&&n.addEventListener(ah.Click,(e=>{gh.setActiveFeatureLayer(t),this.featureLayerStack.querySelectorAll("li").forEach((t=>{t.classList.remove("oltb-toolbox-list__item--active")})),n.closest("li").classList.add("oltb-toolbox-list__item--active")}));const s=ph.createElement({element:"div",class:"oltb-toolbox-list__wrapper"});s.appendChild(n),i.appendChild(s);const o=ph.createElement({element:"div",class:"oltb-toolbox-list__wrapper"});for(const i in e.buttons)o.appendChild(e.buttons[i].function.call(this,t,e.buttons[i].callback,n));i.appendChild(o),e.target.prepend(i)}createDeleteButton(t,e){return ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--delete oltb-tippy",title:"Delete layer",attributes:{type:"button"},listeners:{click:()=>{j_.confirm({html:`Do you want to delete layer <strong>${t.name}</strong>?`,onConfirm:function(){e(t)}})}}})}createDownloadButton(t,e){return ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--download oltb-tippy",title:"Download layer",attributes:{type:"button"},listeners:{click:()=>{new EE((function(i){const n=oI(i.format);if(!n)return void rc.error({text:"Unsupported layer format"});const s=t.layer.getSource().getFeatures(),o=n.writeFeatures(s,{featureProjection:zh.projection,dataProjection:zh.projection}),r=t.name+"."+i.format.toLowerCase();g_(r,o),"function"==typeof e&&e(t)}))}}})}createEditButton(t,e,i){return ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--edit oltb-tippy",title:"Rename layer",attributes:{type:"button"},listeners:{click:()=>{j_.prompt({text:"Edit layer name",value:t.name,confirmText:"Rename",onConfirm:function(n){null!==n&&n.length&&(t.name=n,i.innerText=n.ellipsis(20),i._tippy.setContent(n),"function"==typeof e&&e(t))}})}}})}createVisibilityButton(t,e,i){const n=this.getMap();return ph.createElement({element:"button",class:"oltb-func-btn oltb-func-btn--visibility oltb-tippy",title:"Toggle visibility",attributes:{type:"button"},listeners:{click:()=>{vE.hideOverlay();const i=!t.layer.getVisible();t.layer.setVisible(i);"function"==typeof t.layer.getSource().getFeatures&&t.layer.getSource().getFeatures().forEach((t=>{Ah(t.getProperties(),uh)&&t.getProperties().oltb.tooltip.setMap(i?n:null)})),"function"==typeof e&&e(t)}}})}}},{name:"SplitViewTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.SplitView,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Split view (${Ec})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...uI,...t};const n=JSON.parse(_h.getStateObject(hI))||{};this.localStorage={...cI,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="${lI}-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="${lI}-toolbox-collapsed">\n                        Split view\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="${lI}-toolbox-collapsed" style="display: ${this.localStorage.collapsed?"none":"block"}">\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="${lI}-left-src">Left side</label>\n                        <select id="${lI}-left-src" class="oltb-select"></select>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <label class="oltb-label" for="${lI}-src">Right side</label>\n                        <select id="${lI}-right-src" class="oltb-select"></select>\n                    </div>\n                    <div class="oltb-toolbox-section__group">\n                        <button type="button" id="${lI}-swap-btn" class="oltb-btn oltb-btn--green-mid oltb-w-100">Swap sides</button>\n                    </div>\n                </div>\n            </div>\n        `),fh.insertAdjacentHTML("beforeend",`\n            <input type="range" min="0" max="100" value="50" class="oltb-slider" id="${lI}-slider">\n        `),this.splitViewToolbox=document.querySelector(`#${lI}-toolbox`),this.leftSrc=this.splitViewToolbox.querySelector(`#${lI}-left-src`),this.leftSrc.addEventListener(ah.Change,this.updateTool.bind(this)),this.rightSrc=this.splitViewToolbox.querySelector(`#${lI}-right-src`),this.rightSrc.addEventListener(ah.Change,this.updateTool.bind(this));this.splitViewToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))}));this.splitViewToolbox.querySelector(`#${lI}-swap-btn`).addEventListener(ah.Click,(t=>{this.swapSides()})),this.splitViewSlider=fh.querySelector(`#${lI}-slider`),this.splitViewSlider.addEventListener(ah.Input,(t=>{this.getMap().render()})),window.addEventListener(hh.MapLayerAdded,this.onWindowMapLayerAdded.bind(this)),window.addEventListener(hh.MapLayerRemoved,this.onWindowMapLayerRemoved.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowSettingsCleared.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage.collapsed=t,_h.updateStateObject(hI,JSON.stringify(this.localStorage))}))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,Ec)&&this.handleClick(t)}onWindowSettingsCleared(){this.localStorage={...cI}}onWindowMapLayerAdded(t){const e=t.detail.layerWrapper,i=ph.createElement({element:"option",text:e.name,value:e.id.toString()}),n=ph.createElement({element:"option",text:e.name,value:e.id.toString()});this.leftSrc.appendChild(i),this.rightSrc.appendChild(n)}onWindowMapLayerRemoved(t){const e=t.detail.layerWrapper;this.leftSrc.childNodes.forEach((t=>{parseInt(t.value,10)===e.id&&t.remove()})),this.rightSrc.childNodes.forEach((t=>{parseInt(t.value,10)===e.id&&t.remove()})),M_([this.leftSrc,this.rightSrc],ah.Change)}updateTool(){this.sourceChange(parseInt(this.leftSrc.value,10),parseInt(this.rightSrc.value,10))}handleClick(){"function"==typeof this.options.click&&this.options.click(),gh.getMapLayerSize()<=1?rc.info({text:"You must have more then one map-layer to use the split view"}):this.active?this.deActivateTool():this.activateTool()}activateTool(){this.rightSrc.selectedIndex="1",M_([this.rightSrc],ah.Change),this.layerLoadingError||(this.active=!0,this.splitViewToolbox.classList.add("oltb-toolbox-section--show"),this.splitViewSlider.classList.add("oltb-slider--show"),this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(hI,JSON.stringify(this.localStorage)))}deActivateTool(){const t=this.getMap();tt(this.onPreRenderListener),tt(this.onPostRenderListener),gh.getMapLayers().forEach((e=>{t.removeLayer(e.layer)})),gh.getMapLayers().forEach((e=>{t.addLayer(e.layer)})),gh.setTopMapLayerAsOnlyVisible(),this.active=!1,this.splitViewToolbox.classList.remove("oltb-toolbox-section--show"),this.splitViewSlider.classList.remove("oltb-slider--show"),this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(hI,JSON.stringify(this.localStorage))}swapSides(){const t=this.rightSrc.value;this.rightSrc.value=this.leftSrc.value,this.leftSrc.value=t,M_([this.leftSrc,this.rightSrc],ah.Change)}sourceChange(t,e){tt(this.onPreRenderListener),tt(this.onPostRenderListener);const i=this.getMap();gh.getMapLayers().forEach((t=>{i.removeLayer(t.layer),t.layer.setVisible(!1)}));const n=gh.getMapLayerById(t),s=gh.getMapLayerById(e);if(!n||!s)return rc.error({text:"One or both of the selected layers could not be loaded"}),void(this.layerLoadingError=!0);const o=n.layer,r=s.layer;o.setVisible(!0),i.addLayer(o),t!==e&&(i.addLayer(r),r.setVisible(!0),this.onPreRenderListener=r.on(lh.PreRender,this.onPreRender.bind(this)),this.onPostRenderListener=r.on(lh.PostRender,this.onPostRender.bind(this))),i.render()}onPreRender(t){const e=t.context,i=this.getMap().getSize(),n=this.splitViewSlider.offsetWidth,s=n/2,o=16*((this.splitViewSlider.value/(this.splitViewSlider.max-this.splitViewSlider.min)*n-s)/s),r=i[0],A=i[1],a=r*(this.splitViewSlider.value/this.splitViewSlider.max)-o,l=ca(t,[a,0]),h=ca(t,[r,0]),c=ca(t,[a,A]),u=ca(t,[r,A]);e.save(),e.beginPath(),e.moveTo(l[0],l[1]),e.lineTo(c[0],c[1]),e.lineTo(u[0],u[1]),e.lineTo(h[0],h[1]),e.closePath(),e.clip()}onPostRender(t){t.context.restore()}}},{name:"OverviewTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.AspectRation,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Area overview (${ac})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...pI,...t};const n=JSON.parse(_h.getStateObject(dI))||{};this.localStorage={...gI,...n},wh.insertAdjacentHTML("beforeend",`\n            <div id="oltb-overview-toolbox" class="oltb-toolbox-section">\n                <div class="oltb-toolbox-section__header">\n                    <h4 class="oltb-toolbox-section__title oltb-toggleable" data-oltb-toggleable-target="oltb-overview-toolbox-collapsed">\n                        Overview tool\n                        <span class="oltb-toolbox-section__icon oltb-tippy" title="Toggle section"></span>\n                    </h4>\n                </div>\n                <div class="oltb-toolbox-section__groups" id="oltb-overview-toolbox-collapsed" style="display: ${this.localStorage.collapsed?"none":"block"}">\n                    <div class="oltb-toolbox-section__group" id="oltb-overview-target"></div>\n                </div>\n            </div>\n        `),this.overviewToolbox=document.querySelector("#oltb-overview-toolbox");this.overviewToolbox.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ah.Click,this.onToggleToolbox.bind(this,t))})),this.overviewMap=new Oh({target:"oltb-overview-target",collapsed:!1,collapsible:!1,layers:[new ql({source:new th})]}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowSettingsCleared.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onToggleToolbox(t){const e=t.dataset.oltbToggleableTarget;document.getElementById(e).slideToggle(200,(t=>{this.localStorage.collapsed=t,_h.updateStateObject(dI,JSON.stringify(this.localStorage)),this.overviewMap.setMap(null),this.overviewMap.setMap(this.getMap())}))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,ac)&&this.handleClick(t)}onWindowSettingsCleared(){this.localStorage={...gI}}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.overviewToolbox.classList.add("oltb-toolbox-section--show"),this.overviewMap.setMap(this.getMap()),this.active=!0,this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(dI,JSON.stringify(this.localStorage))}deActivateTool(){this.overviewMap.setMap(null),this.active=!1,this.button.classList.remove("oltb-tool-button--active"),this.overviewToolbox.classList.remove("oltb-toolbox-section--show"),this.localStorage.active=!1,_h.updateStateObject(dI,JSON.stringify(this.localStorage))}}},{name:"GraticuleTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Globe,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Show graticule (${mc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...yI,...t};const n=JSON.parse(_h.getStateObject(fI))||{};this.localStorage={...mI,...n},this.graticule=new pa({strokeStyle:new To({color:this.options.color,width:this.options.width,lineDash:this.options.dashed?[1,4]:[0,0]}),showLabels:this.options.showLabels,visible:!0,wrapX:this.options.wrapX}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,mc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.graticule.setMap(this.getMap()),this.active=!0,this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(fI,JSON.stringify(this.localStorage))}deActivateTool(){this.graticule.setMap(null),this.active=!1,this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(fI,JSON.stringify(this.localStorage))}}},{name:"MagnifyTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Magnify,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Magnifier (${Qc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.radius=75,this.options={...wI,...t};const n=JSON.parse(_h.getStateObject(_I))||{};this.localStorage={...BI,...n},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,Qc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){const t=this.getMap(),e=t.getTarget();this.onMousemoveListenert=this.onMousemove.bind(this),e.addEventListener(ah.MouseMove,this.onMousemoveListenert),this.onMouseoutListenert=this.onMouseout.bind(this),e.addEventListener(ah.MouseOut,this.onMouseoutListenert),this.onKeydownListener=this.onKeydown.bind(this),document.addEventListener(ah.KeyDown,this.onKeydownListener),this.onPostrenderListeners=[],t.getLayers().getArray().forEach((t=>{this.onPostrenderListeners.push(t.on(lh.PostRender,this.onPostrender.bind(this)))})),this.active=!0,this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(_I,JSON.stringify(this.localStorage))}deActivateTool(){const t=this.getMap(),e=t.getTarget();e.removeEventListener(ah.MouseMove,this.onMousemoveListenert),e.removeEventListener(ah.MouseOut,this.onMouseoutListenert),document.removeEventListener(ah.KeyDown,this.onKeydownListener),this.onPostrenderListeners.forEach((t=>{tt(t)})),t.render(),this.active=!1,this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(_I,JSON.stringify(this.localStorage))}onKeydown(t){t.preventDefault();const e=t.key;"+"===e?this.radius=Math.min(this.radius+5,150):"-"===e&&(this.radius=Math.max(this.radius-5,25)),this.getMap().render()}onMousemove(t){const e=this.getMap();this.mousePosition=e.getEventPixel(t),e.render()}onMouseout(t){this.mousePosition=null,this.getMap().render()}onPostrender(t){if(this.mousePosition){const e=this.mousePosition,i=this.radius,n=ca(t,e),s=ca(t,[e[0]+i,e[1]]),o=Math.sqrt(Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2)),r=t.context,A=n[0],a=n[1],l=A-o,h=a-o,c=Math.round(2*o+1);try{const t=r.getImageData(l,h,c,c).data,e=r.createImageData(c,c),n=e.data;for(let e=0;e<c;++e)for(let i=0;i<c;++i){const s=i-o,r=e-o,A=Math.sqrt(s*s+r*r);let a=i,l=e;A<o&&(a=Math.round(o+s/2),l=Math.round(o+r/2));const h=4*(e*c+i),u=4*(l*c+a);n[h]=t[u],n[h+1]=t[u+1],n[h+2]=t[u+2],n[h+3]=t[u+3]}r.beginPath(),r.arc(A,a,o,0,2*Math.PI),r.lineWidth=3*o/i,r.strokeStyle="rgba(59, 67, 82, 1)",r.putImageData(e,l,h),r.stroke(),r.restore()}catch(t){this.button.click(),"SecurityError"==t.name?rc.error({text:"A CORS error with one of the layers occurred"}):rc.error({text:"A unknown error occurred with the magnifyer"}),console.error(`Error using magnifyer [${t}]`)}}}}},{name:"ResetNorthTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Compass,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Reset North (${wc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...CI,...t},Jh(Zh,{icon:e,name:"Set rotation by degrees",fn:this.onContextMenuSetRotation.bind(this)}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,wc)&&this.handleClick(t)}onContextMenuSetRotation(t,e,i){const n=t.getView();let s=n.getRotation()*(180/Math.PI);s=s<0?s+360:s,j_.prompt({text:"Set rotation by degrees",value:Math.round(s),confirmText:"Rotate map",onConfirm:t=>{var e;t.isDigitsOnly()?n.animate({rotation:(e=t,e*(Math.PI/180)),duration:zh.animationDuration.normal,easing:at}):rc.error({text:"Failed to rotate map, only digits are allowed",autoremove:4e3})}})}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){const t=this.getMap().getView();t.getAnimating()&&t.cancelAnimations(),t.animate({rotation:0,duration:zh.animationDuration.normal,easing:at}),setTimeout((()=>{"function"==typeof this.options.reset&&this.options.reset()}),zh.animationDuration.normal)}}},{name:"CoordinatesTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Coordinates,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Show coordinates (${hc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.tooltipItem=void 0,this.options={...EI,...t};const n=JSON.parse(_h.getStateObject(vI))||{};this.localStorage={...xI,...n},S_.addSetting(B_,{state:!0,text:"Coordinates tool - Copy coordinates on click"}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,hc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){const t=this.getMap();this.tooltipItem=T_.push("coordinates"),this.onPointerMoveListener=t.on(lh.PointerMove,this.onPointerMove.bind(this)),this.onMapClickListener=t.on(ah.Click,this.onMapClick.bind(this)),this.active=!0,this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(vI,JSON.stringify(this.localStorage))}deActivateTool(){T_.pop("coordinates"),tt(this.onPointerMoveListener),tt(this.onMapClickListener),this.active=!1,this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(vI,JSON.stringify(this.localStorage))}onPointerMove(t){const e=Re(ri(t.coordinate,zh.projection,zh.wgs84Projection));this.tooltipItem.innerHTML=e}async onMapClick(t){if(!S_.getSetting(B_)||I_.hasActiveTool())return;const e=ri(t.coordinate,zh.projection,zh.wgs84Projection),i=e[0],n=e[1],s=Re(e),o={decimal:{lon:i,lat:n},degree:s};bI(s).then((()=>{rc.success({text:"Coordinates copied to clipboard",autoremove:4e3})})).catch((()=>{rc.error({text:"Failed to copy coordinates"})})),"function"==typeof this.options.mapClicked&&this.options.mapClicked(o)}}},{name:"MyLocationTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.GeoMarker,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`My location (${gc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...SI,...t},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,gc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){Hc()?j_.confirm({text:"To use geolocation you must exit fullscreen",confirmClass:j_.Success,confirmText:"Exit fullscreen",onConfirm:()=>{Kc().then((()=>{this.getGEOLocation()})).catch((t=>{console.error(`Error exiting fullscreen [${t}]`)}))}}):this.getGEOLocation()}getGEOLocation(){this.loadingToast||(navigator.geolocation?(this.loadingToast=rc.info({text:"Trying to find your location...",clickToRemove:!1,spinner:!0,onRemove:()=>{this.loadingToast=void 0}}),navigator.geolocation.getCurrentPosition(this.onSuccess.bind(this),this.onError.bind(this),{enableHighAccuracy:this.options.enableHighAccuracy,timeout:this.options.timeout})):this.onError({message:"Geolocation is not supported by this browser."},rc.error))}onSuccess(t){const e=t.coords.latitude,i=t.coords.longitude,n=Re([i,e]),s=bh({path:vh.GeoMarkerFilled,width:20,height:20,fill:"rgb(255, 255, 255)"}),o=`\n            <h3 class="oltb-text-center">My location</h3>\n            <p class="oltb-text-center">${n}</p>\n            <div class="oltb-d-flex oltb-justify-content-center">\n                <button class="oltb-func-btn oltb-func-btn--delete oltb-tippy" title="Delete marker" id="${FI}-remove"></button>\n                <button class="oltb-func-btn oltb-func-btn--copy oltb-tippy" title="Copy marker text" id="${FI}-copy-location" data-copy="My location ${n}"></button>\n            </div>\n        `,r=gh.addFeatureLayer("My location"),A=new Wh({lat:e,lon:i,icon:s,notSelectable:!0,infoWindow:o});r.layer.getSource().addFeature(A);const a=this.getMap().getView();a.getAnimating()&&a.cancelAnimations(),a.animate({center:ii([i,e]),zoom:6,duration:zh.animationDuration.normal,easing:at}),setTimeout((()=>{vE.showOverly(A,ii([i,e]))}),zh.animationDuration.normal),"function"==typeof this.options.location&&this.options.location(t),this.loadingToast.remove()}onError(t,e=rc.error){e({text:t.message}),"function"==typeof this.options.error&&this.options.error(t),this.loadingToast.remove()}}},{name:"ImportVectorLayerTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Open,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Import Vector layer (${Cc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.fileReader=new FileReader,this.options={...II,...t},this.inputDialog=ph.createElement({element:"input",attributes:{type:"file",accept:".geojson, .kml"},listeners:{change:this.loadLayer.bind(this)}}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Cc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){this.inputDialog.click()}loadLayer(t){const e=t.target;this.fileReader.addEventListener(ah.Load,this.parseLayer.bind(this,e)),this.fileReader.readAsText(e.files[0])}parseLayer(t){const e=t.files[0].name;try{const t=e.split(".")[0],i=e.split(".").pop().toLowerCase(),n=Object.keys(sI).find((t=>t.toLowerCase()===i));if(!n)return void rc.error({text:"Unsupported layer format"});const s="kml"===i.toLowerCase()?zh.projection:void 0,o=oI(n).readFeatures(this.fileReader.result,{featureProjection:zh.projection,dataProjection:s});gh.addFeatureLayer("Import : "+t).layer.getSource().addFeatures(o),"function"==typeof this.options.imported&&this.options.imported(o)}catch(t){console.error(`Error importing vector layer [${t}]`),rc.error({text:"Error when parsing layer - check syntax"}),"function"==typeof this.options.error&&this.options.error(e,t)}}}},{name:"ScaleLineTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.ScaleLine,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Scale line (${yc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.button=i,this.active=!1,this.options={...UI,...t},this.scaleLine=new Kh({units:this.options.units});const n=JSON.parse(_h.getStateObject(MI))||{};this.localStorage={...LI,...n},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this)),window.addEventListener(ah.DOMContentLoaded,this.onDOMContentLoaded.bind(this))}onDOMContentLoaded(){this.localStorage.active&&this.activateTool()}onWindowKeyUp(t){Ac(t,yc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.active?this.deActivateTool():this.activateTool()}activateTool(){this.scaleLine.setMap(this.getMap()),this.active=!0,this.button.classList.add("oltb-tool-button--active"),this.localStorage.active=!0,_h.updateStateObject(MI,JSON.stringify(this.localStorage))}deActivateTool(){this.scaleLine.setMap(null),this.active=!1,this.button.classList.remove("oltb-tool-button--active"),this.localStorage.active=!1,_h.updateStateObject(MI,JSON.stringify(this.localStorage))}}},{name:"RefreshTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Refresh,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Refresh page (${xc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...QI,...t},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,xc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){window.location.reload()}}},{name:"ThemeTool",tool:class extends Ol{constructor(t={}){super({element:Bh}),this.lightThemeIcon=bh({path:vh.LightOn,class:"oltb-tool-button__icon"}),this.darkThemeIcon=bh({path:vh.LightOff,class:"oltb-tool-button__icon"});const e=ph.createElement({element:"button",html:Sh()?this.lightThemeIcon:this.darkThemeIcon,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":(Sh()?"Light theme":"Dark theme")+` (${Fc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(e),this.button=e,this.active=!1,this.options={...kI,...t},window.addEventListener(hh.SettingsCleared,this.onWindowClearTheme.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Fc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){let t="light";Sh()?this.onWindowClearTheme():(t="dark",_h.updateStateObject(TI,"dark"),Bh.classList.add("dark"),document.body.classList.add("oltb-dark"),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.lightThemeIcon),this.button._tippy.setContent(`Light theme (${Fc})`)),"function"==typeof this.options.changed&&this.options.changed(t)}onWindowClearTheme(){_h.updateStateObject(TI,"light"),Bh.classList.remove("dark"),document.body.classList.remove("oltb-dark"),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.darkThemeIcon),this.button._tippy.setContent(`Dark theme (${Fc})`)}}},{name:"DirectionTool",tool:class extends Ol{constructor(t={}){super({element:Bh}),this.horizontalIcon=bh({path:vh.DirectionHorizontal,class:"oltb-tool-button__icon"}),this.verticalIcon=bh({path:vh.DirectionVertical,class:"oltb-tool-button__icon"});const e=ph.createElement({element:"button",html:RI()?this.verticalIcon:this.horizontalIcon,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":(RI()?"Vertical toolbar":"Horizontal toolbar")+` (${cc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(e),this.button=e,this.active=!1,this.options={...KI,...t},this.onWindowDeviceCheck(),window.addEventListener(ah.Resize,this.onWindowDeviceCheck.bind(this)),window.addEventListener(hh.SettingsCleared,this.onWindowClearDirection.bind(this)),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,cc)&&this.handleClick(t)}onWindowDeviceCheck(t){window.innerWidth<=zh.deviceWidth.sm?this.button.classList.add("oltb-tool-button--hidden"):this.button.classList.remove("oltb-tool-button--hidden")}onWindowClearDirection(){_h.updateStateObject(GI,"col"),Bh.classList.remove("row"),document.body.classList.remove("oltb-row"),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.horizontalIcon),this.button._tippy.setContent(`Horizontal toolbar (${cc})`),NI.setProps({placement:"right"})}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){let t="col",e="right";RI()?this.onWindowClearDirection():(t="row",e="bottom",_h.updateStateObject(GI,"row"),Bh.classList.add("row"),document.body.classList.add("oltb-row"),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.verticalIcon),this.button._tippy.setContent(`Vertical  toolbar (${cc})`),NI.setProps({placement:"bottom"})),window.dispatchEvent(new CustomEvent(hh.ToolbarDirectionChange,{detail:{direction:e}})),"function"==typeof this.options.changed&&this.options.changed(t)}}},{name:"InfoTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Info,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Info (${fc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.infoModal=void 0,this.options={...XI,...t},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,fc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){this.infoModal||(this.infoModal=zI.create({title:this.options.title,content:this.options.content,onClose:()=>{this.infoModal=void 0}}))}}},{name:"NotificationTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Bell,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Notifications (${Lc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.notificationModal=void 0,this.options={...YI,...t},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Lc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){if(this.notificationModal)return;this.notificationModal=zI.create({title:"Notifications",content:"<p>Loading notifications...</p>",onClose:()=>{this.notificationModal=void 0}});const t=(new Date).getTime().toString();fetch("https://raw.githubusercontent.com/qulle/notification-endpoints/main/endpoints/oltb.json?cache="+t).then((t=>{if(!t.ok)throw new Error(`Fetch error [${t.status}] [${t.statusText}]`);return t.json()})).then((t=>{let e="";0===t.features.length?e="<p>No features currently under development</p>":t.features.forEach((t=>{e+=`<p>${t}</p>`}));const i=`\n                    <h3>👋 From Qulle</h3>\n                    <p>${t.qulle}</p>\n                    <h3>🔭 Your version</h3>\n                    <p>\n                        <a href="https://github.com/qulle/oltb/releases/tag/v${zh.version}" target="_blank" class="oltb-link">\n                            v${zh.version}\n                        </a>\n                    </p>\n                    <h3>🚀 Latest version</h3>\n                    <p>\n                        <a href="https://github.com/qulle/oltb/releases/tag/v${t.latest}" target="_blank" class="oltb-link">\n                            v${t.latest} - ${new Date(t.released).toLocaleDateString(zh.locale)}\n                        </a>\n                    </p>\n                    <h3>💡 New features under development</h3>\n                    ${e}\n                `;this.notificationModal.setContent(i)})).catch((t=>{const e=`\n                    <h3>👋 From Qulle</h3>\n                    <p>Glad you are using my App, hope you find it useful!</p>\n                    <h3>🔭 Your version</h3>\n                    <p>\n                        <a href="https://github.com/qulle/oltb/releases/tag/v${zh.version}" target="_blank" class="oltb-link">\n                            v${zh.version}\n                        </a>\n                    </p>\n                    <h3>📡 Fetch error</h3>\n                    <p>Data from the GitHub repo could not be fetched</p>\n                `;this.notificationModal.setContent(e),console.error(`Fetch error [${t}]`)}))}}},{name:"HelpTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Help,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Help (${Tc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.options={...qI,...t},window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Tc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){try{window.open(this.options.url,this.options.target).focus()}catch(t){console.error(`Error opening Help [${t}]`),rc.info({text:"Action was blocked by browser, try open with mouse"})}}}},{name:"SettingsTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Settings,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Settings (${Sc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.settingsModal=void 0,this.options={...JI,...t},Jh(Zh,{icon:e,name:"Clear settings",fn:this.onContextMenuSettingsClear.bind(this)}),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Sc)&&this.handleClick(t)}onContextMenuSettingsClear(t,e,i){j_.confirm({text:"Do you want to clear all settings?",onConfirm:()=>{this.clearSettings(),rc.success({text:"All settings was cleared",autoremove:4e3})}})}clearSettings(){_h.clear(),"function"==typeof this.options.cleared&&this.options.cleared(),window.dispatchEvent(new CustomEvent(hh.SettingsCleared))}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){this.settingsModal||(this.settingsModal=new jI({onClose:()=>{this.settingsModal=void 0}}))}}},{name:"DebugInfoTool",tool:class extends Ol{constructor(t={}){super({element:Bh});const e=bh({path:vh.Debug,class:"oltb-tool-button__icon"}),i=ph.createElement({element:"button",html:e,class:"oltb-tool-button",attributes:{type:"button","data-tippy-content":`Debug info (${Uc})`},listeners:{click:this.handleClick.bind(this)}});this.element.appendChild(i),this.debugInfoModal=void 0,this.options={...eM,...t};const n="true"===$I.getParameter("debug");this.options.showWhenGetParameter&&(n&&!0===n||i.classList.add("oltb-tool-button--hidden")),window.addEventListener(ah.KeyUp,this.onWindowKeyUp.bind(this))}onWindowKeyUp(t){Ac(t,Uc)&&this.handleClick(t)}handleClick(){"function"==typeof this.options.click&&this.options.click(),this.momentaryActivation()}momentaryActivation(){if(this.debugInfoModal)return;const t=this.getMap(),e=t.getView(),i={zoom:e.getZoom(),location:e.getCenter(),rotation:e.getRotation(),projection:e.getProjection(),proj4Defs:tM,defaultConfig:zh};this.debugInfoModal=new ZI({map:t,information:i,onClose:()=>{this.debugInfoModal=void 0}})}}},{name:"HiddenAboutTool",tool:class extends Ol{constructor(){super({element:Bh});const t=bh({path:vh.GitHub});Jh(Zh,{}),Jh(Zh,{icon:t,name:"About OLTB",fn:this.onContextMenuAbout.bind(this)})}onContextMenuAbout(t,e,i){j_.alert({confirmText:"Got it!",html:`\n            <h3>Version ${zh.version}</h3>\n            <p>Developed by Qulle <a href="//github.com/qulle/oltb" target="_blank" class="oltb-link">github.com/qulle/oltb</a></p>\n            <p>Using OpenLayers <a href="//openlayers.org/en/v7.1.0/apidoc/" target="_blank" class="oltb-link">7.1.0</a></p>\n        `})}}}];var nM=6378137,sM=.0066943799901413165,oM=484813681109536e-20,rM=Math.PI/2,AM=1e-10,aM=.017453292519943295,lM=57.29577951308232,hM=Math.PI/4,cM=2*Math.PI,uM=3.14159265359,dM={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},gM={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},pM=/[\s_\-\/\(\)]/g;function fM(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),s=e.toLowerCase().replace(pM,""),o=-1;++o<n.length;)if((i=n[o]).toLowerCase().replace(pM,"")===s)return t[i]}function mM(t){var e,i,n,s={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),r={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*aM},lat_1:function(t){s.lat1=t*aM},lat_2:function(t){s.lat2=t*aM},lat_ts:function(t){s.lat_ts=t*aM},lon_0:function(t){s.long0=t*aM},lon_1:function(t){s.long1=t*aM},lon_2:function(t){s.long2=t*aM},alpha:function(t){s.alpha=parseFloat(t)*aM},gamma:function(t){s.rectified_grid_angle=parseFloat(t)},lonc:function(t){s.longc=t*aM},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var e=fM(gM,t);e&&(s.to_meter=e.to_meter)},from_greenwich:function(t){s.from_greenwich=t*aM},pm:function(t){var e=fM(dM,t);s.from_greenwich=(e||parseFloat(t))*aM},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(s.axis=t)},approx:function(){s.approx=!0}};for(e in o)i=o[e],e in r?"function"==typeof(n=r[e])?n(i):s[n]=i:s[e]=i;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var yM=/\s/,_M=/[A-Za-z]/,BM=/[A-Za-z84_]/,wM=/[,\]]/,CM=/[\d\.E\-\+]/;function bM(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function vM(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,s=i.reduce((function(t,e){return xM(e,t),t}),n);e&&(t[e]=s)}function xM(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void xM(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&xM(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&xM(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void vM(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return xM(t,e[i]);return vM(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}bM.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;yM.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},bM.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(wM.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},bM.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},bM.prototype.number=function(t){if(!CM.test(t)){if(wM.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},bM.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},bM.prototype.keyword=function(t){if(BM.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!wM.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},bM.prototype.neutral=function(t){if(_M.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(CM.test(t))return this.word=t,void(this.state=3);if(!wM.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},bM.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function EM(t){return.017453292519943295*t}function FM(t){var e=new bM(t).output(),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var s={};return xM(e,s),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var s=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==s[0].indexOf("north")||("y"===s[0]||"lat"===s[0])&&"north"===s[1]?e+="n":-1!==s[0].indexOf("south")||("y"===s[0]||"lat"===s[0])&&"south"===s[1]?e+="s":-1!==s[0].indexOf("east")||("x"===s[0]||"lon"===s[0])&&"east"===s[1]?e+="e":-1===s[0].indexOf("west")&&("x"!==s[0]&&"lon"!==s[0]||"west"!==s[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function r(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",EM],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",EM],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",EM],["lat0","latitude_of_origin",EM],["lat0","standard_parallel_1",EM],["lat1","standard_parallel_1",EM],["lat2","standard_parallel_2",EM],["azimuth","Azimuth"],["alpha","azimuth",EM],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=EM(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(s),s}function SM(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?SM[t]=mM(arguments[1]):SM[t]=FM(arguments[1]):SM[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?SM.apply(e,t):SM(t)}));if("string"==typeof t){if(t in SM)return SM[t]}else"EPSG"in t?SM["EPSG:"+t.EPSG]=t:"ESRI"in t?SM["ESRI:"+t.ESRI]=t:"IAU2000"in t?SM["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(SM);var IM=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var MM=["3857","900913","3785","102113"];function LM(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in SM}(t))return SM[t];if(function(t){return IM.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=FM(t);if(function(t){var e=fM(t,"authority");if(e){var i=fM(e,"epsg");return i&&MM.indexOf(i)>-1}}(e))return SM["EPSG:3857"];var i=function(t){var e=fM(t,"extension");if(e)return fM(e,"proj4")}(e);return i?mM(i):e}return function(t){return"+"===t[0]}(t)?mM(t):void 0}function UM(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}function QM(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function TM(t){return t<0?-1:1}function kM(t){return Math.abs(t)<=uM?t:t-TM(t)*cM}function RM(t,e,i){var n=t*i,s=.5*t;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(rM-e))/n}function PM(t,e){for(var i,n,s=.5*t,o=rM-2*Math.atan(e),r=0;r<=15;r++)if(i=t*Math.sin(o),o+=n=rM-2*Math.atan(e*Math.pow((1-i)/(1+i),s))-o,Math.abs(n)<=1e-10)return o;return-9999}function DM(t){return t}var OM=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=QM(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,s=t.y;if(s*lM>90&&s*lM<-90&&n*lM>180&&n*lM<-180)return null;if(Math.abs(Math.abs(s)-rM)<=AM)return null;if(this.sphere)e=this.x0+this.a*this.k0*kM(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(hM+.5*s));else{var o=Math.sin(s),r=RM(this.e,s,o);e=this.x0+this.a*this.k0*kM(n-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,s=t.y-this.y0;if(this.sphere)i=rM-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var o=Math.exp(-s/(this.a*this.k0));if(-9999===(i=PM(this.e,o)))return null}return e=kM(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:DM,inverse:DM,names:["longlat","identity"]}],NM={},HM=[];function GM(t,e){var i=HM.length;return t.names?(HM[i]=t,t.names.forEach((function(t){NM[t.toLowerCase()]=i})),this):(console.log(e),!0)}var KM={start:function(){OM.forEach(GM)},add:GM,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==NM[e]&&HM[NM[e]]?HM[NM[e]]:void 0}},VM={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},WM=VM.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};VM.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var zM={};zM.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},zM.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},zM.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},zM.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},zM.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},zM.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},zM.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},zM.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},zM.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},zM.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},zM.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},zM.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},zM.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},zM.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},zM.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},zM.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},zM.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var XM={};function YM(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:XM[t]||null,isNull:!1}}function qM(t){return t/3600*Math.PI/180}function jM(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function JM(t){return t.map((function(t){return[qM(t.longitudeShift),qM(t.latitudeShift)]}))}function ZM(t,e,i){return{name:jM(t,e+8,e+16).trim(),parent:jM(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function $M(t,e,i,n){for(var s=e+176,o=[],r=0;r<i.gridNodeCount;r++){var A={latitudeShift:t.getFloat32(s+16*r,n),longitudeShift:t.getFloat32(s+16*r+4,n),latitudeAccuracy:t.getFloat32(s+16*r+8,n),longitudeAccuracy:t.getFloat32(s+16*r+12,n)};o.push(A)}return o}function tL(t,e){if(!(this instanceof tL))return new tL(t);e=e||function(t){if(t)throw t};var i=LM(t);if("object"==typeof i){var n=tL.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var s=fM(zM,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var o=function(t,e,i,n,s){if(!t){var o=fM(VM,n);o||(o=WM),t=o.a,e=o.b,i=o.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<AM)&&(s=!0,e=t),{a:t,b:e,rf:i,sphere:s}}(i.a,i.b,i.rf,i.ellps,i.sphere),r=function(t,e,i,n){var s=t*t,o=e*e,r=(s-o)/s,A=0;return n?(s=(t*=1-r*(.16666666666666666+r*(.04722222222222222+.022156084656084655*r)))*t,r=0):A=Math.sqrt(r),{es:r,e:A,ep2:(s-o)/o}}(o.a,o.b,o.rf,i.R_A),A=function(t){return void 0===t?null:t.split(",").map(YM)}(i.nadgrids),a=i.datum||function(t,e,i,n,s,o,r){var A={};return A.datum_type=void 0===t||"none"===t?5:4,e&&(A.datum_params=e.map(parseFloat),0===A.datum_params[0]&&0===A.datum_params[1]&&0===A.datum_params[2]||(A.datum_type=1),A.datum_params.length>3&&(0===A.datum_params[3]&&0===A.datum_params[4]&&0===A.datum_params[5]&&0===A.datum_params[6]||(A.datum_type=2,A.datum_params[3]*=oM,A.datum_params[4]*=oM,A.datum_params[5]*=oM,A.datum_params[6]=A.datum_params[6]/1e6+1))),r&&(A.datum_type=3,A.grids=r),A.a=i,A.b=n,A.es=s,A.ep2=o,A}(i.datumCode,i.datum_params,o.a,o.b,r.es,r.ep2,A);UM(this,i),UM(this,n),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=a,this.init(),e(null,this)}else e(t)}else e(t)}function eL(t,e,i){var n,s,o,r,A=t.x,a=t.y,l=t.z?t.z:0;if(a<-rM&&a>-1.001*rM)a=-rM;else if(a>rM&&a<1.001*rM)a=rM;else{if(a<-rM)return{x:-1/0,y:-1/0,z:t.z};if(a>rM)return{x:1/0,y:1/0,z:t.z}}return A>Math.PI&&(A-=2*Math.PI),s=Math.sin(a),r=Math.cos(a),o=s*s,{x:((n=i/Math.sqrt(1-e*o))+l)*r*Math.cos(A),y:(n+l)*r*Math.sin(A),z:(n*(1-e)+l)*s}}function iL(t,e,i,n){var s,o,r,A,a,l,h,c,u,d,g,p,f,m,y,_=1e-12,B=t.x,w=t.y,C=t.z?t.z:0;if(s=Math.sqrt(B*B+w*w),o=Math.sqrt(B*B+w*w+C*C),s/i<_){if(m=0,o/i<_)return rM,y=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(w,B);r=C/o,c=(A=s/o)*(1-e)*(a=1/Math.sqrt(1-e*(2-e)*A*A)),u=r*a,f=0;do{f++,l=e*(h=i/Math.sqrt(1-e*u*u))/(h+(y=s*c+C*u-h*(1-e*u*u))),p=(g=r*(a=1/Math.sqrt(1-l*(2-l)*A*A)))*c-(d=A*(1-l)*a)*u,c=d,u=g}while(p*p>1e-24&&f<30);return{x:m,y:Math.atan(g/Math.abs(d)),z:y}}function nL(t){return 1===t||2===t}function sL(t,e,i){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return i;if(5===t.datum_type||5===e.datum_type)return i;var n=t.a,s=t.es;if(3===t.datum_type){if(0!==oL(t,!1,i))return;n=nM,s=sM}var o=e.a,r=e.b,A=e.es;if(3===e.datum_type&&(o=nM,r=6356752.314,A=sM),s===A&&n===o&&!nL(t.datum_type)&&!nL(e.datum_type))return i;if((i=eL(i,s,n),nL(t.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(2===e){var n=i[0],s=i[1],o=i[2],r=i[3],A=i[4],a=i[5],l=i[6];return{x:l*(t.x-a*t.y+A*t.z)+n,y:l*(a*t.x+t.y-r*t.z)+s,z:l*(-A*t.x+r*t.y+t.z)+o}}}(i,t.datum_type,t.datum_params)),nL(e.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(2===e){var n=i[0],s=i[1],o=i[2],r=i[3],A=i[4],a=i[5],l=i[6],h=(t.x-n)/l,c=(t.y-s)/l,u=(t.z-o)/l;return{x:h+a*c-A*u,y:-a*h+c+r*u,z:A*h-r*c+u}}}(i,e.datum_type,e.datum_params)),i=iL(i,A,o,r),3===e.datum_type)&&0!==oL(e,!0,i))return;return i}function oL(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},o=[],r=0;r<t.grids.length;r++){var A=t.grids[r];if(o.push(A.name),A.isNull){s=n;break}if(A.mandatory,null!==A.grid){var a=A.grid.subgrids[0],l=(Math.abs(a.del[1])+Math.abs(a.del[0]))/1e4,h=a.ll[0]-l,c=a.ll[1]-l,u=a.ll[0]+(a.lim[0]-1)*a.del[0]+l,d=a.ll[1]+(a.lim[1]-1)*a.del[1]+l;if(!(c>n.y||h>n.x||d<n.y||u<n.x||(s=rL(n,e,a),isNaN(s.x))))break}else if(A.mandatory)return console.log("Unable to find mandatory grid '"+A.name+"'"),-1}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*lM+" "+n.y*lM+" tried: '"+o+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function rL(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var s={x:t.x,y:t.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=kM(s.x-Math.PI)+Math.PI;var o=AL(s,i);if(e){if(isNaN(o.x))return n;o.x=s.x-o.x,o.y=s.y-o.y;var r,A,a=9;do{if(A=AL(o,i),isNaN(A.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r={x:s.x-(A.x+o.x),y:s.y-(A.y+o.y)},o.x+=r.x,o.y+=r.y}while(a--&&Math.abs(r.x)>1e-12&&Math.abs(r.y)>1e-12);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=kM(o.x+i.ll[0]),n.y=o.y+i.ll[1]}else isNaN(o.x)||(n.x=t.x+o.x,n.y=t.y+o.y);return n}function AL(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},s=Math.floor(n.x),o=Math.floor(n.y),r=n.x-1*s,A=n.y-1*o,a={x:Number.NaN,y:Number.NaN};if(s<0||s>=e.lim[0])return a;if(o<0||o>=e.lim[1])return a;i=o*e.lim[0]+s;var l=e.cvs[i][0],h=e.cvs[i][1];i++;var c=e.cvs[i][0],u=e.cvs[i][1];i+=e.lim[0];var d=e.cvs[i][0],g=e.cvs[i][1];i--;var p=e.cvs[i][0],f=e.cvs[i][1],m=r*A,y=r*(1-A),_=(1-r)*(1-A),B=(1-r)*A;return a.x=_*l+y*c+B*p+m*d,a.y=_*h+y*u+B*f+m*g,a}function aL(t,e,i){var n,s,o,r=i.x,A=i.y,a=i.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==i.z)switch(0===o?(n=r,s=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(n=A,s=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(n=a,s="z"),t.axis[o]){case"e":case"n":l[s]=n;break;case"w":case"s":l[s]=-n;break;case"u":void 0!==i[s]&&(l.z=n);break;case"d":void 0!==i[s]&&(l.z=-n);break;default:return null}return l}function lL(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function hL(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function cL(t,e,i,n){var s;if(Array.isArray(i)&&(i=lL(i)),function(t){hL(t.x),hL(t.y)}(i),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(i=cL(t,s=new tL("WGS84"),i,n),t=s),n&&"enu"!==t.axis&&(i=aL(t,!1,i)),"longlat"===t.projName)i={x:i.x*aM,y:i.y*aM,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=sL(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*lM,y:i.y*lM,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?aL(e,!0,i):i}tL.projections=KM,tL.projections.start();var uL=tL("WGS84");function dL(t,e,i,n){var s,o,r;return Array.isArray(i)?(s=cL(t,e,i,n)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof s.z?[s.x,s.y,s.z].concat(i.splice(3)):[s.x,s.y,i[2]].concat(i.splice(3)):[s.x,s.y].concat(i.splice(2)):[s.x,s.y]):(o=cL(t,e,i,n),2===(r=Object.keys(i)).length||r.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=i[n]})),o)}function gL(t){return t instanceof tL?t:t.oProj?t.oProj:tL(t)}function pL(t,e,i){t=gL(t);var n,s=!1;return void 0===e?(e=t,t=uL,s=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=uL,s=!0),e=gL(e),i?dL(t,e,i):(n={forward:function(i,n){return dL(t,e,i,n)},inverse:function(i,n){return dL(e,t,i,n)}},s&&(n.oProj=e),n)}var fL="AJSAJS",mL="AFAFAF",yL=65,_L=73,BL=79,wL=86,CL=90,bL={forward:vL,inverse:function(t){var e=SL(LL(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:xL};function vL(t,e){return e=e||5,function(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,g=t.northing,p=t.zoneNumber,f=ML(p),m=Math.floor(d/1e5),y=Math.floor(g/1e5)%20,s=m,o=y,r=f,A=r-1,a=fL.charCodeAt(A),l=mL.charCodeAt(A),h=a+s-1,c=l+o,u=!1,h>CL&&(h=h-CL+yL-1,u=!0),(h===_L||a<_L&&h>_L||(h>_L||a<_L)&&u)&&h++,(h===BL||a<BL&&h>BL||(h>BL||a<BL)&&u)&&++h===_L&&h++,h>CL&&(h=h-CL+yL-1),c>wL?(c=c-wL+yL-1,u=!0):u=!1,(c===_L||l<_L&&c>_L||(c>_L||l<_L)&&u)&&c++,(c===BL||l<BL&&c>BL||(c>BL||l<BL)&&u)&&++c===_L&&c++,c>wL&&(c=c-wL+yL-1),String.fromCharCode(h)+String.fromCharCode(c))+i.substr(i.length-5,e)+n.substr(n.length-5,e);var s,o,r,A,a,l,h,c,u;var d,g,p,f,m,y}(function(t){var e,i,n,s,o,r,A,a,l=t.lat,h=t.lon,c=6378137,u=.00669438,d=.9996,g=EL(l),p=EL(h);a=Math.floor((h+180)/6)+1,180===h&&(a=60);l>=56&&l<64&&h>=3&&h<12&&(a=32);l>=72&&l<84&&(h>=0&&h<9?a=31:h>=9&&h<21?a=33:h>=21&&h<33?a=35:h>=33&&h<42&&(a=37));A=EL(6*(a-1)-180+3),e=u/(1-u),i=c/Math.sqrt(1-u*Math.sin(g)*Math.sin(g)),n=Math.tan(g)*Math.tan(g),s=e*Math.cos(g)*Math.cos(g),o=Math.cos(g)*(p-A),r=c*((1-u/4-3*u*u/64-5*u*u*u/256)*g-(3*u/8+3*u*u/32+45*u*u*u/1024)*Math.sin(2*g)+(15*u*u/256+45*u*u*u/1024)*Math.sin(4*g)-35*u*u*u/3072*Math.sin(6*g));var f=d*i*(o+(1-n+s)*o*o*o/6+(5-18*n+n*n+72*s-58*e)*o*o*o*o*o/120)+5e5,m=d*(r+i*Math.tan(g)*(o*o/2+(5-n+9*s+4*s*s)*o*o*o*o/24+(61-58*n+n*n+600*s-330*e)*o*o*o*o*o*o/720));l<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(f),zoneNumber:a,zoneLetter:IL(l)}}({lat:t[1],lon:t[0]}),e)}function xL(t){var e=SL(LL(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function EL(t){return t*(Math.PI/180)}function FL(t){return t/Math.PI*180}function SL(t){var e=t.northing,i=t.easting,n=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var o,r,A,a,l,h,c,u,d,g=.9996,p=6378137,f=.00669438,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=i-5e5,_=e;n<"N"&&(_-=1e7),c=6*(s-1)-180+3,o=.006739496752268451,d=(u=_/g/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*u)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*u)+151*m*m*m/96*Math.sin(6*u),r=p/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),A=Math.tan(d)*Math.tan(d),a=o*Math.cos(d)*Math.cos(d),l=.99330562*p/Math.pow(1-f*Math.sin(d)*Math.sin(d),1.5),h=y/(r*g);var B=d-r*Math.tan(d)/l*(h*h/2-(5+3*A+10*a-4*a*a-9*o)*h*h*h*h/24+(61+90*A+298*a+45*A*A-1.6983531815716497-3*a*a)*h*h*h*h*h*h/720);B=FL(B);var w,C=(h-(1+2*A+a)*h*h*h/6+(5-2*a+28*A-3*a*a+8*o+24*A*A)*h*h*h*h*h/120)/Math.cos(d);if(C=c+FL(C),t.accuracy){var b=SL({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:b.lat,right:b.lon,bottom:B,left:C}}else w={lat:B,lon:C};return w}function IL(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function ML(t){var e=t%6;return 0===e&&(e=6),e}function LL(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,s="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;s+=e,o++}var r=parseInt(s,10);if(0===o||o+3>i)throw"MGRSPoint bad conversion from: "+t;var A=t.charAt(o++);if(A<="A"||"B"===A||"Y"===A||A>="Z"||"I"===A||"O"===A)throw"MGRSPoint zone letter "+A+" not handled: "+t;n=t.substring(o,o+=2);for(var a=ML(r),l=function(t,e){var i=fL.charCodeAt(e-1),n=1e5,s=!1;for(;i!==t.charCodeAt(0);){if(++i===_L&&i++,i===BL&&i++,i>CL){if(s)throw"Bad character: "+t;i=yL,s=!0}n+=1e5}return n}(n.charAt(0),a),h=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=mL.charCodeAt(e-1),n=0,s=!1;for(;i!==t.charCodeAt(0);){if(++i===_L&&i++,i===BL&&i++,i>wL){if(s)throw"Bad character: "+t;i=yL,s=!0}n+=1e5}return n}(n.charAt(1),a);h<UL(A);)h+=2e6;var c=i-o;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var u,d,g,p=c/2,f=0,m=0;return p>0&&(u=1e5/Math.pow(10,p),d=t.substring(o,o+p),f=parseFloat(d)*u,g=t.substring(o+p),m=parseFloat(g)*u),{easting:f+l,northing:m+h,zoneLetter:A,zoneNumber:r,accuracy:u}}function UL(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function QL(t,e,i){if(!(this instanceof QL))return new QL(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}QL.fromMGRS=function(t){return new QL(xL(t))},QL.prototype.toMGRS=function(t){return vL([this.x,this.y],t)};var TL=.046875,kL=.01953125,RL=.01068115234375;function PL(t){var e=[];e[0]=1-t*(.25+t*(TL+t*(kL+t*RL))),e[1]=t*(.75-t*(TL+t*(kL+t*RL)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function DL(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function OL(t,e,i){for(var n=1/(1-e),s=t,o=20;o;--o){var r=Math.sin(s),A=1-e*r*r;if(s-=A=(DL(s,r,Math.cos(s),i)-t)*(A*Math.sqrt(A))*n,Math.abs(A)<AM)return s}return s}var NL={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=PL(this.es),this.ml0=DL(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,s=t.x,o=t.y,r=kM(s-this.long0),A=Math.sin(o),a=Math.cos(o);if(this.es){var l=a*r,h=Math.pow(l,2),c=this.ep2*Math.pow(a,2),u=Math.pow(c,2),d=Math.abs(a)>AM?Math.tan(o):0,g=Math.pow(d,2),p=Math.pow(g,2);e=1-this.es*Math.pow(A,2),l/=Math.sqrt(e);var f=DL(o,A,a,this.en);i=this.a*(this.k0*l*(1+h/6*(1-g+c+h/20*(5-18*g+p+14*c-58*g*c+h/42*(61+179*p-p*g-479*g)))))+this.x0,n=this.a*(this.k0*(f-this.ml0+A*r*l/2*(1+h/12*(5-g+9*c+4*u+h/30*(61+p-58*g+270*c-330*g*c+h/56*(1385+543*p-p*g-3111*g))))))+this.y0}else{var m=a*Math.sin(r);if(Math.abs(Math.abs(m)-1)<AM)return 93;if(i=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=a*Math.cos(r)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>AM)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,s,o=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(this.es)if(i=OL(e=this.ml0+r/this.k0,this.es,this.en),Math.abs(i)<rM){var A=Math.sin(i),a=Math.cos(i),l=Math.abs(a)>AM?Math.tan(i):0,h=this.ep2*Math.pow(a,2),c=Math.pow(h,2),u=Math.pow(l,2),d=Math.pow(u,2);e=1-this.es*Math.pow(A,2);var g=o*Math.sqrt(e)/this.k0,p=Math.pow(g,2);n=i-(e*=l)*p/(1-this.es)*.5*(1-p/12*(5+3*u-9*h*u+h-4*c-p/30*(61+90*u-252*h*u+45*d+46*h-p/56*(1385+3633*u+4095*d+1574*d*u)))),s=kM(this.long0+g*(1-p/6*(1+2*u+h-p/20*(5+28*u+24*d+8*h*u+6*h-p/42*(61+662*u+1320*d+720*d*u))))/a)}else n=rM*TM(r),s=0;else{var f=Math.exp(o/this.k0),m=.5*(f-1/f),y=this.lat0+r/this.k0,_=Math.cos(y);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(m,2))),n=Math.asin(e),r<0&&(n=-n),s=0===m&&0===_?0:kM(Math.atan2(m,_)+this.long0)}return t.x=s,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function HL(t){var e=Math.exp(t);return e=(e-1/e)/2}function GL(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function KL(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(GL(1,e)+1))),t<0?-e:e}function VL(t,e){for(var i,n=2*Math.cos(2*e),s=t.length-1,o=t[s],r=0;--s>=0;)i=n*o-r+t[s],r=o,o=i;return e+i*Math.sin(2*e)}function WL(t,e,i){for(var n,s,o=Math.sin(e),r=Math.cos(e),A=HL(i),a=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),l=2*r*a,h=-2*o*A,c=t.length-1,u=t[c],d=0,g=0,p=0;--c>=0;)n=g,s=d,u=l*(g=u)-n-h*(d=p)+t[c],p=h*g-s+l*d;return[(l=o*a)*u-(h=r*A)*p,l*p+h*u]}var zL={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(NL.init.apply(this),this.forward=NL.forward,this.inverse=NL.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=VL(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var i,n=2*Math.cos(e),s=t.length-1,o=t[s],r=0;--s>=0;)i=n*o-r+t[s],r=o,o=i;return Math.sin(e)*i}(this.gtu,2*n))},forward:function(t){var e=kM(t.x-this.long0),i=t.y;i=VL(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),o=Math.sin(e),r=Math.cos(e);i=Math.atan2(n,r*s),e=Math.atan2(o*s,GL(n,s*r)),e=KL(Math.tan(e));var A,a,l=WL(this.gtu,2*i,2*e);return i+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(A=this.a*(this.Qn*e)+this.x0,a=this.a*(this.Qn*i+this.Zb)+this.y0):(A=1/0,a=1/0),t.x=A,t.y=a,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=WL(this.utg,2*s,2*n);s+=o[0],n+=o[1],n=Math.atan(HL(n));var r=Math.sin(s),A=Math.cos(s),a=Math.sin(n),l=Math.cos(n);s=Math.atan2(r*l,GL(a,l*A)),e=kM((n=Math.atan2(a,l*A))+this.long0),i=VL(this.cgb,s)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var XL={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(kM(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*aM,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,zL.init.apply(this),this.forward=zL.forward,this.inverse=zL.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function YL(t,e){return Math.pow((1-t)/(1+t),e)}var qL={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+hM)/(Math.pow(Math.tan(.5*this.lat0+hM),this.C)*YL(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+hM),this.C)*YL(this.e*Math.sin(i),this.ratexp))-rM,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+hM)/this.K,1/this.C),s=20;s>0&&(i=2*Math.atan(n*YL(this.e*Math.sin(t.y),-.5*this.e))-rM,!(Math.abs(i-t.y)<1e-14));--s)t.y=i;return s?(t.x=e,t.y=i,t):null},names:["gauss"]};var jL={init:function(){qL.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,s;return t.x=kM(t.x-this.long0),qL.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=s*i*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,s,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var r=2*Math.atan2(o,this.R2);e=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else s=this.phic0,n=0;return t.x=n,t.y=s,qL.inverse.apply(this,[t]),t.x=kM(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var JL={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=AM&&(this.k0=.5*(1+TM(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=AM&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=AM&&(this.k0=.5*this.cons*QM(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/RM(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=QM(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-rM,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,s,o,r,A=t.x,a=t.y,l=Math.sin(a),h=Math.cos(a),c=kM(A-this.long0);return Math.abs(Math.abs(A-this.long0)-Math.PI)<=AM&&Math.abs(a+this.lat0)<=AM?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*h*Math.cos(c)),t.x=this.a*e*h*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*h*Math.cos(c))+this.y0,t):(i=2*Math.atan(this.ssfn_(a,l,this.e))-rM,s=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=AM?(o=RM(this.e,a*this.con,this.con*l),r=2*this.a*this.k0*o/this.cons,t.x=this.x0+r*Math.sin(A-this.long0),t.y=this.y0-this.con*r*Math.cos(A-this.long0),t):(Math.abs(this.sinlat0)<AM?(e=2*this.a*this.k0/(1+s*Math.cos(c)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*s*Math.cos(c))),t.y=e*(this.cosX0*n-this.sinX0*s*Math.cos(c))+this.y0),t.x=e*s*Math.sin(c)+this.x0,t))},inverse:function(t){var e,i,n,s,o;t.x-=this.x0,t.y-=this.y0;var r=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var A=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,i=this.lat0,r<=AM?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(A)*this.sinlat0+t.y*Math.sin(A)*this.coslat0/r),e=Math.abs(this.coslat0)<AM?this.lat0>0?kM(this.long0+Math.atan2(t.x,-1*t.y)):kM(this.long0+Math.atan2(t.x,t.y)):kM(this.long0+Math.atan2(t.x*Math.sin(A),r*this.coslat0*Math.cos(A)-t.y*this.sinlat0*Math.sin(A))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=AM){if(r<=AM)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=r*this.cons/(2*this.a*this.k0),i=this.con*PM(this.e,n),e=this.con*kM(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=AM?o=this.X0:(o=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/r),e=kM(this.long0+Math.atan2(t.x*Math.sin(s),r*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),i=-1*PM(this.e,Math.tan(.5*(rM+o)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(rM+t))*Math.pow((1-e)/(1+e),.5*i)}};var ZL={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),A=Math.log(Math.tan(Math.PI/4+t/2)),a=Math.log((1+o*e)/(1-o*e));this.K=r-this.alpha*A+this.alpha*o/2*a},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(o))),A=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(A))/(1-Math.sin(A)))+this.y0,t.x=this.R*r+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),A=this.lambda0+r/this.alpha,a=0,l=o,h=-1e3,c=0;Math.abs(l-h)>1e-7;){if(++c>20)return;a=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),h=l,l=2*Math.atan(Math.exp(a))-Math.PI/2}return t.x=A,t.y=l,t},names:["somerc"]},$L=1e-7;var tU={init:function(){var t,e,i,n,s,o,r,A,a,l,h,c,u,d=0,g=0,p=0,f=0,m=0,y=0,_=0;this.no_off=(u="object"==typeof(c=this).PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(u)),this.no_rot="no_rot"in this;var B=!1;"alpha"in this&&(B=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),B&&(_=this.alpha),w&&(d=this.rectified_grid_angle*aM),B||w)g=this.longc;else if(p=this.long1,m=this.lat1,f=this.long2,y=this.lat2,Math.abs(m-y)<=$L||(t=Math.abs(m))<=$L||Math.abs(t-rM)<=$L||Math.abs(Math.abs(this.lat0)-rM)<=$L||Math.abs(Math.abs(y)-rM)<=$L)throw new Error;var C=1-this.es;e=Math.sqrt(C),Math.abs(this.lat0)>AM?(A=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*A*A,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*e/t,(s=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(RM(this.e,this.lat0,A),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=s=1),B||w?(B?(h=Math.asin(Math.sin(_)/n),w||(d=_)):(h=d,_=Math.asin(n*Math.sin(h))),this.lam0=g-Math.asin(.5*(s-1/s)*Math.tan(h))/this.B):(o=Math.pow(RM(this.e,m,Math.sin(m)),this.B),r=Math.pow(RM(this.e,y,Math.sin(y)),this.B),s=this.E/o,a=(r-o)/(r+o),l=((l=this.E*this.E)-r*o)/(l+r*o),(t=p-f)<-Math.pi?f-=cM:t>Math.pi&&(f+=cM),this.lam0=kM(.5*(p+f)-Math.atan(l*Math.tan(.5*this.B*(p-f))/a)/this.B),h=Math.atan(2*Math.sin(this.B*kM(p-this.lam0))/(s-1/s)),d=_=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(hM-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(hM+s))},forward:function(t){var e,i,n,s,o,r,A,a,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-rM)>AM){if(e=.5*((o=this.E/Math.pow(RM(this.e,t.y,Math.sin(t.y)),this.B))-(r=1/o)),i=.5*(o+r),s=Math.sin(this.B*t.x),n=(e*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<AM)throw new Error;a=.5*this.ArB*Math.log((1-n)/(1+n)),r=Math.cos(this.B*t.x),A=Math.abs(r)<$L?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+s*this.singam,r)}else a=t.y>0?this.v_pole_n:this.v_pole_s,A=this.ArB*t.y;return this.no_rot?(l.x=A,l.y=a):(A-=this.u_0,l.x=a*this.cosrot+A*this.sinrot,l.y=A*this.cosrot-a*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,i,n,s,o,r,A,a={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),s=.5*((n=Math.exp(-this.BrA*i))-1/n),o=.5*(n+1/n),A=((r=Math.sin(this.BrA*e))*this.cosgam+s*this.singam)/o,Math.abs(Math.abs(A)-1)<AM)a.x=0,a.y=A<0?-rM:rM;else{if(a.y=this.E/Math.sqrt((1+A)/(1-A)),a.y=PM(this.e,Math.pow(a.y,1/this.B)),a.y===1/0)throw new Error;a.x=-this.rB*Math.atan2(s*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return a.x+=this.lam0,a},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var eU={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<AM)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=QM(this.e,e,i),s=RM(this.e,this.lat1,e),o=Math.sin(this.lat2),r=Math.cos(this.lat2),A=QM(this.e,o,r),a=RM(this.e,this.lat2,o),l=RM(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>AM?this.ns=Math.log(n/A)/Math.log(s/a):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=AM&&(i=TM(i)*(rM-2e-10));var n,s,o=Math.abs(Math.abs(i)-rM);if(o>AM)n=RM(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if((o=i*this.ns)<=0)return null;s=0}var r=this.ns*kM(e-this.long0);return t.x=this.k0*(s*Math.sin(r))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,t},inverse:function(t){var e,i,n,s,o,r=(t.x-this.x0)/this.k0,A=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+A*A),i=1):(e=-Math.sqrt(r*r+A*A),i=-1);var a=0;if(0!==e&&(a=Math.atan2(i*r,i*A)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(s=PM(this.e,n)))return null}else s=-rM;return o=kM(a/this.ns+this.long0),t.x=o,t.y=s,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var iU={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,s,o,r,A,a=t.x,l=t.y,h=kM(a-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-h*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),r=this.n*o,A=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=A*Math.cos(r)/1,t.x=A*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,s,o,r,A,a=t.x;t.x=t.y,t.y=a,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(e)),t.x=this.long0-i/this.alfa,r=e,A=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(A=1),r=t.y,l+=1}while(0===A&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function nU(t,e,i,n,s){return t*s-e*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)}function sU(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function oU(t){return.375*t*(1+.25*t*(1+.46875*t))}function rU(t){return.05859375*t*t*(1+.75*t)}function AU(t){return t*t*t*(35/3072)}function aU(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function lU(t){return Math.abs(t)<rM?t:t-TM(t)*Math.PI}function hU(t,e,i,n,s){var o,r;o=t/e;for(var A=0;A<15;A++)if(o+=r=(t-(e*o-i*Math.sin(2*o)+n*Math.sin(4*o)-s*Math.sin(6*o)))/(e-2*i*Math.cos(2*o)+4*n*Math.cos(4*o)-6*s*Math.cos(6*o)),Math.abs(r)<=1e-10)return o;return NaN}var cU={init:function(){this.sphere||(this.e0=sU(this.es),this.e1=oU(this.es),this.e2=rU(this.es),this.e3=AU(this.es),this.ml0=this.a*nU(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,s=t.y;if(n=kM(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var o=Math.sin(s),r=Math.cos(s),A=aU(this.a,this.e,o),a=Math.tan(s)*Math.tan(s),l=n*Math.cos(s),h=l*l,c=this.es*r*r/(1-this.es);e=A*l*(1-h*a*(1/6-(8-a+8*c)*h/120)),i=this.a*nU(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+A*o/r*h*(.5+(5-a+6*c)*h/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,s=t.y/this.a;if(this.sphere){var o=s+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(o))}else{var r=hU(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-rM)<=AM)return t.x=this.long0,t.y=rM,s<0&&(t.y*=-1),t;var A=aU(this.a,this.e,Math.sin(r)),a=A*A*A/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(r),2),h=n*this.a/A,c=h*h;e=r-A*Math.tan(r)/a*h*h*(.5-(1+3*l)*h*h/24),i=h*(1-c*(l/3+(1+3*l)*l*c/15))/Math.cos(r)}return t.x=kM(i+this.long0),t.y=lU(e),t},names:["Cassini","Cassini_Soldner","cass"]};function uU(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var dU=.3333333333333333,gU=.17222222222222222,pU=.10257936507936508,fU=.06388888888888888,mU=.0664021164021164,yU=.016415012942191543;var _U={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-rM)<AM?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<AM?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=uU(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=t*dU,e=t*t,i[0]+=e*gU,i[1]=e*fU,e*=t,i[0]+=e*pU,i[1]+=e*mU,i[2]=e*yU,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=uU(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,s,o,r,A,a,l,h,c=t.x,u=t.y;if(c=kM(c-this.long0),this.sphere){if(o=Math.sin(u),h=Math.cos(u),n=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+h*n:1+this.sinph0*o+this.cosph0*h*n)<=AM)return null;e=(i=Math.sqrt(2/i))*h*Math.sin(c),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(u+this.lat0)<AM)return null;i=hM-.5*u,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(c),i*=n}}else{switch(A=0,a=0,l=0,n=Math.cos(c),s=Math.sin(c),o=Math.sin(u),r=uU(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(A=r/this.qp,a=Math.sqrt(1-A*A)),this.mode){case this.OBLIQ:l=1+this.sinb1*A+this.cosb1*a*n;break;case this.EQUIT:l=1+a*n;break;case this.N_POLE:l=rM+u,r=this.qp-r;break;case this.S_POLE:l=u-rM,r=this.qp+r}if(Math.abs(l)<AM)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*A-this.sinb1*a*n):(l=Math.sqrt(2/(1+a*n)))*A*this.ymf,e=this.xmf*l*a*s;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(l=Math.sqrt(r))*s,i=n*(this.mode===this.S_POLE?l:-l)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,s,o,r,A,a,l,h,c=t.x/this.a,u=t.y/this.a;if(this.sphere){var d,g=0,p=0;if((i=.5*(d=Math.sqrt(c*c+u*u)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(i),g=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=AM?0:Math.asin(u*p/d),c*=p,u=g*d;break;case this.OBLIQ:i=Math.abs(d)<=AM?this.lat0:Math.asin(g*this.sinph0+u*p*this.cosph0/d),c*=p*this.cosph0,u=(g-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:u=-u,i=rM-i;break;case this.S_POLE:i-=rM}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,u):0}else{if(A=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,u*=this.dd,(r=Math.sqrt(c*c+u*u))<AM)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*r/this.rq),n=Math.cos(s),c*=s=Math.sin(s),this.mode===this.OBLIQ?(A=n*this.sinb1+u*s*this.cosb1/r,o=this.qp*A,u=r*this.cosb1*n-u*this.sinb1*s):(A=u*s/r,o=this.qp*A,u=r*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=c*c+u*u))return t.x=this.long0,t.y=this.lat0,t;A=1-o/this.qp,this.mode===this.S_POLE&&(A=-A)}e=Math.atan2(c,u),a=Math.asin(A),l=this.apa,h=a+a,i=a+l[0]*Math.sin(h)+l[1]*Math.sin(h+h)+l[2]*Math.sin(h+h+h)}return t.x=kM(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function BU(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var wU={init:function(){Math.abs(this.lat1+this.lat2)<AM||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=QM(this.e3,this.sin_po,this.cos_po),this.qs1=uU(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=QM(this.e3,this.sin_po,this.cos_po),this.qs2=uU(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=uU(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>AM?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=uU(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*kM(e-this.long0),r=s*Math.sin(o)+this.x0,A=this.rh-s*Math.cos(o)+this.y0;return t.x=r,t.y=A,t},inverse:function(t){var e,i,n,s,o,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),s=0,0!==e&&(s=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,r=this.phi1z(this.e3,i)),o=kM(s/this.ns0+this.long0),t.x=o,t.y=r,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,s,o,r=BU(.5*e);if(t<AM)return r;for(var A=t*t,a=1;a<=25;a++)if(r+=o=.5*(s=1-(n=t*(i=Math.sin(r)))*n)*s/Math.cos(r)*(e/(1-A)-i/s+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return r;return null}};var CU={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,s,o,r,A,a=t.x,l=t.y;return n=kM(a-this.long0),e=Math.sin(l),i=Math.cos(l),s=Math.cos(n),1,(o=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(o)<=AM?(r=this.x0+1*this.a*i*Math.sin(n)/o,A=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)/o):(r=this.x0+this.infinity_dist*i*Math.sin(n),A=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*s)),t.x=r,t.y=A,t},inverse:function(t){var e,i,n,s,o,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),i=Math.sin(s),r=BU((n=Math.cos(s))*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),o=kM(this.long0+o)):(r=this.phic0,o=0),t.x=o,t.y=r,t},names:["gnom"]};var bU={init:function(){this.sphere||(this.k0=QM(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,s=t.y,o=kM(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var r=uU(this.e,Math.sin(s));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*r*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=kM(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*rM:rM;for(var n,s,o,r,A=Math.asin(.5*e),a=0;a<30;a++)if(s=Math.sin(A),o=Math.cos(A),r=t*s,A+=n=Math.pow(1-r*r,2)/(2*o)*(e/(1-t*t)-s/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),Math.abs(n)<=1e-10)return A;return NaN}(this.e,2*t.y*this.k0/this.a),e=kM(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]};var vU={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=kM(e-this.long0),s=lU(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var e=t.x,i=t.y;return t.x=kM(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=lU(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var xU={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=sU(this.es),this.e1=oU(this.es),this.e2=rU(this.es),this.e3=AU(this.es),this.ml0=this.a*nU(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,s=t.x,o=t.y,r=kM(s-this.long0);if(n=r*Math.sin(o),this.sphere)Math.abs(o)<=AM?(e=this.a*r,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),i=this.a*(lU(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=AM)e=this.a*r,i=-1*this.ml0;else{var A=aU(this.a,this.e,Math.sin(o))/Math.tan(o);e=A*Math.sin(n),i=this.a*nU(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+A*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,s,o,r,A,a,l;if(n=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=AM)e=kM(n/this.a+this.long0),i=0;else{var h;for(r=this.lat0+s/this.a,A=n*n/this.a/this.a+r*r,a=r,o=20;o;--o)if(a+=l=-1*(r*(a*(h=Math.tan(a))+1)-a-.5*(a*a+A)*h)/((a-r)/h-1),Math.abs(l)<=AM){i=a;break}e=kM(this.long0+Math.asin(n*Math.tan(a)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=AM)i=0,e=kM(this.long0+n/this.a);else{var c,u,d,g,p;for(r=(this.ml0+s)/this.a,A=n*n/this.a/this.a+r*r,a=r,o=20;o;--o)if(p=this.e*Math.sin(a),c=Math.sqrt(1-p*p)*Math.tan(a),u=this.a*nU(this.e0,this.e1,this.e2,this.e3,a),d=this.e0-2*this.e1*Math.cos(2*a)+4*this.e2*Math.cos(4*a)-6*this.e3*Math.cos(6*a),a-=l=(r*(c*(g=u/this.a)+1)-g-.5*c*(g*g+A))/(this.es*Math.sin(2*a)*(g*g+A-2*r*g)/(4*c)+(r-g)*(c*d-2/Math.sin(2*a))-d),Math.abs(l)<=AM){i=a;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=kM(this.long0+Math.asin(n*c/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]};var EU={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,s=i-this.long0,o=n/oM*1e-5,r=s,A=1,a=0;for(e=1;e<=10;e++)A*=o,a+=this.A[e]*A;var l,h=a,c=r,u=1,d=0,g=0,p=0;for(e=1;e<=6;e++)l=d*h+u*c,u=u*h-d*c,d=l,g=g+this.B_re[e]*u-this.B_im[e]*d,p=p+this.B_im[e]*u+this.B_re[e]*d;return t.x=p*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,s=t.y,o=n-this.x0,r=(s-this.y0)/this.a,A=o/this.a,a=1,l=0,h=0,c=0;for(e=1;e<=6;e++)i=l*r+a*A,a=a*r-l*A,l=i,h=h+this.C_re[e]*a-this.C_im[e]*l,c=c+this.C_im[e]*a+this.C_re[e]*l;for(var u=0;u<this.iterations;u++){var d,g=h,p=c,f=r,m=A;for(e=2;e<=6;e++)d=p*h+g*c,g=g*h-p*c,p=d,f+=(e-1)*(this.B_re[e]*g-this.B_im[e]*p),m+=(e-1)*(this.B_im[e]*g+this.B_re[e]*p);g=1,p=0;var y=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)d=p*h+g*c,g=g*h-p*c,p=d,y+=e*(this.B_re[e]*g-this.B_im[e]*p),_+=e*(this.B_im[e]*g+this.B_re[e]*p);var B=y*y+_*_;h=(f*y+m*_)/B,c=(m*y-f*_)/B}var w=h,C=c,b=1,v=0;for(e=1;e<=9;e++)b*=w,v+=this.D[e]*b;var x=this.lat0+v*oM*1e5,E=this.long0+C;return t.x=E,t.y=x,t},names:["New_Zealand_Map_Grid","nzmg"]};var FU={init:function(){},forward:function(t){var e=t.x,i=t.y,n=kM(e-this.long0),s=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=kM(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]};var SU={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=PL(this.es)},forward:function(t){var e,i,n=t.x,s=t.y;if(n=kM(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(s),r=20;r;--r){var A=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=A,Math.abs(A)<AM)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var a=Math.sin(s),l=Math.cos(s);i=this.a*DL(s,a,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*a*a)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=BU((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=BU(Math.sin(e)/this.n)),i=kM(i+this.long0),e=lU(e)):(e=OL(t.y/this.a,this.es,this.en),(n=Math.abs(e))<rM?(n=Math.sin(e),i=kM(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-AM<rM&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]};var IU={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=kM(e-this.long0),s=i,o=Math.PI*Math.sin(i);;){var r=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=r,Math.abs(r)<AM)break}s/=2,Math.PI/2-Math.abs(i)<AM&&(n=0);var A=.900316316158*this.a*n*Math.cos(s)+this.x0,a=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=A,t.y=a,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=kM(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return t.x=n,t.y=s,t},names:["Mollweide","moll"]};var MU={init:function(){Math.abs(this.lat1+this.lat2)<AM||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=sU(this.es),this.e1=oU(this.es),this.e2=rU(this.es),this.e3=AU(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=QM(this.e,this.sinphi,this.cosphi),this.ml1=nU(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<AM?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=QM(this.e,this.sinphi,this.cosphi),this.ml2=nU(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=nU(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var s=nU(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-s)}var o=this.ns*kM(i-this.long0),r=this.x0+e*Math.sin(o),A=this.y0+this.rh-e*Math.cos(o);return t.x=r,t.y=A,t},inverse:function(t){var e,i,n,s;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==i&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(s=kM(this.long0+o/this.ns),n=lU(this.g-i/this.a),t.x=s,t.y=n,t):(n=hU(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),s=kM(this.long0+o/this.ns),t.x=s,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var LU={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,s=t.y,o=kM(n-this.long0);Math.abs(s)<=AM&&(e=this.x0+this.R*o,i=this.y0);var r=BU(2*Math.abs(s/Math.PI));(Math.abs(o)<=AM||Math.abs(Math.abs(s)-rM)<=AM)&&(e=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var A=.5*Math.abs(Math.PI/o-o/Math.PI),a=A*A,l=Math.sin(r),h=Math.cos(r),c=h/(l+h-1),u=c*c,d=c*(2/l-1),g=d*d,p=Math.PI*this.R*(A*(c-g)+Math.sqrt(a*(c-g)*(c-g)-(g+a)*(u-g)))/(g+a);o<0&&(p=-p),e=this.x0+p;var f=a+c;return p=Math.PI*this.R*(d*f-A*Math.sqrt((g+a)*(a+1)-f*f))/(g+a),i=s>=0?this.y0+p:this.y0-p,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,s,o,r,A,a,l,h,c,u;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,o=(n=t.x/c)*n+(s=t.y/c)*s,c=3*(s*s/(a=-2*(r=-Math.abs(s)*(1+o))+1+2*s*s+o*o)+(2*(A=r-2*s*s+n*n)*A*A/a/a/a-9*r*A/a/a)/27)/(l=(r-A*A/3/a)/a)/(h=2*Math.sqrt(-l/3)),Math.abs(c)>1&&(c=c>=0?1:-1),u=Math.acos(c)/3,i=t.y>=0?(-h*Math.cos(u+Math.PI/3)-A/3/a)*Math.PI:-(-h*Math.cos(u+Math.PI/3)-A/3/a)*Math.PI,e=Math.abs(n)<AM?this.long0:kM(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-s*s)+o*o))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var UU={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,s,o,r,A,a,l,h,c,u,d,g,p,f,m,y,_,B,w,C,b=t.x,v=t.y,x=Math.sin(t.y),E=Math.cos(t.y),F=kM(b-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=AM?(t.x=this.x0+this.a*(rM-v)*Math.sin(F),t.y=this.y0-this.a*(rM-v)*Math.cos(F),t):Math.abs(this.sin_p12+1)<=AM?(t.x=this.x0+this.a*(rM+v)*Math.sin(F),t.y=this.y0+this.a*(rM+v)*Math.cos(F),t):(y=this.sin_p12*x+this.cos_p12*E*Math.cos(F),m=(f=Math.acos(y))?f/Math.sin(f):1,t.x=this.x0+this.a*m*E*Math.sin(F),t.y=this.y0+this.a*m*(this.cos_p12*x-this.sin_p12*E*Math.cos(F)),t):(e=sU(this.es),i=oU(this.es),n=rU(this.es),s=AU(this.es),Math.abs(this.sin_p12-1)<=AM?(o=this.a*nU(e,i,n,s,rM),r=this.a*nU(e,i,n,s,v),t.x=this.x0+(o-r)*Math.sin(F),t.y=this.y0-(o-r)*Math.cos(F),t):Math.abs(this.sin_p12+1)<=AM?(o=this.a*nU(e,i,n,s,rM),r=this.a*nU(e,i,n,s,v),t.x=this.x0+(o+r)*Math.sin(F),t.y=this.y0+(o+r)*Math.cos(F),t):(A=x/E,a=aU(this.a,this.e,this.sin_p12),l=aU(this.a,this.e,x),h=Math.atan((1-this.es)*A+this.es*a*this.sin_p12/(l*E)),_=0===(c=Math.atan2(Math.sin(F),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(F)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(c)-Math.PI)<=AM?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(F)*Math.cos(h)/Math.sin(c)),u=this.e*this.sin_p12/Math.sqrt(1-this.es),f=a*_*(1-(B=_*_)*(p=(d=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*d)*(1-p)/6+(w=B*_)/8*(g=u*d)*(1-2*p)+(C=w*_)/120*(p*(4-7*p)-3*u*u*(1-7*p))-C*_/48*g),t.x=this.x0+f*Math.sin(c),t.y=this.y0+f*Math.cos(c),t))},inverse:function(t){var e,i,n,s,o,r,A,a,l,h,c,u,d,g,p,f,m,y,_,B,w,C,b;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*rM*this.a)return;return i=e/this.a,n=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(e)<=AM?r=this.lat0:(r=BU(s*this.sin_p12+t.y*n*this.cos_p12/e),A=Math.abs(this.lat0)-rM,o=Math.abs(A)<=AM?this.lat0>=0?kM(this.long0+Math.atan2(t.x,-t.y)):kM(this.long0-Math.atan2(-t.x,t.y)):kM(this.long0+Math.atan2(t.x*n,e*this.cos_p12*s-t.y*this.sin_p12*n))),t.x=o,t.y=r,t}return a=sU(this.es),l=oU(this.es),h=rU(this.es),c=AU(this.es),Math.abs(this.sin_p12-1)<=AM?(r=hU(((u=this.a*nU(a,l,h,c,rM))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,a,l,h,c),o=kM(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=r,t):Math.abs(this.sin_p12+1)<=AM?(u=this.a*nU(a,l,h,c,rM),r=hU(((e=Math.sqrt(t.x*t.x+t.y*t.y))-u)/this.a,a,l,h,c),o=kM(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=r,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.x,t.y),d=aU(this.a,this.e,this.sin_p12),f=Math.cos(p),y=-(m=this.e*this.cos_p12*f)*m/(1-this.es),_=3*this.es*(1-y)*this.sin_p12*this.cos_p12*f/(1-this.es),C=1-y*(w=(B=e/d)-y*(1+y)*Math.pow(B,3)/6-_*(1+3*y)*Math.pow(B,4)/24)*w/2-B*w*w*w/6,g=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*f),o=kM(this.long0+Math.asin(Math.sin(p)*Math.sin(w)/Math.cos(g))),b=Math.sin(g),r=Math.atan2((b-this.es*C*this.sin_p12)*Math.tan(g),b*(1-this.es)),t.x=o,t.y=r,t)},names:["Azimuthal_Equidistant","aeqd"]};var QU={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,s,o,r,A,a=t.x,l=t.y;return n=kM(a-this.long0),e=Math.sin(l),i=Math.cos(l),s=Math.cos(n),1,((o=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(o)<=AM)&&(r=1*this.a*i*Math.sin(n),A=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)),t.x=r,t.y=A,t},inverse:function(t){var e,i,n,s,o,r,A;return t.x-=this.x0,t.y-=this.y0,i=BU((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(e)<=AM?(A=this.lat0,t.x=r,t.y=A,t):(A=BU(s*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.abs(this.lat0)-rM,Math.abs(o)<=AM?(r=this.lat0>=0?kM(this.long0+Math.atan2(t.x,-t.y)):kM(this.long0-Math.atan2(-t.x,t.y)),t.x=r,t.y=A,t):(r=kM(this.long0+Math.atan2(t.x*n,e*this.cos_p14*s-t.y*this.sin_p14*n)),t.x=r,t.y=A,t))},names:["ortho"]},TU=1,kU=2,RU=3,PU=4,DU=5,OU=6,NU=1,HU=2,GU=3,KU=4;function VU(t,e,i,n){var s;return t<AM?(n.value=NU,s=0):(s=Math.atan2(e,i),Math.abs(s)<=hM?n.value=NU:s>hM&&s<=rM+hM?(n.value=HU,s-=rM):s>rM+hM||s<=-(rM+hM)?(n.value=GU,s=s>=0?s-uM:s+uM):(n.value=KU,s+=rM)),s}function WU(t,e){var i=t+e;return i<-uM?i+=cM:i>+uM&&(i-=cM),i}var zU={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=rM-hM/2?this.face=DU:this.lat0<=-(rM-hM/2)?this.face=OU:Math.abs(this.long0)<=hM?this.face=TU:Math.abs(this.long0)<=rM+hM?this.face=this.long0>0?kU:PU:this.face=RU,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,s,o,r,A={x:0,y:0},a={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===DU)s=rM-e,i>=hM&&i<=rM+hM?(a.value=NU,n=i-rM):i>rM+hM||i<=-(rM+hM)?(a.value=HU,n=i>0?i-uM:i+uM):i>-(rM+hM)&&i<=-hM?(a.value=GU,n=i+rM):(a.value=KU,n=i);else if(this.face===OU)s=rM+e,i>=hM&&i<=rM+hM?(a.value=NU,n=-i+rM):i<hM&&i>=-hM?(a.value=HU,n=-i):i<-hM&&i>=-(rM+hM)?(a.value=GU,n=-i-rM):(a.value=KU,n=i>0?-i+uM:-i-uM);else{var l,h,c,u,d,g;this.face===kU?i=WU(i,+rM):this.face===RU?i=WU(i,+uM):this.face===PU&&(i=WU(i,-rM)),u=Math.sin(e),d=Math.cos(e),g=Math.sin(i),l=d*Math.cos(i),h=d*g,c=u,this.face===TU?n=VU(s=Math.acos(l),c,h,a):this.face===kU?n=VU(s=Math.acos(h),c,-l,a):this.face===RU?n=VU(s=Math.acos(-l),c,-h,a):this.face===PU?n=VU(s=Math.acos(-h),c,l,a):(s=n=0,a.value=NU)}return r=Math.atan(12/uM*(n+Math.acos(Math.sin(n)*Math.cos(hM))-rM)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(n))))),a.value===HU?r+=rM:a.value===GU?r+=uM:a.value===KU&&(r+=1.5*uM),A.x=o*Math.cos(r),A.y=o*Math.sin(r),A.x=A.x*this.a+this.x0,A.y=A.y*this.a+this.y0,t.x=A.x,t.y=A.y,t},inverse:function(t){var e,i,n,s,o,r,A,a,l,h,c,u,d={lam:0,phi:0},g={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?g.value=NU:t.y>=0&&t.y>=Math.abs(t.x)?(g.value=HU,e-=rM):t.x<0&&-t.x>=Math.abs(t.y)?(g.value=GU,e=e<0?e+uM:e-uM):(g.value=KU,e+=rM),l=uM/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),r=Math.atan(o),(A=1-(n=Math.cos(e))*n*(s=Math.tan(i))*s*(1-Math.cos(Math.atan(1/Math.cos(r)))))<-1?A=-1:A>1&&(A=1),this.face===DU)a=Math.acos(A),d.phi=rM-a,g.value===NU?d.lam=r+rM:g.value===HU?d.lam=r<0?r+uM:r-uM:g.value===GU?d.lam=r-rM:d.lam=r;else if(this.face===OU)a=Math.acos(A),d.phi=a-rM,g.value===NU?d.lam=-r+rM:g.value===HU?d.lam=-r:g.value===GU?d.lam=-r-rM:d.lam=r<0?-r-uM:-r+uM;else{var p,f,m;l=(p=A)*p,f=(l+=(m=l>=1?0:Math.sqrt(1-l)*Math.sin(r))*m)>=1?0:Math.sqrt(1-l),g.value===HU?(l=f,f=-m,m=l):g.value===GU?(f=-f,m=-m):g.value===KU&&(l=f,f=m,m=-l),this.face===kU?(l=p,p=-f,f=l):this.face===RU?(p=-p,f=-f):this.face===PU&&(l=p,p=f,f=-l),d.phi=Math.acos(-m)-rM,d.lam=Math.atan2(f,p),this.face===kU?d.lam=WU(d.lam,-rM):this.face===RU?d.lam=WU(d.lam,-uM):this.face===PU&&(d.lam=WU(d.lam,+rM))}return 0!==this.es&&(h=d.phi<0?1:0,c=Math.tan(d.phi),u=this.b/Math.sqrt(c*c+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-u*u)/(this.one_minus_f*u)),h&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},XU=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],YU=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],qU=.8487,jU=1.3523,JU=lM/5,ZU=18,$U=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var tQ={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=kM(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*JU);n<0?n=0:n>=ZU&&(n=17);var s={x:$U(XU[n],i=lM*(i-.08726646259971647*n))*e,y:$U(YU[n],i)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*qU+this.x0,s.y=s.y*this.a*jU+this.y0,s},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*qU),y:Math.abs(t.y-this.y0)/(this.a*jU)};if(e.y>=1)e.x/=XU[18][0],e.y=t.y<0?-rM:rM;else{var i=Math.floor(e.y*ZU);for(i<0?i=0:i>=ZU&&(i=17);;)if(YU[i][0]>e.y)--i;else{if(!(YU[i+1][0]<=e.y))break;++i}var n=YU[i],s=5*(e.y-n[0])/(YU[i+1][0]-n[0]);s=function(t,e,i,n){for(var s=e;n;--n){var o=t(s);if(s-=o,Math.abs(o)<i)break}return s}((function(t){return($U(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),s,AM,100),e.x/=$U(XU[i],s),e.y=(5*i+s)*aM,t.y<0&&(e.y=-e.y)}return e.x=kM(e.x+this.long0),e},names:["Robinson","robin"]};var eQ={init:function(){this.name="geocent"},forward:function(t){return eL(t,this.es,this.a)},inverse:function(t){return iL(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},iQ=0,nQ=1,sQ=2,oQ=3,rQ={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var AQ={init:function(){if(Object.keys(rQ).forEach(function(t){if(void 0===this[t])this[t]=rQ[t].def;else{if(rQ[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);rQ[t].num&&(this[t]=parseFloat(this[t]))}rQ[t].degrees&&(this[t]=this[t]*aM)}.bind(this)),Math.abs(Math.abs(this.lat0)-rM)<AM?this.mode=this.lat0<0?nQ:iQ:Math.abs(this.lat0)<AM?this.mode=sQ:(this.mode=oQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,s,o=Math.sin(t.y),r=Math.cos(t.y),A=Math.cos(t.x);switch(this.mode){case oQ:i=this.sinph0*o+this.cosph0*r*A;break;case sQ:i=r*A;break;case nQ:i=-o;break;case iQ:i=o}switch(e=(i=this.pn1/(this.p-i))*r*Math.sin(t.x),this.mode){case oQ:i*=this.cosph0*o-this.sinph0*r*A;break;case sQ:i*=o;break;case iQ:i*=-r*A;break;case nQ:i*=r*A}return s=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*s,i=n*s,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,s={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var o=GL(t.x,t.y);if(Math.abs(o)<AM)s.x=0,s.y=t.y;else{var r,A;switch(A=1-o*o*this.pfact,A=(this.p-Math.sqrt(A))/(this.pn1/o+o/this.pn1),r=Math.sqrt(1-A*A),this.mode){case oQ:s.y=Math.asin(r*this.sinph0+t.y*A*this.cosph0/o),t.y=(r-this.sinph0*Math.sin(s.y))*o,t.x*=A*this.cosph0;break;case sQ:s.y=Math.asin(t.y*A/o),t.y=r*o,t.x*=A;break;case iQ:s.y=Math.asin(r),t.y=-t.y;break;case nQ:s.y=-Math.asin(r)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t},names:["Tilted_Perspective","tpers"]};var aQ={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,n,s,o=t.x,r=t.y;if(o-=this.long0,"ellipse"===this.shape){r=Math.atan(this.radius_p2*Math.tan(r));var A=this.radius_p/GL(this.radius_p*Math.cos(r),Math.sin(r));if(i=A*Math.cos(o)*Math.cos(r),n=A*Math.sin(o)*Math.cos(r),s=A*Math.sin(r),(this.radius_g-i)*i-n*n-s*s*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/GL(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(s/GL(n,e)))}else"sphere"===this.shape&&(e=Math.cos(r),i=Math.cos(o)*e,n=Math.sin(o)*e,s=Math.sin(r),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/GL(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(s/GL(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,n,s,o=-1,r=0,A=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(A=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*GL(1,A)):(r=Math.tan(t.x/this.radius_g_1),A=Math.tan(t.y/this.radius_g_1)*GL(1,r));var a=A/this.radius_p;if(e=r*r+a*a+o*o,(n=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(n))/(2*e),o=this.radius_g+s*o,r*=s,A*=s,t.x=Math.atan2(r,o),t.y=Math.atan(A*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(A=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+A*A)):(r=Math.tan(t.x/this.radius_g_1),A=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),e=r*r+A*A+o*o,(n=(i=2*this.radius_g*o)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(n))/(2*e),o=this.radius_g+s*o,r*=s,A*=s,t.x=Math.atan2(r,o),t.y=Math.atan(A*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};pL.defaultDatum="WGS84",pL.Proj=tL,pL.WGS84=new pL.Proj("WGS84"),pL.Point=QL,pL.toPoint=lL,pL.defs=SM,pL.nadgrid=function(t,e){var i=new DataView(e),n=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(i),s=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:jM(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,n);s.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,i){for(var n=176,s=[],o=0;o<e.nSubgrids;o++){var r=ZM(t,n,i),A=$M(t,n,r,i),a=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),l=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);s.push({ll:[qM(r.lowerLongitude),qM(r.lowerLatitude)],del:[qM(r.longitudeInterval),qM(r.latitudeInterval)],lim:[a,l],count:r.gridNodeCount,cvs:JM(A)})}return s}(i,s,n),r={header:s,subgrids:o};return XM[t]=r,r},pL.transform=cL,pL.mgrs=bL,pL.version="__VERSION__",function(t){t.Proj.projections.add(NL),t.Proj.projections.add(zL),t.Proj.projections.add(XL),t.Proj.projections.add(jL),t.Proj.projections.add(JL),t.Proj.projections.add(ZL),t.Proj.projections.add(tU),t.Proj.projections.add(eU),t.Proj.projections.add(iU),t.Proj.projections.add(cU),t.Proj.projections.add(_U),t.Proj.projections.add(wU),t.Proj.projections.add(CU),t.Proj.projections.add(bU),t.Proj.projections.add(vU),t.Proj.projections.add(xU),t.Proj.projections.add(EU),t.Proj.projections.add(FU),t.Proj.projections.add(SU),t.Proj.projections.add(IU),t.Proj.projections.add(MU),t.Proj.projections.add(LU),t.Proj.projections.add(UU),t.Proj.projections.add(QU),t.Proj.projections.add(zU),t.Proj.projections.add(tQ),t.Proj.projections.add(eQ),t.Proj.projections.add(AQ),t.Proj.projections.add(aQ)}(pL),pL.defs(function(){const t=[];return tM.forEach((e=>{t.push(["EPSG:"+e.code,e.proj4def])})),t}()),function(t){const e=Object.keys(t.defs),i=e.length;let n,s;for(n=0;n<i;++n){const i=e[n];if(!je(i)){const e=t.defs(i);let n=e.units;n||"longlat"!==e.projName||(n="degrees"),qe(new pt({code:i,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:n}))}}for(n=0;n<i;++n){const o=e[n],r=je(o);for(s=0;s<i;++s){const i=e[s],n=je(i);if(!Ut(o,i))if(t.defs[o]===t.defs[i])Ze([r,n]);else{const e=t(o,i);ei(r,n,ci(r,n,e.forward),ci(n,r,e.inverse))}}}}(pL),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.isDigitsOnly=function(){return null!=this.match(/^-?[0-9]+$/)},String.prototype.ellipsis=function(t){return this.length>t?this.substring(0,t)+"...":this},document.documentElement.setAttribute("oltb-version",zh.version);const lQ="true"===$I.getParameter("debug");fh.addEventListener(ah.ContextMenu,(function(t){lQ||t.preventDefault()})),document.body.addEventListener(ah.MouseDown,(function(t){document.body.classList.remove("oltb-using-keyboard")})),document.body.addEventListener(ah.KeyDown,(function(t){"tab"===t.key.toLowerCase()&&document.body.classList.add("oltb-using-keyboard")}));const hQ=function(t){window.innerWidth-(48+Bh.offsetWidth+wh.offsetWidth)<=0?wh.classList.add("oltb-toolbox-container--collision"):wh.classList.remove("oltb-toolbox-container--collision")};function cQ(t,e,i,n){void 0===e&&(e=200),void 0===n&&(n=!1);if(0===parseFloat(window.getComputedStyle(t).getPropertyValue("height")))return;t.style.overflow="hidden",n&&(t.style.display="block");const s=window.getComputedStyle(t),o=parseFloat(s.getPropertyValue("height")),r=parseFloat(s.getPropertyValue("padding-top")),A=parseFloat(s.getPropertyValue("padding-bottom")),a=parseFloat(s.getPropertyValue("margin-top")),l=parseFloat(s.getPropertyValue("margin-bottom")),h=o/e,c=r/e,u=A/e,d=a/e,g=l/e;let p;window.requestAnimationFrame((function s(f){void 0===p&&(p=f);const m=f-p;n?(t.style.height=h*m+"px",t.style.paddingTop=c*m+"px",t.style.paddingBottom=u*m+"px",t.style.marginTop=d*m+"px",t.style.marginBottom=g*m+"px"):(t.style.height=o-h*m+"px",t.style.paddingTop=r-c*m+"px",t.style.paddingBottom=A-u*m+"px",t.style.marginTop=a-d*m+"px",t.style.marginBottom=l-g*m+"px"),m>=e?(t.style.height="",t.style.paddingTop="",t.style.paddingBottom="",t.style.marginTop="",t.style.marginBottom="",t.style.overflow="",n||(t.style.display="none"),"function"==typeof i&&i(!n)):window.requestAnimationFrame(s)}))}window.addEventListener(ah.Resize,hQ),window.addEventListener(ah.DOMContentLoaded,hQ),window.addEventListener(hh.ToolbarDirectionChange,hQ),HTMLElement.prototype.slideToggle=function(t,e){0===this.clientHeight?cQ(this,t,e,!0):cQ(this,t,e)},HTMLElement.prototype.slideUp=function(t,e){cQ(this,t,e)},HTMLElement.prototype.slideDown=function(t,e){cQ(this,t,e,!0)},gh.addMapLayers([{name:"Open Street Map",layer:new ql({source:new th,visible:!0})},{name:"ArcGIS World Topo",layer:new ql({source:new jl({attributions:'Tiles © <a href="https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer">ArcGIS</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}),visible:!1})},{name:"Stamen Watercolor",layer:new ql({maxZoom:12,source:new sh({layer:"watercolor",attributions:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'}),visible:!1})},{name:"Stamen Terrain",layer:new ql({maxZoom:12,source:new sh({layer:"terrain",attributions:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'}),visible:!1})}],!0);const uQ={lon:25.5809,lat:23.7588,zoom:3,rotation:0,...JSON.parse(_h.getStateObject("mapData"))||{}};return class{dialog=j_;toast=rc;modal=zI;managers={StateManager:_h,SettingsManager:S_,LayerManager:gh,TooltipManager:T_,InfoWindowManager:vE};tools={};constructor(t={}){t.tools&&Object.entries(t.tools).forEach((t=>{const[e,i]=t,n=iM.find((t=>e===t.name));n&&(this.tools[e]=new n.tool(i))})),this.tools.ContextMenu=new jh({name:Zh,selector:`#${fh.id} canvas`}),t.map&&this.setMap(t.map)}setMap(t){Object.values(this.tools).forEach((e=>{e.setMap(t)})),Object.values(this.managers).forEach((e=>{e.init(t)})),t.setTarget(fh),t.getInteractions().extend([new JA({condition:function(t){return O(t)||S_.getSetting(v_)}}),new vn({condition:function(t){return U(t)&&S_.getSetting(y_)}}),new wn({condition:function(t){return(O(t)||S_.getSetting(w_))&&!U(t)&&!N(t)}}),new kA({condition:function(t){return S_.getSetting(b_)&&H(t)}}),new TA({condition:function(t){return S_.getSetting(C_)&&H(t)}})]);const e=t.getView();e.setCenter(ii([uQ.lon,uQ.lat],zh.projection)),e.setZoom(uQ.zoom),e.setRotation(uQ.rotation)}}}();
//# sourceMappingURL=oltb.min.js.map
