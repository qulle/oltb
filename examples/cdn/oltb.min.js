/*!
 * +--------------------------------------------------------------------------------------------------------------+
 * | Project: OLTB                                                                                                |
 * | Version: v3.5.0 https://github.com/qulle/oltb#readme                                                         |
 * |    Date: 2025-10-04 22:30                                                                                    |
 * |  Author: Qulle https://github.com/qulle                                                                      |
 * | License: BSD-2-Clause license https://github.com/qulle/oltb/blob/main/LICENSE                                |
 * + -------------------------------------------------------------------------------------------------------------+
 * | Thanks to the following projects:                                                                            |
 * | (+) OpenLayers 10.6.1                  - https://openlayers.org                                              |
 * | (+) proj4 2.15.0                       - http://proj4js.org                                                  |
 * | (+) Tippy.js 6.3.7                     - https://atomiks.github.io/tippyjs                                   |
 * | (+) Bootstrap Icons                    - https://icons.getbootstrap.com                                      |
 * | (+) Moment 2.30.1                      - https://momentjs.com                                                |
 * | (+) A Color Picker 1.2.1               - https://github.com/narsenico/a-color-picker                         |
 * | (+) Plain JS Slidetoggle 2.0.0         - https://github.com/ericbutler555/plain-js-slidetoggle               |
 * | (+) JSTS 2.12.1                        - https://github.com/bjornharrtell/jsts                               |
 * | (+) Parcel 2.14.4                      - https://parceljs.org                                                |
 * | (+) @parcel/transformer-sass 2.14.4    - https://github.com/parcel-bundler/parcel                            |
 * | (+) Rollup 4.39.0                      - https://github.com/rollup/rollup                                    |
 * | (+) @rollup/plugin-commonjs 28.0.3     - https://github.com/rollup/plugins/tree/master/packages/commonjs     |
 * | (+) @rollup/plugin-json 6.1.0          - https://github.com/rollup/plugins/tree/master/packages/json         |
 * | (+) @rollup/plugin-node-resolve 16.0.1 - https://github.com/rollup/plugins/tree/master/packages/node-resolve |
 * | (+) @rollup-plugin-replace 6.0.2       - https://github.com/rollup/plugins/tree/master/packages/replace      |
 * | (+) @rollup/plugin-terser 0.4.4        - https://github.com/rollup/plugins/tree/master/packages/terser       |
 * | (+) rollup-plugin-license 3.6.0        - https://github.com/mjeanroy/rollup-plugin-license                   |
 * | (+) rollup-plugin-scss 4.0.1           - https://github.com/thgh/rollup-plugin-scss                          |
 * | (+) Cycle.js                           - https://github.com/douglascrockford/JSON-js                         |
 * | (+) Browser Dtector 4.1.0              - https://github.com/sibiraj-s/browser-dtector                        |
 * | (+) Sortable JS 1.15.6                 - https://github.com/SortableJS/Sortable                              |
 * | (+) UUID JS 11.1.0                     - https://github.com/uuidjs/uuid                                      |
 * | (+) Lodash 4.17.21                     - https://github.com/lodash/lodash                                    |
 * | (+) Many Keys Map 2.0.1                - https://github.com/fregante/many-keys-map                           |
 * | (+) ESLint 9.24.0                      - https://github.com/eslint/eslint                                    |
 * | (+) @eslint/js 9.2.0                   - https://github.com/eslint/eslint                                    |
 * | (+) Husky 9.1.7                        - https://github.com/typicode/husky                                   |
 * | (+) Lint Staged 15.5.0                 - https://github.com/lint-staged/lint-staged                          |
 * | (+) Jest 29.7.0                        - https://github.com/jestjs/jest                                      |
 * | (+) Jest Environment JSDOM 29.7.0      - https://github.com/jestjs/jest                                      |
 * | (+) Identity Obj Proxy 3.0.0           - https://github.com/keyz/identity-obj-proxy                          |
 * | (+) Cross Env 7.0.3                    - https://github.com/kentcdodds/cross-env                             |
 * | (+) Axios 1.8.4                        - https://github.com/axios/axios                                      |
 * +--------------------------------------------------------------------------------------------------------------+
 */
var oltb=function(){"use strict";function t(...t){console.warn(...t)}var e=0,i=1,n=2,s=4,r=8,o=16;function a(t){const e=p();for(let i=0,n=t.length;i<n;++i)b(e,t[i]);return e}function l(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function A(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function c(t,e,i){let n,s;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+s*s}function h(t,e){return d(t,e[0],e[1])}function u(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function d(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function g(t,a){const l=t[0],A=t[1],c=t[2],h=t[3],u=a[0],d=a[1];let g=e;return u<l?g|=o:u>c&&(g|=s),d<A?g|=r:d>h&&(g|=n),g===e&&(g=i),g}function p(){return[1/0,1/0,-1/0,-1/0]}function f(t,e,i,n,s){return s?(s[0]=t,s[1]=e,s[2]=i,s[3]=n,s):[t,e,i,n]}function m(t){return f(1/0,1/0,-1/0,-1/0,t)}function _(t,e){const i=t[0],n=t[1];return f(i,n,i,n,e)}function y(t,e,i,n,s){return C(m(s),t,e,i,n)}function w(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function v(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function b(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function C(t,e,i,n,s){for(;i<n;i+=s)x(t,e[i],e[i+1]);return t}function x(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function B(t,e){let i;return i=e(S(t)),i||(i=e(F(t)),i||(i=e(D(t)),i||(i=e(U(t)),i||!1)))}function E(t){let e=0;return N(t)||(e=O(t)*R(t)),e}function S(t){return[t[0],t[1]]}function F(t){return[t[2],t[1]]}function I(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function L(t,e){let i;if("bottom-left"===e)i=S(t);else if("bottom-right"===e)i=F(t);else if("top-left"===e)i=U(t);else{if("top-right"!==e)throw new Error("Invalid corner");i=D(t)}return i}function M(t,e,i,n,s){const[r,o,a,l,A,c,h,u]=T(t,e,i,n);return f(Math.min(r,a,A,h),Math.min(o,l,c,u),Math.max(r,a,A,h),Math.max(o,l,c,u),s)}function T(t,e,i,n){const s=e*n[0]/2,r=e*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=s*o,A=s*a,c=r*o,h=r*a,u=t[0],d=t[1];return[u-l+h,d-A-c,u-l-h,d-A+c,u+l-h,d+A+c,u+l+h,d+A-c,u-l+h,d-A-c]}function R(t){return t[3]-t[1]}function k(t,e,i){const n=[1/0,1/0,-1/0,-1/0];return P(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):m(n),n}function U(t){return[t[0],t[3]]}function D(t){return[t[2],t[3]]}function O(t){return t[2]-t[0]}function P(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function N(t){return t[2]<t[0]||t[3]<t[1]}function Q(t,e,i,n){if(N(t))return m(i);let s=[];{const e=t[2]-t[0],i=t[3]-t[1];for(let r=0;r<n;++r)s.push(t[0]+e*r/n,t[1],t[2],t[1]+i*r/n,t[2]-e*r/n,t[3],t[0],t[3]-i*r/n)}e(s,s,2);const r=[],o=[];for(let t=0,e=s.length;t<e;t+=2)r.push(s[t]),o.push(s[t+1]);return function(t,e,i){return f(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(r,o,i)}function H(t,e){const i=e.getExtent(),n=I(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const e=O(i),s=Math.floor((n[0]-i[0])/e)*e;t[0]-=s,t[2]-=s}return t}function G(t,e,i){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];H(t,e);const s=O(n);if(O(t)>s&&!i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+s,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-s,t[3]]]}return[t]}function V(t,e,i){return Math.min(Math.max(t,e),i)}function z(t,e,i,n,s,r){const o=s-i,a=r-n;if(0!==o||0!==a){const l=((t-i)*o+(e-n)*a)/(o*o+a*a);l>1?(i=s,n=r):l>0&&(i+=o*l,n+=a*l)}return K(t,e,i,n)}function K(t,e,i,n){const s=i-t,r=n-e;return s*s+r*r}function j(t){return 180*t/Math.PI}function W(t){return t*Math.PI/180}function $(t,e){const i=t%e;return i*e<0?i+e:i}function Y(t,e,i){return t+i*(e-t)}function X(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function q(t,e){return Math.round(X(t,e))}function Z(t,e){return Math.floor(X(t,e))}function J(t,e){return Math.ceil(X(t,e))}function tt(t,e,i){if(t>=e&&t<i)return t;const n=i-e;return((t-e)%n+n)%n+e}function et(t,e,i){const n=void 0!==i?t.toFixed(i):""+t;let s=n.indexOf(".");return s=-1===s?n.length:s,s>e?n:new Array(1+e-s).join("0")+n}function it(t,e){const i=(""+t).split("."),n=(""+e).split(".");for(let t=0;t<Math.max(i.length,n.length);t++){const e=parseInt(i[t]||"0",10),s=parseInt(n[t]||"0",10);if(e>s)return 1;if(s>e)return-1}return 0}function nt(t,e){const i=e.getRadius(),n=e.getCenter(),s=n[0],r=n[1];let o=t[0]-s;const a=t[1]-r;0===o&&0===a&&(o=1);const l=Math.sqrt(o*o+a*a);return[s+i*o/l,r+i*a/l]}function st(t,e){const i=t[0],n=t[1],s=e[0],r=e[1],o=s[0],a=s[1],l=r[0],A=r[1],c=l-o,h=A-a,u=0===c&&0===h?0:(c*(i-o)+h*(n-a))/(c*c+h*h||0);let d,g;return u<=0?(d=o,g=a):u>=1?(d=l,g=A):(d=o+u*c,g=a+u*h),[d,g]}function rt(t,e,i){const n=$(e+180,360)-180,s=Math.abs(3600*n),r=i||0;let o=Math.floor(s/3600),a=Math.floor((s-3600*o)/60),l=X(s-3600*o-60*a,r);l>=60&&(l=0,a+=1),a>=60&&(a=0,o+=1);let A=o+"°";return 0===a&&0===l||(A+=" "+et(a,2)+"′"),0!==l&&(A+=" "+et(l,2,r)+"″"),0!==n&&(A+=" "+t.charAt(n<0?1:0)),A}function ot(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function at(t,e){const i=Math.cos(e),n=Math.sin(e),s=t[0]*i-t[1]*n,r=t[1]*i+t[0]*n;return t[0]=s,t[1]=r,t}function lt(t,e){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function At(t,e){return Math.sqrt(lt(t,e))}function ct(t,e){return t?rt("NS",t[1],e)+" "+rt("EW",t[0],e):""}function ht(t,e){if(e.canWrapX()){const i=O(e.getExtent()),n=ut(t,e,i);n&&(t[0]-=n*i)}return t}function ut(t,e,i){const n=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||O(n),s=Math.floor((t[0]-n[0])/i)),s}const dt={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let gt=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||dt[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const pt=6378137,ft=Math.PI*pt,mt=[-ft,-ft,ft,ft],_t=[-180,-85,180,85],yt=pt*Math.log(Math.tan(Math.PI/2));class wt extends gt{constructor(t){super({code:t,units:"m",extent:mt,global:!0,worldExtent:_t,getPointResolution:function(t,e){return t/Math.cosh(e[1]/pt)}})}}const vt=[new wt("EPSG:3857"),new wt("EPSG:102100"),new wt("EPSG:102113"),new wt("EPSG:900913"),new wt("http://www.opengis.net/def/crs/EPSG/0/3857"),new wt("http://www.opengis.net/gml/srs/epsg.xml#3857")];function bt(t,e,i,n){const s=t.length;i=i>1?i:2,n=n??i,void 0===e&&(e=i>2?t.slice():new Array(s));for(let i=0;i<s;i+=n){e[i]=ft*t[i]/180;let n=pt*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));n>yt?n=yt:n<-yt&&(n=-yt),e[i+1]=n}return e}function Ct(t,e,i,n){const s=t.length;i=i>1?i:2,n=n??i,void 0===e&&(e=i>2?t.slice():new Array(s));for(let i=0;i<s;i+=n)e[i]=180*t[i]/ft,e[i+1]=360*Math.atan(Math.exp(t[i+1]/pt))/Math.PI-90;return e}const xt=[-180,-90,180,90],Bt=6378137*Math.PI/180;class Et extends gt{constructor(t,e){super({code:t,units:"degrees",extent:xt,axisOrientation:e,global:!0,metersPerUnit:Bt,worldExtent:xt})}}const St=[new Et("CRS:84"),new Et("EPSG:4326","neu"),new Et("urn:ogc:def:crs:OGC:1.3:CRS84"),new Et("urn:ogc:def:crs:OGC:2:84"),new Et("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Et("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Et("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ft={};function It(t){return Ft[t]||Ft[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Lt(t){for(const e in t)delete t[e]}function Mt(t){let e;for(e in t)return!1;return!e}let Tt={};function Rt(t,e,i){const n=t.getCode(),s=e.getCode();n in Tt||(Tt[n]={}),Tt[n][s]=i}function kt(t,e){return t in Tt&&e in Tt[t]?Tt[t][e]:null}const Ut=.9996,Dt=.00669438,Ot=Dt*Dt,Pt=Ot*Dt,Nt=Dt/(1-Dt),Qt=Math.sqrt(1-Dt),Ht=(1-Qt)/(1+Qt),Gt=Ht*Ht,Vt=Gt*Ht,zt=Vt*Ht,Kt=zt*Ht,jt=.9983242984503243,Wt=15*Ot/256+45*Pt/1024,$t=35*Pt/3072,Yt=1.5*Ht-27/32*Vt+269/512*Kt,Xt=21/16*Gt-55/32*zt,qt=151/96*Vt-417/128*Kt,Zt=1097/512*zt,Jt=6378137;function te(t,e,i){const n=t-5e5,s=(i.north?e:e-1e7)/Ut/(Jt*jt),r=s+Yt*Math.sin(2*s)+Xt*Math.sin(4*s)+qt*Math.sin(6*s)+Zt*Math.sin(8*s),o=Math.sin(r),a=o*o,l=Math.cos(r),A=o/l,c=A*A,h=c*c,u=1-Dt*a,d=Math.sqrt(1-Dt*a),g=Nt*l**2,p=g*g,f=n/(Jt/d*Ut),m=f*f,_=m*f,y=_*f,w=y*f,v=r-A/((1-Dt)/u)*(m/2-y/24*(5+3*c+10*g-4*p-9*Nt))+w*f/720*(61+90*c+298*g+45*h-252*Nt-3*p);let b=(f-_/6*(1+2*c+g)+w/120*(5-2*g+28*c-3*p+8*Nt+24*h))/l;return b=tt(b+W(ie(i.number)),-Math.PI,Math.PI),[j(b),j(v)]}function ee(t,e,i){t=tt(t,-180,180),e<-80?e=-80:e>84&&(e=84);const n=W(e),s=Math.sin(n),r=Math.cos(n),o=s/r,a=o*o,l=a*a,A=W(t),c=W(ie(i.number)),h=Jt/Math.sqrt(1-Dt*s**2),u=Nt*r**2,d=r*tt(A-c,-Math.PI,Math.PI),g=d*d,p=g*d,f=p*d,m=f*d,_=m*d,y=Jt*(jt*n-.002514607064228144*Math.sin(2*n)+Wt*Math.sin(4*n)-$t*Math.sin(6*n)),w=Ut*h*(d+p/6*(1-a+u)+m/120*(5-18*a+l+72*u-58*Nt))+5e5;let v=Ut*(y+h*o*(g/2+f/24*(5-a+9*u+4*u**2)+_/720*(61-58*a+l+600*u-330*Nt)));return i.north||(v+=1e7),[w,v]}function ie(t){return 6*(t-1)-180+3}const ne=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function se(t){let e=0;for(const i of ne){const n=t.match(i);if(n){e=parseInt(n[1]);break}}if(!e)return null;let i=0,n=!1;return e>32700&&e<32761?i=e-32700:e>32600&&e<32661&&(n=!0,i=e-32600),i?{number:i,north:n}:null}function re(t,e){return function(i,n,s,r){const o=i.length;s=s>1?s:2,r=r??s,n||(n=s>2?i.slice():new Array(o));for(let s=0;s<o;s+=r){const r=i[s],o=i[s+1],a=t(r,o,e);n[s]=a[0],n[s+1]=a[1]}return n}}const oe=6371008.8;function ae(t,e,i){i=i||oe;const n=W(t[1]),s=W(e[1]),r=(s-n)/2,o=W(e[0]-t[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function le(t,e){let i=0;for(let n=0,s=t.length;n<s-1;++n)i+=ae(t[n],t[n+1],e);return i}function Ae(t,e){const i=(e=e||{}).radius||oe,n=e.projection||"EPSG:3857",s=t.getType();"GeometryCollection"!==s&&(t=t.clone().transform(n,"EPSG:4326"));let r,o,a,l,A,c,h=0;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":r=t.getCoordinates(),h=le(r,i);break;case"MultiLineString":case"Polygon":for(r=t.getCoordinates(),a=0,l=r.length;a<l;++a)h+=le(r[a],i);break;case"MultiPolygon":for(r=t.getCoordinates(),a=0,l=r.length;a<l;++a)for(o=r[a],A=0,c=o.length;A<c;++A)h+=le(o[A],i);break;case"GeometryCollection":{const i=t.getGeometries();for(a=0,l=i.length;a<l;++a)h+=Ae(i[a],e);break}default:throw new Error("Unsupported geometry type: "+s)}return h}function ce(t,e){let i=0;const n=t.length;let s=t[n-1][0],r=t[n-1][1];for(let e=0;e<n;e++){const n=t[e][0],o=t[e][1];i+=W(n-s)*(2+Math.sin(W(r))+Math.sin(W(o))),s=n,r=o}return i*e*e/2}function he(t,e){const i=(e=e||{}).radius||oe,n=e.projection||"EPSG:3857",s=t.getType();"GeometryCollection"!==s&&(t=t.clone().transform(n,"EPSG:4326"));let r,o,a,l,A,c,h=0;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(r=t.getCoordinates(),h=Math.abs(ce(r[0],i)),a=1,l=r.length;a<l;++a)h-=Math.abs(ce(r[a],i));break;case"MultiPolygon":for(r=t.getCoordinates(),a=0,l=r.length;a<l;++a)for(o=r[a],h+=Math.abs(ce(o[0],i)),A=1,c=o.length;A<c;++A)h-=Math.abs(ce(o[A],i));break;case"GeometryCollection":{const i=t.getGeometries();for(a=0,l=i.length;a<l;++a)h+=he(i[a],e);break}default:throw new Error("Unsupported geometry type: "+s)}return h}const ue=[function(t){const e=se(t.getCode());return e?{forward:re(ee,e),inverse:re(te,e)}:null}],de=[function(t){return se(t)?new gt({code:t,units:"m"}):null}];let ge=!0;function pe(t){ge=!1}function fe(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function me(t){!function(t,e){Ft[t]=e}(t.getCode(),t),Rt(t,t,fe)}function _e(t){if("string"!=typeof t)return t;const e=It(t);if(e)return e;for(const e of de){const i=e(t);if(i)return i}return null}function ye(t,e,i,n){let s;const r=(t=_e(t)).getPointResolutionFunc();if(r){if(s=r(e,i),n&&n!==t.getUnits()){const e=t.getMetersPerUnit();e&&(s=s*e/dt[n])}}else{const r=t.getUnits();if("degrees"==r&&!n||"degrees"==n)s=e;else{const o=Se(t,_e("EPSG:4326"));if(o||"degrees"===r){let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=o(t,t,2);s=(ae(t.slice(0,2),t.slice(2,4))+ae(t.slice(4,6),t.slice(6,8)))/2}else s=e*t.getMetersPerUnit();const a=n?dt[n]:t.getMetersPerUnit();void 0!==a&&(s/=a)}}return s}function we(t){!function(t){t.forEach(me)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Rt(e,t,fe)}))}))}function ve(t,e){return t?"string"==typeof t?_e(t):t:_e(e)}function be(t){return function(e,i,n,s){const r=e.length;n=void 0!==n?n:2,s=s??n,i=void 0!==i?i:new Array(r);for(let o=0;o<r;o+=s){const r=t(e.slice(o,o+n)),a=r.length;for(let t=0,n=s;t<n;++t)i[o+t]=t>=a?e[o+t]:r[t]}return i}}function Ce(t,e,i,n){const s=_e(t),r=_e(e);Rt(s,r,be(i)),Rt(r,s,be(n))}function xe(t,e){return pe(),Le(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function Be(t,e){const i=Le(t,"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=$(n+180,360)-180),i}function Ee(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return i;return Se(t,e)===fe&&i}function Se(t,e){const i=t.getCode(),n=e.getCode();let s=kt(i,n);if(s)return s;let r=null,o=null;for(const i of ue)r||(r=i(t)),o||(o=i(e));if(!r&&!o)return null;const a="EPSG:4326";if(o)if(r)s=Fe(r.inverse,o.forward);else{const t=kt(i,a);t&&(s=Fe(t,o.forward))}else{const t=kt(a,n);t&&(s=Fe(r.inverse,t))}return s&&(me(t),me(e),Rt(t,e,s)),s}function Fe(t,e){return function(i,n,s,r){return n=t(i,n,s,r),e(n,n,s,r)}}function Ie(t,e){return Se(_e(t),_e(e))}function Le(t,e,i){const n=Ie(e,i);if(!n){const t=_e(e).getCode(),n=_e(i).getCode();throw new Error(`No transform available between ${t} and ${n}`)}return n(t,void 0,t.length)}function Me(t,e){return t}function Te(e,i){return ge&&!ot(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(ge=!1,t("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e}function Re(t,e){return t}function ke(t,e){return t}function Ue(t,e,i){return function(n){let s,r;if(t.canWrapX()){const e=t.getExtent(),o=O(e);r=ut(n=n.slice(0),t,o),r&&(n[0]=n[0]-r*o),n[0]=V(n[0],e[0],e[2]),n[1]=V(n[1],e[1],e[3]),s=i(n)}else s=i(n);return r&&e.canWrapX()&&(s[0]+=r*O(e.getExtent())),s}}var De,Oe,Pe;we(vt),we(St),De=vt,Oe=bt,Pe=Ct,St.forEach((function(t){De.forEach((function(e){Rt(t,e,Oe),Rt(e,t,Pe)}))}));var Ne="change",Qe="error",He="contextmenu",Ge="click",Ve="keydown",ze="keypress",Ke="load",je="touchmove",We="wheel",$e={SINGLECLICK:"singleclick",CLICK:Ge,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ye="propertychange";class Xe{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function qe(t,e){return t>e?1:t<e?-1:0}function Ze(t,e){return t<e?1:t>e?-1:0}function Je(t,e,i){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if("function"==typeof i){for(let s=1;s<n;++s){const n=t[s];if(n===e)return s;if(n<e)return i(e,t[s-1],n)>0?s-1:s}return n-1}if(i>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(i<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function ti(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function ei(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let e=0;e<n;e++)t[t.length]=i[e]}function ii(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function ni(){return!0}function si(){return!1}function ri(){}function oi(t){let e,i,n;return function(){const s=Array.prototype.slice.call(arguments);return i&&this===n&&ii(s,i)||(n=this,i=s,e=t.apply(this,arguments)),e}}class ai{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class li extends Xe{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const s=e?new ai(t):t;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});let a;i in r||(r[i]=0,o[i]=0),++r[i];for(let t=0,e=n.length;t<e;++t)if(a="handleEvent"in n[t]?n[t].handleEvent(s):n[t].call(this,s),!1===a||s.propagationStopped){a=!1;break}if(0==--r[i]){let t=o[i];for(delete o[i];t--;)this.removeEventListener(i,ri);delete r[i]}return a}disposeInternal(){this.listeners_&&Lt(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=ri,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}function Ai(t,e,i,n,s){if(s){const s=i;i=function(r){return t.removeEventListener(e,i),s.call(n??this,r)}}else n&&n!==t&&(i=i.bind(n));const r={target:t,type:e,listener:i};return t.addEventListener(e,i),r}function ci(t,e,i,n){return Ai(t,e,i,n,!0)}function hi(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Lt(t))}class ui extends li{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ne)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ai(this,t[s],e);return n}return Ai(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=ci(this,t[s],e)}else i=ci(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)di(i);else if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}function di(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)hi(t[e]);else hi(t)}function gi(){throw new Error("Unimplemented abstract method.")}ui.prototype.on,ui.prototype.once,ui.prototype.un;let pi=0;function fi(t){return t.ol_uid||(t.ol_uid=String(++pi))}class mi extends ai{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class _i extends ui{constructor(t){super(),this.on,this.once,this.un,fi(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new mi(i,t,e)),i=Ye,this.hasListener(i)&&this.dispatchEvent(new mi(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],Mt(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}function yi(t){return Math.pow(t,3)}function wi(t){return 1-yi(1-t)}function vi(t){return 3*t*t-2*t*t*t}function bi(t){return t}var Ci="active";class xi extends _i{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ci)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Ci,t)}setMap(t){this.map_=t}}function Bi(t,e,i,n){const s=t.getZoom();if(void 0===s)return;const r=t.getConstrainedZoom(s+e),o=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:i,duration:void 0!==n?n:250,easing:wi})}class Ei extends xi{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==$e.DBLCLICK){const i=t.originalEvent,n=t.map,s=t.coordinate,r=i.shiftKey?-this.delta_:this.delta_;Bi(n.getView(),r,s,this.duration_),i.preventDefault(),e=!0}return!e}}const Si="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";Si.includes("safari")&&!Si.includes("chrom")&&(Si.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Si));const Fi=Si.includes("webkit")&&!Si.includes("edge"),Ii=Si.includes("macintosh"),Li="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Mi="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Ti="undefined"!=typeof Image&&Image.prototype.decode,Ri=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function ki(t){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),i);++n);return i}}const Ui=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Di=function(t){const e=t.map.getTargetElement(),i=e.getRootNode();return!(i instanceof ShadowRoot?i.host:e).hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),i=e.getRootNode(),n=t.map.getOwnerDocument().activeElement;return i instanceof ShadowRoot?i.host.contains(n):e.contains(n)}(t)},Oi=ni,Pi=function(t){return t.type==$e.CLICK},Ni=function(t){const e=t.originalEvent;return"pointerId"in e&&0==e.button&&!(Fi&&Ii&&e.ctrlKey)},Qi=si,Hi=function(t){return t.type==$e.SINGLECLICK},Gi=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Vi=function(t){const e=t.originalEvent;return!e.altKey&&(Ii?e.metaKey:e.ctrlKey)&&!e.shiftKey},zi=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ki=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},ji=function(t){const e=t.originalEvent;return"pointerId"in e&&"mouse"==e.pointerType},Wi=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&0===e.button};function $i(t,e){if(!t)throw new Error(e)}function Yi(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function Xi(t,e,i,n,s,r,o,a){const l=Math.sin(r),A=Math.cos(r);return t[0]=n*A,t[1]=s*l,t[2]=-n*l,t[3]=s*A,t[4]=o*n*A-a*n*l+e,t[5]=o*s*l+a*s*A+i,t}function qi(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;$i(0!==i,"Transformation matrix cannot be inverted");const s=e[0],r=e[1],o=e[2],a=e[3],l=e[4],A=e[5];return t[0]=a/i,t[1]=-r/i,t[2]=-o/i,t[3]=s/i,t[4]=(o*A-a*l)/i,t[5]=-(s*A-r*l)/i,t}new Array(6);const Zi=[1e5,1e5,1e5,1e5,2,2];function Ji(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function tn(t,e,i,n,s,r,o){r=r||[],o=o||2;let a=0;for(let l=e;l<i;l+=n){const e=t[l],i=t[l+1];r[a++]=s[0]*e+s[2]*i+s[4],r[a++]=s[1]*e+s[3]*i+s[5];for(let e=2;e<o;e++)r[a++]=t[l+e]}return r&&r.length!=a&&(r.length=a),r}function en(t,e,i,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),A=r[0],c=r[1];let h=0;for(let s=e;s<i;s+=n){const e=t[s]-A,i=t[s+1]-c;o[h++]=A+e*a-i*l,o[h++]=c+e*l+i*a;for(let e=s+2;e<s+n;++e)o[h++]=t[e]}return o&&o.length!=h&&(o.length=h),o}const nn=[1,0,0,1,0,0],sn=[NaN,NaN];class rn extends _i{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=oi(((t,e,i)=>{if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return gi()}closestPointXY(t,e,i,n){return gi()}containsXY(t,e){return 0===this.closestPointXY(t,e,sn,Number.MIN_VALUE)}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return gi()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&m(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){gi()}scale(t,e,i){gi()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return gi()}getType(){return gi()}applyTransform(t){gi()}intersectsExtent(t){return gi()}translate(t,e){gi()}transform(t,e){const i=_e(t),n="tile-pixels"==i.getUnits()?function(t,n,s){const r=i.getExtent(),o=i.getWorldExtent(),a=R(o)/R(r);Xi(nn,o[0],o[3],a,-a,0,0,0);const l=tn(t,0,t.length,s,nn,n),A=Ie(i,e);return A?A(l,l,s):l}:Ie(i,e);return this.applyTransform(n),this}}class on extends rn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return y(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return gi()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=ln(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){gi()}setLayout(t,e,i){let n;if(t)n=ln(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=an(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();en(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=I(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();!function(t,e,i,n,s,r,o,a){a=a||[];const l=o[0],A=o[1];let c=0;for(let o=e;o<i;o+=n){const e=t[o]-l,i=t[o+1]-A;a[c++]=l+s*e,a[c++]=A+r*i;for(let e=o+2;e<o+n;++e)a[c++]=t[e]}a&&a.length!=c&&(a.length=c)}(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();!function(t,e,i,n,s,r,o){o=o||[];let a=0;for(let l=e;l<i;l+=n){o[a++]=t[l]+s,o[a++]=t[l+1]+r;for(let e=l+2;e<l+n;++e)o[a++]=t[e]}o&&o.length!=a&&(o.length=a)}(i,0,i.length,n,t,e,i),this.changed()}}}function an(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function ln(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function An(t,e,i,n){let s=0;const r=t[i-n],o=t[i-n+1];let a=0,l=0;for(;e<i;e+=n){const i=t[e]-r,n=t[e+1]-o;s+=l*i-a*n,a=i,l=n}return s/2}function cn(t,e,i,n){let s=0;for(let r=0,o=i.length;r<o;++r){const o=i[r];s+=An(t,e,o,n),e=o}return s}function hn(t,e,i,n,s,r,o){const a=t[e],l=t[e+1],A=t[i]-a,c=t[i+1]-l;let h;if(0===A&&0===c)h=e;else{const u=((s-a)*A+(r-l)*c)/(A*A+c*c);if(u>1)h=i;else{if(u>0){for(let s=0;s<n;++s)o[s]=Y(t[e+s],t[i+s],u);return void(o.length=n)}h=e}}for(let e=0;e<n;++e)o[e]=t[h+e];o.length=n}function un(t,e,i,n,s){let r=t[e],o=t[e+1];for(e+=n;e<i;e+=n){const i=t[e],n=t[e+1],a=K(r,o,i,n);a>s&&(s=a),r=i,o=n}return s}function dn(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r];s=un(t,e,o,n,s),e=o}return s}function gn(t,e,i,n,s,r,o,a,l,A,c){if(e==i)return A;let h,u;if(0===s){if(u=K(o,a,t[e],t[e+1]),u<A){for(h=0;h<n;++h)l[h]=t[e+h];return l.length=n,u}return A}c=c||[NaN,NaN];let d=e+n;for(;d<i;)if(hn(t,d-n,d,n,o,a,c),u=K(o,a,c[0],c[1]),u<A){for(A=u,h=0;h<n;++h)l[h]=c[h];l.length=n,d+=n}else d+=n*Math.max((Math.sqrt(u)-Math.sqrt(A))/s|0,1);if(r&&(hn(t,i-n,e,n,o,a,c),u=K(o,a,c[0],c[1]),u<A)){for(A=u,h=0;h<n;++h)l[h]=c[h];l.length=n}return A}function pn(t,e,i,n,s,r,o,a,l,A,c){c=c||[NaN,NaN];for(let h=0,u=i.length;h<u;++h){const u=i[h];A=gn(t,e,u,n,s,r,o,a,l,A,c),e=u}return A}function fn(t,e,i,n){for(let n=0,s=i.length;n<s;++n)t[e++]=i[n];return e}function mn(t,e,i,n){for(let s=0,r=i.length;s<r;++s){const r=i[s];for(let i=0;i<n;++i)t[e++]=r[i]}return e}function _n(t,e,i,n,s){s=s||[];let r=0;for(let o=0,a=i.length;o<a;++o){const a=mn(t,e,i[o],n);s[r++]=a,e=a}return s.length=r,s}function yn(t,e,i,n,s){s=s||[];let r=0;for(let o=0,a=i.length;o<a;++o){const a=_n(t,e,i[o],n,s[r]);0===a.length&&(a[0]=e),s[r++]=a,e=a[a.length-1]}return s.length=r,s}function wn(t,e,i,n,s){s=void 0!==s?s:[];let r=0;for(let o=e;o<i;o+=n)s[r++]=t.slice(o,o+n);return s.length=r,s}function vn(t,e,i,n,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];s[r++]=wn(t,e,a,n,s[r]),e=a}return s.length=r,s}function bn(t,e,i,n,s){s=void 0!==s?s:[];let r=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];s[r++]=1===a.length&&a[0]===e?[]:vn(t,e,a,n,s[r]),e=a[a.length-1]}return s.length=r,s}function Cn(t,e,i,n,s,r,o){const a=(i-e)/n;if(a<3){for(;e<i;e+=n)r[o++]=t[e],r[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const A=[e,i-n];let c=0;for(;A.length>0;){const i=A.pop(),r=A.pop();let o=0;const a=t[r],h=t[r+1],u=t[i],d=t[i+1];for(let e=r+n;e<i;e+=n){const i=z(t[e],t[e+1],a,h,u,d);i>o&&(c=e,o=i)}o>s&&(l[(c-e)/n]=1,r+n<c&&A.push(r,c),c+n<i&&A.push(c,i))}for(let i=0;i<a;++i)l[i]&&(r[o++]=t[e+i*n],r[o++]=t[e+i*n+1]);return o}function xn(t,e,i,n,s,r,o,a){for(let l=0,A=i.length;l<A;++l){const A=i[l];o=Cn(t,e,A,n,s,r,o),a.push(o),e=A}return o}function Bn(t,e){return e*Math.round(t/e)}function En(t,e,i,n,s,r,o){if(e==i)return o;let a,l,A=Bn(t[e],s),c=Bn(t[e+1],s);e+=n,r[o++]=A,r[o++]=c;do{if(a=Bn(t[e],s),l=Bn(t[e+1],s),(e+=n)==i)return r[o++]=a,r[o++]=l,o}while(a==A&&l==c);for(;e<i;){const i=Bn(t[e],s),h=Bn(t[e+1],s);if(e+=n,i==a&&h==l)continue;const u=a-A,d=l-c,g=i-A,p=h-c;u*p==d*g&&(u<0&&g<u||u==g||u>0&&g>u)&&(d<0&&p<d||d==p||d>0&&p>d)?(a=i,l=h):(r[o++]=a,r[o++]=l,A=a,c=l,a=i,l=h)}return r[o++]=a,r[o++]=l,o}function Sn(t,e,i,n,s,r,o,a){for(let l=0,A=i.length;l<A;++l){const A=i[l];o=En(t,e,A,n,s,r,o),a.push(o),e=A}return o}class Fn extends on{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Fn(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<c(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return An(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Cn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Fn(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mn(this.flatCoordinates,0,t,this.stride),this.changed()}}let In=class t extends on{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(t,e,i,n){const s=this.flatCoordinates,r=K(t,e,s[0],s[1]);if(r<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=s[e];return i.length=t,r}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return _(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return d(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fn(this.flatCoordinates,0,t,this.stride),this.changed()}};function Ln(t,e,i,n,s){return!B(s,(function(s){return!Mn(t,e,i,n,s[0],s[1])}))}function Mn(t,e,i,n,s,r){let o=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];l<=r?n>r&&(i-a)*(r-l)-(s-a)*(n-l)>0&&o++:n<=r&&(i-a)*(r-l)-(s-a)*(n-l)<0&&o--,a=i,l=n}return 0!==o}function Tn(t,e,i,n,s,r){if(0===i.length)return!1;if(!Mn(t,e,i[0],n,s,r))return!1;for(let e=1,o=i.length;e<o;++e)if(Mn(t,i[e-1],i[e],n,s,r))return!1;return!0}function Rn(t,e,i,n,s,r,o){let a,l,A,c,h,u,d;const g=s[r+1],p=[];for(let s=0,r=i.length;s<r;++s){const r=i[s];for(c=t[r-n],u=t[r-n+1],a=e;a<r;a+=n)h=t[a],d=t[a+1],(g<=u&&d<=g||u<=g&&g<=d)&&(A=(g-u)/(d-u)*(h-c)+c,p.push(A)),c=h,u=d}let f=NaN,m=-1/0;for(p.sort(qe),c=p[0],a=1,l=p.length;a<l;++a){h=p[a];const s=Math.abs(h-c);s>m&&(A=(c+h)/2,Tn(t,e,i,n,A,g)&&(f=A,m=s)),c=h}return isNaN(f)&&(f=s[r]),o?(o.push(f,g,m),o):[f,g,m]}function kn(t,e,i,n,s){let r=[];for(let o=0,a=i.length;o<a;++o){const a=i[o];r=Rn(t,e,a,n,s,2*o,r),e=a[a.length-1]}return r}function Un(t,e,i,n,s){let r;for(e+=n;e<i;e+=n)if(r=s(t.slice(e-n,e),t.slice(e,e+n)),r)return r;return!1}function Dn(t,e){const[i,n]=t,[s,r]=e,o=((i[0]-s[0])*(s[1]-r[1])-(i[1]-s[1])*(s[0]-r[0]))/((i[0]-n[0])*(s[1]-r[1])-(i[1]-n[1])*(s[0]-r[0])),a=((i[0]-s[0])*(i[1]-n[1])-(i[1]-s[1])*(i[0]-n[0]))/((i[0]-n[0])*(s[1]-r[1])-(i[1]-n[1])*(s[0]-r[0]));if(0<=o&&o<=1&&0<=a&&a<=1)return[i[0]+o*(n[0]-i[0]),i[1]+o*(n[1]-i[1])]}function On(t,e,a,l,A,c){return c=c??C([1/0,1/0,-1/0,-1/0],t,e,a,l),!!P(A,c)&&(c[0]>=A[0]&&c[2]<=A[2]||c[1]>=A[1]&&c[3]<=A[3]||Un(t,e,a,l,(function(t,e){return function(t,e,a){let l=!1;const A=g(t,e),c=g(t,a);if(A===i||c===i)l=!0;else{const i=t[0],h=t[1],u=t[2],d=t[3],g=e[0],p=e[1],f=a[0],m=a[1],_=(m-p)/(f-g);let y,w;c&n&&!(A&n)&&(y=f-(m-d)/_,l=y>=i&&y<=u),l||!(c&s)||A&s||(w=m-(f-u)*_,l=w>=h&&w<=d),l||!(c&r)||A&r||(y=f-(m-h)/_,l=y>=i&&y<=u),l||!(c&o)||A&o||(w=m-(f-i)*_,l=w>=h&&w<=d)}return l}(A,t,e)})))}function Pn(t,e,i,n,s){return!!On(t,e,i,n,s)||(!!Mn(t,e,i,n,s[0],s[1])||(!!Mn(t,e,i,n,s[0],s[3])||(!!Mn(t,e,i,n,s[2],s[1])||!!Mn(t,e,i,n,s[2],s[3]))))}function Nn(t,e,i,n,s){if(!Pn(t,e,i[0],n,s))return!1;if(1===i.length)return!0;for(let e=1,r=i.length;e<r;++e)if(Ln(t,i[e-1],i[e],n,s)&&!On(t,i[e-1],i[e],n,s))return!1;return!0}function Qn(t,e,i,n){for(;e<i-n;){for(let s=0;s<n;++s){const r=t[e+s];t[e+s]=t[i-n+s],t[i-n+s]=r}e+=n,i-=n}}function Hn(t,e,i,n){let s=0,r=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=(i-r)*(n+o),r=i,o=n}return 0===s?void 0:s>0}function Gn(t,e,i,n,s){s=void 0!==s&&s;for(let r=0,o=i.length;r<o;++r){const o=i[r],a=Hn(t,e,o,n);if(0===r){if(s&&a||!s&&!a)return!1}else if(s&&!a||!s&&a)return!1;e=o}return!0}function Vn(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r];if(!Gn(t,e,o,n,s))return!1;o.length&&(e=o[o.length-1])}return!0}function zn(t,e,i,n,s){s=void 0!==s&&s;for(let r=0,o=i.length;r<o;++r){const o=i[r],a=Hn(t,e,o,n);(0===r?s&&a||!s&&!a:s&&!a||!s&&a)&&Qn(t,e,o,n),e=o}return e}function Kn(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r)e=zn(t,e,i[r],n,s);return e}class jn extends on{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ei(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new jn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<c(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return Tn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return cn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),zn(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,vn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=I(this.getExtent());this.flatInteriorPoint_=Rn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new In(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Fn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let r=0,o=i.length;r<o;++r){const o=i[r],a=new Fn(e.slice(s,o),t);n.push(a),s=o}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Gn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=zn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Sn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new jn(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Nn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=_n(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}function Wn(t){if(N(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],i=t[1],n=t[2],s=t[3],r=[e,i,e,s,n,s,n,i,e,i];return new jn(r,"XY",[r.length])}function $n(t,e,i){e=e||32;const n=t.getStride(),s=t.getLayout(),r=t.getCenter(),o=n*(e+1),a=new Array(o);for(let t=0;t<o;t+=n){a[t]=0,a[t+1]=0;for(let e=2;e<n;e++)a[t+e]=r[e]}const l=[a.length],A=new jn(a,s,l);return Yn(A,r,t.getRadius(),i),A}function Yn(t,e,i,n){const s=t.getFlatCoordinates(),r=t.getStride(),o=s.length/r-1,a=n||0;for(let t=0;t<=o;++t){const n=t*r,l=a+2*$(t,o)*Math.PI/o;s[n]=e[0]+i*Math.cos(l),s[n+1]=e[1]+i*Math.sin(l)}t.changed()}class Xn extends Xe{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new jn([i])}getGeometry(){return this.geometry_}}class qn extends xi{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==$e.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==$e.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==$e.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==$e.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Zn(t){const e=t.length;let i=0,n=0;for(let s=0;s<e;s++)i+=t[s].clientX,n+=t[s].clientY;return{clientX:i/e,clientY:n/e}}const Jn="boxstart",ts="boxdrag",es="boxend",is="boxcancel";class ns extends ai{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class ss extends qn{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Xn(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??Ni,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new ns(ts,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new ns(e?es:is,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ns(Jn,t.coordinate,t)),!0)}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ns(is,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new ns(is,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class rs extends qn{constructor(t){super({stopDown:si}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:ki(Gi,Wi);this.condition_=t.onFocusOnly?ki(Di,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,n=e.getEventPixel(Zn(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();!function(t,e){t[0]*=e,t[1]*=e}(e,i.getResolution()),at(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),s=i.getCenterInternal(),r=e.getPixelFromCoordinateInternal(s),o=e.getCoordinateFromPixelInternal([r[0]-t*Math.cos(n),r[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(o),duration:500,easing:wi})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function os(t){if(void 0!==t)return 0}function as(t){if(void 0!==t)return t}class ls extends qn{constructor(t){t=t||{},super({stopDown:si}),this.condition_=t.condition?t.condition:Ui,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!ji(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===os)return;const n=e.getSize(),s=t.pixel,r=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=r}handleUpEvent(t){if(!ji(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!ji(t))return!1;if(Ni(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}class As extends ss{constructor(t){super({condition:(t=t||{}).condition?t.condition:zi,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),s=e.getResolution()/n;i=i.clone(),i.scale(s*s)}e.fitInternal(i,{duration:this.duration_,easing:wi})}}class cs extends _i{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new cs(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(hi(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Ai(t,Ne,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;let e;if(Array.isArray(t))e=t;else{$i("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");e=[t]}return function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}class hs extends ai{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}class us extends hs{constructor(t,e,i,n,s,r){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}class ds extends on{constructor(t,e,i){super(),void 0!==i&&void 0===e?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){const t=new ds(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,r=t-s[0],o=e-s[1],a=r*r+o*o;if(a<n){if(0===a)for(let t=0;t<this.stride;++t)i[t]=s[t];else{const t=this.getRadius()/Math.sqrt(a);i[0]=s[0]+t*r,i[1]=s[1]+t*o;for(let t=2;t<this.stride;++t)i[t]=s[t]}return i.length=this.stride,a}return n}containsXY(t,e){const i=this.flatCoordinates,n=t-i[0],s=e-i[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return f(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){if(P(t,this.getExtent())){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||B(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=fn(n,0,t,this.stride);n[s++]=n[0]+e;for(let t=1,e=this.stride;t<e;++t)n[s++]=n[t];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter(en(i,0,i.length,n,t,e,i)),this.changed()}}ds.prototype.transform;class gs extends rn{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(hi),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,i=t.length;e<i;++e)this.changeEventsKeys_.push(Ai(t[e],Ne,this.changed,this))}clone(){const t=new gs(ps(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<c(this.getExtent(),t,e))return n;const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)n=s[r].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){m(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)v(t,e[i].getExtent());return t}getGeometries(){return ps(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let s=0,r=i.length;s<r;++s){const r=i[s],o=r.getSimplifiedGeometry(t);e.push(o),o!==r&&(n=!0)}if(n){return new gs(e)}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=I(this.getExtent()));const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(ps(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ps(t){return t.map((t=>t.clone()))}function fs(t,e,i,n,s,r,o){let a,l;const A=(i-e)/n;if(1===A)a=e;else if(2===A)a=e,l=s;else if(0!==A){let r=t[e],o=t[e+1],A=0;const c=[0];for(let s=e+n;s<i;s+=n){const e=t[s],i=t[s+1];A+=Math.sqrt((e-r)*(e-r)+(i-o)*(i-o)),c.push(A),r=e,o=i}const h=s*A,u=function(t,e,i){let n,s;i=i||qe;let r=0,o=t.length,a=!1;for(;r<o;)n=r+(o-r>>1),s=+i(t[n],e),s<0?r=n+1:(o=n,a=!s);return a?r:~r}(c,h);u<0?(l=(h-c[-u-2])/(c[-u-1]-c[-u-2]),a=e+(-u-2)*n):a=e+u*n}o=o>1?o:2,r=r||new Array(o);for(let e=0;e<o;++e)r[e]=void 0===a?NaN:void 0===l?t[a+e]:Y(t[a+e],t[a+n+e],l);return r}function ms(t,e,i,n,s,r){if(i==e)return null;let o;if(s<t[e+n-1])return r?(o=t.slice(e,e+n),o[n-1]=s,o):null;if(t[i-1]<s)return r?(o=t.slice(i-n,i),o[n-1]=s,o):null;if(s==t[e+n-1])return t.slice(e,e+n);let a=e/n,l=i/n;for(;a<l;){const e=a+l>>1;s<t[(e+1)*n-1]?l=e:a=e+1}const A=t[a*n-1];if(s==A)return t.slice((a-1)*n,(a-1)*n+n);const c=(s-A)/(t[(a+1)*n-1]-A);o=[];for(let e=0;e<n-1;++e)o.push(Y(t[(a-1)*n+e],t[a*n+e],c));return o.push(s),o}function _s(t,e,i,n){let s=t[e],r=t[e+1],o=0;for(let a=e+n;a<i;a+=n){const e=t[a],i=t[a+1];o+=Math.sqrt((e-s)*(e-s)+(i-r)*(i-r)),s=e,r=i}return o}class ys extends on{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){ei(this.flatCoordinates,t),this.changed()}clone(){const t=new ys(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<c(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return Un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return fs(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return _s(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Cn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ys(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return On(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mn(this.flatCoordinates,0,t,this.stride),this.changed()}}class ws extends on{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{const e=t,i=[],n=[];for(let t=0,s=e.length;t<s;++t){ei(i,e[t].getFlatCoordinates()),n.push(i.length)}const s=0===e.length?this.getLayout():e[0].getLayout();this.setFlatCoordinates(s,i),this.ends_=n}}appendLineString(t){ei(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ws(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<c(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),pn(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,function(t,e,i,n,s,r,o){if(o)return ms(t,e,i[i.length-1],n,s,r);let a;if(s<t[n-1])return r?(a=t.slice(0,n),a[n-1]=s,a):null;if(t[t.length-1]<s)return r?(a=t.slice(t.length-n),a[n-1]=s,a):null;for(let r=0,o=i.length;r<o;++r){const o=i[r];if(e!=o){if(s<t[e+n-1])return null;if(s<=t[o-1])return ms(t,e,o,n,s,!1);e=o}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return vn(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new ys(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let s=0;for(let r=0,o=e.length;r<o;++r){const o=e[r],a=new ys(t.slice(s,o),i);n.push(a),s=o}return n}getLength(){const t=this.ends_;let e=0,i=0;for(let n=0,s=t.length;n<s;++n)i+=_s(this.flatCoordinates,e,t[n],this.stride),e=t[n];return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let r=0,o=n.length;r<o;++r){const o=n[r];ei(t,fs(e,i,o,s,.5)),i=o}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=xn(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new ws(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return function(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){if(On(t,e,i[r],n,s))return!0;e=i[r]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=_n(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}class vs extends on{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){ei(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new vs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<c(this.getExtent(),t,e))return n;const s=this.flatCoordinates,r=this.stride;for(let o=0,a=s.length;o<a;o+=r){const a=K(t,e,s[o],s[o+1]);if(a<n){n=a;for(let t=0;t<r;++t)i[t]=s[o+t];i.length=r}}return n}getCoordinates(){return wn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new In(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let s=0,r=t.length;s<r;s+=i){const r=new In(t.slice(s,s+i),e);n.push(r)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,s=e.length;n<s;n+=i){if(d(t,e[n],e[n+1]))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=mn(this.flatCoordinates,0,t,this.stride),this.changed()}}function bs(t,e,i,n){const s=[];let r=[1/0,1/0,-1/0,-1/0];for(let o=0,a=i.length;o<a;++o){const a=i[o];r=y(t,e,a[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=a[a.length-1]}return s}class Cs extends on{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){const n=t,s=[],r=[];for(let t=0,e=n.length;t<e;++t){const e=n[t],i=s.length,o=e.getEnds();for(let t=0,e=o.length;t<e;++t)o[t]+=i;ei(s,e.getFlatCoordinates()),r.push(o)}e=0===n.length?this.getLayout():n[0].getLayout(),t=s,i=r}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;ei(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,n=e.length;t<n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const i=new Cs(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<c(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r];s=dn(t,e,o,n,s),e=o[o.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,s,r,o,a,l,A,c){c=c||[NaN,NaN];for(let h=0,u=i.length;h<u;++h){const u=i[h];A=pn(t,e,u,n,s,r,o,a,l,A,c),e=u[u.length-1]}return A}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return function(t,e,i,n,s,r){if(0===i.length)return!1;for(let o=0,a=i.length;o<a;++o){const a=i[o];if(Tn(t,e,a,n,s,r))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function(t,e,i,n){let s=0;for(let r=0,o=i.length;r<o;++r){const o=i[r];s+=cn(t,e,o,n),e=o[o.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Kn(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,bn(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=bs(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=kn(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new vs(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Vn(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Kn(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,r,o,a){for(let l=0,A=i.length;l<A;++l){const A=i[l],c=[];o=Sn(t,e,A,n,s,r,o,c),a.push(c),e=A[A.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Cs(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let t=0,n=i.length;t<n;++t)i[t]-=e;return new jn(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let r=0,o=i.length;r<o;++r){const o=i[r].slice(),a=o[o.length-1];if(0!==s)for(let t=0,e=o.length;t<e;++t)o[t]-=s;const l=new jn(e.slice(s,a),t,o);n.push(l),s=a}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return function(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r];if(Nn(t,e,o,n,s))return!0;e=o[o.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=yn(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var xs=0,Bs=1;function Es(t,e,i,n){let s;return s=i&&i.length?i.shift():Mi?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",n)}let Ss;function Fs(){return Ss||(Ss=Es(1,1)),Ss}function Is(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Ls(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function Ms(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function Ts(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function Rs(t){for(;t.lastChild;)t.lastChild.remove()}var ks="prerender",Us="postrender",Ds="precompose",Os="postcompose",Ps="rendercomplete",Ns=0,Qs=1,Hs=2,Gs=3;const Vs=[NaN,NaN,NaN,0];let zs;const Ks=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,js=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Ws=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,$s=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Ys(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function Xs(t){throw new Error('failed to parse "'+t+'" as color')}function qs(t){if(t.toLowerCase().startsWith("rgb")){const e=t.match(js)||t.match(Ks)||t.match(Ws);if(e){const t=e[4],i=100/255;return[V(Ys(e[1],i)+.5|0,0,255),V(Ys(e[2],i)+.5|0,0,255),V(Ys(e[3],i)+.5|0,0,255),void 0!==t?V(Ys(t,100),0,1):1]}Xs(t)}if(t.startsWith("#")){if($s.test(t)){const e=t.substring(1),i=e.length<=4?1:2,n=[0,0,0,255];for(let t=0,s=e.length;t<s;t+=i){let s=parseInt(e.substring(t,t+i),16);1===i&&(s+=s<<4),n[t/i]=s}return n[3]=n[3]/255,n}Xs(t)}const e=(zs||(zs=Es(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),zs);e.fillStyle="#abcdef";let i=e.fillStyle;e.fillStyle=t,e.fillStyle===i&&(e.fillStyle="#fedcba",i=e.fillStyle,e.fillStyle=t,e.fillStyle===i&&Xs(t));const n=e.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return qs(n);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const s=Array.from(e.getImageData(0,0,1,1).data);return s[3]=X(s[3]/255,3),s}const Zs={};let Js=0;function tr(t){if(4===t.length)return t;const e=t.slice();return e[3]=1,e}function er(t){return t>.0031308?269.025*Math.pow(t,1/2.4)-14.025:3294.6*t}function ir(t){return t>.2068965?Math.pow(t,3):108/841*(t-4/29)}function nr(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function sr(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function rr(t){const e=nr(t[0]),i=nr(t[1]),n=nr(t[2]),s=sr(.222488403*e+.716873169*i+.06060791*n),r=500*(sr(.452247074*e+.399439023*i+.148375274*n)-s),o=200*(s-sr(.016863605*e+.117638439*i+.865350722*n)),a=Math.atan2(o,r)*(180/Math.PI);return[116*s-16,Math.sqrt(r*r+o*o),a<0?a+360:a,t[3]]}function or(t){if("none"===t)return Vs;if(Zs.hasOwnProperty(t))return Zs[t];if(Js>=1024){let t=0;for(const e in Zs)3&t++||(delete Zs[e],--Js)}const e=qs(t);4!==e.length&&Xs(t);for(const i of e)isNaN(i)&&Xs(t);return Zs[t]=e,++Js,e}function ar(t){return Array.isArray(t)?t:or(t)}function lr(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];n!=(0|n)&&(n=n+.5|0);return"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}function Ar(t,e){return e&&(t.src=e),t.src&&Ti?new Promise(((e,i)=>t.decode().then((()=>e(t))).catch((n=>t.complete&&t.width?e(t):i(n))))):function(t){return new Promise(((e,i)=>{function n(){r(),e(t)}function s(){r(),i(new Error("Image load error"))}function r(){t.removeEventListener("load",n),t.removeEventListener("error",s)}t.addEventListener("load",n),t.addEventListener("error",s)}))}(t)}function cr(t,e,i){return e+":"+t+":"+(i?ar(i):"null")}const hr=new class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];3&t++||i.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const n=cr(t,e,i);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,i){const n=cr(t,e,i);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,i,n,s){const r=cr(t,e,i),o=r in this.cache_;this.cache_[r]=n,s&&(n.getImageState()===Ns&&n.load(),n.getImageState()===Qs?n.ready().then((()=>{this.patternCache_[r]=Fs().createPattern(n.getImage(1),"repeat")})):this.patternCache_[r]=Fs().createPattern(n.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};let ur=null;class dr extends li{constructor(t,e,i,n,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=void 0===n?Ns:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Hs){ur||(ur=Es(1,1,void 0,{willReadFrequently:!0})),ur.drawImage(this.image_,0,0);try{ur.getImageData(0,0,1,1),this.tainted_=!1}catch{ur=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(Ne)}handleImageError_(){this.imageState_=Gs,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Hs,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Es(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ns){this.image_||this.initializeImage_(),this.imageState_=Qs;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Ar(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Hs)return;const e=this.image_,i=Es(Math.ceil(e.width*t),Math.ceil(e.height*t)),n=i.canvas;var s;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle="string"==typeof(s=this.color_)?s:lr(s),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise((t=>{if(this.imageState_===Hs||this.imageState_===Gs)t();else{const e=()=>{this.imageState_!==Hs&&this.imageState_!==Gs||(this.removeEventListener(Ne,e),t())};this.addEventListener(Ne,e)}}))),this.ready_}}function gr(t,e,i,n,s,r){let o=void 0===e?void 0:hr.get(e,i,s);return o||(o=new dr(t,t&&"src"in t?t.src||void 0:e,i,n,s),hr.set(e,i,s,o,r)),r&&o&&!hr.getPattern(e,i,s)&&hr.set(e,i,s,o,r),o}function pr(t){return t?Array.isArray(t)?lr(t):"object"==typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return hr.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,i=hr.getPattern(e,void 0,t.color);if(i)return i;const n=hr.get(t.src,"anonymous",null);if(n.getImageState()!==Hs)return null;const s=Es(t.size[0],t.size[1]);return s.drawImage(n.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),gr(s.canvas,e,void 0,Hs,t.color,!0),hr.getPattern(e,void 0,t.color)}(t):t:null}class fr{drawCustom(t,e,i,n,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const mr="ol-hidden",_r="ol-unselectable",yr="ol-control",wr="ol-collapsed",vr=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z0-9]+?)\\s*$"].join(""),"i"),br=["style","variant","weight","size","lineHeight","family"],Cr={normal:400,bold:700},xr=function(t){const e=t.match(vr);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let t=0,n=br.length;t<n;++t){const n=e[t+1];void 0!==n&&(i[br[t]]="string"==typeof n?n.trim():n)}return isNaN(Number(i.weight))&&i.weight in Cr&&(i.weight=Cr[i.weight]),i.families=i.family.split(/,\s?/).map((t=>t.trim().replace(/^['"]|['"]$/g,""))),i},Br="10px sans-serif",Er="#000",Sr="round",Fr=[],Ir="round",Lr="#000",Mr="center",Tr="middle",Rr=[0,0,0,0],kr=new _i;let Ur,Dr=null;const Or={},Pr=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Nr(t,e,i){return`${t} ${e} 16px "${i}"`}const Qr=function(){const t=100;let e,i;async function n(t){await i.ready;const e=await i.load(t);if(0===e.length)return!1;const n=xr(t),s=n.families[0].toLowerCase(),r=n.weight;return e.some((t=>{const e=t.family.replace(/^['"]|['"]$/g,"").toLowerCase(),i=Cr[t.weight]||t.weight;return e===s&&t.style===n.style&&i==r}))}async function s(){await i.ready;let r=!0;const o=kr.getProperties(),a=Object.keys(o).filter((e=>o[e]<t));for(let e=a.length-1;e>=0;--e){const i=a[e];let s=o[i];s<t&&(await n(i)?(Lt(Or),kr.set(i,t)):(s+=10,kr.set(i,s,!0),s<t&&(r=!1)))}e=void 0,r||(e=setTimeout(s,100))}return async function(t){i||(i=Mi?self.fonts:document.fonts);const n=xr(t);if(!n)return;const r=n.families;let o=!1;for(const t of r){if(Pr.has(t))continue;const e=Nr(n.style,n.weight,t);void 0===kr.get(e)&&(kr.set(e,0,!0),o=!0)}o&&(clearTimeout(e),e=setTimeout(s,100))}}(),Hr=function(){let t;return function(e){let i=Or[e];if(null==i){if(Mi){const t=xr(e),n=Gr(e,"Žg");i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);Or[e]=i}return i}}();function Gr(t,e){return Dr||(Dr=Es(1,1)),t!=Ur&&(Dr.font=t,Ur=Dr.font),Dr.measureText(e)}function Vr(t,e){return Gr(t,e).width}function zr(t,e,i){if(e in i)return i[e];const n=e.split("\n").reduce(((e,i)=>Math.max(e,Vr(t,i))),0);return i[e]=n,n}function Kr(t,e,i,n,s,r,o,a,l,A,c){t.save(),1!==i&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=i:t.globalAlpha*=i),e&&t.transform.apply(t,e),n.contextInstructions?(t.translate(l,A),t.scale(c[0],c[1]),function(t,e){const i=t.contextInstructions;for(let t=0,n=i.length;t<n;t+=2)Array.isArray(i[t+1])?e[i[t]].apply(e,i[t+1]):e[i[t]]=i[t+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(l,A),t.scale(c[0],c[1]),t.drawImage(n,s,r,o,a,0,0,o,a)):t.drawImage(n,s,r,o,a,l,A,o*c[0],a*c[1]),t.restore()}const jr=0,Wr=1,$r=2,Yr=3,Xr=4,qr=5,Zr=6,Jr=7,to=8,eo=9,io=10,no=11,so=12,ro=[to],oo=[so],ao=[Wr],lo=[Yr];class Ao extends fr{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let o=0,a=t.length;o<a;o+=e)n[0]=t[o],n[1]=t[o+1],h(i,n)&&(s[r++]=n[0],s[r++]=n[1]);return r}appendFlatLineCoordinates(t,e,n,s,r,o){const a=this.coordinates;let l=a.length;const A=this.getBufferedMaxExtent();o&&(e+=s);let c=t[e],h=t[e+1];const u=this.tmpCoordinate_;let d,p,f,m=!0;for(d=e+s;d<n;d+=s)u[0]=t[d],u[1]=t[d+1],f=g(A,u),f!==p?(m&&(a[l++]=c,a[l++]=h,m=!1),a[l++]=u[0],a[l++]=u[1]):f===i?(a[l++]=u[0],a[l++]=u[1],m=!1):m=!0,c=u[0],h=u[1],p=f;return(r&&m||d===e+s)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(t,e,i,n,s){for(let r=0,o=i.length;r<o;++r){const o=i[r],a=this.appendFlatLineCoordinates(t,e,o,n,!1,!1);s.push(a),e=o}return e}drawCustom(t,e,i,n,s){this.beginGeometry(t,e,s);const r=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,A,c,h,u;switch(r){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),h=[];const e=t.getEndss();u=0;for(let t=0,i=e.length;t<i;++t){const i=[];u=this.drawCustomCoordinates_(l,u,e[t],o,i),h.push(i)}this.instructions.push([Xr,a,h,t,i,bn,s]),this.hitDetectionInstructions.push([Xr,a,h,t,n||i,bn,s]);break;case"Polygon":case"MultiLineString":c=[],l="Polygon"==r?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(l,0,t.getEnds(),o,c),this.instructions.push([Xr,a,c,t,i,vn,s]),this.hitDetectionInstructions.push([Xr,a,c,t,n||i,vn,s]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),A=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Xr,a,A,t,i,wn,s]),this.hitDetectionInstructions.push([Xr,a,A,t,n||i,wn,s]);break;case"MultiPoint":l=t.getFlatCoordinates(),A=this.appendFlatPointCoordinates(l,o),A>a&&(this.instructions.push([Xr,a,A,t,i,wn,s]),this.hitDetectionInstructions.push([Xr,a,A,t,n||i,wn,s]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),A=this.coordinates.length,this.instructions.push([Xr,a,A,t,i,void 0,s]),this.hitDetectionInstructions.push([Xr,a,A,t,n||i,void 0,s])}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[jr,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[jr,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,s,r=-1;for(e=0;e<i;++e)n=t[e],s=n[0],s==Jr?r=e:s==jr&&(n[2]=e,ti(this.hitDetectionInstructions,r,e),r=-1)}fillStyleToState(t,e={}){if(t){const i=t.getColor();e.fillPatternScale=i&&"object"==typeof i&&"src"in i?this.pixelRatio:1,e.fillStyle=pr(i||Er)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const i=t.getColor();e.strokeStyle=pr(i||Lr);const n=t.getLineCap();e.lineCap=void 0!==n?n:Sr;const s=t.getLineDash();e.lineDash=s?s.slice():Fr;const r=t.getLineDashOffset();e.lineDashOffset=r||0;const o=t.getLineJoin();e.lineJoin=void 0!==o?o:Ir;const a=t.getWidth();e.lineWidth=void 0!==a?a:1;const l=t.getMiterLimit();e.miterLimit=void 0!==l?l:10,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const i=this.state;this.fillStyleToState(t,i),this.strokeStyleToState(e,i)}createFill(t){const e=t.fillStyle,i=[io,e];return"string"!=typeof e&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[no,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,s=t.lineDash,r=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&&!ii(t.currentLineDash,s)||t.currentLineDashOffset!=r||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=r,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[Jr,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=A(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;l(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class co extends Ao{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const s=this.state,r=void 0!==s.fillStyle,o=void 0!==s.strokeStyle,a=i.length;this.instructions.push(ao),this.hitDetectionInstructions.push(ao);for(let s=0;s<a;++s){const r=i[s],a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,r,n,!0,!o),A=[eo,a,l];this.instructions.push(A),this.hitDetectionInstructions.push(A),o&&(this.instructions.push(lo),this.hitDetectionInstructions.push(lo)),e=r}return r&&(this.instructions.push(ro),this.hitDetectionInstructions.push(ro)),o&&(this.instructions.push(oo),this.hitDetectionInstructions.push(oo)),e}drawCircle(t,e,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(void 0===s&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([io,Er]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([no,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fr,0]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const A=[$r,l];this.instructions.push(ao,A),this.hitDetectionInstructions.push(ao,A),void 0!==n.fillStyle&&(this.instructions.push(ro),this.hitDetectionInstructions.push(ro)),void 0!==n.strokeStyle&&(this.instructions.push(oo),this.hitDetectionInstructions.push(oo)),this.endGeometry(e)}drawPolygon(t,e,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(void 0===s&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([io,Er]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([no,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fr,0]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(void 0===s&&void 0===r)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([io,Er]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([no,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fr,0]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let A=0;for(let t=0,e=o.length;t<e;++t)A=this.drawFlatCoordinatess_(a,A,o[t],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=Bn(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function ho(t,e,i,n,s){const r=[];let o=i,a=0,l=e.slice(i,2);for(;a<t&&o+s<n;){const[i,n]=l.slice(-2),A=e[o+s],c=e[o+s+1],h=Math.sqrt((A-i)*(A-i)+(c-n)*(c-n));if(a+=h,a>=t){const e=(t-a+h)/h,u=Y(i,A,e),d=Y(n,c,e);l.push(u,d),r.push(l),l=[u,d],a==t&&(o+=s),a=0}else if(a<t)l.push(e[o+s],e[o+s+1]),o+=s;else{const t=h-a,e=Y(i,A,t/h),u=Y(n,c,t/h);l.push(e,u),r.push(l),l=[e,u],a=0,o+=s}}return a>0&&r.push(l),r}function uo(t,e,i,n,s){let r,o,a,l,A,c,h,u,d,g,p=i,f=i,m=0,_=0,y=i;for(o=i;o<n;o+=s){const i=e[o],n=e[o+1];void 0!==A&&(d=i-A,g=n-c,l=Math.sqrt(d*d+g*g),void 0!==h&&(_+=a,r=Math.acos((h*d+u*g)/(a*l)),r>t&&(_>m&&(m=_,p=y,f=o),_=0,y=o-s)),a=l,h=d,u=g),A=i,c=n}return _+=l,_>m?[y,o]:[p,f]}const go={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const po={Circle:co,Default:Ao,Image:class extends Ao{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!h(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),s=t.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(n,s);this.instructions.push([Zr,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Zr,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),s=[];for(let e=0,i=n.length;e<i;e+=t.getStride())this.maxExtent&&!h(this.maxExtent,n.slice(e,e+2))||s.push(n[e],n[e+1]);const r=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Zr,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Zr,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}},LineString:class extends Ao{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),o=[eo,s,r];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,e,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(void 0===s||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([no,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fr,0],ao);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(oo),this.endGeometry(e)}drawMultiLineString(t,e,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(void 0===s||void 0===r)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([no,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Fr,0],ao);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let A=0;for(let t=0,e=o.length;t<e;++t)A=this.drawFlatCoordinates_(a,A,o[t],l);this.hitDetectionInstructions.push(oo),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(oo),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(oo),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(ao)}},Polygon:co,Text:class extends Ao{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Er]={fillStyle:Er},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!n&&!s)return;const o=this.coordinates;let a=o.length;const l=t.getType();let A=null,c=t.getStride();if("line"!==r.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let n=r.overflow?null:[];switch(l){case"Point":case"MultiPoint":A=t.getFlatCoordinates();break;case"LineString":A=t.getFlatMidpoint();break;case"Circle":A=t.getCenter();break;case"MultiLineString":A=t.getFlatMidpoints(),c=2;break;case"Polygon":A=t.getFlatInteriorPoint(),r.overflow||n.push(A[2]/this.resolution),c=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();A=[];for(let t=0,i=e.length;t<i;t+=3)r.overflow||n.push(e[t+2]/this.resolution),A.push(e[t],e[t+1]);if(0===A.length)return;c=2}const s=this.appendFlatPointCoordinates(A,c);if(s===a)return;if(n&&(s-a)/2!=A.length/c){let t=a/2;n=n.filter(((e,i)=>{const n=o[2*(t+i)]===A[i*c]&&o[2*(t+i)+1]===A[i*c+1];return n||--t,n}))}this.saveTextStates_();const h=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,u=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(t,e,i);let d=r.padding;if(d!=Rr&&(r.scale[0]<0||r.scale[1]<0)){let t=r.padding[0],e=r.padding[1],i=r.padding[2],n=r.padding[3];r.scale[0]<0&&(e=-e,n=-n),r.scale[1]<0&&(t=-t,i=-i),d=[t,e,i,n]}const g=this.pixelRatio;this.instructions.push([Zr,a,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,d==Rr?Rr:d.map((function(t){return t*g})),h,u,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]);const p=1/g,f=h?h.slice(0):null;f&&(f[1]=Er),this.hitDetectionInstructions.push([Zr,a,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,this.declutterMode_,this.declutterImageWithText_,d,f,u,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Er:this.fillKey_,this.textOffsetX_,this.textOffsetY_,n]),this.endGeometry(e)}else{if(!P(this.maxExtent,t.getExtent()))return;let n;if(A=t.getFlatCoordinates(),"LineString"==l)n=[A.length];else if("MultiLineString"==l)n=t.getEnds();else if("Polygon"==l)n=t.getEnds().slice(0,1);else if("MultiPolygon"==l){const e=t.getEndss();n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t][0])}this.beginGeometry(t,e,i);const s=r.repeat,h=s?void 0:r.textAlign;let u=0;for(let t=0,e=n.length;t<e;++t){let e;e=s?ho(s*this.resolution,A,u,n[t],c):[A.slice(u,n[t])];for(let i=0,s=e.length;i<s;++i){const s=e[i];let l=0,A=s.length;if(null==h){const t=uo(r.maxAngle,s,0,s.length,2);l=t[0],A=t[1]}for(let t=l;t<A;t+=c)o.push(s[t],s[t+1]);const d=o.length;u=n[t],this.drawChars_(a,d),a=d}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||Mr,justify:e.justify,textBaseline:e.textBaseline||Tr,scale:e.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,r=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=go[n.textBaseline],A=this.textOffsetY_*a,c=this.text_,h=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([qr,t,e,l,n.overflow,o,n.maxAngle,a,A,s,h*a,c,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([qr,t,e,l,n.overflow,o?Er:o,n.maxAngle,a,A,s,h*a,c,r,1/a,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let i,n,s;if(t){const e=t.getFill();e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=pr(e.getColor()||Er)):(n=null,this.textFillState_=n);const r=t.getStroke();if(r){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const t=r.getLineDash(),e=r.getLineDashOffset(),i=r.getWidth(),n=r.getMiterLimit();s.lineCap=r.getLineCap()||Sr,s.lineDash=t?t.slice():Fr,s.lineDashOffset=void 0===e?0:e,s.lineJoin=r.getLineJoin()||Ir,s.lineWidth=void 0===i?1:i,s.miterLimit=void 0===n?10:n,s.strokeStyle=pr(r.getColor()||Lr)}else s=null,this.textStrokeState_=s;i=this.textState_;const o=t.getFont()||Br;Qr(o);const a=t.getScaleArray();i.overflow=t.getOverflow(),i.font=o,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Tr,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Rr,i.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),A=t.getOffsetY(),c=t.getRotateWithView(),h=t.getKeepUpright(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===A?0:A,this.textRotateWithView_=void 0!==c&&c,this.textKeepUpright_=void 0===h||h,this.textRotation_=void 0===u?0:u,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:fi(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?"string"==typeof n.fillStyle?n.fillStyle:"|"+fi(n.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}};class fo{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const s=i[n].finish();t[e][n]=s}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let s=n[e];if(void 0===s){s=new(0,po[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s}return s}}function mo(t,e,i,n,s,r,o,a,l,A,c,h,u=!0){let d=t[e],g=t[e+1],p=0,f=0,m=0,_=0;function y(){p=d,f=g,d=t[e+=n],g=t[e+1],_+=m,m=Math.sqrt((d-p)*(d-p)+(g-f)*(g-f))}do{y()}while(e<i-n&&_+m<r);let w=0===m?0:(r-_)/m;const v=Y(p,d,w),b=Y(f,g,w),C=e-n,x=_,B=r+a*l(A,s,c);for(;e<i-n&&_+m<B;)y();w=0===m?0:(B-_)/m;const E=Y(p,d,w),S=Y(f,g,w);let F=!1;if(u)if(h){const t=[v,b,E,S];en(t,0,4,2,h,t,t),F=t[0]>t[2]}else F=v>E;const I=Math.PI,L=[],M=C+n===e;let T;if(m=0,_=x,d=t[e=C],g=t[e+1],M){y(),T=Math.atan2(g-f,d-p),F&&(T+=T>0?-I:I);const t=(E+v)/2,e=(S+b)/2;return L[0]=[t,e,(B-r)/2,T,s],L}for(let t=0,h=(s=s.replace(/\n/g," ")).length;t<h;){y();let u=Math.atan2(g-f,d-p);if(F&&(u+=u>0?-I:I),void 0!==T){let t=u-T;if(t+=t>I?-2*I:t<-I?2*I:0,Math.abs(t)>o)return null}T=u;const v=t;let b=0;for(;t<h;++t){const o=a*l(A,s[F?h-t-1:t],c);if(e+n<i&&_+m<r+b+o/2)break;b+=o}if(t===v)continue;const C=F?s.substring(h-v,h-t):s.substring(v,t);w=0===m?0:(r+b/2-_)/m;const x=Y(p,d,w),B=Y(f,g,w);L.push([x,B,b/2,u,C]),r+=b}return L}class _o{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Fs(),{get:(t,e)=>{if("function"==typeof Fs()[e])return this.push_(e),this.pushMethodArgs_},set:(t,e,i)=>(this.push_(e,i),!0)})}push_(...t){const e=this.instructions_,i=this.zIndex+this.offset_;e[i]||(e[i]=[]),e[i].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let i=0,n=e.length;i<n;++i){const n=e[i];if("function"==typeof n){n(t);continue}const s=e[++i];if("function"==typeof t[n])t[n](...s);else{if("function"==typeof s){t[n]=s(t);continue}t[n]=s}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const yo=[1/0,1/0,-1/0,-1/0],wo=[],vo=[],bo=[],Co=[];function xo(t){return t[3].declutterBox}const Bo=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Eo(t,e){return"start"===e?e=Bo.test(t)?"right":"left":"end"===e&&(e=Bo.test(t)?"left":"right"),go[e]}function So(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}function Fo(t,e,i){return i%2==0&&(t+=e),t}class Io{constructor(t,e,i,n,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new _o:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,n){const s=t+e+i+n;if(this.labels_[s])return this.labels_[s];const r=n?this.strokeStates[n]:null,o=i?this.fillStates[i]:null,a=this.textStates[e],l=this.pixelRatio,A=[a.scale[0]*l,a.scale[1]*l],c=a.justify?go[a.justify]:Eo(Array.isArray(t)?t[0]:t,a.textAlign||Mr),h=n&&r.lineWidth?r.lineWidth:0,u=Array.isArray(t)?t:String(t).split("\n").reduce(So,[]),{width:d,height:g,widths:p,heights:f,lineWidths:m}=function(t,e){const i=[],n=[],s=[];let r=0,o=0,a=0,l=0;for(let A=0,c=e.length;A<=c;A+=2){const h=e[A];if("\n"===h||A===c){r=Math.max(r,o),s.push(o),o=0,a+=l,l=0;continue}const u=e[A+1]||t.font,d=Vr(u,h);i.push(d),o+=d;const g=Hr(u);n.push(g),l=Math.max(l,g)}return{width:r,height:a,widths:i,heights:n,lineWidths:s}}(a,u),_=d+h,y=[],w=(_+2)*A[0],v=(g+h)*A[1],b={width:w<0?Math.floor(w):Math.ceil(w),height:v<0?Math.floor(v):Math.ceil(v),contextInstructions:y};1==A[0]&&1==A[1]||y.push("scale",A),n&&(y.push("strokeStyle",r.strokeStyle),y.push("lineWidth",h),y.push("lineCap",r.lineCap),y.push("lineJoin",r.lineJoin),y.push("miterLimit",r.miterLimit),y.push("setLineDash",[r.lineDash]),y.push("lineDashOffset",r.lineDashOffset)),i&&y.push("fillStyle",o.fillStyle),y.push("textBaseline","middle"),y.push("textAlign","center");const C=.5-c;let x=c*_+C*h;const B=[],E=[];let S,F=0,I=0,L=0,M=0;for(let t=0,e=u.length;t<e;t+=2){const e=u[t];if("\n"===e){I+=F,F=0,x=c*_+C*h,++M;continue}const s=u[t+1]||a.font;s!==S&&(n&&B.push("font",s),i&&E.push("font",s),S=s),F=Math.max(F,f[L]);const r=[e,x+C*p[L]+c*(p[L]-m[M]),.5*(h+F)+I];x+=p[L],n&&B.push("strokeText",r),i&&E.push("fillText",r),++L}return Array.prototype.push.apply(y,B),Array.prototype.push.apply(y,E),this.labels_[s]=b,b}replayTextBackground_(t,e,i,n,s,r,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),r&&(this.alignAndScaleFill_=r[2],t.fillStyle=r[1],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,s,r,o,a,l,A,c,h,u,d,g,p){let m=i-(o*=h[0]),_=n-(a*=h[1]);const y=s+l>t?t-l:s,w=r+A>e?e-A:r,v=d[3]+y*h[0]+d[1],b=d[0]+w*h[1]+d[2],C=m-d[3],x=_-d[0];let B;return(g||0!==c)&&(wo[0]=C,Co[0]=C,wo[1]=x,vo[1]=x,vo[0]=C+v,bo[0]=vo[0],bo[1]=x+b,Co[1]=bo[1]),0!==c?(B=Xi([1,0,0,1,0,0],i,n,1,1,c,-i,-n),Yi(B,wo),Yi(B,vo),Yi(B,bo),Yi(B,Co),f(Math.min(wo[0],vo[0],bo[0],Co[0]),Math.min(wo[1],vo[1],bo[1],Co[1]),Math.max(wo[0],vo[0],bo[0],Co[0]),Math.max(wo[1],vo[1],bo[1],Co[1]),yo)):f(Math.min(C,C+v),Math.min(x,x+b),Math.max(C,C+v),Math.max(x,x+b),yo),u&&(m=Math.round(m),_=Math.round(_)),{drawImageX:m,drawImageY:_,drawImageW:y,drawImageH:w,originX:l,originY:A,declutterBox:{minX:yo[0],minY:yo[1],maxX:yo[2],maxY:yo[3],value:p},canvasTransform:B,scale:h}}replayImageOrLabel_(t,e,i,n,s,r,o){const a=!(!r&&!o),l=n.declutterBox,A=o?o[2]*n.scale[0]/2:0;return l.minX-A<=e[0]&&l.maxX+A>=0&&l.minY-A<=e[1]&&l.maxY+A>=0&&(a&&this.replayTextBackground_(t,wo,vo,bo,Co,r,o),Kr(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=Yi(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(i[0]%n,i[1]%n),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,i,n){const s=this.textStates[e],r=this.createLabel(t,e,n,i),o=this.strokeStates[i],a=this.pixelRatio,l=Eo(Array.isArray(t)?t[0]:t,s.textAlign||Mr),A=go[s.textBaseline||Tr],c=o&&o.lineWidth?o.lineWidth:0;return{label:r,anchorX:l*(r.width/a-2*s.scale[0])+2*(.5-l)*c,anchorY:A*r.height/a+2*(.5-A)*c}}execute_(t,e,i,n,s,r,o,a){const l=this.zIndexContext_;let A;var c,h;this.pixelCoordinates_&&ii(i,this.renderedTransform_)?A=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),A=tn(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),c=this.renderedTransform_,h=i,c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5]);let u=0;const d=n.length;let g,p,f,m,_,y,w,v,b,C,x,B,E,S=0,F=0,I=0;const L=this.coordinateCache_,M=this.viewRotation_,T=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,R={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},k=this.instructions!=n||this.overlaps?0:200;let U,D,O,N;for(;u<d;){const i=n[u];switch(i[0]){case jr:U=i[1],N=i[3],U.getGeometry()?void 0===o||P(o,N.getExtent())?++u:u=i[2]+1:u=i[2],l&&(l.zIndex=i[4]);break;case Wr:F>k&&(this.fill_(t),F=0),I>k&&(t.stroke(),I=0),F||I||(t.beginPath(),_=NaN,y=NaN),++u;break;case $r:S=i[1];const n=A[S],c=A[S+1],h=A[S+2]-n,d=A[S+3]-c,Q=Math.sqrt(h*h+d*d);t.moveTo(n+Q,c),t.arc(n,c,Q,0,2*Math.PI,!0),++u;break;case Yr:t.closePath(),++u;break;case Xr:S=i[1],g=i[2];const H=i[3],G=i[4],V=i[5];R.geometry=H,R.feature=U,u in L||(L[u]=[]);const z=L[u];V?V(A,S,g,2,z):(z[0]=A[S],z[1]=A[S+1],z.length=2),l&&(l.zIndex=i[6]),G(z,R),++u;break;case Zr:S=i[1],g=i[2],b=i[3],p=i[4],f=i[5];let K=i[6];const j=i[7],W=i[8],$=i[9],Y=i[10];let X=i[11];const q=i[12];let Z=i[13];m=i[14]||"declutter";const J=i[15];if(!b&&i.length>=20){C=i[19],x=i[20],B=i[21],E=i[22];const t=this.drawLabelWithPointPlacement_(C,x,B,E);b=t.label,i[3]=b;const e=i[23];p=(t.anchorX-e)*this.pixelRatio,i[4]=p;const n=i[24];f=(t.anchorY-n)*this.pixelRatio,i[5]=f,K=b.height,i[6]=K,Z=b.width,i[13]=Z}let tt,et,it,nt;i.length>25&&(tt=i[25]),i.length>17?(et=i[16],it=i[17],nt=i[18]):(et=Rr,it=null,nt=null),Y&&T?X+=M:Y||T||(X-=M);let st=0;for(;S<g;S+=2){if(tt&&tt[st++]<Z/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(b.width,b.height,A[S],A[S+1],Z,K,p,f,W,$,X,q,s,et,!!it||!!nt,U),n=[t,e,b,i,j,it,nt];if(a){let t,e,s,r,o;if(J){const i=g-S;if(!J[i]){J[i]={args:n,declutterMode:m};continue}const r=J[i];t=r.args,e=r.declutterMode,delete J[i],s=xo(t)}if(!t||"declutter"===e&&a.collides(s)||(r=!0),"declutter"===m&&a.collides(i.declutterBox)||(o=!0),"declutter"===e&&"declutter"===m){const t=r&&o;r=t,o=t}r&&("none"!==e&&a.insert(s),this.replayImageOrLabel_.apply(this,t)),o&&("none"!==m&&a.insert(i.declutterBox),this.replayImageOrLabel_.apply(this,n))}else this.replayImageOrLabel_.apply(this,n)}++u;break;case qr:const rt=i[1],ot=i[2],at=i[3],lt=i[4];E=i[5];const At=i[6],ct=i[7],ht=i[8];B=i[9];const ut=i[10];C=i[11],Array.isArray(C)&&(C=C.reduce(Fo,"")),x=i[12];const dt=[i[13],i[13]];m=i[14]||"declutter";const gt=i[15],pt=this.textStates[x],ft=pt.font,mt=[pt.scale[0]*ct,pt.scale[1]*ct];let _t;ft in this.widths_?_t=this.widths_[ft]:(_t={},this.widths_[ft]=_t);const yt=_s(A,rt,ot,2),wt=Math.abs(mt[0])*zr(ft,C,_t);if(lt||wt<=yt){const i=mo(A,rt,ot,2,C,(yt-wt)*Eo(C,this.textStates[x].textAlign),At,Math.abs(mt[0]),zr,ft,_t,T?0:this.viewRotation_,gt);t:if(i){const n=[];let s,r,o,l,A;if(B)for(s=0,r=i.length;s<r;++s){A=i[s],o=A[4],l=this.createLabel(o,x,"",B),p=A[2]+(mt[0]<0?-ut:ut),f=at*l.height+2*(.5-at)*ut*mt[1]/mt[0]-ht;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,A[0],A[1],l.width,l.height,p,f,0,0,A[3],dt,!1,Rr,!1,U);if(a&&"declutter"===m&&a.collides(r.declutterBox))break t;n.push([t,e,l,r,1,null,null])}if(E)for(s=0,r=i.length;s<r;++s){A=i[s],o=A[4],l=this.createLabel(o,x,E,""),p=A[2],f=at*l.height-ht;const r=this.calculateImageOrLabelDimensions_(l.width,l.height,A[0],A[1],l.width,l.height,p,f,0,0,A[3],dt,!1,Rr,!1,U);if(a&&"declutter"===m&&a.collides(r.declutterBox))break t;n.push([t,e,l,r,1,null,null])}a&&"none"!==m&&a.load(n.map(xo));for(let t=0,e=n.length;t<e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++u;break;case Jr:if(void 0!==r){U=i[1];const t=r(U,N,m);if(t)return t}++u;break;case to:k?F++:this.fill_(t),++u;break;case eo:for(S=i[1],g=i[2],D=A[S],O=A[S+1],t.moveTo(D,O),_=D+.5|0,y=O+.5|0,S+=2;S<g;S+=2)D=A[S],O=A[S+1],w=D+.5|0,v=O+.5|0,S!=g-2&&w===_&&v===y||(t.lineTo(D,O),_=w,y=v);++u;break;case io:this.alignAndScaleFill_=i[2],F&&(this.fill_(t),F=0,I&&(t.stroke(),I=0)),t.fillStyle=i[1],++u;break;case no:I&&(t.stroke(),I=0),this.setStrokeStyle_(t,i),++u;break;case so:k?I++:t.stroke(),++u;break;default:++u}}F&&this.fill_(t),I&&t.stroke()}execute(t,e,i,n,s,r){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,r)}executeHitDetection(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,n,s)}}const Lo=["Polygon","Circle","LineString","Image","Text","Default"],Mo=["Image","Text"],To=Lo.filter((t=>!Mo.includes(t)));class Ro{constructor(t,e,i,n,s,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let n=this.executorsByZIndex_[i];void 0===n&&(n={},this.executorsByZIndex_[i]=n);const s=t[i];for(const t in s){const i=s[t];n[t]=new Io(this.resolution_,this.pixelRatio_,this.overlaps_,i,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,s,r){const o=2*(n=Math.round(n))+1,a=Xi(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),A=!this.hitDetectionContext_;A&&(this.hitDetectionContext_=Es(o,o));const c=this.hitDetectionContext_;let h;c.canvas.width!==o||c.canvas.height!==o?(c.canvas.width=o,c.canvas.height=o):A||c.clearRect(0,0,o,o),void 0!==this.renderBuffer_&&(h=[1/0,1/0,-1/0,-1/0],b(h,t),l(h,e*(this.renderBuffer_+n),h));const u=function(t){if(void 0!==ko[t])return ko[t];const e=2*t+1,i=t*t,n=new Array(i+1);for(let s=0;s<=t;++s)for(let r=0;r<=t;++r){const o=s*s+r*r;if(o>i)break;let a=n[o];a||(a=[],n[o]=a),a.push(4*((t+s)*e+(t+r))+3),s>0&&a.push(4*((t-s)*e+(t+r))+3),r>0&&(a.push(4*((t+s)*e+(t-r))+3),s>0&&a.push(4*((t-s)*e+(t-r))+3))}const s=[];for(let t=0,e=n.length;t<e;++t)n[t]&&s.push(...n[t]);return ko[t]=s,s}(n);let d;function g(t,e,i){const a=c.getImageData(0,0,o,o).data;for(let l=0,A=u.length;l<A;l++)if(a[u[l]]>0){if(!r||"none"===i||"Image"!==d&&"Text"!==d||r.includes(t)){const i=(u[l]-3)/4,r=n-i%o,a=n-(i/o|0),A=s(t,e,r*r+a*a);if(A)return A}c.clearRect(0,0,o,o);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);let f,m,_,y,w;for(p.sort(qe),f=p.length-1;f>=0;--f){const t=p[f].toString();for(_=this.executorsByZIndex_[t],m=Lo.length-1;m>=0;--m)if(d=Lo[m],y=_[d],void 0!==y&&(w=y.executeHitDetection(c,a,i,g,h),w))return w}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],s=e[2],r=e[3],o=[i,n,i,r,s,r,s,n];return tn(o,0,8,2,t,o),o}isEmpty(){return Mt(this.executorsByZIndex_)}execute(t,e,i,n,s,r,o){const a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(o?Ze:qe),r=r||Lo;const l=Lo.length;for(let A=0,c=a.length;A<c;++A){const c=a[A].toString(),h=this.executorsByZIndex_[c];for(let c=0,u=r.length;c<u;++c){const u=r[c],d=h[u];if(void 0!==d){const r=null===o?void 0:d.getZIndexContext(),c=r?r.getContext():t,h=this.maxExtent_&&"Image"!==u&&"Text"!==u;if(h&&(c.save(),this.clip(c,i)),r&&"Text"!==u&&"Image"!==u?r.pushFunction((t=>d.execute(t,e,i,n,s,o))):d.execute(c,e,i,n,s,o),h&&c.restore(),r){r.offset();const t=a[A]*l+Lo.indexOf(u);this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(r)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(qe);for(let i=0,n=e.length;i<n;++i)t[e[i]].forEach((t=>{t.draw(this.renderedContext_),t.clear()})),t[e[i]].length=0}}const ko={};function Uo(t){return t[0]>0&&t[1]>0}function Do(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}class Oo{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Do(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Oo({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return gi()}getImage(t){return gi()}getHitDetectionImage(){return gi()}getPixelRatio(t){return 1}getImageState(){return gi()}getImageSize(){return gi()}getOrigin(){return gi()}getSize(){return gi()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Do(t)}listenImageChange(t){gi()}load(){gi()}unlistenImageChange(t){gi()}ready(){return Promise.resolve()}}class Po extends Oo{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Qs:Hs,this.imageState_===Qs&&this.ready().then((()=>this.imageState_=Hs)),this.render()}clone(){const t=this.getScale(),e=new Po({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const e=this.fill_?.getKey(),i=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let n=hr.get(i,null,null)?.getImage(1);if(!n){const e=this.renderOptions_,s=Math.ceil(e.size*t),r=Es(s,s);this.draw_(e,r,t),n=r.canvas,hr.set(i,null,null,new dr(n,void 0,null,Hs,null))}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let n=this.radius,s=void 0===this.radius2_?n:this.radius2_;if(n<s){const t=n;n=s,s=t}const r=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/r,a=s*Math.sin(o),l=n-Math.sqrt(s*s-a*a),A=Math.sqrt(a*a+l*l),c=A/a;if("miter"===t&&c<=i)return c*e;const h=e/2/c,u=e/2*(l/A),d=Math.sqrt((n+h)*(n+h)+u*u)-n;if(void 0===this.radius2_||"bevel"===t)return 2*d;const g=n*Math.sin(o),p=s-Math.sqrt(n*n-g*g),f=Math.sqrt(g*g+p*p)/g;if(f<=i){const t=f*e/2-s-n;return 2*Math.max(d,t)}return 2*d}createRenderOptions(){let t,e=Sr,i=Ir,n=0,s=null,r=0,o=0;this.stroke_&&(t=pr(this.stroke_.getColor()??Lr),o=this.stroke_.getWidth()??1,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,i=this.stroke_.getLineJoin()??Ir,e=this.stroke_.getLineCap()??Sr,n=this.stroke_.getMiterLimit()??10);const a=this.calculateLineJoinSize_(i,o,n),l=Math.max(this.radius,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*l+a),lineCap:e,lineDash:s,lineDashOffset:r,lineJoin:i,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=Er),e.fillStyle=pr(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),n=0;"string"==typeof i&&(i=ar(i)),null===i?n=1:Array.isArray(i)&&(n=4===i.length?i[3]:1),0===n&&(e=Es(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const i=this.radius;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/e;for(let o=0;o<e;o++){const e=s+o*r,a=o%2==0?i:n;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=Er,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class No extends Po{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new No({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class Qo{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor();return new Qo({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"==typeof t&&"src"in t){const e=gr(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===Ns&&e.load(),e.getImageState()===Qs&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?fi(t):"object"==typeof t&&"src"in t?t.src+":"+t.offset:ar(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Ho(t,e,i,n){return void 0!==i&&void 0!==n?[i/t,n/e]:void 0!==i?i/t:void 0!==n?n/e:1}class Go extends Oo{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,n=void 0!==t.scale?t.scale:1,s=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:n,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const r=void 0!==t.img?t.img:null;let o,a=t.src;if($i(!(void 0!==a&&r),"`image` and `src` cannot be provided at the same time"),void 0!==a&&0!==a.length||!r||(a=r.src||fi(r)),$i(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),$i(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?o=Ns:void 0!==r&&(o="complete"in r?r.complete?r.src?Hs:Ns:Qs:Hs),this.color_=void 0!==t.color?ar(t.color):null,this.iconImage_=gr(r,a,this.crossOrigin_,o,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,this.initialOptions_,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{const n=this.getImage(1);if(n.width&&n.height)e=n.width,i=n.height;else if(n instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(Ho(i[0],i[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(Ho(e,i,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Go({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==Hs?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==Hs?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(Ne,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(Ne,t)}ready(){return this.iconImage_.ready()}}class Vo{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Vo({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class zo{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=$o,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new zo({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=$o,this.geometry_=t}setZIndex(t){this.zIndex_=t}}let Ko=null;function jo(t,e){if(!Ko){const t=new Qo({color:"rgba(255,255,255,0.4)"}),e=new Vo({color:"#3399CC",width:1.25});Ko=[new zo({image:new No({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Ko}function Wo(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new zo({fill:new Qo({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new zo({stroke:new Vo({color:e,width:5})}),new zo({stroke:new Vo({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new zo({image:new No({radius:6,fill:new Qo({color:i}),stroke:new Vo({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function $o(t){return t.getGeometry()}class Yo{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=Do(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new Qo({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Yo({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Do(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}class Xo extends fr{constructor(t,e,i,n,s,r,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.transformRotation_=n?X(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(t,e,i,n){if(!this.image_)return;const s=tn(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let t=0,e=s.length;t<e;t+=2){const e=s[t]-this.imageAnchorX_,i=s[t+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,n=i+this.imageAnchorY_;Xi(o,t,n,1,1,l,-t,-n),r.save(),r.transform.apply(r,o),r.translate(t,n),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=a)}drawText_(t,e,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=tn(t,e,i,n,this.transform_,this.pixelCoordinates_),r=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=n){const t=s[e]+this.textOffsetX_,i=s[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(r.save(),r.translate(t-this.textOffsetX_,i-this.textOffsetY_),r.rotate(o),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,t,i),this.textFillState_&&r.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,n,s){const r=this.context_,o=tn(t,e,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(o[0],o[1]);let a=o.length;s&&(a-=2);for(let t=2;t<a;t+=2)r.lineTo(o[t],o[t+1]);return s&&r.closePath(),i}drawRings_(t,e,i,n){for(let s=0,r=i.length;s<r;++s)e=this.moveToLineTo_(t,e,i[s],n,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),P(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=function(t,e,i){const n=t.getFlatCoordinates();if(!n)return null;const s=t.getStride();return tn(n,0,n.length,s,e,i)}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],s=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),P(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(P(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let n=0;const s=t.getEnds(),r=t.getStride();e.beginPath();for(let t=0,e=s.length;t<e;++t)n=this.moveToLineTo_(i,n,s[t],r,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),P(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),P(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const s=t.getEndss(),r=t.getStride();e.beginPath();for(let t=0,e=s.length;t<e;++t){const e=s[t];n=this.drawRings_(i,n,e,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),ii(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:Mr;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:pr(e||Er)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),r=e.getLineJoin(),o=e.getWidth(),a=e.getMiterLimit(),l=n||Fr;this.strokeState_={lineCap:void 0!==i?i:Sr,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(s||0)*this.pixelRatio_,lineJoin:void 0!==r?r:Ir,lineWidth:(void 0!==o?o:1)*this.pixelRatio_,miterLimit:void 0!==a?a:10,strokeStyle:pr(t||Lr)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:pr(t||Er)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),s=i.getLineDashOffset(),r=i.getLineJoin(),o=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:Sr,lineDash:n||Fr,lineDashOffset:s||0,lineJoin:void 0!==r?r:Ir,lineWidth:void 0!==o?o:1,miterLimit:void 0!==a?a:10,strokeStyle:pr(t||Lr)}}else this.textStrokeState_=null;const n=t.getFont(),s=t.getOffsetX(),r=t.getOffsetY(),o=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),A=t.getText(),c=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:void 0!==n?n:Br,textAlign:void 0!==c?c:Mr,textBaseline:void 0!==h?h:Tr},this.text_=void 0!==A?Array.isArray(A)?A.reduce(((t,e,i)=>t+(i%2?" ":e)),""):A:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}}const qo=.5;const Zo={Point:function(t,e,i,n,s,r){const o=i.getImage(),a=i.getText(),l=a&&a.getText(),A=r&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Hs)return;const r=t.getBuilder(i.getZIndex(),"Image");r.setImageStyle(o,A),r.drawPoint(e,n,s)}if(l){const r=t.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a,A),r.drawText(e,n,s)}},LineString:function(t,e,i,n,s){const r=i.getStroke();if(r){const o=t.getBuilder(i.getZIndex(),"LineString");o.setFillStrokeStyle(null,r),o.drawLineString(e,n,s)}const o=i.getText();if(o&&o.getText()){const r=t.getBuilder(i.getZIndex(),"Text");r.setTextStyle(o),r.drawText(e,n,s)}},Polygon:function(t,e,i,n,s){const r=i.getFill(),o=i.getStroke();if(r||o){const a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,o),a.drawPolygon(e,n,s)}const a=i.getText();if(a&&a.getText()){const r=t.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,n,s)}},MultiPoint:function(t,e,i,n,s,r){const o=i.getImage(),a=o&&0!==o.getOpacity(),l=i.getText(),A=l&&l.getText(),c=r&&a&&A?{}:void 0;if(a){if(o.getImageState()!=Hs)return;const r=t.getBuilder(i.getZIndex(),"Image");r.setImageStyle(o,c),r.drawMultiPoint(e,n,s)}if(A){const r=t.getBuilder(i.getZIndex(),"Text");r.setTextStyle(l,c),r.drawText(e,n,s)}},MultiLineString:function(t,e,i,n,s){const r=i.getStroke();if(r){const o=t.getBuilder(i.getZIndex(),"LineString");o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n,s)}const o=i.getText();if(o&&o.getText()){const r=t.getBuilder(i.getZIndex(),"Text");r.setTextStyle(o),r.drawText(e,n,s)}},MultiPolygon:function(t,e,i,n,s){const r=i.getFill(),o=i.getStroke();if(o||r){const a=t.getBuilder(i.getZIndex(),"Polygon");a.setFillStrokeStyle(r,o),a.drawMultiPolygon(e,n,s)}const a=i.getText();if(a&&a.getText()){const r=t.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,n,s)}},GeometryCollection:function(t,e,i,n,s,r){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){(0,Zo[o[a].getType()])(t,o[a],i,n,s,r)}},Circle:function(t,e,i,n,s){const r=i.getFill(),o=i.getStroke();if(r||o){const a=t.getBuilder(i.getZIndex(),"Circle");a.setFillStrokeStyle(r,o),a.drawCircle(e,n,s)}const a=i.getText();if(a&&a.getText()){const s=t.getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}}};function Jo(t,e){return parseInt(fi(t),10)-parseInt(fi(e),10)}function ta(t,e){const i=ea(t,e);return i*i}function ea(t,e){return.5*t/e}function ia(t,e,i,n,s,r,o,a){const l=[],A=i.getImage();if(A){let t=!0;const e=A.getImageState();e==Hs||e==Gs?t=!1:e==Ns&&A.load(),t&&l.push(A.ready())}const c=i.getFill();c&&c.loading()&&l.push(c.ready());const h=l.length>0;return h&&Promise.all(l).then((()=>s(null))),function(t,e,i,n,s,r,o){const a=i.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,s),A=i.getRenderer();if(A)na(t,l,i,e,o);else{(0,Zo[l.getType()])(t,l,i,e,o,r)}}(t,e,i,n,r,o,a),h}function na(t,e,i,n,s){if("GeometryCollection"==e.getType()){const r=e.getGeometries();for(let e=0,o=r.length;e<o;++e)na(t,r[e],i,n,s);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer(),s)}class sa extends ai{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}class ra extends ui{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return gi()}getData(t){return null}prepareFrame(t){return gi()}renderFrame(t,e){return gi()}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==Hs&&e.getState()!==Gs||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Hs&&e!=Gs&&t.addEventListener(Ne,this.boundHandleImageChange_),e==Ns&&(t.load(),e=t.getState()),e==Hs}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const oa=[];let aa=null;class la extends ra{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,i){let n;aa||(aa=Es(1,1,void 0,{willReadFrequently:!0})),aa.clearRect(0,0,1,1);try{aa.drawImage(t,e,i,1,1,0,0,1,1),n=aa.getImageData(0,0,1,1).data}catch{return aa=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,r;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&ii(ar(t.style.backgroundColor),ar(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(r=e.getContext("2d"))}if(r&&function(t,e){const i=Ji(t),n=Ji(e);for(let t=0;t<6;++t)if(0!==Math.round((i[t]-n[t])*Zi[t]))return!1;return!0}(r.canvas.style.transform,e)?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let t=s.style;t.position="absolute",t.width="100%",t.height="100%",r=Es();const e=r.canvas;s.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=s,this.context=r}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=U(i),s=D(i),r=F(i),o=S(i);Yi(e.coordinateToPixelTransform,n),Yi(e.coordinateToPixelTransform,s),Yi(e.coordinateToPixelTransform,r),Yi(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;Yi(a,n),Yi(a,s),Yi(a,r),Yi(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}prepareContainer(t,e){const i=t.extent,n=t.viewState.resolution,s=t.viewState.rotation,r=t.pixelRatio,o=Math.round(O(i)/n*r),a=Math.round(R(i)/n*r);Xi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/r,1/r,s,-o/2,-a/2),qi(this.inversePixelTransform,this.pixelTransform);const l="matrix("+this.pixelTransform.join(", ")+")";if(this.useContainer(e,l,this.getBackground(t)),!this.containerReused){const t=this.context.canvas;t.width!=o||t.height!=a?(t.width=o,t.height=a):this.context.clearRect(0,0,o,a),l!==t.style.transform&&(t.style.transform=l)}}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new sa(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(ks,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Us,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new _o),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(ks,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Us,this.context,t))}getRenderTransform(t,e,i,n,s,r,o){const a=s/2,l=r/2,A=n/e,c=-A,h=-t[0]+o,u=-t[1];return Xi(this.tempTransform,a,l,A,c,-i,h,u)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Aa extends la{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,s=e.viewState,r=s.center,o=s.resolution,a=s.projection,l=s.rotation,A=a.getExtent(),c=this.getLayer().getSource(),h=this.getLayer().getDeclutter(),u=e.pixelRatio,d=e.viewHints,g=!(d[xs]||d[Bs]),p=this.context,f=Math.round(O(n)/o*u),m=Math.round(R(n)/o*u),_=c.getWrapX()&&a.canWrapX(),y=_?O(A):null,w=_?Math.ceil((n[2]-A[2])/y)+1:1;let v=_?Math.floor((n[0]-A[0])/y):0;do{let n=this.getRenderTransform(r,o,0,u,f,m,v*y);e.declutter&&(n=n.slice(0)),t.execute(p,[p.canvas.width,p.canvas.height],n,l,g,void 0===i?Lo:i?Mo:To,i?h&&e.declutter[h]:void 0)}while(++v<w)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=Es(this.context.canvas.width,this.context.canvas.height,oa))}resetDrawContext_(){if(1!==this.opacity_&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Is(this.context),oa.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const n=t.viewState;this.prepareContainer(t,e);const s=this.context,r=this.replayGroup_;let o=r&&!r.isEmpty();if(!o){if(!(this.getLayer().hasListener(ks)||this.getLayer().hasListener(Us)))return this.container}if(this.setDrawContext_(),this.preRender(s,t),n.projection,this.clipped_=!1,o&&i.extent&&this.clipping){const e=ke(i.extent);o=P(e,t.extent),this.clipped_=o&&!u(e,t.extent),this.clipped_&&this.clipUnrotated(s,t,e)}return o&&this.renderWorlds(r,t,!this.getLayer().getDeclutter()&&void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise((e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=this.frameState.size.slice(),e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,s=this.renderedProjection_,r=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],l=t[0]*qo,A=t[1]*qo;a.push(this.getRenderTransform(e,i,n,qo,l,A,0).slice());const c=o.getSource(),h=s.getExtent();if(c.getWrapX()&&s.canWrapX()&&!u(h,r)){let t=r[0];const s=O(h);let o,c=0;for(;t<h[0];)--c,o=s*c,a.push(this.getRenderTransform(e,i,n,qo,l,A,o).slice()),t+=s;for(c=0,t=r[2];t>h[2];)++c,o=s*c,a.push(this.getRenderTransform(e,i,n,qo,l,A,o).slice()),t-=s}this.hitDetectionImageData_=function(t,e,i,n,s,r,o,a){const l=s,A=Es(t[0]*qo,t[1]*qo);A.imageSmoothingEnabled=!1;const c=A.canvas,h=new Xo(A,qo,s,null,o,a,null),u=i.length,d=Math.floor(16777215/u),g={};for(let t=1;t<=u;++t){const e=i[t-1],s=e.getStyleFunction()||n;if(!s)continue;let o=s(e,r);if(!o)continue;Array.isArray(o)||(o=[o]);const a=(t*d).toString(16).padStart(7,"#00000");for(let t=0,i=o.length;t<i;++t){const i=o[t],n=i.getGeometryFunction()(e);if(!n||!P(l,n.getExtent()))continue;const s=i.clone(),r=s.getFill();r&&r.setColor(a);const A=s.getStroke();A&&(A.setColor(a),A.setLineDash(null)),s.setText(void 0);const c=i.getImage();if(c){const t=c.getImageSize();if(!t)continue;const e=Es(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=a,e.fillRect(0,0,i.width,i.height),s.setImage(new Go({img:i,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const h=s.getZIndex()||0;let u=g[h];u||(u={},g[h]=u,u.Polygon=[],u.Circle=[],u.LineString=[],u.Point=[]);const d=n.getType();if("GeometryCollection"===d){const t=n.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];u[i.getType().replace("Multi","")].push(i,s)}}else u[d.replace("Multi","")].push(n,s)}}const p=Object.keys(g).map(Number).sort(qe);for(let t=0,i=p.length;t<i;++t){const i=g[p[t]];for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t+=2){h.setStyle(n[t+1]);for(let i=0,s=e.length;i<s;++i)h.setTransform(e[i]),h.drawGeometry(n[t])}}}return A.getImageData(0,0,c.width,c.height)}(t,a,this.renderedFeatures_,o.getStyleFunction(),r,i,n,ta(i,this.renderedPixelRatio_))}e(function(t,e,i){const n=[];if(i){const s=Math.floor(Math.round(t[0])*qo),r=Math.floor(Math.round(t[1])*qo),o=4*(V(s,0,i.width-1)+V(r,0,i.height-1)*i.width),a=i.data[o],l=i.data[o+1],A=i.data[o+2]+256*(l+256*a),c=Math.floor(16777215/e.length);A&&A%c==0&&n.push(e[A/c-1])}return n}(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,i,n,s){if(!this.replayGroup_)return;const r=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),l={},A=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,r,o,i,(function(t,e,i){const r=fi(t),o=l[r];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return l[r]=!0,s.splice(s.lastIndexOf(o),1),n(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return l[r]=!0,n(t,a,e);s.push(l[r]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}}),A?e.declutter?.[A]?.all().map((t=>t.value)):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[xs],s=t.viewHints[Bs],r=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!r&&n||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,A=t.viewState,c=A.projection,h=A.resolution,d=t.pixelRatio,g=e.getRevision(),p=e.getRenderBuffer();let f=e.getRenderOrder();void 0===f&&(f=Jo);const m=A.center.slice(),_=l(a,p*h),y=_.slice(),w=[_.slice()],v=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!u(v,t.extent)){const t=O(v),e=Math.max(O(_)/2,t);_[0]=v[0]-e,_[2]=v[2]+e,ht(m,c);const i=H(w[0],c);i[0]<v[0]&&i[2]<v[2]?w.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>v[0]&&i[2]>v[2]&&w.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==g&&this.renderedRenderOrder_==f&&this.renderedFrameDeclutter_===!!t.declutter&&u(this.wrappedRenderedExtent_,_))return ii(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const b=new fo(ea(h,d),_,h,d);for(let t=0,e=w.length;t<e;++t)i.loadFeatures(w[t],h,c);const C=ta(h,d);let x=!0;const B=(t,i)=>{let n;const s=t.getStyleFunction()||e.getStyleFunction();if(s&&(n=s(t,h)),n){const e=this.renderFeature(t,C,n,b,undefined,this.getLayer().getDeclutter(),i);x=x&&!e}},E=Re(_),S=i.getFeaturesInExtent(E);f&&S.sort(f);for(let t=0,e=S.length;t<e;++t)B(S[t],t);this.renderedFeatures_=S,this.ready=x;const F=b.finish(),I=new Ro(_,h,d,i.getOverlaps(),F,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=h,this.renderedRevision_=g,this.renderedRenderOrder_=f,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=_,this.renderedCenter_=m,this.renderedProjection_=c,this.renderedPixelRatio_=d,this.replayGroup_=I,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,A=i.length;l<A;++l)a=ia(n,t,i[l],e,this.boundHandleStyleImageChange_,s,r,o)||a;else a=ia(n,t,i,e,this.boundHandleStyleImageChange_,s,r,o);return a}}function ca(t,e,i=0,n=t.length-1,s=ua){for(;n>i;){if(n-i>600){const r=n-i+1,o=e-i+1,a=Math.log(r),l=.5*Math.exp(2*a/3),A=.5*Math.sqrt(a*l*(r-l)/r)*(o-r/2<0?-1:1);ca(t,e,Math.max(i,Math.floor(e-o*l/r+A)),Math.min(n,Math.floor(e+(r-o)*l/r+A)),s)}const r=t[e];let o=i,a=n;for(ha(t,i,e),s(t[n],r)>0&&ha(t,i,n);o<a;){for(ha(t,o,a),o++,a--;s(t[o],r)<0;)o++;for(;s(t[a],r)>0;)a--}0===s(t[i],r)?ha(t,i,a):(a++,ha(t,a,n)),a<=e&&(i=a+1),e<=a&&(n=a-1)}}function ha(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function ua(t,e){return t<e?-1:t>e?1:0}let da=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!xa(t,e))return i;const n=this.toBBox,s=[];for(;e;){for(let r=0;r<e.children.length;r++){const o=e.children[r],a=e.leaf?n(o):o;xa(t,a)&&(e.leaf?i.push(o):Ca(t,a)?this._all(o,i):s.push(o))}e=s.pop()}return i}collides(t){let e=this.data;if(!xa(t,e))return!1;const i=[];for(;e;){for(let n=0;n<e.children.length;n++){const s=e.children[n],r=e.leaf?this.toBBox(s):s;if(xa(t,r)){if(e.leaf||Ca(t,r))return!0;i.push(s)}}e=i.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Ba([]),this}remove(t,e){if(!t)return this;let i=this.data;const n=this.toBBox(t),s=[],r=[];let o,a,l;for(;i||s.length;){if(i||(i=s.pop(),a=s[s.length-1],o=r.pop(),l=!0),i.leaf){const n=ga(t,i.children,e);if(-1!==n)return i.children.splice(n,1),s.push(i),this._condense(s),this}l||i.leaf||!Ca(i,n)?a?(o++,i=a.children[o],l=!1):i=null:(s.push(i),r.push(o),o=0,a=i,i=i.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,n){const s=i-e+1;let r,o=this._maxEntries;if(s<=o)return r=Ba(t.slice(e,i+1)),pa(r,this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),r=Ba([]),r.leaf=!1,r.height=n;const a=Math.ceil(s/o),l=a*Math.ceil(Math.sqrt(o));Ea(t,e,i,l,this.compareMinX);for(let s=e;s<=i;s+=l){const e=Math.min(s+l-1,i);Ea(t,s,e,a,this.compareMinY);for(let i=s;i<=e;i+=a){const s=Math.min(i+a-1,e);r.children.push(this._build(t,i,s,n-1))}}return pa(r,this.toBBox),r}_chooseSubtree(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){let i,n=1/0,o=1/0;for(let a=0;a<e.children.length;a++){const l=e.children[a],A=wa(l),c=(s=t,r=l,(Math.max(r.maxX,s.maxX)-Math.min(r.minX,s.minX))*(Math.max(r.maxY,s.maxY)-Math.min(r.minY,s.minY))-A);c<o?(o=c,n=A<n?A:n,i=l):c===o&&A<n&&(n=A,i=l)}e=i||e.children[0]}var s,r;return e}_insert(t,e,i){const n=i?t:this.toBBox(t),s=[],r=this._chooseSubtree(n,this.data,e,s);for(r.children.push(t),ma(r,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)}_split(t,e){const i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const r=this._chooseSplitIndex(i,s,n),o=Ba(i.children.splice(r,i.children.length-r));o.height=i.height,o.leaf=i.leaf,pa(i,this.toBBox),pa(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)}_splitRoot(t,e){this.data=Ba([t,e]),this.data.height=t.height+1,this.data.leaf=!1,pa(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let n,s=1/0,r=1/0;for(let o=e;o<=i-e;o++){const e=fa(t,0,o,this.toBBox),a=fa(t,o,i,this.toBBox),l=ba(e,a),A=wa(e)+wa(a);l<s?(s=l,n=o,r=A<r?A:r):l===s&&A<r&&(r=A,n=o)}return n||i-e}_chooseSplitAxis(t,e,i){const n=t.leaf?this.compareMinX:_a,s=t.leaf?this.compareMinY:ya;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,s)&&t.children.sort(n)}_allDistMargin(t,e,i,n){t.children.sort(n);const s=this.toBBox,r=fa(t,0,e,s),o=fa(t,i-e,i,s);let a=va(r)+va(o);for(let n=e;n<i-e;n++){const e=t.children[n];ma(r,t.leaf?s(e):e),a+=va(r)}for(let n=i-e-1;n>=e;n--){const e=t.children[n];ma(o,t.leaf?s(e):e),a+=va(o)}return a}_adjustParentBBoxes(t,e,i){for(let n=i;n>=0;n--)ma(e[n],t)}_condense(t){for(let e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children,e.splice(e.indexOf(t[i]),1)):this.clear():pa(t[i],this.toBBox)}};function ga(t,e,i){if(!i)return e.indexOf(t);for(let n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function pa(t,e){fa(t,0,t.children.length,e,t)}function fa(t,e,i,n,s){s||(s=Ba(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<i;r++){const e=t.children[r];ma(s,t.leaf?n(e):e)}return s}function ma(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function _a(t,e){return t.minX-e.minX}function ya(t,e){return t.minY-e.minY}function wa(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function va(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ba(t,e){const i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,s-i)*Math.max(0,r-n)}function Ca(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function xa(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ba(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ea(t,e,i,n,s){const r=[e,i];for(;r.length;){if((i=r.pop())-(e=r.pop())<=n)continue;const o=e+Math.ceil((i-e)/n/2)*n;ca(t,o,e,i,s),r.push(e,o,o,i)}}let Sa=0;const Fa=1<<Sa++,Ia=1<<Sa++,La=1<<Sa++,Ma=1<<Sa++,Ta=1<<Sa++,Ra=1<<Sa++,ka=Math.pow(2,6)-1,Ua={[Fa]:"boolean",[Ia]:"number",[La]:"string",[Ma]:"color",[Ta]:"number[]",[Ra]:"size"},Da=Object.keys(Ua).map(Number).sort(qe);function Oa(t){const e=[];for(const i of Da)Pa(t,i)&&e.push(Ua[i]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Pa(t,e){return(t&e)===e}function Na(t,e){return t===e}class Qa{constructor(t,e){if(!function(t){return t in Ua}(t))throw new Error(`literal expressions must have a specific type, got ${Oa(t)}`);this.type=t,this.value=e}}class Ha{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function Ga(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Va(t,e,i){switch(typeof t){case"boolean":if(Na(e,La))return new Qa(La,t?"true":"false");if(!Pa(e,Fa))throw new Error(`got a boolean, but expected ${Oa(e)}`);return new Qa(Fa,t);case"number":if(Na(e,Ra))return new Qa(Ra,Do(t));if(Na(e,Fa))return new Qa(Fa,!!t);if(Na(e,La))return new Qa(La,t.toString());if(!Pa(e,Ia))throw new Error(`got a number, but expected ${Oa(e)}`);return new Qa(Ia,t);case"string":if(Na(e,Ma))return new Qa(Ma,or(t));if(Na(e,Fa))return new Qa(Fa,!!t);if(!Pa(e,La))throw new Error(`got a string, but expected ${Oa(e)}`);return new Qa(La,t)}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(0===t.length)throw new Error("empty expression");if("string"==typeof t[0])return function(t,e,i){const n=t[0],s=Pl[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(t,e,i)}(t,e,i);for(const e of t)if("number"!=typeof e)throw new Error("expected an array of numbers");if(Na(e,Ra)){if(2!==t.length)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Qa(Ra,t)}if(Na(e,Ma)){if(3===t.length)return new Qa(Ma,[...t,1]);if(4===t.length)return new Qa(Ma,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!Pa(e,Ta))throw new Error(`got an array of numbers, but expected ${Oa(e)}`);return new Qa(Ta,t)}const za="get",Ka="var",ja="concat",Wa="geometry-type",$a="line-metric",Ya="any",Xa="all",qa="!",Za="resolution",Ja="zoom",tl="time",el="==",il="!=",nl=">",sl=">=",rl="<",al="<=",ll="*",Al="/",cl="+",hl="-",ul="clamp",dl="%",gl="^",pl="abs",fl="floor",ml="ceil",_l="round",yl="sin",wl="cos",vl="atan",bl="sqrt",Cl="match",xl="between",Bl="interpolate",El="coalesce",Sl="case",Fl="in",Il="number",Ll="string",Ml="array",Tl="color",Rl="id",kl="band",Ul="palette",Dl="to-string",Ol="has",Pl={[za]:jl(Gl(1,1/0),Nl),[Ka]:jl(Gl(1,1),(function(t,e,i){const n=t[1];if("string"!=typeof n)throw new Error("expected a string argument for var operation");return i.variables.add(n),[new Qa(La,n)]})),[Ol]:jl(Gl(1,1/0),Nl),[Rl]:jl((function(t,e,i){i.featureId=!0}),Hl),[ja]:jl(Gl(2,1/0),zl(La)),[Wa]:jl((function(t,e,i){i.geometryType=!0}),Hl),[$a]:jl(Hl),[Za]:jl(Ql,Hl),[Ja]:jl(Ql,Hl),[tl]:jl(Ql,Hl),[Ya]:jl(Gl(2,1/0),zl(Fa)),[Xa]:jl(Gl(2,1/0),zl(Fa)),[qa]:jl(Gl(1,1),zl(Fa)),[el]:jl(Gl(2,2),zl(ka)),[il]:jl(Gl(2,2),zl(ka)),[nl]:jl(Gl(2,2),zl(Ia)),[sl]:jl(Gl(2,2),zl(Ia)),[rl]:jl(Gl(2,2),zl(Ia)),[al]:jl(Gl(2,2),zl(Ia)),[ll]:jl(Gl(2,1/0),Vl),[El]:jl(Gl(2,1/0),Vl),[Al]:jl(Gl(2,2),zl(Ia)),[cl]:jl(Gl(2,1/0),zl(Ia)),[hl]:jl(Gl(2,2),zl(Ia)),[ul]:jl(Gl(3,3),zl(Ia)),[dl]:jl(Gl(2,2),zl(Ia)),[gl]:jl(Gl(2,2),zl(Ia)),[pl]:jl(Gl(1,1),zl(Ia)),[fl]:jl(Gl(1,1),zl(Ia)),[ml]:jl(Gl(1,1),zl(Ia)),[_l]:jl(Gl(1,1),zl(Ia)),[yl]:jl(Gl(1,1),zl(Ia)),[wl]:jl(Gl(1,1),zl(Ia)),[vl]:jl(Gl(1,2),zl(Ia)),[bl]:jl(Gl(1,1),zl(Ia)),[Cl]:jl(Gl(4,1/0),Kl,(function(t,e,i){const n=t.length-1,s=La|Ia|Fa,r=Va(t[1],s,i),o=Va(t[t.length-1],e,i),a=new Array(n-2);for(let e=0;e<n-2;e+=2){try{const n=Va(t[e+2],r.type,i);a[e]=n}catch(t){throw new Error(`failed to parse argument ${e+1} of match expression: ${t.message}`)}try{const n=Va(t[e+3],o.type,i);a[e+1]=n}catch(t){throw new Error(`failed to parse argument ${e+2} of match expression: ${t.message}`)}}return[r,...a,o]})),[xl]:jl(Gl(3,3),zl(Ia)),[Bl]:jl(Gl(6,1/0),Kl,(function(t,e,i){const n=t[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const t=n[1];if("number"!=typeof t||t<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(t)} instead`);s=t;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const r=new Qa(Ia,s);let o;try{o=Va(t[2],Ia,i)}catch(t){throw new Error(`failed to parse argument 1 in interpolate expression: ${t.message}`)}const a=new Array(t.length-3);for(let n=0;n<a.length;n+=2){try{const e=Va(t[n+3],Ia,i);a[n]=e}catch(t){throw new Error(`failed to parse argument ${n+2} for interpolate expression: ${t.message}`)}try{const s=Va(t[n+4],e,i);a[n+1]=s}catch(t){throw new Error(`failed to parse argument ${n+3} for interpolate expression: ${t.message}`)}}return[r,o,...a]})),[Sl]:jl(Gl(3,1/0),(function(t,e,i){const n=t[0],s=t.length-1;if(s%2==0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}),(function(t,e,i){const n=Va(t[t.length-1],e,i),s=new Array(t.length-1);for(let e=0;e<s.length-1;e+=2){try{const n=Va(t[e+1],Fa,i);s[e]=n}catch(t){throw new Error(`failed to parse argument ${e} of case expression: ${t.message}`)}try{const r=Va(t[e+2],n.type,i);s[e+1]=r}catch(t){throw new Error(`failed to parse argument ${e+1} of case expression: ${t.message}`)}}return s[s.length-1]=n,s})),[Fl]:jl(Gl(2,2),(function(t,e,i){let n,s=t[2];if(!Array.isArray(s))throw new Error('the second argument for the "in" operator must be an array');if("string"==typeof s[0]){if("literal"!==s[0])throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(s[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');s=s[1],n=La}else n=Ia;const r=new Array(s.length);for(let t=0;t<r.length;t++)try{const e=Va(s[t],n,i);r[t]=e}catch(e){throw new Error(`failed to parse haystack item ${t} for "in" expression: ${e.message}`)}return[Va(t[1],n,i),...r]})),[Il]:jl(Gl(1,1/0),zl(ka)),[Ll]:jl(Gl(1,1/0),zl(ka)),[Ml]:jl(Gl(1,1/0),zl(Ia)),[Tl]:jl(Gl(1,4),zl(Ia)),[kl]:jl(Gl(1,3),zl(Ia)),[Ul]:jl(Gl(2,2),(function(t,e,i){let n;try{n=Va(t[1],Ia,i)}catch(t){throw new Error(`failed to parse first argument in palette expression: ${t.message}`)}const s=t[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const r=new Array(s.length);for(let t=0;t<r.length;t++){let e;try{e=Va(s[t],Ma,i)}catch(e){throw new Error(`failed to parse color at index ${t} in palette expression: ${e.message}`)}if(!(e instanceof Qa))throw new Error(`the palette color at index ${t} must be a literal value`);r[t]=e}return[n,...r]})),[Dl]:jl(Gl(1,1),zl(Fa|Ia|La|Ma))};function Nl(t,e,i){const n=t.length-1,s=new Array(n);for(let e=0;e<n;++e){const n=t[e+1];switch(typeof n){case"number":s[e]=new Qa(Ia,n);break;case"string":s[e]=new Qa(La,n);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${n}`)}0===e&&i.properties.add(String(n))}return s}function Ql(t,e,i){i.mapState=!0}function Hl(t,e,i){const n=t[0];if(1!==t.length)throw new Error(`expected no arguments for ${n} operation`);return[]}function Gl(t,e){return function(i,n,s){const r=i[0],o=i.length-1;if(t===e){if(o!==t){throw new Error(`expected ${t} argument${1===t?"":"s"} for ${r}, got ${o}`)}}else if(o<t||o>e){throw new Error(`expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${r}, got ${o}`)}}}function Vl(t,e,i){const n=t.length-1,s=new Array(n);for(let r=0;r<n;++r){const n=Va(t[r+1],e,i);s[r]=n}return s}function zl(t){return function(e,i,n){const s=e.length-1,r=new Array(s);for(let i=0;i<s;++i){const s=Va(e[i+1],t,n);r[i]=s}return r}}function Kl(t,e,i){const n=t[0],s=t.length-1;if(s%2==1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function jl(...t){return function(e,i,n){const s=e[0];let r;for(let s=0;s<t.length;s++){const o=t[s](e,i,n);if(s==t.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");r=o}}return new Ha(i,s,...r)}}function Wl(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Wl(t.getGeometries()[0]);default:return""}}function $l(t,e,i){return Yl(Va(t,e,i))}function Yl(t,e){if(t instanceof Qa){if(t.type===Ma&&"string"==typeof t.value){const e=or(t.value);return function(){return e}}return function(){return t.value}}const i=t.operator;switch(i){case Il:case Ll:case El:return function(t){const e=t.operator,i=t.args.length,n=new Array(i);for(let e=0;e<i;++e)n[e]=Yl(t.args[e]);switch(e){case El:return t=>{for(let e=0;e<i;++e){const i=n[e](t);if(null!=i)return i}throw new Error("Expected one of the values to be non-null")};case Il:case Ll:return t=>{for(let s=0;s<i;++s){const i=n[s](t);if(typeof i===e)return i}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}(t);case za:case Ka:case Ol:return function(t){const e=t.args[0],i=e.value;switch(t.operator){case za:return e=>{const n=t.args;let s=e.properties[i];for(let t=1,e=n.length;t<e;++t){s=s[n[t].value]}return s};case Ka:return t=>t.variables[i];case Ol:return e=>{const n=t.args;if(!(i in e.properties))return!1;let s=e.properties[i];for(let t=1,e=n.length;t<e;++t){const e=n[t].value;if(!s||!Object.hasOwn(s,e))return!1;s=s[e]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t);case Rl:return t=>t.featureId;case Wa:return t=>t.geometryType;case ja:{const e=t.args.map((t=>Yl(t)));return t=>"".concat(...e.map((e=>e(t).toString())))}case Za:return t=>t.resolution;case Ya:case Xa:case xl:case Fl:case qa:return function(t){const e=t.operator,i=t.args.length,n=new Array(i);for(let e=0;e<i;++e)n[e]=Yl(t.args[e]);switch(e){case Ya:return t=>{for(let e=0;e<i;++e)if(n[e](t))return!0;return!1};case Xa:return t=>{for(let e=0;e<i;++e)if(!n[e](t))return!1;return!0};case xl:return t=>{const e=n[0](t),i=n[1](t),s=n[2](t);return e>=i&&e<=s};case Fl:return t=>{const e=n[0](t);for(let s=1;s<i;++s)if(e===n[s](t))return!0;return!1};case qa:return t=>!n[0](t);default:throw new Error(`Unsupported logical operator ${e}`)}}(t);case el:case il:case rl:case al:case nl:case sl:return function(t){const e=t.operator,i=Yl(t.args[0]),n=Yl(t.args[1]);switch(e){case el:return t=>i(t)===n(t);case il:return t=>i(t)!==n(t);case rl:return t=>i(t)<n(t);case al:return t=>i(t)<=n(t);case nl:return t=>i(t)>n(t);case sl:return t=>i(t)>=n(t);default:throw new Error(`Unsupported comparison operator ${e}`)}}(t);case ll:case Al:case cl:case hl:case ul:case dl:case gl:case pl:case fl:case ml:case _l:case yl:case wl:case vl:case bl:return function(t){const e=t.operator,i=t.args.length,n=new Array(i);for(let e=0;e<i;++e)n[e]=Yl(t.args[e]);switch(e){case ll:return t=>{let e=1;for(let s=0;s<i;++s)e*=n[s](t);return e};case Al:return t=>n[0](t)/n[1](t);case cl:return t=>{let e=0;for(let s=0;s<i;++s)e+=n[s](t);return e};case hl:return t=>n[0](t)-n[1](t);case ul:return t=>{const e=n[0](t),i=n[1](t);if(e<i)return i;const s=n[2](t);return e>s?s:e};case dl:return t=>n[0](t)%n[1](t);case gl:return t=>Math.pow(n[0](t),n[1](t));case pl:return t=>Math.abs(n[0](t));case fl:return t=>Math.floor(n[0](t));case ml:return t=>Math.ceil(n[0](t));case _l:return t=>Math.round(n[0](t));case yl:return t=>Math.sin(n[0](t));case wl:return t=>Math.cos(n[0](t));case vl:return 2===i?t=>Math.atan2(n[0](t),n[1](t)):t=>Math.atan(n[0](t));case bl:return t=>Math.sqrt(n[0](t));default:throw new Error(`Unsupported numeric operator ${e}`)}}(t);case Sl:return function(t){const e=t.args.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Yl(t.args[n]);return t=>{for(let n=0;n<e-1;n+=2){if(i[n](t))return i[n+1](t)}return i[e-1](t)}}(t);case Cl:return function(t){const e=t.args.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Yl(t.args[n]);return t=>{const n=i[0](t);for(let s=1;s<e-1;s+=2)if(n===i[s](t))return i[s+1](t);return i[e-1](t)}}(t);case Bl:return function(t){const e=t.args.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Yl(t.args[n]);return t=>{const n=i[0](t),s=i[1](t);let r,o;for(let a=2;a<e;a+=2){const e=i[a](t);let l=i[a+1](t);const A=Array.isArray(l);if(A&&(l=tr(l)),e>=s)return 2===a?l:A?ql(n,s,r,o,e,l):Xl(n,s,r,o,e,l);r=e,o=l}return o}}(t);case Dl:return function(t){const e=t.operator,i=t.args.length,n=new Array(i);for(let e=0;e<i;++e)n[e]=Yl(t.args[e]);if(e===Dl)return e=>{const i=n[0](e);return t.args[0].type===Ma?lr(i):i.toString()};throw new Error(`Unsupported convert operator ${e}`)}(t);default:throw new Error(`Unsupported operator ${i}`)}}function Xl(t,e,i,n,s,r){const o=s-i;if(0===o)return n;const a=e-i;return n+(1===t?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1))*(r-n)}function ql(t,e,i,n,s,r){if(0===s-i)return n;const o=rr(n),a=rr(r);let l=a[2]-o[2];l>180?l-=360:l<-180&&(l+=360);return function(t){const e=(t[0]+16)/116,i=t[1],n=t[2]*Math.PI/180,s=ir(e),r=ir(e+i/500*Math.cos(n)),o=ir(e-i/200*Math.sin(n)),a=er(3.021973625*r-1.617392459*s-.404875592*o),l=er(-.943766287*r+1.916279586*s+.027607165*o),A=er(.069407491*r-.22898585*s+1.159737864*o);return[V(a+.5|0,0,255),V(l+.5|0,0,255),V(A+.5|0,0,255),t[3]]}([Xl(t,e,i,o[0],s,a[0]),Xl(t,e,i,o[1],s,a[1]),o[2]+Xl(t,e,i,0,s,l),Xl(t,e,i,n[3],s,r[3])])}function Zl(t){return!0}function Jl(t){const e=Ga(),i=function(t,e){const i=t.length,n=new Array(i);for(let s=0;s<i;++s){const i=t[s],r="filter"in i?$l(i.filter,Fa,e):Zl;let o;if(Array.isArray(i.style)){const t=i.style.length;o=new Array(t);for(let n=0;n<t;++n)o[n]=eA(i.style[n],e)}else o=[eA(i.style,e)];n[s]={filter:r,styles:o}}return function(e){const s=[];let r=!1;for(let o=0;o<i;++o){if((0,n[o].filter)(e)&&(!t[o].else||!r)){r=!0;for(const t of n[o].styles){const i=t(e);i&&s.push(i)}}}return s}}(t,e),n={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(t,s){if(n.properties=t.getPropertiesInternal(),n.resolution=s,e.featureId){const e=t.getId();n.featureId=void 0!==e?e:null}return e.geometryType&&(n.geometryType=Wl(t.getGeometry())),i(n)}}function tA(t){const e=Ga(),i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=eA(t[s],e);const s={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},r=new Array(i);return function(t,o){if(s.properties=t.getPropertiesInternal(),s.resolution=o,e.featureId){const e=t.getId();s.featureId=void 0!==e?e:null}let a=0;for(let t=0;t<i;++t){const e=n[t](s);e&&(r[a]=e,a+=1)}return r.length=a,r}}function eA(t,e){const i=iA(t,"",e),n=nA(t,"",e),s=function(t,e){const i="text-",n=rA(t,i+"value",e);if(!n)return null;const s=iA(t,i,e),r=iA(t,i+"background-",e),o=nA(t,i,e),a=nA(t,i+"background-",e),l=rA(t,i+"font",e),A=sA(t,i+"max-angle",e),c=sA(t,i+"offset-x",e),h=sA(t,i+"offset-y",e),u=oA(t,i+"overflow",e),d=rA(t,i+"placement",e),g=sA(t,i+"repeat",e),p=hA(t,i+"scale",e),f=oA(t,i+"rotate-with-view",e),m=sA(t,i+"rotation",e),_=rA(t,i+"align",e),y=rA(t,i+"justify",e),w=rA(t,i+"baseline",e),v=oA(t,i+"keep-upright",e),b=lA(t,i+"padding",e),C=pA(t,i+"declutter-mode"),x=new Yo({declutterMode:C});return function(t){if(x.setText(n(t)),s&&x.setFill(s(t)),r&&x.setBackgroundFill(r(t)),o&&x.setStroke(o(t)),a&&x.setBackgroundStroke(a(t)),l&&x.setFont(l(t)),A&&x.setMaxAngle(A(t)),c&&x.setOffsetX(c(t)),h&&x.setOffsetY(h(t)),u&&x.setOverflow(u(t)),d){const e=d(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");x.setPlacement(e)}if(g&&x.setRepeat(g(t)),p&&x.setScale(p(t)),f&&x.setRotateWithView(f(t)),m&&x.setRotation(m(t)),_){const e=_(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(e)}if(y){const e=y(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");x.setJustify(e)}if(w){const e=w(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(e)}return b&&x.setPadding(b(t)),v&&x.setKeepUpright(v(t)),x}}(t,e),r=function(t,e){if("icon-src"in t)return function(t,e){const i="icon-",n=i+"src",s=mA(t[n],n),r=AA(t,i+"anchor",e),o=hA(t,i+"scale",e),a=sA(t,i+"opacity",e),l=AA(t,i+"displacement",e),A=sA(t,i+"rotation",e),c=oA(t,i+"rotate-with-view",e),h=dA(t,i+"anchor-origin"),u=gA(t,i+"anchor-x-units"),d=gA(t,i+"anchor-y-units"),g=function(t,e){const i=t[e];if(void 0===i)return;return yA(i,e)}(t,i+"color"),p=function(t,e){const i=t[e];if(void 0===i)return;if("string"!=typeof i)throw new Error(`Expected a string for ${e}`);return i}(t,i+"cross-origin"),f=function(t,e){const i=t[e];if(void 0===i)return;return fA(i,e)}(t,i+"offset"),m=dA(t,i+"offset-origin"),_=uA(t,i+"width"),y=uA(t,i+"height"),w=function(t,e){const i=t[e];if(void 0===i)return;if("number"==typeof i)return Do(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${e}`);if(2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])throw new Error(`Expected a number or size array for ${e}`);return i}(t,i+"size"),v=pA(t,i+"declutter-mode"),b=new Go({src:s,anchorOrigin:h,anchorXUnits:u,anchorYUnits:d,color:g,crossOrigin:p,offset:f,offsetOrigin:m,height:y,width:_,size:w,declutterMode:v});return function(t){return a&&b.setOpacity(a(t)),l&&b.setDisplacement(l(t)),A&&b.setRotation(A(t)),c&&b.setRotateWithView(c(t)),o&&b.setScale(o(t)),r&&b.setAnchor(r(t)),b}}(t,e);if("shape-points"in t)return function(t,e){const i="shape-",n=i+"points",s=i+"radius",r=_A(t[n],n),o=_A(t[s],s),a=iA(t,i,e),l=nA(t,i,e),A=hA(t,i+"scale",e),c=AA(t,i+"displacement",e),h=sA(t,i+"rotation",e),u=oA(t,i+"rotate-with-view",e),d=uA(t,i+"radius2"),g=uA(t,i+"angle"),p=pA(t,i+"declutter-mode"),f=new Po({points:r,radius:o,radius2:d,angle:g,declutterMode:p});return function(t){return a&&f.setFill(a(t)),l&&f.setStroke(l(t)),c&&f.setDisplacement(c(t)),h&&f.setRotation(h(t)),u&&f.setRotateWithView(u(t)),A&&f.setScale(A(t)),f}}(t,e);if("circle-radius"in t)return function(t,e){const i="circle-",n=iA(t,i,e),s=nA(t,i,e),r=sA(t,i+"radius",e),o=hA(t,i+"scale",e),a=AA(t,i+"displacement",e),l=sA(t,i+"rotation",e),A=oA(t,i+"rotate-with-view",e),c=pA(t,i+"declutter-mode"),h=new No({radius:5,declutterMode:c});return function(t){return r&&h.setRadius(r(t)),n&&h.setFill(n(t)),s&&h.setStroke(s(t)),a&&h.setDisplacement(a(t)),l&&h.setRotation(l(t)),A&&h.setRotateWithView(A(t)),o&&h.setScale(o(t)),h}}(t,e);return null}(t,e),o=sA(t,"z-index",e);if(!(i||n||s||r||Mt(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new zo;return function(t){let e=!0;if(i){const n=i(t);n&&(e=!1),a.setFill(n)}if(n){const i=n(t);i&&(e=!1),a.setStroke(i)}if(s){const i=s(t);i&&(e=!1),a.setText(i)}if(r){const i=r(t);i&&(e=!1),a.setImage(i)}return o&&a.setZIndex(o(t)),e?null:a}}function iA(t,e,i){let n;if(e+"fill-pattern-src"in t)n=function(t,e,i){const n=rA(t,e+"pattern-src",i),s=cA(t,e+"pattern-offset",i),r=cA(t,e+"pattern-size",i),o=aA(t,e+"color",i);return function(t){return{src:n(t),offset:s&&s(t),size:r&&r(t),color:o&&o(t)}}}(t,e+"fill-",i);else{if("none"===t[e+"fill-color"])return t=>null;n=aA(t,e+"fill-color",i)}if(!n)return null;const s=new Qo;return function(t){const e=n(t);return e===Vs?null:(s.setColor(e),s)}}function nA(t,e,i){const n=sA(t,e+"stroke-width",i),s=aA(t,e+"stroke-color",i);if(!n&&!s)return null;const r=rA(t,e+"stroke-line-cap",i),o=rA(t,e+"stroke-line-join",i),a=lA(t,e+"stroke-line-dash",i),l=sA(t,e+"stroke-line-dash-offset",i),A=sA(t,e+"stroke-miter-limit",i),c=new Vo;return function(t){if(s){const e=s(t);if(e===Vs)return null;c.setColor(e)}if(n&&c.setWidth(n(t)),r){const e=r(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");c.setLineCap(e)}if(o){const e=o(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(e)}return a&&c.setLineDash(a(t)),l&&c.setLineDashOffset(l(t)),A&&c.setMiterLimit(A(t)),c}}function sA(t,e,i){if(!(e in t))return;const n=$l(t[e],Ia,i);return function(t){return _A(n(t),e)}}function rA(t,e,i){if(!(e in t))return null;const n=$l(t[e],La,i);return function(t){return mA(n(t),e)}}function oA(t,e,i){if(!(e in t))return null;const n=$l(t[e],Fa,i);return function(t){const i=n(t);if("boolean"!=typeof i)throw new Error(`Expected a boolean for ${e}`);return i}}function aA(t,e,i){if(!(e in t))return null;const n=$l(t[e],Ma,i);return function(t){return yA(n(t),e)}}function lA(t,e,i){if(!(e in t))return null;const n=$l(t[e],Ta,i);return function(t){return fA(n(t),e)}}function AA(t,e,i){if(!(e in t))return null;const n=$l(t[e],Ta,i);return function(t){const i=fA(n(t),e);if(2!==i.length)throw new Error(`Expected two numbers for ${e}`);return i}}function cA(t,e,i){if(!(e in t))return null;const n=$l(t[e],Ta,i);return function(t){return wA(n(t),e)}}function hA(t,e,i){if(!(e in t))return null;const n=$l(t[e],Ta|Ia,i);return function(t){return function(t,e){if("number"==typeof t)return t;return wA(t,e)}(n(t),e)}}function uA(t,e){const i=t[e];if(void 0!==i){if("number"!=typeof i)throw new Error(`Expected a number for ${e}`);return i}}function dA(t,e){const i=t[e];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function gA(t,e){const i=t[e];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw new Error(`Expected pixels or fraction for ${e}`);return i}}function pA(t,e){const i=t[e];if(void 0!==i){if("string"!=typeof i)throw new Error(`Expected a string for ${e}`);if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function fA(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const i=t.length;for(let n=0;n<i;++n)if("number"!=typeof t[n])throw new Error(`Expected an array of numbers for ${e}`);return t}function mA(t,e){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);return t}function _A(t,e){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`);return t}function yA(t,e){if("string"==typeof t)return t;const i=fA(t,e),n=i.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return i}function wA(t,e){const i=fA(t,e);if(2!==i.length)throw new Error(`Expected an array of two numbers for ${e}`);return i}var vA={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function bA(t,e,i){return function(n,s,r,o,a){if(!n)return;if(!s&&!e)return n;const l=e?0:r[0]*s,A=e?0:r[1]*s,c=a?a[0]:0,h=a?a[1]:0;let u=t[0]+l/2+c,d=t[2]-l/2+c,g=t[1]+A/2+h,p=t[3]-A/2+h;u>d&&(u=(d+u)/2,d=u),g>p&&(g=(p+g)/2,p=g);let f=V(n[0],u,d),m=V(n[1],g,p);if(o&&i&&s){const t=30*s;f+=-t*Math.log(1+Math.max(0,u-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-d)/t),m+=-t*Math.log(1+Math.max(0,g-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-p)/t)}return[f,m]}}function CA(t){return t}function xA(t,e,i,n){const s=O(e)/i[0],r=R(e)/i[1];return n?Math.min(t,Math.max(s,r)):Math.min(t,Math.min(s,r))}function BA(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),V(n,i/2,2*e)}function EA(t,e,i,n,s){return i=void 0===i||i,function(r,o,a,l){if(void 0!==r){const o=n?xA(t,n,a,s):t;return i&&l?BA(r,o,e):V(r,e,o)}}}const SA=256;class FA extends _i{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ve(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&pe(),t.center&&(t.center=Te(t.center,this.projection_)),t.extent&&(t.extent=ke(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in vA)delete e[t];this.setProperties(e,!0);const i=function(t){let e,i,n;const s=28,r=2;let o=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:s;const l=void 0!==t.zoomFactor?t.zoomFactor:r,A=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,u=ve(t.projection,"EPSG:3857"),d=u.getExtent();let g=t.constrainOnlyCenter,p=t.extent;A||p||!u.isGlobal()||(g=!1,p=d);if(void 0!==t.resolutions){const s=t.resolutions;i=s[o],n=void 0!==s[a]?s[a]:s[s.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(s,r,o,a){if(void 0!==s){const l=t[0],A=t[t.length-1],c=i?xA(l,i,o,n):l;if(a)return e?BA(s,c,A):V(s,A,c);const h=Math.min(c,s),u=Math.floor(Je(t,h,r));return t[u]>c&&u<t.length-1?t[u+1]:t[u]}}}(s,c,!g&&p,h):EA(i,n,c,!g&&p,h)}else{const A=(d?Math.max(O(d),R(d)):360*dt.degrees/u.getMetersPerUnit())/SA/Math.pow(r,0),f=A/Math.pow(r,s-0);i=t.maxResolution,void 0!==i?o=0:i=A/Math.pow(l,o),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,a):A/Math.pow(l,a):f),a=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,a-o),e=t.constrainResolution?function(t,e,i,n,s,r){return n=void 0===n||n,i=void 0!==i?i:0,function(o,a,l,A){if(void 0!==o){const c=s?xA(e,s,l,r):e;if(A)return n?BA(o,c,i):V(o,i,c);const h=1e-9,u=Math.ceil(Math.log(e/c)/Math.log(t)-h),d=-a*(.5-h)+.5,g=Math.min(c,o),p=Math.floor(Math.log(e/g)/Math.log(t)+d),f=Math.max(u,p);return V(e/Math.pow(t,f),i,c)}}}(l,i,n,c,!g&&p,h):EA(i,n,c,!g&&p,h)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return bA(t.extent,t.constrainOnlyCenter,e)}const e=ve(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,bA(t,!1,!1)}return CA}(t),s=i.constraint,r=function(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?function(){const t=W(5);return function(e,i){return i||void 0===e?e:Math.abs(e)<=t?0:e}}():!1===e?as:"number"==typeof e?function(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(e):as}return os}(t);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),r=s/2*(n[3]-e[3]+e[1]-n[1]),o=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+r,i[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let i=arguments[t];i.center&&(i=Object.assign({},i),i.center=Te(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Te(i.anchor,this.getProjection())),e[t]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&IA(e,!0));let s=Date.now(),r=this.targetCenter_.slice(),o=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n<i;++n){const t=arguments[n],i={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||vi,callback:e};if(t.center&&(i.sourceCenter=r,i.targetCenter=t.center.slice(),r=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=o,i.targetResolution=this.getResolutionForZoom(t.zoom),o=i.targetResolution):t.resolution&&(i.sourceResolution=o,i.targetResolution=t.resolution,o=i.targetResolution),void 0!==t.rotation){i.sourceRotation=a;const e=$(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+e,a=i.targetRotation}LA(i)?i.complete=!0:s+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(xs,1),this.updateAnimations_()}getAnimating(){return this.hints_[xs]>0}getInteracting(){return this.hints_[Bs]>0}cancelAnimations(){let t;this.setHint(xs,-this.hints_[xs]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&IA(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let i=0,r=n.length;i<r;++i){const r=n[i];if(r.complete)continue;const o=t-r.start;let a=r.duration>0?o/r.duration:1;a>=1?(r.complete=!0,a=1):s=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],i=r.targetCenter[0],n=r.targetCenter[1];this.nextCenter_=r.targetCenter;const s=t+l*(i-t),o=e+l*(n-e);this.targetCenter_=[s,o]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?$(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(s){this.animations_[i]=null,this.setHint(xs,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&IA(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();var s,r;return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],at(i,t-this.getRotation()),r=e,(s=i)[0]+=+r[0],s[1]+=+r[1]),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();if(void 0!==n&&void 0!==s){i=[e[0]-t*(e[0]-n[0])/s,e[1]-t*(e[1]-n[1])/s]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Me(t,this.getProjection()):t}getCenterInternal(){return this.get(vA.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return Re(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();$i(e,"The view center is not defined");const i=this.getResolution();$i(void 0!==i,"The view resolution is not defined");const n=this.getRotation();return $i(void 0!==n,"The view rotation is not defined"),M(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(vA.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ke(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=O(t)/e[0],n=R(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(vA.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=MA(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=Je(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];const e=V(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,V(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if($i(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){$i(!N(t),"Cannot fit empty extent provided as `geometry`");i=Wn(ke(t,this.getProjection()))}else if("Circle"===t.getType()){const e=ke(t.getExtent(),this.getProjection());i=Wn(e),i.rotate(this.getRotation(),I(e))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),r=t.getStride();let o=1/0,a=1/0,l=-1/0,A=-1/0;for(let t=0,e=s.length;t<e;t+=r){const e=s[t]*i-s[t+1]*n,r=s[t]*n+s[t+1]*i;o=Math.min(o,e),a=Math.min(a,r),l=Math.max(l,e),A=Math.max(A,r)}return[o,a,l,A]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let r;r=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?r:Math.max(a,r),a=this.getConstrainedResolution(a,s?0:1);const l=this.getRotation(),A=Math.sin(l),c=Math.cos(l),h=I(o);h[0]+=(n[1]-n[3])/2*a,h[1]+=(n[0]-n[2])/2*a;const u=h[0]*c-h[1]*A,d=h[1]*c+h[0]*A,g=this.getConstrainedCenter([u,d],a),p=e.callback?e.callback:ri;void 0!==e.duration?this.animateInternal({resolution:a,center:g,duration:e.duration,easing:e.easing},p):(this.targetResolution_=a,this.targetCenter_=g,this.applyTargetState_(!1,!0),IA(p,!0))}centerOn(t,e,i){this.centerOnInternal(Te(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(MA(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const r=this.padding_;if(r&&t){const o=this.getViewportSizeMinusPadding_(-i),a=MA(t,n,[o[0]/2+r[3],o[1]/2+r[0]],e,i);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Me(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Te(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Te(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Te(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(vA.ROTATION)!==n&&this.set(vA.ROTATION,n),this.get(vA.RESOLUTION)!==r&&(this.set(vA.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),o&&this.get(vA.CENTER)&&ot(this.get(vA.CENTER),o)||this.set(vA.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,n,r),a=this.constraints_.center(this.targetCenter_,o,r,!1,this.calculateCenterShift(this.targetCenter_,o,s,r));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===s&&this.getCenterInternal()&&ot(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:o,duration:t,easing:wi,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Bs,1)}endInteraction(t,e,i){i=i&&Te(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(Bs,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function IA(t,e){setTimeout((function(){t(e)}),0)}function LA(t){return!(t.sourceCenter&&t.targetCenter&&!ot(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function MA(t,e,i,n,s){const r=Math.cos(-s);let o=Math.sin(-s),a=t[0]*r-t[1]*o,l=t[1]*r+t[0]*o;a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,o=-o;return[a*r-l*o,l*r+a*o]}var TA="opacity",RA="visible",kA="extent",UA="zIndex",DA="maxResolution",OA="minResolution",PA="maxZoom",NA="minZoom",QA="source",HA="map";class GA extends _i{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[TA]=void 0!==t.opacity?t.opacity:1,$i("number"==typeof e[TA],"Layer opacity must be a number"),e[RA]=void 0===t.visible||t.visible,e[UA]=t.zIndex,e[DA]=void 0!==t.maxResolution?t.maxResolution:1/0,e[OA]=void 0!==t.minResolution?t.minResolution:0,e[NA]=void 0!==t.minZoom?t.minZoom:-1/0,e[PA]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=V(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return gi()}getLayerStatesArray(t){return gi()}getExtent(){return this.get(kA)}getMaxResolution(){return this.get(DA)}getMinResolution(){return this.get(OA)}getMinZoom(){return this.get(NA)}getMaxZoom(){return this.get(PA)}getOpacity(){return this.get(TA)}getSourceState(){return gi()}getVisible(){return this.get(RA)}getZIndex(){return this.get(UA)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(kA,t)}setMaxResolution(t){this.set(DA,t)}setMinResolution(t){this.set(OA,t)}setMaxZoom(t){this.set(PA,t)}setMinZoom(t){this.set(NA,t)}setOpacity(t){$i("number"==typeof t,"Layer opacity must be a number"),this.set(TA,t)}setVisible(t){this.set(RA,t)}setZIndex(t){this.set(UA,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class VA extends GA{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(QA,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(QA)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(hi(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Ai(t,Ne,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const i=this.getMapInternal();let n;if(!t&&i&&(t=i.getView()),e=t instanceof FA?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),e.layerStatesArray){if(n=e.layerStatesArray.find((t=>t.layer===this)),!n)return!1}else n=this.getLayerState();const s=this.getExtent();return zA(n,e.viewState)&&(!s||P(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];const e=this.getSource()?.getAttributions();if(!e)return[];let i=e(t instanceof FA?t.getViewStateAndExtent():t);return Array.isArray(i)||(i=[i]),i}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(HA,t)}getMapInternal(){return this.get(HA)}setMap(t){this.mapPrecomposeKey_&&(hi(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(hi(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ai(t,Ds,this.handlePrecompose_,this),this.mapRenderKey_=Ai(this,Ne,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);$i(!e.some((t=>t.layer===i.layer)),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(i)}setSource(t){this.set(QA,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function zA(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const KA="renderOrder";class jA extends VA{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(KA)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const i=this.getDeclutter();i in t.declutter==!1&&(t.declutter[i]=new da(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(KA,t)}setStyle(t){this.style_=void 0===t?jo:t;const e=function(t){if(void 0===t)return jo;if(!t)return null;if("function"==typeof t)return t;if(t instanceof zo)return t;if(!Array.isArray(t))return tA([t]);if(0===t.length)return[];const e=t.length,i=t[0];if(i instanceof zo){const i=new Array(e);for(let n=0;n<e;++n){const e=t[n];if(!(e instanceof zo))throw new Error("Expected a list of style instances");i[n]=e}return i}if("style"in i){const i=new Array(e);for(let n=0;n<e;++n){const e=t[n];if(!("style"in e))throw new Error("Expected a list of rules with a style property");i[n]=e}return Jl(i)}const n=t;return tA(n)}(t);this.styleFunction_=null===t?void 0:function(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:($i("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),i=[t]),e=function(){return i}}return e}(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}class WA extends jA{constructor(t){super(t)}createRenderer(){return new Aa(this)}}var $A="add",YA="remove";const XA="length";class qA extends ai{constructor(t,e,i){super(t),this.element=e,this.index=i}}class ZA extends _i{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(XA)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new qA($A,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new qA(YA,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new qA(YA,i,t)),this.dispatchEvent(new qA($A,e,t))}updateLength_(){this.set(XA,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}function JA(t,e){return function(i,n,s,r,o){!function(t,e,i,n,s,r,o){const a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(i,n,s):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=!1,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();try{let n;"text"==t||"json"==t?n=a.responseText:"xml"==t?n=a.responseXML||a.responseText:"arraybuffer"==t&&(n=a.response),n?r(e.readFeatures(n,{extent:i,featureProjection:s}),e.readProjection(n)):o()}catch{o()}}else o()},a.onerror=o,a.send()}(t,e,i,n,s,((t,e)=>{this.addFeatures(t),void 0!==r&&r(t)}),(()=>{this.changed(),void 0!==o&&o()}))}}function tc(t,e){return[[-1/0,-1/0,1/0,1/0]]}const ec=[1,0,0,1,0,0];class ic{constructor(t,e,i,n,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?_(this.flatCoordinates_):y(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=I(this.getExtent());this.flatInteriorPoints_=Rn(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=function(t,e){const i=[];let n,s=0,r=0;for(let o=0,a=e.length;o<a;++o){const a=e[o],l=Hn(t,s,a,2);if(void 0===n&&(n=l),l===n)i.push(e.slice(r,o+1));else{if(0===i.length)continue;i[i.length-1].push(e[r])}r=o+1,s=a}return i}(this.flatCoordinates_,this.ends_),e=bs(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=kn(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=fs(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let n=0,s=i.length;n<s;++n){const s=i[n],r=fs(t,e,s,2,.5);ei(this.flatMidpoints_,r),e=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=_e(t)).getExtent(),i=t.getWorldExtent();if(e&&i){const t=R(i)/R(e);Xi(ec,i[0],i[3],t,-t,0,0,0),tn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,ec,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new ic(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=oi(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=Cn(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=xn(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,n);break;case"Polygon":n=[],i.length=Sn(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,n)}return n&&(this.simplifiedGeometry_=new ic(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}ic.prototype.getFlatCoordinates=ic.prototype.getOrientedFlatCoordinates;class nc{constructor(t){this.rbush_=new da(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[fi(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const s=t[n],r=e[n],o={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:r};i[n]=o,this.items_[fi(r)]=o}this.rbush_.load(i)}remove(t){const e=fi(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[fi(e)];w([i.minX,i.minY,i.maxX,i.maxY],t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,s=t.length;n<s;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return Mt(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return f(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class sc extends _i{constructor(t){super(),this.projection=_e(t.projection),this.attributions_=rc(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=rc(t),this.changed()}setState(t){this.state_=t,this.changed()}}function rc(t){return t?"function"==typeof t?t:(Array.isArray(t)||(t=[t]),e=>t):null}var oc="addfeature",ac="changefeature",lc="clear",Ac="removefeature",cc="featuresloadstart",hc="featuresloadend",uc="featuresloaderror";class dc extends ai{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class gc extends sc{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=ri,this.format_=t.format||null,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&($i(this.format_,"`format` must be set when `url` is set"),this.loader_=JA(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:tc;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,n;this.featuresRtree_=e?new nc:null,this.loadedExtentsRtree_=new nc,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),e||void 0!==i||(i=new ZA(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=fi(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new dc(oc,t))}setupChangeEvents_(t,e){e instanceof ic||(this.featureChangeKeys_[t]=[Ai(e,Ne,this.handleFeatureChange_,this),Ai(e,Ye,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof ic){const n=this.idIndex_[t];n instanceof ic?Array.isArray(n)?n.push(e):this.idIndex_[t]=[n,e]:i=!1}else i=!1;else this.idIndex_[t]=e}return i&&($i(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],s=fi(n);this.addToIndex_(s,n)&&i.push(n)}for(let t=0,s=i.length;t<s;t++){const s=i[t],r=fi(s);this.setupChangeEvents_(r,s);const o=s.getGeometry();if(o){const t=o.getExtent();e.push(t),n.push(s)}else this.nullGeometryFeatures_[r]=s}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(oc))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new dc(oc,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(oc,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(Ac,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener($A,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(YA,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(hi)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach((t=>{this.removeFeatureInternal(t)}));for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new dc(lc);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){const n=i.getGeometry();if(n instanceof ic||n.intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){const n=i.getGeometry();if(n instanceof ic||n.intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Mt(this.nullGeometryFeatures_)||ei(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=G(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let s=null;const r=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||ni,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=o;if(o=e instanceof ic?0:e.closestPointXY(i,n,r,o),o<l){s=t;const e=Math.sqrt(o);a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}})),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=fi(e),n=e.getGeometry();if(n){const t=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const s=e.getId();if(void 0!==s){const t=s.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new dc(ac,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:fi(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Mt(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let t=0,r=s.length;t<r;++t){const r=s[t];n.forEachInExtent(r,(function(t){return u(t.extent,r)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new dc(cc)),this.loader_.call(this,r,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new dc(hc,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new dc(uc))})),n.insert(r,{extent:r.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,i=e.forEachInExtent(t,(function(e){if(w(e.extent,t))return e}));i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,n=t.length;i<n;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=fi(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i?.forEach(hi),delete this.featureChangeKeys_[e];const n=t.getId();if(void 0!==n){const e=n.toString(),i=this.idIndex_[e];i===t?delete this.idIndex_[e]:Array.isArray(i)&&(i.splice(i.indexOf(t),1),1===i.length&&(this.idIndex_[e]=i[0]))}return delete this.uidIndex_[e],this.hasListener(Ac)&&this.dispatchEvent(new dc(Ac,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){$i(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(JA(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const pc="drawstart",fc="drawend",mc="drawabort";class _c extends ai{constructor(t,e){super(t),this.feature=e}}function yc(t,e){return K(t[0],t[1],e[0],e[1])}function wc(t,e){const i=t.length;return e<0?t[e+i]:e>=i?t[e-i]:t[e]}function vc(t,e,i){let n,s;e<i?(n=e,s=i):(n=i,s=e);const r=Math.ceil(n),o=Math.floor(s);if(r>o){return yc(Sc(t,n),Sc(t,s))}let a=0;if(n<r){a+=yc(Sc(t,n),wc(t,r))}if(o<s){a+=yc(wc(t,o),Sc(t,s))}for(let e=r;e<o-1;++e){a+=yc(wc(t,e),wc(t,e+1))}return a}function bc(t,e,i){if(e instanceof ys)xc(t,e.getCoordinates(),!1,i);else if(e instanceof ws){const n=e.getCoordinates();for(let e=0,s=n.length;e<s;++e)xc(t,n[e],!1,i)}else if(e instanceof jn){const n=e.getCoordinates();for(let e=0,s=n.length;e<s;++e)xc(t,n[e],!0,i)}else if(e instanceof Cs){const n=e.getCoordinates();for(let e=0,s=n.length;e<s;++e){const s=n[e];for(let e=0,n=s.length;e<n;++e)xc(t,s[e],!0,i)}}else if(e instanceof gs){const n=e.getGeometries();for(let e=0;e<n.length;++e)bc(t,n[e],i)}else;}const Cc={index:-1,endIndex:NaN};function xc(t,e,i,n){const s=t[0],r=t[1];for(let t=0,o=e.length-1;t<o;++t){const o=Ec(s,r,e[t],e[t+1]);if(0===o.squaredDistance){const s=t+o.along;return void n.push({coordinates:e,ring:i,startIndex:s,endIndex:s})}}}const Bc={along:0,squaredDistance:0};function Ec(t,e,i,n){const s=i[0],r=i[1],o=n[0]-s,a=n[1]-r;let l=0,A=s,c=r;return 0===o&&0===a||(l=V(((t-s)*o+(e-r)*a)/(o*o+a*a),0,1),A+=o*l,c+=a*l),Bc.along=l,Bc.squaredDistance=X(K(t,e,A,c),10),Bc}function Sc(t,e){const i=t.length;let n=Math.floor(e);const s=e-n;n>=i?n-=i:n<0&&(n+=i);let r=n+1;r>=i&&(r-=i);const o=t[n],a=o[0],l=o[1],A=t[r];return[a+(A[0]-a)*s,l+(A[1]-l)*s]}class Fc extends qn{constructor(t){const e=t;e.stopDown||(e.stopDown=si),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:ni,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const t=this.mode_;if("Circle"===t)i=(t,e,i)=>{const n=e||new ds([NaN,NaN]),s=Te(t[0]),r=lt(s,Te(t[t.length-1]));return n.setCenterAndRadius(s,Math.sqrt(r),this.geometryLayout_),n};else{let e;"Point"===t?e=In:"LineString"===t?e=ys:"Polygon"===t&&(e=jn),i=(i,n,s)=>(n?"Polygon"===t?i[0].length?n.setCoordinates([i[0].concat([i[0][0]])],this.geometryLayout_):n.setCoordinates([],this.geometryLayout_):n.setCoordinates(i,this.geometryLayout_):n=new e(i,this.geometryLayout_),n)}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new WA({source:new gc({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:Ic(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:Gi,this.freehandCondition_,t.freehand?this.freehandCondition_=Oi:this.freehandCondition_=t.freehandCondition?t.freehandCondition:zi,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(Ci,this.updateState_)}setTrace(t){let e;e=t?!0===t?Oi:t:Qi,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===He&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===$e.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===$e.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===$e.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===$e.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===$e.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===$e.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===$e.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((()=>{this.handlePointerMove_(new us($e.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=a([e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_])]),n=this.traceSource_.getFeaturesInExtent(i);if(0===n.length)return;const s=function(t,e){const i=[];for(let n=0;n<e.length;++n)bc(t,e[n].getGeometry(),i);return i}(t.coordinate,n);s.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:s,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const n=Math.ceil(t);let s=Math.floor(e);s===e&&(s-=1),i=s-n+1}else{const n=Math.floor(t);let s=Math.ceil(e);s===e&&(s+=1),i=n-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e<i){const s=Math.ceil(e);let r=Math.floor(i);r===i&&(r-=1);for(let e=s;e<=r;++e)n.push(wc(t.coordinates,e))}else{const s=Math.floor(e);let r=Math.ceil(i);r===i&&(r+=1);for(let e=s;e>=r;--e)n.push(wc(t.coordinates,e))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active)return;if(-1===e.targetIndex&&At(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(t,e,i,n){const s=t[0],r=t[1];let o=1/0,a=-1,l=NaN;for(let t=0;t<e.targets.length;++t){const i=e.targets[t],n=i.coordinates;let A,c=1/0;for(let t=0;t<n.length-1;++t){const e=Ec(s,r,n[t],n[t+1]);e.squaredDistance<c&&(c=e.squaredDistance,A=t+e.along)}c<o&&(o=c,i.ring&&e.targetIndex===t&&(i.endIndex>i.startIndex?A<i.startIndex&&(A+=n.length):i.endIndex<i.startIndex&&A>i.startIndex&&(A-=n.length)),l=A,a=t)}const A=e.targets[a];let c=A.ring;if(e.targetIndex===a&&c){const t=Sc(A.coordinates,l);At(i.getPixelFromCoordinate(t),e.startPx)>n&&(c=!1)}if(c){const t=A.coordinates,e=t.length,i=A.startIndex,n=l;if(i<n){const s=vc(t,i,n);vc(t,i,n-e)<s&&(l-=e)}else{const s=vc(t,i,n);vc(t,i,n+e)<s&&(l+=e)}}return Cc.index=a,Cc.endIndex=l,Cc}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[i.index];this.addTracedCoordinates_(t,t.startIndex,i.endIndex)}else{const t=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(t,i.endIndex)}e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const s=Sc(n.coordinates,n.endIndex),r=this.getMap().getPixelFromCoordinate(s);t.coordinate=s,t.pixel=[Math.round(r[0]),Math.round(r[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&"Point"!==this.mode_||(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],s=e[1]-i[1],r=n*n+s*s;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const r=this.mode_;if("Point"===r)i=!0;else if("Circle"===r)i=2===this.sketchCoords_.length;else if("LineString"===r)n=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===r){const t=this.sketchCoords_;n=t[0].length>this.minPoints_,s=[t[0][0],t[0][t[0].length-2]],s=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(n){const e=this.getMap();for(let n=0,r=s.length;n<r;n++){const r=s[n],o=e.getPixelFromCoordinate(r),a=t[0]-o[0],l=t[1]-o[1],A=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(a*a+l*l)<=A,i){this.finishCoordinate_=r;break}}}}return i}createOrUpdateSketchPoint_(t){if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}else this.sketchPoint_=new cs(new In(t)),this.updateSketchFeatures_()}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new cs);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new ys(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=ln(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new cs(new ys(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new cs,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new _c(pc,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),s=ln(this.geometryLayout_);let r,o;for(;t.length<s;)t.push(0);if("Point"===this.mode_?o=this.sketchCoords_:"Polygon"===this.mode_?(r=this.sketchCoords_[0],o=r[r.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(r=this.sketchCoords_,o=r[r.length-1]),o[0]=t[0],o[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}if("Polygon"===i.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const r=this.mode_;return"LineString"===r||"Circle"===r?(this.finishCoordinate_=t.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(t.slice()),this.geometryFunction_(s,e,i)):"Polygon"===r&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(t.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<t;++s){let t;if("LineString"===n||"Circle"===n){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,i),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===n){t=this.sketchCoords_[0],t.splice(-2,1);const n=this.sketchLine_.getGeometry();if(t.length>=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}n.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();return"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,i,n)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new vs([e])):"MultiLineString"===this.type_?t.setGeometry(new ws([e])):"MultiPolygon"===this.type_&&t.setGeometry(new Cs([e])),this.dispatchEvent(new _c(fc,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new _c(mc,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let n;if(i&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)n=this.sketchCoords_;else{if("Polygon"!==e)return;n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&n.shift(),n.pop();for(let e=0;e<t.length;e++)this.addToDrawing_(t[e]);const s=t[t.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new cs(new In(i)),this.updateSketchFeatures_(),this.dispatchEvent(new _c(pc,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function Ic(){const t=Wo();return function(e,i){return t[e.getGeometry().getType()]}}function Lc(t,e){return function(i,n,s){const r=Te(i[0]),o=Te(i[i.length-1]),a=Math.sqrt(lt(r,o));n=n||$n(new ds(r),t);let l=e;if(!e&&0!==e){const t=o[0]-r[0],e=o[1]-r[1];l=Math.atan2(e,t)}return Yn(n,r,a,l),n}}var Mc="ArrowLeft",Tc="ArrowUp",Rc="ArrowRight",kc="ArrowDown";class Uc extends xi{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return Gi(t)&&Ki(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Ve){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&(n==kc||n==Mc||n==Rc||n==Tc)){const s=t.map.getView(),r=s.getResolution()*this.pixelDelta_;let o=0,a=0;n==kc?a=-r:n==Mc?o=-r:n==Rc?o=r:a=r;const l=[o,a];at(l,s.getRotation()),function(t,e,i){const n=t.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:bi,center:t.getConstrainedCenter(s)})}}(s,l,this.duration_),i.preventDefault(),e=!0}}return!e}}class Dc extends xi{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent;return Ii?e.metaKey:e.ctrlKey}(t)&&Ki(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==Ve||t.type==ze){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&("+"===n||"-"===n)){const s=t.map,r="+"===n?this.delta_:-this.delta_;Bi(s.getView(),r,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}var Oc="postrender",Pc="movestart",Nc="moveend",Qc="loadstart",Hc="loadend";const Gc=[0,0,0,0],Vc=[],zc="modifystart",Kc="modifyend";class jc extends ai{constructor(t,e,i){super(t),this.features=e,this.mapBrowserEvent=i}}class Wc extends qn{constructor(t){let e;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:Wi,this.defaultDeleteCondition_=function(t){return function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}(t)&&Hi(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:Oi,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new nc,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new WA({source:new gc({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:qc(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&&(this.source_=t.source,e=new ZA(this.source_.getFeatures()),this.source_.addEventListener(oc,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(Ac,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener($A,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(YA,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(i.getCoordinateFromPixel(this.lastPixel_)),t.addEventListener(Ne,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new ZA;const i=this.featuresBeingModified_.getArray();for(let t=0,n=e.length;t<n;++t){const n=e[t].feature;n&&!i.includes(n)&&this.featuresBeingModified_.push(n)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new jc(zc,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(Ne,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(let t=i.length-1;t>=0;--t){const n=i[t];for(let t=this.dragSegments_.length-1;t>=0;--t)this.dragSegments_[t][0]===n&&this.dragSegments_.splice(t,1);e.remove(n)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)}writeMultiPointGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n],r={feature:t,geometry:e,depth:[n],index:n,segment:[s,s]};this.rBush_.insert(e.getExtent(),r)}}writeLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length-1;n<s;++n){const s=i.slice(n,n+2),r={feature:t,geometry:e,index:n,segment:s};this.rBush_.insert(a(s),r)}}writeMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n];for(let i=0,r=s.length-1;i<r;++i){const r=s.slice(i,i+2),o={feature:t,geometry:e,depth:[n],index:i,segment:r};this.rBush_.insert(a(r),o)}}}writePolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n];for(let i=0,r=s.length-1;i<r;++i){const r=s.slice(i,i+2),o={feature:t,geometry:e,depth:[n],index:i,segment:r};this.rBush_.insert(a(r),o)}}}writeMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const s=i[n];for(let i=0,r=s.length;i<r;++i){const r=s[i];for(let s=0,o=r.length-1;s<o;++s){const o=r.slice(s,s+2),l={feature:t,geometry:e,depth:[i,n],index:s,segment:o};this.rBush_.insert(a(o),l)}}}}writeCircleGeometry_(t,e){const i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},s={feature:t,geometry:e,index:1,segment:[i,i]},r=[n,s];n.featureSegments=r,s.featureSegments=r,this.rBush_.insert(_(i),n);let o=e;this.rBush_.insert(o.getExtent(),s)}writeGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let e=0;e<i.length;++e){const n=i[e];(0,this.SEGMENT_WRITERS_[n.getType()])(t,n)}}createOrUpdateVertexFeature_(t,e,i,n){let s=this.vertexFeature_;if(s){s.getGeometry().setCoordinates(t)}else s=new cs(new In(t)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s);return s.set("features",e),s.set("geometries",i),s.set("existing",n),s}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=$e.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=$e.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==$e.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}findInsertVerticesAndUpdateDragSegments_(t){this.handlePointerAtPixel_(t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const e=this.vertexFeature_;if(!e)return;this.getMap().getView().getProjection();const i=[],n=e.getGeometry().getCoordinates(),s=a([n]),r=this.rBush_.getInExtent(s),o={};r.sort($c);for(let e=0,s=r.length;e<s;++e){const s=r[e],a=s.segment;let l=fi(s.geometry);const A=s.depth;if(A&&(l+="-"+A.join("-")),o[l]||(o[l]=new Array(2)),"Circle"!==s.geometry.getType()||1!==s.index)if(!ot(a[0],n)||o[l][0])if(!ot(a[1],n)||o[l][1])!(fi(a)in this.vertexSegments_)||o[l][0]||o[l][1]||i.push(s);else{if(o[l][0]&&0===o[l][0].index){let t=s.geometry.getCoordinates();switch(s.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[A[1]];case"Polygon":if(s.index!==t[A[0]].length-2)continue}}this.dragSegments_.push([s,1]),o[l][1]=s}else this.dragSegments_.push([s,0]),o[l][0]=s;else{ot(Xc(t,s),n)&&!o[l][0]&&(this.dragSegments_.push([s,0]),o[l][0]=s)}}return i}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_.map((([t])=>t)));const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],n=[];for(let s=0,r=this.dragSegments_.length;s<r;++s){const r=this.dragSegments_[s],o=r[0],a=o.feature;i.includes(a)||i.push(a);const l=o.geometry;n.includes(l)||n.push(l);const A=o.depth;let c;const h=o.segment,u=r[1];for(;e.length<l.getStride();)e.push(h[u][e.length]);switch(l.getType()){case"Point":c=e,h[0]=e,h[1]=e;break;case"MultiPoint":c=l.getCoordinates(),c[o.index]=e,h[0]=e,h[1]=e;break;case"LineString":c=l.getCoordinates(),c[o.index+u]=e,h[u]=e;break;case"MultiLineString":case"Polygon":c=l.getCoordinates(),c[A[0]][o.index+u]=e,h[u]=e;break;case"MultiPolygon":c=l.getCoordinates(),c[A[1]][A[0]][o.index+u]=e,h[u]=e;break;case"Circle":const i=l;if(h[0]=e,h[1]=e,0===o.index)this.changingFeature_=!0,i.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,t.map.getView().getProjection();let n=At(Te(i.getCenter()),Te(e));i.setRadius(n),this.changingFeature_=!1}}c&&this.setGeometryCoordinates_(l,c)}this.createOrUpdateVertexFeature_(e,i,n,!0)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate,i=this.findInsertVerticesAndUpdateDragSegments_(e);if(i?.length&&this.insertVertexCondition_(t)&&(this.willModifyFeatures_(t,i),this.vertexFeature_)){const t=this.vertexFeature_.getGeometry().getCoordinates();for(let e=i.length-1;e>=0;--e)this.insertVertex_(i[e],t);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(t){for(let t=this.dragSegments_.length-1;t>=0;--t){const e=this.dragSegments_[t][0],i=e.geometry;if("Circle"===i.getType()){const t=i,n=t.getCenter(),s=e.featureSegments[0],r=e.featureSegments[1];s.segment[0]=n,s.segment[1]=n,r.segment[0]=n,r.segment[1]=n,this.rBush_.update(_(n),s);let o=t;this.rBush_.update(o.getExtent(),r)}else this.rBush_.update(a(e.segment),e)}return this.featuresBeingModified_&&(this.dispatchEvent(new jc(Kc,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.coordinate)}handlePointerAtPixel_(t){const e=this.getMap(),i=e.getPixelFromCoordinate(t);e.getView().getProjection();const n=function(e,i){return Yc(t,e)-Yc(t,i)};let s,r;if(this.hitDetection_){const t="object"==typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;e.forEachFeatureAtPixel(i,((t,e,i)=>{i&&"Point"===i.getType()&&(i=new In(Me(i.getCoordinates())));const n=i||t.getGeometry();if(n&&"Point"===n.getType()&&t instanceof cs&&this.features_.getArray().includes(t)){r=n;const e=t.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:t,geometry:r,segment:[e,e]}]}return!0}),{layerFilter:t})}if(!s){const i=Re(l(ke(_(t,Gc)),e.getView().getResolution()*this.pixelTolerance_,Gc));s=this.rBush_.getInExtent(i)}if(s&&s.length>0){const o=s.sort(n)[0],a=o.segment;let l=Xc(t,o);const A=e.getPixelFromCoordinate(l);let c=At(i,A);if(r||c<=this.pixelTolerance_){const i={};if(i[fi(a)]=!0,this.snapToPointer_||(this.delta_[0]=l[0]-t[0],this.delta_[1]=l[1]-t[1]),"Circle"===o.geometry.getType()&&1===o.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l,[o.feature],[o.geometry],this.snappedToVertex_);else{const t=e.getPixelFromCoordinate(a[0]),n=e.getPixelFromCoordinate(a[1]),r=lt(A,t),h=lt(A,n);if(c=Math.sqrt(Math.min(r,h)),this.snappedToVertex_=c<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_))return void(this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null));this.snappedToVertex_&&(l=r>h?a[1]:a[0]),this.createOrUpdateVertexFeature_(l,[o.feature],[o.geometry],this.snappedToVertex_);const u={};u[fi(o.geometry)]=!0;for(let t=1,e=s.length;t<e;++t){const e=s[t].segment;if(!(ot(a[0],e[0])&&ot(a[1],e[1])||ot(a[0],e[1])&&ot(a[1],e[0])))break;{const n=fi(s[t].geometry);n in u||(u[n]=!0,i[fi(e)]=!0)}}}return void(this.vertexSegments_=i)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const i=t.segment,n=t.feature,s=t.geometry,r=t.depth,o=t.index;let l;for(;e.length<s.getStride();)e.push(0);switch(s.getType()){case"MultiLineString":case"Polygon":l=s.getCoordinates(),l[r[0]].splice(o+1,0,e);break;case"MultiPolygon":l=s.getCoordinates(),l[r[1]][r[0]].splice(o+1,0,e);break;case"LineString":l=s.getCoordinates(),l.splice(o+1,0,e);break;default:return!1}this.setGeometryCoordinates_(s,l);const A=this.rBush_;A.remove(t),this.updateSegmentIndices_(s,o,r,1);const c={segment:[i[0],e],feature:n,geometry:s,depth:r,index:o};A.insert(a(c.segment),c),this.dragSegments_.push([c,1]);const h={segment:[e,i[1]],feature:n,geometry:s,depth:r,index:o+1};return A.insert(a(h.segment),h),this.dragSegments_.push([h,0]),!0}updatePointer_(t){return t&&this.findInsertVerticesAndUpdateDragSegments_(t),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const t=this.vertexFeature_?.getGeometry().getCoordinates();return t?Me(t,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_)return!1;if(this.vertexFeature_.get("geometries").every((t=>"Circle"===t.getType()||t.getType().endsWith("Point"))))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(a([t])).some((({segment:e})=>ot(e[0],t)||ot(e[1],t)))}removePoint(t){if(t&&(t=Te(t,this.getMap().getView().getProjection()),this.updatePointer_(t)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=$e.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map((([t])=>t)));const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new jc(Kc,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let i,n,s,r,o,l,A,c,h,u,d,g=!1;for(o=t.length-1;o>=0;--o)s=t[o],u=s[0],d=fi(u.feature),u.depth&&(d+="-"+u.depth.join("-")),d in e||(e[d]={}),0===s[1]?(e[d].right=u,e[d].index=u.index):1==s[1]&&(e[d].left=u,e[d].index=u.index+1);for(d in e){switch(h=e[d].right,A=e[d].left,l=e[d].index,c=l-1,u=void 0!==A?A:h,c<0&&(c=0),r=u.geometry,n=r.getCoordinates(),i=n,g=!1,r.getType()){case"MultiLineString":n[u.depth[0]].length>2&&(n[u.depth[0]].splice(l,1),g=!0);break;case"LineString":n.length>2&&(n.splice(l,1),g=!0);break;case"MultiPolygon":i=i[u.depth[1]];case"Polygon":i=i[u.depth[0]],i.length>4&&(l==i.length-1&&(l=0),i.splice(l,1),g=!0,0===l&&(i.pop(),i.push(i[0]),c=i.length-1))}if(g){this.setGeometryCoordinates_(r,n);const e=[];if(void 0!==A&&(this.rBush_.remove(A),e.push(A.segment[0])),void 0!==h&&(this.rBush_.remove(h),e.push(h.segment[1])),void 0!==A&&void 0!==h){const t={depth:u.depth,feature:u.feature,geometry:u.geometry,index:c,segment:e};this.rBush_.insert(a(t.segment),t)}this.updateSegmentIndices_(r,l,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return g}canInsertPoint(){if(!this.vertexFeature_)return!1;if(this.vertexFeature_.get("geometries").every((t=>"Circle"===t.getType()||t.getType().endsWith("Point"))))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(a([t])).some((({segment:e})=>!(ot(e[0],t)||ot(e[1],t))))}insertPoint(t){const e=t?Te(t,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();if(!e)return!1;return this.findInsertVerticesAndUpdateDragSegments_(e).reduce(((t,i)=>t||this.insertVertex_(i,e)),!1)}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),(function(s){s.geometry===t&&(void 0===i||void 0===s.depth||ii(s.depth,i))&&s.index>e&&(s.index+=n)}))}}function $c(t,e){return t.index-e.index}function Yc(t,e,i){const n=e.geometry;if("Circle"===n.getType()){let i=n;if(1===e.index){const e=lt(i.getCenter(),Te(t)),n=Math.sqrt(e)-i.getRadius();return n*n}}const s=Te(t);return Vc[0]=Te(e.segment[0]),Vc[1]=Te(e.segment[1]),function(t,e){return lt(t,st(t,e))}(s,Vc)}function Xc(t,e,i){const n=e.geometry;if("Circle"===n.getType()&&1===e.index){return Me(n.getClosestPoint(Te(t)))}const s=Te(t);return Vc[0]=Te(e.segment[0]),Vc[1]=Te(e.segment[1]),Me(st(s,Vc))}function qc(){const t=Wo();return function(e,i){return t.Point}}class Zc extends xi{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Oi;this.condition_=t.onFocusOnly?ki(Di,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==We)return!0;const e=t.map,i=t.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let n=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:n*=40;break;case WheelEvent.DOM_DELTA_PAGE:n*=300}if(0===n)return!1;this.lastDelta_=n;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const r=e.getView();if("trackpad"===this.mode_&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=n;const o=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),o),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-V(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Bi(e,i,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class Jc extends qn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=si),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const r=t.map,o=r.getView();o.getConstraints().rotation!==os&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(Zn(this.targetPointers))),this.rotating_&&(r.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class th extends qn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=si),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,r=i.clientY-n.clientY,o=Math.sqrt(s*s+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Zn(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const eh="select";class ih extends ai{constructor(t,e,i,n){super(t),this.selected=e,this.deselected=i,this.mapBrowserEvent=n}}const nh={};class sh extends xi{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:Hi,this.addCondition_=t.addCondition?t.addCondition:Qi,this.removeCondition_=t.removeCondition?t.removeCondition:Qi,this.toggleCondition_=t.toggleCondition?t.toggleCondition:zi,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:ni,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=Wo();return ei(t.Polygon,t.LineString),ei(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new ZA,t.layers)if("function"==typeof t.layers)e=t.layers;else{const i=t.layers;e=function(t){return i.includes(t)}}else e=ni;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[fi(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[fi(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener($A,this.boundAddFeature_),this.features_.addEventListener(YA,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener($A,this.boundAddFeature_),this.features_.removeEventListener(YA,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof WA&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=fi(t);e in nh||(nh[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){const n=e[i];if(n!==this&&n instanceof sh&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(n.getStyle())}const i=fi(t);t.setStyle(nh[i]),delete nh[i]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[fi(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),s=!e&&!i&&!n,r=t.map,o=this.getFeatures(),a=[],l=[];if(s){Lt(this.featureLayerAssociation_),r.forEachFeatureAtPixel(t.pixel,((t,e)=>{if(t instanceof cs&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=o.getLength()-1;t>=0;--t){const e=o.item(t),i=l.indexOf(e);i>-1?l.splice(i,1):(o.remove(e),a.push(e))}0!==l.length&&o.extend(l)}else{r.forEachFeatureAtPixel(t.pixel,((t,s)=>{if(t instanceof cs&&this.filter_(t,s))return!e&&!n||o.getArray().includes(t)?(i||n)&&o.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,s),l.push(t)),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)o.remove(a[t]);o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new ih(eh,l,a,t)),!0}}const rh="snap",oh="unsnap";class ah extends ai{constructor(t,e){super(t),this.vertex=e.vertex,this.vertexPixel=e.vertexPixel,this.feature=e.feature,this.segment=e.segment}}const lh={Circle(t,e){const i=$n(t);return lh.Polygon(i)},GeometryCollection(t,e){const i=[],n=t.getGeometriesArray();for(let t=0;t<n.length;++t){const s=lh[n[t].getType()];s&&i.push(s(n[t],e))}return i.flat()},LineString(t){const e=[],i=t.getFlatCoordinates(),n=t.getStride();for(let t=0,s=i.length-n;t<s;t+=n)e.push([i.slice(t,t+2),i.slice(t+n,t+n+2)]);return e},MultiLineString(t){const e=[],i=t.getFlatCoordinates(),n=t.getStride(),s=t.getEnds();let r=0;for(let t=0,o=s.length;t<o;++t){const o=s[t];for(let t=r,s=o-n;t<s;t+=n)e.push([i.slice(t,t+2),i.slice(t+n,t+n+2)]);r=o}return e},MultiPoint(t){const e=[],i=t.getFlatCoordinates(),n=t.getStride();for(let t=0,s=i.length;t<s;t+=n)e.push([i.slice(t,t+2)]);return e},MultiPolygon(t){const e=[],i=t.getFlatCoordinates(),n=t.getStride(),s=t.getEndss();let r=0;for(let t=0,o=s.length;t<o;++t){const o=s[t];for(let t=0,s=o.length;t<s;++t){const s=o[t];for(let t=r,o=s-n;t<o;t+=n)e.push([i.slice(t,t+2),i.slice(t+n,t+n+2)]);r=s}}return e},Point:t=>[[t.getFlatCoordinates().slice(0,2)]],Polygon(t){const e=[],i=t.getFlatCoordinates(),n=t.getStride(),s=t.getEnds();let r=0;for(let t=0,o=s.length;t<o;++t){const o=s[t];for(let t=r,s=o-n;t<s;t+=n)e.push([i.slice(t,t+2),i.slice(t+n,t+n+2)]);r=o}return e}};function Ah(t){return t.feature?t.feature:t.element?t.element:null}const ch=[],hh=[],uh=[];class dh extends qn{constructor(t){const e=t=t||{};e.handleDownEvent||(e.handleDownEvent=ni),e.stopDown||(e.stopDown=si),super(e),this.on,this.once,this.un,this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.intersection_=void 0!==t.intersection&&t.intersection,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new nc,this.snapped_=null,this.segmenters_=Object.assign({},lh,t.segmenters)}addFeature(t,e){e=void 0===e||e;const i=fi(t),n=t.getGeometry();if(n){const e=this.segmenters_[n.getType()];if(e){this.indexedFeaturesExtents_[i]=n.getExtent([1/0,1/0,-1/0,-1/0]);const s=e(n,this.getMap().getView().getProjection());let r=s.length;for(let e=0;e<r;++e){const i=s[e];hh[e]=a(i),uh[e]={feature:t,segment:i}}if(hh.length=r,uh.length=r,this.intersection_)for(let e=0,i=s.length;e<i;++e){const i=s[e];if(1===i.length)continue;const n=hh[e];for(let o=0,l=s.length;o<l;++o){if(e===o||e-1===o||e+1===o)continue;const l=s[o];if(!P(n,hh[o]))continue;const A=Dn(i,l);if(!A)continue;const c=[A];hh[r]=a(c),uh[r++]={feature:t,segment:c,isIntersection:!0}}const o=this.rBush_.getInExtent(hh[e]);for(const{segment:e}of o){if(1===e.length)continue;const n=Dn(i,e);if(!n)continue;const s=[n];hh[r]=a(s),uh[r++]={feature:t,segment:s,isIntersection:!0}}}1===r?this.rBush_.insert(hh[0],uh[0]):this.rBush_.load(hh,uh)}}e&&(this.featureChangeListenerKeys_[i]=Ai(t,Ne,this.handleFeatureChange_,this))}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}areSnapDataEqual_(t,e){return t.segment===e.segment&&t.feature===e.feature}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e?(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel,this.snapped_&&!this.areSnapDataEqual_(this.snapped_,e)&&this.dispatchEvent(new ah(oh,this.snapped_)),this.snapped_={vertex:t.coordinate,vertexPixel:t.pixel,feature:e.feature,segment:e.segment},this.dispatchEvent(new ah(rh,this.snapped_))):this.snapped_&&(this.dispatchEvent(new ah(oh,this.snapped_)),this.snapped_=null),super.handleEvent(t)}handleFeatureAdd_(t){const e=Ah(t);e&&this.addFeature(e)}handleFeatureRemove_(t){const e=Ah(t);e&&this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const t=fi(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);if(e.length)for(const t of e)this.updateFeature_(t);return!1}removeFeature(t,e){const i=void 0===e||e,n=fi(t),s=this.indexedFeaturesExtents_[n];if(s){const e=this.rBush_,i=[];e.forEachInExtent(s,(function(e){t===e.feature&&i.push(e)}));for(let t=i.length-1;t>=0;--t)e.remove(i[t])}i&&(hi(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(t){const e=this.getMap(),i=this.featuresListenerKeys_;let n=this.getFeatures_();if(Array.isArray(n)||(n=n.getArray()),e&&(i.forEach(hi),i.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(hi),this.featureChangeListenerKeys_={}),super.setMap(t),t){this.features_?i.push(Ai(this.features_,$A,this.handleFeatureAdd_,this),Ai(this.features_,YA,this.handleFeatureRemove_,this)):this.source_&&i.push(Ai(this.source_,oc,this.handleFeatureAdd_,this),Ai(this.source_,Ac,this.handleFeatureRemove_,this));for(const t of n)this.addFeature(t)}}snapTo(t,e,i){i.getView().getProjection();const n=Te(e),s=Re(l(a([n]),i.getView().getResolution()*this.pixelTolerance_)),r=this.rBush_.getInExtent(s),o=r.length;if(0===o)return null;let A,c,h,u=1/0,d=null;const g=this.pixelTolerance_*this.pixelTolerance_,p=()=>{if(A){const e=i.getPixelFromCoordinate(A);if(lt(t,e)<=g&&(h&&this.intersection_||!h&&(this.vertex_||this.edge_)))return{vertex:A,vertexPixel:[Math.round(e[0]),Math.round(e[1])],feature:c,segment:d}}return null};if(this.vertex_||this.intersection_){for(let t=0;t<o;++t){const e=r[t];if("Circle"!==e.feature.getGeometry().getType())for(const t of e.segment){const i=lt(n,Te(t));i<u&&(A=t,u=i,c=e.feature,h=e.isIntersection)}}const t=p();if(t)return t}if(this.edge_){for(let t=0;t<o;++t){let e=null;const i=r[t];if("Circle"===i.feature.getGeometry().getType()){e=nt(n,i.feature.getGeometry())}else{const[t,s]=i.segment;s&&(ch[0]=Te(t),ch[1]=Te(s),e=st(n,ch))}if(e){const t=lt(n,e);t<u&&(A=Me(e),d="Circle"===i.feature.getGeometry().getType()?null:i.segment,u=t,c=i.feature)}}const t=p();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}}const gh="translatestart",ph="translating",fh="translateend";class mh extends ai{constructor(t,e,i,n,s){super(t),this.features=e,this.coordinate=i,this.startCoordinate=n,this.mapBrowserEvent=s}}class _h extends qn{constructor(t){let e;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)e=t.layers;else{const i=t.layers;e=function(t){return i.includes(t)}}else e=ni;this.layerFilter_=e,this.filter_=t.filter&&!this.features_?t.filter:ni,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:Oi,this.lastFeature_=null,this.addChangeListener(Ci,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const e=this.features_||new ZA([this.lastFeature_]);return this.dispatchEvent(new mh(gh,e,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const e=this.features_||new ZA([this.lastFeature_]);return this.dispatchEvent(new mh(fh,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const e=t.coordinate;t.map.getView().getProjection();const i=Te(e),n=Te(this.lastCoordinate_),s=i[0]-n[0],r=i[1]-n[1],o=this.features_||new ZA([this.lastFeature_]);o.forEach((function(t){const e=t.getGeometry();e.translate(s,r),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new mh(ph,o,e,this.startCoordinate_,t))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,((t,e)=>{if(t instanceof cs&&this.filter_(t,e)&&(!this.features_||this.features_.getArray().includes(t)))return t}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const i=this.getActive();if((!e||!i)&&(e=e||t,e)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}}}class yh{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[e]-this.points_[i],r=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(r,s),this.initialVelocity_=Math.sqrt(s*s+r*r)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}"function"!=typeof JSON.decycle&&(JSON.decycle=function(t,e){var i=new WeakMap;return function t(n,s){var r,o;return void 0!==e&&(n=e(n)),"object"!=typeof n||null===n||n instanceof Boolean||n instanceof Date||n instanceof Number||n instanceof RegExp||n instanceof String?n:void 0!==(r=i.get(n))?{$ref:r}:(i.set(n,s),Array.isArray(n)?(o=[],n.forEach((function(e,i){o[i]=t(e,s+"["+i+"]")}))):(o={},Object.keys(n).forEach((function(e){o[e]=t(n[e],s+"["+JSON.stringify(e)+"]")}))),o)}(t,"$")}),"function"!=typeof JSON.retrocycle&&(JSON.retrocycle=function(t){var e=/^\$(?:\[(?:\d+|"(?:[^\\"\u0000-\u001f]|\\(?:[\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*")\])*$/;return function t(i){i&&"object"==typeof i&&(Array.isArray(i)?i.forEach((function(n,s){if("object"==typeof n&&null!==n){var r=n.$ref;"string"==typeof r&&e.test(r)?i[s]=Function(r):t(n)}})):Object.keys(i).forEach((function(n){var s=i[n];if("object"==typeof s&&null!==s){var r=s.$ref;"string"==typeof r&&e.test(r)?i[n]=Function(r):t(s)}})))}(t),t}),String.prototype.startsWithCapital=function(){return/^[A-Z]/.test(this)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.isDigitsOnly=function(){return null!==this.match(/^-?[0-9]+$/)},String.prototype.ellipsis=function(t){return this.length>t?`${this.substring(0,t)}...`:this},HTMLElement.prototype.slideToggle=function(t,e){0===this.clientHeight?wh(this,t,e,!0):wh(this,t,e)},HTMLElement.prototype.slideUp=function(t,e){wh(this,t,e)},HTMLElement.prototype.slideDown=function(t,e){wh(this,t,e,!0)};const wh=function(t,e,i,n){void 0===e&&(e=200),void 0===n&&(n=!1);if(0===parseFloat(window.getComputedStyle(t).getPropertyValue("height")))return;t.style.overflow="hidden",n&&(t.style.display="block");const s=window.getComputedStyle(t),r=parseFloat(s.getPropertyValue("height")),o=parseFloat(s.getPropertyValue("padding-top")),a=parseFloat(s.getPropertyValue("padding-bottom")),l=parseFloat(s.getPropertyValue("margin-top")),A=parseFloat(s.getPropertyValue("margin-bottom")),c=r/e,h=o/e,u=a/e,d=l/e,g=A/e;let p;const f=function(s){void 0===p&&(p=s);const m=s-p;n?(t.style.height=c*m+"px",t.style.paddingTop=h*m+"px",t.style.paddingBottom=u*m+"px",t.style.marginTop=d*m+"px",t.style.marginBottom=g*m+"px"):(t.style.height=r-c*m+"px",t.style.paddingTop=o-h*m+"px",t.style.paddingBottom=a-u*m+"px",t.style.marginTop=l-d*m+"px",t.style.marginBottom=A-g*m+"px"),m>=e?(t.style.height="",t.style.paddingTop="",t.style.paddingBottom="",t.style.marginTop="",t.style.marginBottom="",t.style.overflow="",n||(t.style.display="none"),i instanceof Function&&i(!n)):window.requestAnimationFrame(f)};window.requestAnimationFrame(f)};var vh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function bh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ch,xh={exports:{}};var Bh,Eh,Sh=(Ch||(Ch=1,Bh=xh,Eh=xh.exports,function(){var t,e="Expected a function",i="__lodash_hash_undefined__",n="__lodash_placeholder__",s=32,r=128,o=256,a=1/0,l=9007199254740991,A=NaN,c=4294967295,h=[["ary",r],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",o]],u="[object Arguments]",d="[object Array]",g="[object Boolean]",p="[object Date]",f="[object Error]",m="[object Function]",_="[object GeneratorFunction]",y="[object Map]",w="[object Number]",v="[object Object]",b="[object Promise]",C="[object RegExp]",x="[object Set]",B="[object String]",E="[object Symbol]",S="[object WeakMap]",F="[object ArrayBuffer]",I="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",T="[object Int8Array]",R="[object Int16Array]",k="[object Int32Array]",U="[object Uint8Array]",D="[object Uint8ClampedArray]",O="[object Uint16Array]",P="[object Uint32Array]",N=/\b__p \+= '';/g,Q=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,z=RegExp(G.source),K=RegExp(V.source),j=/<%-([\s\S]+?)%>/g,W=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,J=RegExp(Z.source),tt=/^\s+/,et=/\s/,it=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nt=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ot=/[()=,{}\[\]\/\s]/,at=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,ct=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,ut=/^\[object .+?Constructor\]$/,dt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,pt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ft=/($^)/,mt=/['\n\r\u2028\u2029\\]/g,_t="\\ud800-\\udfff",yt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="\\u2700-\\u27bf",vt="a-z\\xdf-\\xf6\\xf8-\\xff",bt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",xt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bt="['’]",Et="["+_t+"]",St="["+xt+"]",Ft="["+yt+"]",It="\\d+",Lt="["+wt+"]",Mt="["+vt+"]",Tt="[^"+_t+xt+It+wt+vt+bt+"]",Rt="\\ud83c[\\udffb-\\udfff]",kt="[^"+_t+"]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+bt+"]",Pt="\\u200d",Nt="(?:"+Mt+"|"+Tt+")",Qt="(?:"+Ot+"|"+Tt+")",Ht="(?:['’](?:d|ll|m|re|s|t|ve))?",Gt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+Ft+"|"+Rt+")?",zt="["+Ct+"]?",Kt=zt+Vt+"(?:"+Pt+"(?:"+[kt,Ut,Dt].join("|")+")"+zt+Vt+")*",jt="(?:"+[Lt,Ut,Dt].join("|")+")"+Kt,Wt="(?:"+[kt+Ft+"?",Ft,Ut,Dt,Et].join("|")+")",$t=RegExp(Bt,"g"),Yt=RegExp(Ft,"g"),Xt=RegExp(Rt+"(?="+Rt+")|"+Wt+Kt,"g"),qt=RegExp([Ot+"?"+Mt+"+"+Ht+"(?="+[St,Ot,"$"].join("|")+")",Qt+"+"+Gt+"(?="+[St,Ot+Nt,"$"].join("|")+")",Ot+"?"+Nt+"+"+Ht,Ot+"+"+Gt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It,jt].join("|"),"g"),Zt=RegExp("["+Pt+_t+yt+Ct+"]"),Jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,te=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ee=-1,ie={};ie[L]=ie[M]=ie[T]=ie[R]=ie[k]=ie[U]=ie[D]=ie[O]=ie[P]=!0,ie[u]=ie[d]=ie[F]=ie[g]=ie[I]=ie[p]=ie[f]=ie[m]=ie[y]=ie[w]=ie[v]=ie[C]=ie[x]=ie[B]=ie[S]=!1;var ne={};ne[u]=ne[d]=ne[F]=ne[I]=ne[g]=ne[p]=ne[L]=ne[M]=ne[T]=ne[R]=ne[k]=ne[y]=ne[w]=ne[v]=ne[C]=ne[x]=ne[B]=ne[E]=ne[U]=ne[D]=ne[O]=ne[P]=!0,ne[f]=ne[m]=ne[S]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},re=parseFloat,oe=parseInt,ae="object"==typeof vh&&vh&&vh.Object===Object&&vh,le="object"==typeof self&&self&&self.Object===Object&&self,Ae=ae||le||Function("return this")(),ce=Eh&&!Eh.nodeType&&Eh,he=ce&&Bh&&!Bh.nodeType&&Bh,ue=he&&he.exports===ce,de=ue&&ae.process,ge=function(){try{var t=he&&he.require&&he.require("util").types;return t||de&&de.binding&&de.binding("util")}catch(t){}}(),pe=ge&&ge.isArrayBuffer,fe=ge&&ge.isDate,me=ge&&ge.isMap,_e=ge&&ge.isRegExp,ye=ge&&ge.isSet,we=ge&&ge.isTypedArray;function ve(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function be(t,e,i,n){for(var s=-1,r=null==t?0:t.length;++s<r;){var o=t[s];e(n,o,i(o),t)}return n}function Ce(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function xe(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function Be(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function Ee(t,e){for(var i=-1,n=null==t?0:t.length,s=0,r=[];++i<n;){var o=t[i];e(o,i,t)&&(r[s++]=o)}return r}function Se(t,e){return!(null==t||!t.length)&&Oe(t,e,0)>-1}function Fe(t,e,i){for(var n=-1,s=null==t?0:t.length;++n<s;)if(i(e,t[n]))return!0;return!1}function Ie(t,e){for(var i=-1,n=null==t?0:t.length,s=Array(n);++i<n;)s[i]=e(t[i],i,t);return s}function Le(t,e){for(var i=-1,n=e.length,s=t.length;++i<n;)t[s+i]=e[i];return t}function Me(t,e,i,n){var s=-1,r=null==t?0:t.length;for(n&&r&&(i=t[++s]);++s<r;)i=e(i,t[s],s,t);return i}function Te(t,e,i,n){var s=null==t?0:t.length;for(n&&s&&(i=t[--s]);s--;)i=e(i,t[s],s,t);return i}function Re(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var ke=He("length");function Ue(t,e,i){var n;return i(t,(function(t,i,s){if(e(t,i,s))return n=i,!1})),n}function De(t,e,i,n){for(var s=t.length,r=i+(n?1:-1);n?r--:++r<s;)if(e(t[r],r,t))return r;return-1}function Oe(t,e,i){return e==e?function(t,e,i){for(var n=i-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}(t,e,i):De(t,Ne,i)}function Pe(t,e,i,n){for(var s=i-1,r=t.length;++s<r;)if(n(t[s],e))return s;return-1}function Ne(t){return t!=t}function Qe(t,e){var i=null==t?0:t.length;return i?ze(t,e)/i:A}function He(e){return function(i){return null==i?t:i[e]}}function Ge(e){return function(i){return null==e?t:e[i]}}function Ve(t,e,i,n,s){return s(t,(function(t,s,r){i=n?(n=!1,t):e(i,t,s,r)})),i}function ze(e,i){for(var n,s=-1,r=e.length;++s<r;){var o=i(e[s]);o!==t&&(n=n===t?o:n+o)}return n}function Ke(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function je(t){return t?t.slice(0,Ai(t)+1).replace(tt,""):t}function We(t){return function(e){return t(e)}}function $e(t,e){return Ie(e,(function(e){return t[e]}))}function Ye(t,e){return t.has(e)}function Xe(t,e){for(var i=-1,n=t.length;++i<n&&Oe(e,t[i],0)>-1;);return i}function qe(t,e){for(var i=t.length;i--&&Oe(e,t[i],0)>-1;);return i}var Ze=Ge({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Je=Ge({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ti(t){return"\\"+se[t]}function ei(t){return Zt.test(t)}function ii(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function ni(t,e){return function(i){return t(e(i))}}function si(t,e){for(var i=-1,s=t.length,r=0,o=[];++i<s;){var a=t[i];a!==e&&a!==n||(t[i]=n,o[r++]=i)}return o}function ri(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function oi(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}function ai(t){return ei(t)?function(t){for(var e=Xt.lastIndex=0;Xt.test(t);)++e;return e}(t):ke(t)}function li(t){return ei(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.split("")}(t)}function Ai(t){for(var e=t.length;e--&&et.test(t.charAt(e)););return e}var ci=Ge({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hi=function et(_t){var yt,wt=(_t=null==_t?Ae:hi.defaults(Ae.Object(),_t,hi.pick(Ae,te))).Array,vt=_t.Date,bt=_t.Error,Ct=_t.Function,xt=_t.Math,Bt=_t.Object,Et=_t.RegExp,St=_t.String,Ft=_t.TypeError,It=wt.prototype,Lt=Ct.prototype,Mt=Bt.prototype,Tt=_t["__core-js_shared__"],Rt=Lt.toString,kt=Mt.hasOwnProperty,Ut=0,Dt=(yt=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Ot=Mt.toString,Pt=Rt.call(Bt),Nt=Ae._,Qt=Et("^"+Rt.call(kt).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ue?_t.Buffer:t,Gt=_t.Symbol,Vt=_t.Uint8Array,zt=Ht?Ht.allocUnsafe:t,Kt=ni(Bt.getPrototypeOf,Bt),jt=Bt.create,Wt=Mt.propertyIsEnumerable,Xt=It.splice,Zt=Gt?Gt.isConcatSpreadable:t,se=Gt?Gt.iterator:t,ae=Gt?Gt.toStringTag:t,le=function(){try{var t=cr(Bt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ce=_t.clearTimeout!==Ae.clearTimeout&&_t.clearTimeout,he=vt&&vt.now!==Ae.Date.now&&vt.now,de=_t.setTimeout!==Ae.setTimeout&&_t.setTimeout,ge=xt.ceil,ke=xt.floor,Ge=Bt.getOwnPropertySymbols,ui=Ht?Ht.isBuffer:t,di=_t.isFinite,gi=It.join,pi=ni(Bt.keys,Bt),fi=xt.max,mi=xt.min,_i=vt.now,yi=_t.parseInt,wi=xt.random,vi=It.reverse,bi=cr(_t,"DataView"),Ci=cr(_t,"Map"),xi=cr(_t,"Promise"),Bi=cr(_t,"Set"),Ei=cr(_t,"WeakMap"),Si=cr(Bt,"create"),Fi=Ei&&new Ei,Ii={},Li=Dr(bi),Mi=Dr(Ci),Ti=Dr(xi),Ri=Dr(Bi),ki=Dr(Ei),Ui=Gt?Gt.prototype:t,Di=Ui?Ui.valueOf:t,Oi=Ui?Ui.toString:t;function Pi(t){if(ta(t)&&!Vo(t)&&!(t instanceof Gi)){if(t instanceof Hi)return t;if(kt.call(t,"__wrapped__"))return Or(t)}return new Hi(t)}var Ni=function(){function e(){}return function(i){if(!Jo(i))return{};if(jt)return jt(i);e.prototype=i;var n=new e;return e.prototype=t,n}}();function Qi(){}function Hi(e,i){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=t}function Gi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function Vi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function zi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ki(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function ji(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Ki;++e<i;)this.add(t[e])}function Wi(t){var e=this.__data__=new zi(t);this.size=e.size}function $i(t,e){var i=Vo(t),n=!i&&Go(t),s=!i&&!n&&Wo(t),r=!i&&!n&&!s&&la(t),o=i||n||s||r,a=o?Ke(t.length,St):[],l=a.length;for(var A in t)!e&&!kt.call(t,A)||o&&("length"==A||s&&("offset"==A||"parent"==A)||r&&("buffer"==A||"byteLength"==A||"byteOffset"==A)||mr(A,l))||a.push(A);return a}function Yi(e){var i=e.length;return i?e[Wn(0,i-1)]:t}function Xi(t,e){return Rr(Fs(t),on(e,0,t.length))}function qi(t){return Rr(Fs(t))}function Zi(e,i,n){(n!==t&&!No(e[i],n)||n===t&&!(i in e))&&sn(e,i,n)}function Ji(e,i,n){var s=e[i];kt.call(e,i)&&No(s,n)&&(n!==t||i in e)||sn(e,i,n)}function tn(t,e){for(var i=t.length;i--;)if(No(t[i][0],e))return i;return-1}function en(t,e,i,n){return hn(t,(function(t,s,r){e(n,t,i(t),r)})),n}function nn(t,e){return t&&Is(e,La(e),t)}function sn(t,e,i){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function rn(e,i){for(var n=-1,s=i.length,r=wt(s),o=null==e;++n<s;)r[n]=o?t:Ba(e,i[n]);return r}function on(e,i,n){return e==e&&(n!==t&&(e=e<=n?e:n),i!==t&&(e=e>=i?e:i)),e}function an(e,i,n,s,r,o){var a,l=1&i,A=2&i,c=4&i;if(n&&(a=r?n(e,s,r,o):n(e)),a!==t)return a;if(!Jo(e))return e;var h=Vo(e);if(h){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&kt.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(e),!l)return Fs(e,a)}else{var d=dr(e),f=d==m||d==_;if(Wo(e))return bs(e,l);if(d==v||d==u||f&&!r){if(a=A||f?{}:pr(e),!l)return A?function(t,e){return Is(t,ur(t),e)}(e,function(t,e){return t&&Is(e,Ma(e),t)}(a,e)):function(t,e){return Is(t,hr(t),e)}(e,nn(a,e))}else{if(!ne[d])return r?e:{};a=function(t,e,i){var n,s=t.constructor;switch(e){case F:return Cs(t);case g:case p:return new s(+t);case I:return function(t,e){var i=e?Cs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case L:case M:case T:case R:case k:case U:case D:case O:case P:return xs(t,i);case y:return new s;case w:case B:return new s(t);case C:return function(t){var e=new t.constructor(t.source,At.exec(t));return e.lastIndex=t.lastIndex,e}(t);case x:return new s;case E:return n=t,Di?Bt(Di.call(n)):{}}}(e,d,l)}}o||(o=new Wi);var b=o.get(e);if(b)return b;o.set(e,a),ra(e)?e.forEach((function(t){a.add(an(t,i,n,t,e,o))})):ea(e)&&e.forEach((function(t,s){a.set(s,an(t,i,n,s,e,o))}));var S=h?t:(c?A?nr:ir:A?Ma:La)(e);return Ce(S||e,(function(t,s){S&&(t=e[s=t]),Ji(a,s,an(t,i,n,s,e,o))})),a}function ln(e,i,n){var s=n.length;if(null==e)return!s;for(e=Bt(e);s--;){var r=n[s],o=i[r],a=e[r];if(a===t&&!(r in e)||!o(a))return!1}return!0}function An(i,n,s){if("function"!=typeof i)throw new Ft(e);return Ir((function(){i.apply(t,s)}),n)}function cn(t,e,i,n){var s=-1,r=Se,o=!0,a=t.length,l=[],A=e.length;if(!a)return l;i&&(e=Ie(e,We(i))),n?(r=Fe,o=!1):e.length>=200&&(r=Ye,o=!1,e=new ji(e));t:for(;++s<a;){var c=t[s],h=null==i?c:i(c);if(c=n||0!==c?c:0,o&&h==h){for(var u=A;u--;)if(e[u]===h)continue t;l.push(c)}else r(e,h,n)||l.push(c)}return l}Pi.templateSettings={escape:j,evaluate:W,interpolate:$,variable:"",imports:{_:Pi}},Pi.prototype=Qi.prototype,Pi.prototype.constructor=Pi,Hi.prototype=Ni(Qi.prototype),Hi.prototype.constructor=Hi,Gi.prototype=Ni(Qi.prototype),Gi.prototype.constructor=Gi,Vi.prototype.clear=function(){this.__data__=Si?Si(null):{},this.size=0},Vi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vi.prototype.get=function(e){var n=this.__data__;if(Si){var s=n[e];return s===i?t:s}return kt.call(n,e)?n[e]:t},Vi.prototype.has=function(e){var i=this.__data__;return Si?i[e]!==t:kt.call(i,e)},Vi.prototype.set=function(e,n){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Si&&n===t?i:n,this},zi.prototype.clear=function(){this.__data__=[],this.size=0},zi.prototype.delete=function(t){var e=this.__data__,i=tn(e,t);return!(i<0||(i==e.length-1?e.pop():Xt.call(e,i,1),--this.size,0))},zi.prototype.get=function(e){var i=this.__data__,n=tn(i,e);return n<0?t:i[n][1]},zi.prototype.has=function(t){return tn(this.__data__,t)>-1},zi.prototype.set=function(t,e){var i=this.__data__,n=tn(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},Ki.prototype.clear=function(){this.size=0,this.__data__={hash:new Vi,map:new(Ci||zi),string:new Vi}},Ki.prototype.delete=function(t){var e=lr(this,t).delete(t);return this.size-=e?1:0,e},Ki.prototype.get=function(t){return lr(this,t).get(t)},Ki.prototype.has=function(t){return lr(this,t).has(t)},Ki.prototype.set=function(t,e){var i=lr(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},ji.prototype.add=ji.prototype.push=function(t){return this.__data__.set(t,i),this},ji.prototype.has=function(t){return this.__data__.has(t)},Wi.prototype.clear=function(){this.__data__=new zi,this.size=0},Wi.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Wi.prototype.get=function(t){return this.__data__.get(t)},Wi.prototype.has=function(t){return this.__data__.has(t)},Wi.prototype.set=function(t,e){var i=this.__data__;if(i instanceof zi){var n=i.__data__;if(!Ci||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Ki(n)}return i.set(t,e),this.size=i.size,this};var hn=Ts(yn),un=Ts(wn,!0);function dn(t,e){var i=!0;return hn(t,(function(t,n,s){return i=!!e(t,n,s)})),i}function gn(e,i,n){for(var s=-1,r=e.length;++s<r;){var o=e[s],a=i(o);if(null!=a&&(l===t?a==a&&!aa(a):n(a,l)))var l=a,A=o}return A}function pn(t,e){var i=[];return hn(t,(function(t,n,s){e(t,n,s)&&i.push(t)})),i}function fn(t,e,i,n,s){var r=-1,o=t.length;for(i||(i=fr),s||(s=[]);++r<o;){var a=t[r];e>0&&i(a)?e>1?fn(a,e-1,i,n,s):Le(s,a):n||(s[s.length]=a)}return s}var mn=Rs(),_n=Rs(!0);function yn(t,e){return t&&mn(t,e,La)}function wn(t,e){return t&&_n(t,e,La)}function vn(t,e){return Ee(e,(function(e){return Xo(t[e])}))}function bn(e,i){for(var n=0,s=(i=_s(i,e)).length;null!=e&&n<s;)e=e[Ur(i[n++])];return n&&n==s?e:t}function Cn(t,e,i){var n=e(t);return Vo(t)?n:Le(n,i(t))}function xn(e){return null==e?e===t?"[object Undefined]":"[object Null]":ae&&ae in Bt(e)?function(e){var i=kt.call(e,ae),n=e[ae];try{e[ae]=t;var s=!0}catch(t){}var r=Ot.call(e);return s&&(i?e[ae]=n:delete e[ae]),r}(e):function(t){return Ot.call(t)}(e)}function Bn(t,e){return t>e}function En(t,e){return null!=t&&kt.call(t,e)}function Sn(t,e){return null!=t&&e in Bt(t)}function Fn(e,i,n){for(var s=n?Fe:Se,r=e[0].length,o=e.length,a=o,l=wt(o),A=1/0,c=[];a--;){var h=e[a];a&&i&&(h=Ie(h,We(i))),A=mi(h.length,A),l[a]=!n&&(i||r>=120&&h.length>=120)?new ji(a&&h):t}h=e[0];var u=-1,d=l[0];t:for(;++u<r&&c.length<A;){var g=h[u],p=i?i(g):g;if(g=n||0!==g?g:0,!(d?Ye(d,p):s(c,p,n))){for(a=o;--a;){var f=l[a];if(!(f?Ye(f,p):s(e[a],p,n)))continue t}d&&d.push(p),c.push(g)}}return c}function In(e,i,n){var s=null==(e=Er(e,i=_s(i,e)))?e:e[Ur($r(i))];return null==s?t:ve(s,e,n)}function Ln(t){return ta(t)&&xn(t)==u}function Mn(e,i,n,s,r){return e===i||(null==e||null==i||!ta(e)&&!ta(i)?e!=e&&i!=i:function(e,i,n,s,r,o){var a=Vo(e),l=Vo(i),A=a?d:dr(e),c=l?d:dr(i),h=(A=A==u?v:A)==v,m=(c=c==u?v:c)==v,_=A==c;if(_&&Wo(e)){if(!Wo(i))return!1;a=!0,h=!1}if(_&&!h)return o||(o=new Wi),a||la(e)?tr(e,i,n,s,r,o):function(t,e,i,n,s,r,o){switch(i){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case F:return!(t.byteLength!=e.byteLength||!r(new Vt(t),new Vt(e)));case g:case p:case w:return No(+t,+e);case f:return t.name==e.name&&t.message==e.message;case C:case B:return t==e+"";case y:var a=ii;case x:var l=1&n;if(a||(a=ri),t.size!=e.size&&!l)return!1;var A=o.get(t);if(A)return A==e;n|=2,o.set(t,e);var c=tr(a(t),a(e),n,s,r,o);return o.delete(t),c;case E:if(Di)return Di.call(t)==Di.call(e)}return!1}(e,i,A,n,s,r,o);if(!(1&n)){var b=h&&kt.call(e,"__wrapped__"),S=m&&kt.call(i,"__wrapped__");if(b||S){var L=b?e.value():e,M=S?i.value():i;return o||(o=new Wi),r(L,M,n,s,o)}}return!!_&&(o||(o=new Wi),function(e,i,n,s,r,o){var a=1&n,l=ir(e),A=l.length,c=ir(i),h=c.length;if(A!=h&&!a)return!1;for(var u=A;u--;){var d=l[u];if(!(a?d in i:kt.call(i,d)))return!1}var g=o.get(e),p=o.get(i);if(g&&p)return g==i&&p==e;var f=!0;o.set(e,i),o.set(i,e);for(var m=a;++u<A;){var _=e[d=l[u]],y=i[d];if(s)var w=a?s(y,_,d,i,e,o):s(_,y,d,e,i,o);if(!(w===t?_===y||r(_,y,n,s,o):w)){f=!1;break}m||(m="constructor"==d)}if(f&&!m){var v=e.constructor,b=i.constructor;v==b||!("constructor"in e)||!("constructor"in i)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(i),f}(e,i,n,s,r,o))}(e,i,n,s,Mn,r))}function Tn(e,i,n,s){var r=n.length,o=r,a=!s;if(null==e)return!o;for(e=Bt(e);r--;){var l=n[r];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<o;){var A=(l=n[r])[0],c=e[A],h=l[1];if(a&&l[2]){if(c===t&&!(A in e))return!1}else{var u=new Wi;if(s)var d=s(c,h,A,e,i,u);if(!(d===t?Mn(h,c,3,s,u):d))return!1}}return!0}function Rn(t){return!(!Jo(t)||(e=t,Dt&&Dt in e))&&(Xo(t)?Qt:ut).test(Dr(t));var e}function kn(t){return"function"==typeof t?t:null==t?il:"object"==typeof t?Vo(t)?Qn(t[0],t[1]):Nn(t):hl(t)}function Un(t){if(!br(t))return pi(t);var e=[];for(var i in Bt(t))kt.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Dn(t){if(!Jo(t))return function(t){var e=[];if(null!=t)for(var i in Bt(t))e.push(i);return e}(t);var e=br(t),i=[];for(var n in t)("constructor"!=n||!e&&kt.call(t,n))&&i.push(n);return i}function On(t,e){return t<e}function Pn(t,e){var i=-1,n=Ko(t)?wt(t.length):[];return hn(t,(function(t,s,r){n[++i]=e(t,s,r)})),n}function Nn(t){var e=Ar(t);return 1==e.length&&e[0][2]?xr(e[0][0],e[0][1]):function(i){return i===t||Tn(i,t,e)}}function Qn(e,i){return yr(e)&&Cr(i)?xr(Ur(e),i):function(n){var s=Ba(n,e);return s===t&&s===i?Ea(n,e):Mn(i,s,3)}}function Hn(e,i,n,s,r){e!==i&&mn(i,(function(o,a){if(r||(r=new Wi),Jo(o))!function(e,i,n,s,r,o,a){var l=Sr(e,n),A=Sr(i,n),c=a.get(A);if(c)Zi(e,n,c);else{var h=o?o(l,A,n+"",e,i,a):t,u=h===t;if(u){var d=Vo(A),g=!d&&Wo(A),p=!d&&!g&&la(A);h=A,d||g||p?Vo(l)?h=l:jo(l)?h=Fs(l):g?(u=!1,h=bs(A,!0)):p?(u=!1,h=xs(A,!0)):h=[]:na(A)||Go(A)?(h=l,Go(l)?h=fa(l):Jo(l)&&!Xo(l)||(h=pr(A))):u=!1}u&&(a.set(A,h),r(h,A,s,o,a),a.delete(A)),Zi(e,n,h)}}(e,i,a,n,Hn,s,r);else{var l=s?s(Sr(e,a),o,a+"",e,i,r):t;l===t&&(l=o),Zi(e,a,l)}}),Ma)}function Gn(e,i){var n=e.length;if(n)return mr(i+=i<0?n:0,n)?e[i]:t}function Vn(t,e,i){e=e.length?Ie(e,(function(t){return Vo(t)?function(e){return bn(e,1===t.length?t[0]:t)}:t})):[il];var n=-1;e=Ie(e,We(ar()));var s=Pn(t,(function(t,i,s){var r=Ie(e,(function(e){return e(t)}));return{criteria:r,index:++n,value:t}}));return function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(s,(function(t,e){return function(t,e,i){for(var n=-1,s=t.criteria,r=e.criteria,o=s.length,a=i.length;++n<o;){var l=Bs(s[n],r[n]);if(l)return n>=a?l:l*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}))}function zn(t,e,i){for(var n=-1,s=e.length,r={};++n<s;){var o=e[n],a=bn(t,o);i(a,o)&&Zn(r,_s(o,t),a)}return r}function Kn(t,e,i,n){var s=n?Pe:Oe,r=-1,o=e.length,a=t;for(t===e&&(e=Fs(e)),i&&(a=Ie(t,We(i)));++r<o;)for(var l=0,A=e[r],c=i?i(A):A;(l=s(a,c,l,n))>-1;)a!==t&&Xt.call(a,l,1),Xt.call(t,l,1);return t}function jn(t,e){for(var i=t?e.length:0,n=i-1;i--;){var s=e[i];if(i==n||s!==r){var r=s;mr(s)?Xt.call(t,s,1):cs(t,s)}}return t}function Wn(t,e){return t+ke(wi()*(e-t+1))}function $n(t,e){var i="";if(!t||e<1||e>l)return i;do{e%2&&(i+=t),(e=ke(e/2))&&(t+=t)}while(e);return i}function Yn(t,e){return Lr(Br(t,e,il),t+"")}function Xn(t){return Yi(Na(t))}function qn(t,e){var i=Na(t);return Rr(i,on(e,0,i.length))}function Zn(e,i,n,s){if(!Jo(e))return e;for(var r=-1,o=(i=_s(i,e)).length,a=o-1,l=e;null!=l&&++r<o;){var A=Ur(i[r]),c=n;if("__proto__"===A||"constructor"===A||"prototype"===A)return e;if(r!=a){var h=l[A];(c=s?s(h,A,l):t)===t&&(c=Jo(h)?h:mr(i[r+1])?[]:{})}Ji(l,A,c),l=l[A]}return e}var Jn=Fi?function(t,e){return Fi.set(t,e),t}:il,ts=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:Ja(e),writable:!0})}:il;function es(t){return Rr(Na(t))}function is(t,e,i){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(i=i>s?s:i)<0&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0;for(var r=wt(s);++n<s;)r[n]=t[n+e];return r}function ns(t,e){var i;return hn(t,(function(t,n,s){return!(i=e(t,n,s))})),!!i}function ss(t,e,i){var n=0,s=null==t?n:t.length;if("number"==typeof e&&e==e&&s<=2147483647){for(;n<s;){var r=n+s>>>1,o=t[r];null!==o&&!aa(o)&&(i?o<=e:o<e)?n=r+1:s=r}return s}return rs(t,e,il,i)}function rs(e,i,n,s){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(i=n(i))!=i,l=null===i,A=aa(i),c=i===t;r<o;){var h=ke((r+o)/2),u=n(e[h]),d=u!==t,g=null===u,p=u==u,f=aa(u);if(a)var m=s||p;else m=c?p&&(s||d):l?p&&d&&(s||!g):A?p&&d&&!g&&(s||!f):!g&&!f&&(s?u<=i:u<i);m?r=h+1:o=h}return mi(o,4294967294)}function os(t,e){for(var i=-1,n=t.length,s=0,r=[];++i<n;){var o=t[i],a=e?e(o):o;if(!i||!No(a,l)){var l=a;r[s++]=0===o?0:o}}return r}function as(t){return"number"==typeof t?t:aa(t)?A:+t}function ls(t){if("string"==typeof t)return t;if(Vo(t))return Ie(t,ls)+"";if(aa(t))return Oi?Oi.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function As(t,e,i){var n=-1,s=Se,r=t.length,o=!0,a=[],l=a;if(i)o=!1,s=Fe;else if(r>=200){var A=e?null:$s(t);if(A)return ri(A);o=!1,s=Ye,l=new ji}else l=e?[]:a;t:for(;++n<r;){var c=t[n],h=e?e(c):c;if(c=i||0!==c?c:0,o&&h==h){for(var u=l.length;u--;)if(l[u]===h)continue t;e&&l.push(h),a.push(c)}else s(l,h,i)||(l!==a&&l.push(h),a.push(c))}return a}function cs(t,e){return null==(t=Er(t,e=_s(e,t)))||delete t[Ur($r(e))]}function hs(t,e,i,n){return Zn(t,e,i(bn(t,e)),n)}function us(t,e,i,n){for(var s=t.length,r=n?s:-1;(n?r--:++r<s)&&e(t[r],r,t););return i?is(t,n?0:r,n?r+1:s):is(t,n?r+1:0,n?s:r)}function ds(t,e){var i=t;return i instanceof Gi&&(i=i.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Le([t],e.args))}),i)}function gs(t,e,i){var n=t.length;if(n<2)return n?As(t[0]):[];for(var s=-1,r=wt(n);++s<n;)for(var o=t[s],a=-1;++a<n;)a!=s&&(r[s]=cn(r[s]||o,t[a],e,i));return As(fn(r,1),e,i)}function ps(e,i,n){for(var s=-1,r=e.length,o=i.length,a={};++s<r;){var l=s<o?i[s]:t;n(a,e[s],l)}return a}function fs(t){return jo(t)?t:[]}function ms(t){return"function"==typeof t?t:il}function _s(t,e){return Vo(t)?t:yr(t,e)?[t]:kr(ma(t))}var ys=Yn;function ws(e,i,n){var s=e.length;return n=n===t?s:n,!i&&n>=s?e:is(e,i,n)}var vs=ce||function(t){return Ae.clearTimeout(t)};function bs(t,e){if(e)return t.slice();var i=t.length,n=zt?zt(i):new t.constructor(i);return t.copy(n),n}function Cs(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function xs(t,e){var i=e?Cs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Bs(e,i){if(e!==i){var n=e!==t,s=null===e,r=e==e,o=aa(e),a=i!==t,l=null===i,A=i==i,c=aa(i);if(!l&&!c&&!o&&e>i||o&&a&&A&&!l&&!c||s&&a&&A||!n&&A||!r)return 1;if(!s&&!o&&!c&&e<i||c&&n&&r&&!s&&!o||l&&n&&r||!a&&r||!A)return-1}return 0}function Es(t,e,i,n){for(var s=-1,r=t.length,o=i.length,a=-1,l=e.length,A=fi(r-o,0),c=wt(l+A),h=!n;++a<l;)c[a]=e[a];for(;++s<o;)(h||s<r)&&(c[i[s]]=t[s]);for(;A--;)c[a++]=t[s++];return c}function Ss(t,e,i,n){for(var s=-1,r=t.length,o=-1,a=i.length,l=-1,A=e.length,c=fi(r-a,0),h=wt(c+A),u=!n;++s<c;)h[s]=t[s];for(var d=s;++l<A;)h[d+l]=e[l];for(;++o<a;)(u||s<r)&&(h[d+i[o]]=t[s++]);return h}function Fs(t,e){var i=-1,n=t.length;for(e||(e=wt(n));++i<n;)e[i]=t[i];return e}function Is(e,i,n,s){var r=!n;n||(n={});for(var o=-1,a=i.length;++o<a;){var l=i[o],A=s?s(n[l],e[l],l,n,e):t;A===t&&(A=e[l]),r?sn(n,l,A):Ji(n,l,A)}return n}function Ls(t,e){return function(i,n){var s=Vo(i)?be:en,r=e?e():{};return s(i,t,ar(n,2),r)}}function Ms(e){return Yn((function(i,n){var s=-1,r=n.length,o=r>1?n[r-1]:t,a=r>2?n[2]:t;for(o=e.length>3&&"function"==typeof o?(r--,o):t,a&&_r(n[0],n[1],a)&&(o=r<3?t:o,r=1),i=Bt(i);++s<r;){var l=n[s];l&&e(i,l,s,o)}return i}))}function Ts(t,e){return function(i,n){if(null==i)return i;if(!Ko(i))return t(i,n);for(var s=i.length,r=e?s:-1,o=Bt(i);(e?r--:++r<s)&&!1!==n(o[r],r,o););return i}}function Rs(t){return function(e,i,n){for(var s=-1,r=Bt(e),o=n(e),a=o.length;a--;){var l=o[t?a:++s];if(!1===i(r[l],l,r))break}return e}}function ks(e){return function(i){var n=ei(i=ma(i))?li(i):t,s=n?n[0]:i.charAt(0),r=n?ws(n,1).join(""):i.slice(1);return s[e]()+r}}function Us(t){return function(e){return Me(Xa(Ga(e).replace($t,"")),t,"")}}function Ds(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ni(t.prototype),n=t.apply(i,e);return Jo(n)?n:i}}function Os(e){return function(i,n,s){var r=Bt(i);if(!Ko(i)){var o=ar(n,3);i=La(i),n=function(t){return o(r[t],t,r)}}var a=e(i,n,s);return a>-1?r[o?i[a]:a]:t}}function Ps(i){return er((function(n){var s=n.length,r=s,o=Hi.prototype.thru;for(i&&n.reverse();r--;){var a=n[r];if("function"!=typeof a)throw new Ft(e);if(o&&!l&&"wrapper"==rr(a))var l=new Hi([],!0)}for(r=l?r:s;++r<s;){var A=rr(a=n[r]),c="wrapper"==A?sr(a):t;l=c&&wr(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[rr(c[0])].apply(l,c[3]):1==a.length&&wr(a)?l[A]():l.thru(a)}return function(){var t=arguments,e=t[0];if(l&&1==t.length&&Vo(e))return l.plant(e).value();for(var i=0,r=s?n[i].apply(this,t):e;++i<s;)r=n[i].call(this,r);return r}}))}function Ns(e,i,n,s,o,a,l,A,c,h){var u=i&r,d=1&i,g=2&i,p=24&i,f=512&i,m=g?t:Ds(e);return function r(){for(var _=arguments.length,y=wt(_),w=_;w--;)y[w]=arguments[w];if(p)var v=or(r),b=function(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}(y,v);if(s&&(y=Es(y,s,o,p)),a&&(y=Ss(y,a,l,p)),_-=b,p&&_<h){var C=si(y,v);return js(e,i,Ns,r.placeholder,n,y,C,A,c,h-_)}var x=d?n:this,B=g?x[e]:e;return _=y.length,A?y=function(e,i){for(var n=e.length,s=mi(i.length,n),r=Fs(e);s--;){var o=i[s];e[s]=mr(o,n)?r[o]:t}return e}(y,A):f&&_>1&&y.reverse(),u&&c<_&&(y.length=c),this&&this!==Ae&&this instanceof r&&(B=m||Ds(B)),B.apply(x,y)}}function Qs(t,e){return function(i,n){return function(t,e,i,n){return yn(t,(function(t,s,r){e(n,i(t),s,r)})),n}(i,t,e(n),{})}}function Hs(e,i){return function(n,s){var r;if(n===t&&s===t)return i;if(n!==t&&(r=n),s!==t){if(r===t)return s;"string"==typeof n||"string"==typeof s?(n=ls(n),s=ls(s)):(n=as(n),s=as(s)),r=e(n,s)}return r}}function Gs(t){return er((function(e){return e=Ie(e,We(ar())),Yn((function(i){var n=this;return t(e,(function(t){return ve(t,n,i)}))}))}))}function Vs(e,i){var n=(i=i===t?" ":ls(i)).length;if(n<2)return n?$n(i,e):i;var s=$n(i,ge(e/ai(i)));return ei(i)?ws(li(s),0,e).join(""):s.slice(0,e)}function zs(e){return function(i,n,s){return s&&"number"!=typeof s&&_r(i,n,s)&&(n=s=t),i=ua(i),n===t?(n=i,i=0):n=ua(n),function(t,e,i,n){for(var s=-1,r=fi(ge((e-t)/(i||1)),0),o=wt(r);r--;)o[n?r:++s]=t,t+=i;return o}(i,n,s=s===t?i<n?1:-1:ua(s),e)}}function Ks(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=pa(e),i=pa(i)),t(e,i)}}function js(e,i,n,r,o,a,l,A,c,h){var u=8&i;i|=u?s:64,4&(i&=~(u?64:s))||(i&=-4);var d=[e,i,o,u?a:t,u?l:t,u?t:a,u?t:l,A,c,h],g=n.apply(t,d);return wr(e)&&Fr(g,d),g.placeholder=r,Mr(g,e,i)}function Ws(t){var e=xt[t];return function(t,i){if(t=pa(t),(i=null==i?0:mi(da(i),292))&&di(t)){var n=(ma(t)+"e").split("e");return+((n=(ma(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}var $s=Bi&&1/ri(new Bi([,-0]))[1]==a?function(t){return new Bi(t)}:al;function Ys(t){return function(e){var i=dr(e);return i==y?ii(e):i==x?oi(e):function(t,e){return Ie(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xs(i,a,l,A,c,h,u,d){var g=2&a;if(!g&&"function"!=typeof i)throw new Ft(e);var p=A?A.length:0;if(p||(a&=-97,A=c=t),u=u===t?u:fi(da(u),0),d=d===t?d:da(d),p-=c?c.length:0,64&a){var f=A,m=c;A=c=t}var _=g?t:sr(i),y=[i,a,l,A,c,f,m,h,u,d];if(_&&function(t,e){var i=t[1],s=e[1],a=i|s,l=a<131,A=s==r&&8==i||s==r&&i==o&&t[7].length<=e[8]||384==s&&e[7].length<=e[8]&&8==i;if(!l&&!A)return t;1&s&&(t[2]=e[2],a|=1&i?0:4);var c=e[3];if(c){var h=t[3];t[3]=h?Es(h,c,e[4]):c,t[4]=h?si(t[3],n):e[4]}(c=e[5])&&(h=t[5],t[5]=h?Ss(h,c,e[6]):c,t[6]=h?si(t[5],n):e[6]),(c=e[7])&&(t[7]=c),s&r&&(t[8]=null==t[8]?e[8]:mi(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(y,_),i=y[0],a=y[1],l=y[2],A=y[3],c=y[4],!(d=y[9]=y[9]===t?g?0:i.length:fi(y[9]-p,0))&&24&a&&(a&=-25),a&&1!=a)w=8==a||16==a?function(e,i,n){var s=Ds(e);return function r(){for(var o=arguments.length,a=wt(o),l=o,A=or(r);l--;)a[l]=arguments[l];var c=o<3&&a[0]!==A&&a[o-1]!==A?[]:si(a,A);return(o-=c.length)<n?js(e,i,Ns,r.placeholder,t,a,c,t,t,n-o):ve(this&&this!==Ae&&this instanceof r?s:e,this,a)}}(i,a,d):a!=s&&33!=a||c.length?Ns.apply(t,y):function(t,e,i,n){var s=1&e,r=Ds(t);return function e(){for(var o=-1,a=arguments.length,l=-1,A=n.length,c=wt(A+a),h=this&&this!==Ae&&this instanceof e?r:t;++l<A;)c[l]=n[l];for(;a--;)c[l++]=arguments[++o];return ve(h,s?i:this,c)}}(i,a,l,A);else var w=function(t,e,i){var n=1&e,s=Ds(t);return function e(){return(this&&this!==Ae&&this instanceof e?s:t).apply(n?i:this,arguments)}}(i,a,l);return Mr((_?Jn:Fr)(w,y),i,a)}function qs(e,i,n,s){return e===t||No(e,Mt[n])&&!kt.call(s,n)?i:e}function Zs(e,i,n,s,r,o){return Jo(e)&&Jo(i)&&(o.set(i,e),Hn(e,i,t,Zs,o),o.delete(i)),e}function Js(e){return na(e)?t:e}function tr(e,i,n,s,r,o){var a=1&n,l=e.length,A=i.length;if(l!=A&&!(a&&A>l))return!1;var c=o.get(e),h=o.get(i);if(c&&h)return c==i&&h==e;var u=-1,d=!0,g=2&n?new ji:t;for(o.set(e,i),o.set(i,e);++u<l;){var p=e[u],f=i[u];if(s)var m=a?s(f,p,u,i,e,o):s(p,f,u,e,i,o);if(m!==t){if(m)continue;d=!1;break}if(g){if(!Re(i,(function(t,e){if(!Ye(g,e)&&(p===t||r(p,t,n,s,o)))return g.push(e)}))){d=!1;break}}else if(p!==f&&!r(p,f,n,s,o)){d=!1;break}}return o.delete(e),o.delete(i),d}function er(e){return Lr(Br(e,t,Vr),e+"")}function ir(t){return Cn(t,La,hr)}function nr(t){return Cn(t,Ma,ur)}var sr=Fi?function(t){return Fi.get(t)}:al;function rr(t){for(var e=t.name+"",i=Ii[e],n=kt.call(Ii,e)?i.length:0;n--;){var s=i[n],r=s.func;if(null==r||r==t)return s.name}return e}function or(t){return(kt.call(Pi,"placeholder")?Pi:t).placeholder}function ar(){var t=Pi.iteratee||nl;return t=t===nl?kn:t,arguments.length?t(arguments[0],arguments[1]):t}function lr(t,e){var i,n,s=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof e?"string":"hash"]:s.map}function Ar(t){for(var e=La(t),i=e.length;i--;){var n=e[i],s=t[n];e[i]=[n,s,Cr(s)]}return e}function cr(e,i){var n=function(e,i){return null==e?t:e[i]}(e,i);return Rn(n)?n:t}var hr=Ge?function(t){return null==t?[]:(t=Bt(t),Ee(Ge(t),(function(e){return Wt.call(t,e)})))}:gl,ur=Ge?function(t){for(var e=[];t;)Le(e,hr(t)),t=Kt(t);return e}:gl,dr=xn;function gr(t,e,i){for(var n=-1,s=(e=_s(e,t)).length,r=!1;++n<s;){var o=Ur(e[n]);if(!(r=null!=t&&i(t,o)))break;t=t[o]}return r||++n!=s?r:!!(s=null==t?0:t.length)&&Zo(s)&&mr(o,s)&&(Vo(t)||Go(t))}function pr(t){return"function"!=typeof t.constructor||br(t)?{}:Ni(Kt(t))}function fr(t){return Vo(t)||Go(t)||!!(Zt&&t&&t[Zt])}function mr(t,e){var i=typeof t;return!!(e=null==e?l:e)&&("number"==i||"symbol"!=i&&gt.test(t))&&t>-1&&t%1==0&&t<e}function _r(t,e,i){if(!Jo(i))return!1;var n=typeof e;return!!("number"==n?Ko(i)&&mr(e,i.length):"string"==n&&e in i)&&No(i[e],t)}function yr(t,e){if(Vo(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!aa(t))||X.test(t)||!Y.test(t)||null!=e&&t in Bt(e)}function wr(t){var e=rr(t),i=Pi[e];if("function"!=typeof i||!(e in Gi.prototype))return!1;if(t===i)return!0;var n=sr(i);return!!n&&t===n[0]}(bi&&dr(new bi(new ArrayBuffer(1)))!=I||Ci&&dr(new Ci)!=y||xi&&dr(xi.resolve())!=b||Bi&&dr(new Bi)!=x||Ei&&dr(new Ei)!=S)&&(dr=function(e){var i=xn(e),n=i==v?e.constructor:t,s=n?Dr(n):"";if(s)switch(s){case Li:return I;case Mi:return y;case Ti:return b;case Ri:return x;case ki:return S}return i});var vr=Tt?Xo:pl;function br(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Mt)}function Cr(t){return t==t&&!Jo(t)}function xr(e,i){return function(n){return null!=n&&n[e]===i&&(i!==t||e in Bt(n))}}function Br(e,i,n){return i=fi(i===t?e.length-1:i,0),function(){for(var t=arguments,s=-1,r=fi(t.length-i,0),o=wt(r);++s<r;)o[s]=t[i+s];s=-1;for(var a=wt(i+1);++s<i;)a[s]=t[s];return a[i]=n(o),ve(e,this,a)}}function Er(t,e){return e.length<2?t:bn(t,is(e,0,-1))}function Sr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Fr=Tr(Jn),Ir=de||function(t,e){return Ae.setTimeout(t,e)},Lr=Tr(ts);function Mr(t,e,i){var n=e+"";return Lr(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(it,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Ce(h,(function(i){var n="_."+i[0];e&i[1]&&!Se(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(nt);return e?e[1].split(st):[]}(n),i)))}function Tr(e){var i=0,n=0;return function(){var s=_i(),r=16-(s-n);if(n=s,r>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(t,arguments)}}function Rr(e,i){var n=-1,s=e.length,r=s-1;for(i=i===t?s:i;++n<i;){var o=Wn(n,r),a=e[o];e[o]=e[n],e[n]=a}return e.length=i,e}var kr=function(t){var e=Ro(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(q,(function(t,i,n,s){e.push(n?s.replace(at,"$1"):i||t)})),e}));function Ur(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Dr(t){if(null!=t){try{return Rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Or(t){if(t instanceof Gi)return t.clone();var e=new Hi(t.__wrapped__,t.__chain__);return e.__actions__=Fs(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Pr=Yn((function(t,e){return jo(t)?cn(t,fn(e,1,jo,!0)):[]})),Nr=Yn((function(e,i){var n=$r(i);return jo(n)&&(n=t),jo(e)?cn(e,fn(i,1,jo,!0),ar(n,2)):[]})),Qr=Yn((function(e,i){var n=$r(i);return jo(n)&&(n=t),jo(e)?cn(e,fn(i,1,jo,!0),t,n):[]}));function Hr(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var s=null==i?0:da(i);return s<0&&(s=fi(n+s,0)),De(t,ar(e,3),s)}function Gr(e,i,n){var s=null==e?0:e.length;if(!s)return-1;var r=s-1;return n!==t&&(r=da(n),r=n<0?fi(s+r,0):mi(r,s-1)),De(e,ar(i,3),r,!0)}function Vr(t){return null!=t&&t.length?fn(t,1):[]}function zr(e){return e&&e.length?e[0]:t}var Kr=Yn((function(t){var e=Ie(t,fs);return e.length&&e[0]===t[0]?Fn(e):[]})),jr=Yn((function(e){var i=$r(e),n=Ie(e,fs);return i===$r(n)?i=t:n.pop(),n.length&&n[0]===e[0]?Fn(n,ar(i,2)):[]})),Wr=Yn((function(e){var i=$r(e),n=Ie(e,fs);return(i="function"==typeof i?i:t)&&n.pop(),n.length&&n[0]===e[0]?Fn(n,t,i):[]}));function $r(e){var i=null==e?0:e.length;return i?e[i-1]:t}var Yr=Yn(Xr);function Xr(t,e){return t&&t.length&&e&&e.length?Kn(t,e):t}var qr=er((function(t,e){var i=null==t?0:t.length,n=rn(t,e);return jn(t,Ie(e,(function(t){return mr(t,i)?+t:t})).sort(Bs)),n}));function Zr(t){return null==t?t:vi.call(t)}var Jr=Yn((function(t){return As(fn(t,1,jo,!0))})),to=Yn((function(e){var i=$r(e);return jo(i)&&(i=t),As(fn(e,1,jo,!0),ar(i,2))})),eo=Yn((function(e){var i=$r(e);return i="function"==typeof i?i:t,As(fn(e,1,jo,!0),t,i)}));function io(t){if(!t||!t.length)return[];var e=0;return t=Ee(t,(function(t){if(jo(t))return e=fi(t.length,e),!0})),Ke(e,(function(e){return Ie(t,He(e))}))}function no(e,i){if(!e||!e.length)return[];var n=io(e);return null==i?n:Ie(n,(function(e){return ve(i,t,e)}))}var so=Yn((function(t,e){return jo(t)?cn(t,e):[]})),ro=Yn((function(t){return gs(Ee(t,jo))})),oo=Yn((function(e){var i=$r(e);return jo(i)&&(i=t),gs(Ee(e,jo),ar(i,2))})),ao=Yn((function(e){var i=$r(e);return i="function"==typeof i?i:t,gs(Ee(e,jo),t,i)})),lo=Yn(io),Ao=Yn((function(e){var i=e.length,n=i>1?e[i-1]:t;return n="function"==typeof n?(e.pop(),n):t,no(e,n)}));function co(t){var e=Pi(t);return e.__chain__=!0,e}function ho(t,e){return e(t)}var uo=er((function(e){var i=e.length,n=i?e[0]:0,s=this.__wrapped__,r=function(t){return rn(t,e)};return!(i>1||this.__actions__.length)&&s instanceof Gi&&mr(n)?((s=s.slice(n,+n+(i?1:0))).__actions__.push({func:ho,args:[r],thisArg:t}),new Hi(s,this.__chain__).thru((function(e){return i&&!e.length&&e.push(t),e}))):this.thru(r)})),go=Ls((function(t,e,i){kt.call(t,i)?++t[i]:sn(t,i,1)})),po=Os(Hr),fo=Os(Gr);function mo(t,e){return(Vo(t)?Ce:hn)(t,ar(e,3))}function _o(t,e){return(Vo(t)?xe:un)(t,ar(e,3))}var yo=Ls((function(t,e,i){kt.call(t,i)?t[i].push(e):sn(t,i,[e])})),wo=Yn((function(t,e,i){var n=-1,s="function"==typeof e,r=Ko(t)?wt(t.length):[];return hn(t,(function(t){r[++n]=s?ve(e,t,i):In(t,e,i)})),r})),vo=Ls((function(t,e,i){sn(t,i,e)}));function bo(t,e){return(Vo(t)?Ie:Pn)(t,ar(e,3))}var Co=Ls((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),xo=Yn((function(t,e){if(null==t)return[];var i=e.length;return i>1&&_r(t,e[0],e[1])?e=[]:i>2&&_r(e[0],e[1],e[2])&&(e=[e[0]]),Vn(t,fn(e,1),[])})),Bo=he||function(){return Ae.Date.now()};function Eo(e,i,n){return i=n?t:i,i=e&&null==i?e.length:i,Xs(e,r,t,t,t,t,i)}function So(i,n){var s;if("function"!=typeof n)throw new Ft(e);return i=da(i),function(){return--i>0&&(s=n.apply(this,arguments)),i<=1&&(n=t),s}}var Fo=Yn((function(t,e,i){var n=1;if(i.length){var r=si(i,or(Fo));n|=s}return Xs(t,n,e,i,r)})),Io=Yn((function(t,e,i){var n=3;if(i.length){var r=si(i,or(Io));n|=s}return Xs(e,n,t,i,r)}));function Lo(i,n,s){var r,o,a,l,A,c,h=0,u=!1,d=!1,g=!0;if("function"!=typeof i)throw new Ft(e);function p(e){var n=r,s=o;return r=o=t,h=e,l=i.apply(s,n)}function f(e){var i=e-c;return c===t||i>=n||i<0||d&&e-h>=a}function m(){var t=Bo();if(f(t))return _(t);A=Ir(m,function(t){var e=n-(t-c);return d?mi(e,a-(t-h)):e}(t))}function _(e){return A=t,g&&r?p(e):(r=o=t,l)}function y(){var e=Bo(),i=f(e);if(r=arguments,o=this,c=e,i){if(A===t)return function(t){return h=t,A=Ir(m,n),u?p(t):l}(c);if(d)return vs(A),A=Ir(m,n),p(c)}return A===t&&(A=Ir(m,n)),l}return n=pa(n)||0,Jo(s)&&(u=!!s.leading,a=(d="maxWait"in s)?fi(pa(s.maxWait)||0,n):a,g="trailing"in s?!!s.trailing:g),y.cancel=function(){A!==t&&vs(A),h=0,r=c=o=A=t},y.flush=function(){return A===t?l:_(Bo())},y}var Mo=Yn((function(t,e){return An(t,1,e)})),To=Yn((function(t,e,i){return An(t,pa(e)||0,i)}));function Ro(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new Ft(e);var n=function(){var e=arguments,s=i?i.apply(this,e):e[0],r=n.cache;if(r.has(s))return r.get(s);var o=t.apply(this,e);return n.cache=r.set(s,o)||r,o};return n.cache=new(Ro.Cache||Ki),n}function ko(t){if("function"!=typeof t)throw new Ft(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ro.Cache=Ki;var Uo=ys((function(t,e){var i=(e=1==e.length&&Vo(e[0])?Ie(e[0],We(ar())):Ie(fn(e,1),We(ar()))).length;return Yn((function(n){for(var s=-1,r=mi(n.length,i);++s<r;)n[s]=e[s].call(this,n[s]);return ve(t,this,n)}))})),Do=Yn((function(e,i){var n=si(i,or(Do));return Xs(e,s,t,i,n)})),Oo=Yn((function(e,i){var n=si(i,or(Oo));return Xs(e,64,t,i,n)})),Po=er((function(e,i){return Xs(e,o,t,t,t,i)}));function No(t,e){return t===e||t!=t&&e!=e}var Qo=Ks(Bn),Ho=Ks((function(t,e){return t>=e})),Go=Ln(function(){return arguments}())?Ln:function(t){return ta(t)&&kt.call(t,"callee")&&!Wt.call(t,"callee")},Vo=wt.isArray,zo=pe?We(pe):function(t){return ta(t)&&xn(t)==F};function Ko(t){return null!=t&&Zo(t.length)&&!Xo(t)}function jo(t){return ta(t)&&Ko(t)}var Wo=ui||pl,$o=fe?We(fe):function(t){return ta(t)&&xn(t)==p};function Yo(t){if(!ta(t))return!1;var e=xn(t);return e==f||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!na(t)}function Xo(t){if(!Jo(t))return!1;var e=xn(t);return e==m||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function qo(t){return"number"==typeof t&&t==da(t)}function Zo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function Jo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ta(t){return null!=t&&"object"==typeof t}var ea=me?We(me):function(t){return ta(t)&&dr(t)==y};function ia(t){return"number"==typeof t||ta(t)&&xn(t)==w}function na(t){if(!ta(t)||xn(t)!=v)return!1;var e=Kt(t);if(null===e)return!0;var i=kt.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Rt.call(i)==Pt}var sa=_e?We(_e):function(t){return ta(t)&&xn(t)==C},ra=ye?We(ye):function(t){return ta(t)&&dr(t)==x};function oa(t){return"string"==typeof t||!Vo(t)&&ta(t)&&xn(t)==B}function aa(t){return"symbol"==typeof t||ta(t)&&xn(t)==E}var la=we?We(we):function(t){return ta(t)&&Zo(t.length)&&!!ie[xn(t)]},Aa=Ks(On),ca=Ks((function(t,e){return t<=e}));function ha(t){if(!t)return[];if(Ko(t))return oa(t)?li(t):Fs(t);if(se&&t[se])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[se]());var e=dr(t);return(e==y?ii:e==x?ri:Na)(t)}function ua(t){return t?(t=pa(t))===a||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function da(t){var e=ua(t),i=e%1;return e==e?i?e-i:e:0}function ga(t){return t?on(da(t),0,c):0}function pa(t){if("number"==typeof t)return t;if(aa(t))return A;if(Jo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=je(t);var i=ht.test(t);return i||dt.test(t)?oe(t.slice(2),i?2:8):ct.test(t)?A:+t}function fa(t){return Is(t,Ma(t))}function ma(t){return null==t?"":ls(t)}var _a=Ms((function(t,e){if(br(e)||Ko(e))Is(e,La(e),t);else for(var i in e)kt.call(e,i)&&Ji(t,i,e[i])})),ya=Ms((function(t,e){Is(e,Ma(e),t)})),wa=Ms((function(t,e,i,n){Is(e,Ma(e),t,n)})),va=Ms((function(t,e,i,n){Is(e,La(e),t,n)})),ba=er(rn),Ca=Yn((function(e,i){e=Bt(e);var n=-1,s=i.length,r=s>2?i[2]:t;for(r&&_r(i[0],i[1],r)&&(s=1);++n<s;)for(var o=i[n],a=Ma(o),l=-1,A=a.length;++l<A;){var c=a[l],h=e[c];(h===t||No(h,Mt[c])&&!kt.call(e,c))&&(e[c]=o[c])}return e})),xa=Yn((function(e){return e.push(t,Zs),ve(Ra,t,e)}));function Ba(e,i,n){var s=null==e?t:bn(e,i);return s===t?n:s}function Ea(t,e){return null!=t&&gr(t,e,Sn)}var Sa=Qs((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),t[e]=i}),Ja(il)),Fa=Qs((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),kt.call(t,e)?t[e].push(i):t[e]=[i]}),ar),Ia=Yn(In);function La(t){return Ko(t)?$i(t):Un(t)}function Ma(t){return Ko(t)?$i(t,!0):Dn(t)}var Ta=Ms((function(t,e,i){Hn(t,e,i)})),Ra=Ms((function(t,e,i,n){Hn(t,e,i,n)})),ka=er((function(t,e){var i={};if(null==t)return i;var n=!1;e=Ie(e,(function(e){return e=_s(e,t),n||(n=e.length>1),e})),Is(t,nr(t),i),n&&(i=an(i,7,Js));for(var s=e.length;s--;)cs(i,e[s]);return i})),Ua=er((function(t,e){return null==t?{}:function(t,e){return zn(t,e,(function(e,i){return Ea(t,i)}))}(t,e)}));function Da(t,e){if(null==t)return{};var i=Ie(nr(t),(function(t){return[t]}));return e=ar(e),zn(t,i,(function(t,i){return e(t,i[0])}))}var Oa=Ys(La),Pa=Ys(Ma);function Na(t){return null==t?[]:$e(t,La(t))}var Qa=Us((function(t,e,i){return e=e.toLowerCase(),t+(i?Ha(e):e)}));function Ha(t){return Ya(ma(t).toLowerCase())}function Ga(t){return(t=ma(t))&&t.replace(pt,Ze).replace(Yt,"")}var Va=Us((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),za=Us((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),Ka=ks("toLowerCase"),ja=Us((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()})),Wa=Us((function(t,e,i){return t+(i?" ":"")+Ya(e)})),$a=Us((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),Ya=ks("toUpperCase");function Xa(e,i,n){return e=ma(e),(i=n?t:i)===t?function(t){return Jt.test(t)}(e)?function(t){return t.match(qt)||[]}(e):function(t){return t.match(rt)||[]}(e):e.match(i)||[]}var qa=Yn((function(e,i){try{return ve(e,t,i)}catch(t){return Yo(t)?t:new bt(t)}})),Za=er((function(t,e){return Ce(e,(function(e){e=Ur(e),sn(t,e,Fo(t[e],t))})),t}));function Ja(t){return function(){return t}}var tl=Ps(),el=Ps(!0);function il(t){return t}function nl(t){return kn("function"==typeof t?t:an(t,1))}var sl=Yn((function(t,e){return function(i){return In(i,t,e)}})),rl=Yn((function(t,e){return function(i){return In(t,i,e)}}));function ol(t,e,i){var n=La(e),s=vn(e,n);null!=i||Jo(e)&&(s.length||!n.length)||(i=e,e=t,t=this,s=vn(e,La(e)));var r=!(Jo(i)&&"chain"in i&&!i.chain),o=Xo(t);return Ce(s,(function(i){var n=e[i];t[i]=n,o&&(t.prototype[i]=function(){var e=this.__chain__;if(r||e){var i=t(this.__wrapped__);return(i.__actions__=Fs(this.__actions__)).push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,Le([this.value()],arguments))})})),t}function al(){}var ll=Gs(Ie),Al=Gs(Be),cl=Gs(Re);function hl(t){return yr(t)?He(Ur(t)):function(t){return function(e){return bn(e,t)}}(t)}var ul=zs(),dl=zs(!0);function gl(){return[]}function pl(){return!1}var fl,ml=Hs((function(t,e){return t+e}),0),_l=Ws("ceil"),yl=Hs((function(t,e){return t/e}),1),wl=Ws("floor"),vl=Hs((function(t,e){return t*e}),1),bl=Ws("round"),Cl=Hs((function(t,e){return t-e}),0);return Pi.after=function(t,i){if("function"!=typeof i)throw new Ft(e);return t=da(t),function(){if(--t<1)return i.apply(this,arguments)}},Pi.ary=Eo,Pi.assign=_a,Pi.assignIn=ya,Pi.assignInWith=wa,Pi.assignWith=va,Pi.at=ba,Pi.before=So,Pi.bind=Fo,Pi.bindAll=Za,Pi.bindKey=Io,Pi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Vo(t)?t:[t]},Pi.chain=co,Pi.chunk=function(e,i,n){i=(n?_r(e,i,n):i===t)?1:fi(da(i),0);var s=null==e?0:e.length;if(!s||i<1)return[];for(var r=0,o=0,a=wt(ge(s/i));r<s;)a[o++]=is(e,r,r+=i);return a},Pi.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,s=[];++e<i;){var r=t[e];r&&(s[n++]=r)}return s},Pi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=wt(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Le(Vo(i)?Fs(i):[i],fn(e,1))},Pi.cond=function(t){var i=null==t?0:t.length,n=ar();return t=i?Ie(t,(function(t){if("function"!=typeof t[1])throw new Ft(e);return[n(t[0]),t[1]]})):[],Yn((function(e){for(var n=-1;++n<i;){var s=t[n];if(ve(s[0],this,e))return ve(s[1],this,e)}}))},Pi.conforms=function(t){return function(t){var e=La(t);return function(i){return ln(i,t,e)}}(an(t,1))},Pi.constant=Ja,Pi.countBy=go,Pi.create=function(t,e){var i=Ni(t);return null==e?i:nn(i,e)},Pi.curry=function e(i,n,s){var r=Xs(i,8,t,t,t,t,t,n=s?t:n);return r.placeholder=e.placeholder,r},Pi.curryRight=function e(i,n,s){var r=Xs(i,16,t,t,t,t,t,n=s?t:n);return r.placeholder=e.placeholder,r},Pi.debounce=Lo,Pi.defaults=Ca,Pi.defaultsDeep=xa,Pi.defer=Mo,Pi.delay=To,Pi.difference=Pr,Pi.differenceBy=Nr,Pi.differenceWith=Qr,Pi.drop=function(e,i,n){var s=null==e?0:e.length;return s?is(e,(i=n||i===t?1:da(i))<0?0:i,s):[]},Pi.dropRight=function(e,i,n){var s=null==e?0:e.length;return s?is(e,0,(i=s-(i=n||i===t?1:da(i)))<0?0:i):[]},Pi.dropRightWhile=function(t,e){return t&&t.length?us(t,ar(e,3),!0,!0):[]},Pi.dropWhile=function(t,e){return t&&t.length?us(t,ar(e,3),!0):[]},Pi.fill=function(e,i,n,s){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_r(e,i,n)&&(n=0,s=r),function(e,i,n,s){var r=e.length;for((n=da(n))<0&&(n=-n>r?0:r+n),(s=s===t||s>r?r:da(s))<0&&(s+=r),s=n>s?0:ga(s);n<s;)e[n++]=i;return e}(e,i,n,s)):[]},Pi.filter=function(t,e){return(Vo(t)?Ee:pn)(t,ar(e,3))},Pi.flatMap=function(t,e){return fn(bo(t,e),1)},Pi.flatMapDeep=function(t,e){return fn(bo(t,e),a)},Pi.flatMapDepth=function(e,i,n){return n=n===t?1:da(n),fn(bo(e,i),n)},Pi.flatten=Vr,Pi.flattenDeep=function(t){return null!=t&&t.length?fn(t,a):[]},Pi.flattenDepth=function(e,i){return null!=e&&e.length?fn(e,i=i===t?1:da(i)):[]},Pi.flip=function(t){return Xs(t,512)},Pi.flow=tl,Pi.flowRight=el,Pi.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var s=t[e];n[s[0]]=s[1]}return n},Pi.functions=function(t){return null==t?[]:vn(t,La(t))},Pi.functionsIn=function(t){return null==t?[]:vn(t,Ma(t))},Pi.groupBy=yo,Pi.initial=function(t){return null!=t&&t.length?is(t,0,-1):[]},Pi.intersection=Kr,Pi.intersectionBy=jr,Pi.intersectionWith=Wr,Pi.invert=Sa,Pi.invertBy=Fa,Pi.invokeMap=wo,Pi.iteratee=nl,Pi.keyBy=vo,Pi.keys=La,Pi.keysIn=Ma,Pi.map=bo,Pi.mapKeys=function(t,e){var i={};return e=ar(e,3),yn(t,(function(t,n,s){sn(i,e(t,n,s),t)})),i},Pi.mapValues=function(t,e){var i={};return e=ar(e,3),yn(t,(function(t,n,s){sn(i,n,e(t,n,s))})),i},Pi.matches=function(t){return Nn(an(t,1))},Pi.matchesProperty=function(t,e){return Qn(t,an(e,1))},Pi.memoize=Ro,Pi.merge=Ta,Pi.mergeWith=Ra,Pi.method=sl,Pi.methodOf=rl,Pi.mixin=ol,Pi.negate=ko,Pi.nthArg=function(t){return t=da(t),Yn((function(e){return Gn(e,t)}))},Pi.omit=ka,Pi.omitBy=function(t,e){return Da(t,ko(ar(e)))},Pi.once=function(t){return So(2,t)},Pi.orderBy=function(e,i,n,s){return null==e?[]:(Vo(i)||(i=null==i?[]:[i]),Vo(n=s?t:n)||(n=null==n?[]:[n]),Vn(e,i,n))},Pi.over=ll,Pi.overArgs=Uo,Pi.overEvery=Al,Pi.overSome=cl,Pi.partial=Do,Pi.partialRight=Oo,Pi.partition=Co,Pi.pick=Ua,Pi.pickBy=Da,Pi.property=hl,Pi.propertyOf=function(e){return function(i){return null==e?t:bn(e,i)}},Pi.pull=Yr,Pi.pullAll=Xr,Pi.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?Kn(t,e,ar(i,2)):t},Pi.pullAllWith=function(e,i,n){return e&&e.length&&i&&i.length?Kn(e,i,t,n):e},Pi.pullAt=qr,Pi.range=ul,Pi.rangeRight=dl,Pi.rearg=Po,Pi.reject=function(t,e){return(Vo(t)?Ee:pn)(t,ko(ar(e,3)))},Pi.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,s=[],r=t.length;for(e=ar(e,3);++n<r;){var o=t[n];e(o,n,t)&&(i.push(o),s.push(n))}return jn(t,s),i},Pi.rest=function(i,n){if("function"!=typeof i)throw new Ft(e);return Yn(i,n=n===t?n:da(n))},Pi.reverse=Zr,Pi.sampleSize=function(e,i,n){return i=(n?_r(e,i,n):i===t)?1:da(i),(Vo(e)?Xi:qn)(e,i)},Pi.set=function(t,e,i){return null==t?t:Zn(t,e,i)},Pi.setWith=function(e,i,n,s){return s="function"==typeof s?s:t,null==e?e:Zn(e,i,n,s)},Pi.shuffle=function(t){return(Vo(t)?qi:es)(t)},Pi.slice=function(e,i,n){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&_r(e,i,n)?(i=0,n=s):(i=null==i?0:da(i),n=n===t?s:da(n)),is(e,i,n)):[]},Pi.sortBy=xo,Pi.sortedUniq=function(t){return t&&t.length?os(t):[]},Pi.sortedUniqBy=function(t,e){return t&&t.length?os(t,ar(e,2)):[]},Pi.split=function(e,i,n){return n&&"number"!=typeof n&&_r(e,i,n)&&(i=n=t),(n=n===t?c:n>>>0)?(e=ma(e))&&("string"==typeof i||null!=i&&!sa(i))&&!(i=ls(i))&&ei(e)?ws(li(e),0,n):e.split(i,n):[]},Pi.spread=function(t,i){if("function"!=typeof t)throw new Ft(e);return i=null==i?0:fi(da(i),0),Yn((function(e){var n=e[i],s=ws(e,0,i);return n&&Le(s,n),ve(t,this,s)}))},Pi.tail=function(t){var e=null==t?0:t.length;return e?is(t,1,e):[]},Pi.take=function(e,i,n){return e&&e.length?is(e,0,(i=n||i===t?1:da(i))<0?0:i):[]},Pi.takeRight=function(e,i,n){var s=null==e?0:e.length;return s?is(e,(i=s-(i=n||i===t?1:da(i)))<0?0:i,s):[]},Pi.takeRightWhile=function(t,e){return t&&t.length?us(t,ar(e,3),!1,!0):[]},Pi.takeWhile=function(t,e){return t&&t.length?us(t,ar(e,3)):[]},Pi.tap=function(t,e){return e(t),t},Pi.throttle=function(t,i,n){var s=!0,r=!0;if("function"!=typeof t)throw new Ft(e);return Jo(n)&&(s="leading"in n?!!n.leading:s,r="trailing"in n?!!n.trailing:r),Lo(t,i,{leading:s,maxWait:i,trailing:r})},Pi.thru=ho,Pi.toArray=ha,Pi.toPairs=Oa,Pi.toPairsIn=Pa,Pi.toPath=function(t){return Vo(t)?Ie(t,Ur):aa(t)?[t]:Fs(kr(ma(t)))},Pi.toPlainObject=fa,Pi.transform=function(t,e,i){var n=Vo(t),s=n||Wo(t)||la(t);if(e=ar(e,4),null==i){var r=t&&t.constructor;i=s?n?new r:[]:Jo(t)&&Xo(r)?Ni(Kt(t)):{}}return(s?Ce:yn)(t,(function(t,n,s){return e(i,t,n,s)})),i},Pi.unary=function(t){return Eo(t,1)},Pi.union=Jr,Pi.unionBy=to,Pi.unionWith=eo,Pi.uniq=function(t){return t&&t.length?As(t):[]},Pi.uniqBy=function(t,e){return t&&t.length?As(t,ar(e,2)):[]},Pi.uniqWith=function(e,i){return i="function"==typeof i?i:t,e&&e.length?As(e,t,i):[]},Pi.unset=function(t,e){return null==t||cs(t,e)},Pi.unzip=io,Pi.unzipWith=no,Pi.update=function(t,e,i){return null==t?t:hs(t,e,ms(i))},Pi.updateWith=function(e,i,n,s){return s="function"==typeof s?s:t,null==e?e:hs(e,i,ms(n),s)},Pi.values=Na,Pi.valuesIn=function(t){return null==t?[]:$e(t,Ma(t))},Pi.without=so,Pi.words=Xa,Pi.wrap=function(t,e){return Do(ms(e),t)},Pi.xor=ro,Pi.xorBy=oo,Pi.xorWith=ao,Pi.zip=lo,Pi.zipObject=function(t,e){return ps(t||[],e||[],Ji)},Pi.zipObjectDeep=function(t,e){return ps(t||[],e||[],Zn)},Pi.zipWith=Ao,Pi.entries=Oa,Pi.entriesIn=Pa,Pi.extend=ya,Pi.extendWith=wa,ol(Pi,Pi),Pi.add=ml,Pi.attempt=qa,Pi.camelCase=Qa,Pi.capitalize=Ha,Pi.ceil=_l,Pi.clamp=function(e,i,n){return n===t&&(n=i,i=t),n!==t&&(n=(n=pa(n))==n?n:0),i!==t&&(i=(i=pa(i))==i?i:0),on(pa(e),i,n)},Pi.clone=function(t){return an(t,4)},Pi.cloneDeep=function(t){return an(t,5)},Pi.cloneDeepWith=function(e,i){return an(e,5,i="function"==typeof i?i:t)},Pi.cloneWith=function(e,i){return an(e,4,i="function"==typeof i?i:t)},Pi.conformsTo=function(t,e){return null==e||ln(t,e,La(e))},Pi.deburr=Ga,Pi.defaultTo=function(t,e){return null==t||t!=t?e:t},Pi.divide=yl,Pi.endsWith=function(e,i,n){e=ma(e),i=ls(i);var s=e.length,r=n=n===t?s:on(da(n),0,s);return(n-=i.length)>=0&&e.slice(n,r)==i},Pi.eq=No,Pi.escape=function(t){return(t=ma(t))&&K.test(t)?t.replace(V,Je):t},Pi.escapeRegExp=function(t){return(t=ma(t))&&J.test(t)?t.replace(Z,"\\$&"):t},Pi.every=function(e,i,n){var s=Vo(e)?Be:dn;return n&&_r(e,i,n)&&(i=t),s(e,ar(i,3))},Pi.find=po,Pi.findIndex=Hr,Pi.findKey=function(t,e){return Ue(t,ar(e,3),yn)},Pi.findLast=fo,Pi.findLastIndex=Gr,Pi.findLastKey=function(t,e){return Ue(t,ar(e,3),wn)},Pi.floor=wl,Pi.forEach=mo,Pi.forEachRight=_o,Pi.forIn=function(t,e){return null==t?t:mn(t,ar(e,3),Ma)},Pi.forInRight=function(t,e){return null==t?t:_n(t,ar(e,3),Ma)},Pi.forOwn=function(t,e){return t&&yn(t,ar(e,3))},Pi.forOwnRight=function(t,e){return t&&wn(t,ar(e,3))},Pi.get=Ba,Pi.gt=Qo,Pi.gte=Ho,Pi.has=function(t,e){return null!=t&&gr(t,e,En)},Pi.hasIn=Ea,Pi.head=zr,Pi.identity=il,Pi.includes=function(t,e,i,n){t=Ko(t)?t:Na(t),i=i&&!n?da(i):0;var s=t.length;return i<0&&(i=fi(s+i,0)),oa(t)?i<=s&&t.indexOf(e,i)>-1:!!s&&Oe(t,e,i)>-1},Pi.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var s=null==i?0:da(i);return s<0&&(s=fi(n+s,0)),Oe(t,e,s)},Pi.inRange=function(e,i,n){return i=ua(i),n===t?(n=i,i=0):n=ua(n),function(t,e,i){return t>=mi(e,i)&&t<fi(e,i)}(e=pa(e),i,n)},Pi.invoke=Ia,Pi.isArguments=Go,Pi.isArray=Vo,Pi.isArrayBuffer=zo,Pi.isArrayLike=Ko,Pi.isArrayLikeObject=jo,Pi.isBoolean=function(t){return!0===t||!1===t||ta(t)&&xn(t)==g},Pi.isBuffer=Wo,Pi.isDate=$o,Pi.isElement=function(t){return ta(t)&&1===t.nodeType&&!na(t)},Pi.isEmpty=function(t){if(null==t)return!0;if(Ko(t)&&(Vo(t)||"string"==typeof t||"function"==typeof t.splice||Wo(t)||la(t)||Go(t)))return!t.length;var e=dr(t);if(e==y||e==x)return!t.size;if(br(t))return!Un(t).length;for(var i in t)if(kt.call(t,i))return!1;return!0},Pi.isEqual=function(t,e){return Mn(t,e)},Pi.isEqualWith=function(e,i,n){var s=(n="function"==typeof n?n:t)?n(e,i):t;return s===t?Mn(e,i,t,n):!!s},Pi.isError=Yo,Pi.isFinite=function(t){return"number"==typeof t&&di(t)},Pi.isFunction=Xo,Pi.isInteger=qo,Pi.isLength=Zo,Pi.isMap=ea,Pi.isMatch=function(t,e){return t===e||Tn(t,e,Ar(e))},Pi.isMatchWith=function(e,i,n){return n="function"==typeof n?n:t,Tn(e,i,Ar(i),n)},Pi.isNaN=function(t){return ia(t)&&t!=+t},Pi.isNative=function(t){if(vr(t))throw new bt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rn(t)},Pi.isNil=function(t){return null==t},Pi.isNull=function(t){return null===t},Pi.isNumber=ia,Pi.isObject=Jo,Pi.isObjectLike=ta,Pi.isPlainObject=na,Pi.isRegExp=sa,Pi.isSafeInteger=function(t){return qo(t)&&t>=-9007199254740991&&t<=l},Pi.isSet=ra,Pi.isString=oa,Pi.isSymbol=aa,Pi.isTypedArray=la,Pi.isUndefined=function(e){return e===t},Pi.isWeakMap=function(t){return ta(t)&&dr(t)==S},Pi.isWeakSet=function(t){return ta(t)&&"[object WeakSet]"==xn(t)},Pi.join=function(t,e){return null==t?"":gi.call(t,e)},Pi.kebabCase=Va,Pi.last=$r,Pi.lastIndexOf=function(e,i,n){var s=null==e?0:e.length;if(!s)return-1;var r=s;return n!==t&&(r=(r=da(n))<0?fi(s+r,0):mi(r,s-1)),i==i?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(e,i,r):De(e,Ne,r,!0)},Pi.lowerCase=za,Pi.lowerFirst=Ka,Pi.lt=Aa,Pi.lte=ca,Pi.max=function(e){return e&&e.length?gn(e,il,Bn):t},Pi.maxBy=function(e,i){return e&&e.length?gn(e,ar(i,2),Bn):t},Pi.mean=function(t){return Qe(t,il)},Pi.meanBy=function(t,e){return Qe(t,ar(e,2))},Pi.min=function(e){return e&&e.length?gn(e,il,On):t},Pi.minBy=function(e,i){return e&&e.length?gn(e,ar(i,2),On):t},Pi.stubArray=gl,Pi.stubFalse=pl,Pi.stubObject=function(){return{}},Pi.stubString=function(){return""},Pi.stubTrue=function(){return!0},Pi.multiply=vl,Pi.nth=function(e,i){return e&&e.length?Gn(e,da(i)):t},Pi.noConflict=function(){return Ae._===this&&(Ae._=Nt),this},Pi.noop=al,Pi.now=Bo,Pi.pad=function(t,e,i){t=ma(t);var n=(e=da(e))?ai(t):0;if(!e||n>=e)return t;var s=(e-n)/2;return Vs(ke(s),i)+t+Vs(ge(s),i)},Pi.padEnd=function(t,e,i){t=ma(t);var n=(e=da(e))?ai(t):0;return e&&n<e?t+Vs(e-n,i):t},Pi.padStart=function(t,e,i){t=ma(t);var n=(e=da(e))?ai(t):0;return e&&n<e?Vs(e-n,i)+t:t},Pi.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),yi(ma(t).replace(tt,""),e||0)},Pi.random=function(e,i,n){if(n&&"boolean"!=typeof n&&_r(e,i,n)&&(i=n=t),n===t&&("boolean"==typeof i?(n=i,i=t):"boolean"==typeof e&&(n=e,e=t)),e===t&&i===t?(e=0,i=1):(e=ua(e),i===t?(i=e,e=0):i=ua(i)),e>i){var s=e;e=i,i=s}if(n||e%1||i%1){var r=wi();return mi(e+r*(i-e+re("1e-"+((r+"").length-1))),i)}return Wn(e,i)},Pi.reduce=function(t,e,i){var n=Vo(t)?Me:Ve,s=arguments.length<3;return n(t,ar(e,4),i,s,hn)},Pi.reduceRight=function(t,e,i){var n=Vo(t)?Te:Ve,s=arguments.length<3;return n(t,ar(e,4),i,s,un)},Pi.repeat=function(e,i,n){return i=(n?_r(e,i,n):i===t)?1:da(i),$n(ma(e),i)},Pi.replace=function(){var t=arguments,e=ma(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Pi.result=function(e,i,n){var s=-1,r=(i=_s(i,e)).length;for(r||(r=1,e=t);++s<r;){var o=null==e?t:e[Ur(i[s])];o===t&&(s=r,o=n),e=Xo(o)?o.call(e):o}return e},Pi.round=bl,Pi.runInContext=et,Pi.sample=function(t){return(Vo(t)?Yi:Xn)(t)},Pi.size=function(t){if(null==t)return 0;if(Ko(t))return oa(t)?ai(t):t.length;var e=dr(t);return e==y||e==x?t.size:Un(t).length},Pi.snakeCase=ja,Pi.some=function(e,i,n){var s=Vo(e)?Re:ns;return n&&_r(e,i,n)&&(i=t),s(e,ar(i,3))},Pi.sortedIndex=function(t,e){return ss(t,e)},Pi.sortedIndexBy=function(t,e,i){return rs(t,e,ar(i,2))},Pi.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=ss(t,e);if(n<i&&No(t[n],e))return n}return-1},Pi.sortedLastIndex=function(t,e){return ss(t,e,!0)},Pi.sortedLastIndexBy=function(t,e,i){return rs(t,e,ar(i,2),!0)},Pi.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=ss(t,e,!0)-1;if(No(t[i],e))return i}return-1},Pi.startCase=Wa,Pi.startsWith=function(t,e,i){return t=ma(t),i=null==i?0:on(da(i),0,t.length),e=ls(e),t.slice(i,i+e.length)==e},Pi.subtract=Cl,Pi.sum=function(t){return t&&t.length?ze(t,il):0},Pi.sumBy=function(t,e){return t&&t.length?ze(t,ar(e,2)):0},Pi.template=function(e,i,n){var s=Pi.templateSettings;n&&_r(e,i,n)&&(i=t),e=ma(e),i=wa({},i,s,qs);var r,o,a=wa({},i.imports,s.imports,qs),l=La(a),A=$e(a,l),c=0,h=i.interpolate||ft,u="__p += '",d=Et((i.escape||ft).source+"|"+h.source+"|"+(h===$?lt:ft).source+"|"+(i.evaluate||ft).source+"|$","g"),g="//# sourceURL="+(kt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ee+"]")+"\n";e.replace(d,(function(t,i,n,s,a,l){return n||(n=s),u+=e.slice(c,l).replace(mt,ti),i&&(r=!0,u+="' +\n__e("+i+") +\n'"),a&&(o=!0,u+="';\n"+a+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),u+="';\n";var p=kt.call(i,"variable")&&i.variable;if(p){if(ot.test(p))throw new bt("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(o?u.replace(N,""):u).replace(Q,"$1").replace(H,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var f=qa((function(){return Ct(l,g+"return "+u).apply(t,A)}));if(f.source=u,Yo(f))throw f;return f},Pi.times=function(t,e){if((t=da(t))<1||t>l)return[];var i=c,n=mi(t,c);e=ar(e),t-=c;for(var s=Ke(n,e);++i<t;)e(i);return s},Pi.toFinite=ua,Pi.toInteger=da,Pi.toLength=ga,Pi.toLower=function(t){return ma(t).toLowerCase()},Pi.toNumber=pa,Pi.toSafeInteger=function(t){return t?on(da(t),-9007199254740991,l):0===t?t:0},Pi.toString=ma,Pi.toUpper=function(t){return ma(t).toUpperCase()},Pi.trim=function(e,i,n){if((e=ma(e))&&(n||i===t))return je(e);if(!e||!(i=ls(i)))return e;var s=li(e),r=li(i);return ws(s,Xe(s,r),qe(s,r)+1).join("")},Pi.trimEnd=function(e,i,n){if((e=ma(e))&&(n||i===t))return e.slice(0,Ai(e)+1);if(!e||!(i=ls(i)))return e;var s=li(e);return ws(s,0,qe(s,li(i))+1).join("")},Pi.trimStart=function(e,i,n){if((e=ma(e))&&(n||i===t))return e.replace(tt,"");if(!e||!(i=ls(i)))return e;var s=li(e);return ws(s,Xe(s,li(i))).join("")},Pi.truncate=function(e,i){var n=30,s="...";if(Jo(i)){var r="separator"in i?i.separator:r;n="length"in i?da(i.length):n,s="omission"in i?ls(i.omission):s}var o=(e=ma(e)).length;if(ei(e)){var a=li(e);o=a.length}if(n>=o)return e;var l=n-ai(s);if(l<1)return s;var A=a?ws(a,0,l).join(""):e.slice(0,l);if(r===t)return A+s;if(a&&(l+=A.length-l),sa(r)){if(e.slice(l).search(r)){var c,h=A;for(r.global||(r=Et(r.source,ma(At.exec(r))+"g")),r.lastIndex=0;c=r.exec(h);)var u=c.index;A=A.slice(0,u===t?l:u)}}else if(e.indexOf(ls(r),l)!=l){var d=A.lastIndexOf(r);d>-1&&(A=A.slice(0,d))}return A+s},Pi.unescape=function(t){return(t=ma(t))&&z.test(t)?t.replace(G,ci):t},Pi.uniqueId=function(t){var e=++Ut;return ma(t)+e},Pi.upperCase=$a,Pi.upperFirst=Ya,Pi.each=mo,Pi.eachRight=_o,Pi.first=zr,ol(Pi,(fl={},yn(Pi,(function(t,e){kt.call(Pi.prototype,e)||(fl[e]=t)})),fl),{chain:!1}),Pi.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Pi[t].placeholder=Pi})),Ce(["drop","take"],(function(e,i){Gi.prototype[e]=function(n){n=n===t?1:fi(da(n),0);var s=this.__filtered__&&!i?new Gi(this):this.clone();return s.__filtered__?s.__takeCount__=mi(n,s.__takeCount__):s.__views__.push({size:mi(n,c),type:e+(s.__dir__<0?"Right":"")}),s},Gi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;Gi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ar(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),Ce(["head","last"],(function(t,e){var i="take"+(e?"Right":"");Gi.prototype[t]=function(){return this[i](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");Gi.prototype[t]=function(){return this.__filtered__?new Gi(this):this[i](1)}})),Gi.prototype.compact=function(){return this.filter(il)},Gi.prototype.find=function(t){return this.filter(t).head()},Gi.prototype.findLast=function(t){return this.reverse().find(t)},Gi.prototype.invokeMap=Yn((function(t,e){return"function"==typeof t?new Gi(this):this.map((function(i){return In(i,t,e)}))})),Gi.prototype.reject=function(t){return this.filter(ko(ar(t)))},Gi.prototype.slice=function(e,i){e=da(e);var n=this;return n.__filtered__&&(e>0||i<0)?new Gi(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),i!==t&&(n=(i=da(i))<0?n.dropRight(-i):n.take(i-e)),n)},Gi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gi.prototype.toArray=function(){return this.take(c)},yn(Gi.prototype,(function(e,i){var n=/^(?:filter|find|map|reject)|While$/.test(i),s=/^(?:head|last)$/.test(i),r=Pi[s?"take"+("last"==i?"Right":""):i],o=s||/^find/.test(i);r&&(Pi.prototype[i]=function(){var i=this.__wrapped__,a=s?[1]:arguments,l=i instanceof Gi,A=a[0],c=l||Vo(i),h=function(t){var e=r.apply(Pi,Le([t],a));return s&&u?e[0]:e};c&&n&&"function"==typeof A&&1!=A.length&&(l=c=!1);var u=this.__chain__,d=!!this.__actions__.length,g=o&&!u,p=l&&!d;if(!o&&c){i=p?i:new Gi(this);var f=e.apply(i,a);return f.__actions__.push({func:ho,args:[h],thisArg:t}),new Hi(f,u)}return g&&p?e.apply(this,a):(f=this.thru(h),g?s?f.value()[0]:f.value():f)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=It[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Pi.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var s=this.value();return e.apply(Vo(s)?s:[],t)}return this[i]((function(i){return e.apply(Vo(i)?i:[],t)}))}})),yn(Gi.prototype,(function(t,e){var i=Pi[e];if(i){var n=i.name+"";kt.call(Ii,n)||(Ii[n]=[]),Ii[n].push({name:e,func:i})}})),Ii[Ns(t,2).name]=[{name:"wrapper",func:t}],Gi.prototype.clone=function(){var t=new Gi(this.__wrapped__);return t.__actions__=Fs(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Fs(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Fs(this.__views__),t},Gi.prototype.reverse=function(){if(this.__filtered__){var t=new Gi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Vo(t),n=e<0,s=i?t.length:0,r=function(t,e,i){for(var n=-1,s=i.length;++n<s;){var r=i[n],o=r.size;switch(r.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=mi(e,t+o);break;case"takeRight":t=fi(t,e-o)}}return{start:t,end:e}}(0,s,this.__views__),o=r.start,a=r.end,l=a-o,A=n?a:o-1,c=this.__iteratees__,h=c.length,u=0,d=mi(l,this.__takeCount__);if(!i||!n&&s==l&&d==l)return ds(t,this.__actions__);var g=[];t:for(;l--&&u<d;){for(var p=-1,f=t[A+=e];++p<h;){var m=c[p],_=m.iteratee,y=m.type,w=_(f);if(2==y)f=w;else if(!w){if(1==y)continue t;break t}}g[u++]=f}return g},Pi.prototype.at=uo,Pi.prototype.chain=function(){return co(this)},Pi.prototype.commit=function(){return new Hi(this.value(),this.__chain__)},Pi.prototype.next=function(){this.__values__===t&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Pi.prototype.plant=function(e){for(var i,n=this;n instanceof Qi;){var s=Or(n);s.__index__=0,s.__values__=t,i?r.__wrapped__=s:i=s;var r=s;n=n.__wrapped__}return r.__wrapped__=e,i},Pi.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gi){var i=e;return this.__actions__.length&&(i=new Gi(this)),(i=i.reverse()).__actions__.push({func:ho,args:[Zr],thisArg:t}),new Hi(i,this.__chain__)}return this.thru(Zr)},Pi.prototype.toJSON=Pi.prototype.valueOf=Pi.prototype.value=function(){return ds(this.__wrapped__,this.__actions__)},Pi.prototype.first=Pi.prototype.head,se&&(Pi.prototype[se]=function(){return this}),Pi}();he?((he.exports=hi)._=hi,ce._=hi):Ae._=hi}.call(xh.exports)),xh.exports),Fh=bh(Sh);function Ih(t,e){return function(){return t.apply(e,arguments)}}const{toString:Lh}=Object.prototype,{getPrototypeOf:Mh}=Object,Th=(t=>e=>{const i=Lh.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Rh=t=>(t=t.toLowerCase(),e=>Th(e)===t),kh=t=>e=>typeof e===t,{isArray:Uh}=Array,Dh=kh("undefined");const Oh=Rh("ArrayBuffer");const Ph=kh("string"),Nh=kh("function"),Qh=kh("number"),Hh=t=>null!==t&&"object"==typeof t,Gh=t=>{if("object"!==Th(t))return!1;const e=Mh(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},Vh=Rh("Date"),zh=Rh("File"),Kh=Rh("Blob"),jh=Rh("FileList"),Wh=Rh("URLSearchParams"),[$h,Yh,Xh,qh]=["ReadableStream","Request","Response","Headers"].map(Rh);function Zh(t,e,{allOwnKeys:i=!1}={}){if(null==t)return;let n,s;if("object"!=typeof t&&(t=[t]),Uh(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const s=i?Object.getOwnPropertyNames(t):Object.keys(t),r=s.length;let o;for(n=0;n<r;n++)o=s[n],e.call(null,t[o],o,t)}}function Jh(t,e){e=e.toLowerCase();const i=Object.keys(t);let n,s=i.length;for(;s-- >0;)if(n=i[s],e===n.toLowerCase())return n;return null}const tu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,eu=t=>!Dh(t)&&t!==tu;const iu=(nu="undefined"!=typeof Uint8Array&&Mh(Uint8Array),t=>nu&&t instanceof nu);var nu;const su=Rh("HTMLFormElement"),ru=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),ou=Rh("RegExp"),au=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),n={};Zh(i,((i,s)=>{let r;!1!==(r=e(i,s,t))&&(n[s]=r||i)})),Object.defineProperties(t,n)};const lu=Rh("AsyncFunction"),Au=(cu="function"==typeof setImmediate,hu=Nh(tu.postMessage),cu?setImmediate:hu?(uu=`axios@${Math.random()}`,du=[],tu.addEventListener("message",(({source:t,data:e})=>{t===tu&&e===uu&&du.length&&du.shift()()}),!1),t=>{du.push(t),tu.postMessage(uu,"*")}):t=>setTimeout(t));var cu,hu,uu,du;const gu="undefined"!=typeof queueMicrotask?queueMicrotask.bind(tu):"undefined"!=typeof process&&process.nextTick||Au;var pu={isArray:Uh,isArrayBuffer:Oh,isBuffer:function(t){return null!==t&&!Dh(t)&&null!==t.constructor&&!Dh(t.constructor)&&Nh(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||Nh(t.append)&&("formdata"===(e=Th(t))||"object"===e&&Nh(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Oh(t.buffer),e},isString:Ph,isNumber:Qh,isBoolean:t=>!0===t||!1===t,isObject:Hh,isPlainObject:Gh,isReadableStream:$h,isRequest:Yh,isResponse:Xh,isHeaders:qh,isUndefined:Dh,isDate:Vh,isFile:zh,isBlob:Kh,isRegExp:ou,isFunction:Nh,isStream:t=>Hh(t)&&Nh(t.pipe),isURLSearchParams:Wh,isTypedArray:iu,isFileList:jh,forEach:Zh,merge:function t(){const{caseless:e}=eu(this)&&this||{},i={},n=(n,s)=>{const r=e&&Jh(i,s)||s;Gh(i[r])&&Gh(n)?i[r]=t(i[r],n):Gh(n)?i[r]=t({},n):Uh(n)?i[r]=n.slice():i[r]=n};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&Zh(arguments[t],n);return i},extend:(t,e,i,{allOwnKeys:n}={})=>(Zh(e,((e,n)=>{i&&Nh(e)?t[n]=Ih(e,i):t[n]=e}),{allOwnKeys:n}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,i,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},toFlatObject:(t,e,i,n)=>{let s,r,o;const a={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),r=s.length;r-- >0;)o=s[r],n&&!n(o,t,e)||a[o]||(e[o]=t[o],a[o]=!0);t=!1!==i&&Mh(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},kindOf:Th,kindOfTest:Rh,endsWith:(t,e,i)=>{t=String(t),(void 0===i||i>t.length)&&(i=t.length),i-=e.length;const n=t.indexOf(e,i);return-1!==n&&n===i},toArray:t=>{if(!t)return null;if(Uh(t))return t;let e=t.length;if(!Qh(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},forEachEntry:(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=i.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},matchAll:(t,e)=>{let i;const n=[];for(;null!==(i=t.exec(e));)n.push(i);return n},isHTMLForm:su,hasOwnProperty:ru,hasOwnProp:ru,reduceDescriptors:au,freezeMethods:t=>{au(t,((e,i)=>{if(Nh(t)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const n=t[i];Nh(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(t,e)=>{const i={},n=t=>{t.forEach((t=>{i[t]=!0}))};return Uh(t)?n(t):n(String(t).split(e)),i},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,i){return e.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(t,e)=>null!=t&&Number.isFinite(t=+t)?t:e,findKey:Jh,global:tu,isContextDefined:eu,isSpecCompliantForm:function(t){return!!(t&&Nh(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),i=(t,n)=>{if(Hh(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const s=Uh(t)?[]:{};return Zh(t,((t,e)=>{const r=i(t,n+1);!Dh(r)&&(s[e]=r)})),e[n]=void 0,s}}return t};return i(t,0)},isAsyncFn:lu,isThenable:t=>t&&(Hh(t)||Nh(t))&&Nh(t.then)&&Nh(t.catch),setImmediate:Au,asap:gu};function fu(t,e,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}pu.inherits(fu,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pu.toJSONObject(this.config),code:this.code,status:this.status}}});const mu=fu.prototype,_u={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{_u[t]={value:t}})),Object.defineProperties(fu,_u),Object.defineProperty(mu,"isAxiosError",{value:!0}),fu.from=(t,e,i,n,s,r)=>{const o=Object.create(mu);return pu.toFlatObject(t,o,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),fu.call(o,t.message,e,i,n,s),o.cause=t,o.name=t.name,r&&Object.assign(o,r),o};function yu(t){return pu.isPlainObject(t)||pu.isArray(t)}function wu(t){return pu.endsWith(t,"[]")?t.slice(0,-2):t}function vu(t,e,i){return t?t.concat(e).map((function(t,e){return t=wu(t),!i&&e?"["+t+"]":t})).join(i?".":""):e}const bu=pu.toFlatObject(pu,{},null,(function(t){return/^is[A-Z]/.test(t)}));function Cu(t,e,i){if(!pu.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const n=(i=pu.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!pu.isUndefined(e[t])}))).metaTokens,s=i.visitor||A,r=i.dots,o=i.indexes,a=(i.Blob||"undefined"!=typeof Blob&&Blob)&&pu.isSpecCompliantForm(e);if(!pu.isFunction(s))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(pu.isDate(t))return t.toISOString();if(!a&&pu.isBlob(t))throw new fu("Blob is not supported. Use a Buffer instead.");return pu.isArrayBuffer(t)||pu.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function A(t,i,s){let a=t;if(t&&!s&&"object"==typeof t)if(pu.endsWith(i,"{}"))i=n?i:i.slice(0,-2),t=JSON.stringify(t);else if(pu.isArray(t)&&function(t){return pu.isArray(t)&&!t.some(yu)}(t)||(pu.isFileList(t)||pu.endsWith(i,"[]"))&&(a=pu.toArray(t)))return i=wu(i),a.forEach((function(t,n){!pu.isUndefined(t)&&null!==t&&e.append(!0===o?vu([i],n,r):null===o?i:i+"[]",l(t))})),!1;return!!yu(t)||(e.append(vu(s,i,r),l(t)),!1)}const c=[],h=Object.assign(bu,{defaultVisitor:A,convertValue:l,isVisitable:yu});if(!pu.isObject(t))throw new TypeError("data must be an object");return function t(i,n){if(!pu.isUndefined(i)){if(-1!==c.indexOf(i))throw Error("Circular reference detected in "+n.join("."));c.push(i),pu.forEach(i,(function(i,r){!0===(!(pu.isUndefined(i)||null===i)&&s.call(e,i,pu.isString(r)?r.trim():r,n,h))&&t(i,n?n.concat(r):[r])})),c.pop()}}(t),e}function xu(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Bu(t,e){this._pairs=[],t&&Cu(t,this,e)}const Eu=Bu.prototype;function Su(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fu(t,e,i){if(!e)return t;const n=i&&i.encode||Su;pu.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let r;if(r=s?s(e,i):pu.isURLSearchParams(e)?e.toString():new Bu(e,i).toString(n),r){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}Eu.append=function(t,e){this._pairs.push([t,e])},Eu.toString=function(t){const e=t?function(e){return t.call(this,e,xu)}:xu;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};class Iu{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){pu.forEach(this.handlers,(function(e){null!==e&&t(e)}))}}var Lu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mu={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Bu,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Tu="undefined"!=typeof window&&"undefined"!=typeof document,Ru="object"==typeof navigator&&navigator||void 0,ku=Tu&&(!Ru||["ReactNative","NativeScript","NS"].indexOf(Ru.product)<0),Uu="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Du=Tu&&window.location.href||"http://localhost";var Ou={...Object.freeze({__proto__:null,hasBrowserEnv:Tu,hasStandardBrowserEnv:ku,hasStandardBrowserWebWorkerEnv:Uu,navigator:Ru,origin:Du}),...Mu};function Pu(t){function e(t,i,n,s){let r=t[s++];if("__proto__"===r)return!0;const o=Number.isFinite(+r),a=s>=t.length;if(r=!r&&pu.isArray(n)?n.length:r,a)return pu.hasOwnProp(n,r)?n[r]=[n[r],i]:n[r]=i,!o;n[r]&&pu.isObject(n[r])||(n[r]=[]);return e(t,i,n[r],s)&&pu.isArray(n[r])&&(n[r]=function(t){const e={},i=Object.keys(t);let n;const s=i.length;let r;for(n=0;n<s;n++)r=i[n],e[r]=t[r];return e}(n[r])),!o}if(pu.isFormData(t)&&pu.isFunction(t.entries)){const i={};return pu.forEachEntry(t,((t,n)=>{e(function(t){return pu.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),n,i,0)})),i}return null}const Nu={transitional:Lu,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",n=i.indexOf("application/json")>-1,s=pu.isObject(t);s&&pu.isHTMLForm(t)&&(t=new FormData(t));if(pu.isFormData(t))return n?JSON.stringify(Pu(t)):t;if(pu.isArrayBuffer(t)||pu.isBuffer(t)||pu.isStream(t)||pu.isFile(t)||pu.isBlob(t)||pu.isReadableStream(t))return t;if(pu.isArrayBufferView(t))return t.buffer;if(pu.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let r;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Cu(t,new Ou.classes.URLSearchParams,Object.assign({visitor:function(t,e,i,n){return Ou.isNode&&pu.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((r=pu.isFileList(t))||i.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Cu(r?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||n?(e.setContentType("application/json",!1),function(t,e,i){if(pu.isString(t))try{return(e||JSON.parse)(t),pu.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(i||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Nu.transitional,i=e&&e.forcedJSONParsing,n="json"===this.responseType;if(pu.isResponse(t)||pu.isReadableStream(t))return t;if(t&&pu.isString(t)&&(i&&!this.responseType||n)){const i=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(i){if("SyntaxError"===t.name)throw fu.from(t,fu.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ou.classes.FormData,Blob:Ou.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pu.forEach(["delete","get","head","post","put","patch"],(t=>{Nu.headers[t]={}}));const Qu=pu.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Hu=Symbol("internals");function Gu(t){return t&&String(t).trim().toLowerCase()}function Vu(t){return!1===t||null==t?t:pu.isArray(t)?t.map(Vu):String(t)}function zu(t,e,i,n,s){return pu.isFunction(n)?n.call(this,e,i):(s&&(e=i),pu.isString(e)?pu.isString(n)?-1!==e.indexOf(n):pu.isRegExp(n)?n.test(e):void 0:void 0)}let Ku=class{constructor(t){t&&this.set(t)}set(t,e,i){const n=this;function s(t,e,i){const s=Gu(e);if(!s)throw new Error("header name must be a non-empty string");const r=pu.findKey(n,s);(!r||void 0===n[r]||!0===i||void 0===i&&!1!==n[r])&&(n[r||e]=Vu(t))}const r=(t,e)=>pu.forEach(t,((t,i)=>s(t,i,e)));if(pu.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(pu.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))r((t=>{const e={};let i,n,s;return t&&t.split("\n").forEach((function(t){s=t.indexOf(":"),i=t.substring(0,s).trim().toLowerCase(),n=t.substring(s+1).trim(),!i||e[i]&&Qu[i]||("set-cookie"===i?e[i]?e[i].push(n):e[i]=[n]:e[i]=e[i]?e[i]+", "+n:n)})),e})(t),e);else if(pu.isHeaders(t))for(const[e,n]of t.entries())s(n,e,i);else null!=t&&s(e,t,i);return this}get(t,e){if(t=Gu(t)){const i=pu.findKey(this,t);if(i){const t=this[i];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(t);)e[n[1]]=n[2];return e}(t);if(pu.isFunction(e))return e.call(this,t,i);if(pu.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Gu(t)){const i=pu.findKey(this,t);return!(!i||void 0===this[i]||e&&!zu(0,this[i],i,e))}return!1}delete(t,e){const i=this;let n=!1;function s(t){if(t=Gu(t)){const s=pu.findKey(i,t);!s||e&&!zu(0,i[s],s,e)||(delete i[s],n=!0)}}return pu.isArray(t)?t.forEach(s):s(t),n}clear(t){const e=Object.keys(this);let i=e.length,n=!1;for(;i--;){const s=e[i];t&&!zu(0,this[s],s,t,!0)||(delete this[s],n=!0)}return n}normalize(t){const e=this,i={};return pu.forEach(this,((n,s)=>{const r=pu.findKey(i,s);if(r)return e[r]=Vu(n),void delete e[s];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,i)=>e.toUpperCase()+i))}(s):String(s).trim();o!==s&&delete e[s],e[o]=Vu(n),i[o]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return pu.forEach(this,((i,n)=>{null!=i&&!1!==i&&(e[n]=t&&pu.isArray(i)?i.join(", "):i)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach((t=>i.set(t))),i}static accessor(t){const e=(this[Hu]=this[Hu]={accessors:{}}).accessors,i=this.prototype;function n(t){const n=Gu(t);e[n]||(!function(t,e){const i=pu.toCamelCase(" "+e);["get","set","has"].forEach((n=>{Object.defineProperty(t,n+i,{value:function(t,i,s){return this[n].call(this,e,t,i,s)},configurable:!0})}))}(i,t),e[n]=!0)}return pu.isArray(t)?t.forEach(n):n(t),this}};function ju(t,e){const i=this||Nu,n=e||i,s=Ku.from(n.headers);let r=n.data;return pu.forEach(t,(function(t){r=t.call(i,r,s.normalize(),e?e.status:void 0)})),s.normalize(),r}function Wu(t){return!(!t||!t.__CANCEL__)}function $u(t,e,i){fu.call(this,null==t?"canceled":t,fu.ERR_CANCELED,e,i),this.name="CanceledError"}function Yu(t,e,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?e(new fu("Request failed with status code "+i.status,[fu.ERR_BAD_REQUEST,fu.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):t(i)}Ku.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),pu.reduceDescriptors(Ku.prototype,(({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[i]=t}}})),pu.freezeMethods(Ku),pu.inherits($u,fu,{__CANCEL__:!0});const Xu=(t,e,i=3)=>{let n=0;const s=function(t,e){t=t||10;const i=new Array(t),n=new Array(t);let s,r=0,o=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),A=n[o];s||(s=l),i[r]=a,n[r]=l;let c=o,h=0;for(;c!==r;)h+=i[c++],c%=t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),l-s<e)return;const u=A&&l-A;return u?Math.round(1e3*h/u):void 0}}(50,250);return function(t,e){let i,n,s=0,r=1e3/e;const o=(e,r=Date.now())=>{s=r,i=null,n&&(clearTimeout(n),n=null),t.apply(null,e)};return[(...t)=>{const e=Date.now(),a=e-s;a>=r?o(t,e):(i=t,n||(n=setTimeout((()=>{n=null,o(i)}),r-a)))},()=>i&&o(i)]}((i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,a=r-n,l=s(a);n=r;t({loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&r<=o?(o-r)/l:void 0,event:i,lengthComputable:null!=o,[e?"download":"upload"]:!0})}),i)},qu=(t,e)=>{const i=null!=t;return[n=>e[0]({lengthComputable:i,total:t,loaded:n}),e[1]]},Zu=t=>(...e)=>pu.asap((()=>t(...e)));var Ju=Ou.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,Ou.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(Ou.origin),Ou.navigator&&/(msie|trident)/i.test(Ou.navigator.userAgent)):()=>!0,td=Ou.hasStandardBrowserEnv?{write(t,e,i,n,s,r){const o=[t+"="+encodeURIComponent(e)];pu.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),pu.isString(n)&&o.push("path="+n),pu.isString(s)&&o.push("domain="+s),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ed(t,e,i){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e);return t&&(n||0==i)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const id=t=>t instanceof Ku?{...t}:t;function nd(t,e){e=e||{};const i={};function n(t,e,i,n){return pu.isPlainObject(t)&&pu.isPlainObject(e)?pu.merge.call({caseless:n},t,e):pu.isPlainObject(e)?pu.merge({},e):pu.isArray(e)?e.slice():e}function s(t,e,i,s){return pu.isUndefined(e)?pu.isUndefined(t)?void 0:n(void 0,t,0,s):n(t,e,0,s)}function r(t,e){if(!pu.isUndefined(e))return n(void 0,e)}function o(t,e){return pu.isUndefined(e)?pu.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function a(i,s,r){return r in e?n(i,s):r in t?n(void 0,i):void 0}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(t,e,i)=>s(id(t),id(e),0,!0)};return pu.forEach(Object.keys(Object.assign({},t,e)),(function(n){const r=l[n]||s,o=r(t[n],e[n],n);pu.isUndefined(o)&&r!==a||(i[n]=o)})),i}var sd=t=>{const e=nd({},t);let i,{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:o,headers:a,auth:l}=e;if(e.headers=a=Ku.from(a),e.url=Fu(ed(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),pu.isFormData(n))if(Ou.hasStandardBrowserEnv||Ou.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(i=a.getContentType())){const[t,...e]=i?i.split(";").map((t=>t.trim())).filter(Boolean):[];a.setContentType([t||"multipart/form-data",...e].join("; "))}if(Ou.hasStandardBrowserEnv&&(s&&pu.isFunction(s)&&(s=s(e)),s||!1!==s&&Ju(e.url))){const t=r&&o&&td.read(o);t&&a.set(r,t)}return e};var rd="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,i){const n=sd(t);let s=n.data;const r=Ku.from(n.headers).normalize();let o,a,l,A,c,{responseType:h,onUploadProgress:u,onDownloadProgress:d}=n;function g(){A&&A(),c&&c(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let p=new XMLHttpRequest;function f(){if(!p)return;const n=Ku.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Yu((function(t){e(t),g()}),(function(t){i(t),g()}),{data:h&&"text"!==h&&"json"!==h?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:t,request:p}),p=null}p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout,"onloadend"in p?p.onloadend=f:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(f)},p.onabort=function(){p&&(i(new fu("Request aborted",fu.ECONNABORTED,t,p)),p=null)},p.onerror=function(){i(new fu("Network Error",fu.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let e=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||Lu;n.timeoutErrorMessage&&(e=n.timeoutErrorMessage),i(new fu(e,s.clarifyTimeoutError?fu.ETIMEDOUT:fu.ECONNABORTED,t,p)),p=null},void 0===s&&r.setContentType(null),"setRequestHeader"in p&&pu.forEach(r.toJSON(),(function(t,e){p.setRequestHeader(e,t)})),pu.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),h&&"json"!==h&&(p.responseType=n.responseType),d&&([l,c]=Xu(d,!0),p.addEventListener("progress",l)),u&&p.upload&&([a,A]=Xu(u),p.upload.addEventListener("progress",a),p.upload.addEventListener("loadend",A)),(n.cancelToken||n.signal)&&(o=e=>{p&&(i(!e||e.type?new $u(null,t,p):e),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const m=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(n.url);m&&-1===Ou.protocols.indexOf(m)?i(new fu("Unsupported protocol "+m+":",fu.ERR_BAD_REQUEST,t)):p.send(s||null)}))};const od=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let i,n=new AbortController;const s=function(t){if(!i){i=!0,o();const e=t instanceof Error?t:this.reason;n.abort(e instanceof fu?e:new $u(e instanceof Error?e.message:e))}};let r=e&&setTimeout((()=>{r=null,s(new fu(`timeout ${e} of ms exceeded`,fu.ETIMEDOUT))}),e);const o=()=>{t&&(r&&clearTimeout(r),r=null,t.forEach((t=>{t.unsubscribe?t.unsubscribe(s):t.removeEventListener("abort",s)})),t=null)};t.forEach((t=>t.addEventListener("abort",s)));const{signal:a}=n;return a.unsubscribe=()=>pu.asap(o),a}},ad=function*(t,e){let i=t.byteLength;if(i<e)return void(yield t);let n,s=0;for(;s<i;)n=s+e,yield t.slice(s,n),s=n},ld=async function*(t){if(t[Symbol.asyncIterator])return void(yield*t);const e=t.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Ad=(t,e,i,n)=>{const s=async function*(t,e){for await(const i of ld(t))yield*ad(i,e)}(t,e);let r,o=0,a=t=>{r||(r=!0,n&&n(t))};return new ReadableStream({async pull(t){try{const{done:e,value:n}=await s.next();if(e)return a(),void t.close();let r=n.byteLength;if(i){let t=o+=r;i(t)}t.enqueue(new Uint8Array(n))}catch(t){throw a(t),t}},cancel:t=>(a(t),s.return())},{highWaterMark:2})},cd="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,hd=cd&&"function"==typeof ReadableStream,ud=cd&&("function"==typeof TextEncoder?(dd=new TextEncoder,t=>dd.encode(t)):async t=>new Uint8Array(await new Response(t).arrayBuffer()));var dd;const gd=(t,...e)=>{try{return!!t(...e)}catch(t){return!1}},pd=hd&&gd((()=>{let t=!1;const e=new Request(Ou.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})),fd=hd&&gd((()=>pu.isReadableStream(new Response("").body))),md={stream:fd&&(t=>t.body)};var _d;cd&&(_d=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!md[t]&&(md[t]=pu.isFunction(_d[t])?e=>e[t]():(e,i)=>{throw new fu(`Response type '${t}' is not supported`,fu.ERR_NOT_SUPPORT,i)})})));const yd=async(t,e)=>{const i=pu.toFiniteNumber(t.getContentLength());return null==i?(async t=>{if(null==t)return 0;if(pu.isBlob(t))return t.size;if(pu.isSpecCompliantForm(t)){const e=new Request(Ou.origin,{method:"POST",body:t});return(await e.arrayBuffer()).byteLength}return pu.isArrayBufferView(t)||pu.isArrayBuffer(t)?t.byteLength:(pu.isURLSearchParams(t)&&(t+=""),pu.isString(t)?(await ud(t)).byteLength:void 0)})(e):i};var wd=cd&&(async t=>{let{url:e,method:i,data:n,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:A,headers:c,withCredentials:h="same-origin",fetchOptions:u}=sd(t);A=A?(A+"").toLowerCase():"text";let d,g=od([s,r&&r.toAbortSignal()],o);const p=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let f;try{if(l&&pd&&"get"!==i&&"head"!==i&&0!==(f=await yd(c,n))){let t,i=new Request(e,{method:"POST",body:n,duplex:"half"});if(pu.isFormData(n)&&(t=i.headers.get("content-type"))&&c.setContentType(t),i.body){const[t,e]=qu(f,Xu(Zu(l)));n=Ad(i.body,65536,t,e)}}pu.isString(h)||(h=h?"include":"omit");const s="credentials"in Request.prototype;d=new Request(e,{...u,signal:g,method:i.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:s?h:void 0});let r=await fetch(d);const o=fd&&("stream"===A||"response"===A);if(fd&&(a||o&&p)){const t={};["status","statusText","headers"].forEach((e=>{t[e]=r[e]}));const e=pu.toFiniteNumber(r.headers.get("content-length")),[i,n]=a&&qu(e,Xu(Zu(a),!0))||[];r=new Response(Ad(r.body,65536,i,(()=>{n&&n(),p&&p()})),t)}A=A||"text";let m=await md[pu.findKey(md,A)||"text"](r,t);return!o&&p&&p(),await new Promise(((e,i)=>{Yu(e,i,{data:m,headers:Ku.from(r.headers),status:r.status,statusText:r.statusText,config:t,request:d})}))}catch(e){if(p&&p(),e&&"TypeError"===e.name&&/fetch/i.test(e.message))throw Object.assign(new fu("Network Error",fu.ERR_NETWORK,t,d),{cause:e.cause||e});throw fu.from(e,e&&e.code,t,d)}});const vd={http:null,xhr:rd,fetch:wd};pu.forEach(vd,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));const bd=t=>`- ${t}`,Cd=t=>pu.isFunction(t)||null===t||!1===t;var xd=t=>{t=pu.isArray(t)?t:[t];const{length:e}=t;let i,n;const s={};for(let r=0;r<e;r++){let e;if(i=t[r],n=i,!Cd(i)&&(n=vd[(e=String(i)).toLowerCase()],void 0===n))throw new fu(`Unknown adapter '${e}'`);if(n)break;s[e||"#"+r]=n}if(!n){const t=Object.entries(s).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));throw new fu("There is no suitable adapter to dispatch the request "+(e?t.length>1?"since :\n"+t.map(bd).join("\n"):" "+bd(t[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function Bd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $u(null,t)}function Ed(t){Bd(t),t.headers=Ku.from(t.headers),t.data=ju.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return xd(t.adapter||Nu.adapter)(t).then((function(e){return Bd(t),e.data=ju.call(t,t.transformResponse,e),e.headers=Ku.from(e.headers),e}),(function(e){return Wu(e)||(Bd(t),e&&e.response&&(e.response.data=ju.call(t,t.transformResponse,e.response),e.response.headers=Ku.from(e.response.headers))),Promise.reject(e)}))}const Sd="1.8.4",Fd={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Fd[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}}));const Id={};Fd.transitional=function(t,e,i){function n(t,e){return"[Axios v1.8.4] Transitional option '"+t+"'"+e+(i?". "+i:"")}return(i,s,r)=>{if(!1===t)throw new fu(n(s," has been removed"+(e?" in "+e:"")),fu.ERR_DEPRECATED);return e&&!Id[s]&&(Id[s]=!0,console.warn(n(s," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(i,s,r)}},Fd.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};var Ld={assertOptions:function(t,e,i){if("object"!=typeof t)throw new fu("options must be an object",fu.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const r=n[s],o=e[r];if(o){const e=t[r],i=void 0===e||o(e,r,t);if(!0!==i)throw new fu("option "+r+" must be "+i,fu.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new fu("Unknown option "+r,fu.ERR_BAD_OPTION)}},validators:Fd};const Md=Ld.validators;let Td=class{constructor(t){this.defaults=t,this.interceptors={request:new Iu,response:new Iu}}async request(t,e){try{return await this._request(t,e)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const i=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?i&&!String(t.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+i):t.stack=i}catch(t){}}throw t}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=nd(this.defaults,e);const{transitional:i,paramsSerializer:n,headers:s}=e;void 0!==i&&Ld.assertOptions(i,{silentJSONParsing:Md.transitional(Md.boolean),forcedJSONParsing:Md.transitional(Md.boolean),clarifyTimeoutError:Md.transitional(Md.boolean)},!1),null!=n&&(pu.isFunction(n)?e.paramsSerializer={serialize:n}:Ld.assertOptions(n,{encode:Md.function,serialize:Md.function},!0)),void 0!==e.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Ld.assertOptions(e,{baseUrl:Md.spelling("baseURL"),withXsrfToken:Md.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=s&&pu.merge(s.common,s[e.method]);s&&pu.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete s[t]})),e.headers=Ku.concat(r,s);const o=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));const l=[];let A;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let c,h=0;if(!a){const t=[Ed.bind(this),void 0];for(t.unshift.apply(t,o),t.push.apply(t,l),c=t.length,A=Promise.resolve(e);h<c;)A=A.then(t[h++],t[h++]);return A}c=o.length;let u=e;for(h=0;h<c;){const t=o[h++],e=o[h++];try{u=t(u)}catch(t){e.call(this,t);break}}try{A=Ed.call(this,u)}catch(t){return Promise.reject(t)}for(h=0,c=l.length;h<c;)A=A.then(l[h++],l[h++]);return A}getUri(t){return Fu(ed((t=nd(this.defaults,t)).baseURL,t.url,t.allowAbsoluteUrls),t.params,t.paramsSerializer)}};pu.forEach(["delete","get","head","options"],(function(t){Td.prototype[t]=function(e,i){return this.request(nd(i||{},{method:t,url:e,data:(i||{}).data}))}})),pu.forEach(["post","put","patch"],(function(t){function e(e){return function(i,n,s){return this.request(nd(s||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}Td.prototype[t]=e(),Td.prototype[t+"Form"]=e(!0)}));const Rd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rd).forEach((([t,e])=>{Rd[e]=t}));const kd=function t(e){const i=new Td(e),n=Ih(Td.prototype.request,i);return pu.extend(n,Td.prototype,i,{allOwnKeys:!0}),pu.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return t(nd(e,i))},n}(Nu);kd.Axios=Td,kd.CanceledError=$u,kd.CancelToken=class t{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const i=this;this.promise.then((t=>{if(!i._listeners)return;let e=i._listeners.length;for(;e-- >0;)i._listeners[e](t);i._listeners=null})),this.promise.then=t=>{let e;const n=new Promise((t=>{i.subscribe(t),e=t})).then(t);return n.cancel=function(){i.unsubscribe(e)},n},t((function(t,n,s){i.reason||(i.reason=new $u(t,n,s),e(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let e;const i=new t((function(t){e=t}));return{token:i,cancel:e}}},kd.isCancel=Wu,kd.VERSION=Sd,kd.toFormData=Cu,kd.AxiosError=fu,kd.Cancel=kd.CanceledError,kd.all=function(t){return Promise.all(t)},kd.spread=function(t){return function(e){return t.apply(null,e)}},kd.isAxiosError=function(t){return pu.isObject(t)&&!0===t.isAxiosError},kd.mergeConfig=nd,kd.AxiosHeaders=Ku,kd.formToJSON=t=>Pu(pu.isHTMLForm(t)?new FormData(t):t),kd.getAdapter=xd,kd.HttpStatusCode=Rd,kd.default=kd;const{Axios:Ud,AxiosError:Dd,CanceledError:Od,isCancel:Pd,CancelToken:Nd,VERSION:Qd,all:Hd,Cancel:Gd,isAxiosError:Vd,spread:zd,toFormData:Kd,AxiosHeaders:jd,HttpStatusCode:Wd,formToJSON:$d,getAdapter:Yd,mergeConfig:Xd}=kd;function qd(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zd,Jd={exports:{}};var tg=(Zd||(Zd=1,function(t){t.exports=function(){var e,i;function n(){return e.apply(null,arguments)}function s(t){e=t}function r(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(a(t,e))return!1;return!0}function A(t){return void 0===t}function c(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function h(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var i,n=[],s=t.length;for(i=0;i<s;++i)n.push(e(t[i],i));return n}function d(t,e){for(var i in e)a(e,i)&&(t[i]=e[i]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function g(t,e,i,n){return Wi(t,e,i,n,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(t){return null==t._pf&&(t._pf=p()),t._pf}function m(t){var e=null,n=!1,s=t._d&&!isNaN(t._d.getTime());return s&&(e=f(t),n=i.call(e.parsedDateParts,(function(t){return null!=t})),s=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(s=s&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)),null!=Object.isFrozen&&Object.isFrozen(t)?s:(t._isValid=s,t._isValid)}function _(t){var e=g(NaN);return null!=t?d(f(e),t):f(e).userInvalidated=!0,e}i=Array.prototype.some?Array.prototype.some:function(t){var e,i=Object(this),n=i.length>>>0;for(e=0;e<n;e++)if(e in i&&t.call(this,i[e],e,i))return!0;return!1};var y=n.momentProperties=[],w=!1;function v(t,e){var i,n,s,r=y.length;if(A(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),A(e._i)||(t._i=e._i),A(e._f)||(t._f=e._f),A(e._l)||(t._l=e._l),A(e._strict)||(t._strict=e._strict),A(e._tzm)||(t._tzm=e._tzm),A(e._isUTC)||(t._isUTC=e._isUTC),A(e._offset)||(t._offset=e._offset),A(e._pf)||(t._pf=f(e)),A(e._locale)||(t._locale=e._locale),r>0)for(i=0;i<r;i++)A(s=e[n=y[i]])||(t[n]=s);return t}function b(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,n.updateOffset(this),w=!1)}function C(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function x(t){!1===n.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function B(t,e){var i=!0;return d((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,t),i){var s,r,o,l=[],A=arguments.length;for(r=0;r<A;r++){if(s="","object"==typeof arguments[r]){for(o in s+="\n["+r+"] ",arguments[0])a(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];l.push(s)}x(t+"\nArguments: "+Array.prototype.slice.call(l).join("")+"\n"+(new Error).stack),i=!1}return e.apply(this,arguments)}),e)}var E,S={};function F(t,e){null!=n.deprecationHandler&&n.deprecationHandler(t,e),S[t]||(x(e),S[t]=!0)}function I(t){return"undefined"!=typeof Function&&t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function L(t){var e,i;for(i in t)a(t,i)&&(I(e=t[i])?this[i]=e:this["_"+i]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function M(t,e){var i,n=d({},t);for(i in e)a(e,i)&&(o(t[i])&&o(e[i])?(n[i]={},d(n[i],t[i]),d(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)a(t,i)&&!a(e,i)&&o(t[i])&&(n[i]=d({},n[i]));return n}function T(t){null!=t&&this.set(t)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,E=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)a(t,e)&&i.push(e);return i};var R={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function k(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return I(n)?n.call(e,i):n}function U(t,e,i){var n=""+Math.abs(t),s=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var D=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,P={},N={};function Q(t,e,i,n){var s=n;"string"==typeof n&&(s=function(){return this[n]()}),t&&(N[t]=s),e&&(N[e[0]]=function(){return U(s.apply(this,arguments),e[1],e[2])}),i&&(N[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function G(t){var e,i,n=t.match(D);for(e=0,i=n.length;e<i;e++)N[n[e]]?n[e]=N[n[e]]:n[e]=H(n[e]);return function(e){var s,r="";for(s=0;s<i;s++)r+=I(n[s])?n[s].call(e,t):n[s];return r}}function V(t,e){return t.isValid()?(e=z(e,t.localeData()),P[e]=P[e]||G(e),P[e](t)):t.localeData().invalidDate()}function z(t,e){var i=5;function n(t){return e.longDateFormat(t)||t}for(O.lastIndex=0;i>=0&&O.test(t);)t=t.replace(O,n),O.lastIndex=0,i-=1;return t}var K={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function j(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.match(D).map((function(t){return"MMMM"===t||"MM"===t||"DD"===t||"dddd"===t?t.slice(1):t})).join(""),this._longDateFormat[t])}var W="Invalid date";function $(){return this._invalidDate}var Y="%d",X=/\d{1,2}/;function q(t){return this._ordinal.replace("%d",t)}var Z={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function J(t,e,i,n){var s=this._relativeTime[i];return I(s)?s(t,e,i,n):s.replace(/%d/i,t)}function tt(t,e){var i=this._relativeTime[t>0?"future":"past"];return I(i)?i(e):i.replace(/%s/i,e)}var et={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function it(t){return"string"==typeof t?et[t]||et[t.toLowerCase()]:void 0}function nt(t){var e,i,n={};for(i in t)a(t,i)&&(e=it(i))&&(n[e]=t[i]);return n}var st={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function rt(t){var e,i=[];for(e in t)a(t,e)&&i.push({unit:e,priority:st[e]});return i.sort((function(t,e){return t.priority-e.priority})),i}var ot,at=/\d/,lt=/\d\d/,At=/\d{3}/,ct=/\d{4}/,ht=/[+-]?\d{6}/,ut=/\d\d?/,dt=/\d\d\d\d?/,gt=/\d\d\d\d\d\d?/,pt=/\d{1,3}/,ft=/\d{1,4}/,mt=/[+-]?\d{1,6}/,_t=/\d+/,yt=/[+-]?\d+/,wt=/Z|[+-]\d\d:?\d\d/gi,vt=/Z|[+-]\d\d(?::?\d\d)?/gi,bt=/[+-]?\d+(\.\d{1,3})?/,Ct=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xt=/^[1-9]\d?/,Bt=/^([1-9]\d|\d)/;function Et(t,e,i){ot[t]=I(e)?e:function(t,n){return t&&i?i:e}}function St(t,e){return a(ot,t)?ot[t](e._strict,e._locale):new RegExp(Ft(t))}function Ft(t){return It(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,i,n,s){return e||i||n||s})))}function It(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Lt(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function Mt(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=Lt(e)),i}ot={};var Tt={};function Rt(t,e){var i,n,s=e;for("string"==typeof t&&(t=[t]),c(e)&&(s=function(t,i){i[e]=Mt(t)}),n=t.length,i=0;i<n;i++)Tt[t[i]]=s}function kt(t,e){Rt(t,(function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)}))}function Ut(t,e,i){null!=e&&a(Tt,t)&&Tt[t](e,i._a,i,t)}function Dt(t){return t%4==0&&t%100!=0||t%400==0}var Ot=0,Pt=1,Nt=2,Qt=3,Ht=4,Gt=5,Vt=6,zt=7,Kt=8;function jt(t){return Dt(t)?366:365}Q("Y",0,0,(function(){var t=this.year();return t<=9999?U(t,4):"+"+t})),Q(0,["YY",2],0,(function(){return this.year()%100})),Q(0,["YYYY",4],0,"year"),Q(0,["YYYYY",5],0,"year"),Q(0,["YYYYYY",6,!0],0,"year"),Et("Y",yt),Et("YY",ut,lt),Et("YYYY",ft,ct),Et("YYYYY",mt,ht),Et("YYYYYY",mt,ht),Rt(["YYYYY","YYYYYY"],Ot),Rt("YYYY",(function(t,e){e[Ot]=2===t.length?n.parseTwoDigitYear(t):Mt(t)})),Rt("YY",(function(t,e){e[Ot]=n.parseTwoDigitYear(t)})),Rt("Y",(function(t,e){e[Ot]=parseInt(t,10)})),n.parseTwoDigitYear=function(t){return Mt(t)+(Mt(t)>68?1900:2e3)};var Wt,$t=Xt("FullYear",!0);function Yt(){return Dt(this.year())}function Xt(t,e){return function(i){return null!=i?(Zt(this,t,i),n.updateOffset(this,e),this):qt(this,t)}}function qt(t,e){if(!t.isValid())return NaN;var i=t._d,n=t._isUTC;switch(e){case"Milliseconds":return n?i.getUTCMilliseconds():i.getMilliseconds();case"Seconds":return n?i.getUTCSeconds():i.getSeconds();case"Minutes":return n?i.getUTCMinutes():i.getMinutes();case"Hours":return n?i.getUTCHours():i.getHours();case"Date":return n?i.getUTCDate():i.getDate();case"Day":return n?i.getUTCDay():i.getDay();case"Month":return n?i.getUTCMonth():i.getMonth();case"FullYear":return n?i.getUTCFullYear():i.getFullYear();default:return NaN}}function Zt(t,e,i){var n,s,r,o,a;if(t.isValid()&&!isNaN(i)){switch(n=t._d,s=t._isUTC,e){case"Milliseconds":return void(s?n.setUTCMilliseconds(i):n.setMilliseconds(i));case"Seconds":return void(s?n.setUTCSeconds(i):n.setSeconds(i));case"Minutes":return void(s?n.setUTCMinutes(i):n.setMinutes(i));case"Hours":return void(s?n.setUTCHours(i):n.setHours(i));case"Date":return void(s?n.setUTCDate(i):n.setDate(i));case"FullYear":break;default:return}r=i,o=t.month(),a=29!==(a=t.date())||1!==o||Dt(r)?a:28,s?n.setUTCFullYear(r,o,a):n.setFullYear(r,o,a)}}function Jt(t){return I(this[t=it(t)])?this[t]():this}function te(t,e){if("object"==typeof t){var i,n=rt(t=nt(t)),s=n.length;for(i=0;i<s;i++)this[n[i].unit](t[n[i].unit])}else if(I(this[t=it(t)]))return this[t](e);return this}function ee(t,e){return(t%e+e)%e}function ie(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=ee(e,12);return t+=(e-i)/12,1===i?Dt(t)?29:28:31-i%7%2}Wt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},Q("M",["MM",2],"Mo",(function(){return this.month()+1})),Q("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),Q("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),Et("M",ut,xt),Et("MM",ut,lt),Et("MMM",(function(t,e){return e.monthsShortRegex(t)})),Et("MMMM",(function(t,e){return e.monthsRegex(t)})),Rt(["M","MM"],(function(t,e){e[Pt]=Mt(t)-1})),Rt(["MMM","MMMM"],(function(t,e,i,n){var s=i._locale.monthsParse(t,n,i._strict);null!=s?e[Pt]=s:f(i).invalidMonth=t}));var ne="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),se="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,oe=Ct,ae=Ct;function le(t,e){return t?r(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||re).test(e)?"format":"standalone"][t.month()]:r(this._months)?this._months:this._months.standalone}function Ae(t,e){return t?r(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[re.test(e)?"format":"standalone"][t.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ce(t,e,i){var n,s,r,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=g([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(s=Wt.call(this._shortMonthsParse,o))?s:null:-1!==(s=Wt.call(this._longMonthsParse,o))?s:null:"MMM"===e?-1!==(s=Wt.call(this._shortMonthsParse,o))||-1!==(s=Wt.call(this._longMonthsParse,o))?s:null:-1!==(s=Wt.call(this._longMonthsParse,o))||-1!==(s=Wt.call(this._shortMonthsParse,o))?s:null}function he(t,e,i){var n,s,r;if(this._monthsParseExact)return ce.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=g([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ue(t,e){if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=Mt(e);else if(!c(e=t.localeData().monthsParse(e)))return t;var i=e,n=t.date();return n=n<29?n:Math.min(n,ie(t.year(),i)),t._isUTC?t._d.setUTCMonth(i,n):t._d.setMonth(i,n),t}function de(t){return null!=t?(ue(this,t),n.updateOffset(this,!0),this):qt(this,"Month")}function ge(){return ie(this.year(),this.month())}function pe(t){return this._monthsParseExact?(a(this,"_monthsRegex")||me.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=oe),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function fe(t){return this._monthsParseExact?(a(this,"_monthsRegex")||me.call(this),t?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=ae),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function me(){function t(t,e){return e.length-t.length}var e,i,n,s,r=[],o=[],a=[];for(e=0;e<12;e++)i=g([2e3,e]),n=It(this.monthsShort(i,"")),s=It(this.months(i,"")),r.push(n),o.push(s),a.push(s),a.push(n);r.sort(t),o.sort(t),a.sort(t),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function _e(t,e,i,n,s,r,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,i,n,s,r,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,i,n,s,r,o),a}function ye(t){var e,i;return t<100&&t>=0?((i=Array.prototype.slice.call(arguments))[0]=t+400,e=new Date(Date.UTC.apply(null,i)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function we(t,e,i){var n=7+e-i;return-(7+ye(t,0,n).getUTCDay()-e)%7+n-1}function ve(t,e,i,n,s){var r,o,a=1+7*(e-1)+(7+i-n)%7+we(t,n,s);return a<=0?o=jt(r=t-1)+a:a>jt(t)?(r=t+1,o=a-jt(t)):(r=t,o=a),{year:r,dayOfYear:o}}function be(t,e,i){var n,s,r=we(t.year(),e,i),o=Math.floor((t.dayOfYear()-r-1)/7)+1;return o<1?n=o+Ce(s=t.year()-1,e,i):o>Ce(t.year(),e,i)?(n=o-Ce(t.year(),e,i),s=t.year()+1):(s=t.year(),n=o),{week:n,year:s}}function Ce(t,e,i){var n=we(t,e,i),s=we(t+1,e,i);return(jt(t)-n+s)/7}function xe(t){return be(t,this._week.dow,this._week.doy).week}Q("w",["ww",2],"wo","week"),Q("W",["WW",2],"Wo","isoWeek"),Et("w",ut,xt),Et("ww",ut,lt),Et("W",ut,xt),Et("WW",ut,lt),kt(["w","ww","W","WW"],(function(t,e,i,n){e[n.substr(0,1)]=Mt(t)}));var Be={dow:0,doy:6};function Ee(){return this._week.dow}function Se(){return this._week.doy}function Fe(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ie(t){var e=be(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Le(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Me(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Te(t,e){return t.slice(e,7).concat(t.slice(0,e))}Q("d",0,"do","day"),Q("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),Q("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),Q("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),Q("e",0,0,"weekday"),Q("E",0,0,"isoWeekday"),Et("d",ut),Et("e",ut),Et("E",ut),Et("dd",(function(t,e){return e.weekdaysMinRegex(t)})),Et("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),Et("dddd",(function(t,e){return e.weekdaysRegex(t)})),kt(["dd","ddd","dddd"],(function(t,e,i,n){var s=i._locale.weekdaysParse(t,n,i._strict);null!=s?e.d=s:f(i).invalidWeekday=t})),kt(["d","e","E"],(function(t,e,i,n){e[n]=Mt(t)}));var Re="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ke="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ue="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),De=Ct,Oe=Ct,Pe=Ct;function Ne(t,e){var i=r(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Te(i,this._week.dow):t?i[t.day()]:i}function Qe(t){return!0===t?Te(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function He(t){return!0===t?Te(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ge(t,e,i){var n,s,r,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=g([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(s=Wt.call(this._weekdaysParse,o))?s:null:"ddd"===e?-1!==(s=Wt.call(this._shortWeekdaysParse,o))?s:null:-1!==(s=Wt.call(this._minWeekdaysParse,o))?s:null:"dddd"===e?-1!==(s=Wt.call(this._weekdaysParse,o))||-1!==(s=Wt.call(this._shortWeekdaysParse,o))||-1!==(s=Wt.call(this._minWeekdaysParse,o))?s:null:"ddd"===e?-1!==(s=Wt.call(this._shortWeekdaysParse,o))||-1!==(s=Wt.call(this._weekdaysParse,o))||-1!==(s=Wt.call(this._minWeekdaysParse,o))?s:null:-1!==(s=Wt.call(this._minWeekdaysParse,o))||-1!==(s=Wt.call(this._weekdaysParse,o))||-1!==(s=Wt.call(this._shortWeekdaysParse,o))?s:null}function Ve(t,e,i){var n,s,r;if(this._weekdaysParseExact)return Ge.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=g([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function ze(t){if(!this.isValid())return null!=t?this:NaN;var e=qt(this,"Day");return null!=t?(t=Le(t,this.localeData()),this.add(t-e,"d")):e}function Ke(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function je(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Me(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function We(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=De),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function $e(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oe),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ye(t){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||Xe.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pe),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xe(){function t(t,e){return e.length-t.length}var e,i,n,s,r,o=[],a=[],l=[],A=[];for(e=0;e<7;e++)i=g([2e3,1]).day(e),n=It(this.weekdaysMin(i,"")),s=It(this.weekdaysShort(i,"")),r=It(this.weekdays(i,"")),o.push(n),a.push(s),l.push(r),A.push(n),A.push(s),A.push(r);o.sort(t),a.sort(t),l.sort(t),A.sort(t),this._weekdaysRegex=new RegExp("^("+A.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function qe(){return this.hours()%12||12}function Ze(){return this.hours()||24}function Je(t,e){Q(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function ti(t,e){return e._meridiemParse}function ei(t){return"p"===(t+"").toLowerCase().charAt(0)}Q("H",["HH",2],0,"hour"),Q("h",["hh",2],0,qe),Q("k",["kk",2],0,Ze),Q("hmm",0,0,(function(){return""+qe.apply(this)+U(this.minutes(),2)})),Q("hmmss",0,0,(function(){return""+qe.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)})),Q("Hmm",0,0,(function(){return""+this.hours()+U(this.minutes(),2)})),Q("Hmmss",0,0,(function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)})),Je("a",!0),Je("A",!1),Et("a",ti),Et("A",ti),Et("H",ut,Bt),Et("h",ut,xt),Et("k",ut,xt),Et("HH",ut,lt),Et("hh",ut,lt),Et("kk",ut,lt),Et("hmm",dt),Et("hmmss",gt),Et("Hmm",dt),Et("Hmmss",gt),Rt(["H","HH"],Qt),Rt(["k","kk"],(function(t,e,i){var n=Mt(t);e[Qt]=24===n?0:n})),Rt(["a","A"],(function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t})),Rt(["h","hh"],(function(t,e,i){e[Qt]=Mt(t),f(i).bigHour=!0})),Rt("hmm",(function(t,e,i){var n=t.length-2;e[Qt]=Mt(t.substr(0,n)),e[Ht]=Mt(t.substr(n)),f(i).bigHour=!0})),Rt("hmmss",(function(t,e,i){var n=t.length-4,s=t.length-2;e[Qt]=Mt(t.substr(0,n)),e[Ht]=Mt(t.substr(n,2)),e[Gt]=Mt(t.substr(s)),f(i).bigHour=!0})),Rt("Hmm",(function(t,e,i){var n=t.length-2;e[Qt]=Mt(t.substr(0,n)),e[Ht]=Mt(t.substr(n))})),Rt("Hmmss",(function(t,e,i){var n=t.length-4,s=t.length-2;e[Qt]=Mt(t.substr(0,n)),e[Ht]=Mt(t.substr(n,2)),e[Gt]=Mt(t.substr(s))}));var ii=/[ap]\.?m?\.?/i,ni=Xt("Hours",!0);function si(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}var ri,oi={calendar:R,longDateFormat:K,invalidDate:W,ordinal:Y,dayOfMonthOrdinalParse:X,relativeTime:Z,months:ne,monthsShort:se,week:Be,weekdays:Re,weekdaysMin:Ue,weekdaysShort:ke,meridiemParse:ii},ai={},li={};function Ai(t,e){var i,n=Math.min(t.length,e.length);for(i=0;i<n;i+=1)if(t[i]!==e[i])return i;return n}function ci(t){return t?t.toLowerCase().replace("_","-"):t}function hi(t){for(var e,i,n,s,r=0;r<t.length;){for(e=(s=ci(t[r]).split("-")).length,i=(i=ci(t[r+1]))?i.split("-"):null;e>0;){if(n=di(s.slice(0,e).join("-")))return n;if(i&&i.length>=e&&Ai(s,i)>=e-1)break;e--}r++}return ri}function ui(t){return!(!t||!t.match("^[^/\\\\]*$"))}function di(e){var i=null;if(void 0===ai[e]&&t&&t.exports&&ui(e))try{i=ri._abbr,qd("./locale/"+e),gi(i)}catch(t){ai[e]=null}return ai[e]}function gi(t,e){var i;return t&&((i=A(e)?mi(t):pi(t,e))?ri=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),ri._abbr}function pi(t,e){if(null!==e){var i,n=oi;if(e.abbr=t,null!=ai[t])F("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ai[t]._config;else if(null!=e.parentLocale)if(null!=ai[e.parentLocale])n=ai[e.parentLocale]._config;else{if(null==(i=di(e.parentLocale)))return li[e.parentLocale]||(li[e.parentLocale]=[]),li[e.parentLocale].push({name:t,config:e}),null;n=i._config}return ai[t]=new T(M(n,e)),li[t]&&li[t].forEach((function(t){pi(t.name,t.config)})),gi(t),ai[t]}return delete ai[t],null}function fi(t,e){if(null!=e){var i,n,s=oi;null!=ai[t]&&null!=ai[t].parentLocale?ai[t].set(M(ai[t]._config,e)):(null!=(n=di(t))&&(s=n._config),e=M(s,e),null==n&&(e.abbr=t),(i=new T(e)).parentLocale=ai[t],ai[t]=i),gi(t)}else null!=ai[t]&&(null!=ai[t].parentLocale?(ai[t]=ai[t].parentLocale,t===gi()&&gi(t)):null!=ai[t]&&delete ai[t]);return ai[t]}function mi(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return ri;if(!r(t)){if(e=di(t))return e;t=[t]}return hi(t)}function _i(){return E(ai)}function yi(t){var e,i=t._a;return i&&-2===f(t).overflow&&(e=i[Pt]<0||i[Pt]>11?Pt:i[Nt]<1||i[Nt]>ie(i[Ot],i[Pt])?Nt:i[Qt]<0||i[Qt]>24||24===i[Qt]&&(0!==i[Ht]||0!==i[Gt]||0!==i[Vt])?Qt:i[Ht]<0||i[Ht]>59?Ht:i[Gt]<0||i[Gt]>59?Gt:i[Vt]<0||i[Vt]>999?Vt:-1,f(t)._overflowDayOfYear&&(e<Ot||e>Nt)&&(e=Nt),f(t)._overflowWeeks&&-1===e&&(e=zt),f(t)._overflowWeekday&&-1===e&&(e=Kt),f(t).overflow=e),t}var wi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bi=/Z|[+-]\d\d(?::?\d\d)?/,Ci=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],xi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Bi=/^\/?Date\((-?\d+)/i,Ei=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Si={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Fi(t){var e,i,n,s,r,o,a=t._i,l=wi.exec(a)||vi.exec(a),A=Ci.length,c=xi.length;if(l){for(f(t).iso=!0,e=0,i=A;e<i;e++)if(Ci[e][1].exec(l[1])){s=Ci[e][0],n=!1!==Ci[e][2];break}if(null==s)return void(t._isValid=!1);if(l[3]){for(e=0,i=c;e<i;e++)if(xi[e][1].exec(l[3])){r=(l[2]||" ")+xi[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!bi.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=s+(r||"")+(o||""),Qi(t)}else t._isValid=!1}function Ii(t,e,i,n,s,r){var o=[Li(t),se.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function Li(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function Mi(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ti(t,e,i){return!t||ke.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(f(i).weekdayMismatch=!0,i._isValid=!1,!1)}function Ri(t,e,i){if(t)return Si[t];if(e)return 0;var n=parseInt(i,10),s=n%100;return(n-s)/100*60+s}function ki(t){var e,i=Ei.exec(Mi(t._i));if(i){if(e=Ii(i[4],i[3],i[2],i[5],i[6],i[7]),!Ti(i[1],e,t))return;t._a=e,t._tzm=Ri(i[8],i[9],i[10]),t._d=ye.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function Ui(t){var e=Bi.exec(t._i);null===e?(Fi(t),!1===t._isValid&&(delete t._isValid,ki(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:n.createFromInputFallback(t)))):t._d=new Date(+e[1])}function Di(t,e,i){return null!=t?t:null!=e?e:i}function Oi(t){var e=new Date(n.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Pi(t){var e,i,n,s,r,o=[];if(!t._d){for(n=Oi(t),t._w&&null==t._a[Nt]&&null==t._a[Pt]&&Ni(t),null!=t._dayOfYear&&(r=Di(t._a[Ot],n[Ot]),(t._dayOfYear>jt(r)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),i=ye(r,0,t._dayOfYear),t._a[Pt]=i.getUTCMonth(),t._a[Nt]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[Qt]&&0===t._a[Ht]&&0===t._a[Gt]&&0===t._a[Vt]&&(t._nextDay=!0,t._a[Qt]=0),t._d=(t._useUTC?ye:_e).apply(null,o),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Qt]=24),t._w&&void 0!==t._w.d&&t._w.d!==s&&(f(t).weekdayMismatch=!0)}}function Ni(t){var e,i,n,s,r,o,a,l,A;null!=(e=t._w).GG||null!=e.W||null!=e.E?(r=1,o=4,i=Di(e.GG,t._a[Ot],be($i(),1,4).year),n=Di(e.W,1),((s=Di(e.E,1))<1||s>7)&&(l=!0)):(r=t._locale._week.dow,o=t._locale._week.doy,A=be($i(),r,o),i=Di(e.gg,t._a[Ot],A.year),n=Di(e.w,A.week),null!=e.d?((s=e.d)<0||s>6)&&(l=!0):null!=e.e?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),n<1||n>Ce(i,r,o)?f(t)._overflowWeeks=!0:null!=l?f(t)._overflowWeekday=!0:(a=ve(i,n,s,r,o),t._a[Ot]=a.year,t._dayOfYear=a.dayOfYear)}function Qi(t){if(t._f!==n.ISO_8601)if(t._f!==n.RFC_2822){t._a=[],f(t).empty=!0;var e,i,s,r,o,a,l,A=""+t._i,c=A.length,h=0;for(l=(s=z(t._f,t._locale).match(D)||[]).length,e=0;e<l;e++)r=s[e],(i=(A.match(St(r,t))||[])[0])&&((o=A.substr(0,A.indexOf(i))).length>0&&f(t).unusedInput.push(o),A=A.slice(A.indexOf(i)+i.length),h+=i.length),N[r]?(i?f(t).empty=!1:f(t).unusedTokens.push(r),Ut(r,i,t)):t._strict&&!i&&f(t).unusedTokens.push(r);f(t).charsLeftOver=c-h,A.length>0&&f(t).unusedInput.push(A),t._a[Qt]<=12&&!0===f(t).bigHour&&t._a[Qt]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[Qt]=Hi(t._locale,t._a[Qt],t._meridiem),null!==(a=f(t).era)&&(t._a[Ot]=t._locale.erasConvertYear(a,t._a[Ot])),Pi(t),yi(t)}else ki(t);else Fi(t)}function Hi(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function Gi(t){var e,i,n,s,r,o,a=!1,l=t._f.length;if(0===l)return f(t).invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<l;s++)r=0,o=!1,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[s],Qi(e),m(e)&&(o=!0),r+=f(e).charsLeftOver,r+=10*f(e).unusedTokens.length,f(e).score=r,a?r<n&&(n=r,i=e):(null==n||r<n||o)&&(n=r,i=e,o&&(a=!0));d(t,i||e)}function Vi(t){if(!t._d){var e=nt(t._i),i=void 0===e.day?e.date:e.day;t._a=u([e.year,e.month,i,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),Pi(t)}}function zi(t){var e=new b(yi(Ki(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Ki(t){var e=t._i,i=t._f;return t._locale=t._locale||mi(t._l),null===e||void 0===i&&""===e?_({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),C(e)?new b(yi(e)):(h(e)?t._d=e:r(i)?Gi(t):i?Qi(t):ji(t),m(t)||(t._d=null),t))}function ji(t){var e=t._i;A(e)?t._d=new Date(n.now()):h(e)?t._d=new Date(e.valueOf()):"string"==typeof e?Ui(t):r(e)?(t._a=u(e.slice(0),(function(t){return parseInt(t,10)})),Pi(t)):o(e)?Vi(t):c(e)?t._d=new Date(e):n.createFromInputFallback(t)}function Wi(t,e,i,n,s){var a={};return!0!==e&&!1!==e||(n=e,e=void 0),!0!==i&&!1!==i||(n=i,i=void 0),(o(t)&&l(t)||r(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=s,a._l=i,a._i=t,a._f=e,a._strict=n,zi(a)}function $i(t,e,i,n){return Wi(t,e,i,n,!1)}n.createFromInputFallback=B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var Yi=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=$i.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:_()})),Xi=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=$i.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:_()}));function qi(t,e){var i,n;if(1===e.length&&r(e[0])&&(e=e[0]),!e.length)return $i();for(i=e[0],n=1;n<e.length;++n)e[n].isValid()&&!e[n][t](i)||(i=e[n]);return i}function Zi(){return qi("isBefore",[].slice.call(arguments,0))}function Ji(){return qi("isAfter",[].slice.call(arguments,0))}var tn=function(){return Date.now?Date.now():+new Date},en=["year","quarter","month","week","day","hour","minute","second","millisecond"];function nn(t){var e,i,n=!1,s=en.length;for(e in t)if(a(t,e)&&(-1===Wt.call(en,e)||null!=t[e]&&isNaN(t[e])))return!1;for(i=0;i<s;++i)if(t[en[i]]){if(n)return!1;parseFloat(t[en[i]])!==Mt(t[en[i]])&&(n=!0)}return!0}function sn(){return this._isValid}function rn(){return Fn(NaN)}function on(t){var e=nt(t),i=e.year||0,n=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,A=e.second||0,c=e.millisecond||0;this._isValid=nn(e),this._milliseconds=+c+1e3*A+6e4*l+1e3*a*60*60,this._days=+o+7*r,this._months=+s+3*n+12*i,this._data={},this._locale=mi(),this._bubble()}function an(t){return t instanceof on}function ln(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function An(t,e,i){var n,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(n=0;n<s;n++)Mt(t[n])!==Mt(e[n])&&o++;return o+r}function cn(t,e){Q(t,0,0,(function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+U(~~(t/60),2)+e+U(~~t%60,2)}))}cn("Z",":"),cn("ZZ",""),Et("Z",vt),Et("ZZ",vt),Rt(["Z","ZZ"],(function(t,e,i){i._useUTC=!0,i._tzm=un(vt,t)}));var hn=/([\+\-]|\d\d)/gi;function un(t,e){var i,n,s=(e||"").match(t);return null===s?null:0===(n=60*(i=((s[s.length-1]||[])+"").match(hn)||["-",0,0])[1]+Mt(i[2]))?0:"+"===i[0]?n:-n}function dn(t,e){var i,s;return e._isUTC?(i=e.clone(),s=(C(t)||h(t)?t.valueOf():$i(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+s),n.updateOffset(i,!1),i):$i(t).local()}function gn(t){return-Math.round(t._d.getTimezoneOffset())}function pn(t,e,i){var s,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=un(vt,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(s=gn(this)),this._offset=t,this._isUTC=!0,null!=s&&this.add(s,"m"),r!==t&&(!e||this._changeInProgress?Rn(this,Fn(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:gn(this)}function fn(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function mn(t){return this.utcOffset(0,t)}function _n(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(gn(this),"m")),this}function yn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=un(wt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function wn(t){return!!this.isValid()&&(t=t?$i(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function vn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function bn(){if(!A(this._isDSTShifted))return this._isDSTShifted;var t,e={};return v(e,this),(e=Ki(e))._a?(t=e._isUTC?g(e._a):$i(e._a),this._isDSTShifted=this.isValid()&&An(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Cn(){return!!this.isValid()&&!this._isUTC}function xn(){return!!this.isValid()&&this._isUTC}function Bn(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var En=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Sn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Fn(t,e){var i,n,s,r=t,o=null;return an(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:c(t)||!isNaN(+t)?(r={},e?r[e]=+t:r.milliseconds=+t):(o=En.exec(t))?(i="-"===o[1]?-1:1,r={y:0,d:Mt(o[Nt])*i,h:Mt(o[Qt])*i,m:Mt(o[Ht])*i,s:Mt(o[Gt])*i,ms:Mt(ln(1e3*o[Vt]))*i}):(o=Sn.exec(t))?(i="-"===o[1]?-1:1,r={y:In(o[2],i),M:In(o[3],i),w:In(o[4],i),d:In(o[5],i),h:In(o[6],i),m:In(o[7],i),s:In(o[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(s=Mn($i(r.from),$i(r.to)),(r={}).ms=s.milliseconds,r.M=s.months),n=new on(r),an(t)&&a(t,"_locale")&&(n._locale=t._locale),an(t)&&a(t,"_isValid")&&(n._isValid=t._isValid),n}function In(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Ln(t,e){var i={};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Mn(t,e){var i;return t.isValid()&&e.isValid()?(e=dn(e,t),t.isBefore(e)?i=Ln(t,e):((i=Ln(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Tn(t,e){return function(i,n){var s;return null===n||isNaN(+n)||(F(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=i,i=n,n=s),Rn(this,Fn(i,n),t),this}}function Rn(t,e,i,s){var r=e._milliseconds,o=ln(e._days),a=ln(e._months);t.isValid()&&(s=null==s||s,a&&ue(t,qt(t,"Month")+a*i),o&&Zt(t,"Date",qt(t,"Date")+o*i),r&&t._d.setTime(t._d.valueOf()+r*i),s&&n.updateOffset(t,o||a))}Fn.fn=on.prototype,Fn.invalid=rn;var kn=Tn(1,"add"),Un=Tn(-1,"subtract");function Dn(t){return"string"==typeof t||t instanceof String}function On(t){return C(t)||h(t)||Dn(t)||c(t)||Nn(t)||Pn(t)||null==t}function Pn(t){var e,i,n=o(t)&&!l(t),s=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],A=r.length;for(e=0;e<A;e+=1)i=r[e],s=s||a(t,i);return n&&s}function Nn(t){var e=r(t),i=!1;return e&&(i=0===t.filter((function(e){return!c(e)&&Dn(t)})).length),e&&i}function Qn(t){var e,i,n=o(t)&&!l(t),s=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(e=0;e<r.length;e+=1)i=r[e],s=s||a(t,i);return n&&s}function Hn(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function Gn(t,e){1===arguments.length&&(arguments[0]?On(arguments[0])?(t=arguments[0],e=void 0):Qn(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var i=t||$i(),s=dn(i,this).startOf("day"),r=n.calendarFormat(this,s)||"sameElse",o=e&&(I(e[r])?e[r].call(this,i):e[r]);return this.format(o||this.localeData().calendar(r,this,$i(i)))}function Vn(){return new b(this)}function zn(t,e){var i=C(t)?t:$i(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function Kn(t,e){var i=C(t)?t:$i(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function jn(t,e,i,n){var s=C(t)?t:$i(t),r=C(e)?e:$i(e);return!!(this.isValid()&&s.isValid()&&r.isValid())&&("("===(n=n||"()")[0]?this.isAfter(s,i):!this.isBefore(s,i))&&(")"===n[1]?this.isBefore(r,i):!this.isAfter(r,i))}function Wn(t,e){var i,n=C(t)?t:$i(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=it(e)||"millisecond")?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function $n(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function Yn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function Xn(t,e,i){var n,s,r;if(!this.isValid())return NaN;if(!(n=dn(t,this)).isValid())return NaN;switch(s=6e4*(n.utcOffset()-this.utcOffset()),e=it(e)){case"year":r=qn(this,n)/12;break;case"month":r=qn(this,n);break;case"quarter":r=qn(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-s)/864e5;break;case"week":r=(this-n-s)/6048e5;break;default:r=this-n}return i?r:Lt(r)}function qn(t,e){if(t.date()<e.date())return-qn(e,t);var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function Zn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Jn(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?V(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(i,"Z")):V(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ts(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t,e,i,n,s="moment",r="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),t="["+s+'("]',e=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",n=r+'[")]',this.format(t+e+i+n)}function es(t){t||(t=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var e=V(this,t);return this.localeData().postformat(e)}function is(t,e){return this.isValid()&&(C(t)&&t.isValid()||$i(t).isValid())?Fn({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ns(t){return this.from($i(),t)}function ss(t,e){return this.isValid()&&(C(t)&&t.isValid()||$i(t).isValid())?Fn({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function rs(t){return this.to($i(),t)}function os(t){var e;return void 0===t?this._locale._abbr:(null!=(e=mi(t))&&(this._locale=e),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var as=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function ls(){return this._locale}var As=1e3,cs=60*As,hs=60*cs,us=3506328*hs;function ds(t,e){return(t%e+e)%e}function gs(t,e,i){return t<100&&t>=0?new Date(t+400,e,i)-us:new Date(t,e,i).valueOf()}function ps(t,e,i){return t<100&&t>=0?Date.UTC(t+400,e,i)-us:Date.UTC(t,e,i)}function fs(t){var e,i;if(void 0===(t=it(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?ps:gs,t){case"year":e=i(this.year(),0,1);break;case"quarter":e=i(this.year(),this.month()-this.month()%3,1);break;case"month":e=i(this.year(),this.month(),1);break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=i(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=ds(e+(this._isUTC?0:this.utcOffset()*cs),hs);break;case"minute":e=this._d.valueOf(),e-=ds(e,cs);break;case"second":e=this._d.valueOf(),e-=ds(e,As)}return this._d.setTime(e),n.updateOffset(this,!0),this}function ms(t){var e,i;if(void 0===(t=it(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?ps:gs,t){case"year":e=i(this.year()+1,0,1)-1;break;case"quarter":e=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=i(this.year(),this.month()+1,1)-1;break;case"week":e=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=hs-ds(e+(this._isUTC?0:this.utcOffset()*cs),hs)-1;break;case"minute":e=this._d.valueOf(),e+=cs-ds(e,cs)-1;break;case"second":e=this._d.valueOf(),e+=As-ds(e,As)-1}return this._d.setTime(e),n.updateOffset(this,!0),this}function _s(){return this._d.valueOf()-6e4*(this._offset||0)}function ys(){return Math.floor(this.valueOf()/1e3)}function ws(){return new Date(this.valueOf())}function vs(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function bs(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Cs(){return this.isValid()?this.toISOString():null}function xs(){return m(this)}function Bs(){return d({},f(this))}function Es(){return f(this).overflow}function Ss(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Fs(t,e){var i,s,r,o=this._eras||mi("en")._eras;for(i=0,s=o.length;i<s;++i)switch("string"==typeof o[i].since&&(r=n(o[i].since).startOf("day"),o[i].since=r.valueOf()),typeof o[i].until){case"undefined":o[i].until=1/0;break;case"string":r=n(o[i].until).startOf("day").valueOf(),o[i].until=r.valueOf()}return o}function Is(t,e,i){var n,s,r,o,a,l=this.eras();for(t=t.toUpperCase(),n=0,s=l.length;n<s;++n)if(r=l[n].name.toUpperCase(),o=l[n].abbr.toUpperCase(),a=l[n].narrow.toUpperCase(),i)switch(e){case"N":case"NN":case"NNN":if(o===t)return l[n];break;case"NNNN":if(r===t)return l[n];break;case"NNNNN":if(a===t)return l[n]}else if([r,o,a].indexOf(t)>=0)return l[n]}function Ls(t,e){var i=t.since<=t.until?1:-1;return void 0===e?n(t.since).year():n(t.since).year()+(e-t.offset)*i}function Ms(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){if(i=this.clone().startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until)return n[t].name;if(n[t].until<=i&&i<=n[t].since)return n[t].name}return""}function Ts(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){if(i=this.clone().startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until)return n[t].narrow;if(n[t].until<=i&&i<=n[t].since)return n[t].narrow}return""}function Rs(){var t,e,i,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t){if(i=this.clone().startOf("day").valueOf(),n[t].since<=i&&i<=n[t].until)return n[t].abbr;if(n[t].until<=i&&i<=n[t].since)return n[t].abbr}return""}function ks(){var t,e,i,s,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(i=r[t].since<=r[t].until?1:-1,s=this.clone().startOf("day").valueOf(),r[t].since<=s&&s<=r[t].until||r[t].until<=s&&s<=r[t].since)return(this.year()-n(r[t].since).year())*i+r[t].offset;return this.year()}function Us(t){return a(this,"_erasNameRegex")||Gs.call(this),t?this._erasNameRegex:this._erasRegex}function Ds(t){return a(this,"_erasAbbrRegex")||Gs.call(this),t?this._erasAbbrRegex:this._erasRegex}function Os(t){return a(this,"_erasNarrowRegex")||Gs.call(this),t?this._erasNarrowRegex:this._erasRegex}function Ps(t,e){return e.erasAbbrRegex(t)}function Ns(t,e){return e.erasNameRegex(t)}function Qs(t,e){return e.erasNarrowRegex(t)}function Hs(t,e){return e._eraYearOrdinalRegex||_t}function Gs(){var t,e,i,n,s,r=[],o=[],a=[],l=[],A=this.eras();for(t=0,e=A.length;t<e;++t)i=It(A[t].name),n=It(A[t].abbr),s=It(A[t].narrow),o.push(i),r.push(n),a.push(s),l.push(i),l.push(n),l.push(s);this._erasRegex=new RegExp("^("+l.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+o.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function Vs(t,e){Q(0,[t,t.length],0,e)}function zs(t){return Xs.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Ks(t){return Xs.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function js(){return Ce(this.year(),1,4)}function Ws(){return Ce(this.isoWeekYear(),1,4)}function $s(){var t=this.localeData()._week;return Ce(this.year(),t.dow,t.doy)}function Ys(){var t=this.localeData()._week;return Ce(this.weekYear(),t.dow,t.doy)}function Xs(t,e,i,n,s){var r;return null==t?be(this,n,s).year:(e>(r=Ce(t,n,s))&&(e=r),qs.call(this,t,e,i,n,s))}function qs(t,e,i,n,s){var r=ve(t,e,i,n,s),o=ye(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Zs(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}Q("N",0,0,"eraAbbr"),Q("NN",0,0,"eraAbbr"),Q("NNN",0,0,"eraAbbr"),Q("NNNN",0,0,"eraName"),Q("NNNNN",0,0,"eraNarrow"),Q("y",["y",1],"yo","eraYear"),Q("y",["yy",2],0,"eraYear"),Q("y",["yyy",3],0,"eraYear"),Q("y",["yyyy",4],0,"eraYear"),Et("N",Ps),Et("NN",Ps),Et("NNN",Ps),Et("NNNN",Ns),Et("NNNNN",Qs),Rt(["N","NN","NNN","NNNN","NNNNN"],(function(t,e,i,n){var s=i._locale.erasParse(t,n,i._strict);s?f(i).era=s:f(i).invalidEra=t})),Et("y",_t),Et("yy",_t),Et("yyy",_t),Et("yyyy",_t),Et("yo",Hs),Rt(["y","yy","yyy","yyyy"],Ot),Rt(["yo"],(function(t,e,i,n){var s;i._locale._eraYearOrdinalRegex&&(s=t.match(i._locale._eraYearOrdinalRegex)),i._locale.eraYearOrdinalParse?e[Ot]=i._locale.eraYearOrdinalParse(t,s):e[Ot]=parseInt(t,10)})),Q(0,["gg",2],0,(function(){return this.weekYear()%100})),Q(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vs("gggg","weekYear"),Vs("ggggg","weekYear"),Vs("GGGG","isoWeekYear"),Vs("GGGGG","isoWeekYear"),Et("G",yt),Et("g",yt),Et("GG",ut,lt),Et("gg",ut,lt),Et("GGGG",ft,ct),Et("gggg",ft,ct),Et("GGGGG",mt,ht),Et("ggggg",mt,ht),kt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,i,n){e[n.substr(0,2)]=Mt(t)})),kt(["gg","GG"],(function(t,e,i,s){e[s]=n.parseTwoDigitYear(t)})),Q("Q",0,"Qo","quarter"),Et("Q",at),Rt("Q",(function(t,e){e[Pt]=3*(Mt(t)-1)})),Q("D",["DD",2],"Do","date"),Et("D",ut,xt),Et("DD",ut,lt),Et("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),Rt(["D","DD"],Nt),Rt("Do",(function(t,e){e[Nt]=Mt(t.match(ut)[0])}));var Js=Xt("Date",!0);function tr(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}Q("DDD",["DDDD",3],"DDDo","dayOfYear"),Et("DDD",pt),Et("DDDD",At),Rt(["DDD","DDDD"],(function(t,e,i){i._dayOfYear=Mt(t)})),Q("m",["mm",2],0,"minute"),Et("m",ut,Bt),Et("mm",ut,lt),Rt(["m","mm"],Ht);var er=Xt("Minutes",!1);Q("s",["ss",2],0,"second"),Et("s",ut,Bt),Et("ss",ut,lt),Rt(["s","ss"],Gt);var ir,nr,sr=Xt("Seconds",!1);for(Q("S",0,0,(function(){return~~(this.millisecond()/100)})),Q(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),Q(0,["SSS",3],0,"millisecond"),Q(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),Q(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),Q(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),Q(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),Q(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),Q(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),Et("S",pt,at),Et("SS",pt,lt),Et("SSS",pt,At),ir="SSSS";ir.length<=9;ir+="S")Et(ir,_t);function rr(t,e){e[Vt]=Mt(1e3*("0."+t))}for(ir="S";ir.length<=9;ir+="S")Rt(ir,rr);function or(){return this._isUTC?"UTC":""}function ar(){return this._isUTC?"Coordinated Universal Time":""}nr=Xt("Milliseconds",!1),Q("z",0,0,"zoneAbbr"),Q("zz",0,0,"zoneName");var lr=b.prototype;function Ar(t){return $i(1e3*t)}function cr(){return $i.apply(null,arguments).parseZone()}function hr(t){return t}lr.add=kn,lr.calendar=Gn,lr.clone=Vn,lr.diff=Xn,lr.endOf=ms,lr.format=es,lr.from=is,lr.fromNow=ns,lr.to=ss,lr.toNow=rs,lr.get=Jt,lr.invalidAt=Es,lr.isAfter=zn,lr.isBefore=Kn,lr.isBetween=jn,lr.isSame=Wn,lr.isSameOrAfter=$n,lr.isSameOrBefore=Yn,lr.isValid=xs,lr.lang=as,lr.locale=os,lr.localeData=ls,lr.max=Xi,lr.min=Yi,lr.parsingFlags=Bs,lr.set=te,lr.startOf=fs,lr.subtract=Un,lr.toArray=vs,lr.toObject=bs,lr.toDate=ws,lr.toISOString=Jn,lr.inspect=ts,"undefined"!=typeof Symbol&&null!=Symbol.for&&(lr[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),lr.toJSON=Cs,lr.toString=Zn,lr.unix=ys,lr.valueOf=_s,lr.creationData=Ss,lr.eraName=Ms,lr.eraNarrow=Ts,lr.eraAbbr=Rs,lr.eraYear=ks,lr.year=$t,lr.isLeapYear=Yt,lr.weekYear=zs,lr.isoWeekYear=Ks,lr.quarter=lr.quarters=Zs,lr.month=de,lr.daysInMonth=ge,lr.week=lr.weeks=Fe,lr.isoWeek=lr.isoWeeks=Ie,lr.weeksInYear=$s,lr.weeksInWeekYear=Ys,lr.isoWeeksInYear=js,lr.isoWeeksInISOWeekYear=Ws,lr.date=Js,lr.day=lr.days=ze,lr.weekday=Ke,lr.isoWeekday=je,lr.dayOfYear=tr,lr.hour=lr.hours=ni,lr.minute=lr.minutes=er,lr.second=lr.seconds=sr,lr.millisecond=lr.milliseconds=nr,lr.utcOffset=pn,lr.utc=mn,lr.local=_n,lr.parseZone=yn,lr.hasAlignedHourOffset=wn,lr.isDST=vn,lr.isLocal=Cn,lr.isUtcOffset=xn,lr.isUtc=Bn,lr.isUTC=Bn,lr.zoneAbbr=or,lr.zoneName=ar,lr.dates=B("dates accessor is deprecated. Use date instead.",Js),lr.months=B("months accessor is deprecated. Use month instead",de),lr.years=B("years accessor is deprecated. Use year instead",$t),lr.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",fn),lr.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",bn);var ur=T.prototype;function dr(t,e,i,n){var s=mi(),r=g().set(n,e);return s[i](r,t)}function gr(t,e,i){if(c(t)&&(e=t,t=void 0),t=t||"",null!=e)return dr(t,e,i,"month");var n,s=[];for(n=0;n<12;n++)s[n]=dr(t,n,i,"month");return s}function pr(t,e,i,n){"boolean"==typeof t?(c(e)&&(i=e,e=void 0),e=e||""):(i=e=t,t=!1,c(e)&&(i=e,e=void 0),e=e||"");var s,r=mi(),o=t?r._week.dow:0,a=[];if(null!=i)return dr(e,(i+o)%7,n,"day");for(s=0;s<7;s++)a[s]=dr(e,(s+o)%7,n,"day");return a}function fr(t,e){return gr(t,e,"months")}function mr(t,e){return gr(t,e,"monthsShort")}function _r(t,e,i){return pr(t,e,i,"weekdays")}function yr(t,e,i){return pr(t,e,i,"weekdaysShort")}function wr(t,e,i){return pr(t,e,i,"weekdaysMin")}ur.calendar=k,ur.longDateFormat=j,ur.invalidDate=$,ur.ordinal=q,ur.preparse=hr,ur.postformat=hr,ur.relativeTime=J,ur.pastFuture=tt,ur.set=L,ur.eras=Fs,ur.erasParse=Is,ur.erasConvertYear=Ls,ur.erasAbbrRegex=Ds,ur.erasNameRegex=Us,ur.erasNarrowRegex=Os,ur.months=le,ur.monthsShort=Ae,ur.monthsParse=he,ur.monthsRegex=fe,ur.monthsShortRegex=pe,ur.week=xe,ur.firstDayOfYear=Se,ur.firstDayOfWeek=Ee,ur.weekdays=Ne,ur.weekdaysMin=He,ur.weekdaysShort=Qe,ur.weekdaysParse=Ve,ur.weekdaysRegex=We,ur.weekdaysShortRegex=$e,ur.weekdaysMinRegex=Ye,ur.isPM=ei,ur.meridiem=si,gi("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===Mt(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),n.lang=B("moment.lang is deprecated. Use moment.locale instead.",gi),n.langData=B("moment.langData is deprecated. Use moment.localeData instead.",mi);var vr=Math.abs;function br(){var t=this._data;return this._milliseconds=vr(this._milliseconds),this._days=vr(this._days),this._months=vr(this._months),t.milliseconds=vr(t.milliseconds),t.seconds=vr(t.seconds),t.minutes=vr(t.minutes),t.hours=vr(t.hours),t.months=vr(t.months),t.years=vr(t.years),this}function Cr(t,e,i,n){var s=Fn(e,i);return t._milliseconds+=n*s._milliseconds,t._days+=n*s._days,t._months+=n*s._months,t._bubble()}function xr(t,e){return Cr(this,t,e,1)}function Br(t,e){return Cr(this,t,e,-1)}function Er(t){return t<0?Math.floor(t):Math.ceil(t)}function Sr(){var t,e,i,n,s,r=this._milliseconds,o=this._days,a=this._months,l=this._data;return r>=0&&o>=0&&a>=0||r<=0&&o<=0&&a<=0||(r+=864e5*Er(Ir(a)+o),o=0,a=0),l.milliseconds=r%1e3,t=Lt(r/1e3),l.seconds=t%60,e=Lt(t/60),l.minutes=e%60,i=Lt(e/60),l.hours=i%24,o+=Lt(i/24),a+=s=Lt(Fr(o)),o-=Er(Ir(s)),n=Lt(a/12),a%=12,l.days=o,l.months=a,l.years=n,this}function Fr(t){return 4800*t/146097}function Ir(t){return 146097*t/4800}function Lr(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=it(t))||"quarter"===t||"year"===t)switch(e=this._days+n/864e5,i=this._months+Fr(e),t){case"month":return i;case"quarter":return i/3;case"year":return i/12}else switch(e=this._days+Math.round(Ir(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function Mr(t){return function(){return this.as(t)}}var Tr=Mr("ms"),Rr=Mr("s"),kr=Mr("m"),Ur=Mr("h"),Dr=Mr("d"),Or=Mr("w"),Pr=Mr("M"),Nr=Mr("Q"),Qr=Mr("y"),Hr=Tr;function Gr(){return Fn(this)}function Vr(t){return t=it(t),this.isValid()?this[t+"s"]():NaN}function zr(t){return function(){return this.isValid()?this._data[t]:NaN}}var Kr=zr("milliseconds"),jr=zr("seconds"),Wr=zr("minutes"),$r=zr("hours"),Yr=zr("days"),Xr=zr("months"),qr=zr("years");function Zr(){return Lt(this.days()/7)}var Jr=Math.round,to={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function eo(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function io(t,e,i,n){var s=Fn(t).abs(),r=Jr(s.as("s")),o=Jr(s.as("m")),a=Jr(s.as("h")),l=Jr(s.as("d")),A=Jr(s.as("M")),c=Jr(s.as("w")),h=Jr(s.as("y")),u=r<=i.ss&&["s",r]||r<i.s&&["ss",r]||o<=1&&["m"]||o<i.m&&["mm",o]||a<=1&&["h"]||a<i.h&&["hh",a]||l<=1&&["d"]||l<i.d&&["dd",l];return null!=i.w&&(u=u||c<=1&&["w"]||c<i.w&&["ww",c]),(u=u||A<=1&&["M"]||A<i.M&&["MM",A]||h<=1&&["y"]||["yy",h])[2]=e,u[3]=+t>0,u[4]=n,eo.apply(null,u)}function no(t){return void 0===t?Jr:"function"==typeof t&&(Jr=t,!0)}function so(t,e){return void 0!==to[t]&&(void 0===e?to[t]:(to[t]=e,"s"===t&&(to.ss=e-1),!0))}function ro(t,e){if(!this.isValid())return this.localeData().invalidDate();var i,n,s=!1,r=to;return"object"==typeof t&&(e=t,t=!1),"boolean"==typeof t&&(s=t),"object"==typeof e&&(r=Object.assign({},to,e),null!=e.s&&null==e.ss&&(r.ss=e.s-1)),n=io(this,!s,r,i=this.localeData()),s&&(n=i.pastFuture(+this,n)),i.postformat(n)}var oo=Math.abs;function ao(t){return(t>0)-(t<0)||+t}function lo(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n,s,r,o,a,l=oo(this._milliseconds)/1e3,A=oo(this._days),c=oo(this._months),h=this.asSeconds();return h?(t=Lt(l/60),e=Lt(t/60),l%=60,t%=60,i=Lt(c/12),c%=12,n=l?l.toFixed(3).replace(/\.?0+$/,""):"",s=h<0?"-":"",r=ao(this._months)!==ao(h)?"-":"",o=ao(this._days)!==ao(h)?"-":"",a=ao(this._milliseconds)!==ao(h)?"-":"",s+"P"+(i?r+i+"Y":"")+(c?r+c+"M":"")+(A?o+A+"D":"")+(e||t||l?"T":"")+(e?a+e+"H":"")+(t?a+t+"M":"")+(l?a+n+"S":"")):"P0D"}var Ao=on.prototype;return Ao.isValid=sn,Ao.abs=br,Ao.add=xr,Ao.subtract=Br,Ao.as=Lr,Ao.asMilliseconds=Tr,Ao.asSeconds=Rr,Ao.asMinutes=kr,Ao.asHours=Ur,Ao.asDays=Dr,Ao.asWeeks=Or,Ao.asMonths=Pr,Ao.asQuarters=Nr,Ao.asYears=Qr,Ao.valueOf=Hr,Ao._bubble=Sr,Ao.clone=Gr,Ao.get=Vr,Ao.milliseconds=Kr,Ao.seconds=jr,Ao.minutes=Wr,Ao.hours=$r,Ao.days=Yr,Ao.weeks=Zr,Ao.months=Xr,Ao.years=qr,Ao.humanize=ro,Ao.toISOString=lo,Ao.toString=lo,Ao.toJSON=lo,Ao.locale=os,Ao.localeData=ls,Ao.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",lo),Ao.lang=as,Q("X",0,0,"unix"),Q("x",0,0,"valueOf"),Et("x",yt),Et("X",bt),Rt("X",(function(t,e,i){i._d=new Date(1e3*parseFloat(t))})),Rt("x",(function(t,e,i){i._d=new Date(Mt(t))})),n.version="2.30.1",s($i),n.fn=lr,n.min=Zi,n.max=Ji,n.now=tn,n.utc=g,n.unix=Ar,n.months=fr,n.isDate=h,n.locale=gi,n.invalid=_,n.duration=Fn,n.isMoment=C,n.weekdays=_r,n.parseZone=cr,n.localeData=mi,n.isDuration=an,n.monthsShort=mr,n.weekdaysMin=wr,n.defineLocale=pi,n.updateLocale=fi,n.locales=_i,n.weekdaysShort=yr,n.normalizeUnits=it,n.relativeTimeRounding=no,n.relativeTimeThreshold=so,n.calendarFormat=Hn,n.prototype=lr,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()}(Jd)),Jd.exports),eg=bh(tg);class ig{static async initAsync(t={}){throw new Error("Abstract base class")}static setMap(t){throw new Error("Abstract base method")}static getName(){throw new Error("Abstract base method")}}const ng="log-manager.js",sg=Object.freeze({logging:{logToConsole:!1},timeFormat:Object.freeze({pretty:"YYYY-MM-DD HH:mm:ss:SSS",gmt:"YYYY-MM-DDTHH:mm:ssZ:SSS"})});class rg extends ig{static#t=[];static#e=Object.freeze({debug:{value:1,name:"Debug",visible:!1,color:"#00385B",backgroundColor:"#F0F6FF",borderColor:"#D7E3FA",method:window.console.debug},information:{value:2,name:"Information",visible:!0,color:"#212529",backgroundColor:"#F3F4F5",borderColor:"#D3D9E6",method:window.console.info},warning:{value:3,name:"Warning",visible:!0,color:"#493B10",backgroundColor:"#FFF8E1",borderColor:"#FAE59D",method:window.console.warn},error:{value:4,name:"Error",visible:!0,color:"#8D2120",backgroundColor:"#FFE6E6",borderColor:"#FDB5B4",method:window.console.error},fatal:{value:5,name:"Fatal",visible:!0,color:"#212529",backgroundColor:"#E8E6FF",borderColor:"#D0CAFF",method:window.console.error}});static async initAsync(t={}){return rg.logDebug(ng,"initAsync","Initialization started"),new Promise((t=>{t({filename:ng,result:!0})}))}static setMap(t){}static getName(){return ng}static#i(t,e,i,n,s){t.method(e,i,n,s)}static#n(t,e,i,n){const s=sg.timeFormat.pretty,r=sg.logging.logToConsole,o=eg().format(s),a={timestamp:o,level:t,origin:e,method:i,value:n};return this.#t.push(a),r&&this.#i(t,e,i,n,o),a}static setLogToConsole(t){sg.logging.logToConsole=t}static getSize(){return this.#t.length||0}static getLog(){return this.#t}static clearLog(){this.#t=[]}static getLogLevels(){return this.#e}static logDebug(t,e,i){return this.#n(this.#e.debug,t,e,i)}static logInformation(t,e,i){return this.#n(this.#e.information,t,e,i)}static logWarning(t,e,i){return this.#n(this.#e.warning,t,e,i)}static logError(t,e,i){return this.#n(this.#e.error,t,e,i)}static logFatal(t,e,i){return this.#n(this.#e.fatal,t,e,i)}}function og(t,e,i){const n=[];let s=t(0),r=t(1),o=e(s),a=e(r);const l=[r,s],A=[a,o],c=[1,0],h={};let u,d,g,p,f,m,_=1e5;for(;--_>0&&c.length>0;)g=c.pop(),s=l.pop(),o=A.pop(),m=g.toString(),m in h||(n.push(o[0],o[1]),h[m]=!0),p=c.pop(),r=l.pop(),a=A.pop(),f=(g+p)/2,u=t(f),d=e(u),z(d[0],d[1],o[0],o[1],a[0],a[1])<i?(n.push(a[0],a[1]),m=p.toString(),h[m]=!0):(c.push(p,f,f,g),A.push(a,d,d,o),l.push(r,u,u,s));return n}function ag(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],i=t.inversePixelTransform[1],n=Math.sqrt(e*e+i*i),s=t.frameState,r=function(t,e){const i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=e[0],A=e[1],c=e[2],h=e[3],u=e[4],d=e[5];return t[0]=i*l+s*A,t[1]=n*l+r*A,t[2]=i*c+s*h,t[3]=n*c+r*h,t[4]=i*u+s*d+o,t[5]=n*u+r*d+a,t}(t.inversePixelTransform.slice(),s.coordinateToPixelTransform),o=ta(s.viewState.resolution,n);return new Xo(t.context,n,s.extent,r,s.viewState.rotation,o,undefined)}function lg(t,e){return Yi(t.inversePixelTransform,e.slice(0))}const Ag=new Vo({color:"rgba(0,0,0,0.2)"}),cg=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class hg extends WA{constructor(t){t=t||{};const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:Ag,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?rt.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?rt.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new zo({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new Yo({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Qo({color:"rgba(0,0,0,1)"}),stroke:new Vo({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=t=>{const e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_},this.latLabelStyleBase_=new zo({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new Yo({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Qo({color:"rgba(0,0,0,1)"}),stroke:new Vo({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=t=>{const e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(Us,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:cg,this.setSource(new gc({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new ZA,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new zo({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let i=t.slice();var n,s,r;return this.projection_&&this.getSource().getWrapX()&&H(i,this.projection_),this.loadedExtent_&&(n=this.loadedExtent_,s=i,r=e,Math.abs(n[0]-s[0])<r&&Math.abs(n[2]-s[2])<r&&Math.abs(n[1]-s[1])<r&&Math.abs(n[3]-s[3])<r?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(t,e,i){this.loadedExtent_=t;const n=this.getSource(),s=k(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(this.renderedExtent_&&w(this.renderedExtent_,s)&&this.renderedResolution_===e)return;if(this.renderedExtent_=s,this.renderedResolution_=e,N(s))return;const r=I(s),o=e*e/4;(!this.projection_||!Ee(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(s,r,e,o);let a,l=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(l+=this.meridians_.length),this.parallelsLabels_&&(l+=this.parallels_.length);l>this.featurePool_.length;)a=new cs,this.featurePool_.push(a);const A=n.getFeaturesCollection();A.clear();let c,h,u=0;for(c=0,h=this.meridians_.length;c<h;++c)a=this.featurePool_[u++],a.setGeometry(this.meridians_[c]),a.setStyle(this.lineStyle_),A.push(a);for(c=0,h=this.parallels_.length;c<h;++c)a=this.featurePool_[u++],a.setGeometry(this.parallels_[c]),a.setStyle(this.lineStyle_),A.push(a)}addMeridian_(t,e,i,n,s,r){const o=this.getMeridian_(t,e,i,n,r);if(P(o.getExtent(),s)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t);r in this.meridiansLabels_?this.meridiansLabels_[r].text=e:this.meridiansLabels_[r]={geom:new In([]),text:e}}this.meridians_[r++]=o}return r}addParallel_(t,e,i,n,s,r){const o=this.getParallel_(t,e,i,n,r);if(P(o.getExtent(),s)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t);r in this.parallelsLabels_?this.parallelsLabels_[r].text=e:this.parallelsLabels_[r]={geom:new In([]),text:e}}this.parallels_[r++]=o}return r}drawLabels_(t){const e=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,n=t.frameState.size,s=t.frameState.extent,r=I(s);let o=s;if(e){const t=n[0]*i,e=n[1]*i;o=[r[0]-t/2,r[1]-e/2,r[0]+t/2,r[1]+e/2]}let a=0,l=0,A=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),h=O(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!u(c,s)){a=Math.floor((s[0]-c[0])/h),l=Math.ceil((s[2]-c[2])/h);A=A!==Math.abs(e)>Math.PI/2}const d=ag(t);for(let t=a;t<=l;++t){let i,n,c,u,g=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(n=0,c=this.meridiansLabels_.length;n<c;++n){const a=this.meridians_[n];if(e||0!==t){const i=a.clone();i.translate(t*h,0),i.rotate(-e,r),u=this.getMeridianPoint_(i,o,n),u.rotate(e,r)}else u=this.getMeridianPoint_(a,s,n);i=this.featurePool_[g++],i.setGeometry(u),i.set("graticule_label",this.meridiansLabels_[n].text),d.drawFeature(i,this.lonLabelStyle_(i))}if(this.parallelsLabels_&&(t===a&&A||t===l&&!A))for(n=0,c=this.parallels_.length;n<c;++n){const a=this.parallels_[n];if(e||0!==t){const i=a.clone();i.translate(t*h,0),i.rotate(-e,r),u=this.getParallelPoint_(i,o,n),u.rotate(e,r)}else u=this.getParallelPoint_(a,s,n);i=this.featurePool_[g++],i.setGeometry(u),i.set("graticule_label",this.parallelsLabels_[n].text),d.drawFeature(i,this.latLabelStyle_(i))}}}createGraticule_(t,e,i,n){const s=this.getInterval_(i);if(-1==s)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));let r=!1;const o=this.projection_.getExtent(),a=O(o);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!u(o,t)&&(O(t)>=a?(t[0]=o[0],t[2]=o[2]):r=!0);const l=[V(e[0],this.minX_,this.maxX_),V(e[1],this.minY_,this.maxY_)],A=this.toLonLatTransform_(l);isNaN(A[1])&&(A[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=V(A[0],this.minLon_,this.maxLon_),d=V(A[1],this.minLat_,this.maxLat_);const g=this.maxLines_;let p,f,m,_,y=t;r||(y=[V(t[0],this.minX_,this.maxX_),V(t[1],this.minY_,this.maxY_),V(t[2],this.minX_,this.maxX_),V(t[3],this.minY_,this.maxY_)]);const w=Q(y,this.toLonLatTransform_,void 0,8);let v=w[3],b=w[2],C=w[1],x=w[0];if(r||(h(y,this.bottomLeft_)&&(x=this.minLon_,C=this.minLat_),h(y,this.bottomRight_)&&(b=this.maxLon_,C=this.minLat_),h(y,this.topLeft_)&&(x=this.minLon_,v=this.maxLat_),h(y,this.topRight_)&&(b=this.maxLon_,v=this.maxLat_),v=V(v,d,this.maxLat_),b=V(b,c,this.maxLon_),C=V(C,this.minLat_,d),x=V(x,this.minLon_,c)),c=Math.floor(c/s)*s,_=V(c,this.minLon_,this.maxLon_),f=this.addMeridian_(_,C,v,n,t,0),p=0,r)for(;(_-=s)>=x&&p++<g;)f=this.addMeridian_(_,C,v,n,t,f);else for(;_!=this.minLon_&&p++<g;)_=Math.max(_-s,this.minLon_),f=this.addMeridian_(_,C,v,n,t,f);if(_=V(c,this.minLon_,this.maxLon_),p=0,r)for(;(_+=s)<=b&&p++<g;)f=this.addMeridian_(_,C,v,n,t,f);else for(;_!=this.maxLon_&&p++<g;)_=Math.min(_+s,this.maxLon_),f=this.addMeridian_(_,C,v,n,t,f);for(this.meridians_.length=f,this.meridiansLabels_&&(this.meridiansLabels_.length=f),d=Math.floor(d/s)*s,m=V(d,this.minLat_,this.maxLat_),f=this.addParallel_(m,x,b,n,t,0),p=0;m!=this.minLat_&&p++<g;)m=Math.max(m-s,this.minLat_),f=this.addParallel_(m,x,b,n,t,f);for(m=V(d,this.minLat_,this.maxLat_),p=0;m!=this.maxLat_&&p++<g;)m=Math.min(m+s,this.maxLat_),f=this.addParallel_(m,x,b,n,t,f);this.parallels_.length=f,this.parallelsLabels_&&(this.parallelsLabels_.length=f)}getInterval_(t){const e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1];let n=-1;const s=Math.pow(this.targetSize_*t,2),r=[],o=[];for(let t=0,a=this.intervals_.length;t<a;++t){const a=V(this.intervals_[t]/2,0,90),l=V(i,-90+a,90-a);r[0]=e-a,r[1]=l-a,o[0]=e+a,o[1]=l+a,this.fromLonLatTransform_(r,r),this.fromLonLatTransform_(o,o);if(Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2)<=s)break;n=this.intervals_[t]}return n}getMeridian_(t,e,i,n,s){const r=function(t,e,i,n,s){return og((function(n){return[t,e+(i-e)*n]}),Ie(_e("EPSG:4326"),n),s)}(t,e,i,this.projection_,n);let o=this.meridians_[s];return o?(o.setFlatCoordinates("XY",r),o.changed()):(o=new ys(r,"XY"),this.meridians_[s]=o),o}getMeridianPoint_(t,e,i){const n=t.getFlatCoordinates();let s=1,r=n.length-1;n[s]>n[r]&&(s=r,r=1);const o=Math.max(e[1],n[s]),a=Math.min(e[3],n[r]),l=V(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,a),A=[n[s-1]+(n[r-1]-n[s-1])*(l-n[s])/(n[r]-n[s]),l],c=this.meridiansLabels_[i].geom;return c.setCoordinates(A),c}getMeridians(){return this.meridians_}getParallel_(t,e,i,n,s){const r=function(t,e,i,n,s){return og((function(n){return[e+(i-e)*n,t]}),Ie(_e("EPSG:4326"),n),s)}(t,e,i,this.projection_,n);let o=this.parallels_[s];return o?(o.setFlatCoordinates("XY",r),o.changed()):o=new ys(r,"XY"),o}getParallelPoint_(t,e,i){const n=t.getFlatCoordinates();let s=0,r=n.length-2;n[s]>n[r]&&(s=r,r=0);const o=Math.max(e[0],n[s]),a=Math.min(e[2],n[r]),l=V(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,a),A=[l,n[s+1]+(n[r+1]-n[s+1])*(l-n[s])/(n[r]-n[s])],c=this.parallelsLabels_[i].geom;return c.setCoordinates(A),c}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=_e("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];const n=Ie(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const t=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,i,s){const r=n(e,i,s=s||2);for(let e=0,i=r.length;e<i;e+=s)r[e]<t&&(r[e]+=360);return r}}this.fromLonLatTransform_=Ie(e,t);const s=Q([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=s[0],this.maxX_=s[2],this.minY_=s[1],this.maxY_=s[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(I(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}var ug=0,dg=1,gg=2,pg=3,fg=4;class mg extends li{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ne)}release(){this.setState(fg)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==fg){if(this.state!==pg&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){gi()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:yi(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class _g extends mg{constructor(t,e,i,n,s,r){super(t,e,r),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=gg,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=pg,this.unlistenImage_(),this.image_=function(){const t=Es(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=gg:this.state=fg,this.unlistenImage_(),this.changed()}load(){this.state==pg&&(this.state=ug,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ug&&(this.state=dg,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(t,e,i){const n=t;let s=!0,r=!1,o=!1;const a=[ci(n,Ke,(function(){o=!0,r||e()}))];return n.src&&Ti?(r=!0,n.decode().then((function(){s&&e()})).catch((function(t){s&&(o?e():i())}))):a.push(ci(n,Qe,i)),function(){s=!1,a.forEach(hi)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}var yg="pointermove",wg="pointerdown";class vg extends li{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Ai(i,wg,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ai(i,yg,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(je,this.boundHandleTouchMove_,!!Ri&&{passive:!1})}emulateClick_(t){let e=new us($e.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new us($e.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new us($e.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==$e.POINTERUP||e.type==$e.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=$e.POINTERDOWN&&e.type!=$e.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new us($e.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(hi),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new us($e.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ai(t,$e.POINTERMOVE,this.handlePointerMove_,this),Ai(t,$e.POINTERUP,this.handlePointerUp_,this),Ai(this.element_,$e.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(Ai(this.element_.getRootNode(),$e.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new us($e.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new us($e.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(hi(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(je,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(hi(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(hi),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var bg="layergroup",Cg="size",xg="target",Bg="view";const Eg=1/0;class Sg{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Lt(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){$i(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Eg&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,s=e[t],r=i[t],o=t;for(;t<n>>1;){const s=this.getLeftChildIndex_(t),r=this.getRightChildIndex_(t),o=r<n&&i[r]<i[s]?r:s;e[t]=e[o],i[t]=i[o],t=o}e[t]=s,i[t]=r,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,s=i[e],r=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>r))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=s,n[e]=r}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const s=e.length;let r,o,a;for(o=0;o<s;++o)r=e[o],a=t(r),a==Eg?delete this.queuedElements_[this.keyFunction_(r)]:(i[n]=a,e[n++]=r);e.length=n,i.length=n,this.heapify_()}}class Fg extends Sg{constructor(t,e){super((e=>t.apply(null,e)),(t=>t[0].getKey())),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(Ne,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===gg||i===pg||i===fg){i!==pg&&e.removeEventListener(Ne,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;){const t=this.dequeue()[0],e=t.getKey();t.getState()!==ug||e in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[e]=!0,++this.tilesLoading_,++i,t.load())}}}class Ig extends _i{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let t=0,e=this.listenerKeys.length;t<e;++t)hi(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_??t.getOverlayContainerStopEvent();this.element&&e.appendChild(this.element),this.render!==ri&&this.listenerKeys.push(Ai(t,Oc,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}class Lg extends Ig{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"›",r=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=r):this.collapseLabel_=s;const o=void 0!==t.label?t.label:"i";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=n):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(Ge,this.handleClick_.bind(this),!1);const l=e+" "+_r+" "+yr+(this.collapsed_&&this.collapsible_?" "+wr:"")+(this.collapsible_?"":" ol-uncollapsible"),A=this.element;A.className=l,A.appendChild(this.toggleButton_),A.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),i=new Set(e.flatMap((e=>e.getAttributions(t))));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach((t=>i.add(t))):i.add(this.attributions_)),!this.overrideCollapsible_){const t=!e.some((t=>!1===t.getSource()?.getAttributionsCollapsible()));this.setCollapsible(t)}return Array.from(i)}async updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=await Promise.all(this.collectSourceAttributions_(t).map((t=>{return e=()=>t,function(){let t;try{t=e()}catch(t){return Promise.reject(t)}return t instanceof Promise?t:Promise.resolve(t)}();var e}))),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!ii(e,this.renderedAttributions_)){Rs(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(wr),this.collapsed_?Ts(this.collapseLabel_,this.label_):Ts(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Mg extends Ig{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"⇧",n=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=t.tipLabel?t.tipLabel:"Reset rotation",r=document.createElement("button");r.className=e+"-reset",r.setAttribute("type","button"),r.title=s,r.appendChild(this.label_),r.addEventListener(Ge,this.handleClick_.bind(this),!1);const o=e+" "+_r+" "+yr,a=this.element;a.className=o,a.appendChild(r),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(mr)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:wi}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(mr);t||0!==i?t&&0!==i&&this.element.classList.remove(mr):this.element.classList.add(mr)}this.label_.style.transform=t}this.rotation_=i}}class Tg extends Ig{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",r=void 0!==t.zoomInLabel?t.zoomInLabel:"+",o=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",A=document.createElement("button");A.className=n,A.setAttribute("type","button"),A.title=a,A.appendChild("string"==typeof r?document.createTextNode(r):r),A.addEventListener(Ge,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(Ge,this.handleClick_.bind(this,-i),!1);const h=e+" "+_r+" "+yr,u=this.element;u.className=h,u.appendChild(A),u.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:wi})):e.setZoom(n)}}}class Rg extends ai{constructor(t,e){super(t),this.layer=e}}const kg="layers";class Ug extends GA{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(kg,this.handleLayersChanged_),i?Array.isArray(i)?i=new ZA(i.slice(),{unique:!0}):$i("function"==typeof i.getArray,"Expected `layers` to be an array or a `Collection`"):i=new ZA(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(hi),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Ai(t,$A,this.handleLayersAdd_,this),Ai(t,YA,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(hi);Lt(this.listenerKeys_);const e=t.getArray();for(let t=0,i=e.length;t<i;t++){const i=e[t];this.registerLayerListeners_(i),this.dispatchEvent(new Rg("addlayer",i))}this.changed()}registerLayerListeners_(t){const e=[Ai(t,Ye,this.handleLayerChange_,this),Ai(t,Ne,this.handleLayerChange_,this)];t instanceof Ug&&e.push(Ai(t,"addlayer",this.handleLayerGroupAdd_,this),Ai(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[fi(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Rg("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Rg("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Rg("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=fi(e);this.listenerKeys_[i].forEach(hi),delete this.listenerKeys_[i],this.dispatchEvent(new Rg("removelayer",e)),this.changed()}getLayers(){return this.get(kg)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new Rg("removelayer",t[e]))}this.set(kg,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const n=this.getLayerState();let s=n.zIndex;t||void 0!==n.zIndex||(s=0);for(let t=i,r=e.length;t<r;t++){const i=e[t];i.opacity*=n.opacity,i.visible=i.visible&&n.visible,i.maxResolution=Math.min(i.maxResolution,n.maxResolution),i.minResolution=Math.max(i.minResolution,n.minResolution),i.minZoom=Math.max(i.minZoom,n.minZoom),i.maxZoom=Math.min(i.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==i.extent?i.extent=k(i.extent,n.extent):i.extent=n.extent),void 0===i.zIndex&&(i.zIndex=s)}return e}getSourceState(){return"ready"}}class Dg extends Xe{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){gi()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Xi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),qi(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,r,o,a){let l;const A=e.viewState;function c(t,e,i,n){return s.call(r,e,t?i:null,n)}const h=A.projection,u=ht(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&n){const t=O(h.getExtent());d.push([-t,0],[t,0])}const g=e.layerStatesArray,p=g.length,f=[],m=[];for(let n=0;n<d.length;n++)for(let s=p-1;s>=0;--s){const r=g[s],h=r.layer;if(h.hasRenderer()&&zA(r,A)&&o.call(a,h)){const s=h.getRenderer(),o=h.getSource();if(s&&o){const a=o.getWrapX()?u:t,A=c.bind(null,r.managed);m[0]=a[0]+d[n][0],m[1]=a[1]+d[n][1],l=s.forEachFeatureAtCoordinate(m,e,i,A,f)}if(l)return l}}if(0===f.length)return;const _=1/f.length;return f.forEach(((t,e)=>t.distanceSq+=e*_)),f.sort(((t,e)=>t.distanceSq-e.distanceSq)),f.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,n,s,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,ni,this,s,r)}getMap(){return this.map_}renderFrame(t){gi()}scheduleExpireIconCache(t){hr.canExpireCache()&&t.postRenderFunctions.push(Og)}}function Og(t,e){hr.expire()}class Pg extends Dg{constructor(t){super(t),this.fontChangeListenerKey_=Ai(kr,Ye,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=_r+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new sa(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){hi(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(Ds,t);const e=t.layerStatesArray.sort(((t,e)=>t.zIndex-e.zIndex));e.some((t=>t.layer instanceof jA&&t.layer.getDeclutter()))&&(t.declutter={});const i=t.viewState;this.children_.length=0;const n=[];let s=null;for(let r=0,o=e.length;r<o;++r){const o=e[r];t.layerIndex=r;const a=o.layer,l=a.getSourceState();if(!zA(o,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const A=a.render(t,s);A&&(A!==s&&(this.children_.push(A),s=A),n.push(o))}this.declutter(t,n),function(t,e){const i=t.childNodes;for(let n=0;;++n){const s=i[n],r=e[n];if(!s&&!r)break;s!==r&&(s?r?t.insertBefore(r,s):(t.removeChild(s),--n):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent(Os,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let i=e.length-1;i>=0;--i){const n=e[i],s=n.layer;s.getDeclutter()&&s.renderDeclutter(t,n)}e.forEach((e=>e.layer.renderDeferred(t)))}}}function Ng(t){t instanceof VA?t.setMapInternal(null):t instanceof Ug&&t.getLayers().forEach(Ng)}function Qg(t,e){if(t instanceof VA)t.setMapInternal(e);else if(t instanceof Ug){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)Qg(i[t],e)}}let Hg=class extends _i{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Ug({layers:t.layers});let s,r,o;i[bg]=n,i[xg]=t.target,i[Bg]=t.view instanceof FA?t.view:new FA,void 0!==t.controls&&(Array.isArray(t.controls)?s=new ZA(t.controls.slice()):($i("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),s=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new ZA(t.interactions.slice()):($i("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?o=new ZA(t.overlays.slice()):($i("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new ZA;return{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:i}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:Li,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new ZA;return(void 0===t.zoom||t.zoom)&&e.push(new Tg(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Mg(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Lg(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new ZA,i=new yh(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new ls),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Ei({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new rs({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new Jc),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new th({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Uc),e.push(new Dc({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new Zc({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new As({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Fg(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(bg,this.handleLayerGroupChanged_),this.addChangeListener(Bg,this.handleViewChanged_),this.addChangeListener(Cg,this.handleSizeChanged_),this.addChangeListener(xg,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof FA||t.view.then((function(t){i.setView(new FA(t))})),this.controls.addEventListener($A,(t=>{t.element.setMap(this)})),this.controls.addEventListener(YA,(t=>{t.element.setMap(null)})),this.interactions.addEventListener($A,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(YA,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener($A,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(YA,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Qg(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,r=void 0!==i.layerFilter?i.layerFilter:ni,o=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,o,e,null,r,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];return function e(i){i.forEach((function(i){i instanceof Ug?e(i.getLayers()):t.push(i)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:ni,s=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,r,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],s=e.height/i[1],r="changedTouches"in t?t.changedTouches[0]:t;return[(r.clientX-e.left)/n,(r.clientY-e.top)/s]}getTarget(){return this.get(xg)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Me(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Yi(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(bg)}setLayers(t){const e=this.getLayerGroup();if(t instanceof ZA)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Te(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Yi(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Cg)}getView(){return this.get(Bg)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(t,e,i,n,s){if(!t||!(i in t.wantedTiles))return Eg;if(!t.wantedTiles[i][e.getKey()])return Eg;const r=t.viewState.center,o=n[0]-r[0],a=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new us(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===wg||i===We||i===Ve){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target,s=i instanceof ShadowRoot?i.host===n?i.host.ownerDocument:i:i===t?t.documentElement:i;if(this.overlayContainerStopEvent_.contains(n)||!s.contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()!==this||!n.getActive()||!this.getTargetElement())continue;if(!n.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[xs]||e[Bs]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Ps)&&this.renderer_.dispatchRenderEvent(Ps,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new hs(Hc,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new hs(Qc,this,t))));const i=this.postRenderFunctions_;if(t)for(let e=0,n=i.length;e<n;++e)i[e](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)hi(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(He,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(We,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Pg(this)),this.mapBrowserEventHandler_=new vg(this,this.moveTolerance_);for(const t in $e)this.mapBrowserEventHandler_.addEventListener($e[t],this.handleMapBrowserEvent.bind(this));let t;if(this.viewport_.addEventListener(He,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(We,this.boundHandleBrowserEvent_,!!Ri&&{passive:!1}),this.keyboardEventTarget_)t=this.keyboardEventTarget_;else{const i=e.getRootNode();t=i instanceof ShadowRoot?i.host:e}this.targetChangeHandlerKeys_=[Ai(t,Ve,this.handleBrowserEvent,this),Ai(t,ze,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(hi(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(hi(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ai(t,Ye,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ai(t,Ne,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(hi),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Rg("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ai(t,Ye,this.render,this),Ai(t,Ne,this.render,this),Ai(t,"addlayer",this.handleLayerAdd_,this),Ai(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Ng(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(void 0!==e&&Uo(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),r=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:M(r.center,r.resolution,r.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:r,viewHints:n,wantedTiles:{},mapId:fi(this),renderTargets:{}},r.nextCenter&&r.nextResolution){const t=isNaN(r.nextRotation)?r.rotation:r.nextRotation;s.nextExtent=M(r.nextCenter,r.nextResolution,t,e)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n){(!this.previousExtent_||!N(this.previousExtent_)&&!w(s.extent,this.previousExtent_))&&(this.dispatchEvent(new hs(Pc,this,n)),this.previousExtent_=m(this.previousExtent_))}this.previousExtent_&&!s.viewHints[xs]&&!s.viewHints[Bs]&&!w(s.extent,this.previousExtent_)&&(this.dispatchEvent(new hs(Nc,this,s)),A(s.extent,this.previousExtent_))}this.dispatchEvent(new hs(Oc,this,s)),this.renderComplete_=(this.hasListener(Qc)||this.hasListener(Hc)||this.hasListener(Ps))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Rg("removelayer",e)),this.set(bg,t)}setSize(t){this.set(Cg,t)}setTarget(t){this.set(xg,t)}setView(t){if(!t||t instanceof FA)return void this.set(Bg,t);this.set(Bg,new FA);const e=this;t.then((function(t){e.setView(new FA(t))}))}updateSize(){const e=this.getTargetElement();let i;if(e){const n=getComputedStyle(e),s=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(s)||isNaN(r)||(i=[Math.max(0,s),Math.max(0,r)],!Uo(i)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&t("No map visible because the map container's width or height are 0."))}const n=this.getSize();!i||n&&ii(i,n)||(this.setSize(i),this.updateViewportSize_(i))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};const Gg="element",Vg="map",zg="offset",Kg="position",jg="positioning";class Wg extends _i{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Gg,this.handleElementChanged),this.addChangeListener(Vg,this.handleMapChanged),this.addChangeListener(zg,this.handleOffsetChanged),this.addChangeListener(Kg,this.handlePositionChanged),this.addChangeListener(jg,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(Gg)}getId(){return this.id}getMap(){return this.get(Vg)||null}getOffset(){return this.get(zg)}getPosition(){return this.get(Kg)}getPositioning(){return this.get(jg)}handleElementChanged(){Rs(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),hi(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Ai(t,Oc,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Gg,t)}setMap(t){this.set(Vg,t)}setOffset(t){this.set(zg,t)}setPosition(t){this.set(Kg,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Kg))return;const i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),s=this.getRect(n,[Ls(n),Ms(n)]),r=void 0===(t=t||{}).margin?20:t.margin;if(!u(i,s)){const n=s[0]-i[0],o=i[2]-s[2],a=s[1]-i[1],l=i[3]-s[3],A=[0,0];if(n<0?A[0]=n-r:o<0&&(A[0]=Math.abs(o)+r),a<0?A[1]=a-r:l<0&&(A[1]=Math.abs(l)+r),0!==A[0]||0!==A[1]){const i=e.getView().getCenterInternal(),n=e.getPixelFromCoordinateInternal(i);if(!n)return;const s=[n[0]+A[0],n[1]+A[1]],r=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(s),duration:r.duration,easing:r.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]}setPositioning(t){this.set(jg,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let r="0%",o="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?r="-100%":"bottom-center"!=s&&"center-center"!=s&&"top-center"!=s||(r="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?o="-100%":"center-left"!=s&&"center-center"!=s&&"center-right"!=s||(o="-50%");const a=`translate(${r}, ${o}) translate(${`${t[0]+n[0]}px`}, ${`${t[1]+n[1]}px`})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,i.transform=a)}getOptions(){return this.options}}class $g{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Yg(t,e,i,n,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=i,s.maxY=n,s):new $g(t,e,i,n)}const Xg=Object.freeze({timeFormat:Object.freeze({pretty:"YYYY-MM-DD HH:mm:ss:SSS",gmt:"YYYY-MM-DDTHH:mm:ssZ:SSS"}),localization:Object.freeze({active:"en-us",languages:Object.freeze(["en-us","sv-se"])}),location:Object.freeze({default:Object.freeze({lon:18.1201,lat:35.3518,zoom:3,rotation:0})}),className:Object.freeze({row:"oltb-row",dark:"oltb-dark"}),openLayers:Object.freeze({version:"10.6.1",id:"map"}),toolbar:Object.freeze({version:"3.5.0",id:"oltb"}),urlParameter:Object.freeze({debug:"oltb-debug",marker:"oltb-marker"}),marker:Object.freeze({focusZoom:6,label:{shouldRender:!0,visibleUnderResolution:5e3},pulseAnimation:{isEnabled:!0,duration:2e3,shouldLoop:!0,strokeWidth:1,defaultStartSize:0,defaultEndSize:14,defaultColor:"#3B4352FF"}}),scroll:Object.freeze({distance:100}),browser:Object.freeze({rem:16}),sessionStorage:Object.freeze({key:"oltb"}),localStorage:Object.freeze({key:"oltb"}),projection:Object.freeze({default:"EPSG:3857",wgs84:"EPSG:4326"}),overlayOffset:Object.freeze({horizontal:0,vertical:-8}),tippy:Object.freeze({delay:[600,100]}),deviceWidth:Object.freeze({xs:"0",sm:"576",md:"768",lg:"992",xl:"1200",xxl:"1400"}),autoRemovalDuation:Object.freeze({slow:6e3,normal:4e3,fast:2e3}),animationDuration:Object.freeze({slow:450,normal:350,fast:250,warp:150}),aColorPicker:Object.freeze({showPaletteAsDefault:!0,palette:Object.freeze(["#F0F6FF","#D7E3FA","#6397C2","#0166A5","#00385B","#E7EFFF","#C7D9F8","#5B88D6","#2357B1","#103677","#E8E6FF","#D0CAFF","#9085E4","#52489B","#2E2769","#FEEDFF","#FEE6FF","#E8A2EA","#914594","#59275A","#DDFEFF","#BCF8FA","#56BABD","#00959A","#005255","#DFFFFC","#BCFAF4","#3CAEA3","#007C70","#004942","#E0F4FF","#CEEEFF","#68B9E5","#0080C5","#004367","#FFF8E1","#FBEAB2","#FBDD83","#FBBD02","#493B10","#FFEDDB","#FFDDBC","#FCBE80","#F08741","#6B310A","#FFE6E6","#FDB5B4","#E96B69","#D64B49","#8D2120","#F3F4F5","#D3D9E6","#959DAD","#3B4352","#212529","#000000","#FFFFFF"])})}),qg="config-manager.js",Zg=Object.freeze({url:"./assets/config/config.json"});class Jg extends ig{static#s;static#r;static async initAsync(t={}){return this.#r=Fh.merge(Fh.cloneDeep(Zg),t),rg.logDebug(qg,"initAsync","Initialization started"),this.#o(this.#r.url)}static setMap(t){}static getName(){return qg}static getConfig(){return this.#s||Fh.cloneDeep(Xg)}static clearConfig(){this.#s=Fh.cloneDeep(Xg)}static async#o(t){const e=Date.now().toString();return kd.get(t,{responseType:"application/json",params:{cache:e},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then((t=>{if(200!==t.status)throw new Error("Bad response from server",{cause:t});return JSON.parse(t.data)})).then((t=>(this.#s=Fh.mergeWith(Fh.cloneDeep(Xg),t,((t,e)=>{if(Fh.isArray(e))return e})),rg.logInformation(qg,"loadConfigFileAsync",Fh.cloneDeep(t)),rg.logInformation(qg,"loadConfigFileAsync",Fh.cloneDeep(this.#s)),Promise.resolve({filename:qg,result:!0})))).catch((t=>(rg.logWarning(qg,"loadConfigFileAsync",{message:"Failed to load configurations from /assets/config/config.json directory",error:t}),Promise.resolve({filename:qg,result:!1}))))}}class tp{static createElement(t={}){const e=window.document.createElement(t.element),i={id:"id",class:"className",value:"value",text:"innerText",html:"innerHTML",style:"style",title:"title"};for(const[n,s]of Object.entries(i)){const i=t[n];i&&(e[s]="style"===n?Object.entries(i).map((([t,e])=>`${t}:${e}`)).join(";"):"string"==typeof i?i.trim():i)}for(const i in t.attributes)e.setAttribute(i,t.attributes[i]);for(const i in t.prototypes)e[i]=t.prototypes[i];for(const i in t.listeners){const n=t.listeners[i];Array.isArray(n)?n.forEach((t=>{e.addEventListener(i,t)})):e.addEventListener(i,n)}return e}static removeElements(t=[]){t.forEach((t=>{this.removeElement(t)}))}static removeElement(t){t.remove()}static clearElements(t=[]){t.forEach((t=>{this.clearElement(t)}))}static clearText(t){t.innerText=""}static clearElement(t){t.innerHTML=""}static prependChildren(t,e=[]){e.forEach((e=>{t.prepend(e)}))}static appendChildren(t,e=[]){e.forEach((e=>{t.appendChild(e)}))}static runAnimation(t,e){if(!t)return;t.classList.remove(e),t.offsetWidth,t.classList.add(e);const i=Jg.getConfig().animationDuration.fast;window.setTimeout((()=>{t.classList.remove(e)}),i)}static flashClass(t,e){t.classList.add(e);const i=Jg.getConfig().animationDuration.slow;window.setTimeout((()=>{t.classList.remove(e)}),i)}}const ep=Object.freeze({browser:Object.freeze({change:"change",click:"click",contentLoaded:"DOMContentLoaded",contextMenu:"contextmenu",error:"error",fullScreenChange:"fullscreenchange",input:"input",keyDown:"keydown",keyUp:"keyup",load:"load",mouseDown:"mousedown",mouseMove:"mousemove",mouseOut:"mouseout",resize:"resize",wheel:"wheel"}),openLayers:Object.freeze({add:"add",boxCancel:"boxcancel",boxDrag:"boxdrag",boxEnd:"boxend",boxStart:"boxstart",change:"change",drawAbort:"drawabort",drawEnd:"drawend",drawStart:"drawstart",error:"error",modifyEnd:"modifyend",modifyStart:"modifystart",moveEnd:"moveend",pointerMove:"pointermove",postRender:"postrender",preRender:"prerender",propertyChange:"propertychange",remove:"remove",renderComplete:"rendercomplete",singleClick:"singleclick",snap:"snap",unSnap:"unsnap",translateEnd:"translateend",translateStart:"translatestart"}),custom:Object.freeze({activeFeatureLayerChange:"oltb.active.feature.layer.change",browserStateCleared:"oltb.browser.state.cleared",colorChange:"oltb.color.change",featureEdited:"oltb.feature.edited",featureLayerAdded:"oltb.featureLayer.added",featureLayerRemoved:"oltb.featureLayer.removed",featureRemoved:"oltb.feature.removed",mapLayerAdded:"oltb.mapLayer.added",mapLayerRemoved:"oltb.mapLayer.removed",ready:"oltb.is.ready",toolbarDirectionChange:"oltb.toolbar.direction.change"})}),ip=Object.freeze(["marker","tooltip","onChangeListener"]),np="state-manager.js";class sp extends ig{static#a;static#l;static async initAsync(t={}){return rg.logDebug(np,"initAsync","Initialization started"),this.#a=this.#A(t),this.#l=this.#c(),new Promise((t=>{t({filename:np,result:!0})}))}static setMap(t){}static getName(){return np}static#A(t){const e=Object.freeze([...ip,...t?.ignoredKeys||[]]);return rg.logDebug(np,"getIgnoredKeys",e),e}static#c(){rg.logDebug(np,"getBrowserData","Loading stored state from browser");let t={};try{const e=Jg.getConfig().localStorage.key;t=JSON.parse(localStorage.getItem(e))||{}}catch(t){rg.logError(np,"getBrowserData",{message:"Failed to load application state",error:t})}return rg.logDebug(np,"getBrowserData",Fh.cloneDeep(t)),t}static#h(){try{const t=JSON.stringify(this.#l,((t,e)=>{if(!this.#a.includes(t))return e})),e=Jg.getConfig().localStorage.key;localStorage.setItem(e,t)}catch(t){rg.logError(np,"saveState",{message:"Failed to save application state",error:t})}}static loadRuntimeState(){this.#l=this.#c()}static getIgnoredKeys(){return this.#a}static setStateObject(t,e){this.#l[t]=e,this.#h()}static getStateObject(t){return t in this.#l?this.#l[t]:{}}static getAndMergeStateObject(t,e){return Fh.merge(Fh.cloneDeep(e),this.getStateObject(t))}static clear(){rg.logDebug(np,"clear",{info:"Clearing stored state from browser",state:Fh.cloneDeep(this.#l)}),this.#l=this.#c()}}const rp=Object.freeze({bookmarkTool:"bookmarkTool",coordinatesTool:"coordinatesTool",directionTool:"directionTool",drawTool:"drawTool",editTool:"editTool",graticuleTool:"graticuleTool",homeTool:"homeTool",layerTool:"layerTool",magnifyTool:"magnifyTool",mapData:"mapData",measureTool:"measureTool",overviewTool:"overviewTool",scaleLineTool:"scalelineTool",scissorsTool:"scissorsTool",settingsManager:"settingsManager",splitViewTool:"splitviewTool",themeTool:"themeTool",toolboxTool:"toolboxTool",translationManager:"translationManager",zoomboxTool:"zoomboxTool"}),op="element-manager.js",ap="oltb-toolbox-container";class lp extends ig{static#u;static#d;static#g;static#p;static async initAsync(t={}){return rg.logDebug(op,"initAsync","Initialization started"),this.#u=this.#f(),this.#d=this.#m(),this.#g=this.#_(),this.#p=this.#y(),window.addEventListener(ep.browser.load,this.#w.bind(this)),window.addEventListener(ep.browser.resize,this.#v.bind(this)),window.addEventListener(ep.custom.ready,this.#v.bind(this)),window.addEventListener(ep.custom.toolbarDirectionChange,this.#v.bind(this)),window.addEventListener(ep.custom.browserStateCleared,this.#b.bind(this)),new Promise((t=>{t({filename:op,result:!0})}))}static setMap(t){}static getName(){return op}static#f(){return window.document.getElementById(Jg.getConfig().openLayers.id)}static#m(){const t=tp.createElement({element:"div",class:"oltb-toast-container",attributes:{"data-html2canvas-ignore":"true"}});return tp.appendChildren(lp.getMapElement(),[t]),t}static#_(){const t=Jg.getConfig(),e=window.document.getElementById(t.toolbar.id);e.setAttribute("data-html2canvas-ignore","true"),e.addEventListener(ep.browser.wheel,this.#C.bind(e));const i=rp.themeTool,n=rp.directionTool;"dark"===sp.getStateObject(i).theme&&e.classList.add("dark");"light"===sp.getStateObject(i).theme&&e.classList.remove("dark");"row"===sp.getStateObject(n).direction&&e.classList.add("row");return"col"===sp.getStateObject(n).direction&&e.classList.remove("row"),e.classList.contains("dark")&&window.document.body.classList.add(t.className.dark),e.classList.contains("row")&&window.document.body.classList.add(t.className.row),e}static#y(){const t=tp.createElement({element:"div",class:ap,attributes:{"data-html2canvas-ignore":"true"}});return tp.appendChildren(lp.getMapElement(),[t]),t}static#b(t){window.innerWidth<=Jg.getConfig().deviceWidth.sm?this.#p.classList.add(`${ap}--collision`):this.#p.classList.remove(`${ap}--collision`)}static#C(t){if(!t.ctrlKey){const e=0,i=Jg.getConfig().scroll.distance;this.scrollLeft+=t.deltaY>e?i:-i}}static#w(t){window.setTimeout((()=>{this.#g.classList.add("init-visible")}),600)}static#v(t){const e=window.innerWidth,i=this.#g.offsetWidth,n=this.#p.offsetWidth;e-(3.5*Jg.getConfig().browser.rem+i+n)<=0?this.#p.classList.add(`${ap}--collision`):this.#p.classList.remove(`${ap}--collision`)}static getMapElement(){return this.#u}static getToastElement(){return this.#d}static getToolbarElement(){return this.#g}static getToolboxElement(){return this.#p}}var Ap="top",cp="bottom",hp="right",up="left",dp="auto",gp=[Ap,cp,hp,up],pp="start",fp="end",mp="viewport",_p="popper",yp=gp.reduce((function(t,e){return t.concat([e+"-"+pp,e+"-"+fp])}),[]),wp=[].concat(gp,[dp]).reduce((function(t,e){return t.concat([e,e+"-"+pp,e+"-"+fp])}),[]),vp=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function bp(t){return t?(t.nodeName||"").toLowerCase():null}function Cp(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function xp(t){return t instanceof Cp(t).Element||t instanceof Element}function Bp(t){return t instanceof Cp(t).HTMLElement||t instanceof HTMLElement}function Ep(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Cp(t).ShadowRoot||t instanceof ShadowRoot)}var Sp={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];Bp(s)&&bp(s)&&(Object.assign(s.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?s.removeAttribute(t):s.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],s=e.attributes[t]||{},r=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]).reduce((function(t,e){return t[e]="",t}),{});Bp(n)&&bp(n)&&(Object.assign(n.style,r),Object.keys(s).forEach((function(t){n.removeAttribute(t)})))}))}},requires:["computeStyles"]};function Fp(t){return t.split("-")[0]}var Ip=Math.max,Lp=Math.min,Mp=Math.round;function Tp(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function Rp(){return!/^((?!chrome|android).)*safari/i.test(Tp())}function kp(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var n=t.getBoundingClientRect(),s=1,r=1;e&&Bp(t)&&(s=t.offsetWidth>0&&Mp(n.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Mp(n.height)/t.offsetHeight||1);var o=(xp(t)?Cp(t):window).visualViewport,a=!Rp()&&i,l=(n.left+(a&&o?o.offsetLeft:0))/s,A=(n.top+(a&&o?o.offsetTop:0))/r,c=n.width/s,h=n.height/r;return{width:c,height:h,top:A,right:l+c,bottom:A+h,left:l,x:l,y:A}}function Up(t){var e=kp(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function Dp(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&Ep(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Op(t){return Cp(t).getComputedStyle(t)}function Pp(t){return["table","td","th"].indexOf(bp(t))>=0}function Np(t){return((xp(t)?t.ownerDocument:t.document)||window.document).documentElement}function Qp(t){return"html"===bp(t)?t:t.assignedSlot||t.parentNode||(Ep(t)?t.host:null)||Np(t)}function Hp(t){return Bp(t)&&"fixed"!==Op(t).position?t.offsetParent:null}function Gp(t){for(var e=Cp(t),i=Hp(t);i&&Pp(i)&&"static"===Op(i).position;)i=Hp(i);return i&&("html"===bp(i)||"body"===bp(i)&&"static"===Op(i).position)?e:i||function(t){var e=/firefox/i.test(Tp());if(/Trident/i.test(Tp())&&Bp(t)&&"fixed"===Op(t).position)return null;var i=Qp(t);for(Ep(i)&&(i=i.host);Bp(i)&&["html","body"].indexOf(bp(i))<0;){var n=Op(i);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return i;i=i.parentNode}return null}(t)||e}function Vp(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function zp(t,e,i){return Ip(t,Lp(e,i))}function Kp(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function jp(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}var Wp={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,i=t.state,n=t.name,s=t.options,r=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Fp(i.placement),l=Vp(a),A=[up,hp].indexOf(a)>=0?"height":"width";if(r&&o){var c=function(t,e){return Kp("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:jp(t,gp))}(s.padding,i),h=Up(r),u="y"===l?Ap:up,d="y"===l?cp:hp,g=i.rects.reference[A]+i.rects.reference[l]-o[l]-i.rects.popper[A],p=o[l]-i.rects.reference[l],f=Gp(r),m=f?"y"===l?f.clientHeight||0:f.clientWidth||0:0,_=g/2-p/2,y=c[u],w=m-h[A]-c[d],v=m/2-h[A]/2+_,b=zp(y,v,w),C=l;i.modifiersData[n]=((e={})[C]=b,e.centerOffset=b-v,e)}},effect:function(t){var e=t.state,i=t.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&Dp(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $p(t){return t.split("-")[1]}var Yp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Xp(t){var e,i=t.popper,n=t.popperRect,s=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,A=t.adaptive,c=t.roundOffsets,h=t.isFixed,u=o.x,d=void 0===u?0:u,g=o.y,p=void 0===g?0:g,f="function"==typeof c?c({x:d,y:p}):{x:d,y:p};d=f.x,p=f.y;var m=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),y=up,w=Ap,v=window;if(A){var b=Gp(i),C="clientHeight",x="clientWidth";if(b===Cp(i)&&"static"!==Op(b=Np(i)).position&&"absolute"===a&&(C="scrollHeight",x="scrollWidth"),s===Ap||(s===up||s===hp)&&r===fp)w=cp,p-=(h&&b===v&&v.visualViewport?v.visualViewport.height:b[C])-n.height,p*=l?1:-1;if(s===up||(s===Ap||s===cp)&&r===fp)y=hp,d-=(h&&b===v&&v.visualViewport?v.visualViewport.width:b[x])-n.width,d*=l?1:-1}var B,E=Object.assign({position:a},A&&Yp),S=!0===c?function(t,e){var i=t.x,n=t.y,s=e.devicePixelRatio||1;return{x:Mp(i*s)/s||0,y:Mp(n*s)/s||0}}({x:d,y:p},Cp(i)):{x:d,y:p};return d=S.x,p=S.y,l?Object.assign({},E,((B={})[w]=_?"0":"",B[y]=m?"0":"",B.transform=(v.devicePixelRatio||1)<=1?"translate("+d+"px, "+p+"px)":"translate3d("+d+"px, "+p+"px, 0)",B)):Object.assign({},E,((e={})[w]=_?p+"px":"",e[y]=m?d+"px":"",e.transform="",e))}var qp={passive:!0};var Zp={left:"right",right:"left",bottom:"top",top:"bottom"};function Jp(t){return t.replace(/left|right|bottom|top/g,(function(t){return Zp[t]}))}var tf={start:"end",end:"start"};function ef(t){return t.replace(/start|end/g,(function(t){return tf[t]}))}function nf(t){var e=Cp(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function sf(t){return kp(Np(t)).left+nf(t).scrollLeft}function rf(t){var e=Op(t),i=e.overflow,n=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+n)}function of(t){return["html","body","#document"].indexOf(bp(t))>=0?t.ownerDocument.body:Bp(t)&&rf(t)?t:of(Qp(t))}function af(t,e){var i;void 0===e&&(e=[]);var n=of(t),s=n===(null==(i=t.ownerDocument)?void 0:i.body),r=Cp(n),o=s?[r].concat(r.visualViewport||[],rf(n)?n:[]):n,a=e.concat(o);return s?a:a.concat(af(Qp(o)))}function lf(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Af(t,e,i){return e===mp?lf(function(t,e){var i=Cp(t),n=Np(t),s=i.visualViewport,r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var A=Rp();(A||!A&&"fixed"===e)&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+sf(t),y:l}}(t,i)):xp(e)?function(t,e){var i=kp(t,!1,"fixed"===e);return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}(e,i):lf(function(t){var e,i=Np(t),n=nf(t),s=null==(e=t.ownerDocument)?void 0:e.body,r=Ip(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ip(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-n.scrollLeft+sf(t),l=-n.scrollTop;return"rtl"===Op(s||i).direction&&(a+=Ip(i.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}(Np(t)))}function cf(t,e,i,n){var s="clippingParents"===e?function(t){var e=af(Qp(t)),i=["absolute","fixed"].indexOf(Op(t).position)>=0&&Bp(t)?Gp(t):t;return xp(i)?e.filter((function(t){return xp(t)&&Dp(t,i)&&"body"!==bp(t)})):[]}(t):[].concat(e),r=[].concat(s,[i]),o=r[0],a=r.reduce((function(e,i){var s=Af(t,i,n);return e.top=Ip(s.top,e.top),e.right=Lp(s.right,e.right),e.bottom=Lp(s.bottom,e.bottom),e.left=Ip(s.left,e.left),e}),Af(t,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function hf(t){var e,i=t.reference,n=t.element,s=t.placement,r=s?Fp(s):null,o=s?$p(s):null,a=i.x+i.width/2-n.width/2,l=i.y+i.height/2-n.height/2;switch(r){case Ap:e={x:a,y:i.y-n.height};break;case cp:e={x:a,y:i.y+i.height};break;case hp:e={x:i.x+i.width,y:l};break;case up:e={x:i.x-n.width,y:l};break;default:e={x:i.x,y:i.y}}var A=r?Vp(r):null;if(null!=A){var c="y"===A?"height":"width";switch(o){case pp:e[A]=e[A]-(i[c]/2-n[c]/2);break;case fp:e[A]=e[A]+(i[c]/2-n[c]/2)}}return e}function uf(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=void 0===n?t.placement:n,r=i.strategy,o=void 0===r?t.strategy:r,a=i.boundary,l=void 0===a?"clippingParents":a,A=i.rootBoundary,c=void 0===A?mp:A,h=i.elementContext,u=void 0===h?_p:h,d=i.altBoundary,g=void 0!==d&&d,p=i.padding,f=void 0===p?0:p,m=Kp("number"!=typeof f?f:jp(f,gp)),_=u===_p?"reference":_p,y=t.rects.popper,w=t.elements[g?_:u],v=cf(xp(w)?w:w.contextElement||Np(t.elements.popper),l,c,o),b=kp(t.elements.reference),C=hf({reference:b,element:y,placement:s}),x=lf(Object.assign({},y,C)),B=u===_p?x:b,E={top:v.top-B.top+m.top,bottom:B.bottom-v.bottom+m.bottom,left:v.left-B.left+m.left,right:B.right-v.right+m.right},S=t.modifiersData.offset;if(u===_p&&S){var F=S[s];Object.keys(E).forEach((function(t){var e=[hp,cp].indexOf(t)>=0?1:-1,i=[Ap,cp].indexOf(t)>=0?"y":"x";E[t]+=F[i]*e}))}return E}function df(t,e){void 0===e&&(e={});var i=e,n=i.placement,s=i.boundary,r=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,A=void 0===l?wp:l,c=$p(n),h=c?a?yp:yp.filter((function(t){return $p(t)===c})):gp,u=h.filter((function(t){return A.indexOf(t)>=0}));0===u.length&&(u=h);var d=u.reduce((function(e,i){return e[i]=uf(t,{placement:i,boundary:s,rootBoundary:r,padding:o})[Fp(i)],e}),{});return Object.keys(d).sort((function(t,e){return d[t]-d[e]}))}var gf={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var s=i.mainAxis,r=void 0===s||s,o=i.altAxis,a=void 0===o||o,l=i.fallbackPlacements,A=i.padding,c=i.boundary,h=i.rootBoundary,u=i.altBoundary,d=i.flipVariations,g=void 0===d||d,p=i.allowedAutoPlacements,f=e.options.placement,m=Fp(f),_=l||(m===f||!g?[Jp(f)]:function(t){if(Fp(t)===dp)return[];var e=Jp(t);return[ef(t),e,ef(e)]}(f)),y=[f].concat(_).reduce((function(t,i){return t.concat(Fp(i)===dp?df(e,{placement:i,boundary:c,rootBoundary:h,padding:A,flipVariations:g,allowedAutoPlacements:p}):i)}),[]),w=e.rects.reference,v=e.rects.popper,b=new Map,C=!0,x=y[0],B=0;B<y.length;B++){var E=y[B],S=Fp(E),F=$p(E)===pp,I=[Ap,cp].indexOf(S)>=0,L=I?"width":"height",M=uf(e,{placement:E,boundary:c,rootBoundary:h,altBoundary:u,padding:A}),T=I?F?hp:up:F?cp:Ap;w[L]>v[L]&&(T=Jp(T));var R=Jp(T),k=[];if(r&&k.push(M[S]<=0),a&&k.push(M[T]<=0,M[R]<=0),k.every((function(t){return t}))){x=E,C=!1;break}b.set(E,k)}if(C)for(var U=function(t){var e=y.find((function(e){var i=b.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return x=e,"break"},D=g?3:1;D>0;D--){if("break"===U(D))break}e.placement!==x&&(e.modifiersData[n]._skip=!0,e.placement=x,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function pf(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function ff(t){return[Ap,hp,cp,up].some((function(e){return t[e]>=0}))}var mf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.offset,r=void 0===s?[0,0]:s,o=wp.reduce((function(t,i){return t[i]=function(t,e,i){var n=Fp(t),s=[up,Ap].indexOf(n)>=0?-1:1,r="function"==typeof i?i(Object.assign({},e,{placement:t})):i,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[up,hp].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}(i,e.rects,r),t}),{}),a=o[e.placement],l=a.x,A=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=A),e.modifiersData[n]=o}};var _f={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,i=t.options,n=t.name,s=i.mainAxis,r=void 0===s||s,o=i.altAxis,a=void 0!==o&&o,l=i.boundary,A=i.rootBoundary,c=i.altBoundary,h=i.padding,u=i.tether,d=void 0===u||u,g=i.tetherOffset,p=void 0===g?0:g,f=uf(e,{boundary:l,rootBoundary:A,padding:h,altBoundary:c}),m=Fp(e.placement),_=$p(e.placement),y=!_,w=Vp(m),v="x"===w?"y":"x",b=e.modifiersData.popperOffsets,C=e.rects.reference,x=e.rects.popper,B="function"==typeof p?p(Object.assign({},e.rects,{placement:e.placement})):p,E="number"==typeof B?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),S=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,F={x:0,y:0};if(b){if(r){var I,L="y"===w?Ap:up,M="y"===w?cp:hp,T="y"===w?"height":"width",R=b[w],k=R+f[L],U=R-f[M],D=d?-x[T]/2:0,O=_===pp?C[T]:x[T],P=_===pp?-x[T]:-C[T],N=e.elements.arrow,Q=d&&N?Up(N):{width:0,height:0},H=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=H[L],V=H[M],z=zp(0,C[T],Q[T]),K=y?C[T]/2-D-z-G-E.mainAxis:O-z-G-E.mainAxis,j=y?-C[T]/2+D+z+V+E.mainAxis:P+z+V+E.mainAxis,W=e.elements.arrow&&Gp(e.elements.arrow),$=W?"y"===w?W.clientTop||0:W.clientLeft||0:0,Y=null!=(I=null==S?void 0:S[w])?I:0,X=R+j-Y,q=zp(d?Lp(k,R+K-Y-$):k,R,d?Ip(U,X):U);b[w]=q,F[w]=q-R}if(a){var Z,J="x"===w?Ap:up,tt="x"===w?cp:hp,et=b[v],it="y"===v?"height":"width",nt=et+f[J],st=et-f[tt],rt=-1!==[Ap,up].indexOf(m),ot=null!=(Z=null==S?void 0:S[v])?Z:0,at=rt?nt:et-C[it]-x[it]-ot+E.altAxis,lt=rt?et+C[it]+x[it]-ot-E.altAxis:st,At=d&&rt?function(t,e,i){var n=zp(t,e,i);return n>i?i:n}(at,et,lt):zp(d?at:nt,et,d?lt:st);b[v]=At,F[v]=At-et}e.modifiersData[n]=F}},requiresIfExists:["offset"]};function yf(t,e,i){void 0===i&&(i=!1);var n,s,r=Bp(e),o=Bp(e)&&function(t){var e=t.getBoundingClientRect(),i=Mp(e.width)/t.offsetWidth||1,n=Mp(e.height)/t.offsetHeight||1;return 1!==i||1!==n}(e),a=Np(e),l=kp(t,o,i),A={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!i)&&(("body"!==bp(e)||rf(a))&&(A=(n=e)!==Cp(n)&&Bp(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:nf(n)),Bp(e)?((c=kp(e,!0)).x+=e.clientLeft,c.y+=e.clientTop):a&&(c.x=sf(a))),{x:l.left+A.scrollLeft-c.x,y:l.top+A.scrollTop-c.y,width:l.width,height:l.height}}function wf(t){var e=new Map,i=new Set,n=[];function s(t){i.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&s(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||s(t)})),n}var vf={placement:"bottom",modifiers:[],strategy:"absolute"};function bf(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Cf(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,s=e.defaultOptions,r=void 0===s?vf:s;return function(t,e,i){void 0===i&&(i=r);var s,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},vf,r),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],A=!1,c={state:a,setOptions:function(i){var s="function"==typeof i?i(a.options):i;h(),a.options=Object.assign({},r,a.options,s),a.scrollParents={reference:xp(t)?af(t):t.contextElement?af(t.contextElement):[],popper:af(e)};var o,A,u=function(t){var e=wf(t);return vp.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}((o=[].concat(n,a.options.modifiers),A=o.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{}),Object.keys(A).map((function(t){return A[t]}))));return a.orderedModifiers=u.filter((function(t){return t.enabled})),a.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,s=t.effect;if("function"==typeof s){var r=s({state:a,name:e,instance:c,options:n}),o=function(){};l.push(r||o)}})),c.update()},forceUpdate:function(){if(!A){var t=a.elements,e=t.reference,i=t.popper;if(bf(e,i)){a.rects={reference:yf(e,Gp(i),"fixed"===a.options.strategy),popper:Up(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(t){return a.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var s=a.orderedModifiers[n],r=s.fn,o=s.options,l=void 0===o?{}:o,h=s.name;"function"==typeof r&&(a=r({state:a,options:l,name:h,instance:c})||a)}else a.reset=!1,n=-1}}},update:(s=function(){return new Promise((function(t){c.forceUpdate(),t(a)}))},function(){return o||(o=new Promise((function(t){Promise.resolve().then((function(){o=void 0,t(s())}))}))),o}),destroy:function(){h(),A=!0}};if(!bf(t,e))return c;function h(){l.forEach((function(t){return t()})),l=[]}return c.setOptions(i).then((function(t){!A&&i.onFirstUpdate&&i.onFirstUpdate(t)})),c}}var xf=Cf({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,i=t.instance,n=t.options,s=n.scroll,r=void 0===s||s,o=n.resize,a=void 0===o||o,l=Cp(e.elements.popper),A=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&A.forEach((function(t){t.addEventListener("scroll",i.update,qp)})),a&&l.addEventListener("resize",i.update,qp),function(){r&&A.forEach((function(t){t.removeEventListener("scroll",i.update,qp)})),a&&l.removeEventListener("resize",i.update,qp)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,i=t.name;e.modifiersData[i]=hf({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,i=t.options,n=i.gpuAcceleration,s=void 0===n||n,r=i.adaptive,o=void 0===r||r,a=i.roundOffsets,l=void 0===a||a,A={placement:Fp(e.placement),variation:$p(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Xp(Object.assign({},A,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Xp(Object.assign({},A,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},Sp,mf,gf,_f,Wp,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,i=t.name,n=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=uf(e,{elementContext:"reference"}),a=uf(e,{altBoundary:!0}),l=pf(o,n),A=pf(a,s,r),c=ff(l),h=ff(A);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:A,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}}]}),Bf="tippy-content",Ef="tippy-arrow",Sf="tippy-svg-arrow",Ff={passive:!0,capture:!0},If=function(){return document.body};function Lf(t,e,i){if(Array.isArray(t)){var n=t[e];return null==n?Array.isArray(i)?i[e]:i:n}return t}function Mf(t,e){var i={}.toString.call(t);return 0===i.indexOf("[object")&&i.indexOf(e+"]")>-1}function Tf(t,e){return"function"==typeof t?t.apply(void 0,e):t}function Rf(t,e){return 0===e?t:function(n){clearTimeout(i),i=setTimeout((function(){t(n)}),e)};var i}function kf(t,e){var i=Object.assign({},t);return e.forEach((function(t){delete i[t]})),i}function Uf(t){return[].concat(t)}function Df(t,e){-1===t.indexOf(e)&&t.push(e)}function Of(t){return[].slice.call(t)}function Pf(t){return Object.keys(t).reduce((function(e,i){return void 0!==t[i]&&(e[i]=t[i]),e}),{})}function Nf(){return document.createElement("div")}function Qf(t){return["Element","Fragment"].some((function(e){return Mf(t,e)}))}function Hf(t){return Qf(t)?[t]:function(t){return Mf(t,"NodeList")}(t)?Of(t):Array.isArray(t)?t:Of(document.querySelectorAll(t))}function Gf(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function Vf(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function zf(t,e,i){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[n](e,i)}))}function Kf(t,e){for(var i=e;i;){var n;if(t.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var jf={isTouch:!1},Wf=0;function $f(){jf.isTouch||(jf.isTouch=!0,window.performance&&document.addEventListener("mousemove",Yf))}function Yf(){var t=performance.now();t-Wf<20&&(jf.isTouch=!1,document.removeEventListener("mousemove",Yf)),Wf=t}function Xf(){var t,e=document.activeElement;if((t=e)&&t._tippy&&t._tippy.reference===t){var i=e._tippy;e.blur&&!i.state.isVisible&&e.blur()}}var qf=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,Zf=Object.assign({appendTo:If,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),Jf=Object.keys(Zf);function tm(t){var e=(t.plugins||[]).reduce((function(e,i){var n,s=i.name,r=i.defaultValue;s&&(e[s]=void 0!==t[s]?t[s]:null!=(n=Zf[s])?n:r);return e}),{});return Object.assign({},t,e)}function em(t,e){var i=Object.assign({},e,{content:Tf(e.content,[t])},e.ignoreAttributes?{}:function(t,e){var i=(e?Object.keys(tm(Object.assign({},Zf,{plugins:e}))):Jf).reduce((function(e,i){var n=(t.getAttribute("data-tippy-"+i)||"").trim();if(!n)return e;if("content"===i)e[i]=n;else try{e[i]=JSON.parse(n)}catch(t){e[i]=n}return e}),{});return i}(t,e.plugins));return i.aria=Object.assign({},Zf.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?e.interactive:i.aria.expanded,content:"auto"===i.aria.content?e.interactive?null:"describedby":i.aria.content},i}function im(t,e){t.innerHTML=e}function nm(t){var e=Nf();return!0===t?e.className=Ef:(e.className=Sf,Qf(t)?e.appendChild(t):im(e,t)),e}function sm(t,e){Qf(e.content)?(im(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?im(t,e.content):t.textContent=e.content)}function rm(t){var e=t.firstElementChild,i=Of(e.children);return{box:e,content:i.find((function(t){return t.classList.contains(Bf)})),arrow:i.find((function(t){return t.classList.contains(Ef)||t.classList.contains(Sf)})),backdrop:i.find((function(t){return t.classList.contains("tippy-backdrop")}))}}function om(t){var e=Nf(),i=Nf();i.className="tippy-box",i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=Nf();function s(i,n){var s=rm(e),r=s.box,o=s.content,a=s.arrow;n.theme?r.setAttribute("data-theme",n.theme):r.removeAttribute("data-theme"),"string"==typeof n.animation?r.setAttribute("data-animation",n.animation):r.removeAttribute("data-animation"),n.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?r.setAttribute("role",n.role):r.removeAttribute("role"),i.content===n.content&&i.allowHTML===n.allowHTML||sm(o,t.props),n.arrow?a?i.arrow!==n.arrow&&(r.removeChild(a),r.appendChild(nm(n.arrow))):r.appendChild(nm(n.arrow)):a&&r.removeChild(a)}return n.className=Bf,n.setAttribute("data-state","hidden"),sm(n,t.props),e.appendChild(i),i.appendChild(n),s(t.props,t.props),{popper:e,onUpdate:s}}om.$$tippy=!0;var am=1,lm=[],Am=[];function cm(t,e){var i,n,s,r,o,a,l,A,c=em(t,Object.assign({},Zf,tm(Pf(e)))),h=!1,u=!1,d=!1,g=!1,p=[],f=Rf(W,c.interactiveDebounce),m=am++,_=(A=c.plugins).filter((function(t,e){return A.indexOf(t)===e})),y={id:m,reference:t,popper:Nf(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:_,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(s)},setProps:function(e){if(y.state.isDestroyed)return;R("onBeforeUpdate",[y,e]),K();var i=y.props,n=em(t,Object.assign({},i,Pf(e),{ignoreAttributes:!0}));y.props=n,z(),i.interactiveDebounce!==n.interactiveDebounce&&(D(),f=Rf(W,n.interactiveDebounce));i.triggerTarget&&!n.triggerTarget?Uf(i.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):n.triggerTarget&&t.removeAttribute("aria-expanded");U(),T(),b&&b(i,n);y.popperInstance&&(q(),J().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));R("onAfterUpdate",[y,e])},setContent:function(t){y.setProps({content:t})},show:function(){var t=y.state.isVisible,e=y.state.isDestroyed,i=!y.state.isEnabled,n=jf.isTouch&&!y.props.touch,s=Lf(y.props.duration,0,Zf.duration);if(t||e||i||n)return;if(F().hasAttribute("disabled"))return;if(R("onShow",[y],!1),!1===y.props.onShow(y))return;y.state.isVisible=!0,S()&&(v.style.visibility="visible");T(),Q(),y.state.isMounted||(v.style.transition="none");if(S()){var r=L();Gf([r.box,r.content],0)}a=function(){var t;if(y.state.isVisible&&!g){if(g=!0,v.offsetHeight,v.style.transition=y.props.moveTransition,S()&&y.props.animation){var e=L(),i=e.box,n=e.content;Gf([i,n],s),Vf([i,n],"visible")}k(),U(),Df(Am,y),null==(t=y.popperInstance)||t.forceUpdate(),R("onMount",[y]),y.props.animation&&S()&&function(t,e){G(t,e)}(s,(function(){y.state.isShown=!0,R("onShown",[y])}))}},function(){var t,e=y.props.appendTo,i=F();t=y.props.interactive&&e===If||"parent"===e?i.parentNode:Tf(e,[i]);t.contains(v)||t.appendChild(v);y.state.isMounted=!0,q()}()},hide:function(){var t=!y.state.isVisible,e=y.state.isDestroyed,i=!y.state.isEnabled,n=Lf(y.props.duration,1,Zf.duration);if(t||e||i)return;if(R("onHide",[y],!1),!1===y.props.onHide(y))return;y.state.isVisible=!1,y.state.isShown=!1,g=!1,h=!1,S()&&(v.style.visibility="hidden");if(D(),H(),T(!0),S()){var s=L(),r=s.box,o=s.content;y.props.animation&&(Gf([r,o],n),Vf([r,o],"hidden"))}k(),U(),y.props.animation?S()&&function(t,e){G(t,(function(){!y.state.isVisible&&v.parentNode&&v.parentNode.contains(v)&&e()}))}(n,y.unmount):y.unmount()},hideWithInteractivity:function(t){I().addEventListener("mousemove",f),Df(lm,f),f(t)},enable:function(){y.state.isEnabled=!0},disable:function(){y.hide(),y.state.isEnabled=!1},unmount:function(){y.state.isVisible&&y.hide();if(!y.state.isMounted)return;Z(),J().forEach((function(t){t._tippy.unmount()})),v.parentNode&&v.parentNode.removeChild(v);Am=Am.filter((function(t){return t!==y})),y.state.isMounted=!1,R("onHidden",[y])},destroy:function(){if(y.state.isDestroyed)return;y.clearDelayTimeouts(),y.unmount(),K(),delete t._tippy,y.state.isDestroyed=!0,R("onDestroy",[y])}};if(!c.render)return y;var w=c.render(y),v=w.popper,b=w.onUpdate;v.setAttribute("data-tippy-root",""),v.id="tippy-"+y.id,y.popper=v,t._tippy=y,v._tippy=y;var C=_.map((function(t){return t.fn(y)})),x=t.hasAttribute("aria-expanded");return z(),U(),T(),R("onCreate",[y]),c.showOnCreate&&tt(),v.addEventListener("mouseenter",(function(){y.props.interactive&&y.state.isVisible&&y.clearDelayTimeouts()})),v.addEventListener("mouseleave",(function(){y.props.interactive&&y.props.trigger.indexOf("mouseenter")>=0&&I().addEventListener("mousemove",f)})),y;function B(){var t=y.props.touch;return Array.isArray(t)?t:[t,0]}function E(){return"hold"===B()[0]}function S(){var t;return!(null==(t=y.props.render)||!t.$$tippy)}function F(){return l||t}function I(){var t,e,i=F().parentNode;return i?null!=(e=Uf(i)[0])&&null!=(t=e.ownerDocument)&&t.body?e.ownerDocument:document:document}function L(){return rm(v)}function M(t){return y.state.isMounted&&!y.state.isVisible||jf.isTouch||r&&"focus"===r.type?0:Lf(y.props.delay,t?0:1,Zf.delay)}function T(t){void 0===t&&(t=!1),v.style.pointerEvents=y.props.interactive&&!t?"":"none",v.style.zIndex=""+y.props.zIndex}function R(t,e,i){var n;(void 0===i&&(i=!0),C.forEach((function(i){i[t]&&i[t].apply(i,e)})),i)&&(n=y.props)[t].apply(n,e)}function k(){var e=y.props.aria;if(e.content){var i="aria-"+e.content,n=v.id;Uf(y.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(i);if(y.state.isVisible)t.setAttribute(i,e?e+" "+n:n);else{var s=e&&e.replace(n,"").trim();s?t.setAttribute(i,s):t.removeAttribute(i)}}))}}function U(){!x&&y.props.aria.expanded&&Uf(y.props.triggerTarget||t).forEach((function(t){y.props.interactive?t.setAttribute("aria-expanded",y.state.isVisible&&t===F()?"true":"false"):t.removeAttribute("aria-expanded")}))}function D(){I().removeEventListener("mousemove",f),lm=lm.filter((function(t){return t!==f}))}function O(e){if(!jf.isTouch||!d&&"mousedown"!==e.type){var i=e.composedPath&&e.composedPath()[0]||e.target;if(!y.props.interactive||!Kf(v,i)){if(Uf(y.props.triggerTarget||t).some((function(t){return Kf(t,i)}))){if(jf.isTouch)return;if(y.state.isVisible&&y.props.trigger.indexOf("click")>=0)return}else R("onClickOutside",[y,e]);!0===y.props.hideOnClick&&(y.clearDelayTimeouts(),y.hide(),u=!0,setTimeout((function(){u=!1})),y.state.isMounted||H())}}}function P(){d=!0}function N(){d=!1}function Q(){var t=I();t.addEventListener("mousedown",O,!0),t.addEventListener("touchend",O,Ff),t.addEventListener("touchstart",N,Ff),t.addEventListener("touchmove",P,Ff)}function H(){var t=I();t.removeEventListener("mousedown",O,!0),t.removeEventListener("touchend",O,Ff),t.removeEventListener("touchstart",N,Ff),t.removeEventListener("touchmove",P,Ff)}function G(t,e){var i=L().box;function n(t){t.target===i&&(zf(i,"remove",n),e())}if(0===t)return e();zf(i,"remove",o),zf(i,"add",n),o=n}function V(e,i,n){void 0===n&&(n=!1),Uf(y.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,i,n),p.push({node:t,eventType:e,handler:i,options:n})}))}function z(){var t;E()&&(V("touchstart",j,{passive:!0}),V("touchend",$,{passive:!0})),(t=y.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(V(t,j),t){case"mouseenter":V("mouseleave",$);break;case"focus":V(qf?"focusout":"blur",Y);break;case"focusin":V("focusout",Y)}}))}function K(){p.forEach((function(t){var e=t.node,i=t.eventType,n=t.handler,s=t.options;e.removeEventListener(i,n,s)})),p=[]}function j(t){var e,i=!1;if(y.state.isEnabled&&!X(t)&&!u){var n="focus"===(null==(e=r)?void 0:e.type);r=t,l=t.currentTarget,U(),!y.state.isVisible&&Mf(t,"MouseEvent")&&lm.forEach((function(e){return e(t)})),"click"===t.type&&(y.props.trigger.indexOf("mouseenter")<0||h)&&!1!==y.props.hideOnClick&&y.state.isVisible?i=!0:tt(t),"click"===t.type&&(h=!i),i&&!n&&et(t)}}function W(t){var e=t.target,i=F().contains(e)||v.contains(e);if("mousemove"!==t.type||!i){var n=J().concat(v).map((function(t){var e,i=null==(e=t._tippy.popperInstance)?void 0:e.state;return i?{popperRect:t.getBoundingClientRect(),popperState:i,props:c}:null})).filter(Boolean);(function(t,e){var i=e.clientX,n=e.clientY;return t.every((function(t){var e=t.popperRect,s=t.popperState,r=t.props.interactiveBorder,o=s.placement.split("-")[0],a=s.modifiersData.offset;if(!a)return!0;var l="bottom"===o?a.top.y:0,A="top"===o?a.bottom.y:0,c="right"===o?a.left.x:0,h="left"===o?a.right.x:0,u=e.top-n+l>r,d=n-e.bottom-A>r,g=e.left-i+c>r,p=i-e.right-h>r;return u||d||g||p}))})(n,t)&&(D(),et(t))}}function $(t){X(t)||y.props.trigger.indexOf("click")>=0&&h||(y.props.interactive?y.hideWithInteractivity(t):et(t))}function Y(t){y.props.trigger.indexOf("focusin")<0&&t.target!==F()||y.props.interactive&&t.relatedTarget&&v.contains(t.relatedTarget)||et(t)}function X(t){return!!jf.isTouch&&E()!==t.type.indexOf("touch")>=0}function q(){Z();var e=y.props,i=e.popperOptions,n=e.placement,s=e.offset,r=e.getReferenceClientRect,o=e.moveTransition,l=S()?rm(v).arrow:null,A=r?{getBoundingClientRect:r,contextElement:r.contextElement||F()}:t,c={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(S()){var i=L().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?i.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?i.setAttribute("data-"+t,""):i.removeAttribute("data-"+t)})),e.attributes.popper={}}}},h=[{name:"offset",options:{offset:s}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!o}},c];S()&&l&&h.push({name:"arrow",options:{element:l,padding:3}}),h.push.apply(h,(null==i?void 0:i.modifiers)||[]),y.popperInstance=xf(A,v,Object.assign({},i,{placement:n,onFirstUpdate:a,modifiers:h}))}function Z(){y.popperInstance&&(y.popperInstance.destroy(),y.popperInstance=null)}function J(){return Of(v.querySelectorAll("[data-tippy-root]"))}function tt(t){y.clearDelayTimeouts(),t&&R("onTrigger",[y,t]),Q();var e=M(!0),n=B(),s=n[0],r=n[1];jf.isTouch&&"hold"===s&&r&&(e=r),e?i=setTimeout((function(){y.show()}),e):y.show()}function et(t){if(y.clearDelayTimeouts(),R("onUntrigger",[y,t]),y.state.isVisible){if(!(y.props.trigger.indexOf("mouseenter")>=0&&y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&h)){var e=M(!1);e?n=setTimeout((function(){y.state.isVisible&&y.hide()}),e):s=requestAnimationFrame((function(){y.hide()}))}}else H()}}function hm(t,e){void 0===e&&(e={});var i=Zf.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",$f,Ff),window.addEventListener("blur",Xf);var n=Object.assign({},e,{plugins:i}),s=Hf(t).reduce((function(t,e){var i=e&&cm(e,n);return i&&t.push(i),t}),[]);return Qf(t)?s[0]:s}hm.defaultProps=Zf,hm.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Zf[e]=t[e]}))},hm.currentInput=jf;var um=Object.assign({},Sp,{effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow)}}),dm={mouseover:"mouseenter",focusin:"focus",click:"click"};function gm(t,e){var i=[],n=[],s=!1,r=e.target,o=kf(e,["target"]),a=Object.assign({},o,{trigger:"manual",touch:!1}),l=Object.assign({touch:Zf.touch},o,{showOnCreate:!0}),A=hm(t,a);function c(t){if(t.target&&!s){var i=t.target.closest(r);if(i){var o=i.getAttribute("data-tippy-trigger")||e.trigger||Zf.trigger;if(!i._tippy&&!("touchstart"===t.type&&"boolean"==typeof l.touch||"touchstart"!==t.type&&o.indexOf(dm[t.type])<0)){var a=hm(i,l);a&&(n=n.concat(a))}}}}function h(t,e,n,s){void 0===s&&(s=!1),t.addEventListener(e,n,s),i.push({node:t,eventType:e,handler:n,options:s})}return Uf(A).forEach((function(t){var e=t.destroy,r=t.enable,o=t.disable;t.destroy=function(t){void 0===t&&(t=!0),t&&n.forEach((function(t){t.destroy()})),n=[],i.forEach((function(t){var e=t.node,i=t.eventType,n=t.handler,s=t.options;e.removeEventListener(i,n,s)})),i=[],e()},t.enable=function(){r(),n.forEach((function(t){return t.enable()})),s=!1},t.disable=function(){o(),n.forEach((function(t){return t.disable()})),s=!0},function(t){var e=t.reference;h(e,"touchstart",c,Ff),h(e,"mouseover",c),h(e,"focusin",c),h(e,"click",c)}(t)})),A}hm.setDefaultProps({render:om});const pm=function(){return window.document.body.classList.contains(Jg.getConfig().className.row)};var fm,mm={exports:{}};var _m=(fm||(fm=1,function(t){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){var n=i(3);function s(t){return!0===n(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,i;return!1!==s(t)&&"function"==typeof(e=t.constructor)&&!1!==s(i=e.prototype)&&!1!==i.hasOwnProperty("isPrototypeOf")}},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=e.PALETTE_MATERIAL_CHROME=e.PALETTE_MATERIAL_500=e.COLOR_NAMES=e.getLuminance=e.intToRgb=e.rgbToInt=e.rgbToHsv=e.rgbToHsl=e.hslToRgb=e.rgbToHex=e.parseColor=e.parseColorToHsla=e.parseColorToHsl=e.parseColorToRgba=e.parseColorToRgb=e.from=e.createPicker=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=i(2),o=l(i(0)),a=l(i(4));function l(t){return t&&t.__esModule?t:{default:t}}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var h="undefined"!=typeof window&&window.navigator.userAgent.indexOf("Edge")>-1,u="undefined"!=typeof window&&window.navigator.userAgent.indexOf("rv:")>-1,d={id:null,attachTo:"body",showHSL:!0,showRGB:!0,showHEX:!0,showAlpha:!1,color:"#ff0000",palette:null,paletteEditable:!1,useAlphaInPalette:"auto",slBarSize:[232,150],hueBarSize:[150,11],alphaBarSize:[150,11]},g="COLOR",p="RGBA_USER",f="HSLA_USER";function m(t,e,i){return t?t instanceof HTMLElement?t:t instanceof NodeList?t[0]:"string"==typeof t?document.querySelector(t):t.jquery?t.get(0):i?e:null:e}function _(t){var e=t.getContext("2d"),i=+t.width,n=+t.height,o=e.createLinearGradient(1,1,1,n-1);return o.addColorStop(0,"white"),o.addColorStop(1,"black"),{setHue:function(t){var s=e.createLinearGradient(1,0,i-1,0);s.addColorStop(0,"hsla("+t+", 100%, 50%, 0)"),s.addColorStop(1,"hsla("+t+", 100%, 50%, 1)"),e.fillStyle=o,e.fillRect(0,0,i,n),e.fillStyle=s,e.globalCompositeOperation="multiply",e.fillRect(0,0,i,n),e.globalCompositeOperation="source-over"},grabColor:function(t,i){return e.getImageData(t,i,1,1).data},findColor:function(t,e,o){var a=(0,r.rgbToHsv)(t,e,o),l=s(a,3),A=l[1],c=l[2];return[A*i,n-c*n]}}}function y(t,e,i){return null===t?e:/^\s*$/.test(t)?i:!!/true|yes|1/i.test(t)||!/false|no|0/i.test(t)&&e}function w(t,e,i){if(null===t)return e;if(/^\s*$/.test(t))return i;var n=t.split(",").map(Number);return 2===n.length&&n[0]&&n[1]?n:e}var v=function(){function t(e,i){if(A(this,t),i?(e=m(e),this.options=Object.assign({},d,i)):e&&(0,o.default)(e)?(this.options=Object.assign({},d,e),e=m(this.options.attachTo)):(this.options=Object.assign({},d),e=m((0,r.nvl)(e,this.options.attachTo))),!e)throw new Error("Container not found: "+this.options.attachTo);!function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"acp-";if(e.hasAttribute(i+"show-hsl")&&(t.showHSL=y(e.getAttribute(i+"show-hsl"),d.showHSL,!0)),e.hasAttribute(i+"show-rgb")&&(t.showRGB=y(e.getAttribute(i+"show-rgb"),d.showRGB,!0)),e.hasAttribute(i+"show-hex")&&(t.showHEX=y(e.getAttribute(i+"show-hex"),d.showHEX,!0)),e.hasAttribute(i+"show-alpha")&&(t.showAlpha=y(e.getAttribute(i+"show-alpha"),d.showAlpha,!0)),e.hasAttribute(i+"palette-editable")&&(t.paletteEditable=y(e.getAttribute(i+"palette-editable"),d.paletteEditable,!0)),e.hasAttribute(i+"sl-bar-size")&&(t.slBarSize=w(e.getAttribute(i+"sl-bar-size"),d.slBarSize,[232,150])),e.hasAttribute(i+"hue-bar-size")&&(t.hueBarSize=w(e.getAttribute(i+"hue-bar-size"),d.hueBarSize,[150,11]),t.alphaBarSize=t.hueBarSize),e.hasAttribute(i+"palette")){var n=e.getAttribute(i+"palette");switch(n){case"PALETTE_MATERIAL_500":t.palette=r.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":case"":t.palette=r.PALETTE_MATERIAL_CHROME;break;default:t.palette=n.split(/[;|]/)}}e.hasAttribute(i+"color")&&(t.color=e.getAttribute(i+"color"))}(this.options,e),this.H=0,this.S=0,this.L=0,this.R=0,this.G=0,this.B=0,this.A=1,this.palette={},this.element=document.createElement("div"),this.options.id&&(this.element.id=this.options.id),this.element.className="a-color-picker",this.element.innerHTML=a.default,e.appendChild(this.element);var n=this.element.querySelector(".a-color-picker-h");this.setupHueCanvas(n),this.hueBarHelper=_(n),this.huePointer=this.element.querySelector(".a-color-picker-h+.a-color-picker-dot");var s=this.element.querySelector(".a-color-picker-sl");this.setupSlCanvas(s),this.slBarHelper=_(s),this.slPointer=this.element.querySelector(".a-color-picker-sl+.a-color-picker-dot"),this.preview=this.element.querySelector(".a-color-picker-preview"),this.setupClipboard(this.preview.querySelector(".a-color-picker-clipbaord")),this.options.showHSL?(this.setupInput(this.inputH=this.element.querySelector(".a-color-picker-hsl>input[nameref=H]")),this.setupInput(this.inputS=this.element.querySelector(".a-color-picker-hsl>input[nameref=S]")),this.setupInput(this.inputL=this.element.querySelector(".a-color-picker-hsl>input[nameref=L]"))):this.element.querySelector(".a-color-picker-hsl").remove(),this.options.showRGB?(this.setupInput(this.inputR=this.element.querySelector(".a-color-picker-rgb>input[nameref=R]")),this.setupInput(this.inputG=this.element.querySelector(".a-color-picker-rgb>input[nameref=G]")),this.setupInput(this.inputB=this.element.querySelector(".a-color-picker-rgb>input[nameref=B]"))):this.element.querySelector(".a-color-picker-rgb").remove(),this.options.showHEX?this.setupInput(this.inputRGBHEX=this.element.querySelector("input[nameref=RGBHEX]")):this.element.querySelector(".a-color-picker-rgbhex").remove(),this.options.paletteEditable||this.options.palette&&this.options.palette.length>0?this.setPalette(this.paletteRow=this.element.querySelector(".a-color-picker-palette")):(this.paletteRow=this.element.querySelector(".a-color-picker-palette"),this.paletteRow.remove()),this.options.showAlpha?(this.setupAlphaCanvas(this.element.querySelector(".a-color-picker-a")),this.alphaPointer=this.element.querySelector(".a-color-picker-a+.a-color-picker-dot")):this.element.querySelector(".a-color-picker-alpha").remove(),this.element.style.width=this.options.slBarSize[0]+"px",this.onValueChanged(g,this.options.color)}return n(t,[{key:"setupHueCanvas",value:function(t){var e=this;t.width=this.options.hueBarSize[0],t.height=this.options.hueBarSize[1];for(var i=t.getContext("2d"),n=i.createLinearGradient(0,0,this.options.hueBarSize[0],0),s=0;s<=1;s+=1/360)n.addColorStop(s,"hsl("+360*s+", 100%, 50%)");i.fillStyle=n,i.fillRect(0,0,this.options.hueBarSize[0],this.options.hueBarSize[1]);var o=function(i){var n=(0,r.limit)(i.clientX-t.getBoundingClientRect().left,0,e.options.hueBarSize[0]),s=Math.round(360*n/e.options.hueBarSize[0]);e.huePointer.style.left=n-7+"px",e.onValueChanged("H",s)},a=function t(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",(function(t){o(t),document.addEventListener("mousemove",o),document.addEventListener("mouseup",a)}))}},{key:"setupSlCanvas",value:function(t){var e=this;t.width=this.options.slBarSize[0],t.height=this.options.slBarSize[1];var i=function(i){var n=(0,r.limit)(i.clientX-t.getBoundingClientRect().left,0,e.options.slBarSize[0]-1),s=(0,r.limit)(i.clientY-t.getBoundingClientRect().top,0,e.options.slBarSize[1]-1),o=e.slBarHelper.grabColor(n,s);e.slPointer.style.left=n-7+"px",e.slPointer.style.top=s-7+"px",e.onValueChanged("RGB",o)},n=function t(){document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",(function(t){i(t),document.addEventListener("mousemove",i),document.addEventListener("mouseup",n)}))}},{key:"setupAlphaCanvas",value:function(t){var e=this;t.width=this.options.alphaBarSize[0],t.height=this.options.alphaBarSize[1];var i=t.getContext("2d"),n=i.createLinearGradient(0,0,t.width-1,0);n.addColorStop(0,"hsla(0, 0%, 50%, 0)"),n.addColorStop(1,"hsla(0, 0%, 50%, 1)"),i.fillStyle=n,i.fillRect(0,0,this.options.alphaBarSize[0],this.options.alphaBarSize[1]);var s=function(i){var n=(0,r.limit)(i.clientX-t.getBoundingClientRect().left,0,e.options.alphaBarSize[0]),s=+(n/e.options.alphaBarSize[0]).toFixed(2);e.alphaPointer.style.left=n-7+"px",e.onValueChanged("ALPHA",s)},o=function t(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};t.addEventListener("mousedown",(function(t){s(t),document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)}))}},{key:"setupInput",value:function(t){var e=this,i=+t.min,n=+t.max,s=t.getAttribute("nameref");t.hasAttribute("select-on-focus")&&t.addEventListener("focus",(function(){t.select()})),"text"===t.type?t.addEventListener("change",(function(){e.onValueChanged(s,t.value)})):((h||u)&&t.addEventListener("keydown",(function(o){"Up"===o.key?(t.value=(0,r.limit)(+t.value+1,i,n),e.onValueChanged(s,t.value),o.returnValue=!1):"Down"===o.key&&(t.value=(0,r.limit)(+t.value-1,i,n),e.onValueChanged(s,t.value),o.returnValue=!1)})),t.addEventListener("change",(function(){var o=+t.value;e.onValueChanged(s,(0,r.limit)(o,i,n))})))}},{key:"setupClipboard",value:function(t){var e=this;t.title="click to copy",t.addEventListener("click",(function(){t.value=(0,r.parseColor)([e.R,e.G,e.B,e.A],"hexcss4"),t.select(),document.execCommand("copy")}))}},{key:"setPalette",value:function(t){var e=this,i="auto"===this.options.useAlphaInPalette?this.options.showAlpha:this.options.useAlphaInPalette,n=null;switch(this.options.palette){case"PALETTE_MATERIAL_500":n=r.PALETTE_MATERIAL_500;break;case"PALETTE_MATERIAL_CHROME":n=r.PALETTE_MATERIAL_CHROME;break;default:n=(0,r.ensureArray)(this.options.palette)}if(this.options.paletteEditable||n.length>0){var s=function(i,n,s){var r=t.querySelector('.a-color-picker-palette-color[data-color="'+i+'"]')||document.createElement("div");r.className="a-color-picker-palette-color",r.style.backgroundColor=i,r.setAttribute("data-color",i),r.title=i,t.insertBefore(r,n),e.palette[i]=!0,s&&e.onPaletteColorAdd(i)},o=function(i,n){i?(t.removeChild(i),e.palette[i.getAttribute("data-color")]=!1,n&&e.onPaletteColorRemove(i.getAttribute("data-color"))):(t.querySelectorAll(".a-color-picker-palette-color[data-color]").forEach((function(e){t.removeChild(e)})),Object.keys(e.palette).forEach((function(t){e.palette[t]=!1})),n&&e.onPaletteColorRemove())};if(n.map((function(t){return(0,r.parseColor)(t,i?"rgbcss4":"hex")})).filter((function(t){return!!t})).forEach((function(t){return s(t)})),this.options.paletteEditable){var a=document.createElement("div");a.className="a-color-picker-palette-color a-color-picker-palette-add",a.innerHTML="+",t.appendChild(a),t.addEventListener("click",(function(t){/a-color-picker-palette-add/.test(t.target.className)?t.shiftKey?o(null,!0):s(i?(0,r.parseColor)([e.R,e.G,e.B,e.A],"rgbcss4"):(0,r.rgbToHex)(e.R,e.G,e.B),t.target,!0):/a-color-picker-palette-color/.test(t.target.className)&&(t.shiftKey?o(t.target,!0):e.onValueChanged(g,t.target.getAttribute("data-color")))}))}else t.addEventListener("click",(function(t){/a-color-picker-palette-color/.test(t.target.className)&&e.onValueChanged(g,t.target.getAttribute("data-color"))}))}else t.style.display="none"}},{key:"updatePalette",value:function(t){this.paletteRow.innerHTML="",this.palette={},this.paletteRow.parentElement||this.element.appendChild(this.paletteRow),this.options.palette=t,this.setPalette(this.paletteRow)}},{key:"onValueChanged",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{silent:!1};switch(t){case"H":this.H=e;var n=(0,r.hslToRgb)(this.H,this.S,this.L),o=s(n,3);this.R=o[0],this.G=o[1],this.B=o[2],this.slBarHelper.setHue(e),this.updatePointerH(this.H),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"S":this.S=e;var a=(0,r.hslToRgb)(this.H,this.S,this.L),l=s(a,3);this.R=l[0],this.G=l[1],this.B=l[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"L":this.L=e;var A=(0,r.hslToRgb)(this.H,this.S,this.L),c=s(A,3);this.R=c[0],this.G=c[1],this.B=c[2],this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"R":this.R=e;var h=(0,r.rgbToHsl)(this.R,this.G,this.B),u=s(h,3);this.H=u[0],this.S=u[1],this.L=u[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"G":this.G=e;var d=(0,r.rgbToHsl)(this.R,this.G,this.B),m=s(d,3);this.H=m[0],this.S=m[1],this.L=m[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"B":this.B=e;var _=(0,r.rgbToHsl)(this.R,this.G,this.B),y=s(_,3);this.H=y[0],this.S=y[1],this.L=y[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGBHEX(this.R,this.G,this.B);break;case"RGB":var w=s(e,3);this.R=w[0],this.G=w[1],this.B=w[2];var v=(0,r.rgbToHsl)(this.R,this.G,this.B),b=s(v,3);this.H=b[0],this.S=b[1],this.L=b[2],this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B);break;case p:var C=s(e,4);this.R=C[0],this.G=C[1],this.B=C[2],this.A=C[3];var x=(0,r.rgbToHsl)(this.R,this.G,this.B),B=s(x,3);this.H=B[0],this.S=B[1],this.L=B[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case f:var E=s(e,4);this.H=E[0],this.S=E[1],this.L=E[2],this.A=E[3];var S=(0,r.hslToRgb)(this.H,this.S,this.L),F=s(S,3);this.R=F[0],this.G=F[1],this.B=F[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"RGBHEX":var I=(0,r.cssColorToRgb)(e)||[this.R,this.G,this.B],L=s(I,3);this.R=L[0],this.G=L[1],this.B=L[2];var M=(0,r.rgbToHsl)(this.R,this.G,this.B),T=s(M,3);this.H=T[0],this.S=T[1],this.L=T[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B);break;case g:var R=(0,r.parseColor)(e,"rgba")||[0,0,0,1],k=s(R,4);this.R=k[0],this.G=k[1],this.B=k[2],this.A=k[3];var U=(0,r.rgbToHsl)(this.R,this.G,this.B),D=s(U,3);this.H=D[0],this.S=D[1],this.L=D[2],this.slBarHelper.setHue(this.H),this.updatePointerH(this.H),this.updatePointerSL(this.H,this.S,this.L),this.updateInputHSL(this.H,this.S,this.L),this.updateInputRGB(this.R,this.G,this.B),this.updateInputRGBHEX(this.R,this.G,this.B),this.updatePointerA(this.A);break;case"ALPHA":this.A=e}1===this.A?this.preview.style.backgroundColor="rgb("+this.R+","+this.G+","+this.B+")":this.preview.style.backgroundColor="rgba("+this.R+","+this.G+","+this.B+","+this.A+")",i&&i.silent||this.onchange&&this.onchange(this.preview.style.backgroundColor)}},{key:"onPaletteColorAdd",value:function(t){this.oncoloradd&&this.oncoloradd(t)}},{key:"onPaletteColorRemove",value:function(t){this.oncolorremove&&this.oncolorremove(t)}},{key:"updateInputHSL",value:function(t,e,i){this.options.showHSL&&(this.inputH.value=t,this.inputS.value=e,this.inputL.value=i)}},{key:"updateInputRGB",value:function(t,e,i){this.options.showRGB&&(this.inputR.value=t,this.inputG.value=e,this.inputB.value=i)}},{key:"updateInputRGBHEX",value:function(t,e,i){this.options.showHEX&&(this.inputRGBHEX.value=(0,r.rgbToHex)(t,e,i))}},{key:"updatePointerH",value:function(t){var e=this.options.hueBarSize[0]*t/360;this.huePointer.style.left=e-7+"px"}},{key:"updatePointerSL",value:function(t,e,i){var n=(0,r.hslToRgb)(t,e,i),o=s(n,3),a=o[0],l=o[1],A=o[2],c=this.slBarHelper.findColor(a,l,A),h=s(c,2),u=h[0],d=h[1];u>=0&&(this.slPointer.style.left=u-7+"px",this.slPointer.style.top=d-7+"px")}},{key:"updatePointerA",value:function(t){if(this.options.showAlpha){var e=this.options.alphaBarSize[0]*t;this.alphaPointer.style.left=e-7+"px"}}}]),t}(),b=function(){function t(e){A(this,t),this.name=e,this.listeners=[]}return n(t,[{key:"on",value:function(t){t&&this.listeners.push(t)}},{key:"off",value:function(t){this.listeners=t?this.listeners.filter((function(e){return e!==t})):[]}},{key:"emit",value:function(t,e){for(var i=this.listeners.slice(0),n=0;n<i.length;n++)i[n].apply(e,t)}}]),t}();function C(t,e){var i=new v(t,e),n={change:new b("change"),coloradd:new b("coloradd"),colorremove:new b("colorremove")},o=!0,a={},l={get element(){return i.element},get rgb(){return[i.R,i.G,i.B]},set rgb(t){var e=s(t,3),n=e[0],o=e[1],a=e[2],l=[(0,r.limit)(n,0,255),(0,r.limit)(o,0,255),(0,r.limit)(a,0,255)];n=l[0],o=l[1],a=l[2],i.onValueChanged(p,[n,o,a,1])},get hsl(){return[i.H,i.S,i.L]},set hsl(t){var e=s(t,3),n=e[0],o=e[1],a=e[2],l=[(0,r.limit)(n,0,360),(0,r.limit)(o,0,100),(0,r.limit)(a,0,100)];n=l[0],o=l[1],a=l[2],i.onValueChanged(f,[n,o,a,1])},get rgbhex(){return this.all.hex},get rgba(){return[i.R,i.G,i.B,i.A]},set rgba(t){var e=s(t,4),n=e[0],o=e[1],a=e[2],l=e[3],A=[(0,r.limit)(n,0,255),(0,r.limit)(o,0,255),(0,r.limit)(a,0,255),(0,r.limit)(l,0,1)];n=A[0],o=A[1],a=A[2],l=A[3],i.onValueChanged(p,[n,o,a,l])},get hsla(){return[i.H,i.S,i.L,i.A]},set hsla(t){var e=s(t,4),n=e[0],o=e[1],a=e[2],l=e[3],A=[(0,r.limit)(n,0,360),(0,r.limit)(o,0,100),(0,r.limit)(a,0,100),(0,r.limit)(l,0,1)];n=A[0],o=A[1],a=A[2],l=A[3],i.onValueChanged(f,[n,o,a,l])},get color(){return this.all.toString()},set color(t){i.onValueChanged(g,t)},setColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.onValueChanged(g,t,{silent:e})},get all(){if(o){var t=[i.R,i.G,i.B,i.A],e=i.A<1?"rgba("+i.R+","+i.G+","+i.B+","+i.A+")":r.rgbToHex.apply(void 0,t);(a=(0,r.parseColor)(t,a)).toString=function(){return e},o=!1}return Object.assign({},a)},get onchange(){return n.change&&n.change.listeners[0]},set onchange(t){this.off("change").on("change",t)},get oncoloradd(){return n.coloradd&&n.coloradd.listeners[0]},set oncoloradd(t){this.off("coloradd").on("coloradd",t)},get oncolorremove(){return n.colorremove&&n.colorremove.listeners[0]},set oncolorremove(t){this.off("colorremove").on("colorremove",t)},get palette(){return Object.keys(i.palette).filter((function(t){return i.palette[t]}))},set palette(t){i.updatePalette(t)},show:function(){i.element.classList.remove("hidden")},hide:function(){i.element.classList.add("hidden")},toggle:function(){i.element.classList.toggle("hidden")},on:function(t,e){return t&&n[t]&&n[t].on(e),this},off:function(t,e){return t&&n[t]&&n[t].off(e),this},destroy:function(){n.change.off(),n.coloradd.off(),n.colorremove.off(),i.element.remove(),n=null,i=null}};return i.onchange=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];o=!0,n.change.emit([l].concat(e),l)},i.oncoloradd=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.coloradd.emit([l].concat(e),l)},i.oncolorremove=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.colorremove.emit([l].concat(e),l)},i.element.ctrl=l,l}if("undefined"!=typeof window&&!document.querySelector('head>style[data-source="a-color-picker"]')){var x=i(5).toString(),B=document.createElement("style");B.setAttribute("type","text/css"),B.setAttribute("data-source","a-color-picker"),B.innerHTML=x,document.querySelector("head").appendChild(B)}e.createPicker=C,e.from=function(t,e){var i=function(t){return t?Array.isArray(t)?t:t instanceof HTMLElement?[t]:t instanceof NodeList?[].concat(c(t)):"string"==typeof t?[].concat(c(document.querySelectorAll(t))):t.jquery?t.get():[]:[]}(t).map((function(t,i){var n=C(t,e);return n.index=i,n}));return i.on=function(t,e){return i.forEach((function(i){return i.on(t,e)})),this},i.off=function(t){return i.forEach((function(e){return e.off(t)})),this},i},e.parseColorToRgb=r.parseColorToRgb,e.parseColorToRgba=r.parseColorToRgba,e.parseColorToHsl=r.parseColorToHsl,e.parseColorToHsla=r.parseColorToHsla,e.parseColor=r.parseColor,e.rgbToHex=r.rgbToHex,e.hslToRgb=r.hslToRgb,e.rgbToHsl=r.rgbToHsl,e.rgbToHsv=r.rgbToHsv,e.rgbToInt=r.rgbToInt,e.intToRgb=r.intToRgb,e.getLuminance=r.getLuminance,e.COLOR_NAMES=r.COLOR_NAMES,e.PALETTE_MATERIAL_500=r.PALETTE_MATERIAL_500,e.PALETTE_MATERIAL_CHROME=r.PALETTE_MATERIAL_CHROME,e.VERSION="1.2.1"},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.nvl=e.ensureArray=e.limit=e.getLuminance=e.parseColor=e.parseColorToHsla=e.parseColorToHsl=e.cssHslaToHsla=e.cssHslToHsl=e.parseColorToRgba=e.parseColorToRgb=e.cssRgbaToRgba=e.cssRgbToRgb=e.cssColorToRgba=e.cssColorToRgb=e.intToRgb=e.rgbToInt=e.rgbToHsv=e.rgbToHsl=e.hslToRgb=e.rgbToHex=e.PALETTE_MATERIAL_CHROME=e.PALETTE_MATERIAL_500=e.COLOR_NAMES=void 0;var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(t){return t&&t.__esModule?t:{default:t}}(i(0));function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var o={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4","indianred ":"#CD5C5C","indigo ":"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function a(t,e,i){return t=+t,isNaN(t)||t<e?e:t>i?i:t}function l(t,e){return null==t?e:t}function A(t,e,i){var n=[a(t,0,255),a(e,0,255),a(i,0,255)];return"#"+("000000"+((t=n[0])<<16|(e=n[1])<<8|(i=n[2])).toString(16)).slice(-6)}function c(t,e,i){var n=void 0,s=void 0,r=void 0,o=[a(t,0,360)/360,a(e,0,100)/100,a(i,0,100)/100];if(t=o[0],i=o[2],0==(e=o[1]))n=s=r=i;else{var l=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},A=i<.5?i*(1+e):i+e-i*e,c=2*i-A;n=l(c,A,t+1/3),s=l(c,A,t),r=l(c,A,t-1/3)}return[255*n,255*s,255*r].map(Math.round)}function h(t,e,i){var n=[a(t,0,255)/255,a(e,0,255)/255,a(i,0,255)/255];t=n[0],e=n[1],i=n[2];var s=Math.max(t,e,i),r=Math.min(t,e,i),o=void 0,l=void 0,A=(s+r)/2;if(s==r)o=l=0;else{var c=s-r;switch(l=A>.5?c/(2-s-r):c/(s+r),s){case t:o=(e-i)/c+(e<i?6:0);break;case e:o=(i-t)/c+2;break;case i:o=(t-e)/c+4}o/=6}return[360*o,100*l,100*A].map(Math.round)}function u(t,e,i){return t<<16|e<<8|i}function d(t){if(t){var e=o[t.toString().toLowerCase()],i=/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F]))|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})))\s*$/i.exec(e||t)||[],s=n(i,10),r=s[3],a=s[4],l=s[5],A=s[7],c=s[8],h=s[9];if(void 0!==r)return[parseInt(r+r,16),parseInt(a+a,16),parseInt(l+l,16)];if(void 0!==A)return[parseInt(A,16),parseInt(c,16),parseInt(h,16)]}}function g(t){if(t){var e=o[t.toString().toLowerCase()],i=/^\s*#?((([0-9A-F])([0-9A-F])([0-9A-F])([0-9A-F])?)|(([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?))\s*$/i.exec(e||t)||[],s=n(i,12),r=s[3],a=s[4],l=s[5],A=s[6],c=s[8],h=s[9],u=s[10],d=s[11];if(void 0!==r)return[parseInt(r+r,16),parseInt(a+a,16),parseInt(l+l,16),A?+(parseInt(A+A,16)/255).toFixed(2):1];if(void 0!==c)return[parseInt(c,16),parseInt(h,16),parseInt(u,16),d?+(parseInt(d,16)/255).toFixed(2):1]}}function p(t){if(t){var e=/^rgb\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(t)||[],i=n(e,4),s=i[0],r=i[1],o=i[2],l=i[3];return s?[a(r,0,255),a(o,0,255),a(l,0,255)]:void 0}}function f(t){if(t){var e=/^rgba?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(t)||[],i=n(e,6),s=i[0],r=i[1],o=i[2],A=i[3],c=i[5];return s?[a(r,0,255),a(o,0,255),a(A,0,255),a(l(c,1),0,1)]:void 0}}function m(t){if(Array.isArray(t))return[a(t[0],0,255),a(t[1],0,255),a(t[2],0,255),a(l(t[3],1),0,1)];var e=g(t)||f(t);return e&&3===e.length&&e.push(1),e}function _(t){if(t){var e=/^hsl\((\d+)[\s,](\d+)[\s,](\d+)\)/i.exec(t)||[],i=n(e,4),s=i[0],r=i[1],o=i[2],l=i[3];return s?[a(r,0,360),a(o,0,100),a(l,0,100)]:void 0}}function y(t){if(t){var e=/^hsla?\((\d+)\s*[\s,]\s*(\d+)\s*[\s,]\s*(\d+)(\s*[\s,]\s*(\d*(.\d+)?))?\)/i.exec(t)||[],i=n(e,6),s=i[0],r=i[1],o=i[2],A=i[3],c=i[5];return s?[a(r,0,255),a(o,0,255),a(A,0,255),a(l(c,1),0,1)]:void 0}}function w(t){if(Array.isArray(t))return[a(t[0],0,360),a(t[1],0,100),a(t[2],0,100),a(l(t[3],1),0,1)];var e=y(t);return e&&3===e.length&&e.push(1),e}function v(t,e){switch(e){case"rgb":default:return t.slice(0,3);case"rgbcss":return"rgb("+t[0]+", "+t[1]+", "+t[2]+")";case"rgbcss4":return"rgb("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";case"rgba":return t;case"rgbacss":return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")";case"hsl":return h.apply(void 0,r(t));case"hslcss":return"hsl("+(t=h.apply(void 0,r(t)))[0]+", "+t[1]+", "+t[2]+")";case"hslcss4":var i=h.apply(void 0,r(t));return"hsl("+i[0]+", "+i[1]+", "+i[2]+", "+t[3]+")";case"hsla":return[].concat(r(h.apply(void 0,r(t))),[t[3]]);case"hslacss":var n=h.apply(void 0,r(t));return"hsla("+n[0]+", "+n[1]+", "+n[2]+", "+t[3]+")";case"hex":return A.apply(void 0,r(t));case"hexcss4":return A.apply(void 0,r(t))+("00"+parseInt(255*t[3]).toString(16)).slice(-2);case"int":return u.apply(void 0,r(t))}}e.COLOR_NAMES=o,e.PALETTE_MATERIAL_500=["#F44336","#E91E63","#E91E63","#9C27B0","#9C27B0","#673AB7","#673AB7","#3F51B5","#3F51B5","#2196F3","#2196F3","#03A9F4","#03A9F4","#00BCD4","#00BCD4","#009688","#009688","#4CAF50","#4CAF50","#8BC34A","#8BC34A","#CDDC39","#CDDC39","#FFEB3B","#FFEB3B","#FFC107","#FFC107","#FF9800","#FF9800","#FF5722","#FF5722","#795548","#795548","#9E9E9E","#9E9E9E","#607D8B","#607D8B"],e.PALETTE_MATERIAL_CHROME=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],e.rgbToHex=A,e.hslToRgb=c,e.rgbToHsl=h,e.rgbToHsv=function(t,e,i){var n=[a(t,0,255)/255,a(e,0,255)/255,a(i,0,255)/255];t=n[0],e=n[1],i=n[2];var s,r=Math.max(t,e,i),o=Math.min(t,e,i),l=void 0,A=r,c=r-o;if(s=0===r?0:c/r,r==o)l=0;else{switch(r){case t:l=(e-i)/c+(e<i?6:0);break;case e:l=(i-t)/c+2;break;case i:l=(t-e)/c+4}l/=6}return[l,s,A]},e.rgbToInt=u,e.intToRgb=function(t){return[t>>16&255,t>>8&255,255&t]},e.cssColorToRgb=d,e.cssColorToRgba=g,e.cssRgbToRgb=p,e.cssRgbaToRgba=f,e.parseColorToRgb=function(t){return Array.isArray(t)?t=[a(t[0],0,255),a(t[1],0,255),a(t[2],0,255)]:d(t)||p(t)},e.parseColorToRgba=m,e.cssHslToHsl=_,e.cssHslaToHsla=y,e.parseColorToHsl=function(t){return Array.isArray(t)?t=[a(t[0],0,360),a(t[1],0,100),a(t[2],0,100)]:_(t)},e.parseColorToHsla=w,e.parseColor=function(t,e){if(e=e||"rgb",null!=t){var i=void 0;if((i=m(t))||(i=w(t))&&(i=[].concat(r(c.apply(void 0,r(i))),[i[3]])))return(0,s.default)(e)?["rgb","rgbcss","rgbcss4","rgba","rgbacss","hsl","hslcss","hslcss4","hsla","hslacss","hex","hexcss4","int"].reduce((function(t,e){return t[e]=v(i,e),t}),e||{}):v(i,e.toString().toLowerCase())}},e.getLuminance=function(t,e,i){return.2126*(t=(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e=(e/=255)<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*((i/=255)<.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},e.limit=a,e.ensureArray=function(t){return t?Array.from(t):[]},e.nvl=l},function(t,e,i){t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,e){t.exports='<div class="a-color-picker-row a-color-picker-stack a-color-picker-row-top"> <canvas class="a-color-picker-sl a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> <div class=a-color-picker-row> <div class="a-color-picker-stack a-color-picker-transparent a-color-picker-circle"> <div class=a-color-picker-preview> <input class=a-color-picker-clipbaord type=text> </div> </div> <div class=a-color-picker-column> <div class="a-color-picker-cell a-color-picker-stack"> <canvas class=a-color-picker-h></canvas> <div class=a-color-picker-dot></div> </div> <div class="a-color-picker-cell a-color-picker-alpha a-color-picker-stack" show-on-alpha> <canvas class="a-color-picker-a a-color-picker-transparent"></canvas> <div class=a-color-picker-dot></div> </div> </div> </div> <div class="a-color-picker-row a-color-picker-hsl" show-on-hsl> <label>H</label> <input nameref=H type=number maxlength=3 min=0 max=360 value=0> <label>S</label> <input nameref=S type=number maxlength=3 min=0 max=100 value=0> <label>L</label> <input nameref=L type=number maxlength=3 min=0 max=100 value=0> </div> <div class="a-color-picker-row a-color-picker-rgb" show-on-rgb> <label>R</label> <input nameref=R type=number maxlength=3 min=0 max=255 value=0> <label>G</label> <input nameref=G type=number maxlength=3 min=0 max=255 value=0> <label>B</label> <input nameref=B type=number maxlength=3 min=0 max=255 value=0> </div> <div class="a-color-picker-row a-color-picker-rgbhex a-color-picker-single-input" show-on-single-input> <label>HEX</label> <input nameref=RGBHEX type=text select-on-focus> </div> <div class="a-color-picker-row a-color-picker-palette"></div>'},function(t,e,i){var n=i(6);t.exports="string"==typeof n?n:n.toString()},function(t,e,i){(t.exports=i(7)(!1)).push([t.i,"/*!\n * a-color-picker\n * https://github.com/narsenico/a-color-picker\n *\n * Copyright (c) 2017-2018, Gianfranco Caldi.\n * Released under the MIT License.\n */.a-color-picker{background-color:#fff;padding:0;display:inline-flex;flex-direction:column;user-select:none;width:232px;font:400 10px Helvetica,Arial,sans-serif;border-radius:3px;box-shadow:0 0 0 1px rgba(0,0,0,.05),0 2px 4px rgba(0,0,0,.25)}.a-color-picker,.a-color-picker-row,.a-color-picker input{box-sizing:border-box}.a-color-picker-row{padding:15px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;user-select:none}.a-color-picker-row-top{padding:0}.a-color-picker-row:not(:first-child){border-top:1px solid #f5f5f5}.a-color-picker-column{display:flex;flex-direction:column}.a-color-picker-cell{flex:1 1 auto;margin-bottom:4px}.a-color-picker-cell:last-child{margin-bottom:0}.a-color-picker-stack{position:relative}.a-color-picker-dot{position:absolute;width:14px;height:14px;top:0;left:0;background:#fff;pointer-events:none;border-radius:50px;z-index:1000;box-shadow:0 1px 2px rgba(0,0,0,.75)}.a-color-picker-a,.a-color-picker-h,.a-color-picker-sl{cursor:cell}.a-color-picker-a+.a-color-picker-dot,.a-color-picker-h+.a-color-picker-dot{top:-2px}.a-color-picker-a,.a-color-picker-h{border-radius:2px}.a-color-picker-preview{box-sizing:border-box;width:30px;height:30px;user-select:none;border-radius:15px}.a-color-picker-circle{border-radius:50px;border:1px solid #eee}.a-color-picker-hsl,.a-color-picker-rgb,.a-color-picker-single-input{justify-content:space-evenly}.a-color-picker-hsl>label,.a-color-picker-rgb>label,.a-color-picker-single-input>label{padding:0 8px;flex:0 0 auto;color:#969696}.a-color-picker-hsl>input,.a-color-picker-rgb>input,.a-color-picker-single-input>input{text-align:center;padding:2px 0;width:0;flex:1 1 auto;border:1px solid #e0e0e0;line-height:20px}.a-color-picker-hsl>input::-webkit-inner-spin-button,.a-color-picker-rgb>input::-webkit-inner-spin-button,.a-color-picker-single-input>input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.a-color-picker-hsl>input:focus,.a-color-picker-rgb>input:focus,.a-color-picker-single-input>input:focus{border-color:#04a9f4;outline:none}.a-color-picker-transparent{background-image:linear-gradient(-45deg,#cdcdcd 25%,transparent 0),linear-gradient(45deg,#cdcdcd 25%,transparent 0),linear-gradient(-45deg,transparent 75%,#cdcdcd 0),linear-gradient(45deg,transparent 75%,#cdcdcd 0);background-size:11px 11px;background-position:0 0,0 -5.5px,-5.5px 5.5px,5.5px 0}.a-color-picker-sl{border-radius:3px 3px 0 0}.a-color-picker.hide-alpha [show-on-alpha],.a-color-picker.hide-hsl [show-on-hsl],.a-color-picker.hide-rgb [show-on-rgb],.a-color-picker.hide-single-input [show-on-single-input]{display:none}.a-color-picker-clipbaord{width:100%;height:100%;opacity:0;cursor:pointer}.a-color-picker-palette{flex-flow:wrap;flex-direction:row;justify-content:flex-start;padding:10px}.a-color-picker-palette-color{width:15px;height:15px;flex:0 1 15px;margin:3px;box-sizing:border-box;cursor:pointer;border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.1)}.a-color-picker-palette-add{text-align:center;line-height:13px;color:#607d8b}.a-color-picker.hidden{display:none}",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),r=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[i].concat(r).concat([s]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(n[r]=!0)}for(s=0;s<t.length;s++){var o=t[s];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}}])}(mm)),mm.exports);const ym="event-manager.js";class wm extends ig{static async initAsync(t={}){return rg.logDebug(ym,"initAsync","Initialization started"),new Promise((t=>{t({filename:ym,result:!0})}))}static setMap(t){}static getName(){return ym}static on(t,e,i){}static off(t,e){}static dispatchEvent(t,e,i={}){const n=new Event(e,i);return t.forEach((t=>{t.dispatchEvent(n)})),n}static dispatchCustomEvent(t,e,i={}){const n=new CustomEvent(e,i);return t.forEach((t=>{t.dispatchEvent(n)})),n}}const vm="color-picker-manager.js";class bm extends ig{static#x;static#B;static async initAsync(t={}){return rg.logDebug(vm,"initAsync","Initialization started"),this.#x=this.#E(),this.#B=_m.createPicker(this.#x),new Promise((t=>{t({filename:vm,result:!0})}))}static setMap(t){}static getName(){return vm}static#E(){const t=Jg.getConfig().aColorPicker.palette;return rg.logDebug(vm,"initAsync",{count:t.length,palette:t}),tp.createElement({element:"div",id:"otlb-color-picker",class:"oltb-mt-05 oltb-mb-0313",attributes:{"acp-color":"#D7E3FA","acp-show-alpha":"yes","acp-show-rgb":"no","acp-show-hsl":"no","acp-show-hex":"yes","acp-palette":t.join("|")}})}static#S(){const t="oltb-d-none",e=this.#x.querySelectorAll(".a-color-picker-row");if(Jg.getConfig().aColorPicker.showPaletteAsDefault&&e.length>=2)for(let i=0;i<=2;++i)e[i].classList.add(t);const i=tp.createElement({element:"div",class:"oltb-acp__header",listeners:{click:()=>{for(let i=0;i<=2;++i)e[i].classList.toggle(t)}}}),n=tp.createElement({element:"label",class:"oltb-acp__title",text:"Color Picker"}),s=tp.createElement({element:"label",class:"oltb-acp__icon oltb-tippy",title:"Toggle Section"});tp.appendChildren(i,[n,s]);const r=tp.createElement({element:"div",class:"oltb-acp"});return tp.appendChildren(r,[i,this.#x]),r}static#F(){return window.innerWidth<=Jg.getConfig().deviceWidth.sm||pm()}static getColorPicker(){return this.#B}static getColorPickerElement(){return this.#x}static show(t){const e=this.#S();t.setContent(e),t.setProps({placement:this.#F()?"bottom":"left"});t.popper.classList.add("tippy-color-picker");this.#x.querySelectorAll(".a-color-picker-palette-color").forEach((t=>{t.classList.add("oltb-tippy")}));const i=t.reference.getAttribute("data-oltb-color-target"),n=window.document.querySelector(i);return this.#B.setColor(t.reference.getAttribute("data-oltb-color")),this.#B.on(ep.browser.change,((e,i)=>{i=_m.parseColor(i,"hexcss4"),n.setAttribute("data-oltb-color",i),n.firstElementChild.style.backgroundColor=i,wm.dispatchEvent([t.reference],ep.custom.colorChange)})),e}}const Cm="tippy-manager.js";class xm extends ig{static#I;static#L;static#M;static#T;static async initAsync(t={}){return rg.logDebug(Cm,"initAsync","Initialization started"),this.#I=[],this.#L=this.#R(),this.#M=this.#k(),this.#T=this.#U(),window.addEventListener(ep.browser.resize,this.#D.bind(this)),window.addEventListener(ep.custom.toolbarDirectionChange,this.#D.bind(this)),window.addEventListener(ep.custom.ready,this.#O.bind(this)),window.addEventListener(ep.custom.browserStateCleared,this.#b.bind(this)),new Promise((t=>{t({filename:Cm,result:!0})}))}static setMap(t){}static getName(){return Cm}static#P(){return window.innerWidth<=Jg.getConfig().deviceWidth.sm}static#N(){return this.#P()||pm()}static#Q(){this.#I.forEach((t=>{t.destroy()})),this.#I=hm(".oltb-tool-button"),this.#L.setInstances(this.#I),this.#D()}static#O(t){this.#Q()}static#D(){this.#L.setProps({placement:this.#N()?"bottom":"right"})}static#b(){this.#L.setProps({placement:this.#P()?"bottom":"right"})}static#R(){return function(t,e){var i;void 0===e&&(e={});var n,s=t,r=[],o=[],a=e.overrides,l=[],A=!1;function c(){o=s.map((function(t){return Uf(t.props.triggerTarget||t.reference)})).reduce((function(t,e){return t.concat(e)}),[])}function h(){r=s.map((function(t){return t.reference}))}function u(t){s.forEach((function(e){t?e.enable():e.disable()}))}function d(t){return s.map((function(e){var i=e.setProps;return e.setProps=function(s){i(s),e.reference===n&&t.setProps(s)},function(){e.setProps=i}}))}function g(t,e){var i=o.indexOf(e);if(e!==n){n=e;var l=(a||[]).concat("content").reduce((function(t,e){return t[e]=s[i].props[e],t}),{});t.setProps(Object.assign({},l,{getReferenceClientRect:"function"==typeof l.getReferenceClientRect?l.getReferenceClientRect:function(){var t;return null==(t=r[i])?void 0:t.getBoundingClientRect()}}))}}u(!1),h(),c();var p={fn:function(){return{onDestroy:function(){u(!0)},onHidden:function(){n=null},onClickOutside:function(t){t.props.showOnCreate&&!A&&(A=!0,n=null)},onShow:function(t){t.props.showOnCreate&&!A&&(A=!0,g(t,r[0]))},onTrigger:function(t,e){g(t,e.currentTarget)}}}},f=hm(Nf(),Object.assign({},kf(e,["overrides"]),{plugins:[p].concat(e.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((null==(i=e.popperOptions)?void 0:i.modifiers)||[],[um])})})),m=f.show;f.show=function(t){if(m(),!n&&null==t)return g(f,r[0]);if(!n||null!=t){if("number"==typeof t)return r[t]&&g(f,r[t]);if(s.indexOf(t)>=0){var e=t.reference;return g(f,e)}return r.indexOf(t)>=0?g(f,t):void 0}},f.showNext=function(){var t=r[0];if(!n)return f.show(0);var e=r.indexOf(n);f.show(r[e+1]||t)},f.showPrevious=function(){var t=r[r.length-1];if(!n)return f.show(t);var e=r.indexOf(n),i=r[e-1]||t;f.show(i)};var _=f.setProps;return f.setProps=function(t){a=t.overrides||a,_(t)},f.setInstances=function(t){u(!0),l.forEach((function(t){return t()})),s=t,u(!1),h(),c(),l=d(f),f.setProps({triggerTarget:o})},l=d(f),f}([],{placement:"right",appendTo:lp.getMapElement(),offset:[0,12],theme:"oltb",touch:!1})}static#k(){const t=lp.getMapElement();return gm(t,{target:".oltb-tippy",placement:"top",appendTo:t,theme:"oltb oltb-themed",offset:Jg.getConfig().tippy.offset,touch:!1,onShow(t){const e=t.reference,i=e.getAttribute("title")||e.getAttribute("data-tippy-value")||"";e.setAttribute("data-tippy-value",i),e.removeAttribute("title"),t.setContent(i)},onHidden(t){const e=t.reference,i=e.getAttribute("data-tippy-value")||e.getAttribute("title")||"";e.setAttribute("title",i),e.removeAttribute("data-tippy-value"),t.setContent("")}})}static#U(){const t=lp.getMapElement();return gm(t,{target:".oltb-color-tippy",placement:"left",offset:[8,8],trigger:"click",appendTo:t,theme:"oltb oltb-inverted-themed",interactive:!0,allowHTML:!0,onShow(t){bm.show(t)},onHide(t){bm.getColorPicker().off(ep.browser.change)},onHidden(t){t.setContent(null)}})}static applyLanguage(){this.#Q()}static getToolButtonTippy(){return this.#L}static getDynamicTippy(){return this.#M}static getColorTippy(){return this.#T}}const Bm=Object.freeze({meta:{text:"English",value:"en-us",info:"This is the default translation instance and not the loaded en-us.json file"},commons:{titles:{edit:"Edit",delete:"Delete",dragToSort:"Drag To Sort",download:"Download",copyText:"Copy Text",copyCoordinates:"Copy Coordinates",showLayer:"Show Layer",rename:"Rename",toggleSection:"Toggle Section",toggleVisibility:"Toggle Visibility",zoomToCoordinates:"Zoom To Coordinates"},types:{convertable:{drawing:"Drawing",measurement:"Measurement"}}},managers:{settingsManager:{settings:{mouseWheelZoom:"Zoom Map Using Mousewheel Only",altShiftDragRotate:"Rotate Map Using Shift + Alt + Drag",dragPan:"Drag Map Using Mouse Only",keyboardZoom:"Zoom Map Using Keyboard",keyboardPan:"Pan Map Using Keyboard",selectVectorMapShapes:"Select Shapes In Vector Map Layers",snapInteraction:"Use Snap Interaction",snapHelpLines:"Use Snap Help Lines",alwaysNewLayers:"Create New Layer When Selecting Tool"}},errorManager:{toasts:{errors:{uncaughtException:{title:"Error",message:"An unexpected error occurred"}}}},infoWindowManager:{toasts:{infos:{copyMarkerCoordinates:{title:"Copied",message:"Marker coordinates copied to clipboard"},copyMarkerInfo:{title:"Copied",message:"Marker info copied to clipboard"}},errors:{copyMarkerInfo:{title:"Error",message:"Failed to copy Marker info"},copyMarkerCoordinates:{title:"Error",message:"Failed to copy Marker coordinates"}}},dialogs:{confirms:{deleteMarker:{title:"Delete Marker",message:"Do you want to delete this Marker?",confirmText:"Delete",cancelText:"Cancel"}}}}},modalExtensions:{coordinateModal:{title:"Coordinates",form:{latitude:"Latitude",longitude:"Longitude",navigateTo:"Navigate To",cancel:"Cancel",description:"Coordinates are given in WGS84/EPSG:4326"}},debugInfoModal:{title:"Debug Information",noMapFound:"No Map reference found",form:{doAction:"Do Action",defaultItem:{title:"Select Action"},miscGroup:{title:"Misc",items:{logToBrowser:"Log Map To Browser Console",generateUUID:"Generate UUID",clearStyleManager:"Clear Style Manager"}},eventLogGroup:{title:"Event Log",items:{copyEventLog:"Copy Event Log",clearEventLog:"Clear Event Log"}}},sections:{appData:"App Data",mapData:"Map Data",browserData:"Browser Data",localStorage:"Local Storage",sessionStorage:"Session Storage",cookies:"Cookies",eventLog:"Eventlog"},toasts:{infos:{logMapObject:{title:"Logged",message:"Map object logged to console"},copyEventLog:{title:"Copied",message:"Event log copied to clipboard"},clearEventLog:{title:"Cleared",message:"Event log was cleared of all entries"},clearStyleManager:{title:"Cleared",message:"Style Manager was cleared of all entries"}},errors:{copyEventLog:{title:"Error",message:"Failed to copy Event log to clipboard"}}}},downloadLayerModal:{title:"Download Layer",form:{layerFormat:"Layer format",download:"Download Layer",cancel:"Cancel"}},geometryDataModal:{title:"Geometry Data",data:{id:"Id",measurement:"Measurement",oltbProperties:"OLTB Properties",vertices:"Vertices",coordinates:"Coordinates"}},iconMarkerModal:{title:"Marker Configuration",form:{title:"Title",description:"Description",latitude:"Latitude",longitude:"Longitude",markerFill:"Marker Fill",markerStroke:"Marker Stroke",icon:"Icon",iconFill:"Icon Fill",iconStroke:"Icon Stroke",label:"Label",labelFill:"Label Fill",labelStroke:"Label Stroke",labelStrokeWidth:"Label Stroke Width",saveChanges:"Save Changes",createMarker:"Create Marker",cancel:"Cancel"}},importLayerModal:{title:"Import Layer",form:{featureProjection:"Feature Projection",dataProjection:"Data Projection",import:"Import Layer",cancel:"Cancel"}},layerModal:{title:"Create Map Layer",form:{name:"Name",layer:"Layer",source:"Source",projection:"Projection",url:"URL",parameters:"Parameters (JSON)",wrapX:"WrapX",cors:"CORS",attributions:"Attributions",createLayer:"Create Layer",cancel:"Cancel"}},settingsModal:{title:"Settings",form:{save:"Save Settings",cancel:"Cancel"}}},tools:{hiddenAboutTool:{contextItems:{about:"About OLTB"},modals:{about:{title:"About OLTB",version:"Version",developedBy:"Developed by Qulle",usingOpenLayers:"Using OpenLayers"}}},hiddenMapNavigationTool:{contextItems:{copyCoordinates:"Copy Coordinates",navigateToCoordinates:"Navigate To",centerMap:"Center Here",focusMap:"Focus Here"},toasts:{infos:{coordinatesCopied:{title:"Copied",message:"Coordinates copied to clipboard"}},errors:{coordinatesCopy:{title:"Error",message:"Failed to copy coordinates"},parseUrlMarker:{title:"Error",message:"Failed to parse URL Marker"},missingProjection:{title:"Error",message:"Missing projection definition"}}}},hiddenMarkerTool:{contextItems:{createMarker:"Create Marker"}},bookmarkTool:{title:"Bookmarks",toolbox:{titles:{bookmarks:"Bookmarks"},groups:{addBookmark:{placeholder:"Name",add:"Add Bookmark"}}},contextItems:{addBookmark:"Add Bookmark",clearBookmarks:"Clear Bookmarks"},layers:{bookmarks:"Bookmarks"},toasts:{infos:{clearBookmarks:{title:"Cleared",message:"All stored bookmarks was cleared"},createBookmark:{title:"New Bookmark",message:"A new Bookmark created"},copyCoordinates:{title:"Copied",message:"Coordinates copied to clipboard"}},errors:{copyCoordinates:{title:"Error",message:"Failed to copy coordinates"}}},dialogs:{confirms:{clearBookmarks:{title:"Clear Bookmarks",message:"Do you want to clear all Bookmarks?",confirmText:"Clear",cancelText:"Cancel"},deleteBookmark:{title:"Delete Bookmark",message:"Do you want to delete bookmark",confirmText:"Delete",cancelText:"Cancel"}},prompts:{editBookmark:{title:"Edit Name",message:"You are editing bookmark",confirmText:"Rename",cancelText:"Cancel"}}}},coordinatesTool:{title:"Show Coordinates",toolbox:{titles:{coordinates:"Coordinates"},groups:{formats:{title:"Format",dd:"Decimal Degrees",dms:"Degrees, Minutes, Seconds"},coordinates:{title:"Coordinates"}}},settings:{copyOnClick:"Copy Coordinates On Click",updateToolboxOnHover:"Update Toolbox Coordinates When Hover"},toasts:{infos:{copyCoordinates:{title:"Copied",message:"Coordinates copied to clipboard"}},errors:{copyCoordinates:{title:"Error",message:"Failed to copy coordinates"}}}},debugInfoTool:{title:"Debug Info"},directionTool:{title:"Toggle Direction"},drawTool:{title:"Draw",toolbox:{titles:{draw:"Draw"},groups:{shapes:{title:"Shape",circle:"Circle",square:"Square",rectangle:"Rectangle",lineString:"Line",point:"Point",polygon:"Polygon"},intersectable:{title:"Intersection",true:"Yes",false:"No"},strokeWidth:{title:"Stroke Width"},strokeColor:{title:"Stroke Color"},fillColor:{title:"Fill Color"}}},layers:{defaultName:"Drawing layer"},toasts:{infos:{drawInHiddenLayer:{title:"Tip",message:"You are drawing in a hidden layer"},missingIntersections:{title:"Oops",message:"No intersecting object found"}}}},editTool:{title:"Edit",toolbox:{titles:{edit:"Edit"},groups:{misc:{title:"Misc",delete:"Delete",rotate:"Rotate",geometryData:"Geometry Data",convertFeature:"Convert"},copying:{title:"Clipboard",cut:"Cut",copy:"Copy",paste:"Paste"},shapes:{title:"Shapes",union:"Union",intersect:"Intersect",exclude:"Exclude",difference:"Difference"},strokeColor:{title:"Stroke Color"},fillColor:{title:"Fill Color"}}},settings:{mouseOnlyToEditVectorShapes:"Mouse Only To Edit Vector Shapes"},toasts:{infos:{copiedFeatures:{title:"Copied",message:"objects has been copied"},pastedFeatures:{title:"Pasted",message:"objects has been pasted"},cutFeatures:{title:"Cut",message:"objects has been cut"},missingFeatures:{title:"Oops",message:"No objects are selected"},strictOneFeature:{title:"Oops",message:"Strict one object can be selected"},strictTwoFeatures:{title:"Oops",message:"Strict two overlapping objects must be selected"}},errors:{operationFailed:{title:"Error",message:"Failed to perform shape operation"},invalidValue:{title:"Error",message:"Only digits are allowed as input"}}},dialogs:{confirms:{deleteFeatures:{title:"Delete",message:"Delete selected objects",confirmText:"Delete",cancelText:"Cancel"}},prompts:{rotateFeatures:{title:"Rotate",message:"Rotate objects by N-degrees",confirmText:"Rotate",cancelText:"Cancel"},convertFeatures:{title:"Convert",message:"Convert selected objects to",confirmText:"Convert",cancelText:"Cancel"}}}},exportPngTool:{title:"Export PNG",toasts:{errors:{renderCanvas:{title:"Error",message:"Failed to export Canvas"}}}},fullscreenTool:{title:"Toggle Fullscreen",toasts:{errors:{missingFullScreenSupport:{title:"Error",message:"Fullscreen is not supported by this browser"}}}},graticuleTool:{title:"Show Graticule"},helpTool:{title:"Help",dialogs:{confirms:{openHelp:{title:"Help Pages",message:"Browsers block automatic opening new windows, here is a button for you to press",confirmText:"Open Help",cancelText:"Cancel"}}},toasts:{errors:{blockedByBrowser:{title:"Error",message:"Action was restricted by browser settings"}}}},homeTool:{title:"Zoom Home",contextItems:{setHome:"Set Home"},toasts:{infos:{setHomeLocation:{title:"New Home",message:"New location was set as Home"}}}},importVectorLayerTool:{title:"Import Vector Layer",toasts:{errors:{unsupportedFormat:{title:"Error",message:"The layer format is not supported"},importFailed:{title:"Error",message:"Failed to import vector layer"}}}},infoTool:{title:"Info"},layerTool:{title:"Layers",toolbox:{titles:{mapLayers:"Map Layers",featureLayers:"Feature Layers"},groups:{createMapLayer:{placeholder:"Name",create:"Create Map Layer"},createFeatureLayer:{placeholder:"Name",create:"Create Feature Layer"}}},contextItems:{addMapLayer:"Add Map Layer",addFeatureLayer:"Add Feature Layer"},toasts:{infos:{addFeatureLayer:{title:"New Layer",message:"A new Feature layer created"}},errors:{addFeatureLayer:{title:"Error",message:"Failed to create new layer"},missingProjection:{title:"Error",message:"Missing projection definition"},unsupportedFormat:{title:"Error",message:"The layer format is not supported"}}},dialogs:{prompts:{renameLayer:{title:"Edit Name",message:"Edit name for layer",confirmText:"Rename",cancelText:"Cancel"}},confirms:{deleteLayer:{title:"Delete Layer",message:"Do you want to delete layer",confirmText:"Delete",cancelText:"Cancel"}}}},magnifyTool:{title:"Magnify",toasts:{errors:{renderCanvas:{title:"Error",message:"Unexpected error using magnifier"}}}},measureTool:{title:"Measure",toolbox:{titles:{measure:"Measure"},groups:{type:{title:"Type",lineString:"Length",polygon:"Area"},strokeColor:{title:"Stroke Color"},fillColor:{title:"Fill Color"}}},layers:{defaultName:"Measurements layer"},toasts:{infos:{drawInHiddenLayer:{title:"Tip",message:"You are measuring in a hidden layer"}}}},myLocationTool:{title:"My Location",dialogs:{confirms:{exitFullscreen:{title:"Exit Fullscreen",message:"To use geolocation you must exit fullscreen",confirmText:"Exit Fullscreen",cancelText:"Cancel"}}},toasts:{infos:{fetchLocation:{title:"Searching",message:"Trying to find your location..."}},errors:{exitFullscreen:{title:"Error",message:"Failed to exit fullscreen"},locationNotFound:{title:"Error",message:"Failed to find location"}}}},overviewTool:{title:"Map Overview",toolbox:{titles:{overview:"Map Overview"}}},refreshTool:{title:"Refresh Page"},resetNorthTool:{title:"Reset North",contextItems:{rotate:"Rotate Map"},dialogs:{prompts:{rotateMap:{title:"Rotate Map",message:"Set Map rotation by degrees",confirmText:"Rotate Map",cancelText:"Cancel"}}},toasts:{errors:{invalidValue:{title:"Error",message:"Only digits are allowed as input"}}}},scaleLineTool:{title:"Scale Line"},scissorsTool:{title:"Polygon Scissors",toasts:{infos:{missingIntersections:{title:"Oops",message:"No intersecting object found"}}}},settingsTool:{title:"Settings",contextItems:{clearBrowserState:"Clear Browser State"},toasts:{infos:{clearBrowserState:{title:"Cleared",message:"All stored items was reset to default"}},successes:{savedSettings:{title:"Saved",message:"All settings saved in browser storage"}}},dialogs:{confirms:{clearBrowserState:{title:"Clear Browser State",message:"Do you want to reset all items to default state for the Toolbar?",confirmText:"Clear",cancelText:"Cancel"}}}},splitViewTool:{title:"Split View",toolbox:{titles:{splitView:"Split View"},groups:{leftSide:{title:"Left Side"},rightSide:{title:"Right Side"},swapSides:{swap:"Swap Sides"}},toasts:{infos:{strictOneLayer:{title:"Tip",message:"You must have more than one layer"}},errors:{layerFailedToLoad:{title:"Error",message:"Layer(s) could not be loaded"}}}}},themeTool:{title:"Toggle Theme"},toolboxTool:{title:"Toggle Toolbox"},translationTool:{title:"Translate",dialogs:{selects:{changeLanguage:{title:"Language",message:"Current language is",confirmText:"Switch Language",cancelText:"Cancel"}}}},zoomboxTool:{title:"Zoombox",tooltips:{dragToZoom:"Drag To Zoom"}},zoomInTool:{title:"Zoom In"},zoomOutTool:{title:"Zoom Out"}}}),Em="translation-manager.js",Sm=Object.freeze({url:"./assets/i18n"}),Fm=Object.freeze({text:"English",value:"en-us",translation:Bm}),Im=rp.translationManager,Lm=Object.freeze({activeLanguageValue:Fm.value});class Mm extends ig{static#H;static#G;static#V;static#r;static async initAsync(t={}){this.#r=Fh.merge(Fh.cloneDeep(Sm),t),rg.logDebug(Em,"initAsync","Initialization started"),this.#V=sp.getAndMergeStateObject(Im,Lm),this.#G=[];const e=this.#z();return this.#K(e)}static setMap(t){}static getName(){return Em}static async#j(t){const e=Date.now().toString(),i=t.map((async t=>kd.get(`${this.#r.url}/${t}.json`,{responseType:"application/json",params:{cache:e},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then((t=>JSON.parse(t.data)))));return await Promise.allSettled(i)}static async#K(t){return this.#j(t).then((t=>{t.forEach((t=>{if("rejected"===t.status)return void rg.logWarning(Em,"loadLanguagesAsync",{info:"Failed to load language(s)",reason:t.reason,status:t.status});const e=t.value.meta.text,i=t.value.meta.value;if(!e||!i)return void rg.logWarning(Em,"loadLanguagesAsync",{info:"Failed to find translation information in the meta section"});const n={text:e,value:i,translation:t.value};this.#G.push(n)})),this.#G.length<=0&&(rg.logWarning(Em,"loadLanguagesAsync",{info:"No languages loaded, fallback to default language instance",value:Fm.value}),this.#G.push(Fh.cloneDeep(Fm)));const e=this.#V.activeLanguageValue,i=this.#G.find((t=>t.value===e)),n=Jg.getConfig().localization.active,s=this.#G.find((t=>t.value===n));return this.#H=i??s??Fh.cloneDeep(Fm),Promise.resolve({filename:Em,result:!0})}))}static#z(){const t=[];return Jg.getConfig().localization.languages.forEach((e=>{t.find((t=>t===e))?rg.logWarning(Em,"getLanguageValues",{info:"Language already added to be loaded",value:e}):t.push(e)})),t}static#W(){const t="data-oltb-i18n";window.document.querySelectorAll(`[${t}]`).forEach((e=>{const i=e.getAttribute(t),n=this.get(i),s="data-tippy-content";if(e.hasAttribute(s)){const t=`${e.getAttribute("data-tippy-content-pre")||""} ${n} ${e.getAttribute("data-tippy-content-post")||""}`.trim();return void e.setAttribute(s,t)}if(e.classList.contains("oltb-tippy"))return void e.setAttribute("title",n);const r="placeholder";e.hasAttribute(r)?e.setAttribute(r,n):e.innerHTML=n})),xm.applyLanguage()}static getDefaultLanguage(){return Fh.cloneDeep(Fm)}static getLanguages(){return this.#G}static getActiveLanguage(){return this.#H||Fh.cloneDeep(Fm)}static setActiveLanguage(t){if(this.#H||(this.#H=this.getDefaultLanguage()),this.#H.value===t.value)return void rg.logWarning(Em,"setActiveLanguage",{info:"Aborting language change, selected language is already active",to:t.value,active:this.#H.value});const e=this.#G.find((e=>e.value===t.value));e&&Fh.has(e,["translation"])?(this.#H=e,this.#V.activeLanguageValue=e.value,this.#W(),sp.setStateObject(Im,this.#V)):rg.logWarning(Em,"setActiveLanguage",{info:"Selected language not found",language:t})}static get(t){const e=t.split("."),i=this.getActiveLanguage(),n=Fh.get(i.translation,e,t);return n===t&&rg.logWarning(Em,"get",{info:"No translation found",keys:e,path:t}),n}}const Tm="oltb-toast",Rm="oltb-animation",km=`${Rm}--slide-in`,Um=`${Rm}--slide-out`,Dm=`${Rm}--linear-spinner`,Om=Object.freeze({title:"Toast",prefix:"",postfix:"",message:"",i18nKey:void 0,type:"info",autoremove:!1,clickToRemove:!0,spinner:!1});class Pm{constructor(t={}){this.options=Fh.merge(Fh.cloneDeep(Om),t),this.#$()}#$(){if(this.toast=tp.createElement({element:"div",class:`${Tm} ${Tm}--${this.options.type} ${Rm} ${km} oltb-d-flex`}),this.options.clickToRemove&&(this.toast.classList.add(`${Tm}--clickable`),this.toast.addEventListener(ep.browser.click,this.remove.bind(this))),this.options.spinner){const t=tp.createElement({element:"div",class:`oltb-spinner oltb-spinner--small ${Rm} ${Dm}`});tp.appendChildren(this.toast,[t])}const t=tp.createElement({element:"div",class:`${Tm}__container ${this.options.spinner?"oltb-ml-0625":""}`});if(this.options.i18nKey){const t=Mm.get(this.options.i18nKey);this.options.title=t.title,this.options.message=t.message}const e=tp.createElement({element:"h4",text:this.options.title,class:`${Tm}__title`,...this.options.i18nKey&&{attributes:{"data-oltb-i18n":`${this.options.i18nKey}.title`}}}),i=`${this.options.prefix} ${this.options.message} ${this.options.postfix}`,n=tp.createElement({element:"p",html:i,class:`${Tm}__message`,...this.options.i18nKey&&{attributes:{"data-oltb-i18n":`${this.options.i18nKey}.message`}}});tp.appendChildren(t,[e,n]),tp.appendChildren(this.toast,[t]);if(lp.getToastElement().prepend(this.toast),this.options.autoremove){const t=Jg.getConfig().autoRemovalDuation.normal;window.setTimeout((()=>{tp.removeElement(this)}),t)}}remove(){this.toast.classList.add(`${Tm}--remove`,Um);const t=Jg.getConfig().animationDuration.fast;window.setTimeout((()=>{tp.removeElement(this.toast),this.options.onRemove&&this.options.onRemove()}),t)}getType(){return this.options.type}getTitle(){return this.options.title}getMessage(){return this.options.message}isSpinner(){return this.options.spinner}isClickableToRemove(){return this.options.clickToRemove}isAutoremove(){return this.options.autoremove}getElement(){return this.toast}getI18NKey(){return this.options.i18nKey}static get Info(){return"info"}static get Warning(){return"warning"}static get Error(){return"error"}static get Success(){return"success"}}class Nm{static info(t){return new Pm({...t,type:Pm.Info})}static warning(t){return new Pm({...t,type:Pm.Warning})}static success(t){return new Pm({...t,type:Pm.Success})}static error(t){return new Pm({...t,type:Pm.Error})}}const Qm=Object.freeze({valueCancel:"Cancel",valueHelp:"Help",valueBackSpace:"Backspace",valueTab:"Tab",valueClear:"Clear",valueEnter:"Enter",valueReturn:"Enter",valueShift:"Shift",valueControl:"Control",valueAlt:"Alt",valueOperatingSystem:"OS",valuePause:"Pause",valueCapsLock:"CapsLock",valueEscape:"Escape",valueSpace:" ",valuePageUp:"PageUp",valuePageDown:"PageDown",valueEnd:"End",valueHome:"Home",valueLeft:"ArrowLeft",valueUp:"ArrowUp",valueRight:"ArrowRight",valueDown:"ArrowDown",valuePrintScreen:"PrintScreen",valueInsert:"Insert",valueDelete:"Delete",value0:"0",value1:"1",value2:"2",value3:"3",value4:"4",value5:"5",value6:"6",value7:"7",value8:"8",value9:"9",valueA:"a",valueB:"b",valueC:"c",valueD:"d",valueE:"e",valueF:"f",valueG:"g",valueH:"h",valueI:"i",valueJ:"j",valueK:"k",valueL:"l",valueM:"m",valueN:"n",valueO:"o",valueP:"p",valueQ:"q",valueR:"r",valueS:"s",valueT:"t",valueU:"u",valueV:"v",valueW:"w",valueX:"x",valueY:"y",valueZ:"z",valueMeta:"Meta",valueLeftCmd:"Meta",valueRightCmd:"Meta",valueContextMenu:"ContextMenu",valueNumpad0:"0",valueNumpad1:"1",valueNumpad2:"2",valueNumpad3:"3",valueNumpad4:"4",valueNumpad5:"5",valueNumpad6:"6",valueNumpad7:"7",valueNumpad8:"8",valueNumpad9:"9",valueMultiply:"*",valueAdd:"+",valueSubtract:"-",valueDecimal:".",valueDivide:"/",valueF1:"F1",valueF2:"F2",valueF3:"F3",valueF4:"F4",valueF5:"F5",valueF6:"F6",valueF7:"F7",valueF8:"F8",valueF9:"F9",valueF10:"F10",valueF11:"F11",valueF12:"F12",valueF13:"F13",valueF14:"F14",valueF15:"F15",valueF16:"F16",valueF17:"F17",valueF18:"F18",valueF19:"F19",valueF20:"F20",valueF21:"F21",valueF22:"F22",valueF23:"F23",valueF24:"F24",valueNumLock:"NumLock",valueScrollLock:"ScrollLock",valueSemicolon:",",valueEquals:"=",valueComma:",",valueDash:"-",valuePeriod:".",valueSlash:"/",valueBackQuote:"`",valueOpenBracket:"[",valueBackSlash:"\\",valueCloseBracket:"]",valueQuote:"'"}),Hm=function(t){if(!(t.key===Qm.valueTab))return;const e='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])',i=this.querySelectorAll(e)[0],n=this.querySelectorAll(e),s=n[n.length-1];t.shiftKey?window.document.activeElement===i&&(s.focus(),t.preventDefault()):window.document.activeElement===s&&(i.focus(),t.preventDefault())},Gm=Object.freeze({airplane:Object.freeze({stroked:'\n            <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849Zm.894.448C7.111 2.02 7 2.569 7 3v4a.5.5 0 0 1-.276.447l-5.448 2.724a.5.5 0 0 0-.276.447v.792l5.418-.903a.5.5 0 0 1 .575.41l.5 3a.5.5 0 0 1-.14.437L6.708 15h2.586l-.647-.646a.5.5 0 0 1-.14-.436l.5-3a.5.5 0 0 1 .576-.411L15 11.41v-.792a.5.5 0 0 0-.276-.447L9.276 7.447A.5.5 0 0 1 9 7V3c0-.432-.11-.979-.322-1.401C8.458 1.159 8.213 1 8 1c-.213 0-.458.158-.678.599Z"/>\n        ',filled:'\n            <path d="M6.428 1.151C6.708.591 7.213 0 8 0s1.292.592 1.572 1.151C9.861 1.73 10 2.431 10 3v3.691l5.17 2.585a1.5 1.5 0 0 1 .83 1.342V12a.5.5 0 0 1-.582.493l-5.507-.918-.375 2.253 1.318 1.318A.5.5 0 0 1 10.5 16h-5a.5.5 0 0 1-.354-.854l1.319-1.318-.376-2.253-5.507.918A.5.5 0 0 1 0 12v-1.382a1.5 1.5 0 0 1 .83-1.342L6 6.691V3c0-.568.14-1.271.428-1.849Z"/>\n        '}),arrowClockwise:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>\n            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>      \n        '}),arrowLeftRight:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5m14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5"/>\n        '}),arrowRepeat:Object.freeze({stroked:'\n            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>  \n        '}),arrowsExpandHorizontal:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"/>\n        '}),arrowsExpandVertical:Object.freeze({stroked:'\n            <path d="M8 15a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 1 0v13a.5.5 0 0 1-.5.5ZM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2ZM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8Z"/>\n        '}),arrowsMove:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10zM.146 8.354a.5.5 0 0 1 0-.708l2-2a.5.5 0 1 1 .708.708L1.707 7.5H5.5a.5.5 0 0 1 0 1H1.707l1.147 1.146a.5.5 0 0 1-.708.708l-2-2zM10 8a.5.5 0 0 1 .5-.5h3.793l-1.147-1.146a.5.5 0 0 1 .708-.708l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L14.293 8.5H10.5A.5.5 0 0 1 10 8z"/>\n        '}),aspectRatio:Object.freeze({stroked:'\n            <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5v-9zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-13z"/>\n            <path d="M2 4.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1H3v2.5a.5.5 0 0 1-1 0v-3zm12 7a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H13V8.5a.5.5 0 0 1 1 0v3z"/>      \n        ',filled:'\n            <path d="M0 12.5v-9A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5zM2.5 4a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 1 0V5h2.5a.5.5 0 0 0 0-1h-3zm11 8a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-1 0V11h-2.5a.5.5 0 0 0 0 1h3z"/>\n        '}),bell:Object.freeze({stroked:'\n            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>\n        ',filled:'\n            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>\n        '}),bookmarkStar:Object.freeze({stroked:'\n            <path d="M7.84 4.1a.178.178 0 0 1 .32 0l.634 1.285a.178.178 0 0 0 .134.098l1.42.206c.145.021.204.2.098.303L9.42 6.993a.178.178 0 0 0-.051.158l.242 1.414a.178.178 0 0 1-.258.187l-1.27-.668a.178.178 0 0 0-.165 0l-1.27.668a.178.178 0 0 1-.257-.187l.242-1.414a.178.178 0 0 0-.05-.158l-1.03-1.001a.178.178 0 0 1 .098-.303l1.42-.206a.178.178 0 0 0 .134-.098L7.84 4.1z"/>\n            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>\n        ',filled:'\n            <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zM8.16 4.1a.178.178 0 0 0-.32 0l-.634 1.285a.178.178 0 0 1-.134.098l-1.42.206a.178.178 0 0 0-.098.303L6.58 6.993c.042.041.061.1.051.158L6.39 8.565a.178.178 0 0 0 .258.187l1.27-.668a.178.178 0 0 1 .165 0l1.27.668a.178.178 0 0 0 .257-.187L9.368 7.15a.178.178 0 0 1 .05-.158l1.028-1.001a.178.178 0 0 0-.098-.303l-1.42-.206a.178.178 0 0 1-.134-.098L8.16 4.1z"/>\n        '}),bookmarkX:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M6.146 5.146a.5.5 0 0 1 .708 0L8 6.293l1.146-1.147a.5.5 0 1 1 .708.708L8.707 7l1.147 1.146a.5.5 0 0 1-.708.708L8 7.707 6.854 8.854a.5.5 0 1 1-.708-.708L7.293 7 6.146 5.854a.5.5 0 0 1 0-.708z"/>\n            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5V2zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1H4z"/>      \n        ',filled:'\n            <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5zM6.854 5.146a.5.5 0 1 0-.708.708L7.293 7 6.146 8.146a.5.5 0 1 0 .708.708L8 7.707l1.146 1.147a.5.5 0 1 0 .708-.708L8.707 7l1.147-1.146a.5.5 0 0 0-.708-.708L8 6.293 6.854 5.146z"/>\n        '}),boundingBoxCircles:Object.freeze({stroked:'\n            <path d="M2 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM0 2a2 2 0 0 1 3.937-.5h8.126A2 2 0 1 1 14.5 3.937v8.126a2 2 0 1 1-2.437 2.437H3.937A2 2 0 1 1 1.5 12.063V3.937A2 2 0 0 1 0 2zm2.5 1.937v8.126c.703.18 1.256.734 1.437 1.437h8.126a2.004 2.004 0 0 1 1.437-1.437V3.937A2.004 2.004 0 0 1 12.063 2.5H3.937A2.004 2.004 0 0 1 2.5 3.937zM14 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM2 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>\n        '}),braces:Object.freeze({stroked:'\n            <path d="M2.114 8.063V7.9c1.005-.102 1.497-.615 1.497-1.6V4.503c0-1.094.39-1.538 1.354-1.538h.273V2h-.376C3.25 2 2.49 2.759 2.49 4.352v1.524c0 1.094-.376 1.456-1.49 1.456v1.299c1.114 0 1.49.362 1.49 1.456v1.524c0 1.593.759 2.352 2.372 2.352h.376v-.964h-.273c-.964 0-1.354-.444-1.354-1.538V9.663c0-.984-.492-1.497-1.497-1.6zM13.886 7.9v.163c-1.005.103-1.497.616-1.497 1.6v1.798c0 1.094-.39 1.538-1.354 1.538h-.273v.964h.376c1.613 0 2.372-.759 2.372-2.352v-1.524c0-1.094.376-1.456 1.49-1.456V7.332c-1.114 0-1.49-.362-1.49-1.456V4.352C13.51 2.759 12.75 2 11.138 2h-.376v.964h.273c.964 0 1.354.444 1.354 1.538V6.3c0 .984.492 1.497 1.497 1.6z"/>\n        '}),bug:Object.freeze({stroked:'\n            <path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/>\n        ',filled:'\n            <path d="M4.978.855a.5.5 0 1 0-.956.29l.41 1.352A4.985 4.985 0 0 0 3 6h10a4.985 4.985 0 0 0-1.432-3.503l.41-1.352a.5.5 0 1 0-.956-.29l-.291.956A4.978 4.978 0 0 0 8 1a4.979 4.979 0 0 0-2.731.811l-.29-.956z"/>\n            <path d="M13 6v1H8.5v8.975A5 5 0 0 0 13 11h.5a.5.5 0 0 1 .5.5v.5a.5.5 0 1 0 1 0v-.5a1.5 1.5 0 0 0-1.5-1.5H13V9h1.5a.5.5 0 0 0 0-1H13V7h.5A1.5 1.5 0 0 0 15 5.5V5a.5.5 0 0 0-1 0v.5a.5.5 0 0 1-.5.5H13zm-5.5 9.975V7H3V6h-.5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 0-1 0v.5A1.5 1.5 0 0 0 2.5 7H3v1H1.5a.5.5 0 0 0 0 1H3v1h-.5A1.5 1.5 0 0 0 1 11.5v.5a.5.5 0 1 0 1 0v-.5a.5.5 0 0 1 .5-.5H3a5 5 0 0 0 4.5 4.975z"/>\n        '}),chevronExpand:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"/>\n        '}),clipboard:Object.freeze({stroked:'\n            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>\n            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>      \n        ',filled:'\n            <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1A2.5 2.5 0 0 0 6.5 5h3A2.5 2.5 0 0 0 12 2.5v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Z"/>\n        '}),close:Object.freeze({stroked:'\n            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n        '}),compass:Object.freeze({stroked:'\n            <path d="M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016zm6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n            <path d="m6.94 7.44 4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"/>      \n        ',filled:'\n            <path d="M15.5 8.516a7.5 7.5 0 1 1-9.462-7.24A1 1 0 0 1 7 0h2a1 1 0 0 1 .962 1.276 7.503 7.503 0 0 1 5.538 7.24zm-3.61-3.905L6.94 7.439 4.11 12.39l4.95-2.828 2.828-4.95z"/>\n        '}),copy:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>\n        '}),crosshair:Object.freeze({stroked:'\n            <path d="M8.5.5a.5.5 0 0 0-1 0v.518A7.001 7.001 0 0 0 1.018 7.5H.5a.5.5 0 0 0 0 1h.518A7.001 7.001 0 0 0 7.5 14.982v.518a.5.5 0 0 0 1 0v-.518A7.001 7.001 0 0 0 14.982 8.5h.518a.5.5 0 0 0 0-1h-.518A7.001 7.001 0 0 0 8.5 1.018V.5Zm-6.48 7A6.001 6.001 0 0 1 7.5 2.02v.48a.5.5 0 0 0 1 0v-.48a6.001 6.001 0 0 1 5.48 5.48h-.48a.5.5 0 0 0 0 1h.48a6.002 6.002 0 0 1-5.48 5.48v-.48a.5.5 0 0 0-1 0v.48A6.001 6.001 0 0 1 2.02 8.5h.48a.5.5 0 0 0 0-1h-.48ZM8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"/>\n        '}),cursor:{stroked:'\n            <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103zM2.25 8.184l3.897 1.67a.5.5 0 0 1 .262.263l1.67 3.897L12.743 3.52 2.25 8.184z"/>\n        ',filled:'\n            <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>\n        '},edit:Object.freeze({stroked:'\n            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>\n        ',filled:'\n            <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"/>\n        '}),exclamationTriangle:Object.freeze({stroked:'\n            <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>\n            <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/>\n        ',filled:'\n            <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>\n        '}),exclude:Object.freeze({mixed:'\n            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm12 2H5a1 1 0 0 0-1 1v7h7a1 1 0 0 0 1-1V4z"/>\n        '}),fullscreen:Object.freeze({stroked:'\n            <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>\n        '}),fullscreenExit:Object.freeze({stroked:'\n            <path d="M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"/>\n        '}),folderOpen:Object.freeze({stroked:'\n            <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/>\n        '}),gear:Object.freeze({stroked:'\n            <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>\n            <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>\n        ',filled:'\n            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>\n        '}),geoMarker:Object.freeze({stroked:'\n            <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>\n            <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>\n        ',filled:'\n            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>\n        '}),geoPin:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>\n        ',filled:'\n            <path fill-rule="evenodd" d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>\n        '}),gitHub:Object.freeze({mixed:'\n            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>\n        '}),globe:Object.freeze({stroked:'\n            <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855-.143.268-.276.56-.395.872.705.157 1.472.257 2.282.287V1.077zM4.249 3.539c.142-.384.304-.744.481-1.078a6.7 6.7 0 0 1 .597-.933A7.01 7.01 0 0 0 3.051 3.05c.362.184.763.349 1.198.49zM3.509 7.5c.036-1.07.188-2.087.436-3.008a9.124 9.124 0 0 1-1.565-.667A6.964 6.964 0 0 0 1.018 7.5h2.49zm1.4-2.741a12.344 12.344 0 0 0-.4 2.741H7.5V5.091c-.91-.03-1.783-.145-2.591-.332zM8.5 5.09V7.5h2.99a12.342 12.342 0 0 0-.399-2.741c-.808.187-1.681.301-2.591.332zM4.51 8.5c.035.987.176 1.914.399 2.741A13.612 13.612 0 0 1 7.5 10.91V8.5H4.51zm3.99 0v2.409c.91.03 1.783.145 2.591.332.223-.827.364-1.754.4-2.741H8.5zm-3.282 3.696c.12.312.252.604.395.872.552 1.035 1.218 1.65 1.887 1.855V11.91c-.81.03-1.577.13-2.282.287zm.11 2.276a6.696 6.696 0 0 1-.598-.933 8.853 8.853 0 0 1-.481-1.079 8.38 8.38 0 0 0-1.198.49 7.01 7.01 0 0 0 2.276 1.522zm-1.383-2.964A13.36 13.36 0 0 1 3.508 8.5h-2.49a6.963 6.963 0 0 0 1.362 3.675c.47-.258.995-.482 1.565-.667zm6.728 2.964a7.009 7.009 0 0 0 2.275-1.521 8.376 8.376 0 0 0-1.197-.49 8.853 8.853 0 0 1-.481 1.078 6.688 6.688 0 0 1-.597.933zM8.5 11.909v3.014c.67-.204 1.335-.82 1.887-1.855.143-.268.276-.56.395-.872A12.63 12.63 0 0 0 8.5 11.91zm3.555-.401c.57.185 1.095.409 1.565.667A6.963 6.963 0 0 0 14.982 8.5h-2.49a13.36 13.36 0 0 1-.437 3.008zM14.982 7.5a6.963 6.963 0 0 0-1.362-3.675c-.47.258-.995.482-1.565.667.248.92.4 1.938.437 3.008h2.49zM11.27 2.461c.177.334.339.694.482 1.078a8.368 8.368 0 0 0 1.196-.49 7.01 7.01 0 0 0-2.275-1.52c.218.283.418.597.597.932zm-.488 1.343a7.765 7.765 0 0 0-.395-.872C9.835 1.897 9.17 1.282 8.5 1.077V4.09c.81-.03 1.577-.13 2.282-.287z"/>\n        '}),house:Object.freeze({stroked:'\n            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5ZM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5 5 5Z"/>\n        ',filled:'\n            <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.707 1.5Z"/>\n            <path d="M8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6Z"/>      \n        '}),image:Object.freeze({mixed:'\n            <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n            <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>\n        '}),infoCircle:Object.freeze({stroked:'\n            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>      \n        ',filled:'\n            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>\n        '}),intersect:Object.freeze({mixed:'\n            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5zm6-8V2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2V6a2 2 0 0 1 2-2h5z"/>\n        '}),layers:Object.freeze({stroked:'\n            <path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zm3.515 7.008L14.438 10 8 13.433 1.562 10 4.25 8.567l3.515 1.874a.5.5 0 0 0 .47 0l3.515-1.874zM8 9.433L1.562 6 8 2.567 14.438 6 8 9.433z"/>\n        ',filled:'\n            <path d="M7.765 1.559a.5.5 0 0 1 .47 0l7.5 4a.5.5 0 0 1 0 .882l-7.5 4a.5.5 0 0 1-.47 0l-7.5-4a.5.5 0 0 1 0-.882l7.5-4z"/>\n            <path d="m2.125 8.567-1.86.992a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882l-1.86-.992-5.17 2.756a1.5 1.5 0 0 1-1.41 0l-5.17-2.756z"/>\n        '}),layoutSidebarInset:Object.freeze({mixed:'\n            <path d="M14 2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zM2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2z"/>\n            <path d="M3 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z"/>      \n        '}),layoutSsidebarInsetReverse:Object.freeze({mixed:'\n            <path d="M2 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm12-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/>\n            <path d="M13 4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z"/>      \n        '}),lightbulb:Object.freeze({stroked:'\n            <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"/>\n        ',filled:'\n            <path d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13h-5a.5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm3 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1-.5-.5z"/>\n        '}),lightbulbOff:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M2.23 4.35A6.004 6.004 0 0 0 2 6c0 1.691.7 3.22 1.826 4.31.203.196.359.4.453.619l.762 1.769A.5.5 0 0 0 5.5 13a.5.5 0 0 0 0 1 .5.5 0 0 0 0 1l.224.447a1 1 0 0 0 .894.553h2.764a1 1 0 0 0 .894-.553L10.5 15a.5.5 0 0 0 0-1 .5.5 0 0 0 0-1 .5.5 0 0 0 .288-.091L9.878 12H5.83l-.632-1.467a2.954 2.954 0 0 0-.676-.941 4.984 4.984 0 0 1-1.455-4.405l-.837-.836zm1.588-2.653.708.707a5 5 0 0 1 7.07 7.07l.707.707a6 6 0 0 0-8.484-8.484zm-2.172-.051a.5.5 0 0 1 .708 0l12 12a.5.5 0 0 1-.708.708l-12-12a.5.5 0 0 1 0-.708z"/>\n        ',filled:'\n            <path d="M2 6c0-.572.08-1.125.23-1.65l8.558 8.559A.5.5 0 0 1 10.5 13h-5a.5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm10.303 4.181L3.818 1.697a6 6 0 0 1 8.484 8.484zM5 14.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1-.5-.5zM2.354 1.646a.5.5 0 1 0-.708.708l12 12a.5.5 0 0 0 .708-.708l-12-12z"/>\n        '}),moon:Object.freeze({stroked:'\n            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"/>\n        ',filled:'\n            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>\n        '}),moonStars:Object.freeze({stroked:'\n            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278zM4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.162c-.337.042-.68.063-1.029.063-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286z"/>\n            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>      \n        ',filled:'\n            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>\n            <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/>      \n        '}),person:Object.freeze({stroked:'\n            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>\n        ',filled:'\n            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>\n        '}),pip:Object.freeze({stroked:'\n            <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h13A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 12.5zM1.5 3a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5z"/>\n            <path d="M8 8.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5z"/>      \n        ',filled:'\n            <path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2zm7 6h5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5"/>\n        '}),plus:Object.freeze({stroked:'\n            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n        '}),plusLarge:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"/>\n        '}),questionCircle:Object.freeze({stroked:'\n            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n            <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>\n        '}),rulers:Object.freeze({mixed:'\n            <path d="M1 0a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h5v-1H2v-1h4v-1H4v-1h2v-1H2v-1h4V9H4V8h2V7H2V6h4V2h1v4h1V4h1v2h1V2h1v4h1V4h1v2h1V2h1v4h1V1a1 1 0 0 0-1-1H1z"/>\n        '}),scissors:Object.freeze({filled:'\n            <path d="M3.5 3.5c-.614-.884-.074-1.962.858-2.5L8 7.226 11.642 1c.932.538 1.472 1.616.858 2.5L8.81 8.61l1.556 2.661a2.5 2.5 0 1 1-.794.637L8 9.73l-1.572 2.177a2.5 2.5 0 1 1-.794-.637L7.19 8.61 3.5 3.5zm2.5 10a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0zm7 0a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"/>\n        '}),shuffle:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.6 9.6 0 0 0 7.556 8a9.6 9.6 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.6 10.6 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.6 9.6 0 0 0 6.444 8a9.6 9.6 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5"/>\n            <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192"/>\n        '}),sun:Object.freeze({stroked:'\n            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>\n        ',filled:'\n            <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>\n        '}),symmetryHorizontal:Object.freeze({mixed:'\n            <path d="M13.5 7a.5.5 0 0 0 .24-.939l-11-6A.5.5 0 0 0 2 .5v6a.5.5 0 0 0 .5.5h11zm.485 2.376a.5.5 0 0 1-.246.563l-11 6A.5.5 0 0 1 2 15.5v-6a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .485.376zM11.539 10H3v4.658L11.54 10z"/>\n        '}),symmetryVertical:Object.freeze({mixed:'\n            <path d="M7 2.5a.5.5 0 0 0-.939-.24l-6 11A.5.5 0 0 0 .5 14h6a.5.5 0 0 0 .5-.5v-11zm2.376-.484a.5.5 0 0 1 .563.245l6 11A.5.5 0 0 1 15.5 14h-6a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .376-.484zM10 4.46V13h4.658L10 4.46z"/>\n        '}),scaleLine:Object.freeze({stroked:'\n            <path d="M4.114 7.951l.397-.413L5.799 9.25h.742L4.935 7.097l1.439-1.545h-.77L4.453 6.769l-.339.406V4h-.632v5.25h.632V7.951zM7.638 5.962l-.017-.41h-.598V9.25h.632v-2.7c.153-.353.437-.53.851-.53.527 0 .79.269.79.807V9.25h.636V6.796a.846.846 0 01.27-.564.834.834 0 01.584-.212c.285 0 .488.066.609.198.12.13.18.327.18.592v2.44h.633V6.772c-.014-.86-.426-1.289-1.237-1.289-.27 0-.503.055-.701.164-.196.11-.355.253-.479.431-.186-.396-.538-.595-1.056-.595-.46 0-.826.16-1.097.479z"/>\n            <path d="M1.5 10.75v-2.5h-1v3a.5.5 0 00.5.5h14a.5.5 0 00.5-.5v-3h-1v2.5h-13z"/>\n        '}),search:Object.freeze({stroked:'\n            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>\n        '}),subtract:Object.freeze({mixed:'\n            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm5 10v2a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2v5a2 2 0 0 1-2 2H5z"/>\n        '}),translate:Object.freeze({mixed:'\n            <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/>\n            <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 0 1-.415-.492 1.988 1.988 0 0 1-.94.31z"/>      \n        '}),trash:Object.freeze({stroked:'\n            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>  \n        ',filled:'\n            <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>\n        '}),union:Object.freeze({mixed:'\n            <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2z"/>\n        '}),vectorPen:Object.freeze({mixed:'\n            <path fill-rule="evenodd" d="M10.646.646a.5.5 0 0 1 .708 0l4 4a.5.5 0 0 1 0 .708l-1.902 1.902-.829 3.313a1.5 1.5 0 0 1-1.024 1.073L1.254 14.746 4.358 4.4A1.5 1.5 0 0 1 5.43 3.377l3.313-.828L10.646.646zm-1.8 2.908-3.173.793a.5.5 0 0 0-.358.342l-2.57 8.565 8.567-2.57a.5.5 0 0 0 .34-.357l.794-3.174-3.6-3.6z"/>\n            <path fill-rule="evenodd" d="M2.832 13.228 8 9a1 1 0 1 0-1-1l-4.228 5.168-.026.086.086-.026z"/>\n        '}),zoomIn:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n            <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>\n            <path fill-rule="evenodd" d="M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"/>\n        '}),zoomOut:Object.freeze({stroked:'\n            <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n            <path d="M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"/>\n            <path fill-rule="evenodd" d="M3 6.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>\n        '})}),Vm=Object.freeze({path:Gm.airplane.stroked,width:24,height:24,fill:"currentColor",stroke:"#FFFFFFFF",strokeWidth:0,shouldReplaceHashtag:!1,class:""}),zm=function(t={}){return(t=Fh.merge(Fh.cloneDeep(Vm),t)).shouldReplaceHashtag&&(t.fill=t.fill.replace("#","%23"),t.stroke=t.stroke.replace("#","%23")),`\n        <svg xmlns="http://www.w3.org/2000/svg" \n            width="${t.width}" \n            height="${t.height}" \n            fill="${t.fill}"\n            stroke="${t.stroke}" \n            stroke-width="${t.strokeWidth}"\n            class="${t.class}" \n            viewBox="0 0 16 16">\n            ${t.path}\n        </svg>\n    `},Km="oltb-animation",jm=`${Km}--bounce`,Wm="oltb-modal",$m=`${Wm}-backdrop`,Ym=Object.freeze({title:"Modal",maximized:!1,pushWidth:!1,content:void 0,onClose:void 0});class Xm{#Y="base-modal.js";constructor(t={}){this.options=Fh.merge(Fh.cloneDeep(Ym),t),t.filename&&(this.#Y=t.filename),this.#X()}#X(){this.backdrop=tp.createElement({element:"div",class:`${$m} ${$m}--fixed`,attributes:{tabindex:"-1"},listeners:{click:this.#q.bind(this),keydown:Hm}}),this.modal=tp.createElement({element:"div",class:`${Wm} ${this.options.maximized?`${Wm}--maximized`:""} ${this.options.pushWidth?`${Wm}--push-width`:""} ${Km} ${jm}`}),this.modalContent=tp.createElement({element:"div",class:`${Wm}__content`});const t=tp.createElement({element:"div",class:`${Wm}__header`}),e=tp.createElement({element:"h2",html:this.options.title,class:`${Wm}__title`}),i=tp.createElement({element:"button",html:zm({path:Gm.close.stroked,fill:"none",stroke:"currentColor",strokeWidth:1}),class:`${Wm}__close oltb-btn oltb-btn--blank`,attributes:{type:"button"},listeners:{click:this.close.bind(this)}});tp.appendChildren(t,[e,i]),tp.appendChildren(this.modal,[t,this.modalContent]),tp.appendChildren(this.backdrop,[this.modal]),window.addEventListener(ep.browser.keyUp,this.#Z.bind(this)),this.buttons=[i],this.options.content&&this.show(this.options.content)}#J(t){return t.target===this.backdrop}#q(t){if(!this.#J(t))return;const e=this.backdrop.firstElementChild;tp.runAnimation(e,jm)}#Z(t){t.key===Qm.valueEscape&&this.close()}getName(){return this.#Y}getTitle(){return this.options.title}getContent(){return this.options.content}getOnClose(){return this.options.onClose}isMaximized(){return this.options.maximized}show(t){this.options.content=t,"string"==typeof t?this.modalContent.innerHTML=t:tp.appendChildren(this.modalContent,[t]);const e=lp.getMapElement();tp.appendChildren(e,[this.backdrop]),this.backdrop.focus()}close(){this.backdrop.removeEventListener(ep.browser.keyDown,Hm),tp.removeElement(this.backdrop),this.options.onClose&&this.options.onClose()}}class qm{static create(t={}){return new Xm({title:t.title,maximized:t.maximized,pushWidth:t.pushWidth,onClose:t.onClose,content:t.content})}}const Zm="oltb-dialog-backdrop";class Jm{constructor(){this.backdrop=tp.createElement({element:"div",class:`${Zm} ${Zm}--fixed`,attributes:{tabindex:"-1"},listeners:{click:this.#q.bind(this),keydown:Hm}}),window.addEventListener(ep.browser.keyUp,this.#Z.bind(this))}#J(t){return t.target===this.backdrop}#q(t){if(!this.#J(t))return;const e=this.backdrop.firstElementChild;tp.runAnimation(e,"oltb-animation--bounce")}#Z(t){t.key===Qm.valueEscape&&this.close()}close(){this.backdrop.removeEventListener(ep.browser.keyDown,Hm),tp.removeElement(this.backdrop)}}const t_="oltb-dialog",e_=`${t_}--alert`,i_="oltb-animation",n_=`${i_}--bounce`,s_=Object.freeze({title:"Alert",message:"",confirmText:"Ok",onConfirm:void 0});class r_ extends Jm{constructor(t={}){super(),this.options=Fh.merge(Fh.cloneDeep(s_),t),this.#tt()}#tt(){const t=tp.createElement({element:"div",class:`${t_} ${e_} ${i_} ${n_}`}),e=tp.createElement({element:"h2",class:`${t_}__title`,text:this.options.title}),i=tp.createElement({element:"p",class:`${t_}__message`,html:this.options.message}),n=tp.createElement({element:"div",class:`${t_}__buttons-wrapper`}),s=tp.createElement({element:"button",text:this.options.confirmText,class:`${t_}__btn oltb-btn oltb-btn--blue-mid`,attributes:{type:"button"},listeners:{click:this.#et.bind(this)}});tp.appendChildren(n,[s]),tp.appendChildren(t,[e,i,n]),tp.appendChildren(this.backdrop,[t]);const r=lp.getMapElement();tp.appendChildren(r,[this.backdrop]),this.buttons=[s],this.backdrop.focus()}#et(){this.close(),this.options.onConfirm&&this.options.onConfirm()}getClassType(){return e_}}const o_=function(){return window.document.body.classList.contains(Jg.getConfig().className.dark)},a_="oltb-dialog",l_=`${a_}--prompt`,A_="oltb-animation",c_=`${A_}--bounce`,h_=Object.freeze({title:"Prompt",message:"",placeholder:void 0,value:void 0,confirmClass:"oltb-btn--green-mid",confirmText:"Confirm",cancelText:"Cancel",onConfirm:void 0,onCancel:void 0,onInput:void 0});class u_ extends Jm{constructor(t={}){super(),this.options=Fh.merge(Fh.cloneDeep(h_),t),this.#tt()}#it(t){return null!=t}#tt(){const t=tp.createElement({element:"div",class:`${a_} ${l_} ${A_} ${c_}`}),e=tp.createElement({element:"h2",class:`${a_}__title`,text:this.options.title}),i=tp.createElement({element:"p",class:`${a_}__message`,html:this.options.message}),n=tp.createElement({element:"input",class:`${a_}__input oltb-input`,attributes:{type:"text"},listeners:{input:()=>{this.#nt(n)}}});this.#it(this.options.placeholder)&&n.setAttribute("placeholder",this.options.placeholder),this.#it(this.options.value)&&(n.value=this.options.value);const s=tp.createElement({element:"div",class:`${a_}__buttons-wrapper`}),r=tp.createElement({element:"button",text:this.options.confirmText,class:`${a_}__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:this.#et.bind(this,n)}}),o=tp.createElement({element:"button",text:this.options.cancelText,class:`${a_}__btn oltb-btn ${o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(s,[o,r]),tp.appendChildren(t,[e,i,n,s]),tp.appendChildren(this.backdrop,[t]);const a=lp.getMapElement();tp.appendChildren(a,[this.backdrop]),this.buttons=[o,r],this.backdrop.focus()}#nt(t){this.options.onInput&&this.options.onInput(t.value.trim())}#et(t){this.close(),this.options.onConfirm&&this.options.onConfirm(t.value.trim())}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getClassType(){return l_}}const d_="oltb-dialog",g_=`${d_}--select`,p_="oltb-animation",f_=`${p_}--bounce`,m_=Object.freeze({title:"Select",message:"",value:void 0,options:[],confirmClass:"oltb-btn--green-mid",confirmText:"Confirm",cancelText:"Cancel",onConfirm:void 0,onCancel:void 0,onChange:void 0});class __ extends Jm{constructor(t={}){super(),this.options=Fh.merge(Fh.cloneDeep(m_),t),this.#tt()}#tt(){const t=tp.createElement({element:"div",class:`${d_} ${g_} ${p_} ${f_}`}),e=tp.createElement({element:"h2",class:`${d_}__title`,text:this.options.title}),i=tp.createElement({element:"p",class:`${d_}__message`,html:this.options.message}),n=tp.createElement({element:"select",class:`${d_}__select oltb-select`,listeners:{change:()=>{this.#rt(n)}}});this.options.options.forEach((t=>{const e=tp.createElement({element:"option",text:t.text,value:t.value});tp.appendChildren(n,[e])})),this.options.value?n.value=this.options.value:this.options.options.length>0?n.value=this.options.options[0].value:n.value="";const s=tp.createElement({element:"div",class:`${d_}__buttons-wrapper`}),r=tp.createElement({element:"button",text:this.options.confirmText,class:`${d_}__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:this.#et.bind(this,n)}}),o=tp.createElement({element:"button",text:this.options.cancelText,class:`${d_}__btn oltb-btn ${o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(s,[o,r]),tp.appendChildren(t,[e,i,n,s]),tp.appendChildren(this.backdrop,[t]);const a=lp.getMapElement();tp.appendChildren(a,[this.backdrop]),this.buttons=[o,r],this.backdrop.focus()}#rt(t){this.options.onChange&&this.options.onChange({text:t.options[t.selectedIndex].text.trim(),value:t.value.trim()})}#et(t){this.close();const e=this.options.value,i=this.options.options.find((t=>t.value===e)),n=t.value,s=t.options[t.selectedIndex];this.options.onConfirm&&this.options.onConfirm({from:{text:i.text.trim(),value:e.trim()},to:{text:s.text.trim(),value:n.trim()}})}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getClassType(){return g_}}const y_="oltb-dialog",w_=`${y_}--confirm`,v_="oltb-animation",b_=`${v_}--bounce`,C_=Object.freeze({title:"Confirm",message:"",confirmClass:"oltb-btn--red-mid",confirmText:"Yes",cancelText:"Cancel",onConfirm:void 0,onCancel:void 0});class x_ extends Jm{constructor(t={}){super(),this.options=Fh.merge(Fh.cloneDeep(C_),t),this.#tt()}#tt(){const t=tp.createElement({element:"div",class:`${y_} ${w_} ${v_} ${b_}`}),e=tp.createElement({element:"h2",class:`${y_}__title`,text:this.options.title}),i=tp.createElement({element:"p",class:`${y_}__message`,html:this.options.message}),n=tp.createElement({element:"div",class:`${y_}__buttons-wrapper`}),s=tp.createElement({element:"button",text:this.options.confirmText,class:`${y_}__btn oltb-btn ${this.options.confirmClass}`,attributes:{type:"button"},listeners:{click:this.#et.bind(this)}}),r=tp.createElement({element:"button",text:this.options.cancelText,class:`${y_}__btn oltb-btn ${o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"}`,attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(n,[r,s]),tp.appendChildren(t,[e,i,n]),tp.appendChildren(this.backdrop,[t]);const o=lp.getMapElement();tp.appendChildren(o,[this.backdrop]),this.buttons=[r,s],this.backdrop.focus()}#et(){this.close(),this.options.onConfirm&&this.options.onConfirm()}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getClassType(){return w_}}class B_{static alert(t){return new r_(t)}static confirm(t){return new x_(t)}static prompt(t){return new u_(t)}static select(t){return new __(t)}static get Success(){return"oltb-btn--green-mid"}static get Danger(){return"oltb-btn--red-mid"}}const E_=Object.freeze({altShiftDragRotate:"altShiftDragRotate",alwaysNewLayers:"alwaysNewLayers",copyCoordinatesOnClick:"copyCoordinatesOnClick",dragPan:"dragPan",keyboardPan:"keyboardPan",keyboardZoom:"keyboardZoom",mouseOnlyToEditVectorShapes:"mouseOnlyToEditVectorShapes",mouseWheelZoom:"mouseWheelZoom",selectVectorMapShapes:"selectVectorMapShapes",snapHelpLines:"snapHelpLines",snapInteraction:"snapInteraction",updateToolboxCoordinatesOnHover:"updateToolboxCoordinatesOnHover"}),S_="url-manager.js";class F_ extends ig{static async initAsync(t={}){return rg.logDebug(S_,"initAsync","Initialization started"),new Promise((t=>{t({filename:S_,result:!0})}))}static setMap(t){}static getName(){return S_}static getParameters(){const t=decodeURI(window.location.search);return new URLSearchParams(t)}static getParameter(t,e=!0){const i=this.getParameters().get(t)||"";return e?i.toLowerCase():i}}const I_=Object.freeze(["Badger","Bear","Cat","Cow","Dog","Donkey","Elephant","Frog","Giraffe","Koala","Lemur","Lizard","Lynx","Meerkat","Moose","Mosquito","Mouse","Otter","Owl","Panda","Pelican","Puma","Rabbit","Snow leopard"]),L_=Object.freeze(["Adorable","Adored","Angry","Clever","Clumsy","Confused","Dashing","Dizzy","Elegant","Funny","Glowing","Happy","Mysterious","Notorious","Running","Slow","Smooth","Spooky","Stubborn","Suspicious","Swimming","Tired","Triumphant","Upset","Yummy"]),M_="name-manager.js";class T_ extends ig{static async initAsync(t={}){return rg.logDebug(M_,"initAsync","Initialization started"),new Promise((t=>{t({filename:M_,result:!0})}))}static setMap(t){}static getName(){return M_}static generate(){const t=Fh.random(0,I_.length-1),e=Fh.random(0,L_.length-1);return`${L_[e]} ${I_[t]}`.capitalize()}}const R_="tool-manager.js";class k_ extends ig{static#ot;static async initAsync(t={}){return rg.logDebug(R_,"initAsync","Initialization started"),new Promise((t=>{t({filename:R_,result:!0})}))}static setMap(t){}static getName(){return R_}static setActiveTool(t){this.#ot&&this.#ot!==t&&this.#ot.deselectTool(),this.#ot=t}static getActiveTool(){return this.#ot}static hasActiveTool(){return void 0!==this.#ot}static removeActiveTool(){this.#ot=void 0}}const U_=[];for(let t=0;t<256;++t)U_.push((t+256).toString(16).slice(1));let D_;const O_=new Uint8Array(16);var P_={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function N_(t,e,i){if(P_.randomUUID&&!t)return P_.randomUUID();const n=(t=t||{}).random??t.rng?.()??function(){if(!D_){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");D_=crypto.getRandomValues.bind(crypto)}return D_(O_)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(t,e=0){return(U_[t[e+0]]+U_[t[e+1]]+U_[t[e+2]]+U_[t[e+3]]+"-"+U_[t[e+4]]+U_[t[e+5]]+"-"+U_[t[e+6]]+U_[t[e+7]]+"-"+U_[t[e+8]]+U_[t[e+9]]+"-"+U_[t[e+10]]+U_[t[e+11]]+U_[t[e+12]]+U_[t[e+13]]+U_[t[e+14]]+U_[t[e+15]]).toLowerCase()}(n)}const Q_=Symbol("null");let H_=0;class G_ extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(null!=t){if("function"!=typeof t[Symbol.iterator])throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[e,i]of t)this.set(e,i)}}_getPublicKeys(t,e=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const i=this._getPrivateKey(t,e);let n;return i&&this._publicKeys.has(i)?n=this._publicKeys.get(i):e&&(n=[...t],this._publicKeys.set(i,n)),{privateKey:i,publicKey:n}}_getPrivateKey(t,e=!1){const i=[];for(let n of t){null===n&&(n=Q_);const t="object"==typeof n||"function"==typeof n?"_objectHashes":"symbol"==typeof n&&"_symbolHashes";if(t)if(this[t].has(n))i.push(this[t].get(n));else{if(!e)return!1;{const e=`@@mkm-ref-${H_++}@@`;this[t].set(n,e),i.push(e)}}else i.push(n)}return JSON.stringify(i)}set(t,e){const{publicKey:i}=this._getPublicKeys(t,!0);return super.set(i,e)}get(t){const{publicKey:e}=this._getPublicKeys(t);return super.get(e)}has(t){const{publicKey:e}=this._getPublicKeys(t);return super.has(e)}delete(t){const{publicKey:e,privateKey:i}=this._getPublicKeys(t);return Boolean(e&&super.delete(e)&&this._publicKeys.delete(i))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}const V_=Object.freeze({knot0:'<path fill="rgba(59, 67, 82, 1)" d="M125,120c2.762,0,5,2.239,5,5c0,2.762-2.238,5-5,5c-2.761,0-5-2.238-5-5C120,122.239,122.239,120,125,120z"/><path fill="none" stroke="rgba(59, 67, 82, 1)" stroke-width="2" d="M125,115c5.523,0,10,4.477,10,10c0,5.523-4.477,10-10,10 c-5.523,0-10-4.477-10-10C115,119.477,119.477,115,125,115z "/>',knot2:'<path d="M125,112V76 M125,125l7-12.1h-14L125,125z"/>',knot5:'<path d="M125,112V76 M125,89l7-7 M125,125l7-12.1h-14L125,125z"/>',knot10:'<path d="M125,112V89 M125,89l14-14 M125,125l7-12.1h-14L125,125z"/>',knot15:'<path d="M125,112V89 M125,89l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot20:'<path d="M125,112V89 M125,89l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot25:'<path d="M125,112V79 M125,79l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot30:'<path d="M125,112V79 M125,79l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot35:'<path d="M125,112V69 M125,69l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot40:'<path d="M125,112V69 M125,69l14-14 M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot45:'<path d="M125,112V59 M125,59l14-14 M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14 L125,125z"/>',knot50:'<path d="M125,112V76 M125,76h14l-14,14V76z M125,125l7-12.1h-14L125,125z"/>',knot55:'<path d="M125,112V76 M125,76h14l-14,14V76z M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot60:'<path d="M125,112V76 M125,76h14l-14,14V76z M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot65:'<path d="M125,112V66 M125,66h14l-14,14V66z M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot70:'<path d="M125,112V66 M125,66h14l-14,14V66z M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot75:'<path d="M125,112V56 M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot80:'<path d="M125,112V56 M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot85:'<path d="M125,112V46 M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1 h-14L125,125z"/>',knot90:'<path d="M125,112V46 M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1 h-14L125,125z"/>',knot95:'<path d="M125,112V36 M125,36h14l-14,14V36z M125,60l14-14 M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot100:'<path d="M125,112V62 M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,125l7-12.1h-14L125,125z"/>',knot105:'<path d="M125,112V62 M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot110:'<path d="M125,112V62 M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot115:'<path d="M125,112V52 M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14 L125,125z"/>',knot120:'<path d="M125,112V52 M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14 L125,125z"/>',knot125:'<path d="M125,112V42 M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125 l7-12.1h-14L125,125z"/>',knot130:'<path d="M125,112V42 M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125 l7-12.1h-14L125,125z"/>',knot135:'<path d="M125,112V32 M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100 l7-7 M125,125l7-12.1h-14L125,125z"/>',knot140:'<path d="M125,112V32 M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100 l14-14 M125,125l7-12.1h-14L125,125z"/>',knot145:'<path d="M125,112V22 M125,22h14l-14,14V22z M125,36h14l-14,14V36z M125,60l14-14 M125,70l14-14 M125,80l14-14 M125,90 l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot150:'<path d="M125,112V48 M125,48h14l-14,14V48z M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,125l7-12.1h-14L125,125z"/>',knot155:'<path d="M125,112V48 M125,48h14l-14,14V48z M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l7-7 M125,125l7-12.1 h-14L125,125z"/>',knot160:'<path d="M125,112V48 M125,48h14l-14,14V48z M125,62h14l-14,14V62z M125,76h14l-14,14V76z M125,100l14-14 M125,125 l7-12.1h-14L125,125z"/>',knot165:'<path d="M125,112V38 M125,38h14l-14,14V38z M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot170:'<path d="M125,112V38 M125,38h14l-14,14V38z M125,52h14l-14,14V52z M125,66h14l-14,14V66z M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot175:'<path d="M125,112V28 M125,28h14l-14,14V28z M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot180:'<path d="M125,112V28 M125,28h14l-14,14V28z M125,42h14l-14,14V42z M125,56h14l-14,14V56z M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>',knot185:'<path d="M125,112V18 M125,18h14l-14,14V18z M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l7-7 M125,125l7-12.1h-14L125,125z"/>',knot190:'<path d="M125,112V18 M125,18h14l-14,14V18z M125,32h14l-14,14V32z M125,46h14l-14,14V46z M125,70l14-14 M125,80l14-14 M125,90l14-14 M125,100l14-14 M125,125l7-12.1h-14L125,125z"/>'}),z_="conversion-manager.js";class K_ extends ig{static async initAsync(t={}){return rg.logDebug(z_,"initAsync","Initialization started"),new Promise((t=>{t({filename:z_,result:!0})}))}static setMap(t){}static getName(){return z_}static roundToNearest(t,e){return Math.round(t/e)*e}static roundUpToNearest(t,e){return Math.ceil(t/e)*e}static roundDownToNearest(t,e){return Math.floor(t/e)*e}static degreesToRadians(t){return t*(Math.PI/180)}static radiansToDegrees(t){return t*(180/Math.PI)}static metersPerSecondToKnots(t){return 1.94384*t}static knotsToMetersPerSecond(t){return.51444*t}}const j_=Object.freeze({windSpeed:0,width:250,height:250,fill:"#3B4352FF",stroke:"#3B4352FF",strokeWidth:3,shouldReplaceHashtag:!1}),W_=function(t={}){return(t=Fh.merge(Fh.cloneDeep(j_),t)).shouldReplaceHashtag&&(t.fill=t.fill.replace("#","%23"),t.stroke=t.stroke.replace("#","%23")),`\n        <svg xmlns="http://www.w3.org/2000/svg" \n            width="${t.width}" \n            height="${t.height}" \n            fill="${t.fill}"\n            stroke="${t.stroke}"\n            stroke-width="${t.strokeWidth}"\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-miterlimit="10"\n            viewBox="0 0 250 250">\n            ${function(t){if(t>=1&&t<2.5)return V_.knot2;const e=K_.roundDownToNearest(t,2.5),i=K_.metersPerSecondToKnots(e),n=`knot${K_.roundToNearest(i,5)}`;return Fh.has(V_,[n])?V_[n]:V_.knot0}(t.windSpeed)}\n        </svg>\n    `},$_=Object.freeze({type:Object.freeze({layer:"layer",iconMarker:"iconMarker",windBarb:"windBarb",measurement:"measurement",drawing:"drawing",snapLine:"snapLine"})}),Y_=function(t){const e=function t(e){return e.reduce(((e,i)=>Array.isArray(i)?e.concat(t(i)):e.concat(i)),[])}(t),i=[];for(let t=0;t<e.length;t+=2)i.push([e[t],e[t+1]]);return i},X_="style-manager.js",q_=new zo({fill:new Qo({color:"#D7E3FA80"}),stroke:new Vo({color:"#0166A5FF",width:2.5})}),Z_=new zo({fill:new Qo({color:"#FFFFFF66"}),stroke:new Vo({color:"#3B4352FF",lineDash:[2,5],width:2.5})}),J_=new zo({fill:new Qo({color:"#CEEEFF80"}),stroke:new Vo({color:"#0080C5FF",width:2.5})}),ty=new zo({fill:new Qo({color:"#CEEEFF80"}),stroke:new Vo({color:"#0080C5FF",lineDash:[2,5],width:2.5})}),ey=new zo({image:new No({radius:6,fill:new Qo({color:"#0080C5FF"}),stroke:new Vo({color:"#FFFFFFFF",width:2})}),geometry:t=>new vs(Y_(t.getGeometry().getCoordinates()))});class iy extends ig{static#at;static async initAsync(t={}){return rg.logDebug(X_,"initAsync","Initialization started"),this.#at=new G_,new Promise((t=>{t({filename:X_,result:!0})}))}static setMap(t){}static getName(){return X_}static#lt(t,e,i,n,s,r,o){const a=[t,e,i,n,s,r],l=this.#at.get(a);if(l)return l;const A=new zo({image:new Go({src:`data:image/svg+xml;utf8,${o}`,rotation:e,size:[i,n]})});return this.#at.set(a,A),A}static#At(t,e,i,n){const s=[t,e,i,n],r=this.#at.get(s);if(r)return r;const o=new zo({image:new No({radius:t,fill:new Qo({color:i}),stroke:new Vo({color:n,width:e})})});return this.#at.set(s,o),o}static#ct(t,e,i,n,s,r,o,a){const l=[t,e,i,n,s,r,o,a],A=this.#at.get(l);if(A)return A;const c=i?t.toUpperCase():t,h=new zo({text:new Yo({font:s,text:c.ellipsis(n),placement:"point",fill:new Qo({color:r}),stroke:new Vo({color:o,width:a}),offsetY:e})});return this.#at.set(l,h),h}static#ht(t,e){const[i,n]=t.icon.key.split("."),[s,r]="geoPin.filled".split("."),o=Fh.has(Gm,[i,n])?Gm[i][n]:Gm[s][r],a=zm({path:o,width:t.icon.width,height:t.icon.width,fill:t.icon.fill,stroke:t.icon.stroke,strokeWidth:t.icon.strokeWidth,shouldReplaceHashtag:t.settings.shouldReplaceHashtag}),l=this.#lt(t.icon.key,t.icon.rotation,t.icon.width,t.icon.height,t.icon.fill,t.icon.stroke,a),A=[this.#At(t.marker.radius,t.marker.width,t.marker.fill,t.marker.stroke),l];if(Xg.marker.label.shouldRender&&e<Xg.marker.label.visibleUnderResolution){const e=-35,i=this.#ct(t.label.text,e,t.label.useUpperCase,t.label.useEllipsisAfter,t.label.font,t.label.fill,t.label.stroke,t.label.strokeWidth);A.push(i)}return A}static#ut(t,e){const i=W_({windSpeed:t.icon.key,width:t.icon.width,height:t.icon.height,fill:t.icon.fill,stroke:t.icon.stroke,strokeWidth:t.icon.strokeWidth,shouldReplaceHashtag:t.settings.shouldReplaceHashtag}),n=K_.degreesToRadians(t.icon.rotation),s=[this.#lt(t.icon.key,n,t.icon.width,t.icon.height,t.icon.fill,t.icon.stroke,i)];if(Xg.marker.label.shouldRender&&e<Xg.marker.label.visibleUnderResolution){const e=20*(n>=90&&n<=270?-1:1),i=this.#ct(t.label.text,e,t.label.useUpperCase,t.label.useEllipsisAfter,t.label.font,t.label.fill,t.label.stroke,t.label.strokeWidth);s.push(i)}return s}static#dt(){}static#gt(t){return Fh.get(t.getProperties(),["oltb","type"],void 0)}static getStyle(t,e){const i=Xg.toolbar.id,n=t.get(i);if(n)return n.type===$_.type.iconMarker?this.#ht(n,e):n.type===$_.type.windBarb?this.#ut(n,e):this.#dt()}static clearStyles(){this.#at.clear()}static getSize(){return this.#at.size||0}static getDefaultMeasurementStyle(){return Z_}static getDefaultDrawingStyle(){return q_}static getSelectedStyle(t,e){switch(this.#gt(t)){case $_.type.measurement:return this.getDefaultSelectMeasurementStyle();case $_.type.drawing:default:return this.getDefaultSelectDrawingStyle()}}static getDefaultSelectDrawingStyle(){return[J_,ey]}static getDefaultSelectMeasurementStyle(){return[ty,ey]}}const ny=function(t,e){if(!ip.includes(t))return e instanceof Error?{name:e.name,message:e.message,fileName:e.fileName,lineNumber:e.lineNumber,columnNumber:e.columnNumber,stack:e.stack.split("\n").filter((t=>t)),cause:e.cause}:e instanceof Response?{ok:e.ok,redirect:e.redirect,status:e.status,statusText:e.statusText,type:e.type,url:e.url}:e},sy="oltb-overlay-tooltip",ry=function(t=""){const e=tp.createElement({element:"div",class:sy}),i=tp.createElement({element:"span",html:t,class:`${sy}__item`});tp.appendChildren(e,[i]);const n=Jg.getConfig().overlayOffset,s=new Wg({element:e,positioning:"bottom-center",offset:[n.horizontal,n.vertical]});return{getOverlay:()=>s,setPosition:t=>{s.setPosition(t)},getPositioin:()=>s.getPosition(),setData:t=>{i.innerHTML=t},getData:()=>i.innerHTML}},oy=Object.freeze({lon:void 0,lat:void 0,infoWindow:void 0,title:"",description:"",settings:Object.freeze({shouldReplaceHashtag:!0}),icon:Object.freeze({key:0,width:200,height:200,rotation:0,fill:"#3B4352FF",stroke:"#3B4352FF",strokeWidth:3}),label:Object.freeze({text:"",font:"14px Calibri",fill:"#FFFFFFFF",stroke:"#3B4352CC",strokeWidth:8,useEllipsisAfter:20,useUpperCase:!1})}),ay=Object.freeze({lon:void 0,lat:void 0,infoWindow:void 0,title:"",description:"",settings:Object.freeze({shouldReplaceHashtag:!0}),marker:Object.freeze({width:14,radius:14,fill:"#0166A5FF",stroke:"#0166A566",strokeWidth:2}),icon:Object.freeze({key:"geoPin.filled",width:14,height:14,rotation:0,fill:"#FFFFFFFF",stroke:"#FFFFFFFF",strokeWidth:0}),label:Object.freeze({text:"",font:"14px Calibri",fill:"#FFFFFFFF",stroke:"#3B4352CC",strokeWidth:8,useEllipsisAfter:20,useUpperCase:!1})}),ly=function(t){return t instanceof jn?hy(t):cy(t)},Ay=function(t){return t instanceof jn?t.getInteriorPoint().getCoordinates():t.getLastCoordinate()},cy=function(t){const e=Ae(t);if(e>100){return{value:Math.round(e/1e3*100)/100,unit:"km"}}return{value:Math.round(100*e)/100,unit:"m"}},hy=function(t){const e=he(t);if(e>1e4){return{value:Math.round(e/1e6*100)/100,unit:"km<sup>2</sup>"}}return{value:Math.round(100*e)/100,unit:"m<sup>2</sup>"}},uy=Object.freeze({Square:{type:"Circle",callback:Lc,parameters:4},Rectangle:{type:"Circle",callback:function(){return function(t,e,i){const n=a([t[0],t[t.length-1]].map((function(t){return Te(t)}))),s=[[S(n),F(n),D(n),U(n),S(n)]];return e?e.setCoordinates(s):e=new jn(s),e}},parameters:void 0},Circle:{type:"Circle",callback:Lc,parameters:32}}),dy=Object.freeze({Circle:"Circle",LinearRing:"LinearRing",LineString:"LineString",MultiLineString:"MultiLineString",MultiPoint:"MultiPoint",MultiPolygon:"MultiPolygon",Point:"Point",Polygon:"Polygon",Rectangle:"Rectangle",Square:"Square"}),gy="feature-manager.js";class py extends ig{static#pt;static async initAsync(t={}){return rg.logDebug(gy,"initAsync","Initialization started"),new Promise((t=>{t({filename:gy,result:!0})}))}static setMap(t){this.#pt=t}static getName(){return gy}static#ft(t,e,i={}){return{oltb:{lon:t.lon,lat:t.lat,type:e,infoWindow:t.infoWindow,title:t.title,description:t.description,settings:{shouldReplaceHashtag:t.settings.shouldReplaceHashtag},...i,icon:{key:t.icon.key,width:t.icon.width,height:t.icon.height,rotation:t.icon.rotation,fill:t.icon.fill,stroke:t.icon.stroke,strokeWidth:t.icon.strokeWidth},label:{text:t.label.text,font:t.label.font,fill:t.label.fill,stroke:t.label.stroke,strokeWidth:t.label.strokeWidth,useEllipsisAfter:t.label.useEllipsisAfter,useUpperCase:t.label.useUpperCase}}}}static#mt(t){this.applyDrawingProperties(t),t.setStyle(iy.getDefaultDrawingStyle())}static#_t(t){this.applyMeasurementProperties(t),this.#pt.addOverlay(this.getTooltip(t)),t.setStyle(iy.getDefaultMeasurementStyle())}static#yt(t){return[dy.Circle,dy.LineString,dy.LinearRing,dy.MultiLineString,dy.MultiPolygon,dy.Polygon,dy.Rectangle,dy.Square].includes(t)}static getType(t){return Fh.get(t.getProperties(),["oltb","type"],void 0)}static isWindBarbType(t){return Fh.get(t.getProperties(),["oltb","type"],void 0)===$_.type.windBarb}static isIconMarkerType(t){return Fh.get(t.getProperties(),["oltb","type"],void 0)===$_.type.iconMarker}static isMeasurementType(t){return Fh.get(t.getProperties(),["oltb","type"],void 0)===$_.type.measurement}static shouldHighlightOnHover(t){return!0===Fh.get(t.getProperties(),["oltb","settings","shouldHighlightOnHover"],void 0)}static hasInfoWindow(t){return Fh.has(t.getProperties(),["oltb","infoWindow"])}static getInfoWindow(t){return Fh.get(t.getProperties(),["oltb","infoWindow"],void 0)}static hasTooltip(t){return Fh.has(t.getProperties(),["oltb","tooltip"])}static getTooltip(t){return Fh.get(t.getProperties(),["oltb","tooltip"],void 0)}static generateWindBarb(t={}){t=Fh.merge(Fh.cloneDeep(oy),t);const e=new cs({geometry:new In(xe([t.lon,t.lat]))});return e.setProperties(this.#ft(t,$_.type.windBarb)),e}static generateIconMarker(t={}){t=Fh.merge(Fh.cloneDeep(ay),t);const e=new cs({geometry:new In(xe([t.lon,t.lat]))});return e.setProperties(this.#ft(t,$_.type.iconMarker,{marker:{width:t.marker.width,radius:t.marker.radius,fill:t.marker.fill,stroke:t.marker.stroke,strokeWidth:t.marker.strokeWidth}})),e}static isSameFeature(t,e){return!(!t||!e)&&(!(!t.ol_uid||!e.ol_uid)&&t.ol_uid===e.ol_uid)}static deepCopyVectorFeatureWithStyle(t,e){const i=fi(t),n=t.clone(),s=JSON.parse(JSON.stringify(JSON.decycle(t.getProperties()),ny));return s.geometry=n.getGeometry(),n.setProperties(s,!0),n.setStyle(e[i]),this.isMeasurementType(t)&&this.applyMeasurementProperties(n),n}static applyMeasurementProperties(t){this.hasTooltip(t)&&this.#pt.removeOverlay(this.getTooltip(t));const e=ry();t.setProperties({oltb:{type:$_.type.measurement,tooltip:e.getOverlay()}});const i=t.getGeometry(),n=Ay(i),s=ly(i);e.setPosition(n),e.setData(`${s.value} ${s.unit}`)}static applyDrawingProperties(t){this.hasTooltip(t)&&this.#pt.removeOverlay(this.getTooltip(t)),t.setProperties({oltb:{type:$_.type.drawing}})}static convertFeaturesTo(t,e){const i=new Map([[$_.type.drawing,this.#mt.bind(this)],[$_.type.measurement,this.#_t.bind(this)]]);t.forEach((t=>{const n=i.get(e.value),s=t.getGeometry().getType();n&&this.#yt(s)?n(t):rg.logWarning(gy,"convertFeaturesTo",{info:"Unsupported format or geometry-type",format:e,type:s})}))}}function fy(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const my=new Error("disposed"),_y=[256,256];class yy extends mg{constructor(t){const e=ug;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=fy(this.data_);return t?[t.width,t.height]:_y}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ug&&this.state!==pg)return;this.state=dg,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=gg,t.changed()})).catch((function(e){t.error_=e,t.state=pg,t.changed()}))}disposeInternal(){this.controller_&&(this.controller_.abort(my),this.controller_=null),super.disposeInternal()}}let wy;const vy=[];function by(t,e,i,n,s){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,s)),t.restore()}function Cy(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function xy(t,e,i,n){const s=Le(i,e,t);let r=ye(e,n,i);const o=e.getMetersPerUnit();void 0!==o&&(r*=o);const a=t.getMetersPerUnit();void 0!==a&&(r/=a);const l=t.getExtent();if(!l||h(l,s)){const e=ye(t,r,s)/r;isFinite(e)&&e>0&&(r/=e)}return r}function By(t,e,i,n,s,r,o,a,l,A,c,h,u,d){const g=Es(Math.round(i*t),Math.round(i*e),vy);if(h||(g.imageSmoothingEnabled=!1),0===l.length)return g.canvas;function p(t){return Math.round(t*i)/i}g.scale(i,i),g.globalCompositeOperation="lighter";const f=[1/0,1/0,-1/0,-1/0];let m;l.forEach((function(t,e,i){v(f,t.extent)}));const _=i/n,y=(h?1:1+Math.pow(2,-24))/_;m=Es(Math.round(O(f)*_),Math.round(R(f)*_),vy),h||(m.imageSmoothingEnabled=!1),l.forEach((function(t,e,i){if(t.image.width>0&&t.image.height>0){if(t.clipExtent){m.save();const e=(t.clipExtent[0]-f[0])*_,i=-(t.clipExtent[3]-f[3])*_,n=O(t.clipExtent)*_,s=R(t.clipExtent)*_;m.rect(h?e:Math.round(e),h?i:Math.round(i),h?n:Math.round(e+n)-Math.round(e),h?s:Math.round(i+s)-Math.round(i)),m.clip()}const e=(t.extent[0]-f[0])*_,i=-(t.extent[3]-f[3])*_,n=O(t.extent)*_,s=R(t.extent)*_;m.drawImage(t.image,A,A,t.image.width-2*A,t.image.height-2*A,h?e:Math.round(e),h?i:Math.round(i),h?n:Math.round(e+n)-Math.round(e),h?s:Math.round(i+s)-Math.round(i)),t.clipExtent&&m.restore()}}));const w=U(o);return a.getTriangles().forEach((function(t,e,i){const n=t.source,s=t.target;let o=n[0][0],a=n[0][1],A=n[1][0],c=n[1][1],u=n[2][0],d=n[2][1];const _=p((s[0][0]-w[0])/r),v=p(-(s[0][1]-w[1])/r),b=p((s[1][0]-w[0])/r),C=p(-(s[1][1]-w[1])/r),x=p((s[2][0]-w[0])/r),B=p(-(s[2][1]-w[1])/r),E=o,S=a;o=0,a=0,A-=E,c-=S,u-=E,d-=S;const F=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(t[i][i]);for(let r=i+1;r<e;r++){const e=Math.abs(t[r][i]);e>s&&(s=e,n=r)}if(0===s)return null;const r=t[n];t[n]=t[i],t[i]=r;for(let n=i+1;n<e;n++){const s=-t[n][i]/t[i][i];for(let r=i;r<e+1;r++)i==r?t[n][r]=0:t[n][r]+=s*t[i][r]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let s=n-1;s>=0;s--)t[s][e]-=t[s][n]*i[n]}return i}([[A,c,0,0,b-_],[u,d,0,0,x-_],[0,0,A,c,C-v],[0,0,u,d,B-v]]);if(!F)return;if(g.save(),g.beginPath(),function(){if(void 0===wy){const t=Es(6,6,vy);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",by(t,4,5,4,0),by(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;wy=Cy(e,0)||Cy(e,4)||Cy(e,8),Is(t),vy.push(t.canvas)}return wy}()||!h){g.moveTo(b,C);const t=4,e=_-b,i=v-C;for(let n=0;n<t;n++)g.lineTo(b+p((n+1)*e/t),C+p(n*i/(t-1))),n!=t-1&&g.lineTo(b+p((n+1)*e/t),C+p((n+1)*i/(t-1)));g.lineTo(x,B)}else g.moveTo(b,C),g.lineTo(_,v),g.lineTo(x,B);let I;if(g.clip(),g.transform(F[0],F[2],F[1],F[3],_,v),g.translate(f[0]-E,f[3]-S),m)I=m.canvas,g.scale(y,-y);else{const t=l[0],e=t.extent;I=t.image,g.scale(O(e)/I.width,-R(e)/I.height)}g.drawImage(I,0,0),g.restore()})),m&&(Is(m),vy.push(m.canvas)),c&&(g.save(),g.globalCompositeOperation="source-over",g.strokeStyle="black",g.lineWidth=1,a.getTriangles().forEach((function(t,e,i){const n=t.target,s=(n[0][0]-w[0])/r,o=-(n[0][1]-w[1])/r,a=(n[1][0]-w[0])/r,l=-(n[1][1]-w[1])/r,A=(n[2][0]-w[0])/r,c=-(n[2][1]-w[1])/r;g.beginPath(),g.moveTo(a,l),g.lineTo(s,o),g.lineTo(A,c),g.closePath(),g.stroke()})),g.restore()),g.canvas}class Ey{constructor(t,e,i,n,s,r,o){this.sourceProj_=t,this.targetProj_=e;let a={};const l=o?be((t=>Yi(o,Le(t,this.targetProj_,this.sourceProj_)))):Ie(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return a[e]||(a[e]=l(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&O(n)>=O(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?O(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?O(this.targetProj_.getExtent()):null;const A=U(i),c=D(i),h=F(i),u=S(i),d=this.transformInv_(A),g=this.transformInv_(c),p=this.transformInv_(h),f=this.transformInv_(u),m=10+(r?Math.max(0,Math.ceil(Math.log2(E(i)/(r*r*256*256)))):0);if(this.addQuad_(A,c,h,u,d,g,p,f,m),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}))}a={}}addTriangle_(t,e,i,n,s,r){this.triangles_.push({source:[n,s,r],target:[t,e,i]})}addQuad_(t,e,i,n,s,r,o,l,A){const c=a([s,r,o,l]),h=this.sourceWorldWidth_?O(c)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(A>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){g=O(a([t,e,i,n]))/this.targetWorldWidth_>.25||g}!d&&this.sourceProj_.isGlobal()&&h&&(g=h>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!P(c,this.maxSourceExtent_))return;let p=0;if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(l[0])&&isFinite(l[1])))if(A>0)g=!0;else if(p=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=p&&2!=p&&4!=p&&8!=p)return;if(A>0){if(!g){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let r;if(d){r=($(s[0],u)+$(o[0],u))/2-$(n[0],u)}else r=(s[0]+o[0])/2-n[0];const a=(s[1]+o[1])/2-n[1];g=r*r+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const a=[(e[0]+i[0])/2,(e[1]+i[1])/2],c=this.transformInv_(a),h=[(n[0]+t[0])/2,(n[1]+t[1])/2],u=this.transformInv_(h);this.addQuad_(t,e,a,h,s,r,c,u,A-1),this.addQuad_(h,a,i,n,u,c,o,l,A-1)}else{const a=[(t[0]+e[0])/2,(t[1]+e[1])/2],c=this.transformInv_(a),h=[(i[0]+n[0])/2,(i[1]+n[1])/2],u=this.transformInv_(h);this.addQuad_(t,a,h,n,s,c,u,l,A-1),this.addQuad_(a,e,i,h,c,r,o,u,A-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&p||this.addTriangle_(t,i,n,s,o,l),14&p||this.addTriangle_(t,i,e,s,o,r),p&&(13&p||this.addTriangle_(e,n,t,r,l,s),7&p||this.addTriangle_(e,n,i,r,l,o))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){const s=e.source;b(t,s[0]),b(t,s[1]),b(t,s[2])})),t}getTriangles(){return this.triangles_}}class Sy extends mg{constructor(t,e,i,n,s,r,o,a,l,A,c,h){super(s,ug,h),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=o,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=r||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const u=n.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const p=d?k(u,d):u;if(0===E(p))return void(this.state=fg);const f=t.getExtent();f&&(g=g?k(g,f):f);const m=n.getResolution(this.wrappedTileCoord_[0]),_=function(t,e,i,n){const s=I(i);let r=xy(t,e,s,n);return(!isFinite(r)||r<=0)&&B(i,(function(i){return r=xy(t,e,i,n),isFinite(r)&&r>0})),r}(t,i,p,m);if(!isFinite(_)||_<=0)return void(this.state=fg);const y=void 0!==A?A:.5;if(this.triangulation_=new Ey(t,i,p,g,_*y,m),0===this.triangulation_.getTriangles().length)return void(this.state=fg);this.sourceZ_=e.getZForResolution(_);let w=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(w[1]=V(w[1],g[1],g[3]),w[3]=V(w[3],g[1],g[3])):w=k(w,g)),E(w)){let i=0,n=0;t.canWrapX()&&(i=O(f),n=Math.floor((w[0]-f[0])/i));G(w.slice(),t,!0).forEach((t=>{const s=e.getTileRangeForExtentAndZ(t,this.sourceZ_);for(let t=s.minX;t<=s.maxX;t++)for(let e=s.minY;e<=s.maxY;e++){const s=l(this.sourceZ_,t,e,o);if(s){const t=n*i;this.sourceTiles_.push({tile:s,offset:t})}}++n})),0===this.sourceTiles_.length&&(this.state=fg)}else this.state=fg}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{const i=e.tile;if(i&&i.getState()==gg){const n=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);n[0]+=e.offset,n[2]+=e.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=e.offset,s[2]+=e.offset),t.push({extent:n,clipExtent:s,image:i.getImage()})}})),this.sourceTiles_.length=0,0===t.length)this.state=pg;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],r=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=By(n,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=gg}this.changed()}load(){if(this.state==ug){this.state=dg,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:e})=>{const i=e.getState();if(i==ug||i==dg){t++;const i=Ai(e,Ne,(n=>{const s=e.getState();s!=gg&&s!=pg&&s!=fg||(hi(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:t},e,i){t.getState()==ug&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(hi),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Is(this.canvas_.getContext("2d")),vy.push(this.canvas_),this.canvas_=null),super.release()}}class Fy{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof Xe&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return $i(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return $i(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){$i(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}function Iy(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function Ly(t){return e=t[0],i=t[1],n=t[2],(i<<e)+n;var e,i,n}function My(t,e,i,n,s){return`${fi(t)},${e},${function(t,e,i){return t+"/"+e+"/"+i}(i,n,s)}`}function Ty(t,e,i){if(!(i in t))return t[i]=new Set([e]),!0;const n=t[i],s=n.has(e);return s||n.add(e),!s}function Ry(t,e,i){const n=t[i];return!!n&&n.delete(e)}function ky(t,e){const i=t.layerStatesArray[t.layerIndex];i.extent&&(e=k(e,ke(i.extent,t.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=k(e,i))}return e}class Uy extends la{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=[1/0,1/0,-1/0,-1/0],this.tempTileRange_=new $g(0,0,0,0),this.tempTileCoord_=Iy(0,0,0);const i=void 0!==e.cacheSize?e.cacheSize:512;this.tileCache_=new Fy(i),this.maxStaleKeys=.5*i}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,i,n){const s=this.tileCache_,r=this.getLayer().getSource(),o=My(r,r.getKey(),t,e,i);let a;if(s.containsKey(o))a=s.get(o);else{if(a=r.getTile(t,e,i,n.pixelRatio,n.viewState.projection),!a)return null;s.set(o,a)}return a}getTile(t,e,i,n){const s=this.getOrCreateTile(t,e,i,n);return s||null}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=Yi(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!h(s,n))return null;const r=e.viewState,o=i.getRenderSource(),a=o.getTileGridForProjection(r.projection),l=o.getTilePixelRatio(e.pixelRatio);for(let t=a.getZForResolution(r.resolution);t>=a.getMinZoom();--t){const i=a.getTileCoordForCoordAndZ(n,t),s=this.getTile(t,i[1],i[2],e);if(!s||s.getState()!==gg)continue;const A=a.getOrigin(t),c=Do(a.getTileSize(t)),h=a.getResolution(t);let u;if(s instanceof _g||s instanceof Sy)u=s.getImage();else{if(!(s instanceof yy))continue;if(u=fy(s.getData()),!u)continue}const d=Math.floor(l*((n[0]-A[0])/h-i[1]*c[0])),g=Math.floor(l*((A[1]-n[1])/h-i[2]*c[1])),p=Math.round(l*o.getGutterForProjection(r.projection));return this.getImageData(u,d+p,g+p)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const i=e.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(t,e,i,n,s){const r=t.viewState,o=this.getLayer(),a=o.getRenderSource(),l=a.getTileGridForProjection(r.projection),A=fi(a);A in t.wantedTiles||(t.wantedTiles[A]={});const c=t.wantedTiles[A],h=o.getMapInternal(),u=Math.max(i-s,l.getMinZoom(),l.getZForResolution(Math.min(o.getMaxResolution(),h?h.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):l.getResolution(0)),a.zDirection)),d=r.rotation,g=d?T(r.center,r.resolution,d,t.size):void 0;for(let s=i;s>=u;--s){const i=l.getTileRangeForExtentAndZ(e,s,this.tempTileRange_),r=l.getResolution(s);for(let e=i.minX;e<=i.maxX;++e)for(let o=i.minY;o<=i.maxY;++o){if(d&&!l.tileCoordIntersectsViewport([s,e,o],g))continue;const i=this.getTile(s,e,o,t);if(!i)continue;if(!Ty(n,i,s))continue;const a=i.getKey();if(c[a]=!0,i.getState()===ug&&!t.tileQueue.isKeyQueued(a)){const n=Iy(s,e,o,this.tempTileCoord_);t.tileQueue.enqueue([i,A,l.getTileCoordCenter(n),r])}}}}findStaleTile_(t,e){const i=this.tileCache_,n=t[0],s=t[1],r=t[2],o=this.getStaleKeys();for(let t=0;t<o.length;++t){const a=My(this.getLayer().getSource(),o[t],n,s,r);if(i.containsKey(a)){const t=i.peek(a);if(t.getState()===gg)return t.endTransition(fi(this)),Ty(e,t,n),!0}}return!1}findAltTiles_(t,e,i,n){const s=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!s)return!1;let r=!0;const o=this.tileCache_,a=this.getLayer().getRenderSource(),l=a.getKey();for(let t=s.minX;t<=s.maxX;++t)for(let e=s.minY;e<=s.maxY;++e){const s=My(a,l,i,t,e);let A=!1;if(o.containsKey(s)){const t=o.peek(s);t.getState()===gg&&(Ty(n,t,i),A=!0)}A||(r=!1)}return r}renderFrame(t,e){this.renderComplete=!0;const i=t.layerStatesArray[t.layerIndex],n=t.viewState,s=n.projection,r=n.resolution,o=n.center,a=t.pixelRatio,l=this.getLayer(),A=l.getSource(),c=A.getTileGridForProjection(s),h=c.getZForResolution(r,A.zDirection),u=c.getResolution(h),d=A.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==d&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=d):this.renderedSourceKey_=d;let g=t.extent;const p=A.getTilePixelRatio(a);this.prepareContainer(t,e);const f=this.context.canvas.width,m=this.context.canvas.height,_=i.extent&&ke(i.extent);_&&(g=k(g,ke(i.extent)));const y=u*f/2/p,v=u*m/2/p,b=[o[0]-y,o[1]-v,o[0]+y,o[1]+v],C={};this.renderedTiles.length=0;const x=l.getPreload();if(t.nextExtent){const e=c.getZForResolution(n.nextResolution,A.zDirection),i=ky(t,t.nextExtent);this.enqueueTiles(t,i,e,C,x)}const B=ky(t,g);if(this.enqueueTiles(t,B,h,C,0),x>0&&setTimeout((()=>{this.enqueueTiles(t,B,h-1,C,x-1)}),0),!(h in C))return this.container;const E=fi(this),S=t.time;for(const e of C[h]){const i=e.getState();if(i===fg)continue;const n=e.tileCoord;if(i===gg){if(1===e.getAlpha(E,S)){e.endTransition(E);continue}}i!==pg&&(this.renderComplete=!1);if(this.findStaleTile_(n,C)){Ry(C,e,h),t.animate=!0;continue}if(this.findAltTiles_(c,n,h+1,C))continue;const s=c.getMinZoom();for(let t=h-1;t>=s;--t){if(this.findAltTiles_(c,n,t,C))break}}const F=u/r*a/p,I=this.getRenderContext(t);Xi(this.tempTransform,f/2,m/2,F,F,0,-f/2,-m/2),i.extent&&this.clipUnrotated(I,t,_),A.getInterpolate()||(I.imageSmoothingEnabled=!1),this.preRender(I,t);const L=Object.keys(C).map(Number);let M;L.sort(qe);const T=[],R=[];for(let e=L.length-1;e>=0;--e){const i=L[e],n=A.getTilePixelSize(i,a,s),r=c.getResolution(i)/u,o=n[0]*r*F,l=n[1]*r*F,h=c.getTileCoordForCoordAndZ(U(b),i),d=c.getTileCoordExtent(h),g=Yi(this.tempTransform,[p*(d[0]-b[0])/u,p*(b[3]-d[3])/u]),f=p*A.getGutterForProjection(s);for(const e of C[i]){if(e.getState()!==gg)continue;const n=e.tileCoord,s=h[1]-n[1],r=Math.round(g[0]-(s-1)*o),a=h[2]-n[2],c=Math.round(g[1]-(a-1)*l),u=Math.round(g[0]-s*o),d=Math.round(g[1]-a*l),p=r-u,m=c-d,_=1===L.length;let y=!1;M=[u,d,u+p,d,u+p,d+m,u,d+m];for(let t=0,e=T.length;t<e;++t)if(!_&&i<R[t]){const e=T[t];P([u,d,u+p,d+m],[e[0],e[3],e[4],e[7]])&&(y||(I.save(),y=!0),I.beginPath(),I.moveTo(M[0],M[1]),I.lineTo(M[2],M[3]),I.lineTo(M[4],M[5]),I.lineTo(M[6],M[7]),I.moveTo(e[6],e[7]),I.lineTo(e[4],e[5]),I.lineTo(e[2],e[3]),I.lineTo(e[0],e[1]),I.clip())}T.push(M),R.push(i),this.drawTile(e,t,u,d,p,m,f,_),y&&I.restore(),this.renderedTiles.unshift(e),this.updateUsedTiles(t.usedTiles,A,e)}}if(this.renderedResolution=u,this.extentChanged=!this.renderedExtent_||!w(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=a,this.postRender(this.context,t),i.extent&&I.restore(),I.imageSmoothingEnabled=!0,this.renderComplete){const e=(t,e)=>{const i=fi(A),n=e.wantedTiles[i],s=n?Object.keys(n).length:0;this.updateCacheSize(s),this.tileCache_.expireCache()};t.postRenderFunctions.push(e)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*t)}drawTile(t,e,i,n,s,r,o,a){let l;if(t instanceof yy){if(l=fy(t.getData()),!l)throw new Error("Rendering array data is not yet supported")}else l=this.getTileImage(t);if(!l)return;const A=this.getRenderContext(e),c=fi(this),h=e.layerStatesArray[e.layerIndex],u=h.opacity*(a?t.getAlpha(c,e.time):1),d=u!==A.globalAlpha;d&&(A.save(),A.globalAlpha=u),A.drawImage(l,o,o,l.width-2*o,l.height-2*o,i,n,s,r),d&&A.restore(),u!==h.opacity?e.animate=!0:a&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,i){const n=fi(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}}var Dy="preload",Oy="useInterimTilesOnError";class Py extends VA{constructor(t){t=t||{};const e=Object.assign({},t),i=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Dy)}setPreload(t){this.set(Dy,t)}getUseInterimTilesOnError(){return this.get(Oy)}setUseInterimTilesOnError(t){this.set(Oy,t)}getData(t){return super.getData(t)}}class Ny extends Py{constructor(t){super(t)}createRenderer(){return new Uy(this,{cacheSize:this.getCacheSize()})}}const Qy=[0,0,0];class Hy{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,$i(function(t,e){const i=e||qe;return t.every((function(e,n){if(0===n)return!0;const s=i(t[n-1],e);return!(s>0||0===s)}))}(this.resolutions_,((t,e)=>e-t)),"`resolutions` must be sorted in descending order"),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,$i(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=U(i)),$i(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,$i(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:SA,$i(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const n=new $g(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n})):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let t=n.minX,s=n.maxX;t<=s;++t)for(let s=n.minY,r=n.maxY;s<=r;++s)i([e,t,s])}forEachTileCoordParentTileRange(t,e,i,n){let s,r,o,a=null,l=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);l>=this.minZoom;){if(void 0!==r&&void 0!==o?(r=Math.floor(r/2),o=Math.floor(o/2),s=Yg(r,r,o,o,i)):s=this.getTileRangeForExtentAndZ(a,l,i),e(l,s))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return Yg(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],s=t[1],r=t[2];if(e===n)return Yg(s,r,s,r,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),o=Math.floor(s*t),a=Math.floor(r*t);if(e<n)return Yg(o,o,a,a,i);return Yg(o,Math.floor(t*(s+1))-1,a,Math.floor(t*(r+1))-1,i)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Qy);const n=Qy[1],s=Qy[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Qy);return Yg(n,Qy[1],s,Qy[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Do(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=Do(this.getTileSize(t[0]),this.tmpSize_),r=i[0]+t[1]*s[0]*n,o=i[1]-(t[2]+1)*s[1]*n;return f(r,o,r+s[0]*n,o+s[1]*n,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,s){const r=this.getZForResolution(i),o=i/this.getResolution(r),a=this.getOrigin(r),l=Do(this.getTileSize(r),this.tmpSize_);let A=o*(t-a[0])/i/l[0],c=o*(a[1]-e)/i/l[1];return n?(A=J(A,5)-1,c=J(c,5)-1):(A=Z(A,5),c=Z(c,5)),Iy(r,A,c,s)}getTileCoordForXYAndZ_(t,e,i,n,s){const r=this.getOrigin(i),o=this.getResolution(i),a=Do(this.getTileSize(i),this.tmpSize_);let l=(t-r[0])/o/a[0],A=(r[1]-e)/o/a[1];return n?(l=J(l,5)-1,A=J(A,5)-1):(l=Z(l,5),A=Z(A,5)),Iy(i,l,A,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return V(Je(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Pn(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}}function Gy(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){const s=zy(t);return function(t,e,i,n){n=void 0!==n?n:"top-left";const s=Vy(t,e,i);return new Hy({extent:t,origin:L(t,n),resolutions:s,tileSize:i})}(s,e,i,n)}(t),t.setDefaultTileGrid(e)),e}function Vy(t,e,i,n){e=void 0!==e?e:42,i=Do(void 0!==i?i:SA);const s=R(t),r=O(t);n=n>0?n:Math.max(r/i[0],s/i[1]);const o=e+1,a=new Array(o);for(let t=0;t<o;++t)a[t]=n/Math.pow(2,t);return a}function zy(t){let e=(t=_e(t)).getExtent();if(!e){const i=180*dt.degrees/t.getMetersPerUnit();e=f(-i,-i,i,i)}return e}function Ky(t,e){const i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));const n=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}const jy=/\{z\}/g,Wy=/\{x\}/g,$y=/\{y\}/g,Yy=/\{-y\}/g;function Xy(t,e){return function(i,n,s){if(!i)return;let r;const o=i[0];if(e){const t=e.getFullTileRange(o);t&&(r=t.getHeight()-1)}return function(t,e,i,n,s){return t.replace(jy,e.toString()).replace(Wy,i.toString()).replace($y,n.toString()).replace(Yy,(function(){if(void 0===s)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()}))}(t,o,i[1],i[2],r)}}function qy(t,e){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Xy(t[s],e);return function(t){if(1===t.length)return t[0];return function(e,i,n){if(!e)return;const s=$(Ly(e),t.length);return t[s](e,i,n)}}(n)}class Zy extends sc{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Do(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||fi(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,s){return gi()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Gy(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),r=Do(n.getTileSize(t),this.tmpSize);return 1==s?r:(o=r,a=s,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=o[0]*a+.5|0,l[1]=o[1]*a+.5|0,l);var o,a,l}getTileCoordForTileUrlFunction(t,e){const i=void 0!==e?e:this.getProjection(),n=void 0!==e?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){const n=e[0],s=t.getTileCoordCenter(e),r=zy(i);if(!h(r,s)){const e=O(r),i=Math.ceil((r[0]-s[0])/e);return s[0]+=e*i,t.getTileCoordForCoordAndZ(s,n)}return e}(n,t,i)),function(t,e){const i=t[0],n=t[1],s=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const r=e.getFullTileRange(i);return!r||r.containsXY(n,s)}(t,n)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class Jy extends ai{constructor(t,e){super(t),this.tile=e}}var tw="tileloadstart",ew="tileloadend",iw="tileloaderror";class nw extends Zy{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===nw.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=fi(e),n=e.getState();let s;n==dg?(this.tileLoadingKeys_[i]=!0,s=tw):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==pg?iw:n==gg?ew:void 0),null!=s&&this.dispatchEvent(new Jy(s,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let r;for(r=n;r<=s;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(qy(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}}class sw extends nw{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:rw,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:_g,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!Ee(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Ee(e,t)))return this.tileGrid;const i=fi(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Gy(t)),this.tileGridForProjection[i]}createTile_(t,e,i,n,s,r){const o=[t,e,i],a=this.getTileCoordForTileUrlFunction(o,s),l=a?this.tileUrlFunction(a,n,s):void 0,A=new this.tileClass(o,void 0!==l?ug:fg,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return A.key=r,A.addEventListener(Ne,this.handleTileChange.bind(this)),A}getTile(t,e,i,n,s){const r=this.getProjection();if(!r||!s||Ee(r,s))return this.getTileInternal(t,e,i,n,r||s);const o=[t,e,i],a=this.getKey(),l=this.getTileGridForProjection(r),A=this.getTileGridForProjection(s),c=this.getTileCoordForTileUrlFunction(o,s),h=new Sy(r,l,s,A,o,c,this.getTilePixelRatio(n),this.getGutter(),((t,e,i,n)=>this.getTileInternal(t,e,i,n,r)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return h.key=a,h}getTileInternal(t,e,i,n,s){const r=this.getKey();return this.createTile_(t,e,i,n,s,r)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const i=_e(t);if(i){const t=fi(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}}function rw(t,e){t.getImage().src=e}class ow extends sw{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},i=e.extent||_e("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Vy(i,e.maxZoom,e.tileSize,e.maxResolution)};return new Hy(n)}({extent:zy(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}const aw="1.3.0";function lw(t,e,i,n,s,r,o){r=Object.assign({REQUEST:"GetMap"},r);const a=e/i,l=[q(O(t)/a,4),q(R(t)/a,4)];if(1!=i)switch(o){case"geoserver":const t=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+t:r.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:throw new Error("Unknown `serverType` configured")}const A=function(t,e,i,n,s){s.WIDTH=i[0],s.HEIGHT=i[1];const r=n.getAxisOrientation(),o=it(s.VERSION,"1.3")>=0;s[o?"CRS":"SRS"]=n.getCode();const a=o&&r.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return s.BBOX=a.join(","),Ky(t,s)}(s,t,l,n,r);return A}function Aw(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:aw,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}class cw extends ow{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",n=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}}const hw="layer-manager.js",uw=Object.freeze({name:"",isVisible:!0,isSilent:!1,disableFeatureLayerEditButton:!1,disableFeatureLayerDownloadButton:!1,disableFeatureLayerDeleteButton:!1}),dw=Object.freeze({isVisible:!0,isSilent:!1,disableMapLayerEditButton:!1,disableMapLayerDeleteButton:!1});class gw extends ig{static#pt;static#wt;static#vt=new ZA;static#bt={mapLayers:[],featureLayers:[]};static#Ct={mapLayers:[],featureLayers:[]};static async initAsync(t={}){return rg.logDebug(hw,"initAsync","Initialization started"),new Promise((t=>{t({filename:hw,result:!0})}))}static setMap(t){rg.logDebug(hw,"setMap",{info:"Handling map-queues for layers that were added before the map was ready",adding:{mapLayers:this.#bt.mapLayers.length,featureLayers:this.#bt.featureLayers.length}}),this.#pt=t,this.#xt(),this.#Bt()}static getName(){return hw}static#xt(){this.#bt.mapLayers.forEach((t=>{this.#Et(t.layerWrapper,t.options)})),this.#bt.mapLayers=[]}static#Bt(){this.#bt.featureLayers.forEach((t=>{this.#St(t.layerWrapper,t.options)})),this.#bt.featureLayers=[]}static#Ft(t){t.getLayer=function(){return this.layer},t.setLayer=function(t){this.layer=t},t.getName=function(){return this.name},t.setName=function(t){this.name=t},t.getId=function(){return this.id},t.setId=function(t){this.id=t}}static#It(t){return(t=t.trim()).length||(t="New layer"),t}static#Lt(t,e){for(let i=0;i<e.length;i++){const n=e[i],s=n.getLayer();if(!this.isVectorLayer(s))continue;const r=s.getSource().getFeatures();for(let e=0;e<r.length;e++)if(t===r[e])return n}}static#Mt(t){this.#pt.removeLayer(t.getLayer())}static#Tt(t,e){const i=e.getLayer(),n=py.getTooltip(t);n&&(i.getVisible()?n.setMap(this.#pt):n.setMap(null))}static addFeatureToLayer(t,e,i){const n=e.getLayer(),s=n.getSource();py.hasTooltip(t)&&this.#pt.addOverlay(py.getTooltip(t)),s.addFeature(t),this.#vt.push(t),this.#Tt(t,e),i&&!n.getVisible()&&Nm.info({i18nKey:i,autoremove:!0})}static removeFeatureFromLayer(t,e){const i=e.getLayer().getSource();py.hasTooltip(t)&&this.#pt.removeOverlay(py.getTooltip(t)),i.removeFeature(t),this.#vt.remove(t)}static getSnapFeatures(){return this.#vt}static clearSnapFeatures(){this.#vt=new ZA}static isVectorLayer(t){return t instanceof WA}static isVectorSource(t){return t instanceof gc}static getLayerFromFeature(t){const e=this.getLayerWrapperFromFeature(t);if(e)return e.getLayer()}static getLayerWrapperFromFeature(t){let e;return e=this.#Lt(t,this.#Ct.mapLayers),e||(e=this.#Lt(t,this.#Ct.featureLayers),e)}static#Rt(t){this.#Ct.mapLayers=this.#Ct.mapLayers.filter((e=>e.getId()!==t.getId()))}static#kt(t){const e=t.getLayer();this.isVectorLayer(e)&&e.getSource().getFeatures().forEach((t=>{this.#vt.remove(t)}))}static#Et(t,e){this.#Ct.mapLayers.push(t),this.#pt.addLayer(t.getLayer()),wm.dispatchCustomEvent([window],ep.custom.mapLayerAdded,{detail:{layerWrapper:t,isSilent:e.isSilent,disableMapLayerEditButton:e.disableMapLayerEditButton,disableMapLayerDeleteButton:e.disableMapLayerDeleteButton}})}static addMapLayers(t,e={}){for(let i in t)this.addMapLayer(t[i],e)}static addMapLayer(t,e={}){const i=Fh.merge(Fh.cloneDeep(dw),e);if(t.name=this.#It(t.name),rg.logDebug(hw,"addMapLayer",t.name),this.#Ft(t),t.isDynamicallyAdded||(t.isDynamicallyAdded=!1),!t.getId()){const e=N_();t.setId(e)}return this.#pt?this.#Et(t,i):this.#bt.mapLayers.push({layerWrapper:t,options:i}),t}static removeAllMapLayers(){this.#Ct.mapLayers.forEach((t=>{this.removeMapLayer(t)}))}static removeMapLayer(t,e=!1){rg.logDebug(hw,"removeMapLayer",t.getName()),this.#Rt(t),this.#kt(t),this.#Mt(t),wm.dispatchCustomEvent([window],ep.custom.mapLayerRemoved,{detail:{layerWrapper:t,isSilent:e}})}static hasMapLayerWithId(t){return!!this.getMapLayerById(t)}static getMapLayers(){return this.#Ct.mapLayers}static getMapLayerById(t){return this.#Ct.mapLayers.find((e=>e.getId()===t))}static getOLMapLayers(){const t=[];for(let e in this.#Ct.mapLayers)t.push(this.#Ct.mapLayers[e].getLayer());return t}static setTopMapLayerAsOnlyVisible(){this.#Ct.mapLayers.forEach((t=>{t.getLayer().setVisible(!1)})),this.isMapLayersEmpty()||this.#Ct.mapLayers[0].getLayer().setVisible(!0)}static getMapLayerSize(){return this.#Ct.mapLayers.length}static isMapLayersEmpty(){return 0===this.getMapLayerSize()}static setMapLayerZIndex(t,e){this.getMapLayerById(t).getLayer().setZIndex(1+e)}static belongsToMapLayer(t){return!!this.#Ct.mapLayers.find((e=>void 0!==e.getLayer().getSource().hasFeature&&e.getLayer().getSource().hasFeature(t)))}static#Ut(t){this.#Ct.featureLayers=this.#Ct.featureLayers.filter((e=>e.getId()!==t.getId()))}static#Dt(t){t.getLayer().getSource().getFeatures().forEach((t=>{this.#vt.remove(t),py.hasTooltip(t)&&this.#pt.removeOverlay(py.getTooltip(t))}))}static#St(t,e){this.#Ct.featureLayers.push(t),this.#pt.addLayer(t.getLayer()),wm.dispatchCustomEvent([window],ep.custom.featureLayerAdded,{detail:{layerWrapper:t,isSilent:e.isSilent,disableFeatureLayerEditButton:e.disableFeatureLayerEditButton,disableFeatureLayerDownloadButton:e.disableFeatureLayerDownloadButton,disableFeatureLayerDeleteButton:e.disableFeatureLayerDeleteButton}})}static#Ot(){return this.isFeatureLayersEmpty()?null:this.#Ct.featureLayers[this.#Ct.featureLayers.length-1]}static addFeatureLayer(t={}){const e=Fh.merge(Fh.cloneDeep(uw),t);e.name=this.#It(e.name),rg.logDebug(hw,"addFeatureLayer",e.name);const i={id:e.id,name:e.name,sortIndex:e.sortIndex,isDynamicallyAdded:e.isDynamicallyAdded,layer:new WA({source:new gc,visible:e.isVisible,style:function(t,e){return iy.getStyle(t,e)}})};if(this.#Ft(i),i.isDynamicallyAdded||(i.isDynamicallyAdded=!1),!i.getId()){const t=N_();i.setId(t)}return this.setActiveFeatureLayer(i),this.#pt?this.#St(i,e):this.#bt.featureLayers.push({layerWrapper:i,options:e}),i}static removeAllFeatureLayers(){this.#Ct.featureLayers.forEach((t=>{this.removeFeatureLayer(t)}))}static removeFeatureLayer(t,e=!1){rg.logDebug(hw,"removeFeatureLayer",t.getName()),this.#Ut(t),this.#Dt(t),this.#Mt(t),this.setNextActiveFeatureLayer(),wm.dispatchCustomEvent([window],ep.custom.featureLayerRemoved,{detail:{layerWrapper:t,isSilent:e}})}static getActiveFeatureLayer(t={}){return this.#wt||this.addFeatureLayer({name:t.fallback,isDynamicallyAdded:!0}),this.#wt}static setNextActiveFeatureLayer(){const t=this.#Ot();this.setActiveFeatureLayer(t)}static setActiveFeatureLayer(t){this.#wt=t,wm.dispatchCustomEvent([window],ep.custom.activeFeatureLayerChange,{detail:{layerWrapper:t}})}static hasFeatureLayerWithId(t){return!!this.getFeatureLayerById(t)}static getFeatureLayers(){return this.#Ct.featureLayers}static getFeatureLayerById(t){return this.#Ct.featureLayers.find((e=>e.getId()===t))}static removeFeatureFromFeatureLayers(t){this.getFeatureLayers().forEach((e=>{e.getLayer().getSource().removeFeature(t)}))}static getFeatureLayerSize(){return this.#Ct.featureLayers.length}static isFeatureLayersEmpty(){return 0===this.getFeatureLayerSize()}static setFeatureLayerZIndex(t,e){this.getFeatureLayerById(t).getLayer().setZIndex(1e6+e)}static belongsToFeatureLayer(t){return!!this.#Ct.featureLayers.find((e=>void 0!==e.getLayer().getSource().hasFeature&&e.getLayer().getSource().hasFeature(t)))}}const pw=new Map([[E_.mouseWheelZoom,{state:!1}],[E_.altShiftDragRotate,{state:!0}],[E_.dragPan,{state:!0}],[E_.keyboardZoom,{state:!0}],[E_.keyboardPan,{state:!0}],[E_.selectVectorMapShapes,{state:!1}],[E_.snapInteraction,{state:!0}],[E_.snapHelpLines,{state:!0}],[E_.alwaysNewLayers,{state:!1}]]),fw="settings-manager.js",mw=rp.settingsManager,_w=Object.freeze({});class yw extends ig{static#V;static#Pt;static async initAsync(t={}){return rg.logDebug(fw,"initAsync","Initialization started"),this.#V=this.#c(),this.#Pt=Fh.cloneDeep(pw),this.#Pt.forEach(((t,e)=>{t.i18nKey=e,t.i18nBase="managers.settingsManager.settings",e in this.#V&&(t.state=this.#V[e])})),new Promise((t=>{t({filename:fw,result:!0})}))}static setMap(t){}static getName(){return fw}static#c(){rg.logDebug(fw,"getBrowserData","Loading settings from browser");return sp.getAndMergeStateObject(mw,_w)}static clear(){this.#Pt=Fh.cloneDeep(pw)}static addSetting(t,e){const i=this.#V[t];void 0!==i&&(e.state=i),pw.set(t,Fh.cloneDeep(e)),this.#Pt.set(t,e)}static setSetting(t,e){this.#Pt.get(t).state=e,this.#V[t]=e,sp.setStateObject(mw,this.#V)}static getSetting(t){return this.#Pt.get(t).state}static getSettings(){return this.#Pt}}const ww="snap-manager.js",vw=Object.freeze([2,5]);class bw extends ig{static#pt;static#ot;static#Nt;static#Qt;static#Ht;static async initAsync(t={}){return rg.logDebug(ww,"initAsync","Initialization started"),this.#Nt=this.#Gt(),this.#Qt=this.#Vt(),this.#Qt.on(ep.openLayers.snap,this.#zt.bind(this)),this.#Qt.on(ep.openLayers.unSnap,this.#Kt.bind(this)),new Promise((t=>{t({filename:ww,result:!0})}))}static setMap(t){this.#pt=t}static getName(){return ww}static#Gt(){return new WA({zIndex:1e9,source:new gc,style:new zo({stroke:new Vo({color:"#EB4542FF",lineDash:vw,width:2})})})}static#Vt(){const t=gw.getSnapFeatures();return new dh({features:t,pixelTolerance:10,edge:!0,vertex:!0,intersection:!0})}static#zt(t){this.isSnapLine(t.feature)||this.#ot.onSnap(t)}static#Kt(t){this.isSnapLine(t.feature)||this.#ot.onUnSnap(t)}static#jt(t){this.#Wt(t)}static#$t(){return yw.getSetting(E_.snapInteraction)}static#Yt(){return yw.getSetting(E_.snapHelpLines)}static#Xt(t,e,i){const[n,s]=t,[r,o]=e,a=Math.abs(n-r)<=i;return Math.abs(s-o)<=i?[n,o]:a?[r,s]:null}static#Wt(t){const e=t.coordinate,i=gw.getSnapFeatures(),n=10*this.#pt.getView().getResolution();this.#qt();const s=this.#Nt.getSource(),r=[];i.forEach((t=>{Y_(t.getGeometry().getCoordinates()).forEach((t=>{const i=this.#Xt(e,t,n);if(i){const e=new cs({geometry:new ys([t,i]),oltb:{type:$_.type.snapLine}});r.push(e)}}))})),r.forEach((t=>{s.addFeature(t),this.#Qt.addFeature(t)}))}static#qt(){const t=this.#Nt.getSource();t.getFeatures().forEach((t=>{this.#Qt.removeFeature(t)})),t.clear()}static isSnapLine(t){return Fh.get(t.getProperties(),["oltb","type"],void 0)===$_.type.snapLine}static addSnap(t){const e=this.#$t(),i=this.#Yt();rg.logDebug(ww,"addSnap",{info:"Snap interaction requested",isEnabled:e,useSnapHelpLines:i,requestedBy:t.getName()}),e&&(this.#ot=t,this.#pt.addInteraction(this.#Qt),this.#Yt()&&(this.#pt.addLayer(this.#Nt),this.#Ht=this.#pt.on(ep.openLayers.pointerMove,this.#jt.bind(this))))}static removeSnap(){this.#ot=void 0,this.#pt.removeLayer(this.#Nt),this.#pt.removeInteraction(this.#Qt),this.#qt(),di(this.#Ht)}static getActivatedBy(){return this.#ot}static hasActiveTool(){return!!this.getActivatedBy()}static getInteraction(){return this.#Qt}}const Cw="error-manager.js";class xw extends ig{static async initAsync(t={}){return rg.logDebug(Cw,"initAsync","Initialization started"),window.addEventListener(ep.browser.error,this.#Zt),new Promise((t=>{t({filename:Cw,result:!0})}))}static setMap(t){}static getName(){return Cw}static#Zt(t){t.preventDefault(),window.console.error(t),rg.logFatal(Cw,"onError",{info:"Global uncaught error",error:t.error}),Nm.error({i18nKey:"managers.errorManager.toasts.errors.uncaughtException"})}}const Bw="tooltip-manager.js",Ew="oltb-overlay-tooltip";class Sw extends ig{static#pt;static#Jt;static#Ht;static#te;static#ee={};static async initAsync(t={}){return rg.logDebug(Bw,"initAsync","Initialization started"),this.#Jt=this.#ie(),new Promise((t=>{t({filename:Bw,result:!0})}))}static setMap(t){this.#pt=t}static getName(){return Bw}static#ie(){const t=Jg.getConfig().overlayOffset,e=tp.createElement({element:"div",class:Ew});return new Wg({stopEvent:!1,element:e,positioning:"bottom-center",offset:[t.horizontal,t.vertical]})}static#jt(t){this.#Jt.setPosition(t.coordinate)}static#ne(t){this.#Jt.setPosition(t.coordinate)}static getTooltips(){return this.#ee}static getSize(){return Object.keys(this.#ee).length}static isEmpty(){return 0===this.getSize()}static getTooltip(t){return this.#ee[t]}static push(t){const e=tp.createElement({element:"span",class:`${Ew}__item`});return this.isEmpty()&&(this.#pt.addOverlay(this.#Jt),this.#Ht=this.#pt.on(ep.openLayers.pointerMove,this.#jt.bind(this)),this.#te=this.#pt.on(ep.openLayers.moveEnd,this.#ne.bind(this))),this.#ee[t]=e,this.#Jt.getElement().prepend(e),e}static pop(t){const e=this.#ee[t];return this.#Jt.getElement().removeChild(e),delete this.#ee[t],this.isEmpty()&&(di(this.#Ht),di(this.#te),this.#pt.removeOverlay(this.#Jt),this.#Jt.setPosition(null)),e}}const Fw="bootstrap-manager.js";class Iw extends ig{static#se=[];static async initAsync(t=[]){rg.logInformation(Fw,"initAsync","Manager initialization started");const e=Jg.getConfig(),i=e.toolbar.version,n=e.openLayers.version;window.document.documentElement.setAttribute("ol-version",n),window.document.documentElement.setAttribute("oltb-version",i),rg.logInformation(Fw,"initAsync",`Running OL version ${n}`),rg.logInformation(Fw,"initAsync",`Running OLTB version ${i}`);const s=[];for(const e of t){const t=e.manager,i=e.options||{};this.#se.push(t);const n=await t.initAsync(i);s.push(n)}rg.logInformation(Fw,"initAsync","Manager initialization ended"),rg.logInformation(Fw,"initAsync",s)}static setMap(t){rg.logInformation(Fw,"setMap","OL is ready to use"),this.#se.forEach((e=>{e.setMap(t)}))}static getName(){return Fw}static ready(){rg.logInformation(Fw,"ready","OLTB is ready to use"),wm.dispatchEvent([window],ep.custom.ready)}}const Lw=Object.freeze({idPrefix:"",idPostfix:"",text:"",value:"",placeholder:""}),Mw=function(t={}){t=Fh.merge(Fh.cloneDeep(Lw),t);const e=tp.createElement({element:"div",class:"oltb-mt-0625"}),i=tp.createElement({element:"label",text:t.text,class:"oltb-label",attributes:{for:`${t.idPrefix}${t.idPostfix}`}}),n=tp.createElement({element:"input",id:`${t.idPrefix}${t.idPostfix}`,class:"oltb-input",value:t.value,attributes:{type:"text",placeholder:t.placeholder}});return tp.appendChildren(e,[i,n]),[e,n]},Tw=Object.freeze({idPrefix:"",idPostfix:"",text:"",options:[],value:void 0}),Rw=function(t={}){t=Fh.merge(Fh.cloneDeep(Tw),t);const e=tp.createElement({element:"div",class:"oltb-mt-0625"}),i=tp.createElement({element:"label",text:t.text,class:"oltb-label",attributes:{for:`${t.idPrefix}${t.idPostfix}`}}),n=tp.createElement({element:"select",id:`${t.idPrefix}${t.idPostfix}`,class:"oltb-select"});return t.options.forEach((t=>{const e=tp.createElement({element:"option",text:t.text,value:t.value});tp.appendChildren(n,[e])})),t.value?n.value=t.value:t.options.length>0?n.value=t.options[0].value:n.value="",tp.appendChildren(e,[i,n]),[e,n]},kw="oltb-color-input",Uw=Object.freeze({idPrefix:"",idPostfix:"",text:"",color:""}),Dw=function(t={}){t=Fh.merge(Fh.cloneDeep(Uw),t);const e=tp.createElement({element:"div",class:"oltb-mt-0625"}),i=tp.createElement({element:"label",text:t.text,class:"oltb-label",attributes:{for:`${t.idPrefix}${t.idPostfix}`}}),n=tp.createElement({element:"div",id:`${t.idPrefix}${t.idPostfix}`,class:`${kw} oltb-color-tippy`,attributes:{tabindex:0,"data-oltb-color-target":`#${t.idPrefix}${t.idPostfix}`,"data-oltb-color":t.color}}),s=tp.createElement({element:"div",class:`${kw}__inner`,style:{"background-color":`${t.color}`}});return tp.appendChildren(n,[s]),tp.appendChildren(e,[i,n]),[e,n]},Ow="oltb-marker-modal-marker",Pw="modalExtensions.iconMarkerModal",Nw=Object.freeze({edit:!1,coordinates:[0,0],title:"Marker",description:"",marker:Object.freeze({fill:"#0166A5FF",stroke:"#0166A566"}),icon:Object.freeze({key:"geoPin.filled",fill:"#FFFFFFFF",stroke:"#FFFFFFFF"}),label:Object.freeze({text:"Marker",fill:"#FFFFFF",stroke:"#3B4352CC",strokeWidth:8}),maxLabelStrokeWidth:24,onCreate:void 0,onCancel:void 0});class Qw extends Xm{#re=[];constructor(t={}){super({filename:"icon-marker-modal.js",title:Mm.get(`${Pw}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(Nw),t),this.#oe()}getName(){return super.getName()}#oe(){const t=Mm.get(`${Pw}.form`),[e,i]=Mw({idPrefix:Ow,idPostfix:"-title",text:t.title,value:this.options.title}),[n,s]=Mw({idPrefix:Ow,idPostfix:"-description",text:t.description,value:this.options.description}),[r,o]=Mw({idPrefix:Ow,idPostfix:"-lat",text:t.latitude,value:this.options.coordinates[1]}),[a,l]=Mw({idPrefix:Ow,idPostfix:"-lon",text:t.longitude,value:this.options.coordinates[0]}),A=tp.createElement({element:"div",class:"oltb-group"}),[c,h]=Dw({idPrefix:Ow,idPostfix:"-marker-fill",text:t.markerFill,color:this.options.marker.fill}),[u,d]=Dw({idPrefix:Ow,idPostfix:"-marker-stroke",text:t.markerStroke,color:this.options.marker.stroke});tp.appendChildren(A,[c,u]);const g=[];for(const t in Gm)for(const e in Gm[t])g.push({text:`${t.capitalize()} | ${e}`,value:`${t}.${e}`});const[p,f]=Rw({idPrefix:Ow,idPostfix:"-icon",text:t.icon,options:g,value:this.options.icon.key}),m=tp.createElement({element:"div",class:"oltb-group"}),[_,y]=Dw({idPrefix:Ow,idPostfix:"-icon-fill",text:t.iconFill,color:this.options.icon.fill}),[w,v]=Dw({idPrefix:Ow,idPostfix:"-icon-stroke",text:t.iconStroke,color:this.options.icon.stroke});tp.appendChildren(m,[_,w]);const[b,C]=Mw({idPrefix:Ow,idPostfix:"-label",text:t.label,value:this.options.label.text}),x=tp.createElement({element:"div",class:"oltb-group"}),[B,E]=Dw({idPrefix:Ow,idPostfix:"-label-fill",text:t.labelFill,color:this.options.label.fill}),[S,F]=Dw({idPrefix:Ow,idPostfix:"-label-stroke",text:t.labelStroke,color:this.options.label.stroke});tp.appendChildren(x,[B,S]);const I=[];for(let t=1;t<=this.options.maxLabelStrokeWidth;t++)I.push({text:t,value:t});const[L,M]=Rw({idPrefix:Ow,idPostfix:"-label-stroke-width",text:t.labelStrokeWidth,options:I,value:this.options.label.strokeWidth}),T=tp.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),R=tp.createElement({element:"button",text:`${this.options.edit?t.saveChanges:t.createMarker}`,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#ae({latitude:parseFloat(o.value.trim()),longitude:parseFloat(l.value.trim()),title:i.value.trim(),description:s.value.trim(),icon:f.value.trim(),iconFill:y.getAttribute("data-oltb-color"),iconStroke:v.getAttribute("data-oltb-color"),markerFill:h.getAttribute("data-oltb-color"),markerStroke:d.getAttribute("data-oltb-color"),label:C.value.trim(),labelFill:E.getAttribute("data-oltb-color"),labelStroke:F.getAttribute("data-oltb-color"),labelStrokeWidth:M.value.trim()})}}}),k=tp.createElement({element:"button",text:t.cancel,class:"oltb-dialog__btn oltb-btn "+(o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(T,[k,R]);const U=tp.createElement({element:"div",class:"oltb-modal__content"});tp.appendChildren(U,[e,n,r,a,A,p,m,b,x,L,T]),this.#re=[k,R],this.show(U)}#ae(t){this.close(),this.options.onCreate&&this.options.onCreate(t)}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#re}}const Hw="oltb-info-window-marker",Gw="oltb-func-btn",Vw="commons",zw=function(t,e){const i=Xg.toolbar.id,n=e.get(i),s=Jg.getConfig().projection;return new Qw({edit:!0,coordinates:Le(e.getGeometry().getCoordinates(),s.default,s.wgs84),title:n.title,description:n.description,marker:{fill:n.marker.fill,stroke:n.marker.stroke},icon:{key:n.icon.key,fill:n.icon.fill,stroke:n.icon.stroke},label:{text:n.label.text,fill:n.label.fill,stroke:n.label.stroke,strokeWidth:n.label.strokeWidth},onCreate:i=>{Kw(t,e,i)}})},Kw=function(t,e,i){t.hideOverlay(),gw.removeFeatureFromFeatureLayers(e);const n=Mm.get(`${Vw}.titles`),s=[i.longitude,i.latitude],r=ct(s),o={title:i.title,content:`\n            <p>${i.description}</p>\n        `,footer:`\n            <span class="oltb-info-window__coordinates">${r}</span>\n            <div class="oltb-info-window__buttons-wrapper">\n                <button class="${Gw} ${Gw}--delete oltb-tippy" data-oltb-i18n="${Vw}.titles.delete" title="${n.delete}" id="${Hw}-remove"></button>\n                <button class="${Gw} ${Gw}--crosshair oltb-tippy" data-oltb-i18n="${Vw}.titles.copyCoordinates" title="${n.copyCoordinates}" id="${Hw}-copy-coordinates" data-oltb-coordinates="${r}"></button>\n                <button class="${Gw} ${Gw}--copy oltb-tippy" data-oltb-i18n="${Vw}.titles.copyText" title="${n.copyText}" id="${Hw}-copy-text" data-oltb-copy="${i.title} ${i.description}"></button>\n                <button class="${Gw} ${Gw}--edit oltb-tippy" data-oltb-i18n="${Vw}.titles.edit" title="${n.edit}" id="${Hw}-edit"></button>\n                <button class="${Gw} ${Gw}--layer oltb-tippy" data-oltb-i18n="${Vw}.titles.showLayer" title="${n.showLayer}" id="${Hw}-show-layer"></button>\n            </div>\n        `},a=py.generateIconMarker({lon:s[0],lat:s[1],title:i.title,description:i.description,infoWindow:o,marker:{fill:i.markerFill,stroke:i.markerStroke},icon:{key:i.icon,fill:i.iconFill,stroke:i.iconStroke},label:{text:i.label,fill:i.labelFill,stroke:i.labelStroke,strokeWidth:i.labelStrokeWidth}});var l;l=a,gw.getActiveFeatureLayer({fallback:"Markers"}).getLayer().getSource().addFeature(l),wm.dispatchCustomEvent([window],ep.custom.featureEdited,{detail:{before:e,after:a}})},jw=function(t,e){const i=Mm.get("managers.infoWindowManager.dialogs.confirms.deleteMarker");return B_.confirm({title:i.title,message:i.message,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:()=>{t.hideOverlay(),gw.removeFeatureFromFeatureLayers(e),wm.dispatchCustomEvent([window],ep.custom.featureRemoved,{detail:{feature:e}})}})},Ww="show-marker-layer.js",$w=function(t,e){const i=gw.getLayerWrapperFromFeature(e);if(!i)return void rg.logWarning(Ww,"showMarkerLayer","No layer found");const n=window.document.querySelector(`[data-oltb-id='${i.getId()}']`);n?tp.flashClass(n,"oltb-toolbox-list__item--indicate"):rg.logWarning(Ww,"showMarkerLayer","No layer-element found")},Yw=Object.freeze({100:"FF",99:"FC",98:"FA",97:"F7",96:"F5",95:"F2",94:"F0",93:"ED",92:"EB",91:"E8",90:"E6",89:"E3",88:"E0",87:"DE",86:"DB",85:"D9",84:"D6",83:"D4",82:"D1",81:"CF",80:"CC",79:"C9",78:"C7",77:"C4",76:"C2",75:"BF",74:"BD",73:"BA",72:"B8",71:"B5",70:"B3",69:"B0",68:"AD",67:"AB",66:"A8",65:"A6",64:"A3",63:"A1",62:"9E",61:"9C",60:"99",59:"96",58:"94",57:"91",56:"8F",55:"8C",54:"8A",53:"87",52:"85",51:"82",50:"80",49:"7D",48:"7A",47:"78",46:"75",45:"73",44:"70",43:"6E",42:"6B",41:"69",40:"66",39:"63",38:"61",37:"5E",36:"5C",35:"59",34:"57",33:"54",32:"52",31:"4F",30:"4D",29:"4A",28:"47",27:"45",26:"42",25:"40",24:"3D",23:"3B",22:"38",21:"36",20:"33",19:"30",18:"2E",17:"2B",16:"29",15:"26",14:"24",13:"21",12:"1F",11:"1C",10:"1A",9:"17",8:"14",7:"12",6:"0F",5:"0D",4:"0A",3:"08",2:"05",1:"03",0:"00"}),Xw=async function(t=""){const e=t.trim();if(window.navigator.clipboard&&window.isSecureContext)await window.navigator.clipboard.writeText(e);else{const t=tp.createElement({element:"textarea",value:e,style:{position:"absolute",left:"-999999px",opacity:0}});window.document.body.prepend(t),t.select();try{window.document.execCommand("copy")}finally{t.remove()}}},qw="managers.infoWindowManager",Zw=async function(t,e){try{await Xw(e),Nm.info({i18nKey:`${qw}.toasts.infos.copyMarkerInfo`,autoremove:!0})}catch(t){rg.logError("copy-marker-info.js","copyMarkerInfoAsync",{message:"Failed to copy Marker info",error:t}),Nm.error({i18nKey:`${qw}.toasts.errors.copyMarkerInfo`})}},Jw="managers.infoWindowManager",tv=async function(t,e){try{await Xw(e),Nm.info({i18nKey:`${Jw}.toasts.infos.copyMarkerCoordinates`,autoremove:!0})}catch(t){rg.logError("copy-marker-coordinates.js","copyMarkerCoordinatesAsync",{message:"Failed to copy Marker coordinates",error:t}),Nm.error({i18nKey:`${Jw}.toasts.errors.copyMarkerCoordinates`})}},ev="info-window-manager.js",iv="oltb-animation",nv=`${iv}--centered-bounce`,sv="oltb-info-window",rv="oltb-info-window-marker",ov=Object.freeze({default:"default",pointer:"pointer"}),av=[$_.type.iconMarker],lv=new zo({fill:new Qo({color:"#254372AA"}),stroke:new Vo({color:"#369ACDFF",width:1.5})});class Av extends ig{static#pt;static#le;static#Ae;static#ce;static#he;static#ue;static#de;static#ge;static#pe;static async initAsync(t={}){return rg.logDebug(ev,"initAsync","Initialization started"),this.#fe(),new Promise((t=>{t({filename:ev,result:!0})}))}static setMap(t){this.#pt=t,this.#pt.addOverlay(this.#Ae),this.#pt.on(ep.openLayers.singleClick,this.#me.bind(this)),this.#pt.on(ep.openLayers.pointerMove,this.#jt.bind(this))}static getName(){return ev}static#fe(){this.#le=tp.createElement({element:"div",class:`${sv} ${iv}`,attributes:{tabindex:"-1"},listeners:{keydown:Hm}});const t=tp.createElement({element:"div",class:`${sv}__header`});this.#ce=tp.createElement({element:"h3",class:`${sv}__title`});const e=tp.createElement({element:"button",html:zm({path:Gm.close.stroked,fill:"none",stroke:"currentColor",strokeWidth:1}),class:`${sv}__close oltb-btn oltb-btn--blank`,listeners:{click:this.hideOverlay.bind(this)}});this.#he=tp.createElement({element:"div",class:`${sv}__content`}),this.#ue=tp.createElement({element:"div",class:`${sv}__footer oltb-hide-scrollbars`}),tp.appendChildren(t,[this.#ce,e]),tp.appendChildren(this.#le,[t,this.#he,this.#ue]);const i=Jg.getConfig();this.#Ae=new Wg({element:this.#le,positioning:"bottom-center",offset:[i.overlayOffset.horizontal,i.overlayOffset.vertical],autoPan:!0,autoPanAnimation:{duration:i.animationDuration.normal}})}static#me(t){const e=this.#pt.forEachFeatureAtPixel(t.pixel,(function(t,e){return[t,e]}));e?this.#_e(e):this.#ye()}static#jt(t){const e=this.#pt.forEachFeatureAtPixel(t.pixel,(function(t){return t}));this.#we(e),e?this.#ve(t,e):this.setViewportCursor(ov.default)}static#ye(){this.hideOverlay(),this.deselectFeature(),this.deselectHoveredVectorSection(),this.deselectVectorSection()}static#_e(t){const[e,i]=t;this.tryPulseAnimation(e,i);const n=py.hasInfoWindow(e);n?(this.showOverlay(e),this.deselectVectorSection()):(this.hideOverlay(),this.deselectVectorSection());const s=py.shouldHighlightOnHover(e);n&&s&&this.selectVectorSection(e)}static#ve(t,e){py.shouldHighlightOnHover(e)&&this.selectHoveredVectorSection(e);const i=t.originalEvent.target.nodeName;py.hasInfoWindow(e)&&"CANVAS"===i?this.setViewportCursor(ov.pointer):this.setViewportCursor(ov.default)}static#we(t){t||this.#ge||(this.deselectHoveredVectorSection(),this.deselectVectorSection()),this.#pe&&this.#pe!==t&&this.#pe!==this.#ge&&this.deselectHoveredVectorSection()}static#be(t,e,i,n){this.selectFeature(t);const s=Date.now(),r=this.getAnimationColor(i),o=this.getAnimationMin(i),a=this.getAnimationMax(i),l=n.duration,A=n.shouldLoop,c=n.strokeWidth,h=t.getGeometry().clone(),u=e.on(ep.openLayers.postRender,function(d){const g=d.frameState.time-s;if(g>=l||!this.#de)return di(u),void(py.isSameFeature(this.#de,t)&&A&&this.#be(t,e,i,n));const p=ag(d),f=g/l,m=wi(f)*a+o,_=wi(1-f),y=Math.round(100*_),w=Yw[y],v=new zo({image:new No({radius:m,stroke:new Vo({color:`${r.slice(0,-2)}${w}`,width:c+_})})});p.setStyle(v),p.drawGeometry(h),this.#pt.render()}.bind(this));this.#pt.render()}static#Ce(t){const e=this.#ue.querySelector(`#${rv}-remove`);e&&e.addEventListener(ep.browser.click,jw.bind(this,Av,t));const i=this.#ue.querySelector(`#${rv}-copy-coordinates`);if(i){const t=i.getAttribute("data-oltb-coordinates");i.addEventListener(ep.browser.click,tv.bind(this,Av,t))}const n=this.#ue.querySelector(`#${rv}-copy-text`);if(n){const t=n.getAttribute("data-oltb-copy");n.addEventListener(ep.browser.click,Zw.bind(this,Av,t))}const s=this.#ue.querySelector(`#${rv}-edit`);s&&s.addEventListener(ep.browser.click,zw.bind(this,Av,t));const r=this.#ue.querySelector(`#${rv}-show-layer`);r&&r.addEventListener(ep.browser.click,$w.bind(this,Av,t))}static tryPulseAnimation(t,e){const i=Xg.toolbar.id,n=t.get(i),s=Jg.getConfig().marker.pulseAnimation;n&&av.includes(n.type)&&s.isEnabled&&(e||(e=gw.getLayerFromFeature(t)),e?this.#de&&py.isSameFeature(this.#de,t)||this.#be(t,e,n,s):rg.logWarning(ev,"pulseAnimation",{info:"No layer found for feature",featureId:fi(t)}))}static showOverlay(t,e){this.showOverlayDelayed(t,e,0)}static showOverlayDelayed(t,e,i=Jg.getConfig().animationDuration.normal){window.setTimeout((()=>{const i=py.getInfoWindow(t);i&&this.doShowOverlayWithResult(i,t,e)}),i)}static doShowOverlayWithResult(t,e,i){this.#ce.innerHTML=t.title,this.#he.innerHTML=t.content,this.#ue.innerHTML=t.footer,i?this.#Ae.setPosition(i):this.#Ae.setPosition(I(e.getGeometry().getExtent())),this.#Ce(e),this.#le.focus(),tp.runAnimation(this.#le,nv)}static hideOverlay(){this.deselectFeature(),this.deselectHoveredVectorSection(),this.deselectVectorSection(),tp.clearElements([this.#ce,this.#he,this.#ue]),this.#Ae.setPosition(void 0)}static getAnimationMin(t){return Fh.has(t,["marker"])?t.marker.radius:Xg.marker.pulseAnimation.defaultStartSize}static getAnimationMax(t){return Fh.has(t,["marker"])?t.marker.radius+t.marker.radius/2:Xg.marker.pulseAnimation.defaultEndSize}static getAnimationColor(t){return Fh.has(t,["marker"])?t.marker.fill:Fh.has(t,["icon"])?t.icon.stroke:Xg.marker.pulseAnimation.defaultColor}static isContentEmpty(){return 0===this.#he.innerHTML.length}static getInfoWindow(){return this.#le}static setViewportCursor(t){this.#pt.getViewport().style.cursor=t}static getViewportCursor(){return this.#pt.getViewport().style.cursor}static selectFeature(t){this.#de=t,this.deselectVectorSection()}static deselectFeature(){this.#de=void 0}static isFeatureSelected(){return!!this.#de}static selectHoveredVectorSection(t){t?.setStyle(lv),this.#pe=t}static deselectHoveredVectorSection(){this.#pe?.setStyle(null),this.#pe=void 0}static isHoveredVectorSectionSelected(){return!!this.#pe}static selectVectorSection(t){t?.setStyle(lv),this.#ge=t,this.deselectFeature()}static deselectVectorSection(){this.#ge?.setStyle(null),this.#ge=void 0}static isVectorSectionSelected(){return!!this.#ge}}var cv=6378137,hv=.0066943799901413165,uv=484813681109536e-20,dv=Math.PI/2,gv=1e-10,pv=.017453292519943295,fv=57.29577951308232,mv=Math.PI/4,_v=2*Math.PI,yv=3.14159265359,wv={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},vv={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},bv=/[\s_\-\/\(\)]/g;function Cv(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),s=e.toLowerCase().replace(bv,""),r=-1;++r<n.length;)if((i=n[r]).toLowerCase().replace(bv,"")===s)return t[i]}function xv(t){var e,i,n,s={},r=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){s.rf=parseFloat(t)},lat_0:function(t){s.lat0=t*pv},lat_1:function(t){s.lat1=t*pv},lat_2:function(t){s.lat2=t*pv},lat_ts:function(t){s.lat_ts=t*pv},lon_0:function(t){s.long0=t*pv},lon_1:function(t){s.long1=t*pv},lon_2:function(t){s.long2=t*pv},alpha:function(t){s.alpha=parseFloat(t)*pv},gamma:function(t){s.rectified_grid_angle=parseFloat(t)},lonc:function(t){s.longc=t*pv},x_0:function(t){s.x0=parseFloat(t)},y_0:function(t){s.y0=parseFloat(t)},k_0:function(t){s.k0=parseFloat(t)},k:function(t){s.k0=parseFloat(t)},a:function(t){s.a=parseFloat(t)},b:function(t){s.b=parseFloat(t)},r:function(t){s.a=s.b=parseFloat(t)},r_a:function(){s.R_A=!0},zone:function(t){s.zone=parseInt(t,10)},south:function(){s.utmSouth=!0},towgs84:function(t){s.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){s.to_meter=parseFloat(t)},units:function(t){s.units=t;var e=Cv(vv,t);e&&(s.to_meter=e.to_meter)},from_greenwich:function(t){s.from_greenwich=t*pv},pm:function(t){var e=Cv(wv,t);s.from_greenwich=(e||parseFloat(t))*pv},nadgrids:function(t){"@null"===t?s.datumCode="none":s.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(s.axis=t)},approx:function(){s.approx=!0}};for(e in r)i=r[e],e in o?"function"==typeof(n=o[e])?n(i):s[n]=i:s[e]=i;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var Bv=/\s/,Ev=/[A-Za-z]/,Sv=/[A-Za-z84_]/,Fv=/[,\]]/,Iv=/[\d\.E\-\+]/;function Lv(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Mv(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,s=i.reduce((function(t,e){return Tv(e,t),t}),n);e&&(t[e]=s)}function Tv(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void Tv(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Tv(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Tv(t[3],e[i]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void Mv(e,i,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],Mv(e,i,t),void(e[i].type=i);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return Tv(t,e[i]);return Mv(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}Lv.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Bv.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Lv.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Fv.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Lv.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Lv.prototype.number=function(t){if(!Iv.test(t)){if(Fv.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Lv.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Lv.prototype.keyword=function(t){if(Sv.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Fv.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Lv.prototype.neutral=function(t){if(Ev.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Iv.test(t))return this.word=t,void(this.state=3);if(!Fv.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Lv.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Rv=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function kv(t){return.017453292519943295*t}function Uv(t){for(var e=Object.keys(t),i=0,n=e.length;i<n;++i){var s=e[i];-1!==Rv.indexOf(s)&&Dv(t[s]),"object"==typeof t[s]&&Uv(t[s])}}function Dv(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var i="",n=0,s=t.AXIS.length;n<s;++n){var r=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?i+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?i+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?i+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(i+="w")}2===i.length&&(i+="u"),3===i.length&&(t.axis=i)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",kv],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",kv],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",kv],["lat0","latitude_of_origin",kv],["lat0","standard_parallel_1",kv],["lat1","standard_parallel_1",kv],["lat2","standard_parallel_2",kv],["azimuth","Azimuth"],["alpha","azimuth",kv],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=kv(t.lat0>0?90:-90)):(t.lat0=kv(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function Ov(t){var e=new Lv(t).output(),i=e[0],n={};return Tv(e,n),Uv(n),n[i]}function Pv(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?Pv[t]=xv(arguments[1]):Pv[t]=Ov(arguments[1]):Pv[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Pv.apply(e,t):Pv(t)}));if("string"==typeof t){if(t in Pv)return Pv[t]}else"EPSG"in t?Pv["EPSG:"+t.EPSG]=t:"ESRI"in t?Pv["ESRI:"+t.ESRI]=t:"IAU2000"in t?Pv["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Pv);var Nv=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Qv=["3857","900913","3785","102113"];function Hv(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Pv}(t))return Pv[t];if(function(t){return Nv.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Ov(t);if(function(t){var e=Cv(t,"authority");if(e){var i=Cv(e,"epsg");return i&&Qv.indexOf(i)>-1}}(e))return Pv["EPSG:3857"];var i=function(t){var e=Cv(t,"extension");if(e)return Cv(e,"proj4")}(e);return i?xv(i):e}return function(t){return"+"===t[0]}(t)?xv(t):void 0}function Gv(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}function Vv(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function zv(t){return t<0?-1:1}function Kv(t){return Math.abs(t)<=yv?t:t-zv(t)*_v}function jv(t,e,i){var n=t*i,s=.5*t;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(dv-e))/n}function Wv(t,e){for(var i,n,s=.5*t,r=dv-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(r),r+=n=dv-2*Math.atan(e*Math.pow((1-i)/(1+i),s))-r,Math.abs(n)<=1e-10)return r;return-9999}var $v={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Vv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,n=t.x,s=t.y;if(s*fv>90&&s*fv<-90&&n*fv>180&&n*fv<-180)return null;if(Math.abs(Math.abs(s)-dv)<=gv)return null;if(this.sphere)e=this.x0+this.a*this.k0*Kv(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(mv+.5*s));else{var r=Math.sin(s),o=jv(this.e,s,r);e=this.x0+this.a*this.k0*Kv(n-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n=t.x-this.x0,s=t.y-this.y0;if(this.sphere)i=dv-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var r=Math.exp(-s/(this.a*this.k0));if(-9999===(i=Wv(this.e,r)))return null}return e=Kv(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Yv(t){return t}var Xv=[$v,{init:function(){},forward:Yv,inverse:Yv,names:["longlat","identity"]}],qv={},Zv=[];function Jv(t,e){var i=Zv.length;return t.names?(Zv[i]=t,t.names.forEach((function(t){qv[t.toLowerCase()]=i})),this):(console.log(e),!0)}var tb={start:function(){Xv.forEach(Jv)},add:Jv,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==qv[e]&&Zv[qv[e]]?Zv[qv[e]]:void 0}},eb={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ib=eb.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};eb.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var nb={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var sb in nb){var rb=nb[sb];nb[rb.datumName]=rb}var ob={};function ab(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:ob[t]||null,isNull:!1}}function lb(t){return t/3600*Math.PI/180}function Ab(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function cb(t){return t.map((function(t){return[lb(t.longitudeShift),lb(t.latitudeShift)]}))}function hb(t,e,i){return{name:Ab(t,e+8,e+16).trim(),parent:Ab(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function ub(t,e,i,n){for(var s=e+176,r=[],o=0;o<i.gridNodeCount;o++){var a={latitudeShift:t.getFloat32(s+16*o,n),longitudeShift:t.getFloat32(s+16*o+4,n),latitudeAccuracy:t.getFloat32(s+16*o+8,n),longitudeAccuracy:t.getFloat32(s+16*o+12,n)};r.push(a)}return r}function db(t,e){if(!(this instanceof db))return new db(t);e=e||function(t){if(t)throw t};var i=Hv(t);if("object"==typeof i){var n=db.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var s=Cv(nb,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var r=function(t,e,i,n,s){if(!t){var r=Cv(eb,n);r||(r=ib),t=r.a,e=r.b,i=r.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<gv)&&(s=!0,e=t),{a:t,b:e,rf:i,sphere:s}}(i.a,i.b,i.rf,i.ellps,i.sphere),o=function(t,e,i,n){var s=t*t,r=e*e,o=(s-r)/s,a=0;return n?(s=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):a=Math.sqrt(o),{es:o,e:a,ep2:(s-r)/r}}(r.a,r.b,r.rf,i.R_A),a=function(t){return void 0===t?null:t.split(",").map(ab)}(i.nadgrids),l=i.datum||function(t,e,i,n,s,r,o){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=uv,a.datum_params[4]*=uv,a.datum_params[5]*=uv,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=3,a.grids=o),a.a=i,a.b=n,a.es=s,a.ep2=r,a}(i.datumCode,i.datum_params,r.a,r.b,o.es,o.ep2,a);Gv(this,i),Gv(this,n),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}function gb(t,e,i){var n,s,r,o,a=t.x,l=t.y,A=t.z?t.z:0;if(l<-dv&&l>-1.001*dv)l=-dv;else if(l>dv&&l<1.001*dv)l=dv;else{if(l<-dv)return{x:-1/0,y:-1/0,z:t.z};if(l>dv)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),s=Math.sin(l),o=Math.cos(l),r=s*s,{x:((n=i/Math.sqrt(1-e*r))+A)*o*Math.cos(a),y:(n+A)*o*Math.sin(a),z:(n*(1-e)+A)*s}}function pb(t,e,i,n){var s,r,o,a,l,A,c,h,u,d,g,p,f,m,_,y=1e-12,w=t.x,v=t.y,b=t.z?t.z:0;if(s=Math.sqrt(w*w+v*v),r=Math.sqrt(w*w+v*v+b*b),s/i<y){if(m=0,r/i<y)return _=-n,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(v,w);o=b/r,h=(a=s/r)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),u=o*l,f=0;do{f++,A=e*(c=i/Math.sqrt(1-e*u*u))/(c+(_=s*h+b*u-c*(1-e*u*u))),p=(g=o*(l=1/Math.sqrt(1-A*(2-A)*a*a)))*h-(d=a*(1-A)*l)*u,h=d,u=g}while(p*p>1e-24&&f<30);return{x:m,y:Math.atan(g/Math.abs(d)),z:_}}function fb(t){return 1===t||2===t}function mb(t,e,i){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return i;if(5===t.datum_type||5===e.datum_type)return i;var n=t.a,s=t.es;if(3===t.datum_type){if(0!==_b(t,!1,i))return;n=cv,s=hv}var r=e.a,o=e.b,a=e.es;if(3===e.datum_type&&(r=cv,o=6356752.314,a=hv),s===a&&n===r&&!fb(t.datum_type)&&!fb(e.datum_type))return i;if((i=gb(i,s,n),fb(t.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(2===e){var n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5],A=i[6];return{x:A*(t.x-l*t.y+a*t.z)+n,y:A*(l*t.x+t.y-o*t.z)+s,z:A*(-a*t.x+o*t.y+t.z)+r}}}(i,t.datum_type,t.datum_params)),fb(e.datum_type)&&(i=function(t,e,i){if(1===e)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(2===e){var n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5],A=i[6],c=(t.x-n)/A,h=(t.y-s)/A,u=(t.z-r)/A;return{x:c+l*h-a*u,y:-l*c+h+o*u,z:a*c-o*h+u}}}(i,e.datum_type,e.datum_params)),i=pb(i,a,r,o),3===e.datum_type)&&0!==_b(e,!0,i))return;return i}function _b(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},r=[];t:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(r.push(a.name),a.isNull){s=n;break}if(a.mandatory,null!==a.grid)for(var l=a.grid.subgrids,A=0,c=l.length;A<c;A++){var h=l[A],u=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,d=h.ll[0]-u,g=h.ll[1]-u,p=h.ll[0]+(h.lim[0]-1)*h.del[0]+u,f=h.ll[1]+(h.lim[1]-1)*h.del[1]+u;if(!(g>n.y||d>n.x||f<n.y||p<n.x)&&(s=yb(n,e,h),!isNaN(s.x)))break t}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*fv+" "+n.y*fv+" tried: '"+r+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function yb(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var s={x:t.x,y:t.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=Kv(s.x-Math.PI)+Math.PI;var r=wb(s,i);if(e){if(isNaN(r.x))return n;r.x=s.x-r.x,r.y=s.y-r.y;var o,a,l=9;do{if(a=wb(r,i),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:s.x-(a.x+r.x),y:s.y-(a.y+r.y)},r.x+=o.x,r.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Kv(r.x+i.ll[0]),n.y=r.y+i.ll[1]}else isNaN(r.x)||(n.x=t.x+r.x,n.y=t.y+r.y);return n}function wb(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},s=Math.floor(n.x),r=Math.floor(n.y),o=n.x-1*s,a=n.y-1*r,l={x:Number.NaN,y:Number.NaN};if(s<0||s>=e.lim[0])return l;if(r<0||r>=e.lim[1])return l;i=r*e.lim[0]+s;var A=e.cvs[i][0],c=e.cvs[i][1];i++;var h=e.cvs[i][0],u=e.cvs[i][1];i+=e.lim[0];var d=e.cvs[i][0],g=e.cvs[i][1];i--;var p=e.cvs[i][0],f=e.cvs[i][1],m=o*a,_=o*(1-a),y=(1-o)*(1-a),w=(1-o)*a;return l.x=y*A+_*h+w*p+m*d,l.y=y*c+_*u+w*f+m*g,l}function vb(t,e,i){var n,s,r,o=i.x,a=i.y,l=i.z||0,A={};for(r=0;r<3;r++)if(!e||2!==r||void 0!==i.z)switch(0===r?(n=o,s=-1!=="ew".indexOf(t.axis[r])?"x":"y"):1===r?(n=a,s=-1!=="ns".indexOf(t.axis[r])?"y":"x"):(n=l,s="z"),t.axis[r]){case"e":case"n":A[s]=n;break;case"w":case"s":A[s]=-n;break;case"u":void 0!==i[s]&&(A.z=n);break;case"d":void 0!==i[s]&&(A.z=-n);break;default:return null}return A}function bb(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Cb(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function xb(t,e,i,n){var s,r=void 0!==(i=Array.isArray(i)?bb(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z;if(function(t){Cb(t.x),Cb(t.y)}(i),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(i=xb(t,s=new db("WGS84"),i,n),t=s),n&&"enu"!==t.axis&&(i=vb(t,!1,i)),"longlat"===t.projName)i={x:i.x*pv,y:i.y*pv,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=mb(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*fv,y:i.y*fv,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?vb(e,!0,i):(i&&!r&&delete i.z,i)}db.projections=tb,db.projections.start();var Bb=db("WGS84");function Eb(t,e,i,n){var s,r,o;return Array.isArray(i)?(s=xb(t,e,i,n)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof s.z?[s.x,s.y,s.z].concat(i.slice(3)):[s.x,s.y,i[2]].concat(i.slice(3)):[s.x,s.y].concat(i.slice(2)):[s.x,s.y]):(r=xb(t,e,i,n),2===(o=Object.keys(i)).length||o.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;r[n]=i[n]})),r)}function Sb(t){return t instanceof db?t:t.oProj?t.oProj:db(t)}function Fb(t,e,i){t=Sb(t);var n,s=!1;return void 0===e?(e=t,t=Bb,s=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=Bb,s=!0),e=Sb(e),i?Eb(t,e,i):(n={forward:function(i,n){return Eb(t,e,i,n)},inverse:function(i,n){return Eb(e,t,i,n)}},s&&(n.oProj=e),n)}var Ib="AJSAJS",Lb="AFAFAF",Mb=65,Tb=73,Rb=79,kb=86,Ub=90,Db={forward:Ob,inverse:function(t){var e=Hb(zb(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Pb};function Ob(t,e){return e=e||5,function(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(s=t.easting,r=t.northing,o=t.zoneNumber,a=Vb(o),l=Math.floor(s/1e5),A=Math.floor(r/1e5)%20,function(t,e,i){var n=i-1,s=Ib.charCodeAt(n),r=Lb.charCodeAt(n),o=s+t-1,a=r+e,l=!1;return o>Ub&&(o=o-Ub+Mb-1,l=!0),(o===Tb||s<Tb&&o>Tb||(o>Tb||s<Tb)&&l)&&o++,(o===Rb||s<Rb&&o>Rb||(o>Rb||s<Rb)&&l)&&++o===Tb&&o++,o>Ub&&(o=o-Ub+Mb-1),a>kb?(a=a-kb+Mb-1,l=!0):l=!1,(a===Tb||r<Tb&&a>Tb||(a>Tb||r<Tb)&&l)&&a++,(a===Rb||r<Rb&&a>Rb||(a>Rb||r<Rb)&&l)&&++a===Tb&&a++,a>kb&&(a=a-kb+Mb-1),String.fromCharCode(o)+String.fromCharCode(a)}(l,A,a))+i.substr(i.length-5,e)+n.substr(n.length-5,e);var s,r,o,a,l,A}(function(t){var e,i,n,s,r,o,a,l,A=t.lat,c=t.lon,h=6378137,u=.00669438,d=.9996,g=Nb(A),p=Nb(c);l=Math.floor((c+180)/6)+1,180===c&&(l=60);A>=56&&A<64&&c>=3&&c<12&&(l=32);A>=72&&A<84&&(c>=0&&c<9?l=31:c>=9&&c<21?l=33:c>=21&&c<33?l=35:c>=33&&c<42&&(l=37));a=Nb(6*(l-1)-180+3),e=u/(1-u),i=h/Math.sqrt(1-u*Math.sin(g)*Math.sin(g)),n=Math.tan(g)*Math.tan(g),s=e*Math.cos(g)*Math.cos(g),r=Math.cos(g)*(p-a),o=h*((1-u/4-3*u*u/64-5*u*u*u/256)*g-(3*u/8+3*u*u/32+45*u*u*u/1024)*Math.sin(2*g)+(15*u*u/256+45*u*u*u/1024)*Math.sin(4*g)-35*u*u*u/3072*Math.sin(6*g));var f=d*i*(r+(1-n+s)*r*r*r/6+(5-18*n+n*n+72*s-58*e)*r*r*r*r*r/120)+5e5,m=d*(o+i*Math.tan(g)*(r*r/2+(5-n+9*s+4*s*s)*r*r*r*r/24+(61-58*n+n*n+600*s-330*e)*r*r*r*r*r*r/720));A<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(f),zoneNumber:l,zoneLetter:Gb(A)}}({lat:t[1],lon:t[0]}),e)}function Pb(t){var e=Hb(zb(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Nb(t){return t*(Math.PI/180)}function Qb(t){return t/Math.PI*180}function Hb(t){var e=t.northing,i=t.easting,n=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var r,o,a,l,A,c,h,u,d,g=.9996,p=6378137,f=.00669438,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),_=i-5e5,y=e;n<"N"&&(y-=1e7),h=6*(s-1)-180+3,r=.006739496752268451,d=(u=y/g/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*u)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*u)+151*m*m*m/96*Math.sin(6*u),o=p/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),l=r*Math.cos(d)*Math.cos(d),A=.99330562*p/Math.pow(1-f*Math.sin(d)*Math.sin(d),1.5),c=_/(o*g);var w=d-o*Math.tan(d)/A*(c*c/2-(5+3*a+10*l-4*l*l-9*r)*c*c*c*c/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*c*c*c*c*c*c/720);w=Qb(w);var v,b=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*r+24*a*a)*c*c*c*c*c/120)/Math.cos(d);if(b=h+Qb(b),t.accuracy){var C=Hb({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:C.lat,right:C.lon,bottom:w,left:b}}else v={lat:w,lon:b};return v}function Gb(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Vb(t){var e=t%6;return 0===e&&(e=6),e}function zb(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,s="",r=0;!/[A-Z]/.test(e=t.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+t;s+=e,r++}var o=parseInt(s,10);if(0===r||r+3>i)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(r++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(r,r+=2);for(var l=Vb(o),A=function(t,e){var i=Ib.charCodeAt(e-1),n=1e5,s=!1;for(;i!==t.charCodeAt(0);){if(++i===Tb&&i++,i===Rb&&i++,i>Ub){if(s)throw"Bad character: "+t;i=Mb,s=!0}n+=1e5}return n}(n.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=Lb.charCodeAt(e-1),n=0,s=!1;for(;i!==t.charCodeAt(0);){if(++i===Tb&&i++,i===Rb&&i++,i>kb){if(s)throw"Bad character: "+t;i=Mb,s=!0}n+=1e5}return n}(n.charAt(1),l);c<Kb(a);)c+=2e6;var h=i-r;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var u,d,g,p=h/2,f=0,m=0;return p>0&&(u=1e5/Math.pow(10,p),d=t.substring(r,r+p),f=parseFloat(d)*u,g=t.substring(r+p),m=parseFloat(g)*u),{easting:f+A,northing:m+c,zoneLetter:a,zoneNumber:o,accuracy:u}}function Kb(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function jb(t,e,i){if(!(this instanceof jb))return new jb(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}jb.fromMGRS=function(t){return new jb(Pb(t))},jb.prototype.toMGRS=function(t){return Ob([this.x,this.y],t)};var Wb=.046875,$b=.01953125,Yb=.01068115234375;function Xb(t){var e=[];e[0]=1-t*(.25+t*(Wb+t*($b+t*Yb))),e[1]=t*(.75-t*(Wb+t*($b+t*Yb)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function qb(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}function Zb(t,e,i){for(var n=1/(1-e),s=t,r=20;r;--r){var o=Math.sin(s),a=1-e*o*o;if(s-=a=(qb(s,o,Math.cos(s),i)-t)*(a*Math.sqrt(a))*n,Math.abs(a)<gv)return s}return s}var Jb={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Xb(this.es),this.ml0=qb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,n,s=t.x,r=t.y,o=Kv(s-this.long0),a=Math.sin(r),l=Math.cos(r);if(this.es){var A=l*o,c=Math.pow(A,2),h=this.ep2*Math.pow(l,2),u=Math.pow(h,2),d=Math.abs(l)>gv?Math.tan(r):0,g=Math.pow(d,2),p=Math.pow(g,2);e=1-this.es*Math.pow(a,2),A/=Math.sqrt(e);var f=qb(r,a,l,this.en);i=this.a*(this.k0*A*(1+c/6*(1-g+h+c/20*(5-18*g+p+14*h-58*g*h+c/42*(61+179*p-p*g-479*g)))))+this.x0,n=this.a*(this.k0*(f-this.ml0+a*o*A/2*(1+c/12*(5-g+9*h+4*u+c/30*(61+p-58*g+270*h-330*g*h+c/56*(1385+543*p-p*g-3111*g))))))+this.y0}else{var m=l*Math.sin(o);if(Math.abs(Math.abs(m)-1)<gv)return 93;if(i=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=l*Math.cos(o)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>gv)return 93;n=0}else n=Math.acos(n);r<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t},inverse:function(t){var e,i,n,s,r=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(i=Zb(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(i)<dv){var a=Math.sin(i),l=Math.cos(i),A=Math.abs(l)>gv?Math.tan(i):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),u=Math.pow(A,2),d=Math.pow(u,2);e=1-this.es*Math.pow(a,2);var g=r*Math.sqrt(e)/this.k0,p=Math.pow(g,2);n=i-(e*=A)*p/(1-this.es)*.5*(1-p/12*(5+3*u-9*c*u+c-4*h-p/30*(61+90*u-252*c*u+45*d+46*c-p/56*(1385+3633*u+4095*d+1574*d*u)))),s=Kv(this.long0+g*(1-p/6*(1+2*u+c-p/20*(5+28*u+24*d+8*c*u+6*c-p/42*(61+662*u+1320*d+720*d*u))))/l)}else n=dv*zv(o),s=0;else{var f=Math.exp(r/this.k0),m=.5*(f-1/f),_=this.lat0+o/this.k0,y=Math.cos(_);e=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(m,2))),n=Math.asin(e),o<0&&(n=-n),s=0===m&&0===y?0:Kv(Math.atan2(m,y)+this.long0)}return t.x=s,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function tC(t){var e=Math.exp(t);return e=(e-1/e)/2}function eC(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function iC(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(eC(1,e)+1))),t<0?-e:e}function nC(t,e){for(var i,n=2*Math.cos(2*e),s=t.length-1,r=t[s],o=0;--s>=0;)i=n*r-o+t[s],o=r,r=i;return e+i*Math.sin(2*e)}function sC(t,e,i){for(var n,s,r=Math.sin(e),o=Math.cos(e),a=tC(i),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),A=2*o*l,c=-2*r*a,h=t.length-1,u=t[h],d=0,g=0,p=0;--h>=0;)n=g,s=d,u=A*(g=u)-n-c*(d=p)+t[h],p=c*g-s+A*d;return[(A=r*l)*u-(c=o*a)*p,A*p+c*u]}var rC={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Jb.init.apply(this),this.forward=Jb.forward,this.inverse=Jb.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=nC(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var i,n=2*Math.cos(e),s=t.length-1,r=t[s],o=0;--s>=0;)i=n*r-o+t[s],o=r,r=i;return Math.sin(e)*i}(this.gtu,2*n))},forward:function(t){var e=Kv(t.x-this.long0),i=t.y;i=nC(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),r=Math.sin(e),o=Math.cos(e);i=Math.atan2(n,o*s),e=Math.atan2(r*s,eC(n,s*o)),e=iC(Math.tan(e));var a,l,A=sC(this.gtu,2*i,2*e);return i+=A[0],e+=A[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,i,n=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var r=sC(this.utg,2*s,2*n);s+=r[0],n+=r[1],n=Math.atan(tC(n));var o=Math.sin(s),a=Math.cos(s),l=Math.sin(n),A=Math.cos(n);s=Math.atan2(o*A,eC(l,A*a)),e=Kv((n=Math.atan2(l,A*a))+this.long0),i=nC(this.cgb,s)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};var oC={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Kv(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*pv,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,rC.init.apply(this),this.forward=rC.forward,this.inverse=rC.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function aC(t,e){return Math.pow((1-t)/(1+t),e)}var lC={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mv)/(Math.pow(Math.tan(.5*this.lat0+mv),this.C)*aC(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+mv),this.C)*aC(this.e*Math.sin(i),this.ratexp))-dv,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+mv)/this.K,1/this.C),s=20;s>0&&(i=2*Math.atan(n*aC(this.e*Math.sin(t.y),-.5*this.e))-dv,!(Math.abs(i-t.y)<1e-14));--s)t.y=i;return s?(t.x=e,t.y=i,t):null}};var AC={init:function(){lC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,s;return t.x=Kv(t.x-this.long0),lC.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=s*i*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,s,r;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,r=eC(t.x,t.y)){var o=2*Math.atan2(r,this.R2);e=Math.sin(o),i=Math.cos(o),s=Math.asin(i*this.sinc0+t.y*e*this.cosc0/r),n=Math.atan2(t.x*e,r*this.cosc0*i-t.y*this.sinc0*e)}else s=this.phic0,n=0;return t.x=n,t.y=s,lC.inverse.apply(this,[t]),t.x=Kv(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var cC={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=gv&&(this.k0=.5*(1+zv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=gv&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=gv&&Math.abs(Math.cos(this.lat_ts))>gv&&(this.k0=.5*this.cons*Vv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/jv(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Vv(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-dv,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,n,s,r,o,a=t.x,l=t.y,A=Math.sin(l),c=Math.cos(l),h=Kv(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=gv&&Math.abs(l+this.lat0)<=gv?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*A+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*A-this.sinlat0*c*Math.cos(h))+this.y0,t):(i=2*Math.atan(this.ssfn_(l,A,this.e))-dv,s=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=gv?(r=jv(this.e,l*this.con,this.con*A),o=2*this.a*this.k0*r/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<gv?(e=2*this.a*this.k0/(1+s*Math.cos(h)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*s*Math.cos(h))),t.y=e*(this.cosX0*n-this.sinX0*s*Math.cos(h))+this.y0),t.x=e*s*Math.sin(h)+this.x0,t))},inverse:function(t){var e,i,n,s,r;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=gv?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<gv?this.lat0>0?Kv(this.long0+Math.atan2(t.x,-1*t.y)):Kv(this.long0+Math.atan2(t.x,t.y)):Kv(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=gv){if(o<=gv)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=o*this.cons/(2*this.a*this.k0),i=this.con*Wv(this.e,n),e=this.con*Kv(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=gv?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/o),e=Kv(this.long0+Math.atan2(t.x*Math.sin(s),o*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),i=-1*Wv(this.e,Math.tan(.5*(dv+r)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(dv+t))*Math.pow((1-e)/(1+e),.5*i)}};var hC={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,s=2*n-Math.pow(n,2),r=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+r*e)/(1-r*e));this.K=o-this.alpha*a+this.alpha*r/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,l=0,A=r,c=-1e3,h=0;Math.abs(A-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(A))/2)),c=A,A=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=A,t},names:["somerc"]},uC=1e-7;var dC={init:function(){var t,e,i,n,s,r,o,a,l,A,c,h,u,d=0,g=0,p=0,f=0,m=0,_=0,y=0;this.no_off=(u="object"==typeof(h=this).PROJECTION?Object.keys(h.PROJECTION)[0]:h.PROJECTION,"no_uoff"in h||"no_off"in h||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(u)),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),w&&(y=this.alpha),v&&(d=this.rectified_grid_angle*pv),w||v)g=this.longc;else if(p=this.long1,m=this.lat1,f=this.long2,_=this.lat2,Math.abs(m-_)<=uC||(t=Math.abs(m))<=uC||Math.abs(t-dv)<=uC||Math.abs(Math.abs(this.lat0)-dv)<=uC||Math.abs(Math.abs(_)-dv)<=uC)throw new Error;var b=1-this.es;e=Math.sqrt(b),Math.abs(this.lat0)>gv?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/b),this.A=this.B*this.k0*e/t,(s=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(jv(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=s=1),w||v?(w?(c=Math.asin(Math.sin(y)/n),v||(d=y)):(c=d,y=Math.asin(n*Math.sin(c))),this.lam0=g-Math.asin(.5*(s-1/s)*Math.tan(c))/this.B):(r=Math.pow(jv(this.e,m,Math.sin(m)),this.B),o=Math.pow(jv(this.e,_,Math.sin(_)),this.B),s=this.E/r,l=(o-r)/(o+r),A=((A=this.E*this.E)-o*r)/(A+o*r),(t=p-f)<-Math.pi?f-=_v:t>Math.pi&&(f+=_v),this.lam0=Kv(.5*(p+f)-Math.atan(A*Math.tan(.5*this.B*(p-f))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Kv(p-this.lam0))/(s-1/s)),d=y=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(mv-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(mv+s))},forward:function(t){var e,i,n,s,r,o,a,l,A={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-dv)>gv){if(e=.5*((r=this.E/Math.pow(jv(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/r)),i=.5*(r+o),s=Math.sin(this.B*t.x),n=(e*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<gv)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),o=Math.cos(this.B*t.x),a=Math.abs(o)<uC?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+s*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(A.x=a,A.y=l):(a-=this.u_0,A.x=l*this.cosrot+a*this.sinrot,A.y=a*this.cosrot-l*this.sinrot),A.x=this.a*A.x+this.x0,A.y=this.a*A.y+this.y0,A},inverse:function(t){var e,i,n,s,r,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),s=.5*((n=Math.exp(-this.BrA*i))-1/n),r=.5*(n+1/n),a=((o=Math.sin(this.BrA*e))*this.cosgam+s*this.singam)/r,Math.abs(Math.abs(a)-1)<gv)l.x=0,l.y=a<0?-dv:dv;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Wv(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var gC={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<gv)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Vv(this.e,e,i),s=jv(this.e,this.lat1,e),r=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Vv(this.e,r,o),l=jv(this.e,this.lat2,r),A=jv(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>gv?this.ns=Math.log(n/a)/Math.log(s/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(A,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=gv&&(i=zv(i)*(dv-2e-10));var n,s,r=Math.abs(Math.abs(i)-dv);if(r>gv)n=jv(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if((r=i*this.ns)<=0)return null;s=0}var o=this.ns*Kv(e-this.long0);return t.x=this.k0*(s*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,t},inverse:function(t){var e,i,n,s,r,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),i=1):(e=-Math.sqrt(o*o+a*a),i=-1);var l=0;if(0!==e&&(l=Math.atan2(i*o,i*a)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(s=Wv(this.e,n)))return null}else s=-dv;return r=Kv(l/this.ns+this.long0),t.x=r,t.y=s,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var pC={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,n,s,r,o,a,l=t.x,A=t.y,c=Kv(l-this.long0);return e=Math.pow((1+this.e*Math.sin(A))/(1-this.e*Math.sin(A)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(A/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),o=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,n,s,r,o,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),r=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,a=0;var A=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,A+=1}while(0===a&&A<15);return A>=15?null:t},names:["Krovak","krovak"]};function fC(t,e,i,n,s){return t*s-e*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)}function mC(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function _C(t){return.375*t*(1+.25*t*(1+.46875*t))}function yC(t){return.05859375*t*t*(1+.75*t)}function wC(t){return t*t*t*(35/3072)}function vC(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function bC(t){return Math.abs(t)<dv?t:t-zv(t)*Math.PI}function CC(t,e,i,n,s){var r,o;r=t/e;for(var a=0;a<15;a++)if(r+=o=(t-(e*r-i*Math.sin(2*r)+n*Math.sin(4*r)-s*Math.sin(6*r)))/(e-2*i*Math.cos(2*r)+4*n*Math.cos(4*r)-6*s*Math.cos(6*r)),Math.abs(o)<=1e-10)return r;return NaN}var xC={init:function(){this.sphere||(this.e0=mC(this.es),this.e1=_C(this.es),this.e2=yC(this.es),this.e3=wC(this.es),this.ml0=this.a*fC(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,n=t.x,s=t.y;if(n=Kv(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var r=Math.sin(s),o=Math.cos(s),a=vC(this.a,this.e,r),l=Math.tan(s)*Math.tan(s),A=n*Math.cos(s),c=A*A,h=this.es*o*o/(1-this.es);e=a*A*(1-c*l*(1/6-(8-l+8*h)*c/120)),i=this.a*fC(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*r/o*c*(.5+(5-l+6*h)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,s=t.y/this.a;if(this.sphere){var r=s+this.lat0;e=Math.asin(Math.sin(r)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(r))}else{var o=CC(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-dv)<=gv)return t.x=this.long0,t.y=dv,s<0&&(t.y*=-1),t;var a=vC(this.a,this.e,Math.sin(o)),l=a*a*a/this.a/this.a*(1-this.es),A=Math.pow(Math.tan(o),2),c=n*this.a/a,h=c*c;e=o-a*Math.tan(o)/l*c*c*(.5-(1+3*A)*c*c/24),i=c*(1-h*(A/3+(1+3*A)*A*h/15))/Math.cos(o)}return t.x=Kv(i+this.long0),t.y=bC(e),t},names:["Cassini","Cassini_Soldner","cass"]};function BC(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}var EC=.3333333333333333,SC=.17222222222222222,FC=.10257936507936508,IC=.06388888888888888,LC=.0664021164021164,MC=.016415012942191543;var TC={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-dv)<gv?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<gv?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=BC(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=t*EC,e=t*t,i[0]+=e*SC,i[1]=e*IC,e*=t,i[0]+=e*FC,i[1]+=e*LC,i[2]=e*MC,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=BC(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,n,s,r,o,a,l,A,c,h=t.x,u=t.y;if(h=Kv(h-this.long0),this.sphere){if(r=Math.sin(u),c=Math.cos(u),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*r+this.cosph0*c*n)<=gv)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(h),i*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(u+this.lat0)<gv)return null;i=mv-.5*u,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(h),i*=n}}else{switch(a=0,l=0,A=0,n=Math.cos(h),s=Math.sin(h),r=Math.sin(u),o=BC(this.e,r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:A=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:A=1+l*n;break;case this.N_POLE:A=dv+u,o=this.qp-o;break;case this.S_POLE:A=u-dv,o=this.qp+o}if(Math.abs(A)<gv)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:A=Math.sqrt(2/A),i=this.mode===this.OBLIQ?this.ymf*A*(this.cosb1*a-this.sinb1*l*n):(A=Math.sqrt(2/(1+l*n)))*a*this.ymf,e=this.xmf*A*l*s;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(A=Math.sqrt(o))*s,i=n*(this.mode===this.S_POLE?A:-A)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,s,r,o,a,l,A,c,h=t.x/this.a,u=t.y/this.a;if(this.sphere){var d,g=0,p=0;if((i=.5*(d=Math.sqrt(h*h+u*u)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(i),g=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=gv?0:Math.asin(u*p/d),h*=p,u=g*d;break;case this.OBLIQ:i=Math.abs(d)<=gv?this.lat0:Math.asin(g*this.sinph0+u*p*this.cosph0/d),h*=p*this.cosph0,u=(g-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:u=-u,i=dv-i;break;case this.S_POLE:i-=dv}e=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,u):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,u*=this.dd,(o=Math.sqrt(h*h+u*u))<gv)return t.x=this.long0,t.y=this.lat0,t;s=2*Math.asin(.5*o/this.rq),n=Math.cos(s),h*=s=Math.sin(s),this.mode===this.OBLIQ?(a=n*this.sinb1+u*s*this.cosb1/o,r=this.qp*a,u=o*this.cosb1*n-u*this.sinb1*s):(a=u*s/o,r=this.qp*a,u=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(r=h*h+u*u))return t.x=this.long0,t.y=this.lat0,t;a=1-r/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(h,u),l=Math.asin(a),A=this.apa,c=l+l,i=l+A[0]*Math.sin(c)+A[1]*Math.sin(c+c)+A[2]*Math.sin(c+c+c)}return t.x=Kv(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function RC(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var kC={init:function(){Math.abs(this.lat1+this.lat2)<gv||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Vv(this.e3,this.sin_po,this.cos_po),this.qs1=BC(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Vv(this.e3,this.sin_po,this.cos_po),this.qs2=BC(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=BC(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>gv?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=BC(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*Kv(e-this.long0),o=s*Math.sin(r)+this.x0,a=this.rh-s*Math.cos(r)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,i,n,s,r,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),s=0,0!==e&&(s=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),r=Kv(s/this.ns0+this.long0),t.x=r,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,n,s,r,o=RC(.5*e);if(t<gv)return o;for(var a=t*t,l=1;l<=25;l++)if(o+=r=.5*(s=1-(n=t*(i=Math.sin(o)))*n)*s/Math.cos(o)*(e/(1-a)-i/s+.5/t*Math.log((1-n)/(1+n))),Math.abs(r)<=1e-7)return o;return null}};var UC={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,n,s,r,o,a,l=t.x,A=t.y;return n=Kv(l-this.long0),e=Math.sin(A),i=Math.cos(A),s=Math.cos(n),(r=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(r)<=gv?(o=this.x0+1*this.a*i*Math.sin(n)/r,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)/r):(o=this.x0+this.infinity_dist*i*Math.sin(n),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*s)),t.x=o,t.y=a,t},inverse:function(t){var e,i,n,s,r,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),i=Math.sin(s),o=RC((n=Math.cos(s))*this.sin_p14+t.y*i*this.cos_p14/e),r=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),r=Kv(this.long0+r)):(o=this.phic0,r=0),t.x=r,t.y=o,t},names:["gnom"]};var DC={init:function(){this.sphere||(this.k0=Vv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,s=t.y,r=Kv(n-this.long0);if(this.sphere)e=this.x0+this.a*r*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var o=BC(this.e,Math.sin(s));e=this.x0+this.a*this.k0*r,i=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Kv(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*dv:dv;for(var n,s,r,o,a=Math.asin(.5*e),l=0;l<30;l++)if(s=Math.sin(a),r=Math.cos(a),o=t*s,a+=n=Math.pow(1-o*o,2)/(2*r)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return a;return NaN}(this.e,2*t.y*this.k0/this.a),e=Kv(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]};var OC={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=Kv(e-this.long0),s=bC(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*s,t},inverse:function(t){var e=t.x,i=t.y;return t.x=Kv(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=bC(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var PC={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=mC(this.es),this.e1=_C(this.es),this.e2=yC(this.es),this.e3=wC(this.es),this.ml0=this.a*fC(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,n,s=t.x,r=t.y,o=Kv(s-this.long0);if(n=o*Math.sin(r),this.sphere)Math.abs(r)<=gv?(e=this.a*o,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(r),i=this.a*(bC(r-this.lat0)+(1-Math.cos(n))/Math.tan(r)));else if(Math.abs(r)<=gv)e=this.a*o,i=-1*this.ml0;else{var a=vC(this.a,this.e,Math.sin(r))/Math.tan(r);e=a*Math.sin(n),i=this.a*fC(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,n,s,r,o,a,l,A;if(n=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=gv)e=Kv(n/this.a+this.long0),i=0;else{var c;for(o=this.lat0+s/this.a,a=n*n/this.a/this.a+o*o,l=o,r=20;r;--r)if(l+=A=-1*(o*(l*(c=Math.tan(l))+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),Math.abs(A)<=gv){i=l;break}e=Kv(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=gv)i=0,e=Kv(this.long0+n/this.a);else{var h,u,d,g,p;for(o=(this.ml0+s)/this.a,a=n*n/this.a/this.a+o*o,l=o,r=20;r;--r)if(p=this.e*Math.sin(l),h=Math.sqrt(1-p*p)*Math.tan(l),u=this.a*fC(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=A=(o*(h*(g=u/this.a)+1)-g-.5*h*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*h)+(o-g)*(h*d-2/Math.sin(2*l))-d),Math.abs(A)<=gv){i=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Kv(this.long0+Math.asin(n*h/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]};var NC={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,n=t.y-this.lat0,s=i-this.long0,r=n/uv*1e-5,o=s,a=1,l=0;for(e=1;e<=10;e++)a*=r,l+=this.A[e]*a;var A,c=l,h=o,u=1,d=0,g=0,p=0;for(e=1;e<=6;e++)A=d*c+u*h,u=u*c-d*h,d=A,g=g+this.B_re[e]*u-this.B_im[e]*d,p=p+this.B_im[e]*u+this.B_re[e]*d;return t.x=p*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,i,n=t.x,s=t.y,r=n-this.x0,o=(s-this.y0)/this.a,a=r/this.a,l=1,A=0,c=0,h=0;for(e=1;e<=6;e++)i=A*o+l*a,l=l*o-A*a,A=i,c=c+this.C_re[e]*l-this.C_im[e]*A,h=h+this.C_im[e]*l+this.C_re[e]*A;for(var u=0;u<this.iterations;u++){var d,g=c,p=h,f=o,m=a;for(e=2;e<=6;e++)d=p*c+g*h,g=g*c-p*h,p=d,f+=(e-1)*(this.B_re[e]*g-this.B_im[e]*p),m+=(e-1)*(this.B_im[e]*g+this.B_re[e]*p);g=1,p=0;var _=this.B_re[1],y=this.B_im[1];for(e=2;e<=6;e++)d=p*c+g*h,g=g*c-p*h,p=d,_+=e*(this.B_re[e]*g-this.B_im[e]*p),y+=e*(this.B_im[e]*g+this.B_re[e]*p);var w=_*_+y*y;c=(f*_+m*y)/w,h=(m*_-f*y)/w}var v=c,b=h,C=1,x=0;for(e=1;e<=9;e++)C*=v,x+=this.D[e]*C;var B=this.lat0+x*uv*1e5,E=this.long0+b;return t.x=E,t.y=B,t},names:["New_Zealand_Map_Grid","nzmg"]};var QC={init:function(){},forward:function(t){var e=t.x,i=t.y,n=Kv(e-this.long0),s=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=r,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Kv(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]};var HC={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Xb(this.es)},forward:function(t){var e,i,n=t.x,s=t.y;if(n=Kv(n-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(s),o=20;o;--o){var a=(this.m*s+Math.sin(s)-r)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<gv)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),A=Math.cos(s);i=this.a*qb(s,l,A,this.en),e=this.a*n*A/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=RC((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=RC(Math.sin(e)/this.n)),i=Kv(i+this.long0),e=bC(e)):(e=Zb(t.y/this.a,this.es,this.en),(n=Math.abs(e))<dv?(n=Math.sin(e),i=Kv(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-gv<dv&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]};var GC={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=Kv(e-this.long0),s=i,r=Math.PI*Math.sin(i);;){var o=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=o,Math.abs(o)<gv)break}s/=2,Math.PI/2-Math.abs(i)<gv&&(n=0);var a=.900316316158*this.a*n*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=a,t.y=l,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=Kv(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return t.x=n,t.y=s,t},names:["Mollweide","moll"]};var VC={init:function(){Math.abs(this.lat1+this.lat2)<gv||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=mC(this.es),this.e1=_C(this.es),this.e2=yC(this.es),this.e3=wC(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Vv(this.e,this.sinphi,this.cosphi),this.ml1=fC(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<gv?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Vv(this.e,this.sinphi,this.cosphi),this.ml2=fC(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=fC(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var s=fC(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-s)}var r=this.ns*Kv(i-this.long0),o=this.x0+e*Math.sin(r),a=this.y0+this.rh-e*Math.cos(r);return t.x=o,t.y=a,t},inverse:function(t){var e,i,n,s;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var r=0;return 0!==i&&(r=Math.atan2(e*t.x,e*t.y)),this.sphere?(s=Kv(this.long0+r/this.ns),n=bC(this.g-i/this.a),t.x=s,t.y=n,t):(n=CC(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),s=Kv(this.long0+r/this.ns),t.x=s,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var zC={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,s=t.y,r=Kv(n-this.long0);Math.abs(s)<=gv&&(e=this.x0+this.R*r,i=this.y0);var o=RC(2*Math.abs(s/Math.PI));(Math.abs(r)<=gv||Math.abs(Math.abs(s)-dv)<=gv)&&(e=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,A=Math.sin(o),c=Math.cos(o),h=c/(A+c-1),u=h*h,d=h*(2/A-1),g=d*d,p=Math.PI*this.R*(a*(h-g)+Math.sqrt(l*(h-g)*(h-g)-(g+l)*(u-g)))/(g+l);r<0&&(p=-p),e=this.x0+p;var f=l+h;return p=Math.PI*this.R*(d*f-a*Math.sqrt((g+l)*(l+1)-f*f))/(g+l),i=s>=0?this.y0+p:this.y0-p,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,s,r,o,a,l,A,c,h,u;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=(n=t.x/h)*n+(s=t.y/h)*s,h=3*(s*s/(l=-2*(o=-Math.abs(s)*(1+r))+1+2*s*s+r*r)+(2*(a=o-2*s*s+n*n)*a*a/l/l/l-9*o*a/l/l)/27)/(A=(o-a*a/3/l)/l)/(c=2*Math.sqrt(-A/3)),Math.abs(h)>1&&(h=h>=0?1:-1),u=Math.acos(h)/3,i=t.y>=0?(-c*Math.cos(u+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(u+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(n)<gv?this.long0:Kv(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(n*n-s*s)+r*r))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var KC={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,s,r,o,a,l,A,c,h,u,d,g,p,f,m,_,y,w,v,b,C=t.x,x=t.y,B=Math.sin(t.y),E=Math.cos(t.y),S=Kv(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=gv?(t.x=this.x0+this.a*(dv-x)*Math.sin(S),t.y=this.y0-this.a*(dv-x)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=gv?(t.x=this.x0+this.a*(dv+x)*Math.sin(S),t.y=this.y0+this.a*(dv+x)*Math.cos(S),t):(_=this.sin_p12*B+this.cos_p12*E*Math.cos(S),m=(f=Math.acos(_))?f/Math.sin(f):1,t.x=this.x0+this.a*m*E*Math.sin(S),t.y=this.y0+this.a*m*(this.cos_p12*B-this.sin_p12*E*Math.cos(S)),t):(e=mC(this.es),i=_C(this.es),n=yC(this.es),s=wC(this.es),Math.abs(this.sin_p12-1)<=gv?(r=this.a*fC(e,i,n,s,dv),o=this.a*fC(e,i,n,s,x),t.x=this.x0+(r-o)*Math.sin(S),t.y=this.y0-(r-o)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=gv?(r=this.a*fC(e,i,n,s,dv),o=this.a*fC(e,i,n,s,x),t.x=this.x0+(r+o)*Math.sin(S),t.y=this.y0+(r+o)*Math.cos(S),t):(a=B/E,l=vC(this.a,this.e,this.sin_p12),A=vC(this.a,this.e,B),c=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(A*E)),y=0===(h=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=gv?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(S)*Math.cos(c)/Math.sin(h)),u=this.e*this.sin_p12/Math.sqrt(1-this.es),f=l*y*(1-(w=y*y)*(p=(d=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*d)*(1-p)/6+(v=w*y)/8*(g=u*d)*(1-2*p)+(b=v*y)/120*(p*(4-7*p)-3*u*u*(1-7*p))-b*y/48*g),t.x=this.x0+f*Math.sin(h),t.y=this.y0+f*Math.cos(h),t))},inverse:function(t){var e,i,n,s,r,o,a,l,A,c,h,u,d,g,p,f,m,_,y,w,v,b,C;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*dv*this.a)return;return i=e/this.a,n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(e)<=gv?o=this.lat0:(o=RC(s*this.sin_p12+t.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-dv,r=Math.abs(a)<=gv?this.lat0>=0?Kv(this.long0+Math.atan2(t.x,-t.y)):Kv(this.long0-Math.atan2(-t.x,t.y)):Kv(this.long0+Math.atan2(t.x*n,e*this.cos_p12*s-t.y*this.sin_p12*n))),t.x=r,t.y=o,t}return l=mC(this.es),A=_C(this.es),c=yC(this.es),h=wC(this.es),Math.abs(this.sin_p12-1)<=gv?(o=CC(((u=this.a*fC(l,A,c,h,dv))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,A,c,h),r=Kv(this.long0+Math.atan2(t.x,-1*t.y)),t.x=r,t.y=o,t):Math.abs(this.sin_p12+1)<=gv?(u=this.a*fC(l,A,c,h,dv),o=CC(((e=Math.sqrt(t.x*t.x+t.y*t.y))-u)/this.a,l,A,c,h),r=Kv(this.long0+Math.atan2(t.x,t.y)),t.x=r,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.x,t.y),d=vC(this.a,this.e,this.sin_p12),f=Math.cos(p),_=-(m=this.e*this.cos_p12*f)*m/(1-this.es),y=3*this.es*(1-_)*this.sin_p12*this.cos_p12*f/(1-this.es),b=1-_*(v=(w=e/d)-_*(1+_)*Math.pow(w,3)/6-y*(1+3*_)*Math.pow(w,4)/24)*v/2-w*v*v*v/6,g=Math.asin(this.sin_p12*Math.cos(v)+this.cos_p12*Math.sin(v)*f),r=Kv(this.long0+Math.asin(Math.sin(p)*Math.sin(v)/Math.cos(g))),C=Math.sin(g),o=Math.atan2((C-this.es*b*this.sin_p12)*Math.tan(g),C*(1-this.es)),t.x=r,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]};var jC={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,n,s,r,o,a,l=t.x,A=t.y;return n=Kv(l-this.long0),e=Math.sin(A),i=Math.cos(A),s=Math.cos(n),((r=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(r)<=gv)&&(o=1*this.a*i*Math.sin(n),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)),t.x=o,t.y=a,t},inverse:function(t){var e,i,n,s,r,o,a;return t.x-=this.x0,t.y-=this.y0,i=RC((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(e)<=gv?(a=this.lat0,t.x=o,t.y=a,t):(a=RC(s*this.sin_p14+t.y*n*this.cos_p14/e),r=Math.abs(this.lat0)-dv,Math.abs(r)<=gv?(o=this.lat0>=0?Kv(this.long0+Math.atan2(t.x,-t.y)):Kv(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=Kv(this.long0+Math.atan2(t.x*n,e*this.cos_p14*s-t.y*this.sin_p14*n)),t.x=o,t.y=a,t))},names:["ortho"]},WC=1,$C=2,YC=3,XC=4,qC=5,ZC=6,JC=1,tx=2,ex=3,ix=4;function nx(t,e,i,n){var s;return t<gv?(n.value=JC,s=0):(s=Math.atan2(e,i),Math.abs(s)<=mv?n.value=JC:s>mv&&s<=dv+mv?(n.value=tx,s-=dv):s>dv+mv||s<=-(dv+mv)?(n.value=ex,s=s>=0?s-yv:s+yv):(n.value=ix,s+=dv)),s}function sx(t,e){var i=t+e;return i<-3.14159265359?i+=_v:i>3.14159265359&&(i-=_v),i}var rx={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=dv-mv/2?this.face=qC:this.lat0<=-(dv-mv/2)?this.face=ZC:Math.abs(this.long0)<=mv?this.face=WC:Math.abs(this.long0)<=dv+mv?this.face=this.long0>0?$C:XC:this.face=YC,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,s,r,o,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===qC)s=dv-e,i>=mv&&i<=dv+mv?(l.value=JC,n=i-dv):i>dv+mv||i<=-(dv+mv)?(l.value=tx,n=i>0?i-yv:i+yv):i>-(dv+mv)&&i<=-mv?(l.value=ex,n=i+dv):(l.value=ix,n=i);else if(this.face===ZC)s=dv+e,i>=mv&&i<=dv+mv?(l.value=JC,n=-i+dv):i<mv&&i>=-mv?(l.value=tx,n=-i):i<-mv&&i>=-(dv+mv)?(l.value=ex,n=-i-dv):(l.value=ix,n=i>0?-i+yv:-i-yv);else{var A,c,h,u,d,g;this.face===$C?i=sx(i,+dv):this.face===YC?i=sx(i,3.14159265359):this.face===XC&&(i=sx(i,-dv)),u=Math.sin(e),d=Math.cos(e),g=Math.sin(i),A=d*Math.cos(i),c=d*g,h=u,this.face===WC?n=nx(s=Math.acos(A),h,c,l):this.face===$C?n=nx(s=Math.acos(c),h,-A,l):this.face===YC?n=nx(s=Math.acos(-A),h,-c,l):this.face===XC?n=nx(s=Math.acos(-c),h,A,l):(s=n=0,l.value=JC)}return o=Math.atan(12/yv*(n+Math.acos(Math.sin(n)*Math.cos(mv))-dv)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===tx?o+=dv:l.value===ex?o+=yv:l.value===ix&&(o+=1.5*yv),a.x=r*Math.cos(o),a.y=r*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,i,n,s,r,o,a,l,A,c,h,u,d={lam:0,phi:0},g={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?g.value=JC:t.y>=0&&t.y>=Math.abs(t.x)?(g.value=tx,e-=dv):t.x<0&&-t.x>=Math.abs(t.y)?(g.value=ex,e=e<0?e+yv:e-yv):(g.value=ix,e+=dv),A=yv/12*Math.tan(e),r=Math.sin(A)/(Math.cos(A)-1/Math.sqrt(2)),o=Math.atan(r),(a=1-(n=Math.cos(e))*n*(s=Math.tan(i))*s*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),this.face===qC)l=Math.acos(a),d.phi=dv-l,g.value===JC?d.lam=o+dv:g.value===tx?d.lam=o<0?o+yv:o-yv:g.value===ex?d.lam=o-dv:d.lam=o;else if(this.face===ZC)l=Math.acos(a),d.phi=l-dv,g.value===JC?d.lam=-o+dv:g.value===tx?d.lam=-o:g.value===ex?d.lam=-o-dv:d.lam=o<0?-o-yv:-o+yv;else{var p,f,m;A=(p=a)*p,f=(A+=(m=A>=1?0:Math.sqrt(1-A)*Math.sin(o))*m)>=1?0:Math.sqrt(1-A),g.value===tx?(A=f,f=-m,m=A):g.value===ex?(f=-f,m=-m):g.value===ix&&(A=f,f=m,m=-A),this.face===$C?(A=p,p=-f,f=A):this.face===YC?(p=-p,f=-f):this.face===XC&&(A=p,p=f,f=-A),d.phi=Math.acos(-m)-dv,d.lam=Math.atan2(f,p),this.face===$C?d.lam=sx(d.lam,-dv):this.face===YC?d.lam=sx(d.lam,-3.14159265359):this.face===XC&&(d.lam=sx(d.lam,+dv))}return 0!==this.es&&(c=d.phi<0?1:0,h=Math.tan(d.phi),u=this.b/Math.sqrt(h*h+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-u*u)/(this.one_minus_f*u)),c&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},ox=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ax=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],lx=.8487,Ax=1.3523,cx=fv/5,hx=1/cx,ux=18,dx=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var gx={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Kv(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*cx);n<0?n=0:n>=ux&&(n=17);var s={x:dx(ox[n],i=fv*(i-hx*n))*e,y:dx(ax[n],i)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*lx+this.x0,s.y=s.y*this.a*Ax+this.y0,s},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*lx),y:Math.abs(t.y-this.y0)/(this.a*Ax)};if(e.y>=1)e.x/=ox[18][0],e.y=t.y<0?-dv:dv;else{var i=Math.floor(e.y*ux);for(i<0?i=0:i>=ux&&(i=17);;)if(ax[i][0]>e.y)--i;else{if(!(ax[i+1][0]<=e.y))break;++i}var n=ax[i],s=5*(e.y-n[0])/(ax[i+1][0]-n[0]);s=function(t,e,i,n){for(var s=e;n;--n){var r=t(s);if(s-=r,Math.abs(r)<i)break}return s}((function(t){return(dx(n,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(n,t)}),s,gv,100),e.x/=dx(ox[i],s),e.y=(5*i+s)*pv,t.y<0&&(e.y=-e.y)}return e.x=Kv(e.x+this.long0),e},names:["Robinson","robin"]};var px={init:function(){this.name="geocent"},forward:function(t){return gb(t,this.es,this.a)},inverse:function(t){return pb(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},fx=0,mx=1,_x=2,yx=3,wx={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var vx={init:function(){if(Object.keys(wx).forEach(function(t){if(void 0===this[t])this[t]=wx[t].def;else{if(wx[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);wx[t].num&&(this[t]=parseFloat(this[t]))}wx[t].degrees&&(this[t]=this[t]*pv)}.bind(this)),Math.abs(Math.abs(this.lat0)-dv)<gv?this.mode=this.lat0<0?mx:fx:Math.abs(this.lat0)<gv?this.mode=_x:(this.mode=yx,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,n,s,r=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case yx:i=this.sinph0*r+this.cosph0*o*a;break;case _x:i=o*a;break;case mx:i=-r;break;case fx:i=r}switch(e=(i=this.pn1/(this.p-i))*o*Math.sin(t.x),this.mode){case yx:i*=this.cosph0*r-this.sinph0*o*a;break;case _x:i*=r;break;case fx:i*=-o*a;break;case mx:i*=o*a}return s=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*s,i=n*s,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,s={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var r=eC(t.x,t.y);if(Math.abs(r)<gv)s.x=0,s.y=t.y;else{var o,a;switch(a=1-r*r*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/r+r/this.pn1),o=Math.sqrt(1-a*a),this.mode){case yx:s.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/r),t.y=(o-this.sinph0*Math.sin(s.y))*r,t.x*=a*this.cosph0;break;case _x:s.y=Math.asin(t.y*a/r),t.y=o*r,t.x*=a;break;case fx:s.y=Math.asin(o),t.y=-t.y;break;case mx:s.y=-Math.asin(o)}s.x=Math.atan2(t.x,t.y)}return t.x=s.x+this.long0,t.y=s.y,t},names:["Tilted_Perspective","tpers"]};var bx={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,n,s,r=t.x,o=t.y;if(r-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/eC(this.radius_p*Math.cos(o),Math.sin(o));if(i=a*Math.cos(r)*Math.cos(o),n=a*Math.sin(r)*Math.cos(o),s=a*Math.sin(o),(this.radius_g-i)*i-n*n-s*s*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/eC(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(s/eC(n,e)))}else"sphere"===this.shape&&(e=Math.cos(o),i=Math.cos(r)*e,n=Math.sin(r)*e,s=Math.sin(o),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/eC(s,e)),t.y=this.radius_g_1*Math.atan(s/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(s/eC(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,n,s,r=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*eC(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*eC(1,o));var l=a/this.radius_p;if(e=o*o+l*l+r*r,(n=(i=2*this.radius_g*r)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(n))/(2*e),r=this.radius_g+s*r,o*=s,a*=s,t.x=Math.atan2(o,r),t.y=Math.atan(a*Math.cos(t.x)/r),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+r*r,(n=(i=2*this.radius_g*r)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=(-i-Math.sqrt(n))/(2*e),r=this.radius_g+s*r,o*=s,a*=s,t.x=Math.atan2(o,r),t.y=Math.atan(a*Math.cos(t.x)/r)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},Cx=1.340264,xx=-.081106,Bx=893e-6,Ex=.003796,Sx=Math.sqrt(3)/2;var Fx={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=Kv(t.x-this.long0),i=t.y,n=Math.asin(Sx*Math.sin(i)),s=n*n,r=s*s*s;return t.x=e*Math.cos(n)/(Sx*(Cx+3*xx*s+r*(7*Bx+9*Ex*s))),t.y=n*(Cx+xx*s+r*(Bx+Ex*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,i,n,s,r=t.y;for(s=0;s<12&&(r-=n=(r*(Cx+xx*(e=r*r)+(i=e*e*e)*(Bx+Ex*e))-t.y)/(Cx+3*xx*e+i*(7*Bx+9*Ex*e)),!(Math.abs(n)<1e-9));++s);return i=(e=r*r)*e*e,t.x=Sx*t.x*(Cx+3*xx*e+i*(7*Bx+9*Ex*e))/Math.cos(r),t.y=Math.asin(Math.sin(r)/Sx),t.x=Kv(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]},Ix=1e-10;function Lx(t){var e,i,n,s=Kv(t.x-(this.long0||0)),r=t.y;return e=this.am1+this.m1-qb(r,i=Math.sin(r),n=Math.cos(r),this.en),i=n*s/(e*Math.sqrt(1-this.es*i*i)),t.x=e*Math.sin(i),t.y=this.am1-e*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Mx(t){var e,i,n,s;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,i=eC(t.x,t.y=this.am1-t.y),s=Zb(this.am1+this.m1-i,this.es,this.en),(e=Math.abs(s))<dv)e=Math.sin(s),n=i*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(s);else{if(!(Math.abs(e-dv)<=Ix))throw new Error;n=0}return t.x=Kv(n+(this.long0||0)),t.y=bC(s),t}function Tx(t){var e,i,n=Kv(t.x-(this.long0||0)),s=t.y;return i=this.cphi1+this.phi1-s,Math.abs(i)>Ix?(t.x=i*Math.sin(e=n*Math.cos(s)/i),t.y=this.cphi1-i*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Rx(t){var e,i;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var n=eC(t.x,t.y=this.cphi1-t.y);if(i=this.cphi1+this.phi1-n,Math.abs(i)>dv)throw new Error;return e=Math.abs(Math.abs(i)-dv)<=Ix?0:n*Math.atan2(t.x,t.y)/Math.cos(i),t.x=Kv(e+(this.long0||0)),t.y=bC(i),t}var kx={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ix)throw new Error;this.es?(this.en=Xb(this.es),this.m1=qb(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Mx,this.forward=Lx):(Math.abs(this.phi1)+Ix>=dv?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Rx,this.forward=Tx)},names:["bonne","Bonne (Werner lat_1=90)"]};function Ux(t){const e=Object.keys(t.defs),i=e.length;let n,s;for(n=0;n<i;++n){const i=e[n];if(!It(i)){const e=t.defs(i);let n=e.units;n||"longlat"!==e.projName||(n="degrees"),me(new gt({code:i,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:n}))}}for(n=0;n<i;++n){const r=e[n],o=It(r);for(s=0;s<i;++s){const i=e[s],n=It(i);if(!kt(r,i))if(t.defs[r]===t.defs[i])we([o,n]);else{const e=t(r,i);Ce(o,n,Ue(o,n,e.forward),Ue(n,o,e.inverse))}}}}Fb.defaultDatum="WGS84",Fb.Proj=db,Fb.WGS84=new Fb.Proj("WGS84"),Fb.Point=jb,Fb.toPoint=bb,Fb.defs=Pv,Fb.nadgrid=function(t,e){var i=new DataView(e),n=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(i),s=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Ab(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,n),r=function(t,e,i){for(var n=176,s=[],r=0;r<e.nSubgrids;r++){var o=hb(t,n,i),a=ub(t,n,o,i),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),A=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[lb(o.lowerLongitude),lb(o.lowerLatitude)],del:[lb(o.longitudeInterval),lb(o.latitudeInterval)],lim:[l,A],count:o.gridNodeCount,cvs:cb(a)}),n+=176+16*o.gridNodeCount}return s}(i,s,n),o={header:s,subgrids:r};return ob[t]=o,o},Fb.transform=xb,Fb.mgrs=Db,Fb.version="__VERSION__",function(t){t.Proj.projections.add(Jb),t.Proj.projections.add(rC),t.Proj.projections.add(oC),t.Proj.projections.add(AC),t.Proj.projections.add(cC),t.Proj.projections.add(hC),t.Proj.projections.add(dC),t.Proj.projections.add(gC),t.Proj.projections.add(pC),t.Proj.projections.add(xC),t.Proj.projections.add(TC),t.Proj.projections.add(kC),t.Proj.projections.add(UC),t.Proj.projections.add(DC),t.Proj.projections.add(OC),t.Proj.projections.add(PC),t.Proj.projections.add(NC),t.Proj.projections.add(QC),t.Proj.projections.add(HC),t.Proj.projections.add(GC),t.Proj.projections.add(VC),t.Proj.projections.add(zC),t.Proj.projections.add(KC),t.Proj.projections.add(jC),t.Proj.projections.add(rx),t.Proj.projections.add(gx),t.Proj.projections.add(px),t.Proj.projections.add(vx),t.Proj.projections.add(bx),t.Proj.projections.add(Fx),t.Proj.projections.add(kx)}(Fb);const Dx="projection-manager.js";class Ox extends ig{static#xe=[{isActive:!0,code:"EPSG:3857",name:"WGS 84 / Pseudo-Mercator",proj4def:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs"},{isActive:!0,code:"EPSG:4326",name:"WGS 84",proj4def:"+proj=longlat +datum=WGS84 +no_defs +type=crs"},{isActive:!0,code:"EPSG:7789",name:"ITRF2014",proj4def:"+proj=geocent +ellps=GRS80 +units=m +no_defs +type=crs"},{isActive:!0,code:"EPSG:3006",name:"SWEREF99 TM",proj4def:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"},{isActive:!0,code:"EPSG:3021",name:"RT90 2.5 gon V",proj4def:"+proj=tmerc +lat_0=0 +lon_0=15.8082777777778 +k=1 +x_0=1500000 +y_0=0 +ellps=bessel +towgs84=414.1,41.3,603.1,0.855,-2.141,7.023,0 +units=m +no_defs +type=crs"}];static async initAsync(t={}){rg.logDebug(Dx,"initAsync","Adding default projections");const e=[];return this.#xe.forEach((t=>{t.isActive?(rg.logDebug(Dx,"initAsync",`Adding projection (${t.code} ${t.name})`),e.push([t.code,t.proj4def])):rg.logDebug(Dx,"initAsync",`Skipping projection (${t.code} ${t.name})`)})),this.#Be(e),new Promise((t=>{t({filename:Dx,result:!0})}))}static setMap(t){}static getName(){return Dx}static#Be(t){Fb.defs(t),Ux(Fb)}static#Ee(t,e){Fb.defs(t,e),Ux(Fb)}static addProjection(t,e,i,n){this.#xe.push({active:n,code:t,name:e,proj4def:i}),this.#Ee(t,i)}static getSize(){return this.#xe.length||0}static getProjections(){return this.#xe}static hasProjection(t){return!!this.#xe.find((e=>e.code===t?.toUpperCase()))}}const Px="accessibility-manager.js",Nx="oltb-using-keyboard";class Qx extends ig{static async initAsync(t={}){return rg.logDebug(Px,"initAsync","Initialization started"),window.addEventListener(ep.browser.mouseDown,this.#Se.bind(this)),window.addEventListener(ep.browser.keyDown,this.#Fe.bind(this)),new Promise((t=>{t({filename:Px,result:!0})}))}static setMap(t){}static getName(){return Px}static#Fe(t){t.key===Qm.valueTab&&this.addAccessibilityClass()}static#Se(t){this.removeAccessibilityClass()}static addAccessibilityClass(){window.document.body.classList.add(Nx)}static removeAccessibilityClass(){window.document.body.classList.remove(Nx)}}const Hx=.75,Gx=.1;class Vx extends Ig{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",i=void 0!==t.tipLabel?t.tipLabel:"Overview map",n=void 0!==t.collapseLabel?t.collapseLabel:"‹";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const s=void 0!==t.label?t.label:"›";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,o=document.createElement("button");o.setAttribute("type","button"),o.title=i,o.appendChild(r),o.addEventListener(Ge,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const a=new Hg({view:t.view,controls:new ZA,interactions:new ZA});this.ovmap_=a,t.layers&&t.layers.forEach((function(t){a.addLayer(t)}));const l=document.createElement("div");l.className="ol-overviewmap-box",l.style.boxSizing="border-box",this.boxOverlay_=new Wg({position:[0,0],positioning:"center-center",element:l}),this.ovmap_.addOverlay(this.boxOverlay_);const A=e+" "+_r+" "+yr+(this.collapsed_&&this.collapsible_?" "+wr:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=A,c.appendChild(this.ovmapDiv_),c.appendChild(o);const h=this.boxOverlay_,u=this.boxOverlay_.getElement(),d=function(t){const e={clientX:(i=t).clientX,clientY:i.clientY};var i;const n=a.getEventCoordinate(e);h.setPosition(n)},g=t=>{const e=a.getEventCoordinateInternal(t),i=this.getMap();i.getView().setCenterInternal(e);const n=i.getOwnerDocument();n.removeEventListener("pointermove",d),n.removeEventListener("pointerup",g)};this.ovmapDiv_.addEventListener("pointerdown",(t=>{const e=this.getMap().getOwnerDocument();t.target===u&&e.addEventListener("pointermove",d),e.addEventListener("pointerup",g)}))}setMap(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Ai(t,Ye,this.handleMapPropertyChange_,this));const e=t.getView();e&&this.bindView_(e),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===Bg){const e=t.oldValue;e&&this.unbindView_(e);const i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||t.key!==xg&&t.key!==Cg||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new FA({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(vA.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(t){t.removeChangeListener(vA.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView().calculateExtentInternal(i);if(this.viewExtent_&&w(n,this.viewExtent_))return;this.viewExtent_=n;const s=e.getSize(),r=e.getView().calculateExtentInternal(s),o=e.getPixelFromCoordinateInternal(U(n)),a=e.getPixelFromCoordinateInternal(F(n)),l=Math.abs(o[0]-a[0]),A=Math.abs(o[1]-a[1]),c=s[0],h=s[1];l<c*Gx||A<h*Gx||l>c*Hx||A>h*Hx?this.resetExtent_():u(r,n)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtentInternal(i),s=e.getView(),r=Math.log(7.5)/Math.LN2;!function(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}(n,1/(Math.pow(2,r/2)*Gx)),s.fitInternal(Wn(n))}recenter_(){const t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView(),s=e.getView(),r=this.rotateWithView_?0:-n.getRotation(),o=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=n.getCenter(),A=n.getResolution(),c=s.getResolution(),h=i[0]*A/c,u=i[1]*A/c;if(o.setPosition(l),a){a.style.width=h+"px",a.style.height=u+"px";const t="rotate("+r+"rad)";a.style.transform=t}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=ci(this.ovmap_,Oc,(t=>{delete this.ovmapPostrenderKey_,this.updateBox_()})))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(wr),this.collapsed_?Ts(this.collapseLabel_,this.label_):Ts(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}const zx="units",Kx=[1,2,5],jx=25.4/.28;class Wx extends Ig{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+_r,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(zx,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(zx)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(zx,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,n=this.getUnits(),s="degrees"==n?"degrees":"m";let r=ye(i,t.resolution,e,s);const o=this.minWidth_*(this.dpi_||jx)/jx,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||jx)/jx:void 0;let l=o*r,A="";if("degrees"==n){const t=dt.degrees;l*=t,l<t/60?(A="″",r*=3600):l<t?(A="′",r*=60):A="°"}else if("imperial"==n)l<.9144?(A="in",r/=.0254):l<1609.344?(A="ft",r/=.3048):(A="mi",r/=1609.344);else if("nautical"==n)r/=1852,A="NM";else if("metric"==n)l<1e-6?(A="nm",r*=1e9):l<.001?(A="μm",r*=1e6):l<1?(A="mm",r*=1e3):l<1e3?A="m":(A="km",r/=1e3);else{if("us"!=n)throw new Error("Invalid units");l<.9144?(A="in",r*=39.37):l<1609.344?(A="ft",r/=.30480061):(A="mi",r/=1609.3472)}let c,h,u,d,g,p=3*Math.floor(Math.log(o*r)/Math.log(10)),f=0;for(;;){u=Math.floor(p/3);const t=Math.pow(10,u);if(c=Kx[(p%3+3)%3]*t,h=Math.round(c/r),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&h>=a){c=f,h=d,u=g;break}if(h>=o)break;f=c,d=h,g=u,++p}const m=this.scaleBar_?this.createScaleBar(h,c,A):c.toFixed(u<0?-u:0)+" "+A;this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const n=this.getScaleForResolution(),s=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),r=this.scaleBarSteps_,o=t/r,a=[this.createMarker("absolute")];for(let n=0;n<r;++n){const s=n%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${s}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(n%2==0||2===r?this.createStepText(n,t,!1,e,i):"")+"</div>")}a.push(this.createStepText(r,t,!0,e,i));return(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+s+"</div>":"")+a.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,i,n,s){const r=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+s);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${i?e+"px":"unset"};">`+r+"</div>"}getScaleForResolution(){return ye(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||jx)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}class $x extends Ig{#Y="base-tool.js";constructor(t={}){super({element:t.element??lp.getToolbarElement()}),t.filename&&(this.#Y=t.filename)}detachGlobalListeners(){}getName(){return this.#Y}onClickTool(t){rg.logDebug(this.#Y,"onClickTool","User clicked tool")}}const Yx=Jg.getConfig().animationDuration.normal,Xx=Object.freeze({map:void 0,coordinates:[0,0],zoom:void 0,rotation:void 0,duration:Yx,onDone:void 0}),qx=function(t){if(!(t=Fh.merge(Fh.cloneDeep(Xx),t)).map)return;const e=t.map.getView();e&&(e.getAnimating()&&e.cancelAnimations(),e.animate({rotation:t.rotation,center:xe(t.coordinates),zoom:t.zoom,duration:t.duration,easing:wi},(function(e){t.onDone&&t.onDone(e)})))},Zx=Object.freeze({overviewTool:"A",bookmarkTool:"B",coordinatesTool:"C",directionTool:"D",exportPngTool:"E",fullscreenTool:"F",myLocationTool:"G",homeTool:"H",infoTool:"I",graticuleTool:"J",scaleLineTool:"K",layerTool:"L",measureTool:"M",resetNorthTool:"N",importVectorLayerTool:"O",drawTool:"P",zoomInTool:"Q",refreshPageTool:"R",splitViewTool:"S",themeTool:"T",zoomboxTool:"U",editTool:"V",zoomOutTool:"W",scissorsTool:"X",toolboxTool:"Y",magnifyTool:"Z",helpTool:"1",settingsTool:"2",translationTool:"3",debugInfoTool:"4"}),Jx="context-menu-tool.js",tB="oltb-context-menu",eB=Object.freeze({name:"MainContextMenu"});class iB extends $x{static#Ie=!1;static#bt=[];#Le=[];static addItem(t){this.#bt.push(t)}constructor(t={}){super({filename:Jx,element:tp.createElement({element:"ul",class:tB,attributes:{tabindex:"-1"},listeners:{keydown:Hm}})}),this.options=Fh.merge(Fh.cloneDeep(eB),t),this.menu=this.element;const e=Jg.getConfig().urlParameter.debug;iB.#Ie="true"===F_.getParameter(e),iB.#bt.forEach((t=>{this.addMenuItem(t)}));const i=lp.getMapElement();tp.appendChildren(i,[this.menu]),i.addEventListener(ep.browser.contextMenu,this.#Me.bind(this)),i.addEventListener(ep.browser.click,this.#Te.bind(this)),i.addEventListener(ep.browser.keyUp,this.#Re.bind(this)),this.uiRefMapElement=i}getName(){return super.getName()}#ke(t,e){const i=lp.getMapElement().offsetHeight,n=this.menu.offsetHeight,s=i-e,r=n-s,o=e-r-16,a=r<0,l=t,A=a?e:o;return rg.logDebug(Jx,"getMenuCoordinatesInView",{mapHeight:i,menuHeight:n,distanceAvailable:s,distanceOutBounds:r,isMenuInBounds:a,originalX:t,originalY:e,menuX:l,menuY:A,dY:o}),{x:l,y:A}}#Ue(t){return Fh.has(t,["i18nKey"])}#Me(t){this.show(t)}#Te(t){this.hide(t)}#Re(t){t.key===Qm.valueEscape&&this.hide()}getSize(){return this.#Le.length||0}addMenuSeparator(){const t=tp.createElement({element:"li",class:`${tB}__divider`});return tp.appendChildren(this.menu,[t]),t}addMenuItem(t){if(!this.#Ue(t))return this.addMenuSeparator();this.#Le.push(t);const e=Mm.get(t.i18nKey),i=tp.createElement({element:"li",class:`${tB}__item`,attributes:{tabindex:"0"},listeners:{click:this.click.bind(this,t),keyup:e=>{e.key===Qm.valueEnter&&this.click(t)}}}),n=tp.createElement({element:"span",html:t.icon,class:`${tB}__icon`}),s=tp.createElement({element:"span",text:e,class:`${tB}__text`,attributes:{"data-oltb-i18n":t.i18nKey}});return tp.appendChildren(i,[n,s]),tp.appendChildren(this.menu,[i]),i}show(t){iB.#Ie||t.preventDefault();const e=this.getMap();if(!e)return;const i=Jg.getConfig().projection;this.coordinates=Le(e.getEventCoordinate(t),i.default,i.wgs84),this.menu.classList.add(`${tB}--show`);const n=this.#ke(t.clientX,t.clientY);this.menu.style.left=`${n.x}px`,this.menu.style.top=`${n.y}px`,this.menu.focus()}hide(){this.menu.classList.remove(`${tB}--show`)}click(t){t.fn(this.getMap(),this.coordinates,this.target),this.hide()}}const nB=function(t,e){return!("TEXTAREA"===window.document.activeElement.nodeName||"INPUT"===window.document.activeElement.nodeName||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey||t.key.toUpperCase()===Qm.valueOperatingSystem||t.key.toUpperCase()!==e)},sB="oltb-tool-button",rB="tools.homeTool",oB=Jg.getConfig().location.default,aB=Object.freeze({lon:oB.lon,lat:oB.lat,zoom:oB.zoom,rotation:oB.rotation,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onNavigatedHome:void 0}),lB=rp.homeTool,AB=Object.freeze({lon:oB.lon,lat:oB.lat,zoom:oB.zoom,rotation:oB.rotation});const cB=function(t,e){return t!==$_.type.iconMarker&&t!==$_.type.windBarb&&t!==$_.type.measurement&&t!==$_.type.layer&&e.getType()!==dy.LineString&&e.getType()!==dy.Point},hB="oltb-tool-button",uB="oltb-toolbox-section",dB="oltb-draw",gB="tools.drawTool",pB="commons",fB=Object.freeze({circleSize:5,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onAbort:void 0,onError:void 0,onIntersected:void 0,onSnapped:void 0,onUnSnapped:void 0}),mB=rp.drawTool,_B=Object.freeze({isActive:!1,isCollapsed:!1,toolType:dy.Polygon,strokeWidth:"2.5",strokeColor:"#0166A5FF",fillColor:"#D7E3FA80"});var yB,wB={exports:{}};var vB=(yB||(yB=1,function(t,e){!function(t){class e{static equalsWithTolerance(t,e,i){return Math.abs(t-e)<=i}}class i extends Error{constructor(t){super(t),this.name=Object.keys({Exception:i})[0]}toString(){return this.message}}class n extends i{constructor(t){super(t),this.name=Object.keys({IllegalArgumentException:n})[0]}}class s{constructor(t,e){this.low=e||0,this.high=t||0}static toBinaryString(t){let e,i="";for(e=2147483648;e>0;e>>>=1)i+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)i+=(t.low&e)===e?"1":"0";return i}}function r(){}function o(){}function a(){}r.NaN=NaN,r.isNaN=t=>Number.isNaN(t),r.isInfinite=t=>!Number.isFinite(t),r.MAX_VALUE=Number.MAX_VALUE,r.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,r.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const t=2146435072,e=new Float64Array(1),i=new Int32Array(e.buffer);r.doubleToLongBits=function(n){e[0]=n;let r=0|i[0],o=0|i[1];return(o&t)===t&&1048575&o&&0!==r&&(r=0,o=2146959360),new s(o,r)},r.longBitsToDouble=function(t){return i[0]=t.low,i[1]=t.high,e[0]}}():function(){const t=1023,e=Math.log2,i=Math.floor,n=Math.pow,o=function(){for(let t=53;t>0;t--){const s=n(2,t)-1;if(i(e(s))+1===t)return s}return 0}();r.doubleToLongBits=function(r){let a,l,A,c,h,u,d,g,p;if(r<0||1/r===Number.NEGATIVE_INFINITY?(u=1<<31,r=-r):u=0,0===r)return p=0,g=u,new s(g,p);if(r===1/0)return p=0,g=2146435072|u,new s(g,p);if(r!=r)return p=0,g=2146959360,new s(g,p);if(c=0,p=0,a=i(r),a>1)if(a<=o)c=i(e(a)),c<=20?(p=0,g=a<<20-c&1048575):(A=c-20,l=n(2,A),p=a%l<<32-A,g=a/l&1048575);else for(A=a,p=0;l=A/2,A=i(l),0!==A;)c++,p>>>=1,p|=(1&g)<<31,g>>>=1,l!==A&&(g|=524288);if(d=c+t,h=0===a,a=r-a,c<52&&0!==a)for(A=0;;){if(l=2*a,l>=1?(a=l-1,h?(d--,h=!1):(A<<=1,A|=1,c++)):(a=l,h?0==--d&&(c++,h=!1):(A<<=1,c++)),20===c)g|=A,A=0;else if(52===c){p|=A;break}if(1===l){c<20?g|=A<<20-c:c<52&&(p|=A<<52-c);break}}return g|=d<<20,g|=u,new s(g,p)},r.longBitsToDouble=function(e){let i,s,r,o;const a=e.high,l=e.low,A=a&1<<31?-1:1;for(r=((2146435072&a)>>20)-t,o=0,s=1<<19,i=1;i<=20;i++)a&s&&(o+=n(2,-i)),s>>>=1;for(s=1<<31,i=21;i<=52;i++)l&s&&(o+=n(2,-i)),s>>>=1;if(-1023===r){if(0===o)return 0*A;r=-1022}else{if(1024===r)return 0===o?A/0:NaN;o+=1}return A*o*n(2,r)}}();class l extends i{constructor(t){super(t),this.name=Object.keys({RuntimeException:l})[0]}}class A extends l{constructor(){super(),A.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)l.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];l.constructor_.call(this,t)}}}class c{static isTrue(){if(1===arguments.length){const t=arguments[0];c.isTrue(t,null)}else if(2===arguments.length){const t=arguments[1];if(!arguments[0])throw null===t?new A:new A(t)}}static shouldNeverReachHere(){if(0===arguments.length)c.shouldNeverReachHere(null);else if(1===arguments.length){const t=arguments[0];throw new A("Should never reach here"+(null!==t?": "+t:""))}}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];c.equals(t,e,null)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(!e.equals(t))throw new A("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))}}}function h(){}function u(){}const d=new ArrayBuffer(8),g=new Float64Array(d),p=new Int32Array(d);class f{constructor(){f.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)f.constructor_.call(this,0,0);else if(1===arguments.length){const t=arguments[0];f.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];f.constructor_.call(this,t,e,f.NULL_ORDINATE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.x=t,this.y=e,this.z=i}}static hashCode(t){return g[0]=t,p[0]^p[1]}equals2D(){if(1===arguments.length){const t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){const t=arguments[0],i=arguments[1];return!!e.equalsWithTolerance(this.x,t.x,i)&&!!e.equalsWithTolerance(this.y,t.y,i)}}setM(t){throw new n("Invalid ordinate index: "+f.M)}equals3D(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||r.isNaN(this.getZ())&&r.isNaN(t.getZ()))}setX(t){this.x=t}compareTo(t){const e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}getX(){return this.x}copy(){return new f(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(t){const e=this.x-t.x,i=this.y-t.y,n=this.getZ()-t.getZ();return Math.sqrt(e*e+i*i+n*n)}getY(){return this.y}getM(){return r.NaN}setOrdinate(t,e){switch(t){case f.X:this.x=e;break;case f.Y:this.y=e;break;case f.Z:this.setZ(e);break;default:throw new n("Invalid ordinate index: "+t)}}getZ(){return this.z}getOrdinate(t){switch(t){case f.X:return this.x;case f.Y:return this.y;case f.Z:return this.getZ()}throw new n("Invalid ordinate index: "+t)}equals(t){return t instanceof f&&this.equals2D(t)}equalInZ(t,i){return e.equalsWithTolerance(this.getZ(),t.getZ(),i)}setZ(t){this.z=t}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return c.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}setY(t){this.y=t}distance(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}hashCode(){let t=17;return t=37*t+f.hashCode(this.x),t=37*t+f.hashCode(this.y),t}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}get interfaces_(){return[o,h,a]}}class m{constructor(){m.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)m.constructor_.call(this,2);else if(1===arguments.length){const t=arguments[0];if(2!==t&&3!==t)throw new n("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}static compare(t,e){return t<e?-1:t>e?1:r.isNaN(t)?r.isNaN(e)?0:-1:r.isNaN(e)?1:0}compare(t,e){const i=m.compare(t.x,e.x);if(0!==i)return i;const n=m.compare(t.y,e.y);return 0!==n?n:this._dimensionsToTest<=2?0:m.compare(t.getZ(),e.getZ())}get interfaces_(){return[u]}}f.DimensionalComparator=m,f.NULL_ORDINATE=r.NaN,f.X=0,f.Y=1,f.Z=2,f.M=3;class _ extends f{constructor(){super(),_.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)f.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof _){const t=arguments[0];f.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof f){const t=arguments[0];f.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];f.constructor_.call(this,t,e,f.NULL_ORDINATE)}}setOrdinate(t,e){switch(t){case _.X:this.x=e;break;case _.Y:this.y=e;break;default:throw new n("Invalid ordinate index: "+t)}}setZ(t){throw new n("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new _(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}getZ(){return f.NULL_ORDINATE}getOrdinate(t){switch(t){case _.X:return this.x;case _.Y:return this.y}throw new n("Invalid ordinate index: "+t)}}_.X=0,_.Y=1,_.Z=-1,_.M=-1;class y extends f{constructor(){super(),y.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)f.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof y){const t=arguments[0];f.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof f){const t=arguments[0];f.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];f.constructor_.call(this,t,e,f.NULL_ORDINATE),this._m=i}}setM(t){this._m=t}setZ(t){throw new n("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new y(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}getM(){return this._m}setOrdinate(t,e){switch(t){case y.X:this.x=e;break;case y.Y:this.y=e;break;case y.M:this._m=e;break;default:throw new n("Invalid ordinate index: "+t)}}getZ(){return f.NULL_ORDINATE}getOrdinate(t){switch(t){case y.X:return this.x;case y.Y:return this.y;case y.M:return this._m}throw new n("Invalid ordinate index: "+t)}}y.X=0,y.Y=1,y.Z=-1,y.M=2;class w extends f{constructor(){super(),w.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)f.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof w){const t=arguments[0];f.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof f){const t=arguments[0];f.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];f.constructor_.call(this,t,e,i),this._m=n}}setM(t){this._m=t}getOrdinate(t){switch(t){case f.X:return this.x;case f.Y:return this.y;case f.Z:return this.getZ();case f.M:return this.getM()}throw new n("Invalid ordinate index: "+t)}copy(){return new w(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}getM(){return this._m}setOrdinate(t,e){switch(t){case f.X:this.x=e;break;case f.Y:this.y=e;break;case f.Z:this.z=e;break;case f.M:this._m=e;break;default:throw new n("Invalid ordinate index: "+t)}}}function v(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}class b{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class C extends i{constructor(t){super(t),this.name=Object.keys({IndexOutOfBoundsException:C})[0]}}class x extends b{get(){}set(){}isEmpty(){}}class B extends i{constructor(t){super(t),this.name=Object.keys({NoSuchElementException:B})[0]}}class E extends x{constructor(t){super(),this.array=[],t instanceof b&&this.addAll(t)}get interfaces_(){return[x,b]}ensureCapacity(){}add(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(t){for(const e of t)this.array.push(e)}set(t,e){const i=this.array[t];return this.array[t]=e,i}iterator(){return new S(this)}get(t){if(t<0||t>=this.size())throw new C;return this.array[t]}isEmpty(){return 0===this.array.length}sort(t){t?this.array.sort(((e,i)=>t.compare(e,i))):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(t){for(let e=0,i=this.array.length;e<i;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}[Symbol.iterator](){return this.array.values()}}let S=class{constructor(t){this.arrayList=t,this.position=0}next(){if(this.position===this.arrayList.size())throw new B;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(t){return this.arrayList.set(this.position-1,t)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}};class F extends E{constructor(){super(),F.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.ensureCapacity(t.length),this.add(t,e)}}getCoordinate(t){return this.get(t)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&v(arguments[0],b)){const t=arguments[1];let e=!1;for(let i=arguments[0].iterator();i.hasNext();)this.add(i.next(),t),e=!0;return e}return super.addAll.apply(this,arguments)}clone(){const t=super.clone.call(this);for(let e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}closeRing(){if(this.size()>0){const t=this.get(0).copy();this.add(t,!1)}}toCoordinateArray(){if(0===arguments.length)return this.toArray(F.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(F.coordArrayType);const t=this.size(),e=new Array(t).fill(null);for(let i=0;i<t;i++)e[i]=this.get(t-i-1);return e}}add(){if(1===arguments.length){const t=arguments[0];return super.add.call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e,!0),!0}if(arguments[0]instanceof f&&"boolean"==typeof arguments[1]){const t=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(t))return null;super.add.call(this,t)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return this.add(t,e),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(arguments[2])for(let i=0;i<t.length;i++)this.add(t[i],e);else for(let i=t.length-1;i>=0;i--)this.add(t[i],e);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1];if(!arguments[2]){const i=this.size();if(i>0){if(t>0&&this.get(t-1).equals2D(e))return null;if(t<i&&this.get(t).equals2D(e))return null}}super.add.call(this,t,e)}}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];let s=1;i>n&&(s=-1);for(let r=i;r!==n;r+=s)this.add(t[r],e);return!0}}}F.coordArrayType=new Array(0).fill(null);class I{filter(t,e){}isGeometryChanged(){}isDone(){}}class L{constructor(){L.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof f){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof L){const t=arguments[0];this.init(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.init(t,e,i,n)}}static intersects(){if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];let s=Math.min(i.x,n.x),r=Math.max(i.x,n.x),o=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return!(o>r||a<s||(s=Math.min(i.y,n.y),r=Math.max(i.y,n.y),o=Math.min(t.y,e.y),a=Math.max(t.y,e.y),o>r||a<s))}}getArea(){return this.getWidth()*this.getHeight()}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof f){const t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof L){const t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e))}}compareTo(t){const e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}translate(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}copy(){return new L(this)}expandBy(){if(1===arguments.length){const t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=e,this._maxy+=e,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof L){const t=arguments[0];return this.covers(t)}if(arguments[0]instanceof f){const t=arguments[0];return this.covers(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.covers(t,e)}}hashCode(){let t=17;return t=37*t+f.hashCode(this._minx),t=37*t+f.hashCode(this._maxx),t=37*t+f.hashCode(this._miny),t=37*t+f.hashCode(this._maxy),t}equals(t){if(!(t instanceof L))return!1;const e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}intersection(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new L;const e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,s=this._maxy<t._maxy?this._maxy:t._maxy;return new L(e,n,i,s)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof f){const t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof L){const t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];return!this.isNull()&&t>=this._minx&&t<=this._maxx&&e>=this._miny&&e<=this._maxy}}intersects(){if(1===arguments.length){if(arguments[0]instanceof L){const t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof f){const t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof f&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1];return!(this.isNull()||(t.x<e.x?t.x:e.x)>this._maxx||(t.x>e.x?t.x:e.x)<this._minx||(t.y<e.y?t.y:e.y)>this._maxy||(t.y>e.y?t.y:e.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return!this.isNull()&&!(t>this._maxx||t<this._minx||e>this._maxy||e<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}minExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t<e?t:e}getWidth(){return this.isNull()?0:this._maxx-this._minx}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const t=this.getWidth(),e=this.getHeight();return t>e?t:e}centre(){return this.isNull()?null:new f((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof f){const t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof L){const t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t.x,e.x,t.y,e.y)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];t<e?(this._minx=t,this._maxx=e):(this._minx=e,this._maxx=t),i<n?(this._miny=i,this._maxy=n):(this._miny=n,this._maxy=i)}}getMaxY(){return this._maxy}distance(t){if(this.intersects(t))return 0;let e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);let i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)}get interfaces_(){return[o,a]}}class M{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class T{constructor(t){this.value=t}intValue(){return this.value}compareTo(t){return this.value<t?-1:this.value>t?1:0}static compare(t,e){return t<e?-1:t>e?1:0}static isNan(t){return Number.isNaN(t)}static valueOf(t){return new T(t)}}class R{static isWhitespace(t){return t<=32&&t>=0||127===t}static toUpperCase(t){return t.toUpperCase()}}class k extends i{constructor(t){super(t),this.name=Object.keys({IllegalStateException:k})[0]}}class U{constructor(){U.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this.init(t)}else if(arguments[0]instanceof U){const t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){const t=arguments[0];U.constructor_.call(this,U.parse(t))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.init(t,e)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];return U.determinant(U.valueOf(t),U.valueOf(e),U.valueOf(i),U.valueOf(n))}if(arguments[3]instanceof U&&arguments[2]instanceof U&&arguments[0]instanceof U&&arguments[1]instanceof U){const t=arguments[1],e=arguments[2],i=arguments[3];return arguments[0].multiply(i).selfSubtract(t.multiply(e))}}static sqr(t){return U.valueOf(t).selfMultiply(t)}static valueOf(){if("string"==typeof arguments[0]){const t=arguments[0];return U.parse(t)}if("number"==typeof arguments[0])return new U(arguments[0])}static sqrt(t){return U.valueOf(t).sqrt()}static parse(t){let e=0;const i=t.length;for(;R.isWhitespace(t.charAt(e));)e++;let n=!1;if(e<i){const i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(n=!0))}const s=new U;let r=0,o=0,a=0,l=!1;for(;!(e>=i);){const i=t.charAt(e);if(e++,R.isDigit(i)){const t=i-"0";s.selfMultiply(U.TEN),s.selfAdd(t),r++}else{if("."!==i){if("e"===i||"E"===i){const i=t.substring(e);try{a=T.parseInt(i)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+i+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+i+"' at position "+e+" in string "+t)}o=r,l=!0}}let A=s;l||(o=r);const c=r-o-a;if(0===c)A=s;else if(c>0){const t=U.TEN.pow(c);A=s.divide(t)}else if(c<0){const t=U.TEN.pow(-c);A=s.multiply(t)}return n?A.negate():A}static createNaN(){return new U(r.NaN,r.NaN)}static copy(t){return new U(t)}static magnitude(t){const e=Math.abs(t),i=Math.log(e)/Math.log(10);let n=Math.trunc(Math.floor(i));return 10*Math.pow(10,n)<=e&&(n+=1),n}static stringOfChar(t,e){const i=new M;for(let n=0;n<e;n++)i.append(t);return i.toString()}le(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}extractSignificantDigits(t,e){let i=this.abs(),n=U.magnitude(i._hi);const s=U.TEN.pow(n);i=i.divide(s),i.gt(U.TEN)?(i=i.divide(U.TEN),n+=1):i.lt(U.ONE)&&(i=i.multiply(U.TEN),n-=1);const r=n+1,o=new M,a=U.MAX_PRINT_DIGITS-1;for(let e=0;e<=a;e++){t&&e===r&&o.append(".");const n=Math.trunc(i._hi);if(n<0)break;let s=!1,l=0;n>9?(s=!0,l="9"):l="0"+n,o.append(l),i=i.subtract(U.valueOf(n)).multiply(U.TEN),s&&i.selfAdd(U.TEN);let A=!0;const c=U.magnitude(i._hi);if(c<0&&Math.abs(c)>=a-e&&(A=!1),!A)break}return e[0]=n,o.toString()}sqr(){return this.multiply(this)}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}setValue(){if(arguments[0]instanceof U){const t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){const t=arguments[0];return this.init(t),this}}multiply(){if(arguments[0]instanceof U){const t=arguments[0];return t.isNaN()?U.createNaN():U.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){const t=arguments[0];return r.isNaN(t)?U.createNaN():U.copy(this).selfMultiply(t,0)}}isNaN(){return r.isNaN(this._hi)}reciprocal(){let t=null,e=null,i=null,n=null,s=null,r=null,o=null,a=null;s=1/this._hi,r=U.SPLIT*s,t=r-s,a=U.SPLIT*this._hi,t=r-t,e=s-t,i=a-this._hi,o=s*this._hi,i=a-i,n=this._hi-i,a=t*i-o+t*n+e*i+e*n,r=(1-o-a-s*this._lo)/this._hi;const l=s+r;return new U(l,s-l+r)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof U){const t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){const t=arguments[0];return this.add(-t)}}equals(){if(1===arguments.length&&arguments[0]instanceof U){const t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof U){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}min(t){return this.le(t)?this:t}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof U){const t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null,n=null,s=null,r=null,o=null,a=null,l=null,A=null;return o=this._hi/t,a=U.SPLIT*o,i=a-o,A=U.SPLIT*t,i=a-i,n=o-i,s=A-t,l=o*t,s=A-s,r=t-s,A=i*s-l+i*r+n*s+n*r,a=(this._hi-l-A+this._lo-o*e)/t,A=o+a,this._hi=A,this._lo=o-A+a,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof U){const t=arguments[0];let e=null,i=null,n=null,s=null,r=null,o=null,a=null,l=null;return r=this._hi/t._hi,o=U.SPLIT*r,e=o-r,l=U.SPLIT*t._hi,e=o-e,i=r-e,n=l-t._hi,a=r*t._hi,n=l-n,s=t._hi-n,l=e*n-a+e*s+i*n+i*s,o=(this._hi-a-l+this._lo-r*t._lo)/t._hi,l=r+o,new U(l,r-l+o)}if("number"==typeof arguments[0]){const t=arguments[0];return r.isNaN(t)?U.createNaN():U.copy(this).selfDivide(t,0)}}ge(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}pow(t){if(0===t)return U.valueOf(1);let e=new U(this),i=U.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&i.selfMultiply(e),n/=2,n>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i}ceil(){if(this.isNaN())return U.NaN;const t=Math.ceil(this._hi);let e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new U(t,e)}compareTo(t){const e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}rint(){return this.isNaN()?this:this.add(.5).floor()}max(t){return this.ge(t)?this:t}sqrt(){if(this.isZero())return U.valueOf(0);if(this.isNegative())return U.NaN;const t=1/Math.sqrt(this._hi),e=this._hi*t,i=U.valueOf(e),n=this.subtract(i.sqr())._hi*(.5*t);return i.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof U){const t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];let e=null,i=null,n=null,s=null,r=null,o=null;return n=this._hi+t,r=n-this._hi,s=n-r,s=t-r+(this._hi-s),o=s+this._lo,e=n+o,i=o+(n-e),this._hi=e+i,this._lo=i+(e-this._hi),this}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null,n=null,s=null,r=null,o=null,a=null,l=null,A=null;o=this._hi+t,s=this._lo+e,l=o-this._hi,A=s-this._lo,a=o-l,r=s-A,a=t-l+(this._hi-a),r=e-A+(this._lo-r),l=a+s,i=o+l,n=l+(o-i),l=r+n;const c=i+l,h=l+(i-c);return this._hi=c,this._lo=h,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof U){const t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){const t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null,n=null,s=null,r=null,o=null,a=null;o=U.SPLIT*this._hi,i=o-this._hi,a=U.SPLIT*t,i=o-i,n=this._hi-i,s=a-t,o=this._hi*t,s=a-s,r=t-s,a=i*s-o+i*r+n*s+n*r+(this._hi*e+this._lo*t);const l=o+a;i=o-l;const A=a+i;return this._hi=l,this._lo=A,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return U.NaN;const t=Math.floor(this._hi);let e=0;return t===this._hi&&(e=Math.floor(this._lo)),new U(t,e)}negate(){return this.isNaN()?this:new U(-this._hi,-this._lo)}clone(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}intValue(){return Math.trunc(this._hi)}toString(){const t=U.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),n=e[0]+1;let s=i;if("."===i.charAt(0))s="0"+i;else if(n<0)s="0."+U.stringOfChar("0",-n)+i;else if(-1===i.indexOf(".")){const t=n-i.length;s=i+U.stringOfChar("0",t)+".0"}return this.isNegative()?"-"+s:s}toSciNotation(){if(this.isZero())return U.SCI_NOT_ZERO;const t=this.getSpecialNumberString();if(null!==t)return t;const e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),n=U.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new k("Found leading zero: "+i);let s="";i.length>1&&(s=i.substring(1));const r=i.charAt(0)+"."+s;return this.isNegative()?"-"+r+n:r+n}abs(){return this.isNaN()?U.NaN:this.isNegative()?this.negate():new U(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}add(){if(arguments[0]instanceof U){const t=arguments[0];return U.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){const t=arguments[0];return U.copy(this).selfAdd(t)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){const t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof U){const t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._hi=t,this._lo=e}}gt(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?U.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[a,o,h]}}U.PI=new U(3.141592653589793,12246467991473532e-32),U.TWO_PI=new U(6.283185307179586,24492935982947064e-32),U.PI_2=new U(1.5707963267948966,6123233995736766e-32),U.E=new U(2.718281828459045,14456468917292502e-32),U.NaN=new U(r.NaN,r.NaN),U.EPS=123259516440783e-46,U.SPLIT=134217729,U.MAX_PRINT_DIGITS=32,U.TEN=U.valueOf(10),U.ONE=U.valueOf(1),U.SCI_NOT_EXPONENT_CHAR="E",U.SCI_NOT_ZERO="0.0E0";class D{static orientationIndex(t,e,i){const n=D.orientationIndexFilter(t,e,i);if(n<=1)return n;const s=U.valueOf(e.x).selfAdd(-t.x),r=U.valueOf(e.y).selfAdd(-t.y),o=U.valueOf(i.x).selfAdd(-e.x),a=U.valueOf(i.y).selfAdd(-e.y);return s.selfMultiply(a).selfSubtract(r.selfMultiply(o)).signum()}static signOfDet2x2(){if(arguments[3]instanceof U&&arguments[2]instanceof U&&arguments[0]instanceof U&&arguments[1]instanceof U){const t=arguments[1],e=arguments[2],i=arguments[3];return arguments[0].multiply(i).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=U.valueOf(t),r=U.valueOf(e),o=U.valueOf(i),a=U.valueOf(n);return s.multiply(a).selfSubtract(r.multiply(o)).signum()}}static intersection(t,e,i,n){const s=new U(t.y).selfSubtract(e.y),o=new U(e.x).selfSubtract(t.x),a=new U(t.x).selfMultiply(e.y).selfSubtract(new U(e.x).selfMultiply(t.y)),l=new U(i.y).selfSubtract(n.y),A=new U(n.x).selfSubtract(i.x),c=new U(i.x).selfMultiply(n.y).selfSubtract(new U(n.x).selfMultiply(i.y)),h=o.multiply(c).selfSubtract(A.multiply(a)),u=l.multiply(a).selfSubtract(s.multiply(c)),d=s.multiply(A).selfSubtract(l.multiply(o)),g=h.selfDivide(d).doubleValue(),p=u.selfDivide(d).doubleValue();return r.isNaN(g)||r.isInfinite(g)||r.isNaN(p)||r.isInfinite(p)?null:new f(g,p)}static orientationIndexFilter(t,e,i){let n=null;const s=(t.x-i.x)*(e.y-i.y),r=(t.y-i.y)*(e.x-i.x),o=s-r;if(s>0){if(r<=0)return D.signum(o);n=s+r}else{if(!(s<0))return D.signum(o);if(r>=0)return D.signum(o);n=-s-r}const a=D.DP_SAFE_EPSILON*n;return o>=a||-o>=a?D.signum(o):2}static signum(t){return t>0?1:t<0?-1:0}}D.DP_SAFE_EPSILON=1e-15;class O{getCoordinate(){}getCoordinateCopy(t){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(t){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(t){}copy(){}getY(t){}toCoordinateArray(){}getM(t){if(this.hasM()){const e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return r.NaN}setOrdinate(t,e,i){}getZ(t){return this.hasZ()?this.getOrdinate(t,2):r.NaN}size(){}getOrdinate(t,e){}get interfaces_(){return[h]}}O.X=0,O.Y=1,O.Z=2,O.M=3;class P{static isCCW(){if(arguments[0]instanceof Array){const t=arguments[0],e=t.length-1;if(e<3)throw new n("Ring has fewer than 4 points, so orientation cannot be determined");let i=t[0],s=0;for(let n=1;n<=e;n++){const e=t[n];e.y>i.y&&(i=e,s=n)}let r=s;do{r-=1,r<0&&(r=e)}while(t[r].equals2D(i)&&r!==s);let o=s;do{o=(o+1)%e}while(t[o].equals2D(i)&&o!==s);const a=t[r],l=t[o];if(a.equals2D(i)||l.equals2D(i)||a.equals2D(l))return!1;const A=P.index(a,i,l);let c=null;return c=0===A?a.x>l.x:A>0,c}if(v(arguments[0],O)){const t=arguments[0],e=t.size()-1;if(e<3)throw new n("Ring has fewer than 4 points, so orientation cannot be determined");let i=t.getCoordinate(0),s=0;for(let n=1;n<=e;n++){const e=t.getCoordinate(n);e.y>i.y&&(i=e,s=n)}let r=null,o=s;do{o-=1,o<0&&(o=e),r=t.getCoordinate(o)}while(r.equals2D(i)&&o!==s);let a=null,l=s;do{l=(l+1)%e,a=t.getCoordinate(l)}while(a.equals2D(i)&&l!==s);if(r.equals2D(i)||a.equals2D(i)||r.equals2D(a))return!1;const A=P.index(r,i,a);let c=null;return c=0===A?r.x>a.x:A>0,c}}static index(t,e,i){return D.orientationIndex(t,e,i)}}P.CLOCKWISE=-1,P.RIGHT=P.CLOCKWISE,P.COUNTERCLOCKWISE=1,P.LEFT=P.COUNTERCLOCKWISE,P.COLLINEAR=0,P.STRAIGHT=P.COLLINEAR;class N{static intersection(t,e,i,n){const s=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,A=i.x<n.x?i.x:n.x,c=i.y<n.y?i.y:n.y,h=i.x>n.x?i.x:n.x,u=i.y>n.y?i.y:n.y,d=((s>A?s:A)+(a<h?a:h))/2,g=((o>c?o:c)+(l<u?l:u))/2,p=t.x-d,m=t.y-g,_=e.x-d,y=e.y-g,w=i.x-d,v=i.y-g,b=n.x-d,C=n.y-g,x=m-y,B=_-p,E=p*y-_*m,S=v-C,F=b-w,I=w*C-b*v,L=x*F-S*B,M=(B*I-F*E)/L,T=(S*E-x*I)/L;return r.isNaN(M)||r.isInfinite(M)||r.isNaN(T)||r.isInfinite(T)?null:new f(M+d,T+g)}}class Q{static arraycopy(t,e,i,n,s){let r=0;for(let o=e;o<e+s;o++)i[n+r]=t[o],r++}static getProperty(t){return{"line.separator":"\n"}[t]}}class H{static log10(t){const e=Math.log(t);return r.isInfinite(e)||r.isNaN(e)?e:e/H.LOG_10}static min(t,e,i,n){let s=t;return e<s&&(s=e),i<s&&(s=i),n<s&&(s=n),s}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}}static average(t,e){return(t+e)/2}static wrap(t,e){return t<0?e- -t%e:t%e}static max(){if(3===arguments.length){const t=arguments[1],e=arguments[2];let i=arguments[0];return t>i&&(i=t),e>i&&(i=e),i}if(4===arguments.length){const t=arguments[1],e=arguments[2],i=arguments[3];let n=arguments[0];return t>n&&(n=t),e>n&&(n=e),i>n&&(n=i),n}}}H.LOG_10=Math.log(10);class G{static pointToSegmentString(t,e){if(0===e.length)throw new n("Line array must contain at least one vertex");let i=t.distance(e[0]);for(let n=0;n<e.length-1;n++){const s=G.pointToSegment(t,e[n],e[n+1]);s<i&&(i=s)}return i}static segmentToSegment(t,e,i,n){if(t.equals(e))return G.pointToSegment(t,i,n);if(i.equals(n))return G.pointToSegment(n,t,e);let s=!1;if(L.intersects(t,e,i,n)){const r=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(0===r)s=!0;else{const o=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y),a=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/r,l=o/r;(l<0||l>1||a<0||a>1)&&(s=!0)}}else s=!0;return s?H.min(G.pointToSegment(t,i,n),G.pointToSegment(e,i,n),G.pointToSegment(i,t,e),G.pointToSegment(n,t,e)):0}static pointToLinePerpendicular(t,e,i){const n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),s=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(s)*Math.sqrt(n)}static pointToSegment(t,e,i){if(e.x===i.x&&e.y===i.y)return t.distance(e);const n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),s=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;if(s<=0)return t.distance(e);if(s>=1)return t.distance(i);const r=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(r)*Math.sqrt(n)}}class V{static ofLine(t){const e=t.size();if(e<=1)return 0;let i=0;const n=new f;t.getCoordinate(0,n);let s=n.x,r=n.y;for(let o=1;o<e;o++){t.getCoordinate(o,n);const e=n.x,a=n.y,l=e-s,A=a-r;i+=Math.sqrt(l*l+A*A),s=e,r=a}return i}}class z{filter(t){}}class K extends i{constructor(t){super(t),this.name=Object.keys({UnsupportedOperationException:K})[0]}}class j{static measures(t){return t instanceof _?0:t instanceof y||t instanceof w?1:0}static create(){if(1===arguments.length){const t=arguments[0];return j.create(t,0)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return 2===t?new _:3===t&&0===e?new f:3===t&&1===e?new y:4===t&&1===e?new w:new f}}static dimension(t){return t instanceof _?2:t instanceof y?3:t instanceof w?4:3}}class W{static scroll(t,e){const i=W.indexOf(e,t);if(i<0)return null;const n=new Array(t.length).fill(null);Q.arraycopy(t,i,n,0,t.length-i),Q.arraycopy(t,0,n,t.length-i,i),Q.arraycopy(n,0,t,0,t.length)}static removeRepeatedPoints(t){return W.hasRepeatedPoints(t)?new F(t,!1).toCoordinateArray():t}static reverse(t){const e=t.length-1,i=Math.trunc(e/2);for(let n=0;n<=i;n++){const i=t[n];t[n]=t[e-n],t[e-n]=i}}static removeNull(t){let e=0;for(let i=0;i<t.length;i++)null!==t[i]&&e++;const i=new Array(e).fill(null);if(0===e)return i;let n=0;for(let e=0;e<t.length;e++)null!==t[e]&&(i[n++]=t[e]);return i}static copyDeep(){if(1===arguments.length){const t=arguments[0],e=new Array(t.length).fill(null);for(let i=0;i<t.length;i++)e[i]=t[i].copy();return e}if(5===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4];for(let r=0;r<s;r++)i[n+r]=t[e+r].copy()}}static isEqualReversed(t,e){for(let i=0;i<t.length;i++){const n=t[i],s=e[t.length-i-1];if(0!==n.compareTo(s))return!1}return!0}static envelope(t){const e=new L;for(let i=0;i<t.length;i++)e.expandToInclude(t[i]);return e}static extract(t,e,i){e=H.clamp(e,0,t.length);let n=(i=H.clamp(i,-1,t.length))-e+1;i<0&&(n=0),e>=t.length&&(n=0),i<e&&(n=0);const s=new Array(n).fill(null);if(0===n)return s;let r=0;for(let n=e;n<=i;n++)s[r++]=t[n];return s}static isRing(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}static ptNotInList(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(W.indexOf(n,e)<0)return n}return null}static equals(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(0!==i.compare(t[n],e[n]))return!1;return!0}}static intersection(t,e){const i=new F;for(let n=0;n<t.length;n++)e.intersects(t[n])&&i.add(t[n],!0);return i.toCoordinateArray()}static measures(t){if(null===t||0===t.length)return 0;let e=0;for(const i of t)e=Math.max(e,j.measures(i));return e}static hasRepeatedPoints(t){for(let e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}static toCoordinateArray(t){return t.toArray(W.coordArrayType)}static dimension(t){if(null===t||0===t.length)return 3;let e=0;for(const i of t)e=Math.max(e,j.dimension(i));return e}static atLeastNCoordinatesOrNothing(t,e){return e.length>=t?e:[]}static indexOf(t,e){for(let i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1}static increasingDirection(t){for(let e=0;e<Math.trunc(t.length/2);e++){const i=t.length-1-e,n=t[e].compareTo(t[i]);if(0!==n)return n}return 1}static compare(t,e){let i=0;for(;i<t.length&&i<e.length;){const n=t[i].compareTo(e[i]);if(0!==n)return n;i++}return i<e.length?-1:i<t.length?1:0}static minCoordinate(t){let e=null;for(let i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e}}W.ForwardComparator=class{compare(t,e){const i=t,n=e;return W.compare(i,n)}get interfaces_(){return[u]}},W.BidirectionalComparator=class{compare(t,e){const i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;const s=W.compare(i,n);return W.isEqualReversed(i,n)?0:s}OLDcompare(t,e){const i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;const s=W.increasingDirection(i),r=W.increasingDirection(n);let o=s>0?0:i.length-1,a=r>0?0:i.length-1;for(let t=0;t<i.length;t++){const t=i[o].compareTo(n[a]);if(0!==t)return t;o+=s,a+=r}return 0}get interfaces_(){return[u]}},W.coordArrayType=new Array(0).fill(null);class ${static toDimensionSymbol(t){switch(t){case $.FALSE:return $.SYM_FALSE;case $.TRUE:return $.SYM_TRUE;case $.DONTCARE:return $.SYM_DONTCARE;case $.P:return $.SYM_P;case $.L:return $.SYM_L;case $.A:return $.SYM_A}throw new n("Unknown dimension value: "+t)}static toDimensionValue(t){switch(R.toUpperCase(t)){case $.SYM_FALSE:return $.FALSE;case $.SYM_TRUE:return $.TRUE;case $.SYM_DONTCARE:return $.DONTCARE;case $.SYM_P:return $.P;case $.SYM_L:return $.L;case $.SYM_A:return $.A}throw new n("Unknown dimension symbol: "+t)}}$.P=0,$.L=1,$.A=2,$.FALSE=-1,$.TRUE=-2,$.DONTCARE=-3,$.SYM_FALSE="F",$.SYM_TRUE="T",$.SYM_DONTCARE="*",$.SYM_P="0",$.SYM_L="1",$.SYM_A="2";class Y{constructor(){Y.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===Y.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(t){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(t){return this===t||this.equalsExact(t,0)}geometryChanged(){this.apply(Y.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(t){return null!==t&&this.norm().equalsExact(t.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let t;if(1===arguments.length){const e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){const e=arguments[0],i=arguments[1];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e,i)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(t){if(t.getTypeCode()===Y.TYPECODE_GEOMETRYCOLLECTION)throw new n("This method does not support GeometryCollection arguments")}equal(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i}norm(){const t=this.copy();return t.normalize(),t}reverse(){const t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}copy(){const t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new L(this._envelope)}setSRID(t){this._SRID=t}setUserData(t){this._userData=t}compare(t,e){const i=t.iterator(),n=e.iterator();for(;i.hasNext()&&n.hasNext();){const t=i.next(),e=n.next(),s=t.compareTo(e);if(0!==s)return s}return i.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(t){return this.getTypeCode()==t.getTypeCode()}get interfaces_(){return[h,o,a]}getClass(){return Y}static hasNonEmptyElements(t){for(let e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}static hasNullElements(t){for(let e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}Y.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},Y.TYPECODE_POINT=0,Y.TYPECODE_MULTIPOINT=1,Y.TYPECODE_LINESTRING=2,Y.TYPECODE_LINEARRING=3,Y.TYPECODE_MULTILINESTRING=4,Y.TYPECODE_POLYGON=5,Y.TYPECODE_MULTIPOLYGON=6,Y.TYPECODE_GEOMETRYCOLLECTION=7,Y.TYPENAME_POINT="Point",Y.TYPENAME_MULTIPOINT="MultiPoint",Y.TYPENAME_LINESTRING="LineString",Y.TYPENAME_LINEARRING="LinearRing",Y.TYPENAME_MULTILINESTRING="MultiLineString",Y.TYPENAME_POLYGON="Polygon",Y.TYPENAME_MULTIPOLYGON="MultiPolygon",Y.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",Y.geometryChangedFilter={get interfaces_(){return[z]},filter(t){t.geometryChangedAction()}};class X{filter(t){}}class q{}class Z{static scroll(){if(2===arguments.length){if(v(arguments[0],O)&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];Z.scroll(t,e,Z.isRing(t))}else if(v(arguments[0],O)&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=Z.indexOf(e,t);if(i<=0)return null;Z.scroll(t,i)}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(e<=0)return null;const n=t.copy(),s=i?t.size()-1:t.size();for(let i=0;i<s;i++)for(let r=0;r<t.getDimension();r++)t.setOrdinate(i,r,n.getOrdinate((e+i)%s,r));if(i)for(let e=0;e<t.getDimension();e++)t.setOrdinate(s,e,t.getOrdinate(0,e))}}static isEqual(t,e){const i=t.size();if(i!==e.size())return!1;const n=Math.min(t.getDimension(),e.getDimension());for(let s=0;s<i;s++)for(let i=0;i<n;i++){const n=t.getOrdinate(s,i),o=e.getOrdinate(s,i);if(!(t.getOrdinate(s,i)===e.getOrdinate(s,i)||r.isNaN(n)&&r.isNaN(o)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const t=arguments[0];return Z.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let i=-1,n=null;for(let s=arguments[1];s<=e;s++){const e=t.getCoordinate(s);(null===n||n.compareTo(e)>0)&&(n=e,i=s)}return i}}static extend(t,e,i){const n=t.create(i,e.getDimension()),s=e.size();if(Z.copy(e,0,n,0,s),s>0)for(let t=s;t<i;t++)Z.copy(e,s-1,n,t,1);return n}static reverse(t){const e=t.size()-1,i=Math.trunc(e/2);for(let n=0;n<=i;n++)Z.swap(t,n,e-n)}static ensureValidRing(t,e){const i=e.size();return 0===i?e:i<=3?Z.createClosedRing(t,e,4):e.getOrdinate(0,O.X)===e.getOrdinate(i-1,O.X)&&e.getOrdinate(0,O.Y)===e.getOrdinate(i-1,O.Y)?e:Z.createClosedRing(t,e,i+1)}static minCoordinate(t){let e=null;for(let i=0;i<t.size();i++){const n=t.getCoordinate(i);(null===e||e.compareTo(n)>0)&&(e=n)}return e}static copyCoord(t,e,i,n){const s=Math.min(t.getDimension(),i.getDimension());for(let r=0;r<s;r++)i.setOrdinate(n,r,t.getOrdinate(e,r))}static isRing(t){const e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,O.X)===t.getOrdinate(e-1,O.X)&&t.getOrdinate(0,O.Y)===t.getOrdinate(e-1,O.Y)}static swap(t,e,i){if(e===i)return null;for(let n=0;n<t.getDimension();n++){const s=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(i,n)),t.setOrdinate(i,n,s)}}static copy(t,e,i,n,s){for(let r=0;r<s;r++)Z.copyCoord(t,e+r,i,n+r)}static indexOf(t,e){for(let i=0;i<e.size();i++)if(t.x===e.getOrdinate(i,O.X)&&t.y===e.getOrdinate(i,O.Y))return i;return-1}static createClosedRing(t,e,i){const n=t.create(i,e.getDimension()),s=e.size();Z.copy(e,0,n,0,s);for(let t=s;t<i;t++)Z.copy(e,0,n,t,1);return n}}class J{filter(t){}}class tt extends Y{constructor(){super(),tt.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];Y.constructor_.call(this,e),this.init(t)}}computeEnvelopeInternal(){return this.isEmpty()?new L:this._points.expandEnvelope(new L)}isRing(){return this.isClosed()&&W.isRing(this.getCoordinates())}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new tt(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const i=t;if(this._points.size()!==i._points.size())return!1;for(let t=0;t<this._points.size();t++)if(!this.equal(this._points.getCoordinate(t),i._points.getCoordinate(t),e))return!1;return!0}return super.equalsExact.apply(this,arguments)}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const t=this._points.copy();return Z.reverse(t),this.getFactory().createLineString(t)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return Y.TYPECODE_LINESTRING}getDimension(){return 1}getBoundary(){throw new K}isEquivalentClass(t){return t instanceof tt}getCoordinateSequence(){return this._points}getPointN(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}normalize(){for(let t=0;t<Math.trunc(this._points.size()/2);t++){const e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){const t=this._points.copy();Z.reverse(t),this._points=t}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?$.FALSE:0}getLength(){return V.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const t=arguments[0];let e=0,i=0;for(;e<this._points.size()&&i<t._points.size();){const n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i));if(0!==n)return n;e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._points,t._points)}}apply(){if(v(arguments[0],X)){const t=arguments[0];for(let e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e))}else if(v(arguments[0],I)){const t=arguments[0];if(0===this._points.size())return null;for(let e=0;e<this._points.size()&&(t.filter(this._points,e),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else(v(arguments[0],J)||v(arguments[0],z))&&arguments[0].filter(this)}getCoordinateN(t){return this._points.getCoordinate(t)}getGeometryType(){return Y.TYPENAME_LINESTRING}isEmpty(){return 0===this._points.size()}init(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new n("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}isCoordinate(t){for(let e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}get interfaces_(){return[q]}}class et extends tt{constructor(){super(),et.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];tt.constructor_.call(this,t,e),this.validateConstruction()}copyInternal(){return new et(this._points.copy(),this._factory)}getBoundaryDimension(){return $.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const t=this._points.copy();return Z.reverse(t),this.getFactory().createLinearRing(t)}getTypeCode(){return Y.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new n("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<et.MINIMUM_VALID_SIZE)throw new n("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return Y.TYPENAME_LINEARRING}}et.MINIMUM_VALID_SIZE=4;class it{create(){if(1===arguments.length)arguments[0]instanceof Array||v(arguments[0],O);else if(2===arguments.length);else if(3===arguments.length){const t=arguments[0],e=arguments[1];return this.create(t,e)}}}class nt{constructor(t){this.str=t}append(t){this.str+=t}setCharAt(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}toString(){return this.str}}class st{constructor(){st.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];st.constructor_.call(this,t,W.dimension(t),W.measures(t))}else if(Number.isInteger(arguments[0])){const t=arguments[0];this._coordinates=new Array(t).fill(null);for(let e=0;e<t;e++)this._coordinates[e]=new f}else if(v(arguments[0],O)){const t=arguments[0];if(null===t)return this._coordinates=new Array(0).fill(null),null;this._dimension=t.getDimension(),this._measures=t.getMeasures(),this._coordinates=new Array(t.size()).fill(null);for(let e=0;e<this._coordinates.length;e++)this._coordinates[e]=t.getCoordinateCopy(e)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];st.constructor_.call(this,t,e,W.measures(t))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1];this._coordinates=new Array(t).fill(null),this._dimension=e;for(let i=0;i<t;i++)this._coordinates[i]=j.create(e)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];this._dimension=e,this._measures=i,this._coordinates=null===t?new Array(0).fill(null):t}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];this._coordinates=new Array(t).fill(null),this._dimension=e,this._measures=i;for(let e=0;e<t;e++)this._coordinates[e]=this.createCoordinate()}}getCoordinate(){if(1===arguments.length){const t=arguments[0];return this._coordinates[t]}if(2===arguments.length){const t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}getCoordinateCopy(t){const e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}createCoordinate(){return j.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(t){return this._coordinates[t].x}getMeasures(){return this._measures}expandEnvelope(t){for(let e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}copy(){const t=new Array(this.size()).fill(null);for(let e=0;e<this._coordinates.length;e++){const i=this.createCoordinate();i.setCoordinate(this._coordinates[e]),t[e]=i}return new st(t,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const t=new nt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(let e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}getY(t){return this._coordinates[t].y}toCoordinateArray(){return this._coordinates}getM(t){return this.hasM()?this._coordinates[t].getM():r.NaN}setOrdinate(t,e,i){switch(e){case O.X:this._coordinates[t].x=i;break;case O.Y:this._coordinates[t].y=i;break;default:this._coordinates[t].setOrdinate(e,i)}}getZ(t){return this.hasZ()?this._coordinates[t].getZ():r.NaN}size(){return this._coordinates.length}getOrdinate(t,e){switch(e){case O.X:return this._coordinates[t].x;case O.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}get interfaces_(){return[O,a]}}class rt{static instance(){return rt.instanceObject}readResolve(){return rt.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array)return new st(arguments[0]);if(v(arguments[0],O))return new st(arguments[0])}else{if(2===arguments.length){let t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new st(arguments[0],t)}if(3===arguments.length){let t=arguments[2],e=arguments[1]-t;return t>1&&(t=1),e>3&&(e=3),e<2&&(e=2),new st(arguments[0],e+t,t)}}}get interfaces_(){return[it,a]}}rt.instanceObject=new rt;class ot extends b{contains(){}}class at extends ot{}class lt extends at{constructor(t){super(),this.array=[],t instanceof b&&this.addAll(t)}contains(t){for(const e of this.array)if(0===e.compareTo(t))return!0;return!1}add(t){if(this.contains(t))return!1;for(let e=0,i=this.array.length;e<i;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new K}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new At(this.array)}}let At=class{constructor(t){this.array=t,this.position=0}next(){if(this.position===this.array.length)throw new B;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new K}};class ct{static sort(){const t=arguments[0];if(1===arguments.length)t.sort(((t,e)=>t.compareTo(e)));else if(2===arguments.length)t.sort(((t,e)=>arguments[1].compare(t,e)));else if(3===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort();const i=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of i)t.push(e)}else if(4===arguments.length){const e=t.slice(arguments[1],arguments[2]);e.sort(((t,e)=>arguments[3].compare(t,e)));const i=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);for(const e of i)t.push(e)}}static asList(t){const e=new E;for(const i of t)e.add(i);return e}static copyOf(t,e){return t.slice(0,e)}}class ht extends Y{constructor(){super(),ht.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let t=arguments[0],e=arguments[1];if(Y.constructor_.call(this,e),null===t&&(t=[]),Y.hasNullElements(t))throw new n("geometries must not contain null elements");this._geometries=t}}computeEnvelopeInternal(){const t=new L;for(let e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}getGeometryN(t){return this._geometries[t]}getCoordinates(){const t=new Array(this.getNumPoints()).fill(null);let e=-1;for(let i=0;i<this._geometries.length;i++){const n=this._geometries[i].getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i]}return t}getArea(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new ht(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const i=t;if(this._geometries.length!==i._geometries.length)return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].equalsExact(i._geometries[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}reverseInternal(){const t=this._geometries.length,e=new E(t);for(let i=0;i<t;i++)e.add(this._geometries[i].reverse());return this.getFactory().buildGeometry(e)}getTypeCode(){return Y.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let t=$.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}getNumGeometries(){return this._geometries.length}getBoundary(){return Y.checkNotGeometryCollection(this),c.shouldNeverReachHere(),null}getGeometryType(){return Y.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}normalize(){for(let t=0;t<this._geometries.length;t++)this._geometries[t].normalize();ct.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let t=$.FALSE;for(let e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}getLength(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}getNumPoints(){let t=0;for(let e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=new lt(ct.asList(this._geometries)),i=new lt(ct.asList(t._geometries));return this.compare(e,i)}if(2===arguments.length){const t=arguments[1],e=arguments[0],i=this.getNumGeometries(),n=e.getNumGeometries();let s=0;for(;s<i&&s<n;){const i=this.getGeometryN(s),n=e.getGeometryN(s),r=i.compareToSameClass(n,t);if(0!==r)return r;s++}return s<i?1:s<n?-1:0}}apply(){if(v(arguments[0],X)){const t=arguments[0];for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(v(arguments[0],I)){const t=arguments[0];if(0===this._geometries.length)return null;for(let e=0;e<this._geometries.length&&(this._geometries[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(v(arguments[0],J)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}else if(v(arguments[0],z)){const t=arguments[0];t.filter(this);for(let e=0;e<this._geometries.length;e++)this._geometries[e].apply(t)}}}class ut{}class dt extends ht{constructor(){super(),dt.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];ht.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new dt(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return Y.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new E;for(let e=0;e<this._geometries.length;e++){const i=this._geometries[e].getBoundary();for(let e=0;e<i.getNumGeometries();e++)t.add(i.getGeometryN(e))}const e=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(e))}getGeometryType(){return Y.TYPENAME_MULTIPOLYGON}get interfaces_(){return[ut]}}let gt=class{get(){}put(){}size(){}values(){}entrySet(){}};class pt extends ot{constructor(t){super(),this.map=new Map,t instanceof b&&this.addAll(t)}contains(t){const e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}add(t){const e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}addAll(t){for(const e of t)this.add(e);return!0}remove(){throw new K}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new ft(this.map)}[Symbol.iterator](){return this.map}}let ft=class{constructor(t){this.iterator=t.values();const{done:e,value:i}=this.iterator.next();this.done=e,this.value=i}next(){if(this.done)throw new B;const t=this.value,{done:e,value:i}=this.iterator.next();return this.done=e,this.value=i,t}hasNext(){return!this.done}remove(){throw new K}};class mt extends gt{constructor(){super(),this.map=new Map}get(t){return this.map.get(t)||null}put(t,e){return this.map.set(t,e),e}values(){const t=new E,e=this.map.values();let i=e.next();for(;!i.done;)t.add(i.value),i=e.next();return t}entrySet(){const t=new pt;return this.map.entries().forEach((e=>t.add(e))),t}size(){return this.map.size()}}class _t{constructor(){_t.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=_t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof yt){const t=arguments[0];this._modelType=t,t===_t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const t=arguments[0];this._modelType=_t.FIXED,this.setScale(t)}else if(arguments[0]instanceof _t){const t=arguments[0];this._modelType=t._modelType,this._scale=t._scale}}static mostPrecise(t,e){return t.compareTo(e)>=0?t:e}equals(t){if(!(t instanceof _t))return!1;const e=t;return this._modelType===e._modelType&&this._scale===e._scale}compareTo(t){const e=t,i=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return T.compare(i,n)}getType(){return this._modelType}toString(){let t="UNKNOWN";return this._modelType===_t.FLOATING?t="Floating":this._modelType===_t.FLOATING_SINGLE?t="Floating-Single":this._modelType===_t.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}makePrecise(){if("number"==typeof arguments[0]){const t=arguments[0];return r.isNaN(t)||this._modelType===_t.FLOATING_SINGLE?t:this._modelType===_t.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof f){const t=arguments[0];if(this._modelType===_t.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}getMaximumSignificantDigits(){let t=16;return this._modelType===_t.FLOATING?t=16:this._modelType===_t.FLOATING_SINGLE?t=6:this._modelType===_t.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}setScale(t){this._scale=Math.abs(t)}getScale(){return this._scale}isFloating(){return this._modelType===_t.FLOATING||this._modelType===_t.FLOATING_SINGLE}get interfaces_(){return[a,o]}}class yt{constructor(){yt.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const t=arguments[0];this._name=t,yt.nameToTypeMap.put(t,this)}readResolve(){return yt.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[a]}}yt.nameToTypeMap=new mt,_t.Type=yt,_t.FIXED=new yt("FIXED"),_t.FLOATING=new yt("FLOATING"),_t.FLOATING_SINGLE=new yt("FLOATING SINGLE"),_t.maximumPreciseValue=9007199254740992;class wt extends ht{constructor(){super(),wt.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];ht.constructor_.call(this,t,e)}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new wt(t,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?$.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}getTypeCode(){return Y.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new K}getGeometryType(){return Y.TYPENAME_MULTILINESTRING}get interfaces_(){return[q]}}class vt{}class bt extends Y{constructor(){super(),bt.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const t=arguments[0],e=arguments[1];Y.constructor_.call(this,e),this.init(t)}computeEnvelopeInternal(){if(this.isEmpty())return new L;const t=new L;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new bt(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return super.equalsExact.apply(this,arguments)}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return Y.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new k("getX called on empty Point");return this.getCoordinate().x}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return Y.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new k("getY called on empty Point");return this.getCoordinate().y}isSimple(){return!0}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return $.FALSE}compareToSameClass(){if(1===arguments.length){const t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){const t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}apply(){if(v(arguments[0],X)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(v(arguments[0],I)){const t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(v(arguments[0],J)||v(arguments[0],z))&&arguments[0].filter(this)}isEmpty(){return 0===this._coordinates.size()}init(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),c.isTrue(t.size()<=1),this._coordinates=t}get interfaces_(){return[vt]}}class Ct{static ofRingSigned(){if(arguments[0]instanceof Array){const t=arguments[0];if(t.length<3)return 0;let e=0;const i=t[0].x;for(let n=1;n<t.length-1;n++){const s=t[n].x-i,r=t[n+1].y;e+=s*(t[n-1].y-r)}return e/2}if(v(arguments[0],O)){const t=arguments[0],e=t.size();if(e<3)return 0;const i=new f,n=new f,s=new f;t.getCoordinate(0,n),t.getCoordinate(1,s);const r=n.x;s.x-=r;let o=0;for(let a=1;a<e-1;a++)i.y=n.y,n.x=s.x,n.y=s.y,t.getCoordinate(a+1,s),s.x-=r,o+=n.x*(i.y-s.y);return o/2}}static ofRing(){if(arguments[0]instanceof Array){const t=arguments[0];return Math.abs(Ct.ofRingSigned(t))}if(v(arguments[0],O)){const t=arguments[0];return Math.abs(Ct.ofRingSigned(t))}}}class xt extends Y{constructor(){super(),xt.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let t=arguments[0],e=arguments[1],i=arguments[2];if(Y.constructor_.call(this,i),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),Y.hasNullElements(e))throw new n("holes must not contain null elements");if(t.isEmpty()&&Y.hasNonEmptyElements(e))throw new n("shell is empty but holes are not");this._shell=t,this._holes=e}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const t=new Array(this.getNumPoints()).fill(null);let e=-1;const i=this._shell.getCoordinates();for(let n=0;n<i.length;n++)e++,t[e]=i[n];for(let i=0;i<this._holes.length;i++){const n=this._holes[i].getCoordinates();for(let i=0;i<n.length;i++)e++,t[e]=n[i]}return t}getArea(){let t=0;t+=Ct.ofRing(this._shell.getCoordinateSequence());for(let e=0;e<this._holes.length;e++)t-=Ct.ofRing(this._holes[e].getCoordinateSequence());return t}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;const i=t,n=this._shell,s=i._shell;if(!n.equalsExact(s,e))return!1;if(this._holes.length!==i._holes.length)return!1;for(let t=0;t<this._holes.length;t++)if(!this._holes[t].equalsExact(i._holes[t],e))return!1;return!0}return super.equalsExact.apply(this,arguments)}reverseInternal(){const t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null);for(let t=0;t<e.length;t++)e[t]=this.getInteriorRingN(t).reverse();return this.getFactory().createPolygon(t,e)}getTypeCode(){return Y.TYPECODE_POLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(let e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}getGeometryType(){return Y.TYPENAME_POLYGON}getExteriorRing(){return this._shell}copyInternal(){const t=this._shell.copy(),e=new Array(this._holes.length).fill(null);for(let t=0;t<this._holes.length;t++)e[t]=this._holes[t].copy();return new xt(t,e,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal();for(let i=0;i<5;i++){const n=t.getX(i);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;const s=t.getY(i);if(s!==e.getMinY()&&s!==e.getMaxY())return!1}let i=t.getX(0),n=t.getY(0);for(let e=1;e<=4;e++){const s=t.getX(e),r=t.getY(e);if(s!==i==(r!==n))return!1;i=s,n=r}return!0}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);ct.sort(this._holes)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(t.isEmpty())return null;const i=t.getCoordinateSequence(),n=Z.minCoordinateIndex(i,0,i.size()-2);Z.scroll(i,n,!0),P.isCCW(i)===e&&Z.reverse(i)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}getLength(){let t=0;t+=this._shell.getLength();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}getNumPoints(){let t=this._shell.getNumPoints();for(let e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}convexHull(){return this.getExteriorRing().convexHull()}normalized(t,e){const i=t.copy();return this.normalize(i,e),i}compareToSameClass(){if(1===arguments.length){const t=arguments[0],e=this._shell,i=t._shell;return e.compareToSameClass(i)}if(2===arguments.length){const t=arguments[1],e=arguments[0],i=this._shell,n=e._shell,s=i.compareToSameClass(n,t);if(0!==s)return s;const r=this.getNumInteriorRing(),o=e.getNumInteriorRing();let a=0;for(;a<r&&a<o;){const i=this.getInteriorRingN(a),n=e.getInteriorRingN(a),s=i.compareToSameClass(n,t);if(0!==s)return s;a++}return a<r?1:a<o?-1:0}}apply(){if(v(arguments[0],X)){const t=arguments[0];this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(v(arguments[0],I)){const t=arguments[0];if(this._shell.apply(t),!t.isDone())for(let e=0;e<this._holes.length&&(this._holes[e].apply(t),!t.isDone());e++);t.isGeometryChanged()&&this.geometryChanged()}else if(v(arguments[0],J))arguments[0].filter(this);else if(v(arguments[0],z)){const t=arguments[0];t.filter(this),this._shell.apply(t);for(let e=0;e<this._holes.length;e++)this._holes[e].apply(t)}}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(t){return this._holes[t]}get interfaces_(){return[ut]}}class Bt extends ht{constructor(){super(),Bt.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];ht.constructor_.call(this,t,e)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof Y){const t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&super.equalsExact.call(this,t,e)}return super.equalsExact.apply(this,arguments)}getTypeCode(){return Y.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return Y.TYPENAME_MULTIPOINT}copyInternal(){const t=new Array(this._geometries.length).fill(null);for(let e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new Bt(t,this._factory)}isValid(){return!0}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){const t=arguments[0];return this._geometries[t].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return $.FALSE}get interfaces_(){return[vt]}}class Et{constructor(){Et.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)Et.constructor_.call(this,new _t,0);else if(1===arguments.length){if(v(arguments[0],it)){const t=arguments[0];Et.constructor_.call(this,new _t,0,t)}else if(arguments[0]instanceof _t){const t=arguments[0];Et.constructor_.call(this,t,0,Et.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];Et.constructor_.call(this,t,e,Et.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._precisionModel=t,this._coordinateSequenceFactory=i,this._SRID=e}}static toMultiPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toGeometryArray(t){if(null===t)return null;const e=new Array(t.size()).fill(null);return t.toArray(e)}static getDefaultCoordinateSequenceFactory(){return rt.instance()}static toMultiLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLineStringArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toMultiPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toLinearRingArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPointArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static toPolygonArray(t){const e=new Array(t.size()).fill(null);return t.toArray(e)}static createPointFromInternalCoord(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}createEmpty(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new n("Invalid dimension: "+t)}}toGeometry(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new f(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new f(t.getMinX(),t.getMinY()),new f(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new f(t.getMinX(),t.getMinY()),new f(t.getMinX(),t.getMaxY()),new f(t.getMaxX(),t.getMaxY()),new f(t.getMaxX(),t.getMinY()),new f(t.getMinX(),t.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(v(arguments[0],O))return new tt(arguments[0],this)}}createMultiLineString(){return 0===arguments.length?new wt(null,this):1===arguments.length?new wt(arguments[0],this):void 0}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(v(arguments[0],O)){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){const t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof et){const t=arguments[0];return this.createPolygon(t,null)}}else if(2===arguments.length)return new xt(arguments[0],arguments[1],this)}getSRID(){return this._SRID}createGeometryCollection(){return 0===arguments.length?new ht(null,this):1===arguments.length?new ht(arguments[0],this):void 0}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(v(arguments[0],O))return new et(arguments[0],this)}}createMultiPolygon(){return 0===arguments.length?new dt(null,this):1===arguments.length?new dt(arguments[0],this):void 0}createMultiPoint(){if(0===arguments.length)return new Bt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Bt(arguments[0],this);if(v(arguments[0],O)){const t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));const e=new Array(t.size()).fill(null);for(let i=0;i<t.size();i++){const n=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Z.copy(t,i,n,0,1),e[i]=this.createPoint(n)}return this.createMultiPoint(e)}}}buildGeometry(t){let e=null,i=!1,n=!1;for(let s=t.iterator();s.hasNext();){const t=s.next(),r=t.getTypeCode();null===e&&(e=r),r!==e&&(i=!0),t instanceof ht&&(n=!0)}if(null===e)return this.createGeometryCollection();if(i||n)return this.createGeometryCollection(Et.toGeometryArray(t));const s=t.iterator().next();if(t.size()>1){if(s instanceof xt)return this.createMultiPolygon(Et.toPolygonArray(t));if(s instanceof tt)return this.createMultiLineString(Et.toLineStringArray(t));if(s instanceof bt)return this.createMultiPoint(Et.toPointArray(t));c.shouldNeverReachHere("Unhandled geometry type: "+s.getGeometryType())}return s}createMultiPointFromCoords(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof f){const t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(v(arguments[0],O))return new bt(arguments[0],this)}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}get interfaces_(){return[a]}}const St="XY",Ft="XYZ",It="XYM",Lt="XYZM",Mt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Tt="EMPTY",Rt=1,kt=2,Ut=3,Dt=4,Ot=5,Pt=6;for(const t in Mt)Mt[t].toUpperCase();class Nt{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let i,n=t;if("("==t)i=kt;else if(","==t)i=Ot;else if(")"==t)i=Ut;else if(this.isNumeric_(t)||"-"==t)i=Dt,n=this.readNumber_();else if(this.isAlpha_(t))i=Rt,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);i=Pt}return{position:e,value:n,type:i}}readNumber_(){let t;const e=this.index_;let i=!1,n=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class Qt{constructor(t,e){this.lexer_=t,this.token_,this.layout_=St,this.factory=e}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t=St;const e=this.token_;if(this.isTokenType(Rt)){const i=e.value;"Z"===i?t=Ft:"M"===i?t=It:"ZM"===i&&(t=Lt),t!==St&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(kt)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(Ot));if(this.match(Ut))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(kt)){const t=this.parsePoint_();if(this.match(Ut))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(kt)){const t=this.parsePointList_();if(this.match(Ut))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(kt)){const t=this.parseLineStringTextList_();if(this.match(Ut))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(kt)){let t;if(t=this.token_.type==kt?this.parsePointTextList_():this.parsePointList_(),this.match(Ut))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(kt)){const t=this.parseLineStringTextList_();if(this.match(Ut))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(kt)){const t=this.parsePolygonTextList_();if(this.match(Ut))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let i=0;i<e;++i){const e=this.token_;if(!this.match(Dt))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(Ot);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(Ot);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(Ot);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(Ot);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(Rt)&&this.token_.value==Tt;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.factory,e=t=>t?new f(...t):new f,i=i=>{const n=i.map((i=>t.createLinearRing(i.map(e))));return n.length>1?t.createPolygon(n[0],n.slice(1)):1===n.length?t.createPolygon(n[0]):t.createPolygon()},n=this.token_;if(this.match(Rt)){const s=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==s){const e=this.parseGeometryCollectionText_();return t.createGeometryCollection(e)}switch(s){case"POINT":{const e=this.parsePointText_();return e?t.createPoint(new f(...e)):t.createPoint()}case"LINESTRING":{const i=this.parseLineStringText_().map(e);return t.createLineString(i)}case"LINEARRING":{const i=this.parseLineStringText_().map(e);return t.createLinearRing(i)}case"POLYGON":{const e=this.parsePolygonText_();return e&&0!==e.length?i(e):t.createPolygon()}case"MULTIPOINT":{const i=this.parseMultiPointText_();if(!i||0===i.length)return t.createMultiPoint();const n=i.map(e).map((e=>t.createPoint(e)));return t.createMultiPoint(n)}case"MULTILINESTRING":{const i=this.parseMultiLineStringText_().map((i=>t.createLineString(i.map(e))));return t.createMultiLineString(i)}case"MULTIPOLYGON":{const e=this.parseMultiPolygonText_();if(!e||0===e.length)return t.createMultiPolygon();const n=e.map(i);return t.createMultiPolygon(n)}default:throw new Error("Invalid geometry type: "+s)}}throw new Error(this.formatErrorMessage_())}}function Ht(t){if(t.isEmpty())return"";const e=t.getCoordinate(),i=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||i.push(e.z),void 0===e.m||Number.isNaN(e.m)||i.push(e.m),i.join(" ")}function Gt(t){const e=t.getCoordinates().map((t=>{const e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t].join(" "));return i.join(", ")}function Vt(t){const e=[];e.push("("+Gt(t.getExteriorRing())+")");for(let i=0,n=t.getNumInteriorRing();i<n;++i)e.push("("+Gt(t.getInteriorRingN(i))+")");return e.join(", ")}const zt={Point:Ht,LineString:Gt,LinearRing:Gt,Polygon:Vt,MultiPoint:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push("("+Ht(t.getGeometryN(i))+")");return e.join(", ")},MultiLineString:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push("("+Gt(t.getGeometryN(i))+")");return e.join(", ")},MultiPolygon:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push("("+Vt(t.getGeometryN(i))+")");return e.join(", ")},GeometryCollection:function(t){const e=[];for(let i=0,n=t.getNumGeometries();i<n;++i)e.push(Kt(t.getGeometryN(i)));return e.join(", ")}};function Kt(t){let e=t.getGeometryType();const i=zt[e];e=e.toUpperCase();const n=function(t){let e="";if(t.isEmpty())return e;const i=t.getCoordinate();return void 0===i.z||Number.isNaN(i.z)||(e+="Z"),void 0===i.m||Number.isNaN(i.m)||(e+="M"),e}(t);return n.length>0&&(e+=" "+n),t.isEmpty()?e+" "+Tt:e+" ("+i(t)+")"}class jt{constructor(t){this.geometryFactory=t||new Et,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(t){const e=new Nt(t);return new Qt(e,this.geometryFactory).parse()}write(t){return Kt(t)}}class Wt{constructor(t){this.parser=new jt(t)}write(t){return this.parser.write(t)}static toLineString(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}class $t{constructor(){$t.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map((()=>Array(2))),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new f,this._intPt[1]=new f,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static nonRobustComputeEdgeDistance(t,e,i){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);return c.isTrue(!(0===r&&!t.equals(e)),"Invalid distance calculation"),r}static computeEdgeDistance(t,e,i){const n=Math.abs(i.x-e.x),s=Math.abs(i.y-e.y);let r=-1;if(t.equals(e))r=0;else if(t.equals(i))r=n>s?n:s;else{const i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);r=n>s?i:o,0!==r||t.equals(e)||(r=Math.max(i,o))}return c.isTrue(!(0===r&&!t.equals(e)),"Bad distance calculation"),r}computeIntersection(t,e,i,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,i,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((()=>Array(2))),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const t=arguments[0];for(let e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}getIntersection(t){return this._intPt[t]}getEdgeDistance(t,e){return $t.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}isCollinear(){return this._result===$t.COLLINEAR_INTERSECTION}toString(){return Wt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Wt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(t,e){return this._inputLines[t][e]}getIndexAlongSegment(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}getTopologySummary(){const t=new nt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(t){this._precisionModel=t}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==$t.NO_INTERSECTION}isIntersection(t){for(let e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}getIntersectionAlongSegment(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}$t.DONT_INTERSECT=0,$t.DO_INTERSECT=1,$t.COLLINEAR=2,$t.NO_INTERSECTION=0,$t.POINT_INTERSECTION=1,$t.COLLINEAR_INTERSECTION=2;class Yt extends $t{constructor(){super()}static nearestEndpoint(t,e,i,n){let s=t,r=G.pointToSegment(t,i,n),o=G.pointToSegment(e,i,n);return o<r&&(r=o,s=e),o=G.pointToSegment(i,t,e),o<r&&(r=o,s=i),o=G.pointToSegment(n,t,e),o<r&&(r=o,s=n),s}isInSegmentEnvelopes(t){const e=new L(this._inputLines[0][0],this._inputLines[0][1]),i=new L(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&i.contains(t)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const t=arguments[0],e=arguments[1],i=arguments[2];if(this._isProper=!1,L.intersects(e,i,t)&&0===P.index(e,i,t)&&0===P.index(i,e,t))return this._isProper=!0,(t.equals(e)||t.equals(i))&&(this._isProper=!1),this._result=$t.POINT_INTERSECTION,null;this._result=$t.NO_INTERSECTION}}intersection(t,e,i,n){let s=this.intersectionSafe(t,e,i,n);return this.isInSegmentEnvelopes(s)||(s=new f(Yt.nearestEndpoint(t,e,i,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(s),s}checkDD(t,e,i,n,s){const r=D.intersection(t,e,i,n),o=this.isInSegmentEnvelopes(r);Q.out.println("DD in env = "+o+"  --------------------- "+r),s.distance(r)>1e-4&&Q.out.println("Distance = "+s.distance(r))}intersectionSafe(t,e,i,n){let s=N.intersection(t,e,i,n);return null===s&&(s=Yt.nearestEndpoint(t,e,i,n)),s}computeCollinearIntersection(t,e,i,n){const s=L.intersects(t,e,i),r=L.intersects(t,e,n),o=L.intersects(i,n,t),a=L.intersects(i,n,e);return s&&r?(this._intPt[0]=i,this._intPt[1]=n,$t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=t,this._intPt[1]=e,$t.COLLINEAR_INTERSECTION):s&&o?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||a?$t.COLLINEAR_INTERSECTION:$t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||o?$t.COLLINEAR_INTERSECTION:$t.POINT_INTERSECTION):r&&o?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||a?$t.COLLINEAR_INTERSECTION:$t.POINT_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||o?$t.COLLINEAR_INTERSECTION:$t.POINT_INTERSECTION):$t.NO_INTERSECTION}computeIntersect(t,e,i,n){if(this._isProper=!1,!L.intersects(t,e,i,n))return $t.NO_INTERSECTION;const s=P.index(t,e,i),r=P.index(t,e,n);if(s>0&&r>0||s<0&&r<0)return $t.NO_INTERSECTION;const o=P.index(i,n,t),a=P.index(i,n,e);return o>0&&a>0||o<0&&a<0?$t.NO_INTERSECTION:0===s&&0===r&&0===o&&0===a?this.computeCollinearIntersection(t,e,i,n):(0===s||0===r||0===o||0===a?(this._isProper=!1,t.equals2D(i)||t.equals2D(n)?this._intPt[0]=t:e.equals2D(i)||e.equals2D(n)?this._intPt[0]=e:0===s?this._intPt[0]=new f(i):0===r?this._intPt[0]=new f(n):0===o?this._intPt[0]=new f(t):0===a&&(this._intPt[0]=new f(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,i,n)),$t.POINT_INTERSECTION)}}class Xt{constructor(){Xt.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)Xt.constructor_.call(this,new f,new f);else if(1===arguments.length){const t=arguments[0];Xt.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0=t,this.p1=e}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];Xt.constructor_.call(this,new f(t,e),new f(i,n))}}static midPoint(t,e){return new f((t.x+e.x)/2,(t.y+e.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof Xt){const t=arguments[0],e=P.index(this.p0,this.p1,t.p0),i=P.index(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof f){const t=arguments[0];return P.index(this.p0,this.p1,t)}}toGeometry(t){return t.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return Xt.midPoint(this.p0,this.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(t,e){const i=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,o=Math.sqrt(s*s+r*r);let a=0,l=0;if(0!==e){if(o<=0)throw new k("Cannot compute offset from zero-length line segment");a=e*s/o,l=e*r/o}return new f(i-l,n+a)}setCoordinates(){if(1===arguments.length){const t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=e.x,this.p1.y=e.y}}segmentFraction(t){let e=this.projectionFactor(t);return e<0?e=0:(e>1||r.isNaN(e))&&(e=1),e}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}distance(){if(arguments[0]instanceof Xt){const t=arguments[0];return G.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof f){const t=arguments[0];return G.pointToSegment(t,this.p0,this.p1)}}equals(t){if(!(t instanceof Xt))return!1;const e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}intersection(t){const e=new Yt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}project(){if(arguments[0]instanceof f){const t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new f(t);const e=this.projectionFactor(t),i=new f;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof Xt){const t=arguments[0],e=this.projectionFactor(t.p0),i=this.projectionFactor(t.p1);if(e>=1&&i>=1)return null;if(e<=0&&i<=0)return null;let n=this.project(t.p0);e<0&&(n=this.p0),e>1&&(n=this.p1);let s=this.project(t.p1);return i<0&&(s=this.p0),i>1&&(s=this.p1),new Xt(n,s)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(t){return 0===t?this.p0:this.p1}distancePerpendicular(t){return G.pointToLinePerpendicular(t,this.p0,this.p1)}closestPoint(t){const e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}projectionFactor(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;const e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,n=e*e+i*i;return n<=0?r.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/n}closestPoints(t){const e=this.intersection(t);if(null!==e)return[e,e];const i=new Array(2).fill(null);let n=r.MAX_VALUE,s=null;const o=this.closestPoint(t.p0);n=o.distance(t.p0),i[0]=o,i[1]=t.p0;const a=this.closestPoint(t.p1);s=a.distance(t.p1),s<n&&(n=s,i[0]=a,i[1]=t.p1);const l=t.closestPoint(this.p0);s=l.distance(this.p0),s<n&&(n=s,i[0]=this.p0,i[1]=l);const A=t.closestPoint(this.p1);return s=A.distance(this.p1),s<n&&(n=s,i[0]=this.p1,i[1]=A),i}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(t){const e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)}reverse(){const t=this.p0;this.p0=this.p1,this.p1=t}equalsTopo(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}lineIntersection(t){return N.intersection(this.p0,this.p1,t.p0,t.p1)}isHorizontal(){return this.p0.y===this.p1.y}reflect(t){const e=this.p1.getY()-this.p0.getY(),i=this.p0.getX()-this.p1.getX(),n=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),s=e*e+i*i,r=e*e-i*i,o=t.getX(),a=t.getY();return new f((-r*o-2*e*i*a-2*e*n)/s,(r*a-2*e*i*o-2*i*n)/s)}pointAlong(t){const e=new f;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}hashCode(){let t=r.doubleToLongBits(this.p0.x);t^=31*r.doubleToLongBits(this.p0.y);const e=Math.trunc(t)^Math.trunc(t>>32);let i=r.doubleToLongBits(this.p1.x);return i^=31*r.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)}get interfaces_(){return[o,a]}}class qt{static toLocationSymbol(t){switch(t){case qt.EXTERIOR:return"e";case qt.BOUNDARY:return"b";case qt.INTERIOR:return"i";case qt.NONE:return"-"}throw new n("Unknown location value: "+t)}}qt.INTERIOR=0,qt.BOUNDARY=1,qt.EXTERIOR=2,qt.NONE=-1;class Zt{constructor(){Zt.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((()=>Array(3))),this.setAll($.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const t=arguments[0];Zt.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof Zt){const t=arguments[0];Zt.constructor_.call(this),this._matrix[qt.INTERIOR][qt.INTERIOR]=t._matrix[qt.INTERIOR][qt.INTERIOR],this._matrix[qt.INTERIOR][qt.BOUNDARY]=t._matrix[qt.INTERIOR][qt.BOUNDARY],this._matrix[qt.INTERIOR][qt.EXTERIOR]=t._matrix[qt.INTERIOR][qt.EXTERIOR],this._matrix[qt.BOUNDARY][qt.INTERIOR]=t._matrix[qt.BOUNDARY][qt.INTERIOR],this._matrix[qt.BOUNDARY][qt.BOUNDARY]=t._matrix[qt.BOUNDARY][qt.BOUNDARY],this._matrix[qt.BOUNDARY][qt.EXTERIOR]=t._matrix[qt.BOUNDARY][qt.EXTERIOR],this._matrix[qt.EXTERIOR][qt.INTERIOR]=t._matrix[qt.EXTERIOR][qt.INTERIOR],this._matrix[qt.EXTERIOR][qt.BOUNDARY]=t._matrix[qt.EXTERIOR][qt.BOUNDARY],this._matrix[qt.EXTERIOR][qt.EXTERIOR]=t._matrix[qt.EXTERIOR][qt.EXTERIOR]}}static isTrue(t){return t>=0||t===$.TRUE}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const t=arguments[0],e=arguments[1];return e===$.SYM_DONTCARE||e===$.SYM_TRUE&&(t>=0||t===$.TRUE)||e===$.SYM_FALSE&&t===$.FALSE||e===$.SYM_P&&t===$.P||e===$.SYM_L&&t===$.L||e===$.SYM_A&&t===$.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const t=arguments[1];return new Zt(arguments[0]).matches(t)}}isIntersects(){return!this.isDisjoint()}set(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const i=Math.trunc(e/3),n=e%3;this._matrix[i][n]=$.toDimensionValue(t.charAt(e))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._matrix[t][e]=i}}isContains(){return Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])&&this._matrix[qt.EXTERIOR][qt.INTERIOR]===$.FALSE&&this._matrix[qt.EXTERIOR][qt.BOUNDARY]===$.FALSE}isWithin(){return Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])&&this._matrix[qt.INTERIOR][qt.EXTERIOR]===$.FALSE&&this._matrix[qt.BOUNDARY][qt.EXTERIOR]===$.FALSE}isTouches(t,e){return t>e?this.isTouches(e,t):(t===$.A&&e===$.A||t===$.L&&e===$.L||t===$.L&&e===$.A||t===$.P&&e===$.A||t===$.P&&e===$.L)&&this._matrix[qt.INTERIOR][qt.INTERIOR]===$.FALSE&&(Zt.isTrue(this._matrix[qt.INTERIOR][qt.BOUNDARY])||Zt.isTrue(this._matrix[qt.BOUNDARY][qt.INTERIOR])||Zt.isTrue(this._matrix[qt.BOUNDARY][qt.BOUNDARY]))}isOverlaps(t,e){return t===$.P&&e===$.P||t===$.A&&e===$.A?Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])&&Zt.isTrue(this._matrix[qt.INTERIOR][qt.EXTERIOR])&&Zt.isTrue(this._matrix[qt.EXTERIOR][qt.INTERIOR]):t===$.L&&e===$.L&&1===this._matrix[qt.INTERIOR][qt.INTERIOR]&&Zt.isTrue(this._matrix[qt.INTERIOR][qt.EXTERIOR])&&Zt.isTrue(this._matrix[qt.EXTERIOR][qt.INTERIOR])}isEquals(t,e){return t===e&&Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])&&this._matrix[qt.INTERIOR][qt.EXTERIOR]===$.FALSE&&this._matrix[qt.BOUNDARY][qt.EXTERIOR]===$.FALSE&&this._matrix[qt.EXTERIOR][qt.INTERIOR]===$.FALSE&&this._matrix[qt.EXTERIOR][qt.BOUNDARY]===$.FALSE}matches(t){if(9!==t.length)throw new n("Should be length 9: "+t);for(let e=0;e<3;e++)for(let i=0;i<3;i++)if(!Zt.matches(this._matrix[e][i],t.charAt(3*e+i)))return!1;return!0}add(t){for(let e=0;e<3;e++)for(let i=0;i<3;i++)this.setAtLeast(e,i,t.get(e,i))}isDisjoint(){return this._matrix[qt.INTERIOR][qt.INTERIOR]===$.FALSE&&this._matrix[qt.INTERIOR][qt.BOUNDARY]===$.FALSE&&this._matrix[qt.BOUNDARY][qt.INTERIOR]===$.FALSE&&this._matrix[qt.BOUNDARY][qt.BOUNDARY]===$.FALSE}isCrosses(t,e){return t===$.P&&e===$.L||t===$.P&&e===$.A||t===$.L&&e===$.A?Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])&&Zt.isTrue(this._matrix[qt.INTERIOR][qt.EXTERIOR]):t===$.L&&e===$.P||t===$.A&&e===$.P||t===$.A&&e===$.L?Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])&&Zt.isTrue(this._matrix[qt.EXTERIOR][qt.INTERIOR]):t===$.L&&e===$.L&&0===this._matrix[qt.INTERIOR][qt.INTERIOR]}isCovers(){return(Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])||Zt.isTrue(this._matrix[qt.INTERIOR][qt.BOUNDARY])||Zt.isTrue(this._matrix[qt.BOUNDARY][qt.INTERIOR])||Zt.isTrue(this._matrix[qt.BOUNDARY][qt.BOUNDARY]))&&this._matrix[qt.EXTERIOR][qt.INTERIOR]===$.FALSE&&this._matrix[qt.EXTERIOR][qt.BOUNDARY]===$.FALSE}isCoveredBy(){return(Zt.isTrue(this._matrix[qt.INTERIOR][qt.INTERIOR])||Zt.isTrue(this._matrix[qt.INTERIOR][qt.BOUNDARY])||Zt.isTrue(this._matrix[qt.BOUNDARY][qt.INTERIOR])||Zt.isTrue(this._matrix[qt.BOUNDARY][qt.BOUNDARY]))&&this._matrix[qt.INTERIOR][qt.EXTERIOR]===$.FALSE&&this._matrix[qt.BOUNDARY][qt.EXTERIOR]===$.FALSE}setAtLeast(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<t.length;e++){const i=Math.trunc(e/3),n=e%3;this.setAtLeast(i,n,$.toDimensionValue(t.charAt(e)))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._matrix[t][e]<i&&(this._matrix[t][e]=i)}}setAtLeastIfValid(t,e,i){t>=0&&e>=0&&this.setAtLeast(t,e,i)}toString(){const t=new nt("123456789");for(let e=0;e<3;e++)for(let i=0;i<3;i++)t.setCharAt(3*e+i,$.toDimensionSymbol(this._matrix[e][i]));return t.toString()}setAll(t){for(let e=0;e<3;e++)for(let i=0;i<3;i++)this._matrix[e][i]=t}get(t,e){return this._matrix[t][e]}transpose(){let t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}get interfaces_(){return[h]}}class Jt{static toDegrees(t){return 180*t/Math.PI}static isAcute(t,e,i){const n=t.x-e.x,s=t.y-e.y;return n*(i.x-e.x)+s*(i.y-e.y)>0}static isObtuse(t,e,i){const n=t.x-e.x,s=t.y-e.y;return n*(i.x-e.x)+s*(i.y-e.y)<0}static interiorAngle(t,e,i){const n=Jt.angle(e,t),s=Jt.angle(e,i);return Math.abs(s-n)}static normalizePositive(t){if(t<0){for(;t<0;)t+=Jt.PI_TIMES_2;t>=Jt.PI_TIMES_2&&(t=0)}else{for(;t>=Jt.PI_TIMES_2;)t-=Jt.PI_TIMES_2;t<0&&(t=0)}return t}static angleBetween(t,e,i){const n=Jt.angle(e,t),s=Jt.angle(e,i);return Jt.diff(n,s)}static diff(t,e){let i=null;return i=t<e?e-t:t-e,i>Math.PI&&(i=2*Math.PI-i),i}static toRadians(t){return t*Math.PI/180}static normalize(t){for(;t>Math.PI;)t-=Jt.PI_TIMES_2;for(;t<=-Math.PI;)t+=Jt.PI_TIMES_2;return t}static angle(){if(1===arguments.length){const t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)}}static getTurn(t,e){const i=Math.sin(e-t);return i>0?Jt.COUNTERCLOCKWISE:i<0?Jt.CLOCKWISE:Jt.NONE}static angleBetweenOriented(t,e,i){const n=Jt.angle(e,t),s=Jt.angle(e,i)-n;return s<=-Math.PI?s+Jt.PI_TIMES_2:s>Math.PI?s-Jt.PI_TIMES_2:s}}Jt.PI_TIMES_2=2*Math.PI,Jt.PI_OVER_2=Math.PI/2,Jt.PI_OVER_4=Math.PI/4,Jt.COUNTERCLOCKWISE=P.COUNTERCLOCKWISE,Jt.CLOCKWISE=P.CLOCKWISE,Jt.NONE=P.COLLINEAR;class te extends i{constructor(){super(),te.constructor_.apply(this,arguments)}static constructor_(){i.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}class ee{constructor(){ee.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){const t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];this.x=t,this.y=e,this.w=1}else if(arguments[0]instanceof ee&&arguments[1]instanceof ee){const t=arguments[0],e=arguments[1];this.x=t.y*e.w-e.y*t.w,this.y=e.x*t.w-t.x*e.w,this.w=t.x*e.y-e.x*t.y}else if(arguments[0]instanceof f&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1];this.x=t.y-e.y,this.y=e.x-t.x,this.w=t.x*e.y-e.x*t.y}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.x=t,this.y=e,this.w=i}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=t.y-e.y,r=e.x-t.x,o=t.x*e.y-e.x*t.y,a=i.y-n.y,l=n.x-i.x,A=i.x*n.y-n.x*i.y;this.x=r*A-l*o,this.y=a*o-s*A,this.w=s*l-a*r}}getCoordinate(){const t=new f;return t.x=this.getX(),t.y=this.getY(),t}getX(){const t=this.x/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new te;return t}getY(){const t=this.y/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new te;return t}}class ie{constructor(){ie.constructor_.apply(this,arguments)}static constructor_(){this.p0=null,this.p1=null,this.p2=null;const t=arguments[0],e=arguments[1],i=arguments[2];this.p0=t,this.p1=e,this.p2=i}static isAcute(t,e,i){return!!Jt.isAcute(t,e,i)&&!!Jt.isAcute(e,i,t)&&!!Jt.isAcute(i,t,e)}static circumcentre(t,e,i){const n=i.x,s=i.y,r=t.x-n,o=t.y-s,a=e.x-n,l=e.y-s,A=2*ie.det(r,o,a,l),c=ie.det(o,r*r+o*o,l,a*a+l*l),h=ie.det(r,r*r+o*o,a,a*a+l*l);return new f(n-c/A,s+h/A)}static perpendicularBisector(t,e){const i=e.x-t.x,n=e.y-t.y,s=new ee(t.x+i/2,t.y+n/2,1),r=new ee(t.x-n+i/2,t.y+i+n/2,1);return new ee(s,r)}static angleBisector(t,e,i){const n=e.distance(t),s=n/(n+e.distance(i)),r=i.x-t.x,o=i.y-t.y;return new f(t.x+s*r,t.y+s*o)}static inCentre(t,e,i){const n=e.distance(i),s=t.distance(i),r=t.distance(e),o=n+s+r,a=(n*t.x+s*e.x+r*i.x)/o,l=(n*t.y+s*e.y+r*i.y)/o;return new f(a,l)}static area(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)}static signedArea(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2}static det(t,e,i,n){return t*n-e*i}static interpolateZ(t,e,i,n){const s=e.x,r=e.y,o=i.x-s,a=n.x-s,l=i.y-r,A=n.y-r,c=o*A-a*l,h=t.x-s,u=t.y-r,d=(A*h-a*u)/c,g=(-l*h+o*u)/c;return e.getZ()+d*(i.getZ()-e.getZ())+g*(n.getZ()-e.getZ())}static longestSideLength(t,e,i){const n=t.distance(e),s=e.distance(i),r=i.distance(t);let o=n;return s>o&&(o=s),r>o&&(o=r),o}static circumcentreDD(t,e,i){const n=U.valueOf(t.x).subtract(i.x),s=U.valueOf(t.y).subtract(i.y),r=U.valueOf(e.x).subtract(i.x),o=U.valueOf(e.y).subtract(i.y),a=U.determinant(n,s,r,o).multiply(2),l=n.sqr().add(s.sqr()),A=r.sqr().add(o.sqr()),c=U.determinant(s,l,o,A),h=U.determinant(n,l,r,A),u=U.valueOf(i.x).subtract(c.divide(a)).doubleValue(),d=U.valueOf(i.y).add(h.divide(a)).doubleValue();return new f(u,d)}static area3D(t,e,i){const n=e.x-t.x,s=e.y-t.y,r=e.getZ()-t.getZ(),o=i.x-t.x,a=i.y-t.y,l=i.getZ()-t.getZ(),A=s*l-r*a,c=r*o-n*l,h=n*a-s*o,u=A*A+c*c+h*h;return Math.sqrt(u)/2}static centroid(t,e,i){const n=(t.x+e.x+i.x)/3,s=(t.y+e.y+i.y)/3;return new f(n,s)}interpolateZ(t){if(null===t)throw new n("Supplied point is null.");return ie.interpolateZ(t,this.p0,this.p1,this.p2)}longestSideLength(){return ie.longestSideLength(this.p0,this.p1,this.p2)}isAcute(){return ie.isAcute(this.p0,this.p1,this.p2)}circumcentre(){return ie.circumcentre(this.p0,this.p1,this.p2)}inCentre(){return ie.inCentre(this.p0,this.p1,this.p2)}area(){return ie.area(this.p0,this.p1,this.p2)}signedArea(){return ie.signedArea(this.p0,this.p1,this.p2)}area3D(){return ie.area3D(this.p0,this.p1,this.p2)}centroid(){return ie.centroid(this.p0,this.p1,this.p2)}}class ne extends i{constructor(){super(),ne.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)i.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];i.constructor_.call(this,t)}}}class se{constructor(){se.constructor_.apply(this,arguments)}static constructor_(){if(this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null,0===arguments.length)this.setToIdentity();else if(1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];this._m00=t[0],this._m01=t[1],this._m02=t[2],this._m10=t[3],this._m11=t[4],this._m12=t[5]}else if(arguments[0]instanceof se){const t=arguments[0];this.setTransformation(t)}}else if(6===arguments.length&&"number"==typeof arguments[5]&&"number"==typeof arguments[4]&&"number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5];this.setTransformation(t,e,i,n,s,r)}}static translationInstance(t,e){const i=new se;return i.setToTranslation(t,e),i}static shearInstance(t,e){const i=new se;return i.setToShear(t,e),i}static reflectionInstance(){if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new se;return i.setToReflection(t,e),i}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=new se;return s.setToReflection(t,e,i,n),s}}static rotationInstance(){if(1===arguments.length){const t=arguments[0];return se.rotationInstance(Math.sin(t),Math.cos(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new se;return i.setToRotation(t,e),i}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return se.rotationInstance(Math.sin(t),Math.cos(t),e,i)}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=new se;return s.setToRotation(t,e,i,n),s}}static scaleInstance(){if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new se;return i.setToScale(t,e),i}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=new se;return s.translate(-i,-n),s.scale(t,e),s.translate(i,n),s}}setToReflectionBasic(t,e,i,s){if(t===i&&e===s)throw new n("Reflection line points must be distinct");const r=i-t,o=s-e,a=Math.sqrt(r*r+o*o),l=o/a,A=r/a,c=2*l*A,h=A*A-l*l;return this._m00=h,this._m01=c,this._m02=0,this._m10=c,this._m11=-h,this._m12=0,this}setToRotation(){if(1===arguments.length){const t=arguments[0];return this.setToRotation(Math.sin(t),Math.cos(t)),this}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._m00=e,this._m01=-t,this._m02=0,this._m10=t,this._m11=e,this._m12=0,this}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return this.setToRotation(Math.sin(t),Math.cos(t),e,i),this}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];return this._m00=e,this._m01=-t,this._m02=i-i*e+n*t,this._m10=t,this._m11=e,this._m12=n-i*t-n*e,this}}getMatrixEntries(){return[this._m00,this._m01,this._m02,this._m10,this._m11,this._m12]}filter(t,e){this.transform(t,e)}composeBefore(t){const e=this._m00*t._m00+this._m01*t._m10,i=this._m00*t._m01+this._m01*t._m11,n=this._m00*t._m02+this._m01*t._m12+this._m02,s=this._m10*t._m00+this._m11*t._m10,r=this._m10*t._m01+this._m11*t._m11,o=this._m10*t._m02+this._m11*t._m12+this._m12;return this._m00=e,this._m01=i,this._m02=n,this._m10=s,this._m11=r,this._m12=o,this}clone(){try{return null}catch(t){if(!(t instanceof i))throw t;c.shouldNeverReachHere()}return null}translate(t,e){return this.compose(se.translationInstance(t,e)),this}setToReflection(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Reflection vector must be non-zero");if(t===e)return this._m00=0,this._m01=1,this._m02=0,this._m10=1,this._m11=0,this._m12=0,this;const i=Math.sqrt(t*t+e*e),s=e/i,r=t/i;return this.rotate(-s,r),this.scale(1,-1),this.rotate(s,r),this}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],s=arguments[3];if(t===i&&e===s)throw new n("Reflection line points must be distinct");this.setToTranslation(-t,-e);const r=i-t,o=s-e,a=Math.sqrt(r*r+o*o),l=o/a,A=r/a;return this.rotate(-l,A),this.scale(1,-1),this.rotate(l,A),this.translate(t,e),this}}shear(t,e){return this.compose(se.shearInstance(t,e)),this}getInverse(){const t=this.getDeterminant();if(0===t)throw new ne("Transformation is non-invertible");const e=this._m11/t,i=-this._m10/t,n=-this._m01/t,s=this._m00/t,r=(this._m01*this._m12-this._m02*this._m11)/t,o=(-this._m00*this._m12+this._m10*this._m02)/t;return new se(e,n,r,i,s,o)}compose(t){const e=t._m00*this._m00+t._m01*this._m10,i=t._m00*this._m01+t._m01*this._m11,n=t._m00*this._m02+t._m01*this._m12+t._m02,s=t._m10*this._m00+t._m11*this._m10,r=t._m10*this._m01+t._m11*this._m11,o=t._m10*this._m02+t._m11*this._m12+t._m12;return this._m00=e,this._m01=i,this._m02=n,this._m10=s,this._m11=r,this._m12=o,this}equals(t){if(null===t)return!1;if(!(t instanceof se))return!1;const e=t;return this._m00===e._m00&&this._m01===e._m01&&this._m02===e._m02&&this._m10===e._m10&&this._m11===e._m11&&this._m12===e._m12}setToScale(t,e){return this._m00=t,this._m01=0,this._m02=0,this._m10=0,this._m11=e,this._m12=0,this}isIdentity(){return 1===this._m00&&0===this._m01&&0===this._m02&&0===this._m10&&1===this._m11&&0===this._m12}scale(t,e){return this.compose(se.scaleInstance(t,e)),this}setToIdentity(){return this._m00=1,this._m01=0,this._m02=0,this._m10=0,this._m11=1,this._m12=0,this}isGeometryChanged(){return!0}setTransformation(){if(1===arguments.length){const t=arguments[0];return this._m00=t._m00,this._m01=t._m01,this._m02=t._m02,this._m10=t._m10,this._m11=t._m11,this._m12=t._m12,this}if(6===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5];return this._m00=t,this._m01=e,this._m02=i,this._m10=n,this._m11=s,this._m12=r,this}}rotate(){if(1===arguments.length){const t=arguments[0];return this.compose(se.rotationInstance(t)),this}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.compose(se.rotationInstance(t,e)),this}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return this.compose(se.rotationInstance(t,e,i)),this}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];return this.compose(se.rotationInstance(t,e,i,n)),this}}getDeterminant(){return this._m00*this._m11-this._m01*this._m10}setToShear(t,e){return this._m00=1,this._m01=t,this._m02=0,this._m10=e,this._m11=1,this._m12=0,this}isDone(){return!1}toString(){return"AffineTransformation[["+this._m00+", "+this._m01+", "+this._m02+"], ["+this._m10+", "+this._m11+", "+this._m12+"]]"}setToTranslation(t,e){return this._m00=1,this._m01=0,this._m02=t,this._m10=0,this._m11=1,this._m12=e,this}transform(){if(1===arguments.length){const t=arguments[0].copy();return t.apply(this),t}if(2===arguments.length){if(arguments[0]instanceof f&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=this._m00*t.x+this._m01*t.y+this._m02,n=this._m10*t.x+this._m11*t.y+this._m12;return e.x=i,e.y=n,e}if(v(arguments[0],O)&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=this._m00*t.getOrdinate(e,0)+this._m01*t.getOrdinate(e,1)+this._m02,n=this._m10*t.getOrdinate(e,0)+this._m11*t.getOrdinate(e,1)+this._m12;t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)}}}reflect(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.compose(se.reflectionInstance(t,e)),this}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];return this.compose(se.reflectionInstance(t,e,i,n)),this}}get interfaces_(){return[h,I]}}class re{static solve(t,e){const i=e.length;if(t.length!==i||t[0].length!==i)throw new n("Matrix A is incorrectly sized");for(let n=0;n<i;n++){let s=n;for(let e=n+1;e<i;e++)Math.abs(t[e][n])>Math.abs(t[s][n])&&(s=e);if(0===t[s][n])return null;re.swapRows(t,n,s),re.swapRows(e,n,s);for(let s=n+1;s<i;s++){const r=t[s][n]/t[n][n];for(let e=i-1;e>=n;e--)t[s][e]-=t[n][e]*r;e[s]-=e[n]*r}}const s=new Array(i).fill(null);for(let n=i-1;n>=0;n--){let r=0;for(let e=n+1;e<i;e++)r+=t[n][e]*s[e];s[n]=(e[n]-r)/t[n][n]}return s}static swapRows(){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];if(e===i)return null;for(let n=0;n<t[0].length;n++){const s=t[e][n];t[e][n]=t[i][n],t[i][n]=s}}else if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const t=arguments[0],e=arguments[1],i=arguments[2];if(e===i)return null;const n=t[e];t[e]=t[i],t[i]=n}}}class oe{constructor(){oe.constructor_.apply(this,arguments)}static constructor_(){this._src0=null,this._src1=null,this._src2=null,this._dest0=null,this._dest1=null,this._dest2=null,this._m00=null,this._m01=null,this._m02=null,this._m10=null,this._m11=null,this._m12=null;const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5];this._src0=t,this._src1=e,this._src2=i,this._dest0=n,this._dest1=s,this._dest2=r}compute(){const t=[this._dest0.x,this._dest1.x,this._dest2.x],e=this.solve(t);if(null===e)return!1;this._m00=e[0],this._m01=e[1],this._m02=e[2];const i=[this._dest0.y,this._dest1.y,this._dest2.y],n=this.solve(i);return null!==n&&(this._m10=n[0],this._m11=n[1],this._m12=n[2],!0)}getTransformation(){return this.compute()?new se(this._m00,this._m01,this._m02,this._m10,this._m11,this._m12):null}solve(t){const e=[[this._src0.x,this._src0.y,1],[this._src1.x,this._src1.y,1],[this._src2.x,this._src2.y,1]];return re.solve(e,t)}}class ae{static createFromBaseLines(t,e,i,n){const s=new f(t.x+n.x-i.x,t.y+n.y-i.y),r=Jt.angleBetweenOriented(e,t,s),o=e.distance(t),a=n.distance(i);if(0===o)return new se;const l=a/o,A=se.translationInstance(-t.x,-t.y);return A.rotate(r),A.scale(l,l),A.translate(i.x,i.y),A}static createFromControlVectors(){if(2===arguments.length){if(arguments[0]instanceof f&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=e.x-t.x,n=e.y-t.y;return se.translationInstance(i,n)}if(arguments[0]instanceof Array&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1];if(t.length!==e.length)throw new n("Src and Dest arrays are not the same length");if(t.length<=0)throw new n("Too few control points");if(t.length>3)throw new n("Too many control points");return 1===t.length?ae.createFromControlVectors(t[0],e[0]):2===t.length?ae.createFromControlVectors(t[0],t[1],e[0],e[1]):ae.createFromControlVectors(t[0],t[1],t[2],e[0],e[1],e[2])}}else{if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=new f(n.x-i.x,n.y-i.y),r=Jt.angleBetweenOriented(e,t,s),o=e.distance(t),a=n.distance(i);if(0===o)return null;const l=a/o,A=se.translationInstance(-t.x,-t.y);return A.rotate(r),A.scale(l,l),A.translate(i.x,i.y),A}if(6===arguments.length)return new oe(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]).getTransformation()}}}class le{constructor(){le.constructor_.apply(this,arguments)}static constructor_(){this._coords=null;const t=arguments[0];this._coords=t}static getCoordinates(t){const e=new E;return t.apply(new le(e)),e}filter(t){(t instanceof tt||t instanceof bt)&&this._coords.add(t.getCoordinate())}get interfaces_(){return[z]}}class Ae{constructor(){Ae.constructor_.apply(this,arguments)}static constructor_(){this._mapOp=null;const t=arguments[0];this._mapOp=t}static map(t,e){return new Ae(e).map(t)}map(t){const e=new E;for(let i=0;i<t.getNumGeometries();i++){const n=this._mapOp.map(t.getGeometryN(i));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(Et.toGeometryArray(e))}}class ce{constructor(){ce.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null;const t=arguments[0];this._geomFactory=ce.extractFactory(t),this._inputGeoms=t}static extractFactory(t){return t.isEmpty()?null:t.iterator().next().getFactory()}static createList(){if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new E;return i.add(t),i.add(e),i}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=new E;return n.add(t),n.add(e),n.add(i),n}}static combine(){if(1===arguments.length)return new ce(arguments[0]).combine();if(2===arguments.length){const t=arguments[0],e=arguments[1];return new ce(ce.createList(t,e)).combine()}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return new ce(ce.createList(t,e,i)).combine()}}extractElements(t,e){if(null===t)return null;for(let i=0;i<t.getNumGeometries();i++){const n=t.getGeometryN(i);this._skipEmpty&&n.isEmpty()||e.add(n)}}combine(){const t=new E;for(let e=this._inputGeoms.iterator();e.hasNext();){const i=e.next();this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection():null:this._geomFactory.buildGeometry(t)}}class he{constructor(){he.constructor_.apply(this,arguments)}static constructor_(){if(this._factory=null,this._isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._factory=t}}setCopyUserData(t){this._isUserDataCopied=t}edit(t,e){if(null===t)return null;const i=this.editInternal(t,e);return this._isUserDataCopied&&i.setUserData(t.getUserData()),i}editInternal(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ht?this.editGeometryCollection(t,e):t instanceof xt?this.editPolygon(t,e):t instanceof bt||t instanceof tt?e.edit(t,this._factory):(c.shouldNeverReachHere("Unsupported Geometry type: "+t.getGeometryType()),null)}editGeometryCollection(t,e){const i=e.edit(t,this._factory),n=new E;for(let t=0;t<i.getNumGeometries();t++){const s=this.edit(i.getGeometryN(t),e);null===s||s.isEmpty()||n.add(s)}return i.getGeometryType()===Y.TYPENAME_MULTIPOINT?this._factory.createMultiPoint(n.toArray([])):i.getGeometryType()===Y.TYPENAME_MULTILINESTRING?this._factory.createMultiLineString(n.toArray([])):i.getGeometryType()===Y.TYPENAME_MULTIPOLYGON?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))}editPolygon(t,e){let i=e.edit(t,this._factory);if(null===i&&(i=this._factory.createPolygon()),i.isEmpty())return i;const n=this.edit(i.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();const s=new E;for(let t=0;t<i.getNumInteriorRing();t++){const n=this.edit(i.getInteriorRingN(t),e);null===n||n.isEmpty()||s.add(n)}return this._factory.createPolygon(n,s.toArray([]))}}function ue(){}he.GeometryEditorOperation=ue,he.NoOpGeometryOperation=class{edit(t,e){return t}get interfaces_(){return[ue]}},he.CoordinateOperation=class{edit(t,e){const i=this.edit(t.getCoordinates(),t);return t instanceof et?null===i?e.createLinearRing():e.createLinearRing(i):t instanceof tt?null===i?e.createLineString():e.createLineString(i):t instanceof bt?null===i||0===i.length?e.createPoint():e.createPoint(i[0]):t}get interfaces_(){return[ue]}},he.CoordinateSequenceOperation=class{edit(t,e){return t instanceof et?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof tt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof bt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t}get interfaces_(){return[ue]}};class de{constructor(){de.constructor_.apply(this,arguments)}static constructor_(){this._geometryType=null,this._comps=null;const t=arguments[0],e=arguments[1];this._geometryType=t,this._comps=e}static extract(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return de.extract(t,e,new E)}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return t.getGeometryType()===e?i.add(t):t instanceof ht&&t.apply(new de(e,i)),i}}static isOfType(t,e){return t.getGeometryType()===e||e===Y.TYPENAME_LINESTRING&&t.getGeometryType()===Y.TYPENAME_LINEARRING}filter(t){(null===this._geometryType||de.isOfType(t,this._geometryType))&&this._comps.add(t)}get interfaces_(){return[J]}}class ge{static map(){if(arguments[0]instanceof Y&&v(arguments[1],pe)){const t=arguments[0],e=arguments[1],i=new E;for(let n=0;n<t.getNumGeometries();n++){const s=e.map(t.getGeometryN(n));null!==s&&i.add(s)}return t.getFactory().buildGeometry(i)}if(v(arguments[0],b)&&v(arguments[1],pe)){const t=arguments[0],e=arguments[1],i=new E;for(let n=t.iterator();n.hasNext();){const t=n.next(),s=e.map(t);null!==s&&i.add(s)}return i}}}function pe(){}ge.MapOp=pe;class fe{constructor(){fe.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}transformPoint(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))}transformPolygon(t,e){let i=!0;const n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof et&&!n.isEmpty()||(i=!1);const s=new E;for(let e=0;e<t.getNumInteriorRing();e++){const n=this.transformLinearRing(t.getInteriorRingN(e),t);null===n||n.isEmpty()||(n instanceof et||(i=!1),s.add(n))}if(i)return this._factory.createPolygon(n,s.toArray([]));{const t=new E;return null!==n&&t.add(n),t.addAll(s),this._factory.buildGeometry(t)}}createCoordinateSequence(t){return this._factory.getCoordinateSequenceFactory().create(t)}getInputGeometry(){return this._inputGeom}transformMultiLineString(t,e){const i=new E;for(let e=0;e<t.getNumGeometries();e++){const n=this.transformLineString(t.getGeometryN(e),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)}transformCoordinates(t,e){return this.copy(t)}transformLineString(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))}transformMultiPoint(t,e){const i=new E;for(let e=0;e<t.getNumGeometries();e++){const n=this.transformPoint(t.getGeometryN(e),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)}transformMultiPolygon(t,e){const i=new E;for(let e=0;e<t.getNumGeometries();e++){const n=this.transformPolygon(t.getGeometryN(e),t);null!==n&&(n.isEmpty()||i.add(n))}return this._factory.buildGeometry(i)}copy(t){return t.copy()}transformLinearRing(t,e){const i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);const n=i.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)}transformGeometryCollection(t,e){const i=new E;for(let e=0;e<t.getNumGeometries();e++){const n=this.transform(t.getGeometryN(e));null!==n&&(this._pruneEmptyGeometry&&n.isEmpty()||i.add(n))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Et.toGeometryArray(i)):this._factory.buildGeometry(i)}transform(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof bt)return this.transformPoint(t,null);if(t instanceof Bt)return this.transformMultiPoint(t,null);if(t instanceof et)return this.transformLinearRing(t,null);if(t instanceof tt)return this.transformLineString(t,null);if(t instanceof wt)return this.transformMultiLineString(t,null);if(t instanceof xt)return this.transformPolygon(t,null);if(t instanceof dt)return this.transformMultiPolygon(t,null);if(t instanceof ht)return this.transformGeometryCollection(t,null);throw new n("Unknown Geometry subtype: "+t.getGeometryType())}}class me{constructor(){me.constructor_.apply(this,arguments)}static constructor_(){this._comps=null;const t=arguments[0];this._comps=t}static getLines(){if(1===arguments.length){const t=arguments[0];return me.getLines(t,new E)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t instanceof tt?e.add(t):t instanceof ht&&t.apply(new me(e)),e}}static getGeometry(t){return t.getFactory().buildGeometry(me.getLines(t))}filter(t){t instanceof tt&&this._comps.add(t)}get interfaces_(){return[J]}}class _e{constructor(){_e.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){const t=arguments[0];this._lines=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._lines=t,this._isForcedToLineString=e}}static getLines(){if(1===arguments.length){const t=arguments[0];return _e.getLines(t,!1)}if(2===arguments.length){if(v(arguments[0],b)&&v(arguments[1],b)){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const i=e.next();_e.getLines(i,t)}return t}if(arguments[0]instanceof Y&&"boolean"==typeof arguments[1]){const t=arguments[0],e=arguments[1],i=new E;return t.apply(new _e(i,e)),i}if(arguments[0]instanceof Y&&v(arguments[1],b)){const t=arguments[0],e=arguments[1];return t instanceof tt?e.add(t):t.apply(new _e(e)),e}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&v(arguments[0],b)&&v(arguments[1],b)){const t=arguments[1],e=arguments[2];for(let i=arguments[0].iterator();i.hasNext();){const n=i.next();_e.getLines(n,t,e)}return t}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Y&&v(arguments[1],b)){const t=arguments[1],e=arguments[2];return arguments[0].apply(new _e(t,e)),t}}}static getGeometry(){if(1===arguments.length){const t=arguments[0];return t.getFactory().buildGeometry(_e.getLines(t))}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t.getFactory().buildGeometry(_e.getLines(t,e))}}filter(t){if(this._isForcedToLineString&&t instanceof et){const e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof tt&&this._lines.add(t)}setForceToLineString(t){this._isForcedToLineString=t}get interfaces_(){return[z]}}const ye={reverseOrder:function(){return{compare:(t,e)=>e.compareTo(t)}},min:function(t){return ye.sort(t),t.get(0)},sort:function(t,e){const i=t.toArray();e?ct.sort(i,e):ct.sort(i);const n=t.iterator();for(let t=0,e=i.length;t<e;t++)n.next(),n.set(i[t])},singletonList:function(t){const e=new E;return e.add(t),e}};class we{constructor(){we.constructor_.apply(this,arguments)}static constructor_(){this._pts=null;const t=arguments[0];this._pts=t}static getPoints(){if(1===arguments.length){const t=arguments[0];return t instanceof bt?ye.singletonList(t):we.getPoints(t,new E)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t instanceof bt?e.add(t):t instanceof ht&&t.apply(new we(e)),e}}filter(t){t instanceof bt&&this._pts.add(t)}get interfaces_(){return[J]}}class ve{constructor(){ve.constructor_.apply(this,arguments)}static constructor_(){this._comps=null;const t=arguments[0];this._comps=t}static getPolygons(){if(1===arguments.length){const t=arguments[0];return ve.getPolygons(t,new E)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return t instanceof xt?e.add(t):t instanceof ht&&t.apply(new ve(e)),e}}filter(t){t instanceof xt&&this._comps.add(t)}get interfaces_(){return[J]}}class be{constructor(){be.constructor_.apply(this,arguments)}static constructor_(){this._isDone=!1}applyTo(t){for(let e=0;e<t.getNumGeometries()&&!this._isDone;e++){const i=t.getGeometryN(e);if(i instanceof ht)this.applyTo(i);else if(this.visit(i),this.isDone())return this._isDone=!0,null}}}class Ce{constructor(){Ce.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFact=null,this._precModel=null,this._dim=new xe,this._nPts=100,this._rotationAngle=0,0===arguments.length)Ce.constructor_.call(this,new Et);else if(1===arguments.length){const t=arguments[0];this._geomFact=t,this._precModel=t.getPrecisionModel()}}setBase(t){this._dim.setBase(t)}setRotation(t){this._rotationAngle=t}setWidth(t){this._dim.setWidth(t)}createEllipse(){const t=this._dim.getEnvelope(),e=t.getWidth()/2,i=t.getHeight()/2,n=t.getMinX()+e,s=t.getMinY()+i,r=new Array(this._nPts+1).fill(null);let o=0;for(let t=0;t<this._nPts;t++){const a=t*(2*Math.PI/this._nPts),l=e*Math.cos(a)+n,A=i*Math.sin(a)+s;r[o++]=this.coord(l,A)}r[o]=new f(r[0]);const a=this._geomFact.createLinearRing(r),l=this._geomFact.createPolygon(a);return this.rotate(l)}createArc(t,e){const i=this._dim.getEnvelope(),n=i.getWidth()/2,s=i.getHeight()/2,r=i.getMinX()+n,o=i.getMinY()+s;let a=e;(a<=0||a>2*Math.PI)&&(a=2*Math.PI);const l=a/(this._nPts-1),A=new Array(this._nPts).fill(null);let c=0;for(let e=0;e<this._nPts;e++){const i=t+e*l,a=n*Math.cos(i)+r,h=s*Math.sin(i)+o;A[c++]=this.coord(a,h)}const h=this._geomFact.createLineString(A);return this.rotate(h)}rotate(t){if(0!==this._rotationAngle){const e=se.rotationInstance(this._rotationAngle,this._dim.getCentre().x,this._dim.getCentre().y);t.apply(e)}return t}coord(t,e){const i=new f(t,e);return this._precModel.makePrecise(i),i}createArcPolygon(t,e){const i=this._dim.getEnvelope(),n=i.getWidth()/2,s=i.getHeight()/2,r=i.getMinX()+n,o=i.getMinY()+s;let a=e;(a<=0||a>2*Math.PI)&&(a=2*Math.PI);const l=a/(this._nPts-1),A=new Array(this._nPts+2).fill(null);let c=0;A[c++]=this.coord(r,o);for(let e=0;e<this._nPts;e++){const i=t+l*e,a=n*Math.cos(i)+r,h=s*Math.sin(i)+o;A[c++]=this.coord(a,h)}A[c++]=this.coord(r,o);const h=this._geomFact.createLinearRing(A),u=this._geomFact.createPolygon(h);return this.rotate(u)}createRectangle(){let t=null,e=0,i=Math.trunc(this._nPts/4);i<1&&(i=1);const n=this._dim.getEnvelope().getWidth()/i,s=this._dim.getEnvelope().getHeight()/i,r=new Array(4*i+1).fill(null),o=this._dim.getEnvelope();for(t=0;t<i;t++){const i=o.getMinX()+t*n,s=o.getMinY();r[e++]=this.coord(i,s)}for(t=0;t<i;t++){const i=o.getMaxX(),n=o.getMinY()+t*s;r[e++]=this.coord(i,n)}for(t=0;t<i;t++){const i=o.getMaxX()-t*n,s=o.getMaxY();r[e++]=this.coord(i,s)}for(t=0;t<i;t++){const i=o.getMinX(),n=o.getMaxY()-t*s;r[e++]=this.coord(i,n)}r[e++]=new f(r[0]);const a=this._geomFact.createLinearRing(r),l=this._geomFact.createPolygon(a);return this.rotate(l)}createCircle(){return this.createEllipse()}setHeight(t){this._dim.setHeight(t)}setSize(t){this._dim.setSize(t)}createSupercircle(t){const e=1/t,i=this._dim.getMinSize()/2,n=this._dim.getCentre(),s=Math.pow(i,t),r=i,o=Math.pow(s/2,e),a=Math.trunc(this._nPts/8),l=new Array(8*a+1).fill(null),A=o/a;for(let i=0;i<=a;i++){let o=0,c=r;if(0!==i){o=A*i;const n=Math.pow(o,t);c=Math.pow(s-n,e)}l[i]=this.coordTrans(o,c,n),l[2*a-i]=this.coordTrans(c,o,n),l[2*a+i]=this.coordTrans(c,-o,n),l[4*a-i]=this.coordTrans(o,-c,n),l[4*a+i]=this.coordTrans(-o,-c,n),l[6*a-i]=this.coordTrans(-c,-o,n),l[6*a+i]=this.coordTrans(-c,o,n),l[8*a-i]=this.coordTrans(-o,c,n)}l[l.length-1]=new f(l[0]);const c=this._geomFact.createLinearRing(l),h=this._geomFact.createPolygon(c);return this.rotate(h)}setNumPoints(t){this._nPts=t}coordTrans(t,e,i){return this.coord(t+i.x,e+i.y)}createSquircle(){return this.createSupercircle(4)}setEnvelope(t){this._dim.setEnvelope(t)}setCentre(t){this._dim.setCentre(t)}}class xe{constructor(){xe.constructor_.apply(this,arguments)}static constructor_(){this.base=null,this.centre=null,this.width=null,this.height=null}setBase(t){this.base=t}setWidth(t){this.width=t}getBase(){return this.base}getWidth(){return this.width}getEnvelope(){return null!==this.base?new L(this.base.x,this.base.x+this.width,this.base.y,this.base.y+this.height):null!==this.centre?new L(this.centre.x-this.width/2,this.centre.x+this.width/2,this.centre.y-this.height/2,this.centre.y+this.height/2):new L(0,this.width,0,this.height)}getCentre(){return null===this.centre&&(this.centre=new f(this.base.x+this.width/2,this.base.y+this.height/2)),this.centre}getHeight(){return this.height}setHeight(t){this.height=t}setSize(t){this.height=t,this.width=t}setEnvelope(t){this.width=t.getWidth(),this.height=t.getHeight(),this.base=new f(t.getMinX(),t.getMinY()),this.centre=new f(t.centre())}setCentre(t){this.centre=t}getMinSize(){return Math.min(this.width,this.height)}}Ce.Dimensions=xe;class Be extends Ce{constructor(){super(),Be.constructor_.apply(this,arguments)}static constructor_(){if(this._numArms=8,this._armLengthRatio=.5,0===arguments.length)Ce.constructor_.call(this);else if(1===arguments.length){const t=arguments[0];Ce.constructor_.call(this,t)}}static create(t,e,i,n,s){const r=new Be;return r.setCentre(t),r.setSize(e),r.setNumPoints(i),r.setArmLengthRatio(s),r.setNumArms(n),r.createSineStar()}setArmLengthRatio(t){this._armLengthRatio=t}createSineStar(){const t=this._dim.getEnvelope(),e=t.getWidth()/2;let i=this._armLengthRatio;i<0&&(i=0),i>1&&(i=1);const n=i*e,s=(1-i)*e,r=t.getMinX()+e,o=t.getMinY()+e,a=new Array(this._nPts+1).fill(null);let l=0;for(let t=0;t<this._nPts;t++){const e=t/this._nPts*this._numArms,i=e-Math.floor(e),A=2*Math.PI*i,c=s+n*((Math.cos(A)+1)/2),h=t*(2*Math.PI/this._nPts),u=c*Math.cos(h)+r,d=c*Math.sin(h)+o;a[l++]=this.coord(u,d)}a[l]=new f(a[0]);const A=this._geomFact.createLinearRing(a);return this._geomFact.createPolygon(A)}setNumArms(t){this._numArms=t}}var Ee=Object.freeze({__proto__:null,AffineTransformation:se,AffineTransformationBuilder:oe,AffineTransformationFactory:ae,ComponentCoordinateExtracter:le,GeometryCollectionMapper:Ae,GeometryCombiner:ce,GeometryEditor:he,GeometryExtracter:de,GeometryMapper:ge,GeometryTransformer:fe,LineStringExtracter:me,LinearComponentExtracter:_e,PointExtracter:we,PolygonExtracter:ve,ShortCircuitedGeometryVisitor:be,SineStarFactory:Be}),Se=Object.freeze({__proto__:null,Coordinate:f,CoordinateList:F,CoordinateSequenceFilter:I,CoordinateXY:_,CoordinateXYM:y,CoordinateXYZM:w,Dimension:$,Envelope:L,Geometry:Y,GeometryCollection:ht,GeometryFactory:Et,IntersectionMatrix:Zt,LineSegment:Xt,LineString:tt,LinearRing:et,Location:qt,MultiLineString:wt,MultiPoint:Bt,MultiPolygon:dt,Point:bt,Polygon:xt,PrecisionModel:_t,Triangle:ie,util:Ee});class Fe{constructor(){Fe.constructor_.apply(this,arguments)}static constructor_(){this._pt=[new f,new f],this._distance=r.NaN,this._isNull=!0}getCoordinates(){return this._pt}getCoordinate(t){return this._pt[t]}setMinimum(){if(1===arguments.length){const t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isNull)return this.initialize(t,e),null;const i=t.distance(e);i<this._distance&&this.initialize(t,e,i)}}initialize(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=i,this._isNull=!1}}toString(){return Wt.toLineString(this._pt[0],this._pt[1])}getDistance(){return this._distance}setMaximum(){if(1===arguments.length){const t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isNull)return this.initialize(t,e),null;const i=t.distance(e);i>this._distance&&this.initialize(t,e,i)}}}class Ie{static computeDistance(){if(arguments[2]instanceof Fe&&arguments[0]instanceof tt&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=arguments[2],n=new Xt,s=t.getCoordinates();for(let t=0;t<s.length-1;t++){n.setCoordinates(s[t],s[t+1]);const r=n.closestPoint(e);i.setMinimum(r,e)}}else if(arguments[2]instanceof Fe&&arguments[0]instanceof xt&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=arguments[2];Ie.computeDistance(t.getExteriorRing(),e,i);for(let n=0;n<t.getNumInteriorRing();n++)Ie.computeDistance(t.getInteriorRingN(n),e,i)}else if(arguments[2]instanceof Fe&&arguments[0]instanceof Y&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=arguments[2];if(t instanceof tt)Ie.computeDistance(t,e,i);else if(t instanceof xt)Ie.computeDistance(t,e,i);else if(t instanceof ht){const n=t;for(let t=0;t<n.getNumGeometries();t++){const s=n.getGeometryN(t);Ie.computeDistance(s,e,i)}}else i.setMinimum(t.getCoordinate(),e)}else if(arguments[2]instanceof Fe&&arguments[0]instanceof Xt&&arguments[1]instanceof f){const t=arguments[1],e=arguments[2],i=arguments[0].closestPoint(t);e.setMinimum(i,t)}}}class Le{constructor(){Le.constructor_.apply(this,arguments)}static constructor_(){this._g0=null,this._g1=null,this._ptDist=new Fe,this._densifyFrac=0;const t=arguments[0],e=arguments[1];this._g0=t,this._g1=e}static distance(){if(2===arguments.length)return new Le(arguments[0],arguments[1]).distance();if(3===arguments.length){const t=arguments[2],e=new Le(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}}getCoordinates(){return this._ptDist.getCoordinates()}setDensifyFraction(t){if(t>1||t<=0)throw new n("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t}compute(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)}distance(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()}computeOrientedDistance(t,e,i){const n=new Me(e);if(t.apply(n),i.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){const n=new Te(e,this._densifyFrac);t.apply(n),i.setMaximum(n.getMaxPointDistance())}}orientedDistance(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()}}class Me{constructor(){Me.constructor_.apply(this,arguments)}static constructor_(){this._maxPtDist=new Fe,this._minPtDist=new Fe,this._euclideanDist=new Ie,this._geom=null;const t=arguments[0];this._geom=t}filter(t){this._minPtDist.initialize(),Ie.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}getMaxPointDistance(){return this._maxPtDist}get interfaces_(){return[X]}}class Te{constructor(){Te.constructor_.apply(this,arguments)}static constructor_(){this._maxPtDist=new Fe,this._minPtDist=new Fe,this._geom=null,this._numSubSegs=0;const t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))}filter(t,e){if(0===e)return null;const i=t.getCoordinate(e-1),n=t.getCoordinate(e),s=(n.x-i.x)/this._numSubSegs,r=(n.y-i.y)/this._numSubSegs;for(let t=0;t<this._numSubSegs;t++){const e=i.x+t*s,n=i.y+t*r,o=new f(e,n);this._minPtDist.initialize(),Ie.computeDistance(this._geom,o,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}}isGeometryChanged(){return!1}getMaxPointDistance(){return this._maxPtDist}isDone(){return!1}get interfaces_(){return[I]}}Le.MaxPointDistanceFilter=Me,Le.MaxDensifiedByFractionDistanceFilter=Te;var Re=Object.freeze({__proto__:null,DiscreteHausdorffDistance:Le,DistanceToPoint:Ie,PointPairDistance:Fe});class ke{visitItem(t){}}class Ue{locate(t){}}class De{constructor(){De.constructor_.apply(this,arguments)}static constructor_(){this._min=r.POSITIVE_INFINITY,this._max=r.NEGATIVE_INFINITY}getMin(){return this._min}intersects(t,e){return!(this._min>e||this._max<t)}getMax(){return this._max}toString(){return Wt.toLineString(new f(this._min,0),new f(this._max,0))}}De.NodeComparator=class{compare(t,e){const i=t,n=e,s=(i._min+i._max)/2,r=(n._min+n._max)/2;return s<r?-1:s>r?1:0}get interfaces_(){return[u]}};class Oe extends De{constructor(){super(),Oe.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const t=arguments[0],e=arguments[1],i=arguments[2];this._min=t,this._max=e,this._item=i}query(t,e,i){if(!this.intersects(t,e))return null;i.visitItem(this._item)}}class Pe extends De{constructor(){super(),Pe.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}buildExtent(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)}query(t,e,i){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,i),null!==this._node2&&this._node2.query(t,e,i)}}class Ne{constructor(){Ne.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new E,this._root=null,this._level=0}buildTree(){ye.sort(this._leaves,new De.NodeComparator);let t=this._leaves,e=null,i=new E;for(;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}}insert(t,e,i){if(null!==this._root)throw new k("Index cannot be added to once it has been queried");this._leaves.add(new Oe(t,e,i))}query(t,e,i){if(this.init(),null===this._root)return null;this._root.query(t,e,i)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(t){Q.out.println(Wt.toLineString(new f(t._min,this._level),new f(t._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(t,e){this._level++,e.clear();for(let i=0;i<t.size();i+=2){const n=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(n);else{const n=new Pe(t.get(i),t.get(i+1));e.add(n)}}}}class Qe{constructor(){Qe.constructor_.apply(this,arguments)}static constructor_(){this._items=new E}getItems(){return this._items}visitItem(t){this._items.add(t)}get interfaces_(){return[ke]}}class He{constructor(){He.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;const t=arguments[0];this._p=t}static locatePointInRing(){if(arguments[0]instanceof f&&v(arguments[1],O)){const t=arguments[1],e=new He(arguments[0]),i=new f,n=new f;for(let s=1;s<t.size();s++)if(t.getCoordinate(s,i),t.getCoordinate(s-1,n),e.countSegment(i,n),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof f&&arguments[1]instanceof Array){const t=arguments[1],e=new He(arguments[0]);for(let i=1;i<t.length;i++){const n=t[i],s=t[i-1];if(e.countSegment(n,s),e.isOnSegment())return e.getLocation()}return e.getLocation()}}getLocation(){return this._isPointOnSegment?qt.BOUNDARY:this._crossingCount%2==1?qt.INTERIOR:qt.EXTERIOR}isPointInPolygon(){return this.getLocation()!==qt.EXTERIOR}isOnSegment(){return this._isPointOnSegment}countSegment(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){let i=t.x,n=e.x;return i>n&&(i=e.x,n=t.x),this._p.x>=i&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){let i=P.index(t,e,this._p);if(i===P.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===P.LEFT&&this._crossingCount++}}}class Ge{constructor(){Ge.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const t=arguments[0];if(!(v(t,ut)||t instanceof et))throw new n("Argument must be Polygonal or LinearRing");this._geom=t}locate(t){null===this._index&&(this._index=new ze(this._geom),this._geom=null);const e=new He(t),i=new Ve(e);return this._index.query(t.y,t.y,i),e.getLocation()}get interfaces_(){return[Ue]}}class Ve{constructor(){Ve.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;const t=arguments[0];this._counter=t}visitItem(t){const e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))}get interfaces_(){return[ke]}}class ze{constructor(){ze.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new Ne;const t=arguments[0];t.isEmpty()?this._isEmpty=!0:this.init(t)}init(t){for(let e=_e.getLines(t).iterator();e.hasNext();){const t=e.next().getCoordinates();this.addLine(t)}}addLine(t){for(let e=1;e<t.length;e++){const i=new Xt(t[e-1],t[e]),n=Math.min(i.p0.y,i.p1.y),s=Math.max(i.p0.y,i.p1.y);this._index.insert(n,s,i)}}query(){if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this._isEmpty)return new E;const i=new Qe;return this._index.query(t,e,i),i.getItems()}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(this._isEmpty)return null;this._index.query(t,e,i)}}}Ge.SegmentVisitor=Ve,Ge.IntervalIndexedGeometry=ze;class Ke{static isInRing(t,e){return Ke.locateInRing(t,e)!==qt.EXTERIOR}static locateInRing(t,e){return He.locatePointInRing(t,e)}static isOnLine(){if(arguments[0]instanceof f&&v(arguments[1],O)){const t=arguments[0],e=arguments[1],i=new Yt,n=new f,s=new f,r=e.size();for(let o=1;o<r;o++)if(e.getCoordinate(o-1,n),e.getCoordinate(o,s),i.computeIntersection(t,n,s),i.hasIntersection())return!0;return!1}if(arguments[0]instanceof f&&arguments[1]instanceof Array){const t=arguments[0],e=arguments[1],i=new Yt;for(let n=1;n<e.length;n++){const s=e[n-1],r=e[n];if(i.computeIntersection(t,s,r),i.hasIntersection())return!0}return!1}}}class je{hasNext(){}next(){}remove(){}}class We{constructor(){We.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}static isAtomic(t){return!(t instanceof ht)}next(){if(this._atStart)return this._atStart=!1,We.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new B;const t=this._parent.getGeometryN(this._index++);return t instanceof ht?(this._subcollectionIterator=new We(t),this._subcollectionIterator.next()):t}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}remove(){throw new K(this.getClass().getName())}get interfaces_(){return[je]}}class $e{constructor(){$e.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;const t=arguments[0];this._geom=t}static locatePointInPolygon(t,e){if(e.isEmpty())return qt.EXTERIOR;const i=e.getExteriorRing(),n=$e.locatePointInRing(t,i);if(n!==qt.INTERIOR)return n;for(let i=0;i<e.getNumInteriorRing();i++){const n=e.getInteriorRingN(i),s=$e.locatePointInRing(t,n);if(s===qt.BOUNDARY)return qt.BOUNDARY;if(s===qt.INTERIOR)return qt.EXTERIOR}return qt.INTERIOR}static locatePointInRing(t,e){return e.getEnvelopeInternal().intersects(t)?Ke.locateInRing(t,e.getCoordinates()):qt.EXTERIOR}static isContained(t,e){return qt.EXTERIOR!==$e.locate(t,e)}static locate(t,e){return e.isEmpty()?qt.EXTERIOR:e.getEnvelopeInternal().intersects(t)?$e.locateInGeometry(t,e):qt.EXTERIOR}static containsPointInPolygon(t,e){return qt.EXTERIOR!==$e.locatePointInPolygon(t,e)}static locateInGeometry(t,e){if(e instanceof xt)return $e.locatePointInPolygon(t,e);if(e instanceof ht){const i=new We(e);for(;i.hasNext();){const n=i.next();if(n!==e){const e=$e.locateInGeometry(t,n);if(e!==qt.EXTERIOR)return e}}}return qt.EXTERIOR}locate(t){return $e.locate(t,this._geom)}get interfaces_(){return[Ue]}}var Ye,Xe,qe=Object.freeze({__proto__:null,IndexedPointInAreaLocator:Ge,PointOnGeometryLocator:Ue,SimplePointInAreaLocator:$e});class Ze{measure(t,e){}}class Je{constructor(){Je.constructor_.apply(this,arguments)}static constructor_(){if(this._quadrantSegments=Je.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=Je.CAP_ROUND,this._joinStyle=Je.JOIN_ROUND,this._mitreLimit=Je.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=Je.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(e)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.setQuadrantSegments(t),this.setEndCapStyle(e),this.setJoinStyle(i),this.setMitreLimit(n)}}static bufferDistanceError(t){const e=Math.PI/2/t;return 1-Math.cos(e/2)}getEndCapStyle(){return this._endCapStyle}isSingleSided(){return this._isSingleSided}setQuadrantSegments(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Je.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Je.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Je.JOIN_ROUND&&(this._quadrantSegments=Je.DEFAULT_QUADRANT_SEGMENTS)}getJoinStyle(){return this._joinStyle}setJoinStyle(t){this._joinStyle=t}setSimplifyFactor(t){this._simplifyFactor=t<0?0:t}getSimplifyFactor(){return this._simplifyFactor}getQuadrantSegments(){return this._quadrantSegments}setEndCapStyle(t){this._endCapStyle=t}getMitreLimit(){return this._mitreLimit}setMitreLimit(t){this._mitreLimit=t}setSingleSided(t){this._isSingleSided=t}}Je.CAP_ROUND=1,Je.CAP_FLAT=2,Je.CAP_SQUARE=3,Je.JOIN_ROUND=1,Je.JOIN_MITRE=2,Je.JOIN_BEVEL=3,Je.DEFAULT_QUADRANT_SEGMENTS=8,Je.DEFAULT_MITRE_LIMIT=5,Je.DEFAULT_SIMPLIFY_FACTOR=.01;class ti{static relativeSign(t,e){return t<e?-1:t>e?1:0}static compareValue(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}static compare(t,e,i){if(e.equals2D(i))return 0;const n=ti.relativeSign(e.x,i.x),s=ti.relativeSign(e.y,i.y);switch(t){case 0:return ti.compareValue(n,s);case 1:return ti.compareValue(s,n);case 2:return ti.compareValue(s,-n);case 3:return ti.compareValue(-n,s);case 4:return ti.compareValue(-n,-s);case 5:return ti.compareValue(-s,-n);case 6:return ti.compareValue(-s,n);case 7:return ti.compareValue(n,-s)}return c.shouldNeverReachHere("invalid octant value"),0}}class ei{constructor(){ei.constructor_.apply(this,arguments)}static constructor_(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._segString=t,this.coord=new f(e),this.segmentIndex=i,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(i))}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}compareTo(t){const e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?ti.compare(this._segmentOctant,this.coord,e.coord):1:-1}isEndPoint(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}toString(){return this.segmentIndex+":"+this.coord.toString()}isInterior(){return this._isInterior}get interfaces_(){return[o]}}class ii extends gt{}function ni(t){return null==t?0:t.color}function si(t){return null==t?null:t.parent}function ri(t,e){null!==t&&(t.color=e)}function oi(t){return null==t?null:t.left}function ai(t){return null==t?null:t.right}class li extends ii{constructor(){super(),this.root_=null,this.size_=0}get(t){let e=this.root_;for(;null!==e;){const i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null}put(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let i,n,s=this.root_;do{if(i=s,n=t.compareTo(s.key),n<0)s=s.left;else{if(!(n>0)){const t=s.value;return s.value=e,t}s=s.right}}while(null!==s);const r={key:t,left:null,right:null,value:e,parent:i,color:0,getValue(){return this.value},getKey(){return this.key}};return n<0?i.left=r:i.right=r,this.fixAfterInsertion(r),this.size_++,null}fixAfterInsertion(t){let e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)si(t)===oi(si(si(t)))?(e=ai(si(si(t))),1===ni(e)?(ri(si(t),0),ri(e,0),ri(si(si(t)),1),t=si(si(t))):(t===ai(si(t))&&(t=si(t),this.rotateLeft(t)),ri(si(t),0),ri(si(si(t)),1),this.rotateRight(si(si(t))))):(e=oi(si(si(t))),1===ni(e)?(ri(si(t),0),ri(e,0),ri(si(si(t)),1),t=si(si(t))):(t===oi(si(t))&&(t=si(t),this.rotateRight(t)),ri(si(t),0),ri(si(si(t)),1),this.rotateLeft(si(si(t)))));this.root_.color=0}values(){const t=new E;let e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=li.successor(e));)t.add(e.value);return t}entrySet(){const t=new pt;let e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=li.successor(e));)t.add(e);return t}rotateLeft(t){if(null!=t){const e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}rotateRight(t){if(null!=t){const e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}getFirstEntry(){let t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}static successor(t){let e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}{e=t.parent;let i=t;for(;null!==e&&i===e.right;)i=e,e=e.parent;return e}}size(){return this.size_}containsKey(t){let e=this.root_;for(;null!==e;){const i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return!0;e=e.right}}return!1}}class Ai{constructor(){Ai.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new li,this._edge=null;const t=arguments[0];this._edge=t}getSplitCoordinates(){const t=new F;this.addEndpoints();const e=this.iterator();let i=e.next();for(;e.hasNext();){const n=e.next();this.addEdgeCoordinates(i,n,t),i=n}return t.toCoordinateArray()}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();)e.next().print(t)}findCollapsesFromExistingVertices(t){for(let e=0;e<this._edge.size()-2;e++){const i=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);const n=this._edge.getCoordinate(e+2);i.equals2D(n)&&t.add(T.valueOf(e+1))}}addEdgeCoordinates(t,e,i){const n=this.createSplitEdgePts(t,e);i.add(n,!1)}findCollapseIndex(t,e,i){if(!t.coord.equals2D(e.coord))return!1;let n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(i[0]=t.segmentIndex+1,!0)}findCollapsesFromInsertedNodes(t){const e=new Array(1).fill(null),i=this.iterator();let n=i.next();for(;i.hasNext();){const s=i.next();this.findCollapseIndex(n,s,e)&&t.add(T.valueOf(e[0])),n=s}}getEdge(){return this._edge}addEndpoints(){const t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}createSplitEdge(t,e){const i=this.createSplitEdgePts(t,e);return new di(i,this._edge.getData())}add(t,e){const i=new ei(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(i);return null!==n?(c.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(i,i),i)}checkSplitEdgesCorrectness(t){const e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new l("bad split edge start point at "+i);const n=t.get(t.size()-1).getCoordinates(),s=n[n.length-1];if(!s.equals2D(e[e.length-1]))throw new l("bad split edge end point at "+s)}addCollapsedNodes(){const t=new E;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(let e=t.iterator();e.hasNext();){const t=e.next().intValue();this.add(this._edge.getCoordinate(t),t)}}createSplitEdgePts(t,e){let i=e.segmentIndex-t.segmentIndex+2;if(2===i)return[new f(t.coord),new f(e.coord)];const n=this._edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(n);s||i--;const r=new Array(i).fill(null);let o=0;r[o++]=new f(t.coord);for(let i=t.segmentIndex+1;i<=e.segmentIndex;i++)r[o++]=this._edge.getCoordinate(i);return s&&(r[o]=new f(e.coord)),r}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints(),this.addCollapsedNodes();const e=this.iterator();let i=e.next();for(;e.hasNext();){const n=e.next(),s=this.createSplitEdge(i,n);t.add(s),i=n}}}class ci{static octant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Cannot compute the octant for point ( "+t+", "+e+" )");const i=Math.abs(t),s=Math.abs(e);return t>=0?e>=0?i>=s?0:1:i>=s?7:6:e>=0?i>=s?3:2:i>=s?4:5}if(arguments[0]instanceof f&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1],i=e.x-t.x,s=e.y-t.y;if(0===i&&0===s)throw new n("Cannot compute the octant for two identical points "+t);return ci.octant(i,s)}}}class hi{getCoordinates(){}size(){}getCoordinate(t){}isClosed(){}setData(t){}getData(){}}class ui{addIntersection(t,e){}get interfaces_(){return[hi]}}class di{constructor(){di.constructor_.apply(this,arguments)}static constructor_(){this._nodeList=new Ai(this),this._pts=null,this._data=null;const t=arguments[0],e=arguments[1];this._pts=t,this._data=e}static getNodedSubstrings(){if(1===arguments.length){const t=arguments[0],e=new E;return di.getNodedSubstrings(t,e),e}if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();)e.next().getNodeList().addSplitEdges(t)}}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}toString(){return Wt.toLineString(new st(this._pts))}getNodeList(){return this._nodeList}addIntersectionNode(t,e){let i=e;const n=i+1;if(n<this._pts.length){const e=this._pts[n];t.equals2D(e)&&(i=n)}return this._nodeList.add(t,i)}addIntersections(t,e,i){for(let n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)}setData(t){this._data=t}safeOctant(t,e){return t.equals2D(e)?0:ci.octant(t,e)}getData(){return this._data}addIntersection(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){const t=arguments[1],e=arguments[3],i=new f(arguments[0].getIntersection(e));this.addIntersection(i,t)}}get interfaces_(){return[ui]}}class gi{getNodedSubstrings(){}computeNodes(t){}}class pi{constructor(){pi.constructor_.apply(this,arguments)}static constructor_(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){const t=arguments[0],e=arguments[1];pi.constructor_.call(this,t,e,0,0)}else if(4===arguments.length){const t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._isScaled=!this.isIntegerPrecision()}}rescale(){if(v(arguments[0],b))for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){const t=arguments[0];for(let e=0;e<t.length;e++)t[e].x=t[e].x/this._scaleFactor+this._offsetX,t[e].y=t[e].y/this._scaleFactor+this._offsetY;2===t.length&&t[0].equals2D(t[1])&&Q.out.println(t)}}scale(){if(v(arguments[0],b)){const t=arguments[0],e=new E(t.size());for(let i=t.iterator();i.hasNext();){const t=i.next();e.add(new di(this.scale(t.getCoordinates()),t.getData()))}return e}if(arguments[0]instanceof Array){const t=arguments[0],e=new Array(t.length).fill(null);for(let i=0;i<t.length;i++)e[i]=new f(Math.round((t[i].x-this._offsetX)*this._scaleFactor),Math.round((t[i].y-this._offsetY)*this._scaleFactor),t[i].getZ());return W.removeRepeatedPoints(e)}}isIntegerPrecision(){return 1===this._scaleFactor}getNodedSubstrings(){const t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}computeNodes(t){let e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}get interfaces_(){return[gi]}}class fi extends l{constructor(t,e){super(e?t+" [ "+e+" ]":t),this.pt=e?new f(e):void 0,this.name=Object.keys({TopologyException:fi})[0]}getCoordinate(){return this.pt}}class mi{constructor(){mi.constructor_.apply(this,arguments)}static constructor_(){this._li=new Yt,this._segStrings=null;const t=arguments[0];this._segStrings=t}checkEndPtVertexIntersections(){if(0===arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){const e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length){const t=arguments[0];for(let e=arguments[1].iterator();e.hasNext();){const i=e.next().getCoordinates();for(let e=1;e<i.length-1;e++)if(i[e].equals(t))throw new l("found endpt/interior pt intersection at index "+e+" :pt "+t)}}}checkInteriorIntersections(){if(0===arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){const e=t.next();for(let t=this._segStrings.iterator();t.hasNext();){const i=t.next();this.checkInteriorIntersections(e,i)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1],i=t.getCoordinates(),n=e.getCoordinates();for(let s=0;s<i.length-1;s++)for(let i=0;i<n.length-1;i++)this.checkInteriorIntersections(t,s,e,i)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];if(t===i&&e===n)return null;const s=t.getCoordinates()[e],r=t.getCoordinates()[e+1],o=i.getCoordinates()[n],a=i.getCoordinates()[n+1];if(this._li.computeIntersection(s,r,o,a),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,s,r)||this.hasInteriorIntersection(this._li,o,a)))throw new l("found non-noded intersection at "+s+"-"+r+" and "+o+"-"+a)}}checkValid(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}checkCollapses(){if(0===arguments.length)for(let t=this._segStrings.iterator();t.hasNext();){const e=t.next();this.checkCollapses(e)}else if(1===arguments.length){const t=arguments[0].getCoordinates();for(let e=0;e<t.length-2;e++)this.checkCollapse(t[e],t[e+1],t[e+2])}}hasInteriorIntersection(t,e,i){for(let n=0;n<t.getIntersectionNum();n++){const s=t.getIntersection(n);if(!s.equals(e)&&!s.equals(i))return!0}return!1}checkCollapse(t,e,i){if(t.equals(i))throw new l("found non-noded collapse at "+mi.fact.createLineString([t,e,i]))}}mi.fact=new Et;class _i{getBounds(){}}class yi{constructor(){yi.constructor_.apply(this,arguments)}static constructor_(){this._bounds=null,this._item=null;const t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}getItem(){return this._item}getBounds(){return this._bounds}get interfaces_(){return[_i,a]}}function wi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vi=function(){if(Xe)return Ye;Xe=1;var t=function(t,e){return t<e};function e(i){if(!(this instanceof e))return new e(i);this.array=[],this.size=0,this.compare=i||t}return e.prototype.clone=function(){var t=new e(this.compare);return t.size=this.size,t.array=this.array.slice(0,this.size),t},e.prototype.add=function(t){var e,i,n=this.size;for(this.array[this.size]=t,this.size+=1;n>0&&(e=n-1>>1,i=this.array[e],this.compare(t,i));)this.array[n]=i,n=e;this.array[n]=t},e.prototype.heapify=function(t){var e;for(this.array=t,this.size=t.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},e.prototype._percolateUp=function(t,e){for(var i,n,s=this.array[t];t>0&&(i=t-1>>1,n=this.array[i],e||this.compare(s,n));)this.array[t]=n,t=i;this.array[t]=s},e.prototype._percolateDown=function(t){for(var e,i,n,s=this.size,r=this.size>>>1,o=this.array[t];t<r&&(i=1+(e=1+(t<<1)),n=this.array[e],i<s&&this.compare(this.array[i],n)&&(e=i,n=this.array[i]),this.compare(n,o));)this.array[t]=n,t=e;this.array[t]=o},e.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},e.prototype.remove=function(t){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],t)&&!this.compare(t,this.array[e]))return this._removeAt(e),!0;return!1},e.prototype.removeOne=function(t){if("function"==typeof t)for(var e=0;e<this.size;e++)if(t(this.array[e]))return this._removeAt(e)},e.prototype.removeMany=function(t,e){if("function"!=typeof t||this.size<1)return[];e=e?Math.min(e,this.size):this.size;for(var i=0,n=new Array(e),s=0,r=new Array(this.size);i<e&&!this.isEmpty();){var o=this.poll();t(o)?n[i++]=o:r[s++]=o}n.length=i;for(var a=0;a<s;)this.add(r[a++]);return n},e.prototype.peek=function(){if(0!=this.size)return this.array[0]},e.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},e.prototype.replaceTop=function(t){if(0!=this.size){var e=this.array[0];return this.array[0]=t,this._percolateDown(0),e}},e.prototype.trim=function(){this.array=this.array.slice(0,this.size)},e.prototype.isEmpty=function(){return 0===this.size},e.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var e=0,i=this.clone();!i.isEmpty();)t(i.poll(),e++)},e.prototype.kSmallest=function(t){if(0==this.size||t<=0)return[];t=Math.min(this.size,t);const i=Math.min(this.size,2**(t-1)+1);if(i<2)return[this.peek()];const n=new e(this.compare);n.size=i,n.array=this.array.slice(0,i);const s=new Array(t);for(let e=0;e<t;e++)s[e]=n.poll();return s},Ye=e}(),bi=wi(vi);let Ci=class{constructor(){this._fpQueue=new bi(((t,e)=>t.compareTo(e)<0))}poll(){return this._fpQueue.poll()}size(){return this._fpQueue.size}clear(){this._fpQueue=new bi}peek(){return this._fpQueue.peek()}remove(){return this._fpQueue.poll()}isEmpty(){return this._fpQueue.isEmpty()}add(t){this._fpQueue.add(t)}};class xi{query(){}insert(t,e){}remove(t,e){}}class Bi{constructor(){Bi.constructor_.apply(this,arguments)}static constructor_(){if(this._childBoundables=new E,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._level=t}}getLevel(){return this._level}addChildBoundable(t){c.isTrue(null===this._bounds),this._childBoundables.add(t)}isEmpty(){return this._childBoundables.isEmpty()}getBounds(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}size(){return this._childBoundables.size()}getChildBoundables(){return this._childBoundables}get interfaces_(){return[_i,a]}}class Ei{static distance(t,e,i,n){const s=i-t,r=n-e;return Math.sqrt(s*s+r*r)}static maximumDistance(t,e){const i=Math.min(t.getMinX(),e.getMinX()),n=Math.min(t.getMinY(),e.getMinY()),s=Math.max(t.getMaxX(),e.getMaxX()),r=Math.max(t.getMaxY(),e.getMaxY());return Ei.distance(i,n,s,r)}static minMaxDistance(t,e){const i=t.getMinX(),n=t.getMinY(),s=t.getMaxX(),r=t.getMaxY(),o=e.getMinX(),a=e.getMinY(),l=e.getMaxX(),A=e.getMaxY();let c=Ei.maxDistance(i,n,i,r,o,a,o,A);return c=Math.min(c,Ei.maxDistance(i,n,i,r,o,a,l,a)),c=Math.min(c,Ei.maxDistance(i,n,i,r,l,A,o,A)),c=Math.min(c,Ei.maxDistance(i,n,i,r,l,A,l,a)),c=Math.min(c,Ei.maxDistance(i,n,s,n,o,a,o,A)),c=Math.min(c,Ei.maxDistance(i,n,s,n,o,a,l,a)),c=Math.min(c,Ei.maxDistance(i,n,s,n,l,A,o,A)),c=Math.min(c,Ei.maxDistance(i,n,s,n,l,A,l,a)),c=Math.min(c,Ei.maxDistance(s,r,i,r,o,a,o,A)),c=Math.min(c,Ei.maxDistance(s,r,i,r,o,a,l,a)),c=Math.min(c,Ei.maxDistance(s,r,i,r,l,A,o,A)),c=Math.min(c,Ei.maxDistance(s,r,i,r,l,A,l,a)),c=Math.min(c,Ei.maxDistance(s,r,s,n,o,a,o,A)),c=Math.min(c,Ei.maxDistance(s,r,s,n,o,a,l,a)),c=Math.min(c,Ei.maxDistance(s,r,s,n,l,A,o,A)),c=Math.min(c,Ei.maxDistance(s,r,s,n,l,A,l,a)),c}static maxDistance(t,e,i,n,s,r,o,a){let l=Ei.distance(t,e,s,r);return l=Math.max(l,Ei.distance(t,e,o,a)),l=Math.max(l,Ei.distance(i,n,s,r)),l=Math.max(l,Ei.distance(i,n,o,a)),l}}class Si{constructor(){Si.constructor_.apply(this,arguments)}static constructor_(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;const t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()}static area(t){return t.getBounds().getArea()}static isComposite(t){return t instanceof Bi}maximumDistance(){return Ei.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}expandToQueue(t,e){const i=Si.isComposite(this._boundable1),s=Si.isComposite(this._boundable2);if(i&&s)return Si.area(this._boundable1)>Si.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(s)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new n("neither boundable is composite")}isLeaves(){return!(Si.isComposite(this._boundable1)||Si.isComposite(this._boundable2))}getBoundable(t){return 0===t?this._boundable1:this._boundable2}getDistance(){return this._distance}distance(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}compareTo(t){const e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}expand(t,e,i,n,s){for(let r=t.getChildBoundables().iterator();r.hasNext();){const t=r.next();let o=null;o=i?new Si(e,t,this._itemDistance):new Si(t,e,this._itemDistance),o.getDistance()<s&&n.add(o)}}get interfaces_(){return[o]}}class Fi{constructor(){Fi.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._built=!1,this._itemBoundables=new E,this._nodeCapacity=null,0===arguments.length)Fi.constructor_.call(this,Fi.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];c.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}static compareDoubles(t,e){return t>e?1:t<e?-1:0}queryInternal(){if(v(arguments[2],ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Bi){const t=arguments[0],e=arguments[2],i=arguments[1].getChildBoundables();for(let n=0;n<i.size();n++){const s=i.get(n);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof Bi?this.queryInternal(t,s,e):s instanceof yi?e.visitItem(s.getItem()):c.shouldNeverReachHere())}}else if(v(arguments[2],x)&&arguments[0]instanceof Object&&arguments[1]instanceof Bi){const t=arguments[0],e=arguments[2],i=arguments[1].getChildBoundables();for(let n=0;n<i.size();n++){const s=i.get(n);this.getIntersectsOp().intersects(s.getBounds(),t)&&(s instanceof Bi?this.queryInternal(t,s,e):s instanceof yi?e.add(s.getItem()):c.shouldNeverReachHere())}}}insert(t,e){c.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new yi(t,e))}boundablesAtLevel(){if(1===arguments.length){const t=arguments[0],e=new E;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(c.isTrue(t>-2),e.getLevel()===t)return i.add(e),null;for(let n=e.getChildBoundables().iterator();n.hasNext();){const e=n.next();e instanceof Bi?this.boundablesAtLevel(t,e,i):(c.isTrue(e instanceof yi),-1===t&&i.add(e))}return null}}getRoot(){return this.build(),this._root}remove(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];let n=this.removeItem(e,i);if(n)return!0;let s=null;for(let r=e.getChildBoundables().iterator();r.hasNext();){const e=r.next();if(this.getIntersectsOp().intersects(e.getBounds(),t)&&e instanceof Bi&&(n=this.remove(t,e,i),n)){s=e;break}}return null!==s&&s.getChildBoundables().isEmpty()&&e.getChildBoundables().remove(s),n}}createHigherLevels(t,e){c.isTrue(!t.isEmpty());const i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)}depth(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const i=e.next();if(i instanceof Bi){const e=this.depth(i);e>t&&(t=e)}}return t+1}}createParentBoundables(t,e){c.isTrue(!t.isEmpty());const i=new E;i.add(this.createNode(e));const n=new E(t);ye.sort(n,this.getComparator());for(let t=n.iterator();t.hasNext();){const n=t.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(n)}return i}isEmpty(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}getNodeCapacity(){return this._nodeCapacity}lastNode(t){return t.get(t.size()-1)}size(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){let t=0;for(let e=arguments[0].getChildBoundables().iterator();e.hasNext();){const i=e.next();i instanceof Bi?t+=this.size(i):i instanceof yi&&(t+=1)}return t}}removeItem(t,e){let i=null;for(let n=t.getChildBoundables().iterator();n.hasNext();){const t=n.next();t instanceof yi&&t.getItem()===e&&(i=t)}return null!==i&&(t.getChildBoundables().remove(i),!0)}itemsTree(){if(0===arguments.length){this.build();const t=this.itemsTree(this._root);return null===t?new E:t}if(1===arguments.length){const t=arguments[0],e=new E;for(let i=t.getChildBoundables().iterator();i.hasNext();){const t=i.next();if(t instanceof Bi){const i=this.itemsTree(t);null!==i&&e.add(i)}else t instanceof yi?e.add(t.getItem()):c.shouldNeverReachHere()}return e.size()<=0?null:e}}query(){if(1===arguments.length){const t=arguments[0];this.build();const e=new E;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e)}}build(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}get interfaces_(){return[a]}}Fi.IntersectsOp=function(){},Fi.DEFAULT_NODE_CAPACITY=10;class Ii{distance(t,e){}}class Li extends Fi{constructor(){super(),Li.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)Li.constructor_.call(this,Li.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){const t=arguments[0];Fi.constructor_.call(this,t)}}static getItems(t){const e=new Array(t.size()).fill(null);let i=0;for(;!t.isEmpty();){const n=t.poll();e[i]=n.getBoundable(0).getItem(),i++}return e}static avg(t,e){return(t+e)/2}static centreY(t){return Li.avg(t.getMinY(),t.getMaxY())}static centreX(t){return Li.avg(t.getMinX(),t.getMaxX())}size(){return 0===arguments.length?super.size.call(this):super.size.apply(this,arguments)}insert(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof L))return super.insert.apply(this,arguments);{const t=arguments[0],e=arguments[1];if(t.isNull())return null;super.insert.call(this,t,e)}}getIntersectsOp(){return Li.intersectsOp}verticalSlices(t,e){const i=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),s=t.iterator();for(let t=0;t<e;t++){n[t]=new E;let e=0;for(;s.hasNext()&&e<i;){const i=s.next();n[t].add(i),e++}}return n}query(){if(1===arguments.length){const t=arguments[0];return super.query.call(this,t)}if(2===arguments.length){const t=arguments[0],e=arguments[1];super.query.call(this,t,e)}}getComparator(){return Li.yComparator}createParentBoundablesFromVerticalSlice(t,e){return super.createParentBoundables.call(this,t,e)}remove(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof L){const t=arguments[0],e=arguments[1];return super.remove.call(this,t,e)}return super.remove.apply(this,arguments)}depth(){return 0===arguments.length?super.depth.call(this):super.depth.apply(this,arguments)}createParentBoundables(t,e){c.isTrue(!t.isEmpty());const i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),n=new E(t);ye.sort(n,Li.xComparator);const s=this.verticalSlices(n,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(s,e)}nearestNeighbour(){if(1===arguments.length){if(v(arguments[0],Ii)){const t=arguments[0];if(this.isEmpty())return null;const e=new Si(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Si){const t=arguments[0];let e=r.POSITIVE_INFINITY,i=null;const n=new Ci;for(n.add(t);!n.isEmpty()&&e>0;){const t=n.poll(),s=t.getDistance();if(s>=e)break;t.isLeaves()?(e=s,i=t):t.expandToQueue(n,e)}return null===i?null:[i.getBoundable(0).getItem(),i.getBoundable(1).getItem()]}}else{if(2===arguments.length){const t=arguments[0],e=arguments[1];if(this.isEmpty()||t.isEmpty())return null;const i=new Si(this.getRoot(),t.getRoot(),e);return this.nearestNeighbour(i)}if(3===arguments.length){const t=arguments[2],e=new yi(arguments[0],arguments[1]),i=new Si(this.getRoot(),e,t);return this.nearestNeighbour(i)[0]}if(4===arguments.length){const t=arguments[2],e=arguments[3],i=new yi(arguments[0],arguments[1]),n=new Si(this.getRoot(),i,t);return this.nearestNeighbourK(n,e)}}}isWithinDistance(){if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=r.POSITIVE_INFINITY;const n=new Ci;for(n.add(t);!n.isEmpty();){const t=n.poll(),s=t.getDistance();if(s>e)return!1;if(t.maximumDistance()<=e)return!0;if(t.isLeaves()){if(i=s,i<=e)return!0}else t.expandToQueue(n,i)}return!1}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=new Si(this.getRoot(),t.getRoot(),e);return this.isWithinDistance(n,i)}}createParentBoundablesFromVerticalSlices(t,e){c.isTrue(t.length>0);const i=new E;for(let n=0;n<t.length;n++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return i}nearestNeighbourK(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,r.POSITIVE_INFINITY,e)}if(3===arguments.length){const t=arguments[0],e=arguments[2];let i=arguments[1];const n=new Ci;n.add(t);const s=new Ci;for(;!n.isEmpty()&&i>=0;){const t=n.poll(),r=t.getDistance();if(r>=i)break;t.isLeaves()?s.size()<e?s.add(t):(s.peek().getDistance()>r&&(s.poll(),s.add(t)),i=s.peek().getDistance()):t.expandToQueue(n,i)}return Li.getItems(s)}}createNode(t){return new Mi(t)}get interfaces_(){return[xi,a]}}class Mi extends Bi{constructor(){super(),Mi.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0];Bi.constructor_.call(this,t)}computeBounds(){let t=null;for(let e=this.getChildBoundables().iterator();e.hasNext();){const i=e.next();null===t?t=new L(i.getBounds()):t.expandToInclude(i.getBounds())}return t}}Li.STRtreeNode=Mi,Li.xComparator=new class{get interfaces_(){return[u]}compare(t,e){return Fi.compareDoubles(Li.centreX(t.getBounds()),Li.centreX(e.getBounds()))}},Li.yComparator=new class{get interfaces_(){return[u]}compare(t,e){return Fi.compareDoubles(Li.centreY(t.getBounds()),Li.centreY(e.getBounds()))}},Li.intersectsOp=new class{get interfaces_(){return[IntersectsOp]}intersects(t,e){return t.intersects(e)}},Li.DEFAULT_NODE_CAPACITY=10;class Ti{constructor(){Ti.constructor_.apply(this,arguments)}static constructor_(){this._overlapSeg1=new Xt,this._overlapSeg2=new Xt}overlap(){if(2===arguments.length);else if(4===arguments.length){const t=arguments[1],e=arguments[2],i=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}let Ri=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=i,this._context=n}computeOverlaps(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5];if(e-t==1&&s-n==1)return r.overlap(this,t,i,n),null;if(!this.overlaps(t,e,i,n,s))return null;const o=Math.trunc((t+e)/2),a=Math.trunc((n+s)/2);t<o&&(n<a&&this.computeOverlaps(t,o,i,n,a,r),a<s&&this.computeOverlaps(t,o,i,a,s,r)),o<e&&(n<a&&this.computeOverlaps(o,e,i,n,a,r),a<s&&this.computeOverlaps(o,e,i,a,s,r))}}setId(t){this._id=t}select(t,e){this.computeSelect(t,this._start,this._end,e)}getEnvelope(){if(null===this._env){const t=this._pts[this._start],e=this._pts[this._end];this._env=new L(t,e)}return this._env}overlaps(t,e,i,n,s){return L.intersects(this._pts[t],this._pts[e],i._pts[n],i._pts[s])}getEndIndex(){return this._end}getStartIndex(){return this._start}getContext(){return this._context}getId(){return this._id}getLineSegment(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}computeSelect(t,e,i,n){const s=this._pts[e],r=this._pts[i];if(i-e==1)return n.select(this,e),null;if(!t.intersects(s,r))return null;const o=Math.trunc((e+i)/2);e<o&&this.computeSelect(t,e,o,n),o<i&&this.computeSelect(t,o,i,n)}getCoordinates(){const t=new Array(this._end-this._start+1).fill(null);let e=0;for(let i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t}};class ki{static isNorthern(t){return t===ki.NE||t===ki.NW}static isOpposite(t,e){return t!==e&&2==(t-e+4)%4}static commonHalfPlane(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;const i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i}static isInHalfPlane(t,e){return e===ki.SE?t===ki.SE||t===ki.SW:t===e||t===e+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new n("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ki.NE:ki.SE:e>=0?ki.NW:ki.SW}if(arguments[0]instanceof f&&arguments[1]instanceof f){const t=arguments[0],e=arguments[1];if(e.x===t.x&&e.y===t.y)throw new n("Cannot compute the quadrant for two identical points "+t);return e.x>=t.x?e.y>=t.y?ki.NE:ki.SE:e.y>=t.y?ki.NW:ki.SW}}}ki.NE=0,ki.NW=1,ki.SW=2,ki.SE=3;class Ui{static findChainEnd(t,e){let i=e;for(;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;const n=ki.quadrant(t[i],t[i+1]);let s=e+1;for(;s<t.length&&(t[s-1].equals2D(t[s])||ki.quadrant(t[s-1],t[s])===n);)s++;return s-1}static getChains(){if(1===arguments.length){const t=arguments[0];return Ui.getChains(t,null)}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new E;let n=0;do{const s=Ui.findChainEnd(t,n),r=new Ri(t,n,s,e);i.add(r),n=s}while(n<t.length-1);return i}}}class Di{constructor(){Di.constructor_.apply(this,arguments)}static constructor_(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.setSegmentIntersector(t)}}setSegmentIntersector(t){this._segInt=t}get interfaces_(){return[gi]}}class Oi extends Di{constructor(){super(),Oi.constructor_.apply(this,arguments)}static constructor_(){if(this._monoChains=new E,this._index=new Li,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){const t=arguments[0];Di.constructor_.call(this,t)}}getMonotoneChains(){return this._monoChains}getNodedSubstrings(){return di.getNodedSubstrings(this._nodedSegStrings)}getIndex(){return this._index}add(t){for(let e=Ui.getChains(t.getCoordinates(),t).iterator();e.hasNext();){const t=e.next();t.setId(this._idCounter++),this._index.insert(t.getEnvelope(),t),this._monoChains.add(t)}}computeNodes(t){this._nodedSegStrings=t;for(let e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}intersectChains(){const t=new Pi(this._segInt);for(let e=this._monoChains.iterator();e.hasNext();){const i=e.next();for(let e=this._index.query(i.getEnvelope()).iterator();e.hasNext();){const n=e.next();if(n.getId()>i.getId()&&(i.computeOverlaps(n,t),this._nOverlaps++),this._segInt.isDone())return null}}}}class Pi extends Ti{constructor(){super(),Pi.constructor_.apply(this,arguments)}static constructor_(){this._si=null;const t=arguments[0];this._si=t}overlap(){if(4!==arguments.length)return super.overlap.apply(this,arguments);{const t=arguments[1],e=arguments[2],i=arguments[3],n=arguments[0].getContext(),s=e.getContext();this._si.processIntersections(n,t,s,i)}}}Oi.SegmentOverlapAction=Pi;class Ni{constructor(){Ni.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;const t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new n("Scale factor must be non-zero");1!==e&&(this._pt=new f(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new f,this._p1Scaled=new f),this.initCorners(this._pt)}intersectsScaled(t,e){const i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),s=Math.min(t.y,e.y),r=Math.max(t.y,e.y),o=this._maxx<i||this._minx>n||this._maxy<s||this._miny>r;if(o)return!1;const a=this.intersectsToleranceSquare(t,e);return c.isTrue(!(o&&a),"Found bad envelope test"),a}copyScaled(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}getSafeEnvelope(){if(null===this._safeEnv){const t=Ni.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new L(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}intersectsPixelClosure(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}intersectsToleranceSquare(t,e){let i=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&n||t.equals(this._pt)||e.equals(this._pt)))))}addSnappedNode(t,e){const i=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(i,n)&&(t.addIntersection(this.getCoordinate(),e),!0)}initCorners(t){const e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new f(this._maxx,this._maxy),this._corner[1]=new f(this._minx,this._maxy),this._corner[2]=new f(this._minx,this._miny),this._corner[3]=new f(this._maxx,this._miny)}intersects(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}scale(t){return Math.round(t*this._scaleFactor)}getCoordinate(){return this._originalPt}}Ni.SAFE_ENV_EXPANSION_FACTOR=.75;class Qi{constructor(){Qi.constructor_.apply(this,arguments)}static constructor_(){this.selectedSegment=new Xt}select(){if(1===arguments.length);else if(2===arguments.length){const t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}class Hi{constructor(){Hi.constructor_.apply(this,arguments)}static constructor_(){this._index=null;const t=arguments[0];this._index=t}snap(){if(1===arguments.length){const t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=t.getSafeEnvelope(),s=new Gi(t,e,i);return this._index.query(n,new class{get interfaces_(){return[ke]}visitItem(t){t.select(n,s)}}),s.isNodeAdded()}}}class Gi extends Qi{constructor(){super(),Gi.constructor_.apply(this,arguments)}static constructor_(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;const t=arguments[0],e=arguments[1],i=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=i}select(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Ri))return super.select.apply(this,arguments);{const t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}isNodeAdded(){return this._isNodeAdded}}Hi.HotPixelSnapAction=Gi;let Vi=class{isDone(){}processIntersections(t,e,i,n){}};class zi{constructor(){zi.constructor_.apply(this,arguments)}static constructor_(){this._li=null,this._interiorIntersections=null;const t=arguments[0];this._li=t,this._interiorIntersections=new E}isDone(){return!1}processIntersections(t,e,i,n){if(t===i&&e===n)return null;const s=t.getCoordinates()[e],r=t.getCoordinates()[e+1],o=i.getCoordinates()[n],a=i.getCoordinates()[n+1];if(this._li.computeIntersection(s,r,o,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(let t=0;t<this._li.getIntersectionNum();t++)this._interiorIntersections.add(this._li.getIntersection(t));t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)}}getInteriorIntersections(){return this._interiorIntersections}get interfaces_(){return[Vi]}}class Ki{constructor(){Ki.constructor_.apply(this,arguments)}static constructor_(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;const t=arguments[0];this._pm=t,this._li=new Yt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}checkCorrectness(t){const e=di.getNodedSubstrings(t),n=new mi(e);try{n.checkValid()}catch(t){if(!(t instanceof i))throw t;t.printStackTrace()}}getNodedSubstrings(){return di.getNodedSubstrings(this._nodedSegStrings)}snapRound(t,e){const i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)}findInteriorIntersections(t,e){const i=new zi(e);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()}computeVertexSnaps(){if(v(arguments[0],b))for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof di){const t=arguments[0],e=t.getCoordinates();for(let i=0;i<e.length;i++){const n=new Ni(e[i],this._scaleFactor,this._li);this._pointSnapper.snap(n,t,i)&&t.addIntersection(e[i],i)}}}computeNodes(t){this._nodedSegStrings=t,this._noder=new Oi,this._pointSnapper=new Hi(this._noder.getIndex()),this.snapRound(t,this._li)}computeIntersectionSnaps(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),i=new Ni(t,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}get interfaces_(){return[gi]}}class ji{static opposite(t){return t===ji.LEFT?ji.RIGHT:t===ji.RIGHT?ji.LEFT:t}}ji.ON=0,ji.LEFT=1,ji.RIGHT=2;class Wi extends i{constructor(t){super(t),this.name=Object.keys({EmptyStackException:Wi})[0]}}class $i extends x{constructor(){super(),this.array=[]}add(t){return this.array.push(t),!0}get(t){if(t<0||t>=this.size())throw new C;return this.array[t]}push(t){return this.array.push(t),t}pop(){if(0===this.array.length)throw new Wi;return this.array.pop()}peek(){if(0===this.array.length)throw new Wi;return this.array[this.array.length-1]}empty(){return 0===this.array.length}isEmpty(){return this.empty()}search(t){return this.array.indexOf(t)}size(){return this.array.length}toArray(){return this.array.slice()}}class Yi{constructor(){Yi.constructor_.apply(this,arguments)}static constructor_(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}getCoordinate(){return this._minCoord}getRightmostSide(t,e){let i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i}findRightmostEdgeAtVertex(){const t=this._minDe.getEdge().getCoordinates();c.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");const e=t[this._minIndex-1],i=t[this._minIndex+1],n=P.index(this._minCoord,i,e);let s=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&n===P.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&n===P.CLOCKWISE)&&(s=!0),s&&(this._minIndex=this._minIndex-1)}getRightmostSideOfSegment(t,e){const i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;let n=ji.LEFT;return i[e].y<i[e+1].y&&(n=ji.RIGHT),n}getEdge(){return this._orientedDe}checkForRightmostCoordinate(t){const e=t.getEdge().getCoordinates();for(let i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])}findRightmostEdgeAtNode(){const t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}findEdge(t){for(let e=t.iterator();e.hasNext();){const t=e.next();t.isForward()&&this.checkForRightmostCoordinate(t)}c.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===ji.LEFT&&(this._orientedDe=this._minDe.getSym())}}class Xi{constructor(){this.array=[]}addLast(t){this.array.push(t)}removeFirst(){return this.array.shift()}isEmpty(){return 0===this.array.length}}class qi{constructor(){qi.constructor_.apply(this,arguments)}static constructor_(){this._finder=null,this._dirEdgeList=new E,this._nodes=new E,this._rightMostCoord=null,this._env=null,this._finder=new Yi}clearVisitedEdges(){for(let t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}compareTo(t){const e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}getEnvelope(){if(null===this._env){const t=new L;for(let e=this._dirEdgeList.iterator();e.hasNext();){const i=e.next().getEdge().getCoordinates();for(let e=0;e<i.length-1;e++)t.expandToInclude(i[e])}this._env=t}return this._env}addReachable(t){const e=new $i;for(e.add(t);!e.empty();){const t=e.pop();this.add(t,e)}}copySymDepths(t){const e=t.getSym();e.setDepth(ji.LEFT,t.getDepth(ji.RIGHT)),e.setDepth(ji.RIGHT,t.getDepth(ji.LEFT))}add(t,e){t.setVisited(!0),this._nodes.add(t);for(let i=t.getEdges().iterator();i.hasNext();){const t=i.next();this._dirEdgeList.add(t);const n=t.getSym().getNode();n.isVisited()||e.push(n)}}getRightmostCoordinate(){return this._rightMostCoord}computeNodeDepth(t){let e=null;for(let i=t.getEdges().iterator();i.hasNext();){const t=i.next();if(t.isVisited()||t.getSym().isVisited()){e=t;break}}if(null===e)throw new fi("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(let e=t.getEdges().iterator();e.hasNext();){const t=e.next();t.setVisited(!0),this.copySymDepths(t)}}computeDepth(t){this.clearVisitedEdges();const e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(ji.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}create(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}findResultEdges(){for(let t=this._dirEdgeList.iterator();t.hasNext();){const e=t.next();e.getDepth(ji.RIGHT)>=1&&e.getDepth(ji.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}computeDepths(t){const e=new pt,i=new Xi,n=t.getNode();for(i.addLast(n),e.add(n),t.setVisited(!0);!i.isEmpty();){const t=i.removeFirst();e.add(t),this.computeNodeDepth(t);for(let n=t.getEdges().iterator();n.hasNext();){const t=n.next().getSym();if(t.isVisited())continue;const s=t.getNode();e.contains(s)||(i.addLast(s),e.add(s))}}}getNodes(){return this._nodes}getDirectedEdges(){return this._dirEdgeList}get interfaces_(){return[o]}}class Zi{constructor(){Zi.constructor_.apply(this,arguments)}static constructor_(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=P.COUNTERCLOCKWISE;const t=arguments[0];this._inputLine=t}static simplify(t,e){return new Zi(t).simplify(e)}isDeletable(t,e,i,n){const s=this._inputLine[t],r=this._inputLine[e],o=this._inputLine[i];return!!this.isConcave(s,r,o)&&!!this.isShallow(s,r,o,n)&&this.isShallowSampled(s,r,t,i,n)}deleteShallowConcavities(){let t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),n=!1;for(;i<this._inputLine.length;){let s=!1;this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=Zi.DELETE,s=!0,n=!0),t=s?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return n}isShallowConcavity(t,e,i,n){return P.index(t,e,i)===this._angleOrientation&&G.pointToSegment(e,t,i)<n}isShallowSampled(t,e,i,n,s){let r=Math.trunc((n-i)/Zi.NUM_PTS_TO_CHECK);r<=0&&(r=1);for(let o=i;o<n;o+=r)if(!this.isShallow(t,e,this._inputLine[o],s))return!1;return!0}isConcave(t,e,i){return P.index(t,e,i)===this._angleOrientation}simplify(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=P.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);let e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}findNextNonDeletedIndex(t){let e=t+1;for(;e<this._inputLine.length&&this._isDeleted[e]===Zi.DELETE;)e++;return e}isShallow(t,e,i,n){return G.pointToSegment(e,t,i)<n}collapseLine(){const t=new F;for(let e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Zi.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}Zi.INIT=0,Zi.DELETE=1,Zi.KEEP=1,Zi.NUM_PTS_TO_CHECK=10;class Ji{constructor(){Ji.constructor_.apply(this,arguments)}static constructor_(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new E}getCoordinates(){return this._ptList.toArray(Ji.COORDINATE_ARRAY_TYPE)}setPrecisionModel(t){this._precisionModel=t}addPt(t){const e=new f(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}reverse(){}addPts(t,e){if(e)for(let e=0;e<t.length;e++)this.addPt(t[e]);else for(let e=t.length-1;e>=0;e--)this.addPt(t[e])}isRedundant(t){if(this._ptList.size()<1)return!1;const e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}toString(){return(new Et).createLineString(this.getCoordinates()).toString()}closeRing(){if(this._ptList.size()<1)return null;const t=new f(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}setMinimumVertexDistance(t){this._minimimVertexDistance=t}}Ji.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);class tn{constructor(){tn.constructor_.apply(this,arguments)}static constructor_(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Xt,this._seg1=new Xt,this._offset0=new Xt,this._offset1=new Xt,this._side=0,this._hasNarrowConcaveAngle=!1;const t=arguments[0],e=arguments[1],i=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new Yt,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Je.JOIN_ROUND&&(this._closingSegLengthFactor=tn.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}getCoordinates(){return this._segList.getCoordinates()}addMitreJoin(t,e,i,n){const s=N.intersection(e.p0,e.p1,i.p0,i.p1);if(null!==s&&(n<=0?1:s.distance(t)/Math.abs(n))<=this._bufParams.getMitreLimit())return this._segList.addPt(s),null;this.addLimitedMitreJoin(e,i,n,this._bufParams.getMitreLimit())}addLastSegment(){this._segList.addPt(this._offset1.p1)}initSideSegments(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)}addLimitedMitreJoin(t,e,i,n){const s=this._seg0.p1,r=Jt.angle(s,this._seg0.p0),o=Jt.angleBetweenOriented(this._seg0.p0,s,this._seg1.p1)/2,a=Jt.normalize(r+o),l=Jt.normalize(a+Math.PI),A=n*i,c=i-A*Math.abs(Math.sin(o)),h=s.x+A*Math.cos(l),u=s.y+A*Math.sin(l),d=new f(h,u),g=new Xt(s,d),p=g.pointAlongOffset(1,c),m=g.pointAlongOffset(1,-c);this._side===ji.LEFT?(this._segList.addPt(p),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(p))}addDirectedFillet(t,e,i,n,s){const r=n===P.CLOCKWISE?-1:1,o=Math.abs(e-i),a=Math.trunc(o/this._filletAngleQuantum+.5);if(a<1)return null;const l=o/a,A=new f;for(let i=0;i<a;i++){const n=e+r*i*l;A.x=t.x+s*Math.cos(n),A.y=t.y+s*Math.sin(n),this._segList.addPt(A)}}computeOffsetSegment(t,e,i,n){const s=e===ji.LEFT?1:-1,r=t.p1.x-t.p0.x,o=t.p1.y-t.p0.y,a=Math.sqrt(r*r+o*o),l=s*i*r/a,A=s*i*o/a;n.p0.x=t.p0.x-A,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-A,n.p1.y=t.p1.y+l}addInsideTurn(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*tn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){const t=new f((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(t);const e=new f((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(e)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}createCircle(t){const e=new f(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}addBevelJoin(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}init(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ji,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*tn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}addCollinear(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Je.JOIN_BEVEL||this._bufParams.getJoinStyle()===Je.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,P.CLOCKWISE,this._distance))}addNextSegment(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;const i=P.index(this._s0,this._s1,this._s2),n=i===P.CLOCKWISE&&this._side===ji.LEFT||i===P.COUNTERCLOCKWISE&&this._side===ji.RIGHT;0===i?this.addCollinear(e):n?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)}addLineEndCap(t,e){const i=new Xt(t,e),n=new Xt;this.computeOffsetSegment(i,ji.LEFT,this._distance,n);const s=new Xt;this.computeOffsetSegment(i,ji.RIGHT,this._distance,s);const r=e.x-t.x,o=e.y-t.y,a=Math.atan2(o,r);switch(this._bufParams.getEndCapStyle()){case Je.CAP_ROUND:this._segList.addPt(n.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,P.CLOCKWISE,this._distance),this._segList.addPt(s.p1);break;case Je.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(s.p1);break;case Je.CAP_SQUARE:const t=new f;t.x=Math.abs(this._distance)*Math.cos(a),t.y=Math.abs(this._distance)*Math.sin(a);const i=new f(n.p1.x+t.x,n.p1.y+t.y),r=new f(s.p1.x+t.x,s.p1.y+t.y);this._segList.addPt(i),this._segList.addPt(r)}}addOutsideTurn(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*tn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Je.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Je.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}createSquare(t){this._segList.addPt(new f(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new f(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new f(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new f(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}addSegments(t,e){this._segList.addPts(t,e)}addFirstSegment(){this._segList.addPt(this._offset1.p0)}addCornerFillet(t,e,i,n,s){const r=e.x-t.x,o=e.y-t.y;let a=Math.atan2(o,r);const l=i.x-t.x,A=i.y-t.y,c=Math.atan2(A,l);n===P.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,c,n,s),this._segList.addPt(i)}closeRing(){this._segList.closeRing()}hasNarrowConcaveAngle(){return this._hasNarrowConcaveAngle}}tn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,tn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,tn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,tn.MAX_CLOSING_SEG_LEN_FACTOR=80;class en{constructor(){en.constructor_.apply(this,arguments)}static constructor_(){this._distance=0,this._precisionModel=null,this._bufParams=null;const t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}static copyCoordinates(t){const e=new Array(t.length).fill(null);for(let i=0;i<e.length;i++)e[i]=new f(t[i]);return e}getOffsetCurve(t,e){if(this._distance=e,0===e)return null;const i=e<0,n=Math.abs(e),s=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,i,s);const r=s.getCoordinates();return i&&W.reverse(r),r}computeSingleSidedBufferCurve(t,e,i){const n=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);const e=Zi.simplify(t,-n),s=e.length-1;i.initSideSegments(e[s],e[s-1],ji.LEFT),i.addFirstSegment();for(let t=s-2;t>=0;t--)i.addNextSegment(e[t],!0)}else{i.addSegments(t,!1);const e=Zi.simplify(t,n),s=e.length-1;i.initSideSegments(e[0],e[1],ji.LEFT),i.addFirstSegment();for(let t=2;t<=s;t++)i.addNextSegment(e[t],!0)}i.addLastSegment(),i.closeRing()}computeRingBufferCurve(t,e,i){let n=this.simplifyTolerance(this._distance);e===ji.RIGHT&&(n=-n);const s=Zi.simplify(t,n),r=s.length-1;i.initSideSegments(s[r-1],s[0],e);for(let t=1;t<=r;t++){const e=1!==t;i.addNextSegment(s[t],e)}i.closeRing()}computeLineBufferCurve(t,e){const i=this.simplifyTolerance(this._distance),n=Zi.simplify(t,i),s=n.length-1;e.initSideSegments(n[0],n[1],ji.LEFT);for(let t=2;t<=s;t++)e.addNextSegment(n[t],!0);e.addLastSegment(),e.addLineEndCap(n[s-1],n[s]);const r=Zi.simplify(t,-i),o=r.length-1;e.initSideSegments(r[o],r[o-1],ji.LEFT);for(let t=o-2;t>=0;t--)e.addNextSegment(r[t],!0);e.addLastSegment(),e.addLineEndCap(r[1],r[0]),e.closeRing()}computePointCurve(t,e){switch(this._bufParams.getEndCapStyle()){case Je.CAP_ROUND:e.createCircle(t);break;case Je.CAP_SQUARE:e.createSquare(t)}}getLineCurve(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;const i=Math.abs(e),n=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){const i=e<0;this.computeSingleSidedBufferCurve(t,i,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()}getBufferParameters(){return this._bufParams}simplifyTolerance(t){return t*this._bufParams.getSimplifyFactor()}getRingCurve(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return en.copyCoordinates(t);const n=this.getSegGen(i);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()}computeOffsetCurve(t,e,i){const n=this.simplifyTolerance(this._distance);if(e){const e=Zi.simplify(t,-n),s=e.length-1;i.initSideSegments(e[s],e[s-1],ji.LEFT),i.addFirstSegment();for(let t=s-2;t>=0;t--)i.addNextSegment(e[t],!0)}else{const e=Zi.simplify(t,n),s=e.length-1;i.initSideSegments(e[0],e[1],ji.LEFT),i.addFirstSegment();for(let t=2;t<=s;t++)i.addNextSegment(e[t],!0)}i.addLastSegment()}isLineOffsetEmpty(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}getSegGen(t){return new tn(this._precisionModel,this._bufParams,t)}}class nn{constructor(){nn.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){const t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){const t=arguments[0];this.init(1),this.location[ji.ON]=t}else if(arguments[0]instanceof nn){const t=arguments[0];if(this.init(t.location.length),null!==t)for(let e=0;e<this.location.length;e++)this.location[e]=t.location[e]}}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.init(3),this.location[ji.ON]=t,this.location[ji.LEFT]=e,this.location[ji.RIGHT]=i}}setAllLocations(t){for(let e=0;e<this.location.length;e++)this.location[e]=t}isNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]!==qt.NONE)return!1;return!0}setAllLocationsIfNull(t){for(let e=0;e<this.location.length;e++)this.location[e]===qt.NONE&&(this.location[e]=t)}isLine(){return 1===this.location.length}merge(t){if(t.location.length>this.location.length){const t=new Array(3).fill(null);t[ji.ON]=this.location[ji.ON],t[ji.LEFT]=qt.NONE,t[ji.RIGHT]=qt.NONE,this.location=t}for(let e=0;e<this.location.length;e++)this.location[e]===qt.NONE&&e<t.location.length&&(this.location[e]=t.location[e])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const t=this.location[ji.LEFT];this.location[ji.LEFT]=this.location[ji.RIGHT],this.location[ji.RIGHT]=t}get(t){return t<this.location.length?this.location[t]:qt.NONE}isEqualOnSide(t,e){return this.location[e]===t.location[e]}allPositionsEqual(t){for(let e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}toString(){const t=new M;return this.location.length>1&&t.append(qt.toLocationSymbol(this.location[ji.LEFT])),t.append(qt.toLocationSymbol(this.location[ji.ON])),this.location.length>1&&t.append(qt.toLocationSymbol(this.location[ji.RIGHT])),t.toString()}setLocations(t,e,i){this.location[ji.ON]=t,this.location[ji.LEFT]=e,this.location[ji.RIGHT]=i}isArea(){return this.location.length>1}isAnyNull(){for(let t=0;t<this.location.length;t++)if(this.location[t]===qt.NONE)return!0;return!1}setLocation(){if(1===arguments.length){const t=arguments[0];this.setLocation(ji.ON,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.location[t]=e}}init(t){this.location=new Array(t).fill(null),this.setAllLocations(qt.NONE)}}class sn{constructor(){sn.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const t=arguments[0];this.elt[0]=new nn(t),this.elt[1]=new nn(t)}else if(arguments[0]instanceof sn){const t=arguments[0];this.elt[0]=new nn(t.elt[0]),this.elt[1]=new nn(t.elt[1])}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[0]=new nn(qt.NONE),this.elt[1]=new nn(qt.NONE),this.elt[t].setLocation(e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.elt[0]=new nn(t,e,i),this.elt[1]=new nn(t,e,i)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.elt[0]=new nn(qt.NONE,qt.NONE,qt.NONE),this.elt[1]=new nn(qt.NONE,qt.NONE,qt.NONE),this.elt[t].setLocations(e,i,n)}}static toLineLabel(t){const e=new sn(qt.NONE);for(let i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e}getGeometryCount(){let t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}setAllLocations(t,e){this.elt[t].setAllLocations(e)}isNull(t){return this.elt[t].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setAllLocationsIfNull(e)}}isLine(t){return this.elt[t].isLine()}merge(t){for(let e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new nn(t.elt[e]):this.elt[e].merge(t.elt[e])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){const t=arguments[0];return this.elt[t].get(ji.ON)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.elt[t].get(e)}}toString(){const t=new M;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}setLocation(){if(2===arguments.length){const t=arguments[0],e=arguments[1];this.elt[t].setLocation(ji.ON,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this.elt[t].setLocation(e,i)}}isEqualOnSide(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}allPositionsEqual(t,e){return this.elt[t].allPositionsEqual(e)}toLine(t){this.elt[t].isArea()&&(this.elt[t]=new nn(this.elt[t].location[0]))}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){const t=arguments[0];return this.elt[t].isArea()}}isAnyNull(t){return this.elt[t].isAnyNull()}}let rn=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._label=t}}setVisited(t){this._isVisited=t}setInResult(t){this._isInResult=t}setLabel(t){this._label=t}getLabel(){return this._label}setCovered(t){this._isCovered=t,this._isCoveredSet=!0}updateIM(t){c.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}isInResult(){return this._isInResult}isVisited(){return this._isVisited}},on=class t extends rn{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new sn(0,qt.NONE)}isIncidentEdgeInResult(){for(let t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}computeMergedLocation(t,e){let i=qt.NONE;if(i=this._label.getLocation(e),!t.isNull(e)){const n=t.getLocation(e);i!==qt.BOUNDARY&&(i=n)}return i}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const t=arguments[0],e=arguments[1];null===this._label?this._label=new sn(t,e):this._label.setLocation(t,e)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof t){const t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof sn){const t=arguments[0];for(let e=0;e<2;e++){const i=this.computeMergedLocation(t,e);this._label.getLocation(e)===qt.NONE&&this._label.setLocation(e,i)}}}add(t){this._edges.insert(t),t.setNode(this)}setLabelBoundary(t){if(null===this._label)return null;let e=qt.NONE;null!==this._label&&(e=this._label.getLocation(t));let i=null;switch(e){case qt.BOUNDARY:i=qt.INTERIOR;break;case qt.INTERIOR:default:i=qt.BOUNDARY}this._label.setLocation(t,i)}print(t){t.println("node "+this._coord+" lbl: "+this._label)}computeIM(t){}},an=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new li,this.nodeFact=null;const t=arguments[0];this.nodeFact=t}print(t){for(let e=this.iterator();e.hasNext();)e.next().print(t)}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(t){const e=new E;for(let i=this.iterator();i.hasNext();){const n=i.next();n.getLabel().getLocation(t)===qt.BOUNDARY&&e.add(n)}return e}add(t){const e=t.getCoordinate();this.addNode(e).add(t)}find(t){return this.nodeMap.get(t)}addNode(){if(arguments[0]instanceof f){const t=arguments[0];let e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof on){const t=arguments[0],e=this.nodeMap.get(t.getCoordinate());return null===e?(this.nodeMap.put(t.getCoordinate(),t),t):(e.mergeLabel(t),e)}}};class ln{createNode(t){return new on(t,null)}}class An{constructor(){An.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){const t=arguments[0];this._edge=t}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];An.constructor_.call(this,t,e,i,null)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];An.constructor_.call(this,t),this.init(e,i),this._label=n}}compareDirection(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:P.index(t._p0,t._p1,this._p1)}getDy(){return this._dy}print(t){const e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),n=i.lastIndexOf("."),s=i.substring(n+1);t.print("  "+s+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}getLabel(){return this._label}getEdge(){return this._edge}toString(){const t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}computeLabel(t){}init(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ki.quadrant(this._dx,this._dy),c.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}getCoordinate(){return this._p0}setNode(t){this._node=t}compareTo(t){const e=t;return this.compareDirection(e)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getQuadrant(){return this._quadrant}getNode(){return this._node}get interfaces_(){return[o]}}let cn=class t extends An{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const t=arguments[0],e=arguments[1];if(An.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{const e=t.getNumPoints()-1;this.init(t.getCoordinate(e),t.getCoordinate(e-1))}this.computeDirectedLabel()}static depthFactor(t,e){return t===qt.EXTERIOR&&e===qt.INTERIOR?1:t===qt.INTERIOR&&e===qt.EXTERIOR?-1:0}setVisited(t){this._isVisited=t}setDepth(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new fi("assigned depths do not match",this.getCoordinate());this._depth[t]=e}isInteriorAreaEdge(){let t=!0;for(let e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,ji.LEFT)===qt.INTERIOR&&this._label.getLocation(e,ji.RIGHT)===qt.INTERIOR||(t=!1);return t}setNextMin(t){this._nextMin=t}print(t){super.print.call(this,t),t.print(" "+this._depth[ji.LEFT]+"/"+this._depth[ji.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}setMinEdgeRing(t){this._minEdgeRing=t}getSym(){return this._sym}isForward(){return this._isForward}setSym(t){this._sym=t}setVisitedEdge(t){this.setVisited(t),this._sym.setVisited(t)}getNextMin(){return this._nextMin}getDepth(t){return this._depth[t]}computeDirectedLabel(){this._label=new sn(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}isLineEdge(){const t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,qt.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,qt.EXTERIOR);return t&&e&&i}setEdgeRing(t){this._edgeRing=t}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}setInResult(t){this._isInResult=t}getEdge(){return this._edge}printEdge(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}setEdgeDepths(t,e){let i=this.getEdge().getDepthDelta();this._isForward||(i=-i);let n=1;t===ji.LEFT&&(n=-1);const s=ji.opposite(t),r=e+i*n;this.setDepth(t,e),this.setDepth(s,r)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(t){this._next=t}isVisited(){return this._isVisited}},hn=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new E,this._nodes=null,this._edgeEndList=new E,0===arguments.length)this._nodes=new an(new ln);else if(1===arguments.length){const t=arguments[0];this._nodes=new an(t)}}static linkResultDirectedEdges(t){for(let e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}printEdges(t){t.println("Edges:");for(let e=0;e<this._edges.size();e++){t.println("edge "+e+":");const i=this._edges.get(e);i.print(t),i.eiList.print(t)}}debugPrintln(t){Q.out.println(t)}isBoundaryNode(t,e){const i=this._nodes.find(e);if(null===i)return!1;const n=i.getLabel();return null!==n&&n.getLocation(t)===qt.BOUNDARY}linkAllDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}debugPrint(t){Q.out.print(t)}findEdgeEnd(t){for(let e=this.getEdgeEnds().iterator();e.hasNext();){const i=e.next();if(i.getEdge()===t)return i}return null}getNodes(){return this._nodes.values()}findEdge(t,e){for(let i=0;i<this._edges.size();i++){const n=this._edges.get(i),s=n.getCoordinates();if(t.equals(s[0])&&e.equals(s[1]))return n}return null}find(t){return this._nodes.find(t)}addNode(){if(arguments[0]instanceof on){const t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof f){const t=arguments[0];return this._nodes.addNode(t)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}matchInSameDirection(t,e,i,n){return!!t.equals(i)&&P.index(t,e,n)===P.COLLINEAR&&ki.quadrant(t,e)===ki.quadrant(i,n)}getEdgeEnds(){return this._edgeEndList}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(t,e){for(let i=0;i<this._edges.size();i++){const n=this._edges.get(i),s=n.getCoordinates();if(this.matchInSameDirection(t,e,s[0],s[1]))return n;if(this.matchInSameDirection(t,e,s[s.length-1],s[s.length-2]))return n}return null}insertEdge(t){this._edges.add(t)}addEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._edges.add(t);const i=new cn(t,!0),n=new cn(t,!1);i.setSym(n),n.setSym(i),this.add(i),this.add(n)}}add(t){this._nodes.add(t),this._edgeEndList.add(t)}},un=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new E,this._pts=new E,this._label=new sn(qt.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new E,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}computeRing(){if(null!==this._ring)return null;const t=new Array(this._pts.size()).fill(null);for(let e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=P.isCCW(this._ring.getCoordinates())}isIsolated(){return 1===this._label.getGeometryCount()}computePoints(t){this._startDe=t;let e=t,i=!0;do{if(null===e)throw new fi("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new fi("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);const t=e.getLabel();c.isTrue(t.isArea()),this.mergeLabel(t),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}getLinearRing(){return this._ring}getCoordinate(t){return this._pts.get(t)}computeMaxNodeDegree(){this._maxNodeDegree=0;let t=this._startDe;do{const e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}addPoints(t,e,i){const n=t.getCoordinates();if(e){let t=1;i&&(t=0);for(let e=t;e<n.length;e++)this._pts.add(n[e])}else{let t=n.length-2;i&&(t=n.length-1);for(let e=t;e>=0;e--)this._pts.add(n[e])}}containsPoint(t){const e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ke.isInRing(t,e.getCoordinates()))return!1;for(let e=this._holes.iterator();e.hasNext();)if(e.next().containsPoint(t))return!1;return!0}getMaxNodeDegree(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}setShell(t){this._shell=t,null!==t&&t.addHole(this)}toPolygon(t){const e=new Array(this._holes.size()).fill(null);for(let t=0;t<this._holes.size();t++)e[t]=this._holes.get(t).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}isHole(){return this._isHole}setInResult(){let t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}addHole(t){this._holes.add(t)}isShell(){return null===this._shell}getLabel(){return this._label}getEdges(){return this._edges}getShell(){return this._shell}mergeLabel(){if(1===arguments.length){const t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){const t=arguments[1],e=arguments[0].getLocation(t,ji.RIGHT);if(e===qt.NONE)return null;if(this._label.getLocation(t)===qt.NONE)return this._label.setLocation(t,e),null}}};class dn extends un{constructor(){super(),dn.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];un.constructor_.call(this,t,e)}getNext(t){return t.getNextMin()}setEdgeRing(t,e){t.setMinEdgeRing(e)}}class gn extends un{constructor(){super(),gn.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];un.constructor_.call(this,t,e)}linkDirectedEdgesForMinimalEdgeRings(){let t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}buildMinimalRings(){const t=new E;let e=this._startDe;do{if(null===e.getMinEdgeRing()){const i=new dn(e,this._geometryFactory);t.add(i)}e=e.getNext()}while(e!==this._startDe);return t}getNext(t){return t.getNext()}setEdgeRing(t,e){t.setEdgeRing(e)}}class pn{constructor(){pn.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=null,this._shellList=new E;const t=arguments[0];this._geometryFactory=t}static findEdgeRingContaining(t,e){const i=t.getLinearRing(),n=i.getEnvelopeInternal();let s=i.getCoordinateN(0),r=null,o=null;for(let t=e.iterator();t.hasNext();){const e=t.next(),a=e.getLinearRing(),l=a.getEnvelopeInternal();if(l.equals(n))continue;if(!l.contains(n))continue;s=W.ptNotInList(i.getCoordinates(),a.getCoordinates());let A=!1;Ke.isInRing(s,a.getCoordinates())&&(A=!0),A&&(null===r||o.contains(l))&&(r=e,o=r.getLinearRing().getEnvelopeInternal())}return r}sortShellsAndHoles(t,e,i){for(let n=t.iterator();n.hasNext();){const t=n.next();t.isHole()?i.add(t):e.add(t)}}computePolygons(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next().toPolygon(this._geometryFactory);e.add(t)}return e}placeFreeHoles(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next();if(null===e.getShell()){const i=pn.findEdgeRingContaining(e,t);if(null===i)throw new fi("unable to assign hole to a shell",e.getCoordinate(0));e.setShell(i)}}}buildMinimalEdgeRings(t,e,i){const n=new E;for(let s=t.iterator();s.hasNext();){const t=s.next();if(t.getMaxNodeDegree()>2){t.linkDirectedEdgesForMinimalEdgeRings();const n=t.buildMinimalRings(),s=this.findShell(n);null!==s?(this.placePolygonHoles(s,n),e.add(s)):i.addAll(n)}else n.add(t)}return n}buildMaximalEdgeRings(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next();if(t.isInResult()&&t.getLabel().isArea()&&null===t.getEdgeRing()){const i=new gn(t,this._geometryFactory);e.add(i),i.setInResult()}}return e}placePolygonHoles(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next();e.isHole()&&e.setShell(t)}}getPolygons(){return this.computePolygons(this._shellList)}findShell(t){let e=0,i=null;for(let n=t.iterator();n.hasNext();){const t=n.next();t.isHole()||(i=t,e++)}return c.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i}add(){if(1===arguments.length){const t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];hn.linkResultDirectedEdges(e);const i=this.buildMaximalEdgeRings(t),n=new E,s=this.buildMinimalEdgeRings(i,this._shellList,n);this.sortShellsAndHoles(s,this._shellList,n),this.placeFreeHoles(this._shellList,n)}}}class fn{constructor(){fn.constructor_.apply(this,arguments)}static constructor_(){this._subgraphs=null,this._seg=new Xt;const t=arguments[0];this._subgraphs=t}findStabbedSegments(){if(1===arguments.length){const t=arguments[0],e=new E;for(let i=this._subgraphs.iterator();i.hasNext();){const n=i.next(),s=n.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(v(arguments[2],x)&&arguments[0]instanceof f&&arguments[1]instanceof cn){const t=arguments[0],e=arguments[1],i=arguments[2],n=e.getEdge().getCoordinates();for(let s=0;s<n.length-1;s++){if(this._seg.p0=n[s],this._seg.p1=n[s+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<t.x)continue;if(this._seg.isHorizontal())continue;if(t.y<this._seg.p0.y||t.y>this._seg.p1.y)continue;if(P.index(this._seg.p0,this._seg.p1,t)===P.RIGHT)continue;let r=e.getDepth(ji.LEFT);this._seg.p0.equals(n[s])||(r=e.getDepth(ji.RIGHT));const o=new mn(this._seg,r);i.add(o)}}else if(v(arguments[2],x)&&arguments[0]instanceof f&&v(arguments[1],x)){const t=arguments[0],e=arguments[2];for(let i=arguments[1].iterator();i.hasNext();){const n=i.next();n.isForward()&&this.findStabbedSegments(t,n,e)}}}getDepth(t){const e=this.findStabbedSegments(t);return 0===e.size()?0:ye.min(e)._leftDepth}}class mn{constructor(){mn.constructor_.apply(this,arguments)}static constructor_(){this._upwardSeg=null,this._leftDepth=null;const t=arguments[0],e=arguments[1];this._upwardSeg=new Xt(t),this._leftDepth=e}compareX(t,e){const i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)}toString(){return this._upwardSeg.toString()}compareTo(t){const e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;let i=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==i?i:(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg),0!==i?i:this._upwardSeg.compareTo(e._upwardSeg))}get interfaces_(){return[o]}}fn.DepthSegment=mn;class _n{constructor(){_n.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new E;const t=arguments[0],e=arguments[1],i=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=i}addRingSide(t,e,i,n,s){if(0===e&&t.length<et.MINIMUM_VALID_SIZE)return null;let r=n,o=s;t.length>=et.MINIMUM_VALID_SIZE&&P.isCCW(t)&&(r=s,o=n,i=ji.opposite(i));const a=this._curveBuilder.getRingCurve(t,i,e);this.addCurve(a,r,o)}addRingBothSides(t,e){this.addRingSide(t,e,ji.LEFT,qt.EXTERIOR,qt.INTERIOR),this.addRingSide(t,e,ji.RIGHT,qt.INTERIOR,qt.EXTERIOR)}addPoint(t){if(this._distance<=0)return null;const e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,qt.EXTERIOR,qt.INTERIOR)}addPolygon(t){let e=this._distance,i=ji.LEFT;this._distance<0&&(e=-this._distance,i=ji.RIGHT);const n=t.getExteriorRing(),s=W.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance))return null;if(this._distance<=0&&s.length<3)return null;this.addRingSide(s,e,i,qt.EXTERIOR,qt.INTERIOR);for(let n=0;n<t.getNumInteriorRing();n++){const s=t.getInteriorRingN(n),r=W.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(r,e,ji.opposite(i),qt.INTERIOR,qt.EXTERIOR)}}isTriangleErodedCompletely(t,e){const i=new ie(t[0],t[1],t[2]),n=i.inCentre();return G.pointToSegment(n,i.p0,i.p1)<Math.abs(e)}addLineString(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;const e=W.removeRepeatedPoints(t.getCoordinates());if(W.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{const t=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(t,qt.EXTERIOR,qt.INTERIOR)}}add(t){if(t.isEmpty())return null;if(t instanceof xt)this.addPolygon(t);else if(t instanceof tt)this.addLineString(t);else if(t instanceof bt)this.addPoint(t);else if(t instanceof Bt)this.addCollection(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof dt)this.addCollection(t);else{if(!(t instanceof ht))throw new K(t.getGeometryType());this.addCollection(t)}}addCurve(t,e,i){if(null===t||t.length<2)return null;const n=new di(t,new sn(0,qt.BOUNDARY,e,i));this._curveList.add(n)}getCurves(){return this.add(this._inputGeom),this._curveList}isErodedCompletely(t,e){const i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);const n=t.getEnvelopeInternal(),s=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>s}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);this.add(i)}}}class yn{constructor(){yn.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new li,this._edgeList=null,this._ptInAreaLocation=[qt.NONE,qt.NONE]}getNextCW(t){this.getEdges();const e=this._edgeList.indexOf(t);let i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)}propagateSideLabels(t){let e=qt.NONE;for(let i=this.iterator();i.hasNext();){const n=i.next().getLabel();n.isArea(t)&&n.getLocation(t,ji.LEFT)!==qt.NONE&&(e=n.getLocation(t,ji.LEFT))}if(e===qt.NONE)return null;let i=e;for(let e=this.iterator();e.hasNext();){const n=e.next(),s=n.getLabel();if(s.getLocation(t,ji.ON)===qt.NONE&&s.setLocation(t,ji.ON,i),s.isArea(t)){const e=s.getLocation(t,ji.LEFT),r=s.getLocation(t,ji.RIGHT);if(r!==qt.NONE){if(r!==i)throw new fi("side location conflict",n.getCoordinate());e===qt.NONE&&c.shouldNeverReachHere("found single null side (at "+n.getCoordinate()+")"),i=e}else c.isTrue(s.getLocation(t,ji.LEFT)===qt.NONE,"found single null side"),s.setLocation(t,ji.RIGHT,i),s.setLocation(t,ji.LEFT,i)}}}getCoordinate(){const t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}checkAreaLabelsConsistent(t){const e=this.getEdges();if(e.size()<=0)return!0;const i=e.size()-1,n=e.get(i).getLabel().getLocation(t,ji.LEFT);c.isTrue(n!==qt.NONE,"Found unlabelled area edge");let s=n;for(let e=this.iterator();e.hasNext();){const i=e.next().getLabel();c.isTrue(i.isArea(t),"Found non-area edge");const n=i.getLocation(t,ji.LEFT),r=i.getLocation(t,ji.RIGHT);if(n===r)return!1;if(r!==s)return!1;s=n}return!0}findIndex(t){this.iterator();for(let e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new E(this._edgeMap.values())),this._edgeList}getLocation(t,e,i){return this._ptInAreaLocation[t]===qt.NONE&&(this._ptInAreaLocation[t]=$e.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]}toString(){const t=new M;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(let e=this.iterator();e.hasNext();){const i=e.next();t.append(i),t.append("\n")}return t.toString()}computeEdgeEndLabels(t){for(let e=this.iterator();e.hasNext();)e.next().computeLabel(t)}computeLabelling(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const e=[!1,!1];for(let t=this.iterator();t.hasNext();){const i=t.next().getLabel();for(let t=0;t<2;t++)i.isLine(t)&&i.getLocation(t)===qt.BOUNDARY&&(e[t]=!0)}for(let i=this.iterator();i.hasNext();){const n=i.next(),s=n.getLabel();for(let i=0;i<2;i++)if(s.isAnyNull(i)){let r=qt.NONE;if(e[i])r=qt.EXTERIOR;else{const e=n.getCoordinate();r=this.getLocation(i,e,t)}s.setAllLocationsIfNull(i,r)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(t,e){this._edgeMap.put(t,e),this._edgeList=null}print(t){Q.out.println("EdgeEndStar:   "+this.getCoordinate());for(let e=this.iterator();e.hasNext();)e.next().print(t)}isAreaLabelsConsistent(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}}let wn=class t extends yn{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}linkResultDirectedEdges(){this.getResultAreaEdges();let t=null,e=null,i=this._SCANNING_FOR_INCOMING;for(let n=0;n<this._resultAreaEdgeList.size();n++){const s=this._resultAreaEdgeList.get(n),r=s.getSym();if(s.getLabel().isArea())switch(null===t&&s.isInResult()&&(t=s),i){case this._SCANNING_FOR_INCOMING:if(!r.isInResult())continue;e=r,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!s.isInResult())continue;e.setNext(s),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new fi("no outgoing dirEdge found",this.getCoordinate());c.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}insert(t){const e=t;this.insertEdgeEnd(e,e)}getRightmostEdge(){const t=this.getEdges(),e=t.size();if(e<1)return null;const i=t.get(0);if(1===e)return i;const n=t.get(e-1),s=i.getQuadrant(),r=n.getQuadrant();return ki.isNorthern(s)&&ki.isNorthern(r)?i:ki.isNorthern(s)||ki.isNorthern(r)?0!==i.getDy()?i:0!==n.getDy()?n:(c.shouldNeverReachHere("found two horizontal edges incident on node"),null):n}updateLabelling(t){for(let e=this.iterator();e.hasNext();){const i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}}linkAllDirectedEdges(){this.getEdges();let t=null,e=null;for(let i=this._edgeList.size()-1;i>=0;i--){const n=this._edgeList.get(i),s=n.getSym();null===e&&(e=s),null!==t&&s.setNext(t),t=n}e.setNext(t)}computeDepths(){if(1===arguments.length){const t=arguments[0],e=this.findIndex(t),i=t.getDepth(ji.LEFT),n=t.getDepth(ji.RIGHT),s=this.computeDepths(e+1,this._edgeList.size(),i);if(this.computeDepths(0,e,s)!==n)throw new fi("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){const t=arguments[1];let e=arguments[2];for(let i=arguments[0];i<t;i++){const t=this._edgeList.get(i);t.setEdgeDepths(ji.RIGHT,e),e=t.getDepth(ji.LEFT)}return e}}mergeSymLabels(){for(let t=this.iterator();t.hasNext();){const e=t.next();e.getLabel().merge(e.getSym().getLabel())}}linkMinimalDirectedEdges(t){let e=null,i=null,n=this._SCANNING_FOR_INCOMING;for(let s=this._resultAreaEdgeList.size()-1;s>=0;s--){const r=this._resultAreaEdgeList.get(s),o=r.getSym();switch(null===e&&r.getEdgeRing()===t&&(e=r),n){case this._SCANNING_FOR_INCOMING:if(o.getEdgeRing()!==t)continue;i=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(r.getEdgeRing()!==t)continue;i.setNextMin(r),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(c.isTrue(null!==e,"found null for first outgoing dirEdge"),c.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))}getOutgoingDegree(){if(0===arguments.length){let t=0;for(let e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){const t=arguments[0];let e=0;for(let i=this.iterator();i.hasNext();)i.next().getEdgeRing()===t&&e++;return e}}getLabel(){return this._label}findCoveredLineEdges(){let t=qt.NONE;for(let e=this.iterator();e.hasNext();){const i=e.next(),n=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){t=qt.INTERIOR;break}if(n.isInResult()){t=qt.EXTERIOR;break}}}if(t===qt.NONE)return null;let e=t;for(let t=this.iterator();t.hasNext();){const i=t.next(),n=i.getSym();i.isLineEdge()?i.getEdge().setCovered(e===qt.INTERIOR):(i.isInResult()&&(e=qt.EXTERIOR),n.isInResult()&&(e=qt.INTERIOR))}}computeLabelling(t){super.computeLabelling.call(this,t),this._label=new sn(qt.NONE);for(let t=this.iterator();t.hasNext();){const e=t.next().getEdge().getLabel();for(let t=0;t<2;t++){const i=e.getLocation(t);i!==qt.INTERIOR&&i!==qt.BOUNDARY||this._label.setLocation(t,qt.INTERIOR)}}}print(t){Q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(let e=this.iterator();e.hasNext();){const i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}}getResultAreaEdges(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new E;for(let t=this.iterator();t.hasNext();){const e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}};class vn extends ln{constructor(){super()}createNode(t){return new on(t,new wn)}}class bn{constructor(){bn.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._orientation=null;const t=arguments[0];this._pts=t,this._orientation=bn.orientation(t)}static orientation(t){return 1===W.increasingDirection(t)}static compareOriented(t,e,i,n){const s=e?1:-1,r=n?1:-1,o=e?t.length:-1,a=n?i.length:-1;let l=e?0:t.length-1,A=n?0:i.length-1;for(;;){const e=t[l].compareTo(i[A]);if(0!==e)return e;l+=s,A+=r;const n=l===o,c=A===a;if(n&&!c)return-1;if(!n&&c)return 1;if(n&&c)return 0}}compareTo(t){const e=t;return bn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}get interfaces_(){return[o]}}class Cn{constructor(){Cn.constructor_.apply(this,arguments)}static constructor_(){this._edges=new E,this._ocaMap=new li}print(t){t.print("MULTILINESTRING ( ");for(let e=0;e<this._edges.size();e++){const i=this._edges.get(e);e>0&&t.print(","),t.print("(");const n=i.getCoordinates();for(let e=0;e<n.length;e++)e>0&&t.print(","),t.print(n[e].x+" "+n[e].y);t.println(")")}t.print(")  ")}addAll(t){for(let e=t.iterator();e.hasNext();)this.add(e.next())}findEdgeIndex(t){for(let e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}iterator(){return this._edges.iterator()}getEdges(){return this._edges}get(t){return this._edges.get(t)}findEqualEdge(t){const e=new bn(t.getCoordinates());return this._ocaMap.get(e)}add(t){this._edges.add(t);const e=new bn(t.getCoordinates());this._ocaMap.put(e,t)}}class xn{constructor(){xn.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;const t=arguments[0];this._li=t}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(xn.isAdjacentSegments(e,n))return!0;if(t.isClosed()){const i=t.size()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}hasProperInteriorIntersection(){return this._hasProperInterior}getLineIntersector(){return this._li}hasProperIntersection(){return this._hasProper}processIntersections(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;const s=t.getCoordinates()[e],r=t.getCoordinates()[e+1],o=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this._li.computeIntersection(s,r,o,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}hasIntersection(){return this._hasIntersection}isDone(){return!1}hasInteriorIntersection(){return this._hasInterior}get interfaces_(){return[Vi]}}class Bn{constructor(){Bn.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new f(t),this.segmentIndex=e,this.dist=i}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}compareTo(t){const e=t;return this.compare(e.segmentIndex,e.dist)}isEndPoint(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}get interfaces_(){return[o]}}class En{constructor(){En.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new li,this.edge=null;const t=arguments[0];this.edge=t}print(t){t.println("Intersections:");for(let e=this.iterator();e.hasNext();)e.next().print(t)}addEndpoints(){const t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}createSplitEdge(t,e){let i=e.segmentIndex-t.segmentIndex+2;const n=this.edge.pts[e.segmentIndex],s=e.dist>0||!e.coord.equals2D(n);s||i--;const r=new Array(i).fill(null);let o=0;r[o++]=new f(t.coord);for(let i=t.segmentIndex+1;i<=e.segmentIndex;i++)r[o++]=this.edge.pts[i];return s&&(r[o]=e.coord),new Mn(r,new sn(this.edge._label))}add(t,e,i){const n=new Bn(t,e,i),s=this._nodeMap.get(n);return null!==s?s:(this._nodeMap.put(n,n),n)}isIntersection(t){for(let e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(t){this.addEndpoints();const e=this.iterator();let i=e.next();for(;e.hasNext();){const n=e.next(),s=this.createSplitEdge(i,n);t.add(s),i=n}}}class Sn{constructor(){Sn.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map((()=>Array(3)));for(let t=0;t<2;t++)for(let e=0;e<3;e++)this._depth[t][e]=Sn.NULL_VALUE}static depthAtLocation(t){return t===qt.EXTERIOR?0:t===qt.INTERIOR?1:Sn.NULL_VALUE}getDepth(t,e){return this._depth[t][e]}setDepth(t,e,i){this._depth[t][e]=i}isNull(){if(0===arguments.length){for(let t=0;t<2;t++)for(let e=0;e<3;e++)if(this._depth[t][e]!==Sn.NULL_VALUE)return!1;return!0}if(1===arguments.length){const t=arguments[0];return this._depth[t][1]===Sn.NULL_VALUE}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._depth[t][e]===Sn.NULL_VALUE}}normalize(){for(let t=0;t<2;t++)if(!this.isNull(t)){let e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(let i=1;i<3;i++){let n=0;this._depth[t][i]>e&&(n=1),this._depth[t][i]=n}}}getDelta(t){return this._depth[t][ji.RIGHT]-this._depth[t][ji.LEFT]}getLocation(t,e){return this._depth[t][e]<=0?qt.EXTERIOR:qt.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const t=arguments[0];for(let e=0;e<2;e++)for(let i=1;i<3;i++){const n=t.getLocation(e,i);n!==qt.EXTERIOR&&n!==qt.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=Sn.depthAtLocation(n):this._depth[e][i]+=Sn.depthAtLocation(n))}}else if(3===arguments.length){const t=arguments[0],e=arguments[1];arguments[2]===qt.INTERIOR&&this._depth[t][e]++}}}Sn.NULL_VALUE=-1;class Fn{constructor(){Fn.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0===arguments.length)Fn.constructor_.call(this,10);else if(1===arguments.length){const t=arguments[0];this._data=new Array(t).fill(null)}}size(){return this._size}addAll(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),Q.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}ensureCapacity(t){if(t<=this._data.length)return null;const e=Math.max(t,2*this._data.length);this._data=ct.copyOf(this._data,e)}toArray(){const t=new Array(this._size).fill(null);return Q.arraycopy(this._data,0,t,0,this._size),t}add(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}class In{static toIntArray(t){const e=new Array(t.size()).fill(null);for(let i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e}findChainEnd(t,e){const i=ki.quadrant(t[e],t[e+1]);let n=e+1;for(;n<t.length&&ki.quadrant(t[n-1],t[n])===i;)n++;return n-1}OLDgetChainStartIndices(t){let e=0;const i=new E;i.add(e);do{const n=this.findChainEnd(t,e);i.add(n),e=n}while(e<t.length-1);return In.toIntArray(i)}getChainStartIndices(t){let e=0;const i=new Fn(Math.trunc(t.length/2));i.add(e);do{const n=this.findChainEnd(t,e);i.add(n),e=n}while(e<t.length-1);return i.toArray()}}class Ln{constructor(){Ln.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const t=arguments[0];this.e=t,this.pts=t.getCoordinates();const e=new In;this.startIndex=e.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(t){const e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i}getMinX(t){const e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i}computeIntersectsForChain(){if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],n)}else if(6===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5];if(e-t==1&&s-n==1)return r.addIntersections(this.e,t,i.e,n),null;if(!this.overlaps(t,e,i,n,s))return null;const o=Math.trunc((t+e)/2),a=Math.trunc((n+s)/2);t<o&&(n<a&&this.computeIntersectsForChain(t,o,i,n,a,r),a<s&&this.computeIntersectsForChain(t,o,i,a,s,r)),o<e&&(n<a&&this.computeIntersectsForChain(o,e,i,n,a,r),a<s&&this.computeIntersectsForChain(o,e,i,a,s,r))}}overlaps(t,e,i,n,s){return L.intersects(this.pts[t],this.pts[e],i.pts[n],i.pts[s])}getStartIndexes(){return this.startIndex}computeIntersects(t,e){for(let i=0;i<this.startIndex.length-1;i++)for(let n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(i,t,n,e)}}let Mn=class t extends rn{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new En(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Sn,this._depthDelta=0,1===arguments.length){const e=arguments[0];t.constructor_.call(this,e,null)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.pts=t,this._label=e}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof Zt&&arguments[0]instanceof sn))return super.updateIM.apply(this,arguments);{const t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,ji.ON),t.getLocation(1,ji.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,ji.LEFT),t.getLocation(1,ji.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,ji.RIGHT),t.getLocation(1,ji.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new t(e,sn.toLineLabel(this._label))}setIsolated(t){this._isIsolated=t}setName(t){this._name=t}equals(e){if(!(e instanceof t))return!1;const i=e;if(this.pts.length!==i.pts.length)return!1;let n=!0,s=!0,r=this.pts.length;for(let t=0;t<this.pts.length;t++)if(this.pts[t].equals2D(i.pts[t])||(n=!1),this.pts[t].equals2D(i.pts[--r])||(s=!1),!n&&!s)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){const t=arguments[0];return this.pts[t]}}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}setDepthDelta(t){this._depthDelta=t}getEdgeIntersectionList(){return this.eiList}addIntersections(t,e,i){for(let n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}print(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}computeIM(e){t.updateIM(this._label,e)}isCollapsed(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(t){t.print("edge "+this._name+": ");for(let e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new Ln(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new L;for(let t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}addIntersection(t,e,i,n){const s=new f(t.getIntersection(n));let r=e,o=t.getEdgeDistance(i,n);const a=r+1;if(a<this.pts.length){const t=this.pts[a];s.equals2D(t)&&(r=a,o=0)}this.eiList.add(s,r,o)}toString(){const t=new nt;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(let e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}isPointwiseEqual(t){if(this.pts.length!==t.pts.length)return!1;for(let e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}};class Tn{constructor(){Tn.constructor_.apply(this,arguments)}static constructor_(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Cn;const t=arguments[0];this._bufParams=t}static convertSegStrings(t){const e=new Et,i=new E;for(;t.hasNext();){const n=t.next(),s=e.createLineString(n.getCoordinates());i.add(s)}return e.buildGeometry(i)}static depthDelta(t){const e=t.getLocation(0,ji.LEFT),i=t.getLocation(0,ji.RIGHT);return e===qt.INTERIOR&&i===qt.EXTERIOR?1:e===qt.EXTERIOR&&i===qt.INTERIOR?-1:0}createEmptyResultGeometry(){return this._geomFact.createPolygon()}getNoder(t){if(null!==this._workingNoder)return this._workingNoder;const e=new Oi,i=new Yt;return i.setPrecisionModel(t),e.setSegmentIntersector(new xn(i)),e}buffer(t,e){let i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();const n=new en(i,this._bufParams),s=new _n(t,e,n).getCurves();if(s.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(s,i),this._graph=new hn(new vn),this._graph.addEdges(this._edgeList.getEdges());const r=this.createSubgraphs(this._graph),o=new pn(this._geomFact);this.buildSubgraphs(r,o);const a=o.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}computeNodedEdges(t,e){const i=this.getNoder(e);i.computeNodes(t);for(let t=i.getNodedSubstrings().iterator();t.hasNext();){const e=t.next(),i=e.getCoordinates();if(2===i.length&&i[0].equals2D(i[1]))continue;const n=e.getData(),s=new Mn(e.getCoordinates(),new sn(n));this.insertUniqueEdge(s)}}setNoder(t){this._workingNoder=t}setWorkingPrecisionModel(t){this._workingPrecisionModel=t}insertUniqueEdge(t){const e=this._edgeList.findEqualEdge(t);if(null!==e){const i=e.getLabel();let n=t.getLabel();e.isPointwiseEqual(t)||(n=new sn(t.getLabel()),n.flip()),i.merge(n);const s=Tn.depthDelta(n),r=e.getDepthDelta()+s;e.setDepthDelta(r)}else this._edgeList.add(t),t.setDepthDelta(Tn.depthDelta(t.getLabel()))}buildSubgraphs(t,e){const i=new E;for(let n=t.iterator();n.hasNext();){const t=n.next(),s=t.getRightmostCoordinate(),r=new fn(i).getDepth(s);t.computeDepth(r),t.findResultEdges(),i.add(t),e.add(t.getDirectedEdges(),t.getNodes())}}createSubgraphs(t){const e=new E;for(let i=t.getNodes().iterator();i.hasNext();){const t=i.next();if(!t.isVisited()){const i=new qi;i.create(t),e.add(i)}}return ye.sort(e,ye.reverseOrder()),e}}class Rn{constructor(){Rn.constructor_.apply(this,arguments)}static constructor_(){if(this._argGeom=null,this._distance=null,this._bufParams=new Je,this._resultGeometry=null,this._saveException=null,1===arguments.length){const t=arguments[0];this._argGeom=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._argGeom=t,this._bufParams=e}}static bufferOp(){if(2===arguments.length){const t=arguments[1];return new Rn(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Y&&"number"==typeof arguments[1]){const t=arguments[1],e=arguments[2],i=new Rn(arguments[0]);return i.setQuadrantSegments(e),i.getResultGeometry(t)}if(arguments[2]instanceof Je&&arguments[0]instanceof Y&&"number"==typeof arguments[1]){const t=arguments[1];return new Rn(arguments[0],arguments[2]).getResultGeometry(t)}}else if(4===arguments.length){const t=arguments[1],e=arguments[2],i=arguments[3],n=new Rn(arguments[0]);return n.setQuadrantSegments(e),n.setEndCapStyle(i),n.getResultGeometry(t)}}static precisionScaleFactor(t,e,i){const n=t.getEnvelopeInternal(),s=H.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),r=i-Math.trunc(Math.log(s)/Math.log(10)+1);return Math.pow(10,r)}bufferFixedPrecision(t){const e=new pi(new Ki(new _t(1)),t.getScale()),i=new Tn(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)}bufferReducedPrecision(){if(0===arguments.length){for(let t=Rn.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof fi))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){const t=arguments[0],e=Rn.precisionScaleFactor(this._argGeom,this._distance,t),i=new _t(e);this.bufferFixedPrecision(i)}}bufferOriginalPrecision(){try{const t=new Tn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof l))throw t;this._saveException=t}}getResultGeometry(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}setEndCapStyle(t){this._bufParams.setEndCapStyle(t)}computeGeometry(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;const t=this._argGeom.getFactory().getPrecisionModel();t.getType()===_t.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}setQuadrantSegments(t){this._bufParams.setQuadrantSegments(t)}}Rn.CAP_ROUND=Je.CAP_ROUND,Rn.CAP_BUTT=Je.CAP_FLAT,Rn.CAP_FLAT=Je.CAP_FLAT,Rn.CAP_SQUARE=Je.CAP_SQUARE,Rn.MAX_PRECISION_DIGITS=12;class kn{constructor(){kn.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Xt,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof tt&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];kn.constructor_.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){const t=arguments[0],e=arguments[1];this._srcPts=t,this._isClosed=kn.isClosed(t),this._snapTolerance=e}}static isClosed(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])}snapVertices(t,e){const i=this._isClosed?t.size()-1:t.size();for(let n=0;n<i;n++){const i=t.get(n),s=this.findSnapForVertex(i,e);null!==s&&(t.set(n,new f(s)),0===n&&this._isClosed&&t.set(t.size()-1,new f(s)))}}findSnapForVertex(t,e){for(let i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this._snapTolerance)return e[i]}return null}snapTo(t){const e=new F(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()}snapSegments(t,e){if(0===e.length)return null;let i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(let n=0;n<i;n++){const i=e[n],s=this.findSegmentIndexToSnap(i,t);s>=0&&t.add(s+1,new f(i),!1)}}findSegmentIndexToSnap(t,e){let i=r.MAX_VALUE,n=-1;for(let s=0;s<e.size()-1;s++){if(this._seg.p0=e.get(s),this._seg.p1=e.get(s+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}const r=this._seg.distance(t);r<this._snapTolerance&&r<i&&(i=r,n=s)}return n}setAllowSnappingToSourceVertices(t){this._allowSnappingToSourceVertices=t}}class Un{constructor(){Un.constructor_.apply(this,arguments)}static constructor_(){this._srcGeom=null;const t=arguments[0];this._srcGeom=t}static computeSizeBasedSnapTolerance(t){const e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Un.SNAP_PRECISION_FACTOR}static computeOverlaySnapTolerance(){if(1===arguments.length){const t=arguments[0];let e=Un.computeSizeBasedSnapTolerance(t);const i=t.getPrecisionModel();if(i.getType()===_t.FIXED){const t=1/i.getScale()*2/1.415;t>e&&(e=t)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1];return Math.min(Un.computeOverlaySnapTolerance(t),Un.computeOverlaySnapTolerance(e))}}static snapToSelf(t,e,i){return new Un(t).snapToSelf(e,i)}static snap(t,e,i){const n=new Array(2).fill(null),s=new Un(t);n[0]=s.snapTo(e,i);const r=new Un(e);return n[1]=r.snapTo(n[0],i),n}computeSnapTolerance(t){return this.computeMinimumSegmentLength(t)/10}snapTo(t,e){const i=this.extractTargetCoordinates(t);return new Dn(e,i).transform(this._srcGeom)}snapToSelf(t,e){const i=this.extractTargetCoordinates(this._srcGeom),n=new Dn(t,i,!0).transform(this._srcGeom);let s=n;return e&&v(s,ut)&&(s=Rn.bufferOp(n,0)),s}extractTargetCoordinates(t){const e=new lt,i=t.getCoordinates();for(let t=0;t<i.length;t++)e.add(i[t]);return e.toArray(new Array(0).fill(null))}computeMinimumSegmentLength(t){let e=r.MAX_VALUE;for(let i=0;i<t.length-1;i++){const n=t[i].distance(t[i+1]);n<e&&(e=n)}return e}}Un.SNAP_PRECISION_FACTOR=1e-9;class Dn extends fe{constructor(){super(),Dn.constructor_.apply(this,arguments)}static constructor_(){if(this._snapTolerance=null,this._snapPts=null,this._isSelfSnap=!1,2===arguments.length){const t=arguments[0],e=arguments[1];this._snapTolerance=t,this._snapPts=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._snapTolerance=t,this._snapPts=e,this._isSelfSnap=i}}transformCoordinates(t,e){const i=t.toCoordinateArray(),n=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)}snapLine(t,e){const i=new kn(t,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(e)}}class On{constructor(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=new s,this._commonSignExp=null}getCommon(){return r.longBitsToDouble(this._commonBits)}add(t){const e=r.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=On.signExpBits(this._commonBits),this._isFirst=!1,null):On.signExpBits(e)!==this._commonSignExp?(this._commonBits.high=0,this._commonBits.low=0,null):(this._commonMantissaBitsCount=On.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=On.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))}toString(){if(1===arguments.length){const t=arguments[0],e=r.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+s.toBinaryString(t),n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}}getClass(){return On}get interfaces_(){return[]}static getBit(t,e){const i=1<<e%32;return e<32?t.low&i?1:0:t.high&i?1:0}static signExpBits(t){return t.high>>>20}static zeroLowerBits(t,e){let i="low";if(e>32&&(t.low=0,e%=32,i="high"),e>0){const n=e<32?~((1<<e)-1):0;t[i]&=n}return t}static numCommonMostSigMantissaBits(t,e){let i=0;for(let n=52;n>=0;n--){if(On.getBit(t,n)!==On.getBit(e,n))return i;i++}return 52}}class Pn{constructor(){Pn.constructor_.apply(this,arguments)}static constructor_(){this._commonCoord=null,this._ccFilter=new Nn}add(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()}removeCommonBits(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;const e=new f(this._commonCoord);e.x=-e.x,e.y=-e.y;const i=new Qn(e);return t.apply(i),t.geometryChanged(),t}addCommonBits(t){const e=new Qn(this._commonCoord);t.apply(e),t.geometryChanged()}getCommonCoordinate(){return this._commonCoord}}class Nn{constructor(){Nn.constructor_.apply(this,arguments)}static constructor_(){this._commonBitsX=new On,this._commonBitsY=new On}filter(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)}getCommonCoordinate(){return new f(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())}get interfaces_(){return[X]}}class Qn{constructor(){Qn.constructor_.apply(this,arguments)}static constructor_(){this.trans=null;const t=arguments[0];this.trans=t}filter(t,e){const i=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)}isGeometryChanged(){return!0}isDone(){return!1}get interfaces_(){return[I]}}Pn.CommonCoordinateFilter=Nn,Pn.Translater=Qn;class Hn{constructor(){Hn.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new E,this._resultLineList=new E;const t=arguments[0],e=arguments[1],i=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=i}collectLines(t){for(let e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){const i=e.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}}labelIsolatedLine(t,e){const i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,i)}build(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList}collectLineEdge(t,e,i){const n=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!os.isResultOfOp(n,e)||s.isCovered()||(i.add(s),t.setVisitedEdge(!0)))}findCoveredLineEdges(){for(let t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(let t=this._op.getGraph().getEdgeEnds().iterator();t.hasNext();){const e=t.next(),i=e.getEdge();if(e.isLineEdge()&&!i.isCoveredSet()){const t=this._op.isCoveredByA(e.getCoordinate());i.setCovered(t)}}}labelIsolatedLines(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),i=t.getLabel();t.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(t,0):this.labelIsolatedLine(t,1))}}buildLines(t){for(let t=this._lineEdgesList.iterator();t.hasNext();){const e=t.next(),i=this._geometryFactory.createLineString(e.getCoordinates());this._resultLineList.add(i),e.setInResult(!0)}}collectBoundaryTouchEdge(t,e,i){const n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(c.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(os.isResultOfOp(n,e)&&e===os.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))}}class Gn{constructor(){Gn.constructor_.apply(this,arguments)}static constructor_(){this._op=null,this._geometryFactory=null,this._resultPointList=new E;const t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}build(t){return this.extractNonCoveredResultNodes(t),this._resultPointList}extractNonCoveredResultNodes(t){for(let e=this._op.getGraph().getNodes().iterator();e.hasNext();){const i=e.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==os.INTERSECTION)){const e=i.getLabel();os.isResultOfOp(e,t)&&this.filterCoveredNodeToPoint(i)}}}filterCoveredNodeToPoint(t){const e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){const t=this._geometryFactory.createPoint(e);this._resultPointList.add(t)}}}class Vn{isInBoundary(t){}}class zn{isInBoundary(t){return t%2==1}get interfaces_(){return[Vn]}}class Kn{isInBoundary(t){return t>0}get interfaces_(){return[Vn]}}class jn{isInBoundary(t){return t>1}get interfaces_(){return[Vn]}}class Wn{isInBoundary(t){return 1===t}get interfaces_(){return[Vn]}}Vn.Mod2BoundaryNodeRule=zn,Vn.EndPointBoundaryNodeRule=Kn,Vn.MultiValentEndPointBoundaryNodeRule=jn,Vn.MonoValentEndPointBoundaryNodeRule=Wn,Vn.MOD2_BOUNDARY_RULE=new zn,Vn.ENDPOINT_BOUNDARY_RULE=new Kn,Vn.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new jn,Vn.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Wn,Vn.OGC_SFS_BOUNDARY_RULE=Vn.MOD2_BOUNDARY_RULE;class $n{constructor(){$n.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=Vn.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const t=arguments[0];if(null===t)throw new n("Rule must be non-null");this._boundaryRule=t}}locateInPolygonRing(t,e){return e.getEnvelopeInternal().intersects(t)?Ke.locateInRing(t,e.getCoordinates()):qt.EXTERIOR}intersects(t,e){return this.locate(t,e)!==qt.EXTERIOR}updateLocationInfo(t){t===qt.INTERIOR&&(this._isIn=!0),t===qt.BOUNDARY&&this._numBoundaries++}computeLocation(t,e){if(e instanceof bt&&this.updateLocationInfo(this.locateOnPoint(t,e)),e instanceof tt)this.updateLocationInfo(this.locateOnLineString(t,e));else if(e instanceof xt)this.updateLocationInfo(this.locateInPolygon(t,e));else if(e instanceof wt){const i=e;for(let e=0;e<i.getNumGeometries();e++){const n=i.getGeometryN(e);this.updateLocationInfo(this.locateOnLineString(t,n))}}else if(e instanceof dt){const i=e;for(let e=0;e<i.getNumGeometries();e++){const n=i.getGeometryN(e);this.updateLocationInfo(this.locateInPolygon(t,n))}}else if(e instanceof ht){const i=new We(e);for(;i.hasNext();){const n=i.next();n!==e&&this.computeLocation(t,n)}}}locateOnPoint(t,e){return e.getCoordinate().equals2D(t)?qt.INTERIOR:qt.EXTERIOR}locateOnLineString(t,e){if(!e.getEnvelopeInternal().intersects(t))return qt.EXTERIOR;const i=e.getCoordinateSequence();return e.isClosed()||!t.equals(i.getCoordinate(0))&&!t.equals(i.getCoordinate(i.size()-1))?Ke.isOnLine(t,i)?qt.INTERIOR:qt.EXTERIOR:qt.BOUNDARY}locateInPolygon(t,e){if(e.isEmpty())return qt.EXTERIOR;const i=e.getExteriorRing(),n=this.locateInPolygonRing(t,i);if(n===qt.EXTERIOR)return qt.EXTERIOR;if(n===qt.BOUNDARY)return qt.BOUNDARY;for(let i=0;i<e.getNumInteriorRing();i++){const n=e.getInteriorRingN(i),s=this.locateInPolygonRing(t,n);if(s===qt.INTERIOR)return qt.EXTERIOR;if(s===qt.BOUNDARY)return qt.BOUNDARY}return qt.INTERIOR}locate(t,e){return e.isEmpty()?qt.EXTERIOR:e instanceof tt?this.locateOnLineString(t,e):e instanceof xt?this.locateInPolygon(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?qt.BOUNDARY:this._numBoundaries>0||this._isIn?qt.INTERIOR:qt.EXTERIOR)}}class Yn{constructor(){Yn.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._data=null;const t=arguments[0],e=arguments[1];this._pts=t,this._data=e}getCoordinates(){return this._pts}size(){return this._pts.length}getCoordinate(t){return this._pts[t]}isClosed(){return this._pts[0].equals(this._pts[this._pts.length-1])}getSegmentOctant(t){return t===this._pts.length-1?-1:ci.octant(this.getCoordinate(t),this.getCoordinate(t+1))}setData(t){this._data=t}getData(){return this._data}toString(){return Wt.toLineString(new st(this._pts))}get interfaces_(){return[hi]}}class Xn{constructor(){Xn.constructor_.apply(this,arguments)}static constructor_(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._keepIntersections=!0,this._isInteriorIntersectionsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new E,this._intersectionCount=0;const t=arguments[0];this._li=t,this._interiorIntersection=null}static createAllIntersectionsFinder(t){const e=new Xn(t);return e.setFindAllIntersections(!0),e}static isInteriorVertexIntersection(){if(4===arguments.length){const t=arguments[1];return!(arguments[2]&&arguments[3]||!arguments[0].equals2D(t))}if(8===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5],o=arguments[6],a=arguments[7];return!!(Xn.isInteriorVertexIntersection(t,i,s,o)||Xn.isInteriorVertexIntersection(t,n,s,a)||Xn.isInteriorVertexIntersection(e,i,r,o)||Xn.isInteriorVertexIntersection(e,n,r,a))}}static createInteriorIntersectionCounter(t){const e=new Xn(t);return e.setInteriorIntersectionsOnly(!0),e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}static createIntersectionCounter(t){const e=new Xn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e}static isEndSegment(t,e){return 0===e||e>=t.size()-2}static createAnyIntersectionFinder(t){return new Xn(t)}static createInteriorIntersectionsFinder(t){const e=new Xn(t);return e.setFindAllIntersections(!0),e.setInteriorIntersectionsOnly(!0),e}count(){return this._intersectionCount}getIntersections(){return this._intersections}setFindAllIntersections(t){this._findAllIntersections=t}setKeepIntersections(t){this._keepIntersections=t}getIntersection(){return this._interiorIntersection}processIntersections(t,e,i,n){if(!this._findAllIntersections&&this.hasIntersection())return null;const s=t===i;if(s&&e===n)return null;if(this._isCheckEndSegmentsOnly&&!Xn.isEndSegment(t,e)&&!Xn.isEndSegment(i,n))return null;const r=t.getCoordinate(e),o=t.getCoordinate(e+1),a=i.getCoordinate(n),l=i.getCoordinate(n+1),A=0===e,c=e+2===t.size(),h=0===n,u=n+2===i.size();this._li.computeIntersection(r,o,a,l);const d=this._li.hasIntersection()&&this._li.isInteriorIntersection();let g=!1;this._isInteriorIntersectionsOnly||(g=!(s&&Math.abs(n-e)<=1)&&Xn.isInteriorVertexIntersection(r,o,a,l,A,c,h,u)),(d||g)&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=l,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)}hasIntersection(){return null!==this._interiorIntersection}isDone(){return!this._findAllIntersections&&null!==this._interiorIntersection}setInteriorIntersectionsOnly(t){this._isInteriorIntersectionsOnly=t}setCheckEndSegmentsOnly(t){this._isCheckEndSegmentsOnly=t}getIntersectionSegments(){return this._intSegments}get interfaces_(){return[Vi]}}class qn{constructor(){qn.constructor_.apply(this,arguments)}static constructor_(){this._li=new Yt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;const t=arguments[0];this._segStrings=t}static computeIntersections(t){const e=new qn(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()}isValid(){return this.execute(),this._isValid}setFindAllIntersections(t){this._findAllIntersections=t}checkInteriorIntersections(){this._isValid=!0,this._segInt=new Xn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);const t=new Oi;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null}checkValid(){if(this.execute(),!this._isValid)throw new fi(this.getErrorMessage(),this._segInt.getIntersection())}getErrorMessage(){if(this._isValid)return"no intersections found";const t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Wt.toLineString(t[0],t[1])+" and "+Wt.toLineString(t[2],t[3])}execute(){if(null!==this._segInt)return null;this.checkInteriorIntersections()}getIntersections(){return this._segInt.getIntersections()}}class Zn{constructor(){Zn.constructor_.apply(this,arguments)}static constructor_(){this._nv=null;const t=arguments[0];this._nv=new qn(Zn.toSegmentStrings(t))}static toSegmentStrings(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next();e.add(new Yn(t.getCoordinates(),t))}return e}static checkValid(t){new Zn(t).checkValid()}checkValid(){this._nv.checkValid()}}class Jn{}class ts{constructor(){ts.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const t=arguments[0],e=arguments[1],i=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=i}static isAdjacentSegments(t,e){return 1===Math.abs(t-e)}isTrivialIntersection(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(ts.isAdjacentSegments(e,n))return!0;if(t.isClosed()){const i=t.getNumPoints()-1;if(0===e&&n===i||0===n&&e===i)return!0}}return!1}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next().getCoordinate();if(t.isIntersection(e))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))}setBoundaryNodes(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e}addIntersections(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;const s=t.getCoordinates()[e],r=t.getCoordinates()[e+1],o=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this._li.computeIntersection(s,r,o,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(t){this._isDoneWhenProperInt=t}}class es{constructor(){es.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}computeIntersections(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)}}class is{constructor(){is.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._eventType=is.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._eventType=is.INSERT,this._label=t,this._xValue=e,this._obj=i}}getObject(){return this._obj}getDeleteEventIndex(){return this._deleteEventIndex}isDelete(){return this._eventType===is.DELETE}setDeleteEventIndex(t){this._deleteEventIndex=t}compareTo(t){const e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===is.INSERT}isSameLabel(t){return null!==this._label&&this._label===t._label}get interfaces_(){return[o]}}is.INSERT=1,is.DELETE=2;class ns extends Jn{constructor(){super(),ns.constructor_.apply(this,arguments)}static constructor_(){this.events=new E,this.nOverlaps=null}prepareEvents(){ye.sort(this.events);for(let t=0;t<this.events.size();t++){const e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}}computeIntersections(){if(1===arguments.length){const t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let e=0;e<this.events.size();e++){const i=this.events.get(e);if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ts&&v(arguments[0],x)&&v(arguments[1],x)){const t=arguments[0],e=arguments[1],i=arguments[2];this.addEdges(t,t),this.addEdges(e,e),this.computeIntersections(i)}else if("boolean"==typeof arguments[2]&&v(arguments[0],x)&&arguments[1]instanceof ts){const t=arguments[0],e=arguments[1];arguments[2]?this.addEdges(t,null):this.addEdges(t),this.computeIntersections(e)}}addEdge(t,e){const i=t.getMonotoneChainEdge(),n=i.getStartIndexes();for(let t=0;t<n.length-1;t++){const n=new es(i,t),s=new is(e,i.getMinX(t),n);this.events.add(s),this.events.add(new is(i.getMaxX(t),s))}}processOverlaps(t,e,i,n){const s=i.getObject();for(let r=t;r<e;r++){const t=this.events.get(r);if(t.isInsert()){const e=t.getObject();i.isSameLabel(t)||(s.computeIntersections(e,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length)for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.addEdge(e,e)}else if(2===arguments.length){const t=arguments[1];for(let e=arguments[0].iterator();e.hasNext();){const i=e.next();this.addEdge(i,t)}}}}class ss extends hn{constructor(){super(),ss.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new mt,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new $n,2===arguments.length){const t=arguments[0],e=arguments[1];ss.constructor_.call(this,t,e,Vn.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=i,null!==e&&this.add(e)}}static determineBoundary(t,e){return t.isInBoundary(e)?qt.BOUNDARY:qt.INTERIOR}insertBoundaryPoint(t,e){const i=this._nodes.addNode(e).getLabel();let n=1,s=qt.NONE;s=i.getLocation(t,ji.ON),s===qt.BOUNDARY&&n++;const r=ss.determineBoundary(this._boundaryNodeRule,n);i.setLocation(t,r)}computeSelfNodes(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){const t=arguments[1],e=arguments[2],i=new ts(arguments[0],!0,!1);i.setIsDoneIfProperInt(e);const n=this.createEdgeSetIntersector(),s=this._parentGeom instanceof et||this._parentGeom instanceof xt||this._parentGeom instanceof dt,r=t||!s;return n.computeIntersections(this._edges,i,r),this.addSelfIntersectionNodes(this._argIndex),i}}addPolygon(t){this.addPolygonRing(t.getExteriorRing(),qt.EXTERIOR,qt.INTERIOR);for(let e=0;e<t.getNumInteriorRing();e++){const i=t.getInteriorRingN(e);this.addPolygonRing(i,qt.INTERIOR,qt.EXTERIOR)}}addEdge(t){this.insertEdge(t);const e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],qt.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],qt.BOUNDARY)}addLineString(t){const e=W.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;const i=new Mn(e,new sn(this._argIndex,qt.INTERIOR));this._lineEdgeMap.put(t,i),this.insertEdge(i),c.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null);let i=0;for(let n=t.iterator();n.hasNext();){const t=n.next();e[i++]=t.getCoordinate().copy()}return e}addSelfIntersectionNodes(t){for(let e=this._edges.iterator();e.hasNext();){const i=e.next(),n=i.getLabel().getLocation(t);for(let e=i.eiList.iterator();e.hasNext();){const i=e.next();this.addSelfIntersectionNode(t,i.coord,n)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof Y))return super.add.apply(this,arguments);{const t=arguments[0];if(t.isEmpty())return null;if(t instanceof dt&&(this._useBoundaryDeterminationRule=!1),t instanceof xt)this.addPolygon(t);else if(t instanceof tt)this.addLineString(t);else if(t instanceof bt)this.addPoint(t);else if(t instanceof Bt)this.addCollection(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof dt)this.addCollection(t);else{if(!(t instanceof ht))throw new K(t.getGeometryType());this.addCollection(t)}}}addCollection(t){for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);this.add(i)}}locate(t){return v(this._parentGeom,ut)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ge(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof tt){const t=arguments[0];return this._lineEdgeMap.get(t)}return super.findEdge.apply(this,arguments)}computeSplitEdges(t){for(let e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)}computeEdgeIntersections(t,e,i){const n=new ts(e,i,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof bt){const t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,qt.INTERIOR)}else if(arguments[0]instanceof f){const t=arguments[0];this.insertPoint(this._argIndex,t,qt.INTERIOR)}}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(t,e,i){if(this.isBoundaryNode(t,e))return null;i===qt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)}addPolygonRing(t,e,i){if(t.isEmpty())return null;const n=W.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;let s=e,r=i;P.isCCW(n)&&(s=i,r=e);const o=new Mn(n,new sn(this._argIndex,qt.BOUNDARY,s,r));this._lineEdgeMap.put(t,o),this.insertEdge(o),this.insertPoint(this._argIndex,n[0],qt.BOUNDARY)}insertPoint(t,e,i){const n=this._nodes.addNode(e),s=n.getLabel();null===s?n._label=new sn(t,i):s.setLocation(t,i)}createEdgeSetIntersector(){return new ns}}class rs{constructor(){rs.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new Yt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new ss(0,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];rs.constructor_.call(this,t,e,Vn.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];t.getPrecisionModel().compareTo(e.getPrecisionModel())>=0?this.setComputationPrecision(t.getPrecisionModel()):this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new ss(0,t,i),this._arg[1]=new ss(1,e,i)}}setComputationPrecision(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)}getArgGeometry(t){return this._arg[t].getGeometry()}}class os extends rs{constructor(){super(),os.constructor_.apply(this,arguments)}static constructor_(){this._ptLocator=new $n,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Cn,this._resultPolyList=new E,this._resultLineList=new E,this._resultPointList=new E;const t=arguments[0],e=arguments[1];rs.constructor_.call(this,t,e),this._graph=new hn(new vn),this._geomFact=t.getFactory()}static overlayOp(t,e,i){return new os(t,e).getResultGeometry(i)}static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return os.createEmptyResult(os.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new n("This method does not support GeometryCollection arguments");return ls.overlayOp(t,e,os.UNION)}static intersection(t,e){if(t.isEmpty()||e.isEmpty())return os.createEmptyResult(os.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){const i=e;return Ae.map(t,new class{get interfaces_(){return[MapOp]}map(t){return os.intersection(t,i)}})}return ls.overlayOp(t,e,os.INTERSECTION)}static symDifference(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return os.createEmptyResult(os.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}if(t.isGeometryCollection()||e.isGeometryCollection())throw new n("This method does not support GeometryCollection arguments");return ls.overlayOp(t,e,os.SYMDIFFERENCE)}static resultDimension(t,e,i){const n=e.getDimension(),s=i.getDimension();let r=-1;switch(t){case os.INTERSECTION:r=Math.min(n,s);break;case os.UNION:r=Math.max(n,s);break;case os.DIFFERENCE:r=n;break;case os.SYMDIFFERENCE:r=Math.max(n,s)}return r}static createEmptyResult(t,e,i,n){const s=os.resultDimension(t,e,i);return n.createEmpty(s)}static difference(t,e){if(t.isEmpty())return os.createEmptyResult(os.DIFFERENCE,t,e,t.getFactory());if(e.isEmpty())return t.copy();if(t.isGeometryCollection()||e.isGeometryCollection())throw new n("This method does not support GeometryCollection arguments");return ls.overlayOp(t,e,os.DIFFERENCE)}static isResultOfOp(){if(2===arguments.length){const t=arguments[0],e=arguments[1],i=t.getLocation(0),n=t.getLocation(1);return os.isResultOfOp(i,n,e)}if(3===arguments.length){let t=arguments[0],e=arguments[1],i=arguments[2];switch(t===qt.BOUNDARY&&(t=qt.INTERIOR),e===qt.BOUNDARY&&(e=qt.INTERIOR),i){case os.INTERSECTION:return t===qt.INTERIOR&&e===qt.INTERIOR;case os.UNION:return t===qt.INTERIOR||e===qt.INTERIOR;case os.DIFFERENCE:return t===qt.INTERIOR&&e!==qt.INTERIOR;case os.SYMDIFFERENCE:return t===qt.INTERIOR&&e!==qt.INTERIOR||t!==qt.INTERIOR&&e===qt.INTERIOR}return!1}}insertUniqueEdge(t){const e=this._edgeList.findEqualEdge(t);if(null!==e){const i=e.getLabel();let n=t.getLabel();e.isPointwiseEqual(t)||(n=new sn(t.getLabel()),n.flip());const s=e.getDepth();s.isNull()&&s.add(i),s.add(n),i.merge(n)}else this._edgeList.add(t)}getGraph(){return this._graph}cancelDuplicateResultEdges(){for(let t=this._graph.getEdgeEnds().iterator();t.hasNext();){const e=t.next(),i=e.getSym();e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}}mergeSymLabels(){for(let t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()}computeOverlay(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);const e=new E;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Zn.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();const i=new pn(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();const n=new Hn(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);const s=new Gn(this,this._geomFact,this._ptLocator);this._resultPointList=s.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)}findResultAreaEdges(t){for(let e=this._graph.getEdgeEnds().iterator();e.hasNext();){const i=e.next(),n=i.getLabel();n.isArea()&&!i.isInteriorAreaEdge()&&os.isResultOfOp(n.getLocation(0,ji.RIGHT),n.getLocation(1,ji.RIGHT),t)&&i.setInResult(!0)}}computeLabelsFromDepths(){for(let t=this._edgeList.iterator();t.hasNext();){const e=t.next(),i=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(let t=0;t<2;t++)i.isNull(t)||!i.isArea()||n.isNull(t)||(0===n.getDelta(t)?i.toLine(t):(c.isTrue(!n.isNull(t,ji.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(t,ji.LEFT,n.getLocation(t,ji.LEFT)),c.isTrue(!n.isNull(t,ji.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(t,ji.RIGHT,n.getLocation(t,ji.RIGHT))))}}}isCoveredByA(t){return!!this.isCovered(t,this._resultPolyList)}isCoveredByLA(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)}computeGeometry(t,e,i,n){const s=new E;return s.addAll(t),s.addAll(e),s.addAll(i),s.isEmpty()?os.createEmptyResult(n,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(s)}isCovered(t,e){for(let i=e.iterator();i.hasNext();){const e=i.next();if(this._ptLocator.locate(t,e)!==qt.EXTERIOR)return!0}return!1}replaceCollapsedEdges(){const t=new E;for(let e=this._edgeList.iterator();e.hasNext();){const i=e.next();i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this._edgeList.addAll(t)}updateNodeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next(),i=e.getEdges().getLabel();e.getLabel().merge(i)}}getResultGeometry(t){return this.computeOverlay(t),this._resultGeom}insertUniqueEdges(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this.insertUniqueEdge(t)}}labelIncompleteNode(t,e){const i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,i)}copyPoints(t){for(let e=this._arg[t].getNodeIterator();e.hasNext();){const i=e.next();this._graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}}computeLabelling(){for(let t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()}labelIncompleteNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next(),i=e.getLabel();e.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}}}os.INTERSECTION=1,os.UNION=2,os.DIFFERENCE=3,os.SYMDIFFERENCE=4;class as{constructor(){as.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null;const t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}static overlayOp(t,e,i){return new as(t,e).getResultGeometry(i)}static union(t,e){return as.overlayOp(t,e,os.UNION)}static intersection(t,e){return as.overlayOp(t,e,os.INTERSECTION)}static symDifference(t,e){return as.overlayOp(t,e,os.SYMDIFFERENCE)}static difference(t,e){return as.overlayOp(t,e,os.DIFFERENCE)}selfSnap(t){return new Un(t).snapTo(t,this._snapTolerance)}removeCommonBits(t){this._cbr=new Pn,this._cbr.add(t[0]),this._cbr.add(t[1]);const e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e}prepareResult(t){return this._cbr.addCommonBits(t),t}getResultGeometry(t){const e=this.snap(this._geom),i=os.overlayOp(e[0],e[1],t);return this.prepareResult(i)}checkValid(t){t.isValid()||Q.out.println("Snapped geometry is invalid")}computeSnapTolerance(){this._snapTolerance=Un.computeOverlaySnapTolerance(this._geom[0],this._geom[1])}snap(t){const e=this.removeCommonBits(t);return Un.snap(e[0],e[1],this._snapTolerance)}}class ls{constructor(){ls.constructor_.apply(this,arguments)}static constructor_(){this._geom=new Array(2).fill(null);const t=arguments[0],e=arguments[1];this._geom[0]=t,this._geom[1]=e}static overlayOp(t,e,i){return new ls(t,e).getResultGeometry(i)}static union(t,e){return ls.overlayOp(t,e,os.UNION)}static intersection(t,e){return ls.overlayOp(t,e,os.INTERSECTION)}static symDifference(t,e){return ls.overlayOp(t,e,os.SYMDIFFERENCE)}static difference(t,e){return ls.overlayOp(t,e,os.DIFFERENCE)}getResultGeometry(t){let e=null,i=!1,n=null;try{e=os.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(t){if(!(t instanceof l))throw t;n=t}if(!i)try{e=as.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof l?n:t}return e}}class As{static union(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return os.createEmptyResult(os.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return Y.checkNotGeometryCollection(t),Y.checkNotGeometryCollection(e),ls.overlayOp(t,e,os.UNION)}}class cs{static diagonalSize(t){if(t.isNull())return 0;const e=t.getWidth(),i=t.getHeight();return Math.sqrt(e*e+i*i)}measure(t,e){const i=Le.distance(t,e,cs.DENSIFY_FRACTION),n=new L(t.getEnvelopeInternal());return n.expandToInclude(e.getEnvelopeInternal()),1-i/cs.diagonalSize(n)}get interfaces_(){return[Ze]}}cs.DENSIFY_FRACTION=.25;var hs=Object.freeze({__proto__:null,AreaSimilarityMeasure:class{measure(t,e){return os.intersection(t,e).getArea()/As.union(t,e).getArea()}get interfaces_(){return[Ze]}},HausdorffSimilarityMeasure:cs,SimilarityMeasure:Ze,SimilarityMeasureCombiner:class{static combine(t,e){return Math.min(t,e)}}});class us{constructor(){us.constructor_.apply(this,arguments)}static constructor_(){this._areaBasePt=null,this._triangleCent3=new f,this._areasum2=0,this._cg3=new f,this._lineCentSum=new f,this._totalLength=0,this._ptCount=0,this._ptCentSum=new f;const t=arguments[0];this._areaBasePt=null,this.add(t)}static centroid3(t,e,i,n){return n.x=t.x+e.x+i.x,n.y=t.y+e.y+i.y,null}static getCentroid(t){return new us(t).getCentroid()}static area2(t,e,i){return(e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y)}setAreaBasePoint(t){this._areaBasePt=t}addPoint(t){this._ptCount+=1,this._ptCentSum.x+=t.x,this._ptCentSum.y+=t.y}addLineSegments(t){let e=0;for(let i=0;i<t.length-1;i++){const n=t[i].distance(t[i+1]);if(0===n)continue;e+=n;const s=(t[i].x+t[i+1].x)/2;this._lineCentSum.x+=n*s;const r=(t[i].y+t[i+1].y)/2;this._lineCentSum.y+=n*r}this._totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])}addHole(t){const e=P.isCCW(t);for(let i=0;i<t.length-1;i++)this.addTriangle(this._areaBasePt,t[i],t[i+1],e);this.addLineSegments(t)}getCentroid(){const t=new f;if(Math.abs(this._areasum2)>0)t.x=this._cg3.x/3/this._areasum2,t.y=this._cg3.y/3/this._areasum2;else if(this._totalLength>0)t.x=this._lineCentSum.x/this._totalLength,t.y=this._lineCentSum.y/this._totalLength;else{if(!(this._ptCount>0))return null;t.x=this._ptCentSum.x/this._ptCount,t.y=this._ptCentSum.y/this._ptCount}return t}add(){if(arguments[0]instanceof xt){const t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(let e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof Y){const t=arguments[0];if(t.isEmpty())return null;if(t instanceof bt)this.addPoint(t.getCoordinate());else if(t instanceof tt)this.addLineSegments(t.getCoordinates());else if(t instanceof xt){const e=t;this.add(e)}else if(t instanceof ht){const e=t;for(let t=0;t<e.getNumGeometries();t++)this.add(e.getGeometryN(t))}}}addShell(t){t.length>0&&this.setAreaBasePoint(t[0]);const e=!P.isCCW(t);for(let i=0;i<t.length-1;i++)this.addTriangle(this._areaBasePt,t[i],t[i+1],e);this.addLineSegments(t)}addTriangle(t,e,i,n){const s=n?1:-1;us.centroid3(t,e,i,this._triangleCent3);const r=us.area2(t,e,i);this._cg3.x+=s*r*this._triangleCent3.x,this._cg3.y+=s*r*this._triangleCent3.y,this._areasum2+=s*r}}class ds{constructor(){ds.constructor_.apply(this,arguments)}static constructor_(){this._coordSet=new pt,this._list=new E}static filterCoordinates(t){const e=new ds;for(let i=0;i<t.length;i++)e.filter(t[i]);return e.getCoordinates()}filter(t){this._coordSet.add(t)&&this._list.add(t)}getCoordinates(){const t=new Array(this._list.size()).fill(null);return this._list.toArray(t)}get interfaces_(){return[X]}}class gs{constructor(){gs.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFactory=null,this._inputPts=null,1===arguments.length){const t=arguments[0];gs.constructor_.call(this,gs.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._inputPts=ds.filterCoordinates(t),this._geomFactory=e}}static extractCoordinates(t){const e=new ds;return t.apply(e),e.getCoordinates()}lineOrPolygon(t){if(3===(t=this.cleanRing(t)).length)return this._geomFactory.createLineString([t[0],t[1]]);const e=this._geomFactory.createLinearRing(t);return this._geomFactory.createPolygon(e)}cleanRing(t){c.equals(t[0],t[t.length-1]);const e=new E;let i=null;for(let n=0;n<=t.length-2;n++){const s=t[n],r=t[n+1];s.equals(r)||null!==i&&this.isBetween(i,s,r)||(e.add(s),i=s)}e.add(t[t.length-1]);const n=new Array(e.size()).fill(null);return e.toArray(n)}isBetween(t,e,i){if(0!==P.index(t,e,i))return!1;if(t.x!==i.x){if(t.x<=e.x&&e.x<=i.x)return!0;if(i.x<=e.x&&e.x<=t.x)return!0}if(t.y!==i.y){if(t.y<=e.y&&e.y<=i.y)return!0;if(i.y<=e.y&&e.y<=t.y)return!0}return!1}reduce(t){const e=this.computeOctRing(t);if(null===e)return t;const i=new lt;for(let t=0;t<e.length;t++)i.add(e[t]);for(let n=0;n<t.length;n++)Ke.isInRing(t[n],e)||i.add(t[n]);const n=W.toCoordinateArray(i);return n.length<3?this.padArray3(n):n}getConvexHull(){if(0===this._inputPts.length)return this._geomFactory.createGeometryCollection();if(1===this._inputPts.length)return this._geomFactory.createPoint(this._inputPts[0]);if(2===this._inputPts.length)return this._geomFactory.createLineString(this._inputPts);let t=this._inputPts;this._inputPts.length>50&&(t=this.reduce(this._inputPts));const e=this.preSort(t),i=this.grahamScan(e),n=this.toCoordinateArray(i);return this.lineOrPolygon(n)}padArray3(t){const e=new Array(3).fill(null);for(let i=0;i<e.length;i++)i<t.length?e[i]=t[i]:e[i]=t[0];return e}computeOctPts(t){const e=new Array(8).fill(null);for(let i=0;i<e.length;i++)e[i]=t[0];for(let i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e}toCoordinateArray(t){const e=new Array(t.size()).fill(null);for(let i=0;i<t.size();i++){const n=t.get(i);e[i]=n}return e}grahamScan(t){let e=null;const i=new $i;i.push(t[0]),i.push(t[1]),i.push(t[2]);for(let n=3;n<t.length;n++){for(e=i.pop();!i.empty()&&P.index(i.peek(),e,t[n])>0;)e=i.pop();i.push(e),i.push(t[n])}return i.push(t[0]),i}preSort(t){let e=null;for(let i=1;i<t.length;i++)(t[i].y<t[0].y||t[i].y===t[0].y&&t[i].x<t[0].x)&&(e=t[0],t[0]=t[i],t[i]=e);return ct.sort(t,1,t.length,new ps(t[0])),t}computeOctRing(t){const e=this.computeOctPts(t),i=new F;return i.add(e,!1),i.size()<3?null:(i.closeRing(),i.toCoordinateArray())}}class ps{constructor(){ps.constructor_.apply(this,arguments)}static constructor_(){this._origin=null;const t=arguments[0];this._origin=t}static polarCompare(t,e,i){const n=e.x-t.x,s=e.y-t.y,r=i.x-t.x,o=i.y-t.y,a=P.index(t,e,i);if(a===P.COUNTERCLOCKWISE)return 1;if(a===P.CLOCKWISE)return-1;const l=n*n+s*s,A=r*r+o*o;return l<A?-1:l>A?1:0}compare(t,e){const i=t,n=e;return ps.polarCompare(this._origin,i,n)}get interfaces_(){return[u]}}gs.RadialComparator=ps;class fs{constructor(){fs.constructor_.apply(this,arguments)}static constructor_(){this._interiorPoint=null,this._maxWidth=-1;const t=arguments[0];this.process(t)}static avg(t,e){return(t+e)/2}static getInteriorPoint(t){return new fs(t).getInteriorPoint()}process(t){if(t.isEmpty())return null;if(t instanceof xt)this.processPolygon(t);else if(t instanceof ht){const e=t;for(let t=0;t<e.getNumGeometries();t++)this.process(e.getGeometryN(t))}}getInteriorPoint(){return this._interiorPoint}processPolygon(t){const e=new ms(t);e.process();const i=e.getWidth();i>this._maxWidth&&(this._maxWidth=i,this._interiorPoint=e.getInteriorPoint())}}class ms{constructor(){ms.constructor_.apply(this,arguments)}static constructor_(){this._polygon=null,this._interiorPointY=null,this._interiorSectionWidth=0,this._interiorPoint=null;const t=arguments[0];this._polygon=t,this._interiorPointY=ys.getScanLineY(t)}static isEdgeCrossingCounted(t,e,i){const n=t.getY(),s=e.getY();return!(n===s||n===i&&s<i||s===i&&n<i)}static intersectsHorizontalLine(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return!(e<t.getMinY()||e>t.getMaxY())}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return!(t.getY()>i&&e.getY()>i||t.getY()<i&&e.getY()<i)}}static intersection(t,e,i){const n=t.getX(),s=e.getX();if(n===s)return n;const r=s-n,o=(e.getY()-t.getY())/r;return n+(i-t.getY())/o}findBestMidpoint(t){if(0===t.size())return null;c.isTrue(0==t.size()%2,"Interior Point robustness failure: odd number of scanline crossings"),t.sort(new _s);for(let e=0;e<t.size();e+=2){const i=t.get(e),n=t.get(e+1),s=n-i;if(s>this._interiorSectionWidth){this._interiorSectionWidth=s;const t=fs.avg(i,n);this._interiorPoint=new f(t,this._interiorPointY)}}}getWidth(){return this._interiorSectionWidth}getInteriorPoint(){return this._interiorPoint}addEdgeCrossing(t,e,i,n){if(!ms.intersectsHorizontalLine(t,e,i))return null;if(!ms.isEdgeCrossingCounted(t,e,i))return null;const s=ms.intersection(t,e,i);n.add(s)}process(){if(this._polygon.isEmpty())return null;this._interiorPoint=new f(this._polygon.getCoordinate());const t=new E;this.scanRing(this._polygon.getExteriorRing(),t);for(let e=0;e<this._polygon.getNumInteriorRing();e++)this.scanRing(this._polygon.getInteriorRingN(e),t);this.findBestMidpoint(t)}scanRing(t,e){if(!ms.intersectsHorizontalLine(t.getEnvelopeInternal(),this._interiorPointY))return null;const i=t.getCoordinateSequence();for(let t=1;t<i.size();t++){const n=i.getCoordinate(t-1),s=i.getCoordinate(t);this.addEdgeCrossing(n,s,this._interiorPointY,e)}}}class _s{compare(t,e){return t<e?-1:t>e?1:0}get interfaces_(){return[u]}}ms.DoubleComparator=_s;class ys{constructor(){ys.constructor_.apply(this,arguments)}static constructor_(){this._poly=null,this._centreY=null,this._hiY=r.MAX_VALUE,this._loY=-r.MAX_VALUE;const t=arguments[0];this._poly=t,this._hiY=t.getEnvelopeInternal().getMaxY(),this._loY=t.getEnvelopeInternal().getMinY(),this._centreY=fs.avg(this._loY,this._hiY)}static getScanLineY(t){return new ys(t).getScanLineY()}process(t){const e=t.getCoordinateSequence();for(let t=0;t<e.size();t++){const i=e.getY(t);this.updateInterval(i)}}getScanLineY(){this.process(this._poly.getExteriorRing());for(let t=0;t<this._poly.getNumInteriorRing();t++)this.process(this._poly.getInteriorRingN(t));return fs.avg(this._hiY,this._loY)}updateInterval(t){t<=this._centreY?t>this._loY&&(this._loY=t):t>this._centreY&&t<this._hiY&&(this._hiY=t)}}fs.InteriorPointPolygon=ms,fs.ScanLineYOrdinateFinder=ys;class ws{constructor(){ws.constructor_.apply(this,arguments)}static constructor_(){this._centroid=null,this._minDistance=r.MAX_VALUE,this._interiorPoint=null;const t=arguments[0];t.isEmpty()?this._centroid=null:(this._centroid=us.getCentroid(t),t.getPrecisionModel().makePrecise(this._centroid)),this.addInterior(t),null===this._interiorPoint&&this.addEndpoints(t)}static getInteriorPoint(t){return new ws(t).getInteriorPoint()}add(t){const e=t.distance(this._centroid);e<this._minDistance&&(this._interiorPoint=new f(t),this._minDistance=e)}getInteriorPoint(){return this._interiorPoint}addEndpoints(){if(arguments[0]instanceof Y){const t=arguments[0];if(t instanceof tt)this.addEndpoints(t.getCoordinates());else if(t instanceof ht){const e=t;for(let t=0;t<e.getNumGeometries();t++)this.addEndpoints(e.getGeometryN(t))}}else if(arguments[0]instanceof Array){const t=arguments[0];this.add(t[0]),this.add(t[t.length-1])}}addInterior(){if(arguments[0]instanceof Y){const t=arguments[0];if(t instanceof tt)this.addInterior(t.getCoordinates());else if(t instanceof ht){const e=t;for(let t=0;t<e.getNumGeometries();t++)this.addInterior(e.getGeometryN(t))}}else if(arguments[0]instanceof Array){const t=arguments[0];for(let e=1;e<t.length-1;e++)this.add(t[e])}}}class vs{constructor(){vs.constructor_.apply(this,arguments)}static constructor_(){this._centroid=null,this._minDistance=r.MAX_VALUE,this._interiorPoint=null;const t=arguments[0];this._centroid=us.getCentroid(t),this.add(t)}static getInteriorPoint(t){return new vs(t).getInteriorPoint()}add(){if(arguments[0]instanceof Y){const t=arguments[0];if(t instanceof bt)this.add(t.getCoordinate());else if(t instanceof ht){const e=t;for(let t=0;t<e.getNumGeometries();t++)this.add(e.getGeometryN(t))}}else if(arguments[0]instanceof f){const t=arguments[0],e=t.distance(this._centroid);e<this._minDistance&&(this._interiorPoint=new f(t),this._minDistance=e)}}getInteriorPoint(){return this._interiorPoint}}class bs{constructor(){bs.constructor_.apply(this,arguments)}static constructor_(){this._input=null,this._extremalPts=null,this._centre=null,this._radius=0;const t=arguments[0];this._input=t}static pointWithMinAngleWithSegment(t,e,i){let n=r.MAX_VALUE,s=null;for(let r=0;r<t.length;r++){const o=t[r];if(o===e)continue;if(o===i)continue;const a=Jt.angleBetween(e,o,i);a<n&&(n=a,s=o)}return s}static pointWitMinAngleWithX(t,e){let i=r.MAX_VALUE,n=null;for(let s=0;s<t.length;s++){const r=t[s];if(r===e)continue;const o=r.x-e.x;let a=r.y-e.y;a<0&&(a=-a);const l=a/Math.sqrt(o*o+a*a);l<i&&(i=l,n=r)}return n}static lowestPoint(t){let e=t[0];for(let i=1;i<t.length;i++)t[i].y<e.y&&(e=t[i]);return e}static farthestPoints(t){const e=t[0].distance(t[1]),i=t[1].distance(t[2]),n=t[2].distance(t[0]);return e>=i&&e>=n?[t[0],t[1]]:i>=e&&i>=n?[t[1],t[2]]:[t[2],t[0]]}getRadius(){return this.compute(),this._radius}getDiameter(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre)}const t=this._extremalPts[0],e=this._extremalPts[1];return this._input.getFactory().createLineString([t,e])}getExtremalPoints(){return this.compute(),this._extremalPts}computeCirclePoints(){if(this._input.isEmpty())return this._extremalPts=new Array(0).fill(null),null;if(1===this._input.getNumPoints()){const t=this._input.getCoordinates();return this._extremalPts=[new f(t[0])],null}const t=this._input.convexHull().getCoordinates();let e=t;if(t[0].equals2D(t[t.length-1])&&(e=new Array(t.length-1).fill(null),W.copyDeep(t,0,e,0,t.length-1)),e.length<=2)return this._extremalPts=W.copyDeep(e),null;let i=bs.lowestPoint(e),n=bs.pointWitMinAngleWithX(e,i);for(let t=0;t<e.length;t++){const t=bs.pointWithMinAngleWithSegment(e,i,n);if(Jt.isObtuse(i,t,n))return this._extremalPts=[new f(i),new f(n)],null;if(Jt.isObtuse(t,i,n))i=t;else{if(!Jt.isObtuse(t,n,i))return this._extremalPts=[new f(i),new f(n),new f(t)],null;n=t}}c.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")}compute(){if(null!==this._extremalPts)return null;this.computeCirclePoints(),this.computeCentre(),null!==this._centre&&(this._radius=this._centre.distance(this._extremalPts[0]))}getCircle(){if(this.compute(),null===this._centre)return this._input.getFactory().createPolygon();const t=this._input.getFactory().createPoint(this._centre);return 0===this._radius?t:Rn.bufferOp(t,this._radius)}getCentre(){return this.compute(),this._centre}getMaximumDiameter(){switch(this.compute(),this._extremalPts.length){case 0:return this._input.getFactory().createLineString();case 1:return this._input.getFactory().createPoint(this._centre);case 2:return this._input.getFactory().createLineString([this._extremalPts[0],this._extremalPts[1]]);default:const t=bs.farthestPoints(this._extremalPts);return this._input.getFactory().createLineString(t)}}computeCentre(){switch(this._extremalPts.length){case 0:this._centre=null;break;case 1:this._centre=this._extremalPts[0];break;case 2:this._centre=new f((this._extremalPts[0].x+this._extremalPts[1].x)/2,(this._extremalPts[0].y+this._extremalPts[1].y)/2);break;case 3:this._centre=ie.circumcentre(this._extremalPts[0],this._extremalPts[1],this._extremalPts[2])}}}class Cs{constructor(){Cs.constructor_.apply(this,arguments)}static constructor_(){if(this._inputGeom=null,this._isConvex=null,this._convexHullPts=null,this._minBaseSeg=new Xt,this._minWidthPt=null,this._minPtIndex=null,this._minWidth=0,1===arguments.length){const t=arguments[0];Cs.constructor_.call(this,t,!1)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._inputGeom=t,this._isConvex=e}}static nextIndex(t,e){return++e>=t.length&&(e=0),e}static computeC(t,e,i){return t*i.y-e*i.x}static getMinimumDiameter(t){return new Cs(t).getDiameter()}static getMinimumRectangle(t){return new Cs(t).getMinimumRectangle()}static computeSegmentForLine(t,e,i){let n=null,s=null;return Math.abs(e)>Math.abs(t)?(n=new f(0,i/e),s=new f(1,i/e-t/e)):(n=new f(i/t,0),s=new f(i/t-e/t,1)),new Xt(n,s)}getWidthCoordinate(){return this.computeMinimumDiameter(),this._minWidthPt}getSupportingSegment(){return this.computeMinimumDiameter(),this._inputGeom.getFactory().createLineString([this._minBaseSeg.p0,this._minBaseSeg.p1])}getDiameter(){if(this.computeMinimumDiameter(),null===this._minWidthPt)return this._inputGeom.getFactory().createLineString();const t=this._minBaseSeg.project(this._minWidthPt);return this._inputGeom.getFactory().createLineString([t,this._minWidthPt])}computeWidthConvex(t){this._convexHullPts=t instanceof xt?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=null,this._minBaseSeg=null):1===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[0]):2===this._convexHullPts.length||3===this._convexHullPts.length?(this._minWidth=0,this._minWidthPt=this._convexHullPts[0],this._minBaseSeg.p0=this._convexHullPts[0],this._minBaseSeg.p1=this._convexHullPts[1]):this.computeConvexRingMinDiameter(this._convexHullPts)}computeConvexRingMinDiameter(t){this._minWidth=r.MAX_VALUE;let e=1;const i=new Xt;for(let n=0;n<t.length-1;n++)i.p0=t[n],i.p1=t[n+1],e=this.findMaxPerpDistance(t,i,e)}findMaxPerpDistance(t,e,i){let n=e.distancePerpendicular(t[i]),s=n,r=i,o=r;for(;s>=n;)n=s,r=o,o=Cs.nextIndex(t,r),s=e.distancePerpendicular(t[o]);return n<this._minWidth&&(this._minPtIndex=r,this._minWidth=n,this._minWidthPt=t[this._minPtIndex],this._minBaseSeg=new Xt(e)),r}getMinimumRectangle(){if(this.computeMinimumDiameter(),0===this._minWidth)return this._minBaseSeg.p0.equals2D(this._minBaseSeg.p1)?this._inputGeom.getFactory().createPoint(this._minBaseSeg.p0):this._minBaseSeg.toGeometry(this._inputGeom.getFactory());const t=this._minBaseSeg.p1.x-this._minBaseSeg.p0.x,e=this._minBaseSeg.p1.y-this._minBaseSeg.p0.y;let i=r.MAX_VALUE,n=-r.MAX_VALUE,s=r.MAX_VALUE,o=-r.MAX_VALUE;for(let r=0;r<this._convexHullPts.length;r++){const a=Cs.computeC(t,e,this._convexHullPts[r]);a>n&&(n=a),a<i&&(i=a);const l=Cs.computeC(-e,t,this._convexHullPts[r]);l>o&&(o=l),l<s&&(s=l)}const a=Cs.computeSegmentForLine(-t,-e,o),l=Cs.computeSegmentForLine(-t,-e,s),A=Cs.computeSegmentForLine(-e,t,n),c=Cs.computeSegmentForLine(-e,t,i),h=A.lineIntersection(a),u=c.lineIntersection(a),d=c.lineIntersection(l),g=A.lineIntersection(l),p=this._inputGeom.getFactory().createLinearRing([h,u,d,g,h]);return this._inputGeom.getFactory().createPolygon(p)}computeMinimumDiameter(){if(null!==this._minWidthPt)return null;if(this._isConvex)this.computeWidthConvex(this._inputGeom);else{const t=new gs(this._inputGeom).getConvexHull();this.computeWidthConvex(t)}}getLength(){return this.computeMinimumDiameter(),this._minWidth}}var xs=Object.freeze({__proto__:null,Angle:Jt,Area:Ct,Centroid:us,ConvexHull:gs,Distance:G,InteriorPointArea:fs,InteriorPointLine:ws,InteriorPointPoint:vs,Length:V,MinimumBoundingCircle:bs,MinimumDiameter:Cs,Orientation:P,PointLocation:Ke,PointLocator:$n,RobustLineIntersector:Yt,distance:Re,locate:qe,match:hs});class Bs{constructor(){Bs.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distanceTolerance=null;const t=arguments[0];this._inputGeom=t}static densify(t,e){const i=new Bs(t);return i.setDistanceTolerance(e),i.getResultGeometry()}static densifyPoints(t,e,i){const n=new Xt,s=new F;for(let r=0;r<t.length-1;r++){n.p0=t[r],n.p1=t[r+1],s.add(n.p0,!1);const o=n.getLength(),a=Math.trunc(o/e)+1;if(a>1){const t=o/a;for(let e=1;e<a;e++){const r=e*t/o,a=n.pointAlong(r);i.makePrecise(a),s.add(a,!1)}}}return s.add(t[t.length-1],!1),s.toCoordinateArray()}setDistanceTolerance(t){if(t<=0)throw new n("Tolerance must be positive");this._distanceTolerance=t}getResultGeometry(){return new Es(this._distanceTolerance).transform(this._inputGeom)}}class Es extends fe{constructor(){super(),Es.constructor_.apply(this,arguments)}static constructor_(){this.distanceTolerance=null;const t=arguments[0];this.distanceTolerance=t}transformCoordinates(t,e){const i=t.toCoordinateArray();let n=Bs.densifyPoints(i,this.distanceTolerance,e.getPrecisionModel());return e instanceof tt&&1===n.length&&(n=new Array(0).fill(null)),this._factory.getCoordinateSequenceFactory().create(n)}transformPolygon(t,e){const i=super.transformPolygon.call(this,t,e);return e instanceof dt?i:this.createValidArea(i)}createValidArea(t){return Rn.bufferOp(t,0)}transformMultiPolygon(t,e){const i=super.transformMultiPolygon.call(this,t,e);return this.createValidArea(i)}}Bs.DensifyTransformer=Es;var Ss=Object.freeze({__proto__:null,Densifier:Bs});class Fs{constructor(){Fs.constructor_.apply(this,arguments)}static constructor_(){this._orig=null,this._sym=null,this._next=null;const t=arguments[0];this._orig=t}static create(t,e){const i=new Fs(t),n=new Fs(e);return i.link(n),i}oNext(){return this._sym._next}directionY(){return this.directionPt().getY()-this._orig.getY()}equals(){if(2===arguments.length&&arguments[1]instanceof f&&arguments[0]instanceof f){const t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}}findLowest(){let t=this,e=this.oNext();do{e.compareTo(t)<0&&(t=e),e=e.oNext()}while(e!==this);return t}compareTo(t){const e=t;return this.compareAngularDirection(e)}toStringNode(){const t=this.orig();this.dest();const e=new nt;e.append("Node( "+Wt.format(t)+" )\n");let i=this;do{e.append("  -> "+i),e.append("\n"),i=i.oNext()}while(i!==this);return e.toString()}link(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)}orig(){return this._orig}setNext(t){this._next=t}find(t){let e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null}dest(){return this._sym._orig}isEdgesSorted(){const t=this.findLowest();let e=t;do{const i=e.oNext();if(i===t)break;if(!(i.compareTo(e)>0))return!1;e=i}while(e!==t);return!0}insert(t){if(this.oNext()===this)return this.insertAfter(t),null;this.insertionEdge(t).insertAfter(t)}insertAfter(t){c.equals(this._orig,t.orig());const e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)}degree(){let t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t}directionPt(){return this.dest()}sym(){return this._sym}prev(){return this._sym.next()._sym}compareAngularDirection(t){const e=this.directionX(),i=this.directionY(),n=t.directionX(),s=t.directionY();if(e===n&&i===s)return 0;const r=ki.quadrant(e,i),o=ki.quadrant(n,s);if(r>o)return 1;if(r<o)return-1;const a=this.directionPt(),l=t.directionPt();return P.index(t._orig,l,a)}prevNode(){let t=this;for(;2===t.degree();)if(t=t.prev(),t===this)return null;return t}directionX(){return this.directionPt().getX()-this._orig.getX()}insertionEdge(t){let e=this;do{const i=e.oNext();if(i.compareTo(e)>0&&t.compareTo(e)>=0&&t.compareTo(i)<=0)return e;if(i.compareTo(e)<=0&&(t.compareTo(i)<=0||t.compareTo(e)>=0))return e;e=i}while(e!==this);return c.shouldNeverReachHere(),null}next(){return this._next}setSym(t){this._sym=t}toString(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"}toStringNodeEdge(){return"  -> ("+Wt.format(this.dest())}}class Is extends Fs{constructor(){super(),Is.constructor_.apply(this,arguments)}static constructor_(){this._isMarked=!1;const t=arguments[0];Fs.constructor_.call(this,t)}static setMarkBoth(t,e){t.setMark(e),t.sym().setMark(e)}static isMarked(t){return t.isMarked()}static setMark(t,e){t.setMark(e)}static markBoth(t){t.mark(),t.sym().mark()}static mark(t){t.mark()}setMark(t){this._isMarked=t}mark(){this._isMarked=!0}isMarked(){return this._isMarked}}class Ls{constructor(){Ls.constructor_.apply(this,arguments)}static constructor_(){this._vertexMap=new mt}static isValidEdge(t,e){return 0!==e.compareTo(t)}insert(t,e,i){const n=this.create(t,e);null!==i?i.insert(n):this._vertexMap.put(t,n);const s=this._vertexMap.get(e);return null!==s?s.insert(n.sym()):this._vertexMap.put(e,n.sym()),n}create(t,e){const i=this.createEdge(t),n=this.createEdge(e);return i.link(n),i}createEdge(t){return new Fs(t)}addEdge(t,e){if(!Ls.isValidEdge(t,e))return null;const i=this._vertexMap.get(t);let n=null;return null!==i&&(n=i.find(e)),null!==n?n:this.insert(t,e,i)}getVertexEdges(){return this._vertexMap.values()}findEdge(t,e){const i=this._vertexMap.get(t);return null===i?null:i.find(e)}}class Ms extends Is{constructor(){super(),Ms.constructor_.apply(this,arguments)}static constructor_(){this._isStart=!1;const t=arguments[0];Is.constructor_.call(this,t)}setStart(){this._isStart=!0}isStart(){return this._isStart}}class Ts extends Ls{constructor(){super()}createEdge(t){return new Ms(t)}}class Rs{constructor(){Rs.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._factory=null,this._graph=null,this._lines=new E,this._nodeEdgeStack=new $i,this._ringStartEdge=null,this._graph=new Ts}static dissolve(t){const e=new Rs;return e.add(t),e.getResult()}addLine(t){this._lines.add(this._factory.createLineString(t.toCoordinateArray()))}updateRingStartEdge(t){return t.isStart()||(t=t.sym()).isStart()?null===this._ringStartEdge?(this._ringStartEdge=t,null):void(t.orig().compareTo(this._ringStartEdge.orig())<0&&(this._ringStartEdge=t)):null}getResult(){return null===this._result&&this.computeResult(),this._result}process(t){let e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()}stackEdges(t){let e=t;do{Is.isMarked(e)||this._nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)}computeResult(){for(let t=this._graph.getVertexEdges().iterator();t.hasNext();){const e=t.next();Is.isMarked(e)||this.process(e)}this._result=this._factory.buildGeometry(this._lines)}buildLines(){for(;!this._nodeEdgeStack.empty();){const t=this._nodeEdgeStack.pop();Is.isMarked(t)||this.buildLine(t)}}add(){if(arguments[0]instanceof Y)arguments[0].apply(new class{get interfaces_(){return[z]}filter(t){t instanceof tt&&this.add(t)}});else if(v(arguments[0],b))for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.add(e)}else if(arguments[0]instanceof tt){const t=arguments[0];null===this._factory&&(this._factory=t.getFactory());const e=t.getCoordinateSequence();let i=!1;for(let t=1;t<e.size();t++){const n=this._graph.addEdge(e.getCoordinate(t-1),e.getCoordinate(t));null!==n&&(i||(n.setStart(),i=!0))}}}buildRing(t){const e=new F;let i=t;for(e.add(i.orig().copy(),!1);2===i.sym().degree();){const n=i.next();if(n===t)break;e.add(n.orig().copy(),!1),i=n}e.add(i.dest().copy(),!1),this.addLine(e)}buildLine(t){const e=new F;let i=t;for(this._ringStartEdge=null,Is.markBoth(i),e.add(i.orig().copy(),!1);2===i.sym().degree();){this.updateRingStartEdge(i);const n=i.next();if(n===t)return this.buildRing(this._ringStartEdge),null;e.add(n.orig().copy(),!1),i=n,Is.markBoth(i)}e.add(i.dest().clone(),!1),this.stackEdges(i.sym()),this.addLine(e)}}var ks=Object.freeze({__proto__:null,LineDissolver:Rs}),Us=Object.freeze({__proto__:null,GeometryGraph:ss});class Ds{visit(t){}}class Os{constructor(){Os.constructor_.apply(this,arguments)}static constructor_(){if(this._p=null,this._data=null,this._left=null,this._right=null,this._count=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._p=new f(t),this._left=null,this._right=null,this._count=1,this._data=e}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._p=new f(t,e),this._left=null,this._right=null,this._count=1,this._data=i}}isRepeated(){return this._count>1}getRight(){return this._right}getCoordinate(){return this._p}setLeft(t){this._left=t}getX(){return this._p.x}getData(){return this._data}getCount(){return this._count}increment(){this._count=this._count+1}setRight(t){this._right=t}getLeft(){return this._left}getY(){return this._p.y}}class Ps{constructor(){Ps.constructor_.apply(this,arguments)}static constructor_(){if(this._root=null,this._numberOfNodes=null,this._tolerance=null,0===arguments.length)Ps.constructor_.call(this,0);else if(1===arguments.length){const t=arguments[0];this._tolerance=t}}static toCoordinates(){if(1===arguments.length){const t=arguments[0];return Ps.toCoordinates(t,!1)}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=new F;for(let n=t.iterator();n.hasNext();){const t=n.next(),s=e?t.getCount():1;for(let e=0;e<s;e++)i.add(t.getCoordinate(),!0)}return i.toCoordinateArray()}}insert(){if(1===arguments.length){const t=arguments[0];return this.insert(t,null)}if(2===arguments.length){const t=arguments[0],e=arguments[1];if(null===this._root)return this._root=new Os(t,e),this._root;if(this._tolerance>0){const e=this.findBestMatchNode(t);if(null!==e)return e.increment(),e}return this.insertExact(t,e)}}query(){if(1===arguments.length){const t=arguments[0],e=new E;return this.query(t,e),e}if(2===arguments.length)if(arguments[0]instanceof L&&v(arguments[1],x)){const t=arguments[0],e=arguments[1];this.queryNode(this._root,t,!0,new class{get interfaces_(){return[Ds]}visit(t){e.add(t)}})}else if(arguments[0]instanceof L&&v(arguments[1],Ds)){const t=arguments[0],e=arguments[1];this.queryNode(this._root,t,!0,e)}}queryNode(t,e,i,n){if(null===t)return null;let s=null,r=null,o=null;i?(s=e.getMinX(),r=e.getMaxX(),o=t.getX()):(s=e.getMinY(),r=e.getMaxY(),o=t.getY());const a=o<=r;s<o&&this.queryNode(t.getLeft(),e,!i,n),e.contains(t.getCoordinate())&&n.visit(t),a&&this.queryNode(t.getRight(),e,!i,n)}findBestMatchNode(t){const e=new Ns(t,this._tolerance);return this.query(e.queryEnvelope(),e),e.getNode()}isEmpty(){return null===this._root}insertExact(t,e){let i=this._root,n=this._root,s=!0,r=!0;for(;null!==i;){if(null!==i&&t.distance(i.getCoordinate())<=this._tolerance)return i.increment(),i;r=s?t.x<i.getX():t.y<i.getY(),n=i,i=r?i.getLeft():i.getRight(),s=!s}this._numberOfNodes=this._numberOfNodes+1;const o=new Os(t,e);return r?n.setLeft(o):n.setRight(o),o}}class Ns{constructor(){Ns.constructor_.apply(this,arguments)}static constructor_(){this._tolerance=null,this._matchNode=null,this._matchDist=0,this._p=null;const t=arguments[0],e=arguments[1];this._p=t,this._tolerance=e}queryEnvelope(){const t=new L(this._p);return t.expandBy(this._tolerance),t}getNode(){return this._matchNode}visit(t){const e=this._p.distance(t.getCoordinate());if(!(e<=this._tolerance))return null;let i=!1;(null===this._matchNode||e<this._matchDist||null!==this._matchNode&&e===this._matchDist&&t.getCoordinate().compareTo(this._matchNode.getCoordinate())<1)&&(i=!0),i&&(this._matchNode=t,this._matchDist=e)}get interfaces_(){return[Ds]}}Ps.BestMatchVisitor=Ns;var Qs=Object.freeze({__proto__:null,KdTree:Ps});class Hs{constructor(){Hs.constructor_.apply(this,arguments)}static constructor_(){this._items=new E,this._subnode=new Array(4).fill(null)}static getSubnodeIndex(t,e,i){let n=-1;return t.getMinX()>=e&&(t.getMinY()>=i&&(n=3),t.getMaxY()<=i&&(n=1)),t.getMaxX()<=e&&(t.getMinY()>=i&&(n=2),t.getMaxY()<=i&&(n=0)),n}size(){let t=0;for(let e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+this._items.size()}addAllItemsFromOverlapping(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this._items);for(let i=0;i<4;i++)null!==this._subnode[i]&&this._subnode[i].addAllItemsFromOverlapping(t,e)}visitItems(t,e){for(let t=this._items.iterator();t.hasNext();)e.visitItem(t.next())}hasItems(){return!this._items.isEmpty()}remove(t,e){if(!this.isSearchMatch(t))return!1;let i=!1;for(let n=0;n<4;n++)if(null!==this._subnode[n]&&(i=this._subnode[n].remove(t,e),i)){this._subnode[n].isPrunable()&&(this._subnode[n]=null);break}return i||(i=this._items.remove(e),i)}visit(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(let i=0;i<4;i++)null!==this._subnode[i]&&this._subnode[i].visit(t,e)}getItems(){return this._items}depth(){let t=0;for(let e=0;e<4;e++)if(null!==this._subnode[e]){const i=this._subnode[e].depth();i>t&&(t=i)}return t+1}hasChildren(){for(let t=0;t<4;t++)if(null!==this._subnode[t])return!0;return!1}isPrunable(){return!(this.hasChildren()||this.hasItems())}addAllItems(t){t.addAll(this._items);for(let e=0;e<4;e++)null!==this._subnode[e]&&this._subnode[e].addAllItems(t);return t}getNodeCount(){let t=0;for(let e=0;e<4;e++)null!==this._subnode[e]&&(t+=this._subnode[e].size());return t+1}isEmpty(){let t=!0;if(this._items.isEmpty()){for(let e=0;e<4;e++)if(null!==this._subnode[e]&&!this._subnode[e].isEmpty()){t=!1;break}}else t=!1;return t}add(t){this._items.add(t)}get interfaces_(){return[a]}}function Gs(){}Gs.exponent=function(t){return function(t,e){let i,n,s,r;const o={64:{d:32752,c:0,b:0,a:0}},a={64:11}[t];if(r||(i=e<0||1/e<0,isFinite(e)||(r=o[t],i&&(r.d+=1<<t/4-1),n=Math.pow(2,a)-1,s=0)),!r){for(n={64:1023}[t],s=Math.abs(e);s>=2;)n++,s/=2;for(;s<1&&n>0;)n--,s*=2;n<=0&&(s/=2)}return n}(64,t)-1023},Gs.powerOf2=function(t){return Math.pow(2,t)};class Vs{constructor(){Vs.constructor_.apply(this,arguments)}static constructor_(){this._pt=new f,this._level=0,this._env=null;const t=arguments[0];this.computeKey(t)}static computeQuadLevel(t){const e=t.getWidth(),i=t.getHeight(),n=e>i?e:i;return Gs.exponent(n)+1}getLevel(){return this._level}computeKey(){if(1===arguments.length){const t=arguments[0];for(this._level=Vs.computeQuadLevel(t),this._env=new L,this.computeKey(this._level,t);!this._env.contains(t);)this._level+=1,this.computeKey(this._level,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1],i=Gs.powerOf2(t);this._pt.x=Math.floor(e.getMinX()/i)*i,this._pt.y=Math.floor(e.getMinY()/i)*i,this._env.init(this._pt.x,this._pt.x+i,this._pt.y,this._pt.y+i)}}getEnvelope(){return this._env}getCentre(){return new f((this._env.getMinX()+this._env.getMaxX())/2,(this._env.getMinY()+this._env.getMaxY())/2)}getPoint(){return this._pt}}let zs=class t extends Hs{constructor(){super(),t.constructor_.apply(this,arguments)}static constructor_(){this._env=null,this._centrex=null,this._centrey=null,this._level=null;const t=arguments[0],e=arguments[1];this._env=t,this._level=e,this._centrex=(t.getMinX()+t.getMaxX())/2,this._centrey=(t.getMinY()+t.getMaxY())/2}static createNode(e){const i=new Vs(e);return new t(i.getEnvelope(),i.getLevel())}static createExpanded(e,i){const n=new L(i);null!==e&&n.expandToInclude(e._env);const s=t.createNode(n);return null!==e&&s.insertNode(e),s}find(t){const e=Hs.getSubnodeIndex(t,this._centrex,this._centrey);return-1===e?this:null!==this._subnode[e]?this._subnode[e].find(t):this}isSearchMatch(t){return null!==t&&this._env.intersects(t)}getSubnode(t){return null===this._subnode[t]&&(this._subnode[t]=this.createSubnode(t)),this._subnode[t]}getEnvelope(){return this._env}getNode(t){const e=Hs.getSubnodeIndex(t,this._centrex,this._centrey);return-1!==e?this.getSubnode(e).getNode(t):this}createSubnode(e){let i=0,n=0,s=0,r=0;switch(e){case 0:i=this._env.getMinX(),n=this._centrex,s=this._env.getMinY(),r=this._centrey;break;case 1:i=this._centrex,n=this._env.getMaxX(),s=this._env.getMinY(),r=this._centrey;break;case 2:i=this._env.getMinX(),n=this._centrex,s=this._centrey,r=this._env.getMaxY();break;case 3:i=this._centrex,n=this._env.getMaxX(),s=this._centrey,r=this._env.getMaxY()}const o=new L(i,n,s,r);return new t(o,this._level-1)}insertNode(t){c.isTrue(null===this._env||this._env.contains(t._env));const e=Hs.getSubnodeIndex(t._env,this._centrex,this._centrey);if(t._level===this._level-1)this._subnode[e]=t;else{const i=this.createSubnode(e);i.insertNode(t),this._subnode[e]=i}}};class Ks{static isZeroWidth(t,e){const i=e-t;if(0===i)return!0;const n=i/Math.max(Math.abs(t),Math.abs(e));return Gs.exponent(n)<=Ks.MIN_BINARY_EXPONENT}}Ks.MIN_BINARY_EXPONENT=-50;class js extends Hs{constructor(){super()}insertContained(t,e,i){c.isTrue(t.getEnvelope().contains(e));const n=Ks.isZeroWidth(e.getMinX(),e.getMaxX()),s=Ks.isZeroWidth(e.getMinY(),e.getMaxY());let r=null;r=n||s?t.find(e):t.getNode(e),r.add(i)}isSearchMatch(t){return!0}insert(t,e){const i=Hs.getSubnodeIndex(t,js.origin.x,js.origin.y);if(-1===i)return this.add(e),null;const n=this._subnode[i];if(null===n||!n.getEnvelope().contains(t)){const e=zs.createExpanded(n,t);this._subnode[i]=e}this.insertContained(this._subnode[i],t,e)}}js.origin=new f(0,0);class Ws{constructor(){Ws.constructor_.apply(this,arguments)}static constructor_(){this._root=null,this._minExtent=1,this._root=new js}static ensureExtent(t,e){let i=t.getMinX(),n=t.getMaxX(),s=t.getMinY(),r=t.getMaxY();return i!==n&&s!==r?t:(i===n&&(i-=e/2,n+=e/2),s===r&&(s-=e/2,r+=e/2),new L(i,n,s,r))}size(){return null!==this._root?this._root.size():0}insert(t,e){this.collectStats(t);const i=Ws.ensureExtent(t,this._minExtent);this._root.insert(i,e)}query(){if(1===arguments.length){const t=arguments[0],e=new Qe;return this.query(t,e),e.getItems()}if(2===arguments.length){const t=arguments[0],e=arguments[1];this._root.visit(t,e)}}queryAll(){const t=new E;return this._root.addAllItems(t),t}remove(t,e){const i=Ws.ensureExtent(t,this._minExtent);return this._root.remove(i,e)}collectStats(t){const e=t.getWidth();e<this._minExtent&&e>0&&(this._minExtent=e);const i=t.getHeight();i<this._minExtent&&i>0&&(this._minExtent=i)}depth(){return null!==this._root?this._root.depth():0}isEmpty(){return null===this._root||this._root.isEmpty()}get interfaces_(){return[xi,a]}}var $s=Object.freeze({__proto__:null,Quadtree:Ws}),Ys=Object.freeze({__proto__:null,STRtree:Li}),Xs=Object.freeze({__proto__:null,kdtree:Qs,quadtree:$s,strtree:Ys});const qs=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class Zs{constructor(t){this.geometryFactory=t||new Et}read(t){let e;e="string"==typeof t?JSON.parse(t):t;const i=e.type;if(!Js[i])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==qs.indexOf(i)?Js[i].call(this,e.coordinates):"GeometryCollection"===i?Js[i].call(this,e.geometries):Js[i].call(this,e)}write(t){const e=t.getGeometryType();if(!tr[e])throw new Error("Geometry is not supported");return tr[e].call(this,t)}}const Js={Feature:function(t){const e={};for(const i in t)e[i]=t[i];if(t.geometry){const i=t.geometry.type;if(!Js[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Js.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){const e={};if(t.features){e.features=[];for(let i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){const e=[];for(let i=0;i<t.length;++i){const n=t[i];e.push(new f(...n))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new f(t[0],t[1]),new f(t[2],t[1]),new f(t[2],t[3]),new f(t[0],t[3]),new f(t[0],t[1])])},Point:function(t){const e=new f(...t);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){const e=[];for(let i=0;i<t.length;++i)e.push(Js.Point.call(this,t[i]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){const e=Js.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){const e=[];for(let i=0;i<t.length;++i)e.push(Js.LineString.call(this,t[i]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){const e=Js.coordinates.call(this,t[0]),i=this.geometryFactory.createLinearRing(e),n=[];for(let e=1;e<t.length;++e){const i=t[e],s=Js.coordinates.call(this,i),r=this.geometryFactory.createLinearRing(s);n.push(r)}return this.geometryFactory.createPolygon(i,n)},MultiPolygon:function(t){const e=[];for(let i=0;i<t.length;++i){const n=t[i];e.push(Js.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){const e=[];for(let i=0;i<t.length;++i){const n=t[i];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},tr={coordinate:function(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:tr.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){const e=[];for(let i=0;i<t._geometries.length;++i){const n=t._geometries[i],s=tr.Point.call(this,n);e.push(s.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){const e=[],i=t.getCoordinates();for(let t=0;t<i.length;++t){const n=i[t];e.push(tr.coordinate.call(this,n))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){const e=[];for(let i=0;i<t._geometries.length;++i){const n=t._geometries[i],s=tr.LineString.call(this,n);e.push(s.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){const e=[],i=tr.LineString.call(this,t._shell);e.push(i.coordinates);for(let i=0;i<t._holes.length;++i){const n=t._holes[i],s=tr.LineString.call(this,n);e.push(s.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){const e=[];for(let i=0;i<t._geometries.length;++i){const n=t._geometries[i],s=tr.Polygon.call(this,n);e.push(s.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){const e=[];for(let i=0;i<t._geometries.length;++i){const n=t._geometries[i],s=n.getGeometryType();e.push(tr[s].call(this,n))}return{type:"GeometryCollection",geometries:e}}};function er(t){return[t.x,t.y]}var ir=Object.freeze({__proto__:null,GeoJSONReader:class{constructor(t){this.parser=new Zs(t||new Et)}read(t){return this.parser.read(t)}},GeoJSONWriter:class{constructor(){this.parser=new Zs(this.geometryFactory)}write(t){return this.parser.write(t)}},OL3Parser:class{constructor(t,e){this.geometryFactory=t||new Et,this.ol=e||"undefined"!=typeof ol&&ol}inject(t,e,i,n,s,r,o,a){this.ol={geom:{Point:t,LineString:e,LinearRing:i,Polygon:n,MultiPoint:s,MultiLineString:r,MultiPolygon:o,GeometryCollection:a}}}read(t){const e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0}convertFromPoint(t){const e=t.getCoordinates();return this.geometryFactory.createPoint(new f(e[0],e[1]))}convertFromLineString(t){return this.geometryFactory.createLineString(t.getCoordinates().map((function(t){return new f(t[0],t[1])})))}convertFromLinearRing(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map((function(t){return new f(t[0],t[1])})))}convertFromPolygon(t){const e=t.getLinearRings();let i=null;const n=[];for(let t=0;t<e.length;t++){const s=this.convertFromLinearRing(e[t]);0===t?i=s:n.push(s)}return this.geometryFactory.createPolygon(i,n)}convertFromMultiPoint(t){const e=t.getPoints().map((function(t){return this.convertFromPoint(t)}),this);return this.geometryFactory.createMultiPoint(e)}convertFromMultiLineString(t){const e=t.getLineStrings().map((function(t){return this.convertFromLineString(t)}),this);return this.geometryFactory.createMultiLineString(e)}convertFromMultiPolygon(t){const e=t.getPolygons().map((function(t){return this.convertFromPolygon(t)}),this);return this.geometryFactory.createMultiPolygon(e)}convertFromCollection(t){const e=t.getGeometries().map((function(t){return this.read(t)}),this);return this.geometryFactory.createGeometryCollection(e)}write(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0}convertToPoint(t){return new this.ol.geom.Point([t.x,t.y])}convertToLineString(t){const e=t._points._coordinates.map(er);return new this.ol.geom.LineString(e)}convertToLinearRing(t){const e=t._points._coordinates.map(er);return new this.ol.geom.LinearRing(e)}convertToPolygon(t){const e=[t._shell._points._coordinates.map(er)];for(let i=0;i<t._holes.length;i++)e.push(t._holes[i]._points._coordinates.map(er));return new this.ol.geom.Polygon(e)}convertToMultiPoint(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(er))}convertToMultiLineString(t){const e=[];for(let i=0;i<t._geometries.length;i++)e.push(this.convertToLineString(t._geometries[i]).getCoordinates());return new this.ol.geom.MultiLineString(e)}convertToMultiPolygon(t){const e=[];for(let i=0;i<t._geometries.length;i++)e.push(this.convertToPolygon(t._geometries[i]).getCoordinates());return new this.ol.geom.MultiPolygon(e)}convertToCollection(t){const e=[];for(let i=0;i<t._geometries.length;i++){const n=t._geometries[i];e.push(this.write(n))}return new this.ol.geom.GeometryCollection(e)}},WKTReader:class{constructor(t){this.parser=new jt(t||new Et)}read(t){return this.parser.read(t)}},WKTWriter:Wt}),nr=Object.freeze({__proto__:null,MCIndexNoder:Oi,ScaledNoder:pi,SegmentString:hi});class sr{constructor(){sr.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){const t=arguments[0];sr.constructor_.call(this,t,Vn.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}}static getBoundary(){return 1===arguments.length?new sr(arguments[0]).getBoundary():2===arguments.length?new sr(arguments[0],arguments[1]).getBoundary():void 0}boundaryMultiLineString(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();const e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)}getBoundary(){return this._geom instanceof tt?this.boundaryLineString(this._geom):this._geom instanceof wt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()}boundaryLineString(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])}getEmptyMultiPoint(){return this._geomFact.createMultiPoint()}computeBoundaryCoordinates(t){const e=new E;this._endpointMap=new li;for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(let t=this._endpointMap.entrySet().iterator();t.hasNext();){const i=t.next(),n=i.getValue().count;this._bnRule.isInBoundary(n)&&e.add(i.getKey())}return W.toCoordinateArray(e)}addEndpoint(t){let e=this._endpointMap.get(t);null===e&&(e=new rr,this._endpointMap.put(t,e)),e.count++}}let rr=class t{constructor(){t.constructor_.apply(this,arguments)}static constructor_(){this.count=null}};class or{constructor(){or.constructor_.apply(this,arguments)}static constructor_(){if(this._inputGeom=null,this._isClosedEndpointsInInterior=!0,this._nonSimpleLocation=null,1===arguments.length){const t=arguments[0];this._inputGeom=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._inputGeom=t,this._isClosedEndpointsInInterior=!e.isInBoundary(2)}}static isSimple(){return 1===arguments.length?new or(arguments[0]).isSimple():2===arguments.length?new or(arguments[0],arguments[1]).isSimple():void 0}isSimpleMultiPoint(t){if(t.isEmpty())return!0;const e=new lt;for(let i=0;i<t.getNumGeometries();i++){const n=t.getGeometryN(i).getCoordinate();if(e.contains(n))return this._nonSimpleLocation=n,!1;e.add(n)}return!0}isSimplePolygonal(t){for(let e=_e.getLines(t).iterator();e.hasNext();){const t=e.next();if(!this.isSimpleLinearGeometry(t))return!1}return!0}hasClosedEndpointIntersection(t){const e=new li;for(let i=t.getEdgeIterator();i.hasNext();){const t=i.next(),n=t.isClosed(),s=t.getCoordinate(0);this.addEndpoint(e,s,n);const r=t.getCoordinate(t.getNumPoints()-1);this.addEndpoint(e,r,n)}for(let t=e.values().iterator();t.hasNext();){const e=t.next();if(e.isClosed&&2!==e.degree)return this._nonSimpleLocation=e.getCoordinate(),!0}return!1}getNonSimpleLocation(){return this._nonSimpleLocation}isSimpleLinearGeometry(t){if(t.isEmpty())return!0;const e=new ss(0,t),i=new Yt,n=e.computeSelfNodes(i,!0);return!(n.hasIntersection()&&(n.hasProperIntersection()?(this._nonSimpleLocation=n.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this._isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))}hasNonEndpointIntersection(t){for(let e=t.getEdgeIterator();e.hasNext();){const t=e.next(),i=t.getMaximumSegmentIndex();for(let e=t.getEdgeIntersectionList().iterator();e.hasNext();){const t=e.next();if(!t.isEndPoint(i))return this._nonSimpleLocation=t.getCoordinate(),!0}}return!1}addEndpoint(t,e,i){let n=t.get(e);null===n&&(n=new ar(e),t.put(e,n)),n.addEndpoint(i)}computeSimple(t){return this._nonSimpleLocation=null,!!t.isEmpty()||(t instanceof tt||t instanceof wt?this.isSimpleLinearGeometry(t):t instanceof Bt?this.isSimpleMultiPoint(t):v(t,ut)?this.isSimplePolygonal(t):!(t instanceof ht)||this.isSimpleGeometryCollection(t))}isSimple(){return this._nonSimpleLocation=null,this.computeSimple(this._inputGeom)}isSimpleGeometryCollection(t){for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);if(!this.computeSimple(i))return!1}return!0}}class ar{constructor(){ar.constructor_.apply(this,arguments)}static constructor_(){this.pt=null,this.isClosed=null,this.degree=null;const t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}getCoordinate(){return this.pt}addEndpoint(t){this.degree++,this.isClosed|=t}}or.EndpointInfo=ar;var lr=Object.freeze({__proto__:null,BufferOp:Rn,BufferParameters:Je});class Ar{constructor(){Ar.constructor_.apply(this,arguments)}static constructor_(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){const t=arguments[0],e=arguments[1];Ar.constructor_.call(this,t,Ar.INSIDE_AREA,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._component=t,this._segIndex=e,this._pt=i}}getSegmentIndex(){return this._segIndex}getCoordinate(){return this._pt}isInsideArea(){return this._segIndex===Ar.INSIDE_AREA}toString(){return this._component.getGeometryType()+"["+this._segIndex+"]-"+Wt.toPoint(this._pt)}getGeometryComponent(){return this._component}}Ar.INSIDE_AREA=-1;class cr{constructor(){cr.constructor_.apply(this,arguments)}static constructor_(){this._locations=null;const t=arguments[0];this._locations=t}static getLocations(t){const e=new E;return t.apply(new cr(e)),e}filter(t){if(t.isEmpty())return null;(t instanceof bt||t instanceof tt||t instanceof xt)&&this._locations.add(new Ar(t,0,t.getCoordinate()))}get interfaces_(){return[J]}}class hr{constructor(){hr.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new $n,this._minDistanceLocation=null,this._minDistance=r.MAX_VALUE,2===arguments.length){const t=arguments[0],e=arguments[1];hr.constructor_.call(this,t,e,0)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e,this._terminateDistance=i}}static distance(t,e){return new hr(t,e).distance()}static isWithinDistance(t,e,i){return!(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>i)&&new hr(t,e,i).distance()<=i}static nearestPoints(t,e){return new hr(t,e).nearestPoints()}computeContainmentDistance(){if(0===arguments.length){const t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1],i=this._geom[t];if(i.getDimension()<2)return null;const n=1-t,s=ve.getPolygons(i);if(s.size()>0){const i=cr.getLocations(this._geom[n]);if(this.computeContainmentDistance(i,s,e),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=e[0],this._minDistanceLocation[t]=e[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&v(arguments[0],x)&&v(arguments[1],x)){const t=arguments[0],e=arguments[1],i=arguments[2];for(let n=0;n<t.size();n++){const s=t.get(n);for(let t=0;t<e.size();t++)if(this.computeContainmentDistance(s,e.get(t),i),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ar&&arguments[1]instanceof xt){const t=arguments[0],e=arguments[1],i=arguments[2],n=t.getCoordinate();if(qt.EXTERIOR!==this._ptLocator.locate(n,e))return this._minDistance=0,i[0]=t,i[1]=new Ar(e,n),null}}computeMinDistanceLinesPoints(t,e,i){for(let n=0;n<t.size();n++){const s=t.get(n);for(let t=0;t<e.size();t++){const n=e.get(t);if(this.computeMinDistance(s,n,i),this._minDistance<=this._terminateDistance)return null}}}computeFacetDistance(){const t=new Array(2).fill(null),e=_e.getLines(this._geom[0]),i=_e.getLines(this._geom[1]),n=we.getPoints(this._geom[0]),s=we.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,s,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,s,t),void this.updateMinDistance(t,!1))))}nearestLocations(){return this.computeMinDistance(),this._minDistanceLocation}updateMinDistance(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])}nearestPoints(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]}computeMinDistance(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof tt&&arguments[1]instanceof bt){const t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;const n=t.getCoordinates(),s=e.getCoordinate();for(let r=0;r<n.length-1;r++){const o=G.pointToSegment(s,n[r],n[r+1]);if(o<this._minDistance){this._minDistance=o;const a=new Xt(n[r],n[r+1]).closestPoint(s);i[0]=new Ar(t,r,a),i[1]=new Ar(e,0,s)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof tt&&arguments[1]instanceof tt){const t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;const n=t.getCoordinates(),s=e.getCoordinates();for(let r=0;r<n.length-1;r++){const o=new L(n[r],n[r+1]);if(!(o.distance(e.getEnvelopeInternal())>this._minDistance))for(let a=0;a<s.length-1;a++){const l=new L(s[a],s[a+1]);if(o.distance(l)>this._minDistance)continue;const A=G.segmentToSegment(n[r],n[r+1],s[a],s[a+1]);if(A<this._minDistance){this._minDistance=A;const o=new Xt(n[r],n[r+1]),l=new Xt(s[a],s[a+1]),c=o.closestPoints(l);i[0]=new Ar(t,r,c[0]),i[1]=new Ar(e,a,c[1])}if(this._minDistance<=this._terminateDistance)return null}}}}computeMinDistancePoints(t,e,i){for(let n=0;n<t.size();n++){const s=t.get(n);for(let t=0;t<e.size();t++){const n=e.get(t),r=s.getCoordinate().distance(n.getCoordinate());if(r<this._minDistance&&(this._minDistance=r,i[0]=new Ar(s,0,s.getCoordinate()),i[1]=new Ar(n,0,n.getCoordinate())),this._minDistance<=this._terminateDistance)return null}}}distance(){if(null===this._geom[0]||null===this._geom[1])throw new n("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)}computeMinDistanceLines(t,e,i){for(let n=0;n<t.size();n++){const s=t.get(n);for(let t=0;t<e.size();t++){const n=e.get(t);if(this.computeMinDistance(s,n,i),this._minDistance<=this._terminateDistance)return null}}}}var ur=Object.freeze({__proto__:null,DistanceOp:hr});class dr{constructor(){dr.constructor_.apply(this,arguments)}static constructor_(){this._factory=null,this._directedEdges=new E,this._coordinates=null;const t=arguments[0];this._factory=t}add(t){this._directedEdges.add(t)}toLineString(){return this._factory.createLineString(this.getCoordinates())}getCoordinates(){if(null===this._coordinates){let t=0,e=0;const i=new F;for(let n=this._directedEdges.iterator();n.hasNext();){const s=n.next();s.getEdgeDirection()?t++:e++,i.add(s.getEdge().getLine().getCoordinates(),!1,s.getEdgeDirection())}this._coordinates=i.toCoordinateArray(),e>t&&W.reverse(this._coordinates)}return this._coordinates}}class gr{constructor(){gr.constructor_.apply(this,arguments)}static constructor_(){this._isMarked=!1,this._isVisited=!1,this._data=null}static setMarked(t,e){for(;t.hasNext();)t.next().setMarked(e)}static setVisited(t,e){for(;t.hasNext();)t.next().setVisited(e)}static getComponentWithVisitedState(t,e){for(;t.hasNext();){const i=t.next();if(i.isVisited()===e)return i}return null}setVisited(t){this._isVisited=t}isMarked(){return this._isMarked}setData(t){this._data=t}getData(){return this._data}setMarked(t){this._isMarked=t}getContext(){return this._data}isVisited(){return this._isVisited}setContext(t){this._data=t}}class pr extends gr{constructor(){super(),pr.constructor_.apply(this,arguments)}static constructor_(){if(this._parentEdge=null,this._from=null,this._to=null,this._p0=null,this._p1=null,this._sym=null,this._edgeDirection=null,this._quadrant=null,this._angle=null,0===arguments.length);else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._from=t,this._to=e,this._edgeDirection=n,this._p0=t.getCoordinate(),this._p1=i;const s=this._p1.x-this._p0.x,r=this._p1.y-this._p0.y;this._quadrant=ki.quadrant(s,r),this._angle=Math.atan2(r,s)}}static toEdges(t){const e=new E;for(let i=t.iterator();i.hasNext();)e.add(i.next()._parentEdge);return e}isRemoved(){return null===this._parentEdge}compareDirection(t){return this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:P.index(t._p0,t._p1,this._p1)}getCoordinate(){return this._from.getCoordinate()}print(t){const e=this.getClass().getName(),i=e.lastIndexOf("."),n=e.substring(i+1);t.print("  "+n+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+this._angle)}getDirectionPt(){return this._p1}getAngle(){return this._angle}getSym(){return this._sym}getEdge(){return this._parentEdge}getToNode(){return this._to}getEdgeDirection(){return this._edgeDirection}compareTo(t){const e=t;return this.compareDirection(e)}getFromNode(){return this._from}setEdge(t){this._parentEdge=t}remove(){this._sym=null,this._parentEdge=null}getQuadrant(){return this._quadrant}setSym(t){this._sym=t}get interfaces_(){return[o]}}class fr extends pr{constructor(){super(),fr.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];pr.constructor_.call(this,t,e,i,n)}getNext(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(c.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))}}class mr extends gr{constructor(){super(),mr.constructor_.apply(this,arguments)}static constructor_(){if(this._dirEdge=null,0===arguments.length);else if(2===arguments.length){const t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}isRemoved(){return null===this._dirEdge}setDirectedEdges(t,e){this._dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)}getDirEdge(){if(Number.isInteger(arguments[0])){const t=arguments[0];return this._dirEdge[t]}if(arguments[0]instanceof yr){const t=arguments[0];return this._dirEdge[0].getFromNode()===t?this._dirEdge[0]:this._dirEdge[1].getFromNode()===t?this._dirEdge[1]:null}}remove(){this._dirEdge=null}getOppositeNode(t){return this._dirEdge[0].getFromNode()===t?this._dirEdge[0].getToNode():this._dirEdge[1].getFromNode()===t?this._dirEdge[1].getToNode():null}}class _r{constructor(){_r.constructor_.apply(this,arguments)}static constructor_(){this._outEdges=new E,this._sorted=!1}getNextEdge(t){const e=this.getIndex(t);return this._outEdges.get(this.getIndex(e+1))}getCoordinate(){const t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}iterator(){return this.sortEdges(),this._outEdges.iterator()}sortEdges(){this._sorted||(ye.sort(this._outEdges),this._sorted=!0)}remove(t){this._outEdges.remove(t)}getEdges(){return this.sortEdges(),this._outEdges}getNextCWEdge(t){const e=this.getIndex(t);return this._outEdges.get(this.getIndex(e-1))}getIndex(){if(arguments[0]instanceof mr){const t=arguments[0];this.sortEdges();for(let e=0;e<this._outEdges.size();e++)if(this._outEdges.get(e).getEdge()===t)return e;return-1}if(arguments[0]instanceof pr){const t=arguments[0];this.sortEdges();for(let e=0;e<this._outEdges.size();e++)if(this._outEdges.get(e)===t)return e;return-1}if(Number.isInteger(arguments[0])){let t=arguments[0]%this._outEdges.size();return t<0&&(t+=this._outEdges.size()),t}}add(t){this._outEdges.add(t),this._sorted=!1}getDegree(){return this._outEdges.size()}}class yr extends gr{constructor(){super(),yr.constructor_.apply(this,arguments)}static constructor_(){if(this._pt=null,this._deStar=null,1===arguments.length){const t=arguments[0];yr.constructor_.call(this,t,new _r)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._pt=t,this._deStar=e}}static getEdgesBetween(t,e){const i=pr.toEdges(t.getOutEdges().getEdges()),n=new pt(i),s=pr.toEdges(e.getOutEdges().getEdges());return n.retainAll(s),n}isRemoved(){return null===this._pt}addOutEdge(t){this._deStar.add(t)}getCoordinate(){return this._pt}getOutEdges(){return this._deStar}remove(){if(0===arguments.length)this._pt=null;else if(1===arguments.length){const t=arguments[0];this._deStar.remove(t)}}getIndex(t){return this._deStar.getIndex(t)}getDegree(){return this._deStar.getDegree()}}class wr extends mr{constructor(){super(),wr.constructor_.apply(this,arguments)}static constructor_(){this._line=null;const t=arguments[0];this._line=t}getLine(){return this._line}}class vr{constructor(){vr.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new li}find(t){return this._nodeMap.get(t)}iterator(){return this._nodeMap.values().iterator()}remove(t){return this._nodeMap.remove(t)}values(){return this._nodeMap.values()}add(t){return this._nodeMap.put(t.getCoordinate(),t),t}}class br{constructor(){br.constructor_.apply(this,arguments)}static constructor_(){this._edges=new pt,this._dirEdges=new pt,this._nodeMap=new vr}findNodesOfDegree(t){const e=new E;for(let i=this.nodeIterator();i.hasNext();){const n=i.next();n.getDegree()===t&&e.add(n)}return e}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}getEdges(){return this._edges}nodeIterator(){return this._nodeMap.iterator()}contains(){if(arguments[0]instanceof mr){const t=arguments[0];return this._edges.contains(t)}if(arguments[0]instanceof pr){const t=arguments[0];return this._dirEdges.contains(t)}}add(){if(arguments[0]instanceof yr){const t=arguments[0];this._nodeMap.add(t)}else if(arguments[0]instanceof mr){const t=arguments[0];this._edges.add(t),this.add(t.getDirEdge(0)),this.add(t.getDirEdge(1))}else if(arguments[0]instanceof pr){const t=arguments[0];this._dirEdges.add(t)}}getNodes(){return this._nodeMap.values()}remove(){if(arguments[0]instanceof mr){const t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this._edges.remove(t),t.remove()}else if(arguments[0]instanceof pr){const t=arguments[0],e=t.getSym();null!==e&&e.setSym(null),t.getFromNode().remove(t),t.remove(),this._dirEdges.remove(t)}else if(arguments[0]instanceof yr){const t=arguments[0];for(let e=t.getOutEdges().getEdges().iterator();e.hasNext();){const t=e.next(),i=t.getSym();null!==i&&this.remove(i),this._dirEdges.remove(t);const n=t.getEdge();null!==n&&this._edges.remove(n)}this._nodeMap.remove(t.getCoordinate()),t.remove()}}findNode(t){return this._nodeMap.find(t)}}class Cr extends br{constructor(){super()}getNode(t){let e=this.findNode(t);return null===e&&(e=new yr(t),this.add(e)),e}addEdge(t){if(t.isEmpty())return null;const e=W.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;const i=e[0],n=e[e.length-1],s=this.getNode(i),r=this.getNode(n),o=new fr(s,r,e[1],!0),a=new fr(r,s,e[e.length-2],!1),l=new wr(t);l.setDirectedEdges(o,a),this.add(l)}}class xr{constructor(){xr.constructor_.apply(this,arguments)}static constructor_(){this._graph=new Cr,this._mergedLineStrings=null,this._factory=null,this._edgeStrings=null}buildEdgeStringsForUnprocessedNodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next();e.isMarked()||(c.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}}buildEdgeStringsForNonDegree2Nodes(){for(let t=this._graph.getNodes().iterator();t.hasNext();){const e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}}buildEdgeStringsStartingAt(t){for(let e=t.getOutEdges().iterator();e.hasNext();){const t=e.next();t.getEdge().isMarked()||this._edgeStrings.add(this.buildEdgeStringStartingWith(t))}}merge(){if(null!==this._mergedLineStrings)return null;gr.setMarked(this._graph.nodeIterator(),!1),gr.setMarked(this._graph.edgeIterator(),!1),this._edgeStrings=new E,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this._mergedLineStrings=new E;for(let t=this._edgeStrings.iterator();t.hasNext();){const e=t.next();this._mergedLineStrings.add(e.toLineString())}}addLineString(t){null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t)}buildEdgeStringStartingWith(t){const e=new dr(this._factory);let i=t;do{e.add(i),i.getEdge().setMarked(!0),i=i.getNext()}while(null!==i&&i!==t);return e}add(){if(arguments[0]instanceof Y){const t=arguments[0];for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);i instanceof tt&&this.addLineString(i)}}else if(v(arguments[0],b)){const t=arguments[0];this._mergedLineStrings=null;for(let e=t.iterator();e.hasNext();){const t=e.next();this.add(t)}}}buildEdgeStringsForIsolatedLoops(){this.buildEdgeStringsForUnprocessedNodes()}buildEdgeStringsForObviousStartNodes(){this.buildEdgeStringsForNonDegree2Nodes()}getMergedLineStrings(){return this.merge(),this._mergedLineStrings}}class Br{constructor(){Br.constructor_.apply(this,arguments)}static constructor_(){this._parentGraph=null,this._edges=new pt,this._dirEdges=new E,this._nodeMap=new vr;const t=arguments[0];this._parentGraph=t}dirEdgeIterator(){return this._dirEdges.iterator()}edgeIterator(){return this._edges.iterator()}getParent(){return this._parentGraph}nodeIterator(){return this._nodeMap.iterator()}contains(t){return this._edges.contains(t)}add(t){if(this._edges.contains(t))return null;this._edges.add(t),this._dirEdges.add(t.getDirEdge(0)),this._dirEdges.add(t.getDirEdge(1)),this._nodeMap.add(t.getDirEdge(0).getFromNode()),this._nodeMap.add(t.getDirEdge(1).getFromNode())}}class Er{constructor(){Er.constructor_.apply(this,arguments)}static constructor_(){this._graph=null;const t=arguments[0];this._graph=t}findSubgraph(t){const e=new Br(this._graph);return this.addReachable(t,e),e}addEdges(t,e,i){t.setVisited(!0);for(let n=t.getOutEdges().iterator();n.hasNext();){const t=n.next();i.add(t.getEdge());const s=t.getToNode();s.isVisited()||e.push(s)}}addReachable(t,e){const i=new $i;for(i.add(t);!i.empty();){const t=i.pop();this.addEdges(t,i,e)}}getConnectedSubgraphs(){const t=new E;gr.setVisited(this._graph.nodeIterator(),!1);for(let e=this._graph.edgeIterator();e.hasNext();){const i=e.next().getDirEdge(0).getFromNode();i.isVisited()||t.add(this.findSubgraph(i))}return t}}class Sr{constructor(){Sr.constructor_.apply(this,arguments)}static constructor_(){this._graph=new Cr,this._factory=new Et,this._lineCount=0,this._isRun=!1,this._sequencedGeometry=null,this._isSequenceable=!1}static findUnvisitedBestOrientedDE(t){let e=null,i=null;for(let n=t.getOutEdges().iterator();n.hasNext();){const t=n.next();t.getEdge().isVisited()||(i=t,t.getEdgeDirection()&&(e=t))}return null!==e?e:i}static findLowestDegreeNode(t){let e=T.MAX_VALUE,i=null;for(let n=t.nodeIterator();n.hasNext();){const t=n.next();(null===i||t.getDegree()<e)&&(e=t.getDegree(),i=t)}return i}static isSequenced(t){if(!(t instanceof wt))return!0;const e=t,i=new lt;let n=null;const s=new E;for(let t=0;t<e.getNumGeometries();t++){const r=e.getGeometryN(t),o=r.getCoordinateN(0),a=r.getCoordinateN(r.getNumPoints()-1);if(i.contains(o))return!1;if(i.contains(a))return!1;null!==n&&(o.equals(n)||(i.addAll(s),s.clear())),s.add(o),s.add(a),n=a}return!0}static reverse(t){const e=t.getCoordinates(),i=new Array(e.length).fill(null),n=e.length;for(let t=0;t<n;t++)i[n-1-t]=new f(e[t]);return t.getFactory().createLineString(i)}static sequence(t){const e=new Sr;return e.add(t),e.getSequencedLineStrings()}computeSequence(){if(this._isRun)return null;this._isRun=!0;const t=this.findSequences();if(null===t)return null;this._sequencedGeometry=this.buildSequencedGeometry(t),this._isSequenceable=!0;const e=this._sequencedGeometry.getNumGeometries();c.isTrue(this._lineCount===e,"Lines were missing from result"),c.isTrue(this._sequencedGeometry instanceof tt||this._sequencedGeometry instanceof wt,"Result is not lineal")}findSequences(){const t=new E;for(let e=new Er(this._graph).getConnectedSubgraphs().iterator();e.hasNext();){const i=e.next();if(!this.hasSequence(i))return null;{const e=this.findSequence(i);t.add(e)}}return t}addReverseSubpath(t,e,i){const n=t.getToNode();let s=null;for(;;){e.add(t.getSym()),t.getEdge().setVisited(!0),s=t.getFromNode();const i=Sr.findUnvisitedBestOrientedDE(s);if(null===i)break;t=i.getSym()}i&&c.isTrue(s===n,"path not contiguous")}findSequence(t){gr.setVisited(t.edgeIterator(),!1);const e=Sr.findLowestDegreeNode(t).getOutEdges().iterator().next().getSym(),i=new Xi,n=i.listIterator();for(this.addReverseSubpath(e,n,!1);n.hasPrevious();){const t=n.previous(),e=Sr.findUnvisitedBestOrientedDE(t.getFromNode());null!==e&&this.addReverseSubpath(e.getSym(),n,!0)}return this.orient(i)}reverse(t){const e=new Xi;for(let i=t.iterator();i.hasNext();){const t=i.next();e.addFirst(t.getSym())}return e}add(){if(v(arguments[0],b))for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.add(e)}else arguments[0]instanceof Y&&arguments[0].apply(new class{get interfaces_(){return[z]}filter(t){t instanceof tt&&this.addLine(t)}})}addLine(t){null===this._factory&&(this._factory=t.getFactory()),this._graph.addEdge(t),this._lineCount++}hasSequence(t){let e=0;for(let i=t.nodeIterator();i.hasNext();)i.next().getDegree()%2==1&&e++;return e<=2}orient(t){const e=t.get(0),i=t.get(t.size()-1),n=e.getFromNode(),s=i.getToNode();let r=!1;if(1===n.getDegree()||1===s.getDegree()){let t=!1;1===i.getToNode().getDegree()&&!1===i.getEdgeDirection()&&(t=!0,r=!0),1===e.getFromNode().getDegree()&&!0===e.getEdgeDirection()&&(t=!0,r=!1),t||1===e.getFromNode().getDegree()&&(r=!0)}return r?this.reverse(t):t}buildSequencedGeometry(t){const e=new E;for(let i=t.iterator();i.hasNext();)for(let t=i.next().iterator();t.hasNext();){const i=t.next(),n=i.getEdge().getLine();let s=n;i.getEdgeDirection()||n.isClosed()||(s=Sr.reverse(n)),e.add(s)}return 0===e.size()?this._factory.createMultiLineString(new Array(0).fill(null)):this._factory.buildGeometry(e)}getSequencedLineStrings(){return this.computeSequence(),this._sequencedGeometry}isSequenceable(){return this.computeSequence(),this._isSequenceable}}var Fr=Object.freeze({__proto__:null,LineMerger:xr,LineSequencer:Sr}),Ir=Object.freeze({__proto__:null,GeometrySnapper:Un,LineStringSnapper:kn}),Lr=Object.freeze({__proto__:null,OverlayOp:os,snap:Ir});class Mr{constructor(){Mr.constructor_.apply(this,arguments)}static constructor_(){this._geometryFactory=new Et,this._geomGraph=null,this._disconnectedRingcoord=null;const t=arguments[0];this._geomGraph=t}static findDifferentPoint(t,e){for(let i=0;i<t.length;i++)if(!t[i].equals(e))return t[i];return null}visitInteriorRing(t,e){if(t.isEmpty())return null;const i=t.getCoordinates(),n=i[0],s=Mr.findDifferentPoint(i,n),r=e.findEdgeInSameDirection(n,s),o=e.findEdgeEnd(r);let a=null;o.getLabel().getLocation(0,ji.RIGHT)===qt.INTERIOR?a=o:o.getSym().getLabel().getLocation(0,ji.RIGHT)===qt.INTERIOR&&(a=o.getSym()),c.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)}visitShellInteriors(t,e){if(t instanceof xt){const i=t;this.visitInteriorRing(i.getExteriorRing(),e)}if(t instanceof dt){const i=t;for(let t=0;t<i.getNumGeometries();t++){const n=i.getGeometryN(t);this.visitInteriorRing(n.getExteriorRing(),e)}}}getCoordinate(){return this._disconnectedRingcoord}setInteriorEdgesInResult(t){for(let e=t.getEdgeEnds().iterator();e.hasNext();){const t=e.next();t.getLabel().getLocation(0,ji.RIGHT)===qt.INTERIOR&&t.setInResult(!0)}}visitLinkedDirectedEdges(t){const e=t;let i=t;do{c.isTrue(null!==i,"found null Directed Edge"),i.setVisited(!0),i=i.getNext()}while(i!==e)}buildEdgeRings(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next();if(t.isInResult()&&null===t.getEdgeRing()){const i=new gn(t,this._geometryFactory);i.linkDirectedEdgesForMinimalEdgeRings();const n=i.buildMinimalRings();e.addAll(n)}}return e}hasUnvisitedShellEdge(t){for(let e=0;e<t.size();e++){const i=t.get(e);if(i.isHole())continue;const n=i.getEdges();let s=n.get(0);if(s.getLabel().getLocation(0,ji.RIGHT)===qt.INTERIOR)for(let t=0;t<n.size();t++)if(s=n.get(t),!s.isVisited())return this._disconnectedRingcoord=s.getCoordinate(),!0}return!1}isInteriorsConnected(){const t=new E;this._geomGraph.computeSplitEdges(t);const e=new hn(new vn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();const i=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this._geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(i)}}class Tr{computeEdgeEnds(){if(1===arguments.length){const t=arguments[0],e=new E;for(let i=t;i.hasNext();){const t=i.next();this.computeEdgeEnds(t,e)}return e}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=t.getEdgeIntersectionList();i.addEndpoints();const n=i.iterator();let s=null,r=null;if(!n.hasNext())return null;let o=n.next();do{s=r,r=o,o=null,n.hasNext()&&(o=n.next()),null!==r&&(this.createEdgeEndForPrev(t,e,r,s),this.createEdgeEndForNext(t,e,r,o))}while(null!==r)}}createEdgeEndForNext(t,e,i,n){const s=i.segmentIndex+1;if(s>=t.getNumPoints()&&null===n)return null;let r=t.getCoordinate(s);null!==n&&n.segmentIndex===i.segmentIndex&&(r=n.coord);const o=new An(t,i.coord,r,new sn(t.getLabel()));e.add(o)}createEdgeEndForPrev(t,e,i,n){let s=i.segmentIndex;if(0===i.dist){if(0===s)return null;s--}let r=t.getCoordinate(s);null!==n&&n.segmentIndex>=s&&(r=n.coord);const o=new sn(t.getLabel());o.flip();const a=new An(t,i.coord,r,o);e.add(a)}}class Rr extends An{constructor(){super(),Rr.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new E,1===arguments.length){const t=arguments[0];Rr.constructor_.call(this,null,t)}else if(2===arguments.length){const t=arguments[1];An.constructor_.call(this,t.getEdge(),t.getCoordinate(),t.getDirectedCoordinate(),new sn(t.getLabel())),this.insert(t)}}insert(t){this._edgeEnds.add(t)}print(t){t.println("EdgeEndBundle--\x3e Label: "+this._label);for(let e=this.iterator();e.hasNext();)e.next().print(t),t.println()}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(t,e){let i=0,n=!1;for(let e=this.iterator();e.hasNext();){const s=e.next().getLabel().getLocation(t);s===qt.BOUNDARY&&i++,s===qt.INTERIOR&&(n=!0)}let s=qt.NONE;n&&(s=qt.INTERIOR),i>0&&(s=ss.determineBoundary(e,i)),this._label.setLocation(t,s)}computeLabelSide(t,e){for(let i=this.iterator();i.hasNext();){const n=i.next();if(n.getLabel().isArea()){const i=n.getLabel().getLocation(t,e);if(i===qt.INTERIOR)return this._label.setLocation(t,e,qt.INTERIOR),null;i===qt.EXTERIOR&&this._label.setLocation(t,e,qt.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(t){this.computeLabelSide(t,ji.LEFT),this.computeLabelSide(t,ji.RIGHT)}updateIM(t){Mn.updateIM(this._label,t)}computeLabel(t){let e=!1;for(let t=this.iterator();t.hasNext();)t.next().getLabel().isArea()&&(e=!0);this._label=e?new sn(qt.NONE,qt.NONE,qt.NONE):new sn(qt.NONE);for(let i=0;i<2;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)}}class kr extends yn{constructor(){super()}updateIM(t){for(let e=this.iterator();e.hasNext();)e.next().updateIM(t)}insert(t){let e=this._edgeMap.get(t);null===e?(e=new Rr(t),this.insertEdgeEnd(t,e)):e.insert(t)}}class Ur extends on{constructor(){super(),Ur.constructor_.apply(this,arguments)}static constructor_(){const t=arguments[0],e=arguments[1];on.constructor_.call(this,t,e)}computeIM(t){t.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}updateIMFromEdges(t){this._edges.updateIM(t)}}class Dr extends ln{constructor(){super()}createNode(t){return new Ur(t,new kr)}}class Or{constructor(){Or.constructor_.apply(this,arguments)}static constructor_(){this._nodes=new an(new Dr)}insertEdgeEnds(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._nodes.add(t)}}getNodeIterator(){return this._nodes.iterator()}copyNodesAndLabels(t,e){for(let i=t.getNodeIterator();i.hasNext();){const t=i.next();this._nodes.addNode(t.getCoordinate()).setLabel(e,t.getLabel().getLocation(e))}}build(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);const e=(new Tr).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)}computeIntersectionNodes(t,e){for(let i=t.getEdgeIterator();i.hasNext();){const t=i.next(),n=t.getLabel().getLocation(e);for(let i=t.getEdgeIntersectionList().iterator();i.hasNext();){const t=i.next(),s=this._nodes.addNode(t.coord);n===qt.BOUNDARY?s.setLabelBoundary(e):s.getLabel().isNull(e)&&s.setLabel(e,qt.INTERIOR)}}}}class Pr{constructor(){Pr.constructor_.apply(this,arguments)}static constructor_(){this._li=new Yt,this._geomGraph=null,this._nodeGraph=new Or,this._invalidPoint=null;const t=arguments[0];this._geomGraph=t}isNodeEdgeAreaLabelsConsistent(){for(let t=this._nodeGraph.getNodeIterator();t.hasNext();){const e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this._geomGraph))return this._invalidPoint=e.getCoordinate().copy(),!1}return!0}hasDuplicateRings(){for(let t=this._nodeGraph.getNodeIterator();t.hasNext();)for(let e=t.next().getEdges().iterator();e.hasNext();){const t=e.next();if(t.getEdgeEnds().size()>1)return this._invalidPoint=t.getEdge().getCoordinate(0),!0}return!1}isNodeConsistentArea(){const t=this._geomGraph.computeSelfNodes(this._li,!0,!0);return t.hasProperIntersection()?(this._invalidPoint=t.getProperIntersectionPoint(),!1):(this._nodeGraph.build(this._geomGraph),this.isNodeEdgeAreaLabelsConsistent())}getInvalidPoint(){return this._invalidPoint}}class Nr{constructor(){Nr.constructor_.apply(this,arguments)}static constructor_(){this._graph=null,this._rings=new E,this._totalEnv=new L,this._index=null,this._nestedPt=null;const t=arguments[0];this._graph=t}add(t){this._rings.add(t),this._totalEnv.expandToInclude(t.getEnvelopeInternal())}getNestedPoint(){return this._nestedPt}buildIndex(){this._index=new Li;for(let t=0;t<this._rings.size();t++){const e=this._rings.get(t),i=e.getEnvelopeInternal();this._index.insert(i,e)}}isNonNested(){this.buildIndex();for(let t=0;t<this._rings.size();t++){const e=this._rings.get(t),i=e.getCoordinates(),n=this._index.query(e.getEnvelopeInternal());for(let t=0;t<n.size();t++){const s=n.get(t),r=s.getCoordinates();if(e===s)continue;if(!e.getEnvelopeInternal().intersects(s.getEnvelopeInternal()))continue;const o=Hr.findPtNotNode(i,s,this._graph);if(null!==o&&Ke.isInRing(o,r))return this._nestedPt=o,!1}}return!0}}class Qr{constructor(){Qr.constructor_.apply(this,arguments)}static constructor_(){if(this._errorType=null,this._pt=null,1===arguments.length){const t=arguments[0];Qr.constructor_.call(this,t,null)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._errorType=t,null!==e&&(this._pt=e.copy())}}getCoordinate(){return this._pt}getMessage(){return Qr.errMsg[this._errorType]}toString(){let t="";return null!==this._pt&&(t=" at or near point "+this._pt),this.getMessage()+t}getErrorType(){return this._errorType}}Qr.ERROR=0,Qr.REPEATED_POINT=1,Qr.HOLE_OUTSIDE_SHELL=2,Qr.NESTED_HOLES=3,Qr.DISCONNECTED_INTERIOR=4,Qr.SELF_INTERSECTION=5,Qr.RING_SELF_INTERSECTION=6,Qr.NESTED_SHELLS=7,Qr.DUPLICATE_RINGS=8,Qr.TOO_FEW_POINTS=9,Qr.INVALID_COORDINATE=10,Qr.RING_NOT_CLOSED=11,Qr.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"];class Hr{constructor(){Hr.constructor_.apply(this,arguments)}static constructor_(){this._parentGeometry=null,this._isSelfTouchingRingFormingHoleValid=!1,this._validErr=null;const t=arguments[0];this._parentGeometry=t}static findPtNotNode(t,e,i){const n=i.findEdge(e).getEdgeIntersectionList();for(let e=0;e<t.length;e++){const i=t[e];if(!n.isIntersection(i))return i}return null}static isValid(){if(arguments[0]instanceof Y)return new Hr(arguments[0]).isValid();if(arguments[0]instanceof f){const t=arguments[0];return!(r.isNaN(t.x)||r.isInfinite(t.x)||r.isNaN(t.y)||r.isInfinite(t.y))}}checkInvalidCoordinates(){if(arguments[0]instanceof Array){const t=arguments[0];for(let e=0;e<t.length;e++)if(!Hr.isValid(t[e]))return this._validErr=new Qr(Qr.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof xt){const t=arguments[0];if(this.checkInvalidCoordinates(t.getExteriorRing().getCoordinates()),null!==this._validErr)return null;for(let e=0;e<t.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(t.getInteriorRingN(e).getCoordinates()),null!==this._validErr)return null}}checkHolesNotNested(t,e){if(t.getNumInteriorRing()<=0)return null;const i=new Nr(e);for(let e=0;e<t.getNumInteriorRing();e++){const n=t.getInteriorRingN(e);n.isEmpty()||i.add(n)}i.isNonNested()||(this._validErr=new Qr(Qr.NESTED_HOLES,i.getNestedPoint()))}checkConsistentArea(t){const e=new Pr(t);if(!e.isNodeConsistentArea())return this._validErr=new Qr(Qr.SELF_INTERSECTION,e.getInvalidPoint()),null;e.hasDuplicateRings()&&(this._validErr=new Qr(Qr.DUPLICATE_RINGS,e.getInvalidPoint()))}isValid(){return this.checkValid(this._parentGeometry),null===this._validErr}checkShellInsideHole(t,e,i){const n=t.getCoordinates(),s=e.getCoordinates(),r=Hr.findPtNotNode(n,e,i);if(null!==r&&!Ke.isInRing(r,s))return r;const o=Hr.findPtNotNode(s,t,i);return null!==o?Ke.isInRing(o,n)?o:null:(c.shouldNeverReachHere("points in shell and hole appear to be equal"),null)}checkNoSelfIntersectingRings(t){for(let e=t.getEdgeIterator();e.hasNext();){const t=e.next();if(this.checkNoSelfIntersectingRing(t.getEdgeIntersectionList()),null!==this._validErr)return null}}checkHolesInShell(t,e){if(t.getNumInteriorRing()<=0)return null;const i=t.getExteriorRing(),n=i.isEmpty(),s=new Ge(i);for(let r=0;r<t.getNumInteriorRing();r++){const o=t.getInteriorRingN(r);let a=null;if(!o.isEmpty()){if(a=Hr.findPtNotNode(o.getCoordinates(),i,e),null===a)return null;if(n||qt.EXTERIOR===s.locate(a))return this._validErr=new Qr(Qr.HOLE_OUTSIDE_SHELL,a),null}}}checkShellNotNested(t,e,i){const n=t.getCoordinates(),s=e.getExteriorRing();if(s.isEmpty())return null;const r=s.getCoordinates(),o=Hr.findPtNotNode(n,s,i);if(null===o)return null;if(!Ke.isInRing(o,r))return null;if(e.getNumInteriorRing()<=0)return this._validErr=new Qr(Qr.NESTED_SHELLS,o),null;let a=null;for(let n=0;n<e.getNumInteriorRing();n++){const s=e.getInteriorRingN(n);if(a=this.checkShellInsideHole(t,s,i),null===a)return null}this._validErr=new Qr(Qr.NESTED_SHELLS,a)}checkClosedRings(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this._validErr)return null;for(let e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this._validErr)return null}checkConnectedInteriors(t){const e=new Mr(t);e.isInteriorsConnected()||(this._validErr=new Qr(Qr.DISCONNECTED_INTERIOR,e.getCoordinate()))}checkNoSelfIntersectingRing(t){const e=new lt;let i=!0;for(let n=t.iterator();n.hasNext();){const t=n.next();if(i)i=!1;else{if(e.contains(t.coord))return this._validErr=new Qr(Qr.RING_SELF_INTERSECTION,t.coord),null;e.add(t.coord)}}}checkTooFewPoints(t){if(t.hasTooFewPoints())return this._validErr=new Qr(Qr.TOO_FEW_POINTS,t.getInvalidPoint()),null}getValidationError(){return this.checkValid(this._parentGeometry),this._validErr}checkValid(){if(arguments[0]instanceof bt){const t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Bt){const t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof et){const t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;if(this.checkClosedRing(t),null!==this._validErr)return null;const e=new ss(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;const i=new Yt;e.computeSelfNodes(i,!0,!0),this.checkNoSelfIntersectingRings(e)}else if(arguments[0]instanceof tt){const t=arguments[0];if(this.checkInvalidCoordinates(t.getCoordinates()),null!==this._validErr)return null;const e=new ss(0,t);this.checkTooFewPoints(e)}else if(arguments[0]instanceof xt){const t=arguments[0];if(this.checkInvalidCoordinates(t),null!==this._validErr)return null;if(this.checkClosedRings(t),null!==this._validErr)return null;const e=new ss(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;if(this.checkConsistentArea(e),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(e),null!==this._validErr))return null;if(this.checkHolesInShell(t,e),null!==this._validErr)return null;if(this.checkHolesNotNested(t,e),null!==this._validErr)return null;this.checkConnectedInteriors(e)}else if(arguments[0]instanceof dt){const t=arguments[0];for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);if(this.checkInvalidCoordinates(i),null!==this._validErr)return null;if(this.checkClosedRings(i),null!==this._validErr)return null}const e=new ss(0,t);if(this.checkTooFewPoints(e),null!==this._validErr)return null;if(this.checkConsistentArea(e),null!==this._validErr)return null;if(!this._isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(e),null!==this._validErr))return null;for(let i=0;i<t.getNumGeometries();i++){const n=t.getGeometryN(i);if(this.checkHolesInShell(n,e),null!==this._validErr)return null}for(let i=0;i<t.getNumGeometries();i++){const n=t.getGeometryN(i);if(this.checkHolesNotNested(n,e),null!==this._validErr)return null}if(this.checkShellsNotNested(t,e),null!==this._validErr)return null;this.checkConnectedInteriors(e)}else if(arguments[0]instanceof ht){const t=arguments[0];for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);if(this.checkValid(i),null!==this._validErr)return null}}else if(arguments[0]instanceof Y){const t=arguments[0];if(this._validErr=null,t.isEmpty())return null;if(t instanceof bt)this.checkValid(t);else if(t instanceof Bt)this.checkValid(t);else if(t instanceof et)this.checkValid(t);else if(t instanceof tt)this.checkValid(t);else if(t instanceof xt)this.checkValid(t);else if(t instanceof dt)this.checkValid(t);else{if(!(t instanceof ht))throw new K(t.getGeometryType());this.checkValid(t)}}}setSelfTouchingRingFormingHoleValid(t){this._isSelfTouchingRingFormingHoleValid=t}checkClosedRing(t){if(t.isEmpty())return null;if(!t.isClosed()){let e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this._validErr=new Qr(Qr.RING_NOT_CLOSED,e)}}checkShellsNotNested(t,e){for(let i=0;i<t.getNumGeometries();i++){const n=t.getGeometryN(i).getExteriorRing();for(let s=0;s<t.getNumGeometries();s++){if(i===s)continue;const r=t.getGeometryN(s);if(this.checkShellNotNested(n,r,e),null!==this._validErr)return null}}}}class Gr{constructor(){Gr.constructor_.apply(this,arguments)}static constructor_(){this._factory=null,this._deList=new E,this._lowestEdge=null,this._ring=null,this._locator=null,this._ringPts=null,this._holes=null,this._shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;const t=arguments[0];this._factory=t}static findEdgeRingContaining(t,e){const i=t.getRing(),n=i.getEnvelopeInternal();let s=i.getCoordinateN(0),r=null,o=null;for(let t=e.iterator();t.hasNext();){const e=t.next(),a=e.getRing().getEnvelopeInternal();a.equals(n)||a.contains(n)&&(s=W.ptNotInList(i.getCoordinates(),e.getCoordinates()),e.isInRing(s)&&(null===r||o.contains(a))&&(r=e,o=r.getRing().getEnvelopeInternal()))}return r}static addEdge(t,e,i){if(e)for(let e=0;e<t.length;e++)i.add(t[e],!1);else for(let e=t.length-1;e>=0;e--)i.add(t[e],!1)}static findDirEdgesInRing(t){let e=t;const i=new E;do{i.add(e),e=e.getNext(),c.isTrue(null!==e,"found null DE in ring"),c.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return i}isIncluded(){return this._isIncluded}getCoordinates(){if(null===this._ringPts){const t=new F;for(let e=this._deList.iterator();e.hasNext();){const i=e.next(),n=i.getEdge();Gr.addEdge(n.getLine().getCoordinates(),i.getEdgeDirection(),t)}this._ringPts=t.toCoordinateArray()}return this._ringPts}build(t){let e=t;do{this.add(e),e.setRing(this),e=e.getNext(),c.isTrue(null!==e,"found null DE in ring"),c.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)}isInRing(t){return qt.EXTERIOR!==this.getLocator().locate(t)}addHole(){if(arguments[0]instanceof et){const t=arguments[0];null===this._holes&&(this._holes=new E),this._holes.add(t)}else if(arguments[0]instanceof Gr){const t=arguments[0];t.setShell(this);const e=t.getRing();null===this._holes&&(this._holes=new E),this._holes.add(e)}}computeHole(){const t=this.getRing();this._isHole=P.isCCW(t.getCoordinates())}getLocator(){return null===this._locator&&(this._locator=new Ge(this.getRing())),this._locator}getShell(){return this.isHole()?this._shell:this}updateIncluded(){if(this.isHole())return null;for(let t=0;t<this._deList.size();t++){const e=this._deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}}setShell(t){this._shell=t}setProcessed(t){this._isProcessed=t}isIncludedSet(){return this._isIncludedSet}isValid(){return this.getCoordinates(),!(this._ringPts.length<=3)&&(this.getRing(),Hr.isValid(this._ring))}isOuterHole(){return!!this._isHole&&!this.hasShell()}getPolygon(){let t=null;if(null!==this._holes){t=new Array(this._holes.size()).fill(null);for(let e=0;e<this._holes.size();e++)t[e]=this._holes.get(e)}return this._factory.createPolygon(this._ring,t)}isHole(){return this._isHole}isProcessed(){return this._isProcessed}setIncluded(t){this._isIncluded=t,this._isIncludedSet=!0}getOuterHole(){if(this.isHole())return null;for(let t=0;t<this._deList.size();t++){const e=this._deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null}hasShell(){return null!==this._shell}isOuterShell(){return null!==this.getOuterHole()}getLineString(){return this.getCoordinates(),this._factory.createLineString(this._ringPts)}toString(){return Wt.toLineString(new st(this.getCoordinates()))}add(t){this._deList.add(t)}getRing(){if(null!==this._ring)return this._ring;this.getCoordinates(),this._ringPts.length<3&&Q.out.println(this._ringPts);try{this._ring=this._factory.createLinearRing(this._ringPts)}catch(t){if(!(t instanceof i))throw t;Q.out.println(this._ringPts)}return this._ring}}Gr.EnvelopeComparator=class{compare(t,e){const i=e;return t.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())}get interfaces_(){return[u]}};class Vr{constructor(){Vr.constructor_.apply(this,arguments)}static constructor_(){this._shells=null,this._shellIndex=null;const t=arguments[0];this._shells=t,this.buildIndex()}static assignHolesToShells(t,e){new Vr(e).assignHolesToShells(t)}assignHolesToShells(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this.assignHoleToShell(t)}}buildIndex(){this._shellIndex=new Li;for(const t of this._shells)this._shellIndex.insert(t.getRing().getEnvelopeInternal(),t)}queryOverlappingShells(t){return this._shellIndex.query(t)}findShellContaining(t){const e=t.getRing().getEnvelopeInternal(),i=this.queryOverlappingShells(e);return Gr.findEdgeRingContaining(t,i)}assignHoleToShell(t){const e=this.findShellContaining(t);null!==e&&e.addHole(t)}}class zr extends pr{constructor(){super(),zr.constructor_.apply(this,arguments)}static constructor_(){this._edgeRing=null,this._next=null,this._label=-1;const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];pr.constructor_.call(this,t,e,i,n)}getNext(){return this._next}isInRing(){return null!==this._edgeRing}setRing(t){this._edgeRing=t}setLabel(t){this._label=t}getLabel(){return this._label}setNext(t){this._next=t}getRing(){return this._edgeRing}}class Kr extends mr{constructor(){super(),Kr.constructor_.apply(this,arguments)}static constructor_(){this._line=null;const t=arguments[0];this._line=t}getLine(){return this._line}}class jr extends br{constructor(){super(),jr.constructor_.apply(this,arguments)}static constructor_(){this._factory=null;const t=arguments[0];this._factory=t}static findLabeledEdgeRings(t){const e=new E;let i=1;for(let n=t.iterator();n.hasNext();){const t=n.next();if(t.isMarked())continue;if(t.getLabel()>=0)continue;e.add(t);const s=Gr.findDirEdgesInRing(t);jr.label(s,i),i++}return e}static getDegreeNonDeleted(t){let e=0;for(let i=t.getOutEdges().getEdges().iterator();i.hasNext();)i.next().isMarked()||e++;return e}static deleteAllEdges(t){for(let e=t.getOutEdges().getEdges().iterator();e.hasNext();){const t=e.next();t.setMarked(!0);const i=t.getSym();null!==i&&i.setMarked(!0)}}static label(t,e){for(let i=t.iterator();i.hasNext();)i.next().setLabel(e)}static computeNextCWEdges(t){let e=null,i=null;for(let n=t.getOutEdges().getEdges().iterator();n.hasNext();){const t=n.next();t.isMarked()||(null===e&&(e=t),null!==i&&i.getSym().setNext(t),i=t)}null!==i&&i.getSym().setNext(e)}static computeNextCCWEdges(t,e){let i=null,n=null;const s=t.getOutEdges().getEdges();for(let t=s.size()-1;t>=0;t--){const r=s.get(t),o=r.getSym();let a=null;r.getLabel()===e&&(a=r);let l=null;o.getLabel()===e&&(l=o),null===a&&null===l||(null!==l&&(n=l),null!==a&&(null!==n&&(n.setNext(a),n=null),null===i&&(i=a)))}null!==n&&(c.isTrue(null!==i),n.setNext(i))}static getDegree(t,e){let i=0;for(let n=t.getOutEdges().getEdges().iterator();n.hasNext();)n.next().getLabel()===e&&i++;return i}static findIntersectionNodes(t,e){let i=t,n=null;do{const s=i.getFromNode();jr.getDegree(s,e)>1&&(null===n&&(n=new E),n.add(s)),i=i.getNext(),c.isTrue(null!==i,"found null DE in ring"),c.isTrue(i===t||!i.isInRing(),"found DE already in ring")}while(i!==t);return n}findEdgeRing(t){const e=new Gr(this._factory);return e.build(t),e}computeDepthParity(){if(0===arguments.length)for(;;)return null}computeNextCWEdges(){for(let t=this.nodeIterator();t.hasNext();){const e=t.next();jr.computeNextCWEdges(e)}}addEdge(t){if(t.isEmpty())return null;const e=W.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;const i=e[0],n=e[e.length-1],s=this.getNode(i),r=this.getNode(n),o=new zr(s,r,e[1],!0),a=new zr(r,s,e[e.length-2],!1),l=new Kr(t);l.setDirectedEdges(o,a),this.add(l)}deleteCutEdges(){this.computeNextCWEdges(),jr.findLabeledEdgeRings(this._dirEdges);const t=new E;for(let e=this._dirEdges.iterator();e.hasNext();){const i=e.next();if(i.isMarked())continue;const n=i.getSym();if(i.getLabel()===n.getLabel()){i.setMarked(!0),n.setMarked(!0);const e=i.getEdge();t.add(e.getLine())}}return t}getEdgeRings(){this.computeNextCWEdges(),jr.label(this._dirEdges,-1);const t=jr.findLabeledEdgeRings(this._dirEdges);this.convertMaximalToMinimalEdgeRings(t);const e=new E;for(let t=this._dirEdges.iterator();t.hasNext();){const i=t.next();if(i.isMarked())continue;if(i.isInRing())continue;const n=this.findEdgeRing(i);e.add(n)}return e}getNode(t){let e=this.findNode(t);return null===e&&(e=new yr(t),this.add(e)),e}convertMaximalToMinimalEdgeRings(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),i=t.getLabel(),n=jr.findIntersectionNodes(t,i);if(null!==n)for(let t=n.iterator();t.hasNext();){const e=t.next();jr.computeNextCCWEdges(e,i)}}}deleteDangles(){const t=this.findNodesOfDegree(1),e=new pt,i=new $i;for(let e=t.iterator();e.hasNext();)i.push(e.next());for(;!i.isEmpty();){const t=i.pop();jr.deleteAllEdges(t);for(let n=t.getOutEdges().getEdges().iterator();n.hasNext();){const t=n.next();t.setMarked(!0);const s=t.getSym();null!==s&&s.setMarked(!0);const r=t.getEdge();e.add(r.getLine());const o=t.getToNode();1===jr.getDegreeNonDeleted(o)&&i.push(o)}}return e}}class Wr{constructor(){Wr.constructor_.apply(this,arguments)}static constructor_(){if(this._lineStringAdder=new $r(this),this._graph=null,this._dangles=new E,this._cutEdges=new E,this._invalidRingLines=new E,this._holeList=null,this._shellList=null,this._polyList=null,this._isCheckingRingsValid=!0,this._extractOnlyPolygonal=null,this._geomFactory=null,0===arguments.length)Wr.constructor_.call(this,!1);else if(1===arguments.length){const t=arguments[0];this._extractOnlyPolygonal=t}}static findOuterShells(t){for(let e=t.iterator();e.hasNext();){const t=e.next(),i=t.getOuterHole();null===i||i.isProcessed()||(t.setIncluded(!0),i.setProcessed(!0))}}static extractPolygons(t,e){const i=new E;for(let n=t.iterator();n.hasNext();){const t=n.next();(e||t.isIncluded())&&i.add(t.getPolygon())}return i}static findDisjointShells(t){Wr.findOuterShells(t);let e=null;do{e=!1;for(let i=t.iterator();i.hasNext();){const t=i.next();t.isIncludedSet()||(t.updateIncluded(),t.isIncludedSet()||(e=!0))}}while(e)}getGeometry(){return null===this._geomFactory&&(this._geomFactory=new Et),this.polygonize(),this._extractOnlyPolygonal?this._geomFactory.buildGeometry(this._polyList):this._geomFactory.createGeometryCollection(Et.toGeometryArray(this._polyList))}getInvalidRingLines(){return this.polygonize(),this._invalidRingLines}findValidRings(t,e,i){for(let n=t.iterator();n.hasNext();){const t=n.next();t.isValid()?e.add(t):i.add(t.getLineString())}}polygonize(){if(null!==this._polyList)return null;if(this._polyList=new E,null===this._graph)return null;this._dangles=this._graph.deleteDangles(),this._cutEdges=this._graph.deleteCutEdges();const t=this._graph.getEdgeRings();let e=new E;this._invalidRingLines=new E,this._isCheckingRingsValid?this.findValidRings(t,e,this._invalidRingLines):e=t,this.findShellsAndHoles(e),Vr.assignHolesToShells(this._holeList,this._shellList),ye.sort(this._shellList,new Gr.EnvelopeComparator);let i=!0;this._extractOnlyPolygonal&&(Wr.findDisjointShells(this._shellList),i=!1),this._polyList=Wr.extractPolygons(this._shellList,i)}getDangles(){return this.polygonize(),this._dangles}add(){if(v(arguments[0],b))for(let t=arguments[0].iterator();t.hasNext();){const e=t.next();this.add(e)}else if(arguments[0]instanceof tt){const t=arguments[0];this._geomFactory=t.getFactory(),null===this._graph&&(this._graph=new jr(this._geomFactory)),this._graph.addEdge(t)}else arguments[0]instanceof Y&&arguments[0].apply(this._lineStringAdder)}setCheckRingsValid(t){this._isCheckingRingsValid=t}findShellsAndHoles(t){this._holeList=new E,this._shellList=new E;for(let e=t.iterator();e.hasNext();){const t=e.next();t.computeHole(),t.isHole()?this._holeList.add(t):this._shellList.add(t)}}getCutEdges(){return this.polygonize(),this._cutEdges}getPolygons(){return this.polygonize(),this._polyList}}class $r{constructor(){$r.constructor_.apply(this,arguments)}static constructor_(){this.p=null;const t=arguments[0];this.p=t}filter(t){t instanceof tt&&this.p.add(t)}get interfaces_(){return[z]}}Wr.LineStringAdder=$r;var Yr=Object.freeze({__proto__:null,Polygonizer:Wr});class Xr{constructor(){Xr.constructor_.apply(this,arguments)}static constructor_(){this._li=new Yt,this._ptLocator=new $n,this._arg=null,this._nodes=new an(new Dr),this._im=null,this._isolatedEdges=new E,this._invalidPoint=null;const t=arguments[0];this._arg=t}insertEdgeEnds(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this._nodes.add(t)}}computeProperIntersectionIM(t,e){const i=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),s=t.hasProperIntersection(),r=t.hasProperInteriorIntersection();2===i&&2===n?s&&e.setAtLeast("212101212"):2===i&&1===n?(s&&e.setAtLeast("FFF0FFFF2"),r&&e.setAtLeast("1FFFFF1FF")):1===i&&2===n?(s&&e.setAtLeast("F0FFFFFF2"),r&&e.setAtLeast("1F1FFFFFF")):1===i&&1===n&&r&&e.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(t,e){for(let i=this._arg[t].getEdgeIterator();i.hasNext();){const t=i.next();t.isIsolated()&&(this.labelIsolatedEdge(t,e,this._arg[e].getGeometry()),this._isolatedEdges.add(t))}}labelIsolatedEdge(t,e,i){if(i.getDimension()>0){const n=this._ptLocator.locate(t.getCoordinate(),i);t.getLabel().setAllLocations(e,n)}else t.getLabel().setAllLocations(e,qt.EXTERIOR)}computeIM(){const t=new Zt;if(t.set(qt.EXTERIOR,qt.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);const e=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);const i=new Tr,n=i.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);const s=i.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t}labelNodeEdges(){for(let t=this._nodes.iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg)}copyNodesAndLabels(t){for(let e=this._arg[t].getNodeIterator();e.hasNext();){const i=e.next();this._nodes.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}}labelIntersectionNodes(t){for(let e=this._arg[t].getEdgeIterator();e.hasNext();){const i=e.next(),n=i.getLabel().getLocation(t);for(let e=i.getEdgeIntersectionList().iterator();e.hasNext();){const i=e.next(),s=this._nodes.find(i.coord);s.getLabel().isNull(t)&&(n===qt.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,qt.INTERIOR))}}}labelIsolatedNode(t,e){const i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setAllLocations(e,i)}computeIntersectionNodes(t){for(let e=this._arg[t].getEdgeIterator();e.hasNext();){const i=e.next(),n=i.getLabel().getLocation(t);for(let e=i.getEdgeIntersectionList().iterator();e.hasNext();){const i=e.next(),s=this._nodes.addNode(i.coord);n===qt.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,qt.INTERIOR)}}}labelIsolatedNodes(){for(let t=this._nodes.iterator();t.hasNext();){const e=t.next(),i=e.getLabel();c.isTrue(i.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(i.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}}updateIM(t){for(let e=this._isolatedEdges.iterator();e.hasNext();)e.next().updateIM(t);for(let e=this._nodes.iterator();e.hasNext();){const i=e.next();i.updateIM(t),i.updateIMFromEdges(t)}}computeDisjointIM(t){const e=this._arg[0].getGeometry();e.isEmpty()||(t.set(qt.INTERIOR,qt.EXTERIOR,e.getDimension()),t.set(qt.BOUNDARY,qt.EXTERIOR,e.getBoundaryDimension()));const i=this._arg[1].getGeometry();i.isEmpty()||(t.set(qt.EXTERIOR,qt.INTERIOR,i.getDimension()),t.set(qt.EXTERIOR,qt.BOUNDARY,i.getBoundaryDimension()))}}class qr{constructor(){qr.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null;const t=arguments[0];this._rectEnv=t.getEnvelopeInternal()}static contains(t,e){return new qr(t).contains(e)}isContainedInBoundary(t){if(t instanceof xt)return!1;if(t instanceof bt)return this.isPointContainedInBoundary(t);if(t instanceof tt)return this.isLineStringContainedInBoundary(t);for(let e=0;e<t.getNumGeometries();e++){const i=t.getGeometryN(e);if(!this.isContainedInBoundary(i))return!1}return!0}isLineSegmentContainedInBoundary(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(t){const e=t.getCoordinateSequence(),i=new f,n=new f;for(let t=0;t<e.size()-1;t++)if(e.getCoordinate(t,i),e.getCoordinate(t+1,n),!this.isLineSegmentContainedInBoundary(i,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof bt){const t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof f){const t=arguments[0];return t.x===this._rectEnv.getMinX()||t.x===this._rectEnv.getMaxX()||t.y===this._rectEnv.getMinY()||t.y===this._rectEnv.getMaxY()}}contains(t){return!!this._rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)}}class Zr{constructor(){Zr.constructor_.apply(this,arguments)}static constructor_(){this._li=new Yt,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;const t=arguments[0];this._rectEnv=t,this._diagUp0=new f(t.getMinX(),t.getMinY()),this._diagUp1=new f(t.getMaxX(),t.getMaxY()),this._diagDown0=new f(t.getMinX(),t.getMaxY()),this._diagDown1=new f(t.getMaxX(),t.getMinY())}intersects(t,e){const i=new L(t,e);if(!this._rectEnv.intersects(i))return!1;if(this._rectEnv.intersects(t))return!0;if(this._rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){const i=t;t=e,e=i}let n=!1;return e.y>t.y&&(n=!0),n?this._li.computeIntersection(t,e,this._diagDown0,this._diagDown1):this._li.computeIntersection(t,e,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}}class Jr{constructor(){Jr.constructor_.apply(this,arguments)}static constructor_(){this._rectangle=null,this._rectEnv=null;const t=arguments[0];this._rectangle=t,this._rectEnv=t.getEnvelopeInternal()}static intersects(t,e){return new Jr(t).intersects(e)}intersects(t){if(!this._rectEnv.intersects(t.getEnvelopeInternal()))return!1;const e=new to(this._rectEnv);if(e.applyTo(t),e.intersects())return!0;const i=new eo(this._rectangle);if(i.applyTo(t),i.containsPoint())return!0;const n=new io(this._rectangle);return n.applyTo(t),!!n.intersects()}}class to extends be{constructor(){super(),to.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._intersects=!1;const t=arguments[0];this._rectEnv=t}intersects(){return this._intersects}visit(t){const e=t.getEnvelopeInternal();return this._rectEnv.intersects(e)?this._rectEnv.contains(e)||e.getMinX()>=this._rectEnv.getMinX()&&e.getMaxX()<=this._rectEnv.getMaxX()||e.getMinY()>=this._rectEnv.getMinY()&&e.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}isDone(){return!0===this._intersects}}class eo extends be{constructor(){super(),eo.constructor_.apply(this,arguments)}static constructor_(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;const t=arguments[0];this._rectSeq=t.getExteriorRing().getCoordinateSequence(),this._rectEnv=t.getEnvelopeInternal()}visit(t){if(!(t instanceof xt))return null;const e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;const i=new f;for(let n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,i),e.contains(i)&&$e.containsPointInPolygon(i,t))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}isDone(){return!0===this._containsPoint}}class io extends be{constructor(){super(),io.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new f,this._p1=new f;const t=arguments[0];this._rectEnv=t.getEnvelopeInternal(),this._rectIntersector=new Zr(this._rectEnv)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(t){const e=t.getEnvelopeInternal();if(!this._rectEnv.intersects(e))return null;const i=_e.getLines(t);this.checkIntersectionWithLineStrings(i)}checkIntersectionWithLineStrings(t){for(let e=t.iterator();e.hasNext();){const t=e.next();if(this.checkIntersectionWithSegments(t),this._hasIntersection)return null}}checkIntersectionWithSegments(t){const e=t.getCoordinateSequence();for(let t=1;t<e.size();t++)if(e.getCoordinate(t-1,this._p0),e.getCoordinate(t,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}}class no extends rs{constructor(){super(),no.constructor_.apply(this,arguments)}static constructor_(){if(this._relate=null,2===arguments.length){const t=arguments[0],e=arguments[1];rs.constructor_.call(this,t,e),this._relate=new Xr(this._arg)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];rs.constructor_.call(this,t,e,i),this._relate=new Xr(this._arg)}}static equalsTopo(t,e){return!!t.getEnvelopeInternal().equals(e.getEnvelopeInternal())&&no.relate(t,e).isEquals(t.getDimension(),e.getDimension())}static relate(){return 2===arguments.length?new no(arguments[0],arguments[1]).getIntersectionMatrix():3===arguments.length?new no(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix():void 0}static overlaps(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new no(t,e).getIntersectionMatrix().isOverlaps(t.getDimension(),e.getDimension())}static disjoint(t,e){return!no.intersects(t,e)}static covers(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||new no(t,e).getIntersectionMatrix().isCovers())}static intersects(t,e){if(!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal()))return!1;if(t.isRectangle())return Jr.intersects(t,e);if(e.isRectangle())return Jr.intersects(e,t);if(t.isGeometryCollection()||e.isGeometryCollection()){for(let i=0;i<t.getNumGeometries();i++)for(let n=0;n<e.getNumGeometries();n++)if(no.intersects(t.getGeometryN(i),e.getGeometryN(n)))return!0;return!1}return new no(t,e).getIntersectionMatrix().isIntersects()}static touches(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new no(t,e).getIntersectionMatrix().isTouches(t.getDimension(),e.getDimension())}static crosses(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&new no(t,e).getIntersectionMatrix().isCrosses(t.getDimension(),e.getDimension())}static contains(t,e){return!(2===e.getDimension()&&t.getDimension()<2)&&!(1===e.getDimension()&&t.getDimension()<1&&e.getLength()>0)&&!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?qr.contains(t,e):new no(t,e).getIntersectionMatrix().isContains())}getIntersectionMatrix(){return this._relate.computeIM()}}var so=Object.freeze({__proto__:null,RelateOp:no});class ro{constructor(){ro.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._polygons=new E,this._lines=new E,this._points=new E,this._dimension=$.FALSE}static extract(){if(v(arguments[0],b)){const t=arguments[0],e=new ro;return e.add(t),e}if(arguments[0]instanceof Y){const t=arguments[0],e=new ro;return e.add(t),e}}getFactory(){return this._geomFactory}filter(t){return this.recordDimension(t.getDimension()),t instanceof ht||t.isEmpty()?null:t instanceof xt?(this._polygons.add(t),null):t instanceof tt?(this._lines.add(t),null):t instanceof bt?(this._points.add(t),null):void c.shouldNeverReachHere("Unhandled geometry type: "+t.getGeometryType())}getExtract(t){switch(t){case 0:return this._points;case 1:return this._lines;case 2:return this._polygons}return c.shouldNeverReachHere("Invalid dimension: "+t),null}recordDimension(t){t>this._dimension&&(this._dimension=t)}getDimension(){return this._dimension}isEmpty(){return this._polygons.isEmpty()&&this._lines.isEmpty()&&this._points.isEmpty()}add(){if(v(arguments[0],b)){const t=arguments[0];for(const e of t)this.add(e)}else if(arguments[0]instanceof Y){const t=arguments[0];null===this._geomFactory&&(this._geomFactory=t.getFactory()),t.apply(this)}}get interfaces_(){return[J]}}class oo{constructor(){oo.constructor_.apply(this,arguments)}static constructor_(){this._pointGeom=null,this._otherGeom=null,this._geomFact=null;const t=arguments[0],e=arguments[1];this._pointGeom=t,this._otherGeom=e,this._geomFact=e.getFactory()}static union(t,e){return new oo(t,e).union()}union(){const t=new $n,e=new lt;for(let i=0;i<this._pointGeom.getNumGeometries();i++){const n=this._pointGeom.getGeometryN(i).getCoordinate();t.locate(n,this._otherGeom)===qt.EXTERIOR&&e.add(n)}if(0===e.size())return this._otherGeom;let i=null;const n=W.toCoordinateArray(e);return i=1===n.length?this._geomFact.createPoint(n[0]):this._geomFact.createMultiPointFromCoords(n),ce.combine(i,this._otherGeom)}}class ao{constructor(){ao.constructor_.apply(this,arguments)}static constructor_(){this._geomFactory=null,this._g0=null,this._g1=null,this._isUnionSafe=null;const t=arguments[0],e=arguments[1];this._g0=t,this._g1=e,this._geomFactory=t.getFactory()}static containsProperly(){if(2===arguments.length){const t=arguments[0],e=arguments[1];return!t.isNull()&&e.getX()>t.getMinX()&&e.getX()<t.getMaxX()&&e.getY()>t.getMinY()&&e.getY()<t.getMaxY()}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return ao.containsProperly(t,e)&&ao.containsProperly(t,i)}}static union(t,e){return new ao(t,e).union()}static intersects(t,e,i){return t.intersects(e)||t.intersects(i)}static overlapEnvelope(t,e){const i=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();return i.intersection(n)}static extractBorderSegments(t,e,i){t.apply(new class{get interfaces_(){return[I]}filter(t,n){if(n<=0)return null;const s=t.getCoordinate(n-1),r=t.getCoordinate(n);if(ao.intersects(e,s,r)&&!ao.containsProperly(e,s,r)){const t=new Xt(s,r);i.add(t)}}isDone(){return!1}isGeometryChanged(){return!1}})}static unionBuffer(t,e){const i=t.getFactory().createGeometryCollection([t,e]);return Rn.bufferOp(i,0)}isBorderSegmentsSame(t,e){const i=this.extractBorderSegments(this._g0,this._g1,e),n=new E;return ao.extractBorderSegments(t,e,n),this.isEqual(i,n)}union(){const t=ao.overlapEnvelope(this._g0,this._g1);if(t.isNull()){const t=this._g0.copy(),e=this._g1.copy();return ce.combine(t,e)}const e=new E,i=this.extractByEnvelope(t,this._g0,e),n=this.extractByEnvelope(t,this._g1,e),s=this.unionFull(i,n);let r=null;return this._isUnionSafe=this.isBorderSegmentsSame(s,t),r=this._isUnionSafe?this.combine(s,e):this.unionFull(this._g0,this._g1),r}extractBorderSegments(t,e,i){const n=new E;return ao.extractBorderSegments(t,i,n),null!==e&&ao.extractBorderSegments(e,i,n),n}isUnionOptimized(){return this._isUnionSafe}extractByEnvelope(t,e,i){const n=new E;for(let s=0;s<e.getNumGeometries();s++){const r=e.getGeometryN(s);if(r.getEnvelopeInternal().intersects(t))n.add(r);else{const t=r.copy();i.add(t)}}return this._geomFactory.buildGeometry(n)}isEqual(t,e){if(t.size()!==e.size())return!1;const i=new pt(t);for(const t of e)if(!i.contains(t))return!1;return!0}combine(t,e){return e.size()<=0?t:(e.add(t),ce.combine(e))}unionFull(t,e){try{return As.union(t,e)}catch(i){if(i instanceof fi)return ao.unionBuffer(t,e);throw i}}}class lo{constructor(){lo.constructor_.apply(this,arguments)}static constructor_(){this._inputPolys=null,this._geomFactory=null;const t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new E)}static getGeometry(t,e){return e>=t.size()?null:t.get(e)}static union(t){return new lo(t).union()}static restrictToPolygons(t){if(v(t,ut))return t;const e=ve.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Et.toPolygonArray(e))}reduceToGeometries(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next();let n=null;v(t,x)?n=this.unionTree(t):t instanceof Y&&(n=t),e.add(n)}return e}union(){if(null===this._inputPolys)throw new k("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();const t=new Li(lo.STRTREE_NODE_CAPACITY);for(let e=this._inputPolys.iterator();e.hasNext();){const i=e.next();t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;const e=t.itemsTree();return this.unionTree(e)}binaryUnion(){if(1===arguments.length){const t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(i-e<=1){const i=lo.getGeometry(t,e);return this.unionSafe(i,null)}if(i-e==2)return this.unionSafe(lo.getGeometry(t,e),lo.getGeometry(t,e+1));{const n=Math.trunc((i+e)/2),s=this.binaryUnion(t,e,n),r=this.binaryUnion(t,n,i);return this.unionSafe(s,r)}}}unionSafe(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionActual(t,e)}unionActual(t,e){const i=ao.union(t,e);return lo.restrictToPolygons(i)}unionTree(t){const e=this.reduceToGeometries(t);return this.binaryUnion(e)}}lo.STRTREE_NODE_CAPACITY=4;class Ao{constructor(){Ao.constructor_.apply(this,arguments)}static constructor_(){if(this._geomFact=null,this._extracter=null,1===arguments.length){if(v(arguments[0],b)){const t=arguments[0];this.extract(t)}else if(arguments[0]instanceof Y){const t=arguments[0];this.extract(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._geomFact=e,this.extract(t)}}static union(){if(1===arguments.length){if(v(arguments[0],b))return new Ao(arguments[0]).union();if(arguments[0]instanceof Y)return new Ao(arguments[0]).union()}else if(2===arguments.length)return new Ao(arguments[0],arguments[1]).union()}extract(){if(v(arguments[0],b)){const t=arguments[0];this._extracter=ro.extract(t)}else if(arguments[0]instanceof Y){const t=arguments[0];this._extracter=ro.extract(t)}}unionWithNull(t,e){return null===t&&null===e?null:null===e?t:null===t?e:os.union(t,e)}unionNoOpt(t){const e=this._geomFact.createPoint();return ls.overlayOp(t,e,os.UNION)}union(){if(null===this._geomFact&&(this._geomFact=this._extracter.getFactory()),null===this._geomFact)return null;if(this._extracter.isEmpty())return this._geomFact.createEmpty(this._extracter.getDimension());const t=this._extracter.getExtract(0),e=this._extracter.getExtract(1),i=this._extracter.getExtract(2);let n=null;if(t.size()>0){const e=this._geomFact.buildGeometry(t);n=this.unionNoOpt(e)}let s=null;if(e.size()>0){const t=this._geomFact.buildGeometry(e);s=this.unionNoOpt(t)}let r=null;i.size()>0&&(r=lo.union(i));const o=this.unionWithNull(s,r);let a=null;return a=null===n?o:null===o?n:oo.union(n,o),null===a?this._geomFact.createGeometryCollection():a}}var co=Object.freeze({__proto__:null,UnaryUnionOp:Ao}),ho=Object.freeze({__proto__:null,ConsistentAreaTester:Pr,IsValidOp:Hr}),uo=Object.freeze({__proto__:null,BoundaryOp:sr,IsSimpleOp:or,buffer:lr,distance:ur,linemerge:Fr,overlay:Lr,polygonize:Yr,relate:so,union:co,valid:ho});class go{constructor(){go.constructor_.apply(this,arguments)}static constructor_(){if(this._returnToOriginalPrecision=!0,this._cbr=null,0===arguments.length)go.constructor_.call(this,!0);else if(1===arguments.length){const t=arguments[0];this._returnToOriginalPrecision=t}}computeResultPrecision(t){return this._returnToOriginalPrecision&&this._cbr.addCommonBits(t),t}union(t,e){const i=this.removeCommonBits(t,e);return this.computeResultPrecision(As.union(i[0],i[1]))}intersection(t,e){const i=this.removeCommonBits(t,e);return this.computeResultPrecision(os.intersection(i[0],i[1]))}removeCommonBits(){if(1===arguments.length){const t=arguments[0];return this._cbr=new Pn,this._cbr.add(t),this._cbr.removeCommonBits(t.copy())}if(2===arguments.length){const t=arguments[0],e=arguments[1];this._cbr=new Pn,this._cbr.add(t),this._cbr.add(e);const i=new Array(2).fill(null);return i[0]=this._cbr.removeCommonBits(t.copy()),i[1]=this._cbr.removeCommonBits(e.copy()),i}}buffer(t,e){const i=this.removeCommonBits(t);return this.computeResultPrecision(Rn.bufferOp(i,e))}symDifference(t,e){const i=this.removeCommonBits(t,e);return this.computeResultPrecision(os.symDifference(i[0],i[1]))}difference(t,e){const i=this.removeCommonBits(t,e);return this.computeResultPrecision(os.difference(i[0],i[1]))}}class po extends he.CoordinateOperation{constructor(){super(),po.constructor_.apply(this,arguments)}static constructor_(){this._targetPM=null,this._removeCollapsed=!0;const t=arguments[0],e=arguments[1];this._targetPM=t,this._removeCollapsed=e}edit(){if(2===arguments.length&&arguments[1]instanceof Y&&arguments[0]instanceof Array){const t=arguments[0],e=arguments[1];if(0===t.length)return null;const i=new Array(t.length).fill(null);for(let e=0;e<t.length;e++){const n=new f(t[e]);this._targetPM.makePrecise(n),i[e]=n}const n=new F(i,!1).toCoordinateArray();let s=0;e instanceof tt&&(s=2),e instanceof et&&(s=4);let r=i;return this._removeCollapsed&&(r=null),n.length<s?r:n}return super.edit.apply(this,arguments)}}class fo{constructor(){fo.constructor_.apply(this,arguments)}static constructor_(){this._targetPM=null,this._removeCollapsed=!0,this._changePrecisionModel=!1,this._isPointwise=!1;const t=arguments[0];this._targetPM=t}static reduce(t,e){return new fo(e).reduce(t)}static reducePointwise(t,e){const i=new fo(e);return i.setPointwise(!0),i.reduce(t)}fixPolygonalTopology(t){let e=t;return this._changePrecisionModel||(e=this.changePM(t,this._targetPM)),Rn.bufferOp(e,0)}reducePointwise(t){let e=null;if(this._changePrecisionModel){const i=this.createFactory(t.getFactory(),this._targetPM);e=new he(i)}else e=new he;let i=this._removeCollapsed;return t.getDimension()>=2&&(i=!0),e.edit(t,new po(this._targetPM,i))}changePM(t,e){return this.createEditor(t.getFactory(),e).edit(t,new he.NoOpGeometryOperation)}setRemoveCollapsedComponents(t){this._removeCollapsed=t}createFactory(t,e){return new Et(e,t.getSRID(),t.getCoordinateSequenceFactory())}setChangePrecisionModel(t){this._changePrecisionModel=t}reduce(t){const e=this.reducePointwise(t);return this._isPointwise?e:v(e,ut)?Hr.isValid(e)?e:this.fixPolygonalTopology(e):e}setPointwise(t){this._isPointwise=t}createEditor(t,e){if(t.getPrecisionModel()===e)return new he;const i=this.createFactory(t,e);return new he(i)}}class mo{constructor(){mo.constructor_.apply(this,arguments)}static constructor_(){if(this._geom=null,this._pts=null,this._start=null,this._end=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._pts=t,this._start=e,this._end=e+1}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._pts=t,this._start=e,this._end=i}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._geom=t,this._pts=e,this._start=i,this._end=n}}size(){return this._end-this._start}getCoordinate(t){return this._pts.getCoordinate(this._start+t)}updateNearestLocationsLineLine(t,e,i,n,s,r,o,a){const l=new Xt(e,i),A=new Xt(r,o),c=l.closestPoints(A);a[0]=new Ar(this._geom,t,new f(c[0])),a[1]=new Ar(n._geom,s,new f(c[1]))}toString(){const t=new M;t.append("LINESTRING ( ");const e=new f;for(let i=this._start;i<this._end;i++)i>this._start&&t.append(", "),this._pts.getCoordinate(i,e),t.append(e.x+" "+e.y);return t.append(" )"),t.toString()}computeDistancePointLine(t,e,i){let n=r.MAX_VALUE;for(let s=e._start;s<e._end-1;s++){const r=e._pts.getCoordinate(s),o=e._pts.getCoordinate(s+1),a=G.pointToSegment(t,r,o);if(a<n&&(n=a,null!==i&&this.updateNearestLocationsPointLine(t,e,s,r,o,i),n<=0))return n}return n}isPoint(){return this._end-this._start==1}distance(t){const e=this.isPoint(),i=t.isPoint();let n=null;if(e&&i){const e=this._pts.getCoordinate(this._start),i=t._pts.getCoordinate(t._start);n=e.distance(i)}else if(e){const e=this._pts.getCoordinate(this._start);n=this.computeDistancePointLine(e,t,null)}else if(i){const e=t._pts.getCoordinate(t._start);n=this.computeDistancePointLine(e,this,null)}else n=this.computeDistanceLineLine(t,null);return n}computeDistanceLineLine(t,e){let i=r.MAX_VALUE;for(let n=this._start;n<this._end-1;n++){const s=this._pts.getCoordinate(n),r=this._pts.getCoordinate(n+1);for(let o=t._start;o<t._end-1;o++){const a=t._pts.getCoordinate(o),l=t._pts.getCoordinate(o+1),A=G.segmentToSegment(s,r,a,l);if(A<i&&(i=A,null!==e&&this.updateNearestLocationsLineLine(n,s,r,t,o,a,l,e),i<=0))return i}}return i}updateNearestLocationsPointLine(t,e,i,n,s,r){r[0]=new Ar(this._geom,this._start,new f(t));const o=new Xt(n,s).closestPoint(t);r[1]=new Ar(e._geom,i,new f(o))}nearestLocations(t){const e=this.isPoint(),i=t.isPoint(),n=new Array(2).fill(null);if(e&&i){const e=this._pts.getCoordinate(this._start),i=t._pts.getCoordinate(t._start);n[0]=new Ar(this._geom,this._start,new f(e)),n[1]=new Ar(t._geom,t._start,new f(i))}else if(e){const e=this._pts.getCoordinate(this._start);this.computeDistancePointLine(e,t,n)}else if(i){const e=t._pts.getCoordinate(t._start);this.computeDistancePointLine(e,this,n);const i=n[0];n[0]=n[1],n[1]=i}else this.computeDistanceLineLine(t,n);return n}getEnvelope(){const t=new L;for(let e=this._start;e<this._end;e++)t.expandToInclude(this._pts.getX(e),this._pts.getY(e));return t}}class _o{static addFacetSequences(t,e,i){let n=0;const s=e.size();for(;n<=s-1;){let r=n+_o.FACET_SEQUENCE_SIZE+1;r>=s-1&&(r=s);const o=new mo(t,e,n,r);i.add(o),n+=_o.FACET_SEQUENCE_SIZE}}static build(t){const e=new Li(_o.STR_TREE_NODE_CAPACITY);for(let i=_o.computeFacetSequences(t).iterator();i.hasNext();){const t=i.next();e.insert(t.getEnvelope(),t)}return e.build(),e}static computeFacetSequences(t){const e=new E;return t.apply(new class{get interfaces_(){return[z]}filter(t){let i=null;(t instanceof tt||t instanceof bt)&&(i=t.getCoordinateSequence(),_o.addFacetSequences(t,i,e))}}),e}}_o.FACET_SEQUENCE_SIZE=6,_o.STR_TREE_NODE_CAPACITY=4;class yo{constructor(){yo.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._minClearance=null,this._minClearancePts=null;const t=arguments[0];this._inputGeom=t}static getDistance(t){return new yo(t).getDistance()}static getLine(t){return new yo(t).getLine()}getDistance(){return this.compute(),this._minClearance}compute(){if(null!==this._minClearancePts)return null;if(this._minClearancePts=new Array(2).fill(null),this._minClearance=r.MAX_VALUE,this._inputGeom.isEmpty())return null;const t=_o.build(this._inputGeom).nearestNeighbour(new wo),e=new wo;this._minClearance=e.distance(t[0],t[1]),this._minClearancePts=e.getCoordinates()}getLine(){return this.compute(),null===this._minClearancePts||null===this._minClearancePts[0]?this._inputGeom.getFactory().createLineString():this._inputGeom.getFactory().createLineString(this._minClearancePts)}}class wo{constructor(){wo.constructor_.apply(this,arguments)}static constructor_(){this._minDist=r.MAX_VALUE,this._minPts=new Array(2).fill(null)}vertexDistance(t,e){for(let i=0;i<t.size();i++)for(let n=0;n<e.size();n++){const s=t.getCoordinate(i),r=e.getCoordinate(n);if(!s.equals2D(r)){const t=s.distance(r);if(t<this._minDist&&(this._minDist=t,this._minPts[0]=s,this._minPts[1]=r,0===t))return t}}return this._minDist}getCoordinates(){return this._minPts}segmentDistance(t,e){for(let i=0;i<t.size();i++)for(let n=1;n<e.size();n++){const s=t.getCoordinate(i),r=e.getCoordinate(n-1),o=e.getCoordinate(n);if(!s.equals2D(r)&&!s.equals2D(o)){const t=G.pointToSegment(s,r,o);if(t<this._minDist&&(this._minDist=t,this.updatePts(s,r,o),0===t))return t}}return this._minDist}distance(){if(arguments[0]instanceof yi&&arguments[1]instanceof yi){const t=arguments[1],e=arguments[0].getItem(),i=t.getItem();return this._minDist=r.MAX_VALUE,this.distance(e,i)}if(arguments[0]instanceof mo&&arguments[1]instanceof mo){const t=arguments[0],e=arguments[1];return this.vertexDistance(t,e),1===t.size()&&1===e.size()||this._minDist<=0||(this.segmentDistance(t,e),this._minDist<=0||this.segmentDistance(e,t)),this._minDist}}updatePts(t,e,i){this._minPts[0]=t;const n=new Xt(e,i);this._minPts[1]=new f(n.closestPoint(t))}get interfaces_(){return[Ii]}}yo.MinClearanceDistance=wo;class vo{constructor(){vo.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._minClearance=null,this._minClearancePts=null;const t=arguments[0];this._inputGeom=t}static getDistance(t){return new vo(t).getDistance()}static getLine(t){return new vo(t).getLine()}getDistance(){return this.compute(),this._minClearance}compute(){if(null!==this._minClearancePts)return null;this._minClearancePts=new Array(2).fill(null),this._minClearance=r.MAX_VALUE,this._inputGeom.apply(new bo(this))}updateClearance(){if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];t<this._minClearance&&(this._minClearance=t,this._minClearancePts[0]=new f(e),this._minClearancePts[1]=new f(i))}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];if(t<this._minClearance){this._minClearance=t,this._minClearancePts[0]=new f(e);const s=new Xt(i,n);this._minClearancePts[1]=new f(s.closestPoint(e))}}}getLine(){return this.compute(),this._inputGeom.getFactory().createLineString(this._minClearancePts)}}class bo{constructor(){bo.constructor_.apply(this,arguments)}static constructor_(){this.smc=null;const t=arguments[0];this.smc=t}filter(t){this.smc._inputGeom.apply(new Co(this.smc,t))}get interfaces_(){return[X]}}class Co{constructor(){Co.constructor_.apply(this,arguments)}static constructor_(){this.smc=null,this._queryPt=null;const t=arguments[0],e=arguments[1];this.smc=t,this._queryPt=e}filter(t,e){this.checkVertexDistance(t.getCoordinate(e)),e>0&&this.checkSegmentDistance(t.getCoordinate(e-1),t.getCoordinate(e))}checkSegmentDistance(t,e){if(this._queryPt.equals2D(t)||this._queryPt.equals2D(e))return null;const i=G.pointToSegment(this._queryPt,e,t);i>0&&this.smc.updateClearance(i,this._queryPt,e,t)}isDone(){return!1}isGeometryChanged(){return!1}checkVertexDistance(t){const e=t.distance(this._queryPt);e>0&&this.smc.updateClearance(e,this._queryPt,t)}get interfaces_(){return[I]}}vo.VertexCoordinateFilter=bo,vo.ComputeMCCoordinateSequenceFilter=Co;var xo=Object.freeze({__proto__:null,CommonBits:On,CommonBitsOp:go,CommonBitsRemover:Pn,EnhancedPrecisionOp:class{static union(t,e){let i=null;try{return As.union(t,e)}catch(t){if(!(t instanceof l))throw t;i=t}try{const n=new go(!0).union(t,e);if(!n.isValid())throw i;return n}catch(t){throw t instanceof l?i:t}}static intersection(t,e){let i=null;try{return os.intersection(t,e)}catch(t){if(!(t instanceof l))throw t;i=t}try{const n=new go(!0).intersection(t,e);if(!n.isValid())throw i;return n}catch(t){throw t instanceof l?i:t}}static buffer(t,e){let i=null;try{return Rn.bufferOp(t,e)}catch(t){if(!(t instanceof l))throw t;i=t}try{const n=new go(!0).buffer(t,e);if(!n.isValid())throw i;return n}catch(t){throw t instanceof l?i:t}}static symDifference(t,e){let i=null;try{return os.symDifference(t,e)}catch(t){if(!(t instanceof l))throw t;i=t}try{const n=new go(!0).symDifference(t,e);if(!n.isValid())throw i;return n}catch(t){throw t instanceof l?i:t}}static difference(t,e){let i=null;try{return os.difference(t,e)}catch(t){if(!(t instanceof l))throw t;i=t}try{const n=new go(!0).difference(t,e);if(!n.isValid())throw i;return n}catch(t){throw t instanceof l?i:t}}},GeometryPrecisionReducer:fo,MinimumClearance:yo,SimpleMinimumClearance:vo});class Bo{constructor(){Bo.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._usePt=null,this._distanceTolerance=null,this._seg=new Xt;const t=arguments[0];this._pts=t}static simplify(t,e){const i=new Bo(t);return i.setDistanceTolerance(e),i.simplify()}setDistanceTolerance(t){this._distanceTolerance=t}simplifySection(t,e){if(t+1===e)return null;this._seg.p0=this._pts[t],this._seg.p1=this._pts[e];let i=-1,n=t;for(let s=t+1;s<e;s++){const t=this._seg.distance(this._pts[s]);t>i&&(i=t,n=s)}if(i<=this._distanceTolerance)for(let i=t+1;i<e;i++)this._usePt[i]=!1;else this.simplifySection(t,n),this.simplifySection(n,e)}simplify(){this._usePt=new Array(this._pts.length).fill(null);for(let t=0;t<this._pts.length;t++)this._usePt[t]=!0;this.simplifySection(0,this._pts.length-1);const t=new F;for(let e=0;e<this._pts.length;e++)this._usePt[e]&&t.add(new f(this._pts[e]));return t.toCoordinateArray()}}class Eo{constructor(){Eo.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;const t=arguments[0];this._inputGeom=t}static simplify(t,e){const i=new Eo(t);return i.setDistanceTolerance(e),i.getResultGeometry()}setDistanceTolerance(t){if(t<0)throw new n("Tolerance must be non-negative");this._distanceTolerance=t}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new So(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}setEnsureValid(t){this._isEnsureValidTopology=t}}class So extends fe{constructor(){super(),So.constructor_.apply(this,arguments)}static constructor_(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;const t=arguments[0],e=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=e}transformPolygon(t,e){if(t.isEmpty())return null;const i=super.transformPolygon.call(this,t,e);return e instanceof dt?i:this.createValidArea(i)}createValidArea(t){return this._isEnsureValidTopology?Rn.bufferOp(t,0):t}transformCoordinates(t,e){const i=t.toCoordinateArray();let n=null;return n=0===i.length?new Array(0).fill(null):Bo.simplify(i,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(n)}transformMultiPolygon(t,e){const i=super.transformMultiPolygon.call(this,t,e);return this.createValidArea(i)}transformLinearRing(t,e){const i=e instanceof xt,n=super.transformLinearRing.call(this,t,e);return!i||n instanceof et?n:null}}Eo.DPTransformer=So;class Fo extends Xt{constructor(){super(),Fo.constructor_.apply(this,arguments)}static constructor_(){if(this._parent=null,this._index=null,2===arguments.length){const t=arguments[0],e=arguments[1];Fo.constructor_.call(this,t,e,null,-1)}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];Xt.constructor_.call(this,t,e),this._parent=i,this._index=n}}getParent(){return this._parent}getIndex(){return this._index}}class Io{constructor(){Io.constructor_.apply(this,arguments)}static constructor_(){if(this._parentLine=null,this._segs=null,this._resultSegs=new E,this._minimumSize=null,1===arguments.length){const t=arguments[0];Io.constructor_.call(this,t,2)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._parentLine=t,this._minimumSize=e,this.init()}}static extractCoordinates(t){const e=new Array(t.size()+1).fill(null);let i=null;for(let n=0;n<t.size();n++)i=t.get(n),e[n]=i.p0;return e[e.length-1]=i.p1,e}addToResult(t){this._resultSegs.add(t)}asLineString(){return this._parentLine.getFactory().createLineString(Io.extractCoordinates(this._resultSegs))}getResultSize(){const t=this._resultSegs.size();return 0===t?0:t+1}getParentCoordinates(){return this._parentLine.getCoordinates()}getMinimumSize(){return this._minimumSize}asLinearRing(){return this._parentLine.getFactory().createLinearRing(Io.extractCoordinates(this._resultSegs))}getSegments(){return this._segs}init(){const t=this._parentLine.getCoordinates();this._segs=new Array(t.length-1).fill(null);for(let e=0;e<t.length-1;e++){const i=new Fo(t[e],t[e+1],this._parentLine,e);this._segs[e]=i}}getResultCoordinates(){return Io.extractCoordinates(this._resultSegs)}getParent(){return this._parentLine}getSegment(t){return this._segs[t]}}class Lo{constructor(){Lo.constructor_.apply(this,arguments)}static constructor_(){this._index=new Ws}add(){if(arguments[0]instanceof Io){const t=arguments[0].getSegments();for(let e=0;e<t.length;e++){const i=t[e];this.add(i)}}else if(arguments[0]instanceof Xt){const t=arguments[0];this._index.insert(new L(t.p0,t.p1),t)}}query(t){const e=new L(t.p0,t.p1),i=new Mo(t);return this._index.query(e,i),i.getItems()}remove(t){this._index.remove(new L(t.p0,t.p1),t)}}class Mo{constructor(){Mo.constructor_.apply(this,arguments)}static constructor_(){this._querySeg=null,this._items=new E;const t=arguments[0];this._querySeg=t}getItems(){return this._items}visitItem(t){const e=t;L.intersects(e.p0,e.p1,this._querySeg.p0,this._querySeg.p1)&&this._items.add(t)}get interfaces_(){return[ke]}}class To{constructor(){To.constructor_.apply(this,arguments)}static constructor_(){this._li=new Yt,this._inputIndex=new Lo,this._outputIndex=new Lo,this._line=null,this._linePts=null,this._distanceTolerance=0;const t=arguments[0],e=arguments[1];this._inputIndex=t,this._outputIndex=e}static isInLineSection(t,e,i){if(i.getParent()!==t.getParent())return!1;const n=i.getIndex();return n>=e[0]&&n<e[1]}flatten(t,e){const i=this._linePts[t],n=this._linePts[e],s=new Xt(i,n);return this.remove(this._line,t,e),this._outputIndex.add(s),s}hasBadIntersection(t,e,i){return!!this.hasBadOutputIntersection(i)||!!this.hasBadInputIntersection(t,e,i)}setDistanceTolerance(t){this._distanceTolerance=t}simplifySection(t,e,i){i+=1;const n=new Array(2).fill(null);if(t+1===e){const e=this._line.getSegment(t);return this._line.addToResult(e),null}let s=!0;this._line.getResultSize()<this._line.getMinimumSize()&&i+1<this._line.getMinimumSize()&&(s=!1);const r=new Array(1).fill(null),o=this.findFurthestPoint(this._linePts,t,e,r);r[0]>this._distanceTolerance&&(s=!1);const a=new Xt;if(a.p0=this._linePts[t],a.p1=this._linePts[e],n[0]=t,n[1]=e,this.hasBadIntersection(this._line,n,a)&&(s=!1),s){const i=this.flatten(t,e);return this._line.addToResult(i),null}this.simplifySection(t,o,i),this.simplifySection(o,e,i)}hasBadOutputIntersection(t){for(let e=this._outputIndex.query(t).iterator();e.hasNext();){const i=e.next();if(this.hasInteriorIntersection(i,t))return!0}return!1}hasInteriorIntersection(t,e){return this._li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this._li.isInteriorIntersection()}hasBadInputIntersection(t,e,i){for(let n=this._inputIndex.query(i).iterator();n.hasNext();){const s=n.next();if(this.hasInteriorIntersection(s,i)){if(To.isInLineSection(t,e,s))continue;return!0}}return!1}findFurthestPoint(t,e,i,n){const s=new Xt;s.p0=t[e],s.p1=t[i];let r=-1,o=e;for(let n=e+1;n<i;n++){const e=t[n],i=s.distance(e);i>r&&(r=i,o=n)}return n[0]=r,o}simplify(t){this._line=t,this._linePts=t.getParentCoordinates(),this.simplifySection(0,this._linePts.length-1,0)}remove(t,e,i){for(let n=e;n<i;n++){const e=t.getSegment(n);this._inputIndex.remove(e)}}}class Ro{constructor(){Ro.constructor_.apply(this,arguments)}static constructor_(){this._inputIndex=new Lo,this._outputIndex=new Lo,this._distanceTolerance=0}setDistanceTolerance(t){this._distanceTolerance=t}simplify(t){for(let e=t.iterator();e.hasNext();)this._inputIndex.add(e.next());for(let e=t.iterator();e.hasNext();){const t=new To(this._inputIndex,this._outputIndex);t.setDistanceTolerance(this._distanceTolerance),t.simplify(e.next())}}}class ko{constructor(){ko.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._lineSimplifier=new Ro,this._linestringMap=null;const t=arguments[0];this._inputGeom=t}static simplify(t,e){const i=new ko(t);return i.setDistanceTolerance(e),i.getResultGeometry()}setDistanceTolerance(t){if(t<0)throw new n("Tolerance must be non-negative");this._lineSimplifier.setDistanceTolerance(t)}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():(this._linestringMap=new mt,this._inputGeom.apply(new Do(this)),this._lineSimplifier.simplify(this._linestringMap.values()),new Uo(this._linestringMap).transform(this._inputGeom))}}class Uo extends fe{constructor(){super(),Uo.constructor_.apply(this,arguments)}static constructor_(){this._linestringMap=null;const t=arguments[0];this._linestringMap=t}transformCoordinates(t,e){if(0===t.size())return null;if(e instanceof tt){const t=this._linestringMap.get(e);return this.createCoordinateSequence(t.getResultCoordinates())}return super.transformCoordinates.call(this,t,e)}}class Do{constructor(){Do.constructor_.apply(this,arguments)}static constructor_(){this.tps=null;const t=arguments[0];this.tps=t}filter(t){if(t instanceof tt){const e=t;if(e.isEmpty())return null;const i=e.isClosed()?4:2,n=new Io(e,i);this.tps._linestringMap.put(e,n)}}get interfaces_(){return[z]}}ko.LineStringTransformer=Uo,ko.LineStringMapBuilderFilter=Do;class Oo{constructor(){Oo.constructor_.apply(this,arguments)}static constructor_(){this._pts=null,this._tolerance=null;const t=arguments[0],e=arguments[1];this._pts=t,this._tolerance=e*e}static simplify(t,e){return new Oo(t,e).simplify()}simplifyVertex(t){let e=t,i=e.getArea(),n=null;for(;null!==e;){const t=e.getArea();t<i&&(i=t,n=e),e=e._next}return null!==n&&i<this._tolerance&&n.remove(),t.isLive()?i:-1}simplify(){const t=Po.buildLine(this._pts);let e=this._tolerance;do{e=this.simplifyVertex(t)}while(e<this._tolerance);const i=t.getCoordinates();return i.length<2?[i[0],new f(i[0])]:i}}class Po{constructor(){Po.constructor_.apply(this,arguments)}static constructor_(){this._pt=null,this._prev=null,this._next=null,this._area=Po.MAX_AREA,this._isLive=!0;const t=arguments[0];this._pt=t}static buildLine(t){let e=null,i=null;for(let n=0;n<t.length;n++){const s=new Po(t[n]);null===e&&(e=s),s.setPrev(i),null!==i&&(i.setNext(s),i.updateArea()),i=s}return e}getCoordinates(){const t=new F;let e=this;do{t.add(e._pt,!1),e=e._next}while(null!==e);return t.toCoordinateArray()}getArea(){return this._area}updateArea(){if(null===this._prev||null===this._next)return this._area=Po.MAX_AREA,null;this._area=Math.abs(ie.area(this._prev._pt,this._pt,this._next._pt))}remove(){const t=this._prev,e=this._next;let i=null;return null!==this._prev&&(this._prev.setNext(e),this._prev.updateArea(),i=this._prev),null!==this._next&&(this._next.setPrev(t),this._next.updateArea(),null===i&&(i=this._next)),this._isLive=!1,i}isLive(){return this._isLive}setPrev(t){this._prev=t}setNext(t){this._next=t}}Po.MAX_AREA=r.MAX_VALUE,Oo.VWVertex=Po;class No{constructor(){No.constructor_.apply(this,arguments)}static constructor_(){this._inputGeom=null,this._distanceTolerance=null,this._isEnsureValidTopology=!0;const t=arguments[0];this._inputGeom=t}static simplify(t,e){const i=new No(t);return i.setDistanceTolerance(e),i.getResultGeometry()}setDistanceTolerance(t){if(t<0)throw new n("Tolerance must be non-negative");this._distanceTolerance=t}getResultGeometry(){return this._inputGeom.isEmpty()?this._inputGeom.copy():new Qo(this._isEnsureValidTopology,this._distanceTolerance).transform(this._inputGeom)}setEnsureValid(t){this._isEnsureValidTopology=t}}class Qo extends fe{constructor(){super(),Qo.constructor_.apply(this,arguments)}static constructor_(){this._isEnsureValidTopology=!0,this._distanceTolerance=null;const t=arguments[0],e=arguments[1];this._isEnsureValidTopology=t,this._distanceTolerance=e}transformPolygon(t,e){if(t.isEmpty())return null;const i=super.transformPolygon.call(this,t,e);return e instanceof dt?i:this.createValidArea(i)}createValidArea(t){return this._isEnsureValidTopology?Rn.bufferOp(t,0):t}transformCoordinates(t,e){const i=t.toCoordinateArray();let n=null;return n=0===i.length?new Array(0).fill(null):Oo.simplify(i,this._distanceTolerance),this._factory.getCoordinateSequenceFactory().create(n)}transformMultiPolygon(t,e){const i=super.transformMultiPolygon.call(this,t,e);return this.createValidArea(i)}transformLinearRing(t,e){const i=e instanceof xt,n=super.transformLinearRing.call(this,t,e);return!i||n instanceof et?n:null}}No.VWTransformer=Qo;var Ho=Object.freeze({__proto__:null,DouglasPeuckerSimplifier:Eo,TopologyPreservingSimplifier:ko,VWSimplifier:No});class Go{locate(t){}}class Vo{constructor(){Vo.constructor_.apply(this,arguments)}static constructor_(){this._subdiv=null,this._lastEdge=null;const t=arguments[0];this._subdiv=t,this.init()}init(){this._lastEdge=this.findEdge()}locate(t){this._lastEdge.isLive()||this.init();const e=this._subdiv.locateFromEdge(t,this._lastEdge);return this._lastEdge=e,e}findEdge(){return this._subdiv.getEdges().iterator().next()}get interfaces_(){return[Go]}}class zo{constructor(){zo.constructor_.apply(this,arguments)}static constructor_(){if(this._ls=null,this._data=null,2===arguments.length){const t=arguments[0],e=arguments[1];this._ls=new Xt(t,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._ls=new Xt(t,e),this._data=i}else if(6===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5];zo.constructor_.call(this,new f(t,e,i),new f(n,s,r))}else if(7===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=arguments[4],r=arguments[5],o=arguments[6];zo.constructor_.call(this,new f(t,e,i),new f(n,s,r),o)}}getStartZ(){return this._ls.getCoordinate(0).getZ()}intersection(t){return this._ls.intersection(t.getLineSegment())}getStart(){return this._ls.getCoordinate(0)}getEnd(){return this._ls.getCoordinate(1)}getEndY(){return this._ls.getCoordinate(1).y}getStartX(){return this._ls.getCoordinate(0).x}setData(t){this._data=t}getData(){return this._data}getEndX(){return this._ls.getCoordinate(1).x}toString(){return this._ls.toString()}getLineSegment(){return this._ls}getEndZ(){return this._ls.getCoordinate(1).getZ()}equalsTopo(t){return this._ls.equalsTopo(t.getLineSegment())}getStartY(){return this._ls.getCoordinate(0).y}}class Ko{constructor(){Ko.constructor_.apply(this,arguments)}static constructor_(){this._seg=null,this._segLen=null,this._splitPt=null,this._minimumLen=0;const t=arguments[0];this._seg=t,this._segLen=t.getLength()}static pointAlongReverse(t,e){const i=new f;return i.x=t.p1.x-e*(t.p1.x-t.p0.x),i.y=t.p1.y-e*(t.p1.y-t.p0.y),i}splitAt(){if(1===arguments.length){const t=arguments[0],e=this._minimumLen/this._segLen;if(t.distance(this._seg.p0)<this._minimumLen)return this._splitPt=this._seg.pointAlong(e),null;if(t.distance(this._seg.p1)<this._minimumLen)return this._splitPt=Ko.pointAlongReverse(this._seg,e),null;this._splitPt=t}else if(2===arguments.length){const t=arguments[0],e=arguments[1],i=this.getConstrainedLength(t)/this._segLen;e.equals2D(this._seg.p0)?this._splitPt=this._seg.pointAlong(i):this._splitPt=Ko.pointAlongReverse(this._seg,i)}}getSplitPoint(){return this._splitPt}getConstrainedLength(t){return t<this._minimumLen?this._minimumLen:t}setMinimumLength(t){this._minimumLen=t}}class jo{findSplitPoint(t,e){}}class Wo{static projectedSplitPoint(t,e){return t.getLineSegment().project(e)}findSplitPoint(t,e){const i=t.getLineSegment(),n=i.getLength()/2,s=new Ko(i),r=Wo.projectedSplitPoint(t,e);let o=2*r.distance(e)*.8;return o>n&&(o=n),s.setMinimumLength(o),s.splitAt(r),s.getSplitPoint()}get interfaces_(){return[jo]}}class $o{static checkRobustInCircle(t,e,i,n){const s=$o.isInCircleNonRobust(t,e,i,n),r=$o.isInCircleDDSlow(t,e,i,n),o=$o.isInCircleCC(t,e,i,n),a=ie.circumcentre(t,e,i);Q.out.println("p radius diff a = "+Math.abs(n.distance(a)-t.distance(a))/t.distance(a)),s===r&&s===o||(Q.out.println("inCircle robustness failure (double result = "+s+", DD result = "+r+", CC result = "+o+")"),Q.out.println(Wt.toLineString(new st([t,e,i,n]))),Q.out.println("Circumcentre = "+Wt.toPoint(a)+" radius = "+t.distance(a)),Q.out.println("p radius diff a = "+Math.abs(n.distance(a)/t.distance(a)-1)),Q.out.println("p radius diff b = "+Math.abs(n.distance(a)/e.distance(a)-1)),Q.out.println("p radius diff c = "+Math.abs(n.distance(a)/i.distance(a)-1)),Q.out.println())}static isInCircleDDFast(t,e,i,n){const s=U.sqr(t.x).selfAdd(U.sqr(t.y)).selfMultiply($o.triAreaDDFast(e,i,n)),r=U.sqr(e.x).selfAdd(U.sqr(e.y)).selfMultiply($o.triAreaDDFast(t,i,n)),o=U.sqr(i.x).selfAdd(U.sqr(i.y)).selfMultiply($o.triAreaDDFast(t,e,n)),a=U.sqr(n.x).selfAdd(U.sqr(n.y)).selfMultiply($o.triAreaDDFast(t,e,i));return s.selfSubtract(r).selfAdd(o).selfSubtract(a).doubleValue()>0}static isInCircleCC(t,e,i,n){const s=ie.circumcentre(t,e,i),r=t.distance(s);return n.distance(s)-r<=0}static isInCircleNormalized(t,e,i,n){const s=t.x-n.x,r=t.y-n.y,o=e.x-n.x,a=e.y-n.y,l=i.x-n.x,A=i.y-n.y;return(s*s+r*r)*(o*A-l*a)+(o*o+a*a)*(l*r-s*A)+(l*l+A*A)*(s*a-o*r)>0}static isInCircleDDSlow(t,e,i,n){const s=U.valueOf(n.x),r=U.valueOf(n.y),o=U.valueOf(t.x),a=U.valueOf(t.y),l=U.valueOf(e.x),A=U.valueOf(e.y),c=U.valueOf(i.x),h=U.valueOf(i.y),u=o.multiply(o).add(a.multiply(a)).multiply($o.triAreaDDSlow(l,A,c,h,s,r)),d=l.multiply(l).add(A.multiply(A)).multiply($o.triAreaDDSlow(o,a,c,h,s,r)),g=c.multiply(c).add(h.multiply(h)).multiply($o.triAreaDDSlow(o,a,l,A,s,r)),p=s.multiply(s).add(r.multiply(r)).multiply($o.triAreaDDSlow(o,a,l,A,c,h));return u.subtract(d).add(g).subtract(p).doubleValue()>0}static isInCircleNonRobust(t,e,i,n){return(t.x*t.x+t.y*t.y)*$o.triArea(e,i,n)-(e.x*e.x+e.y*e.y)*$o.triArea(t,i,n)+(i.x*i.x+i.y*i.y)*$o.triArea(t,e,n)-(n.x*n.x+n.y*n.y)*$o.triArea(t,e,i)>0}static isInCircleRobust(t,e,i,n){return $o.isInCircleNormalized(t,e,i,n)}static triAreaDDSlow(t,e,i,n,s,r){return i.subtract(t).multiply(r.subtract(e)).subtract(n.subtract(e).multiply(s.subtract(t)))}static triAreaDDFast(t,e,i){const n=U.valueOf(e.x).selfSubtract(t.x).selfMultiply(U.valueOf(i.y).selfSubtract(t.y)),s=U.valueOf(e.y).selfSubtract(t.y).selfMultiply(U.valueOf(i.x).selfSubtract(t.x));return n.selfSubtract(s)}static triArea(t,e,i){return(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)}static isInCircleDDNormalized(t,e,i,n){const s=U.valueOf(t.x).selfSubtract(n.x),r=U.valueOf(t.y).selfSubtract(n.y),o=U.valueOf(e.x).selfSubtract(n.x),a=U.valueOf(e.y).selfSubtract(n.y),l=U.valueOf(i.x).selfSubtract(n.x),A=U.valueOf(i.y).selfSubtract(n.y),c=s.multiply(a).selfSubtract(o.multiply(r)),h=o.multiply(A).selfSubtract(l.multiply(a)),u=l.multiply(r).selfSubtract(s.multiply(A)),d=s.multiply(s).selfAdd(r.multiply(r)),g=o.multiply(o).selfAdd(a.multiply(a)),p=l.multiply(l).selfAdd(A.multiply(A));return d.selfMultiply(h).selfAdd(g.selfMultiply(u)).selfAdd(p.selfMultiply(c)).doubleValue()>0}}class Yo{constructor(){Yo.constructor_.apply(this,arguments)}static constructor_(){if(this._p=null,1===arguments.length){const t=arguments[0];this._p=new f(t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];this._p=new f(t,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._p=new f(t,e,i)}}static interpolateZ(){if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=e.distance(i),s=t.distance(e),r=i.getZ()-e.getZ();return e.getZ()+r*(s/n)}if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3],s=e.x,r=e.y,o=i.x-s,a=n.x-s,l=i.y-r,A=n.y-r,c=o*A-a*l,h=t.x-s,u=t.y-r,d=(A*h-a*u)/c,g=(-l*h+o*u)/c;return e.getZ()+d*(i.getZ()-e.getZ())+g*(n.getZ()-e.getZ())}}magn(){return Math.sqrt(this._p.x*this._p.x+this._p.y*this._p.y)}equals(){if(1===arguments.length){const t=arguments[0];return this._p.x===t.getX()&&this._p.y===t.getY()}if(2===arguments.length){const t=arguments[0],e=arguments[1];return this._p.distance(t.getCoordinate())<e}}rightOf(t){return this.isCCW(t.dest(),t.orig())}isCCW(t,e){return(t._p.x-this._p.x)*(e._p.y-this._p.y)-(t._p.y-this._p.y)*(e._p.x-this._p.x)>0}getX(){return this._p.x}crossProduct(t){return this._p.x*t.getY()-this._p.y*t.getX()}setZ(t){this._p.setZ(t)}times(t){return new Yo(t*this._p.x,t*this._p.y)}cross(){return new Yo(this._p.y,-this._p.x)}leftOf(t){return this.isCCW(t.orig(),t.dest())}getY(){return this._p.y}classify(t,e){const i=this,n=e.sub(t),s=i.sub(t),r=n.crossProduct(s);return r>0?Yo.LEFT:r<0?Yo.RIGHT:n.getX()*s.getX()<0||n.getY()*s.getY()<0?Yo.BEHIND:n.magn()<s.magn()?Yo.BEYOND:t.equals(i)?Yo.ORIGIN:e.equals(i)?Yo.DESTINATION:Yo.BETWEEN}circumRadiusRatio(t,e){const i=this.circleCenter(t,e),n=this.distance(i,t);let s=this.distance(this,t),r=this.distance(t,e);return r<s&&(s=r),r=this.distance(e,this),r<s&&(s=r),n/s}circleCenter(t,e){const i=new Yo(this.getX(),this.getY()),n=this.bisector(i,t),s=this.bisector(t,e),r=new ee(n,s);let o=null;try{o=new Yo(r.getX(),r.getY())}catch(n){if(!(n instanceof te))throw n;Q.err.println("a: "+i+"  b: "+t+"  c: "+e),Q.err.println(n)}return o}dot(t){return this._p.x*t.getX()+this._p.y*t.getY()}getZ(){return this._p.getZ()}bisector(t,e){const i=e.getX()-t.getX(),n=e.getY()-t.getY(),s=new ee(t.getX()+i/2,t.getY()+n/2,1),r=new ee(t.getX()-n+i/2,t.getY()+i+n/2,1);return new ee(s,r)}getCoordinate(){return this._p}isInCircle(t,e,i){return $o.isInCircleRobust(t._p,e._p,i._p,this._p)}interpolateZValue(t,e,i){const n=t.getX(),s=t.getY(),r=e.getX()-n,o=i.getX()-n,a=e.getY()-s,l=i.getY()-s,A=r*l-o*a,c=this.getX()-n,h=this.getY()-s,u=(l*c-o*h)/A,d=(-a*c+r*h)/A;return t.getZ()+u*(e.getZ()-t.getZ())+d*(i.getZ()-t.getZ())}midPoint(t){const e=(this._p.x+t.getX())/2,i=(this._p.y+t.getY())/2,n=(this._p.getZ()+t.getZ())/2;return new Yo(e,i,n)}toString(){return"POINT ("+this._p.x+" "+this._p.y+")"}sub(t){return new Yo(this._p.x-t.getX(),this._p.y-t.getY())}sum(t){return new Yo(this._p.x+t.getX(),this._p.y+t.getY())}distance(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))}}Yo.LEFT=0,Yo.RIGHT=1,Yo.BEYOND=2,Yo.BEHIND=3,Yo.BETWEEN=4,Yo.ORIGIN=5,Yo.DESTINATION=6;class Xo extends Yo{constructor(){super(),Xo.constructor_.apply(this,arguments)}static constructor_(){this._isOnConstraint=null,this._constraint=null;const t=arguments[0];Yo.constructor_.call(this,t)}getConstraint(){return this._constraint}setOnConstraint(t){this._isOnConstraint=t}setConstraint(t){this._isOnConstraint=!0,this._constraint=t}merge(t){t._isOnConstraint&&(this._isOnConstraint=!0,this._constraint=t._constraint)}isOnConstraint(){return this._isOnConstraint}}class qo{constructor(){qo.constructor_.apply(this,arguments)}static constructor_(){this._rot=null,this._vertex=null,this._next=null,this._data=null}static swap(t){const e=t.oPrev(),i=t.sym().oPrev();qo.splice(t,e),qo.splice(t.sym(),i),qo.splice(t,e.lNext()),qo.splice(t.sym(),i.lNext()),t.setOrig(e.dest()),t.setDest(i.dest())}static splice(t,e){const i=t.oNext().rot(),n=e.oNext().rot(),s=e.oNext(),r=t.oNext(),o=n.oNext(),a=i.oNext();t.setNext(s),e.setNext(r),i.setNext(o),n.setNext(a)}static makeEdge(t,e){const i=new qo,n=new qo,s=new qo,r=new qo;i._rot=n,n._rot=s,s._rot=r,r._rot=i,i.setNext(i),n.setNext(r),s.setNext(s),r.setNext(n);const o=i;return o.setOrig(t),o.setDest(e),o}static connect(t,e){const i=qo.makeEdge(t.dest(),e.orig());return qo.splice(i,t.lNext()),qo.splice(i.sym(),e),i}equalsNonOriented(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())}oNext(){return this._next}equalsOriented(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))}dNext(){return this.sym().oNext().sym()}lPrev(){return this._next.sym()}rPrev(){return this.sym().oNext()}rot(){return this._rot}oPrev(){return this._rot._next._rot}sym(){return this._rot._rot}setOrig(t){this._vertex=t}lNext(){return this.invRot().oNext().rot()}getLength(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())}setData(t){this._data=t}getData(){return this._data}delete(){this._rot=null}toString(){const t=this._vertex.getCoordinate(),e=this.dest().getCoordinate();return Wt.toLineString(t,e)}isLive(){return null!==this._rot}getPrimary(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()}toLineSegment(){return new Xt(this._vertex.getCoordinate(),this.dest().getCoordinate())}dest(){return this.sym().orig()}invRot(){return this._rot.sym()}setDest(t){this.sym().setOrig(t)}orig(){return this._vertex}rNext(){return this._rot._next.invRot()}dPrev(){return this.invRot().oNext().invRot()}setNext(t){this._next=t}}class Zo{constructor(){Zo.constructor_.apply(this,arguments)}static constructor_(){this._subdiv=null,this._isUsingTolerance=!1;const t=arguments[0];this._subdiv=t,this._isUsingTolerance=t.getTolerance()>0}insertSite(t){let e=this._subdiv.locate(t);if(this._subdiv.isVertexOfEdge(e,t))return e;this._subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this._subdiv.delete(e.oNext()));let i=this._subdiv.makeEdge(e.orig(),t);qo.splice(i,e);const n=i;do{i=this._subdiv.connect(e,i.sym()),e=i.oPrev()}while(e.lNext()!==n);for(;;){const s=e.oPrev();if(s.dest().rightOf(e)&&t.isInCircle(e.orig(),s.dest(),e.dest()))qo.swap(e),e=e.oPrev();else{if(e.oNext()===n)return i;e=e.oNext().lPrev()}}}insertSites(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this.insertSite(t)}}}class Jo extends l{constructor(){super(),Jo.constructor_.apply(this,arguments)}static constructor_(){if(this._seg=null,1===arguments.length){if("string"==typeof arguments[0]){const t=arguments[0];l.constructor_.call(this,t)}else if(arguments[0]instanceof Xt){const t=arguments[0];l.constructor_.call(this,"Locate failed to converge (at edge: "+t+").  Possible causes include invalid Subdivision topology or very close sites"),this._seg=new Xt(t)}}else if(2===arguments.length){const t=arguments[0],e=arguments[1];l.constructor_.call(this,Jo.msgWithSpatial(t,e)),this._seg=new Xt(e)}}static msgWithSpatial(t,e){return null!==e?t+" [ "+e+" ]":t}getSegment(){return this._seg}}class ta{visit(t){}}class ea{constructor(){ea.constructor_.apply(this,arguments)}static constructor_(){this._visitedKey=0,this._quadEdges=new E,this._startingEdge=null,this._tolerance=null,this._edgeCoincidenceTolerance=null,this._frameVertex=new Array(3).fill(null),this._frameEnv=null,this._locator=null,this._seg=new Xt,this._triEdges=new Array(3).fill(null);const t=arguments[0],e=arguments[1];this._tolerance=e,this._edgeCoincidenceTolerance=e/ea.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this._startingEdge=this.initSubdiv(),this._locator=new Vo(this)}static getTriangleEdges(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new n("Edges do not form a triangle")}getTriangleVertices(t){const e=new sa;return this.visitTriangles(e,t),e.getTriangleVertices()}isFrameVertex(t){return!!t.equals(this._frameVertex[0])||!!t.equals(this._frameVertex[1])||!!t.equals(this._frameVertex[2])}isVertexOfEdge(t,e){return!(!e.equals(t.orig(),this._tolerance)&&!e.equals(t.dest(),this._tolerance))}connect(t,e){const i=qo.connect(t,e);return this._quadEdges.add(i),i}visitTriangles(t,e){this._visitedKey++;const i=new $i;i.push(this._startingEdge);const n=new pt;for(;!i.empty();){const s=i.pop();if(!n.contains(s)){const r=this.fetchTriangleToVisit(s,i,e,n);null!==r&&t.visit(r)}}}isFrameEdge(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))}isOnEdge(t,e){return this._seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this._seg.distance(e)<this._edgeCoincidenceTolerance}getEnvelope(){return new L(this._frameEnv)}getVertexUniqueEdges(t){const e=new E,i=new pt;for(let n=this._quadEdges.iterator();n.hasNext();){const s=n.next(),r=s.orig();i.contains(r)||(i.add(r),!t&&this.isFrameVertex(r)||e.add(s));const o=s.sym(),a=o.orig();i.contains(a)||(i.add(a),!t&&this.isFrameVertex(a)||e.add(o))}return e}locateFromEdge(t,e){let i=0;const n=this._quadEdges.size();let s=e;for(;;){if(i++,i>n)throw new Jo(s.toLineSegment());if(t.equals(s.orig())||t.equals(s.dest()))break;if(t.rightOf(s))s=s.sym();else if(t.rightOf(s.oNext())){if(t.rightOf(s.dPrev()))break;s=s.dPrev()}else s=s.oNext()}return s}getVoronoiDiagram(t){const e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(Et.toGeometryArray(e))}getTriangles(t){const e=this.getTriangleCoordinates(!1),i=new Array(e.size()).fill(null);let n=0;for(let s=e.iterator();s.hasNext();){const e=s.next();i[n++]=t.createPolygon(t.createLinearRing(e))}return t.createGeometryCollection(i)}getVoronoiCellPolygon(t,e){const i=new E,n=t;do{const e=t.rot().orig().getCoordinate();i.add(e),t=t.oPrev()}while(t!==n);const s=new F;s.addAll(i,!1),s.closeRing(),s.size()<4&&(Q.out.println(s),s.add(s.get(s.size()-1),!0));const r=s.toCoordinateArray(),o=e.createPolygon(e.createLinearRing(r)),a=n.orig();return o.setUserData(a.getCoordinate()),o}setLocator(t){this._locator=t}initSubdiv(){const t=this.makeEdge(this._frameVertex[0],this._frameVertex[1]),e=this.makeEdge(this._frameVertex[1],this._frameVertex[2]);qo.splice(t.sym(),e);const i=this.makeEdge(this._frameVertex[2],this._frameVertex[0]);return qo.splice(e.sym(),i),qo.splice(i.sym(),t),t}isFrameBorderEdge(t){const e=new Array(3).fill(null);ea.getTriangleEdges(t,e);const i=new Array(3).fill(null);ea.getTriangleEdges(t.sym(),i);const n=t.lNext().dest();if(this.isFrameVertex(n))return!0;const s=t.sym().lNext().dest();return!!this.isFrameVertex(s)}makeEdge(t,e){const i=qo.makeEdge(t,e);return this._quadEdges.add(i),i}createFrame(t){const e=t.getWidth(),i=t.getHeight();let n=0;n=e>i?10*e:10*i,this._frameVertex[0]=new Yo((t.getMaxX()+t.getMinX())/2,t.getMaxY()+n),this._frameVertex[1]=new Yo(t.getMinX()-n,t.getMinY()-n),this._frameVertex[2]=new Yo(t.getMaxX()+n,t.getMinY()-n),this._frameEnv=new L(this._frameVertex[0].getCoordinate(),this._frameVertex[1].getCoordinate()),this._frameEnv.expandToInclude(this._frameVertex[2].getCoordinate())}getTriangleCoordinates(t){const e=new ra;return this.visitTriangles(e,t),e.getTriangles()}getVertices(t){const e=new pt;for(let i=this._quadEdges.iterator();i.hasNext();){const n=i.next(),s=n.orig();!t&&this.isFrameVertex(s)||e.add(s);const r=n.dest();!t&&this.isFrameVertex(r)||e.add(r)}return e}fetchTriangleToVisit(t,e,i,n){let s=t,r=0,o=!1;do{this._triEdges[r]=s,this.isFrameEdge(s)&&(o=!0);const t=s.sym();n.contains(t)||e.push(t),n.add(s),r++,s=s.lNext()}while(s!==t);return o&&!i?null:this._triEdges}getEdges(){if(0===arguments.length)return this._quadEdges;if(1===arguments.length){const t=arguments[0],e=this.getPrimaryEdges(!1),i=new Array(e.size()).fill(null);let n=0;for(let s=e.iterator();s.hasNext();){const e=s.next();i[n++]=t.createLineString([e.orig().getCoordinate(),e.dest().getCoordinate()])}return t.createMultiLineString(i)}}getTriangleEdges(t){const e=new na;return this.visitTriangles(e,t),e.getTriangleEdges()}getPrimaryEdges(t){this._visitedKey++;const e=new E,i=new $i;i.push(this._startingEdge);const n=new pt;for(;!i.empty();){const s=i.pop();if(!n.contains(s)){const r=s.getPrimary();!t&&this.isFrameEdge(r)||e.add(r),i.push(s.oNext()),i.push(s.sym().oNext()),n.add(s),n.add(s.sym())}}return e}delete(t){qo.splice(t,t.oPrev()),qo.splice(t.sym(),t.sym().oPrev());const e=t.sym(),i=t.rot(),n=t.rot().sym();this._quadEdges.remove(t),this._quadEdges.remove(e),this._quadEdges.remove(i),this._quadEdges.remove(n),t.delete(),e.delete(),i.delete(),n.delete()}getTolerance(){return this._tolerance}getVoronoiCellPolygons(t){this.visitTriangles(new ia,!0);const e=new E;for(let i=this.getVertexUniqueEdges(!1).iterator();i.hasNext();){const n=i.next();e.add(this.getVoronoiCellPolygon(n,t))}return e}insertSite(t){let e=this.locate(t);if(t.equals(e.orig(),this._tolerance)||t.equals(e.dest(),this._tolerance))return e;let i=this.makeEdge(e.orig(),t);qo.splice(i,e);const n=i;do{i=this.connect(e,i.sym()),e=i.oPrev()}while(e.lNext()!==n);return n}locate(){if(1===arguments.length){if(arguments[0]instanceof Yo){const t=arguments[0];return this._locator.locate(t)}if(arguments[0]instanceof f){const t=arguments[0];return this._locator.locate(new Yo(t))}}else if(2===arguments.length){const t=arguments[0],e=arguments[1],i=this._locator.locate(new Yo(t));if(null===i)return null;let n=i;i.dest().getCoordinate().equals2D(t)&&(n=i.sym());let s=n;do{if(s.dest().getCoordinate().equals2D(e))return s;s=s.oNext()}while(s!==n);return null}}}class ia{visit(t){const e=t[0].orig().getCoordinate(),i=t[1].orig().getCoordinate(),n=t[2].orig().getCoordinate(),s=ie.circumcentreDD(e,i,n),r=new Yo(s);for(let e=0;e<3;e++)t[e].rot().setOrig(r)}get interfaces_(){return[ta]}}class na{constructor(){na.constructor_.apply(this,arguments)}static constructor_(){this._triList=new E}getTriangleEdges(){return this._triList}visit(t){this._triList.add(t)}get interfaces_(){return[ta]}}class sa{constructor(){sa.constructor_.apply(this,arguments)}static constructor_(){this._triList=new E}getTriangleVertices(){return this._triList}visit(t){this._triList.add([t[0].orig(),t[1].orig(),t[2].orig()])}get interfaces_(){return[ta]}}class ra{constructor(){ra.constructor_.apply(this,arguments)}static constructor_(){this._coordList=new F,this._triCoords=new E}checkTriangleSize(t){t.length>=2?Wt.toLineString(t[0],t[1]):t.length>=1&&Wt.toPoint(t[0])}visit(t){this._coordList.clear();for(let e=0;e<3;e++){const i=t[e].orig();this._coordList.add(i.getCoordinate())}if(this._coordList.size()>0){this._coordList.closeRing();const t=this._coordList.toCoordinateArray();if(4!==t.length)return null;this._triCoords.add(t)}}getTriangles(){return this._triCoords}get interfaces_(){return[ta]}}ea.TriangleCircumcentreVisitor=ia,ea.TriangleEdgesListVisitor=na,ea.TriangleVertexListVisitor=sa,ea.TriangleCoordinatesVisitor=ra,ea.EDGE_COINCIDENCE_TOL_FACTOR=1e3;class oa extends l{constructor(){super(),oa.constructor_.apply(this,arguments)}static constructor_(){if(this._pt=null,1===arguments.length){const t=arguments[0];l.constructor_.call(this,t)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];l.constructor_.call(this,oa.msgWithCoord(t,e)),this._pt=new f(e)}}static msgWithCoord(t,e){return null!==e?t+" [ "+Wt.toPoint(e)+" ]":t}getCoordinate(){return this._pt}}class aa{constructor(){aa.constructor_.apply(this,arguments)}static constructor_(){this._initialVertices=null,this._segVertices=null,this._segments=new E,this._subdiv=null,this._incDel=null,this._convexHull=null,this._splitFinder=new Wo,this._kdt=null,this._vertexFactory=null,this._computeAreaEnv=null,this._splitPt=null,this._tolerance=null;const t=arguments[0],e=arguments[1];this._initialVertices=new E(t),this._tolerance=e,this._kdt=new Ps(e)}static computeVertexEnvelope(t){const e=new L;for(let i=t.iterator();i.hasNext();){const t=i.next();e.expandToInclude(t.getCoordinate())}return e}getInitialVertices(){return this._initialVertices}getKDT(){return this._kdt}setConstraints(t,e){this._segments=t,this._segVertices=e}computeConvexHull(){const t=new Et,e=this.getPointArray(),i=new gs(e,t);this._convexHull=i.getConvexHull()}addConstraintVertices(){this.computeConvexHull(),this.insertSites(this._segVertices)}getTolerance(){return this._tolerance}setVertexFactory(t){this._vertexFactory=t}formInitialDelaunay(){this.computeBoundingBox(),this._subdiv=new ea(this._computeAreaEnv,this._tolerance),this._subdiv.setLocator(new Vo(this._subdiv)),this._incDel=new Zo(this._subdiv),this.insertSites(this._initialVertices)}insertSite(){if(arguments[0]instanceof Xo){const t=arguments[0],e=this._kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){const i=e.getData();return i.merge(t),i}return this._incDel.insertSite(t),t}if(arguments[0]instanceof f){const t=arguments[0];this.insertSite(this.createVertex(t))}}enforceConstraints(){this.addConstraintVertices();let t=0,e=0;do{e=this.enforceGabriel(this._segments),t++}while(e>0&&t<aa.MAX_SPLIT_ITER);if(t===aa.MAX_SPLIT_ITER)throw new oa("Too many splitting iterations while enforcing constraints.  Last split point was at: ",this._splitPt)}insertSites(t){for(let e=t.iterator();e.hasNext();){const t=e.next();this.insertSite(t)}}getVertexFactory(){return this._vertexFactory}getPointArray(){const t=new Array(this._initialVertices.size()+this._segVertices.size()).fill(null);let e=0;for(let i=this._initialVertices.iterator();i.hasNext();){const n=i.next();t[e++]=n.getCoordinate()}for(let i=this._segVertices.iterator();i.hasNext();){const n=i.next();t[e++]=n.getCoordinate()}return t}findNonGabrielPoint(t){const e=t.getStart(),i=t.getEnd(),n=new f((e.x+i.x)/2,(e.y+i.y)/2),s=e.distance(n),o=new L(n);o.expandBy(s);const a=this._kdt.query(o);let l=null,A=r.MAX_VALUE;for(let t=a.iterator();t.hasNext();){const r=t.next().getCoordinate();if(r.equals2D(e)||r.equals2D(i))continue;const o=n.distance(r);o<s&&(null===l||o<A)&&(l=r,A=o)}return l}getConstraintSegments(){return this._segments}setSplitPointFinder(t){this._splitFinder=t}getConvexHull(){return this._convexHull}enforceGabriel(t){const e=new E;let i=0;const n=new E;for(let s=t.iterator();s.hasNext();){const t=s.next(),r=this.findNonGabrielPoint(t);if(null===r)continue;this._splitPt=this._splitFinder.findSplitPoint(t,r);const o=this.createVertex(this._splitPt,t);this.insertSite(o).getCoordinate().equals2D(this._splitPt);const a=new zo(t.getStartX(),t.getStartY(),t.getStartZ(),o.getX(),o.getY(),o.getZ(),t.getData()),l=new zo(o.getX(),o.getY(),o.getZ(),t.getEndX(),t.getEndY(),t.getEndZ(),t.getData());e.add(a),e.add(l),n.add(t),i+=1}return t.removeAll(n),t.addAll(e),i}createVertex(){if(1===arguments.length){const t=arguments[0];let e=null;return e=null!==this._vertexFactory?this._vertexFactory.createVertex(t,null):new Xo(t),e}if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=null;return i=null!==this._vertexFactory?this._vertexFactory.createVertex(t,e):new Xo(t),i.setOnConstraint(!0),i}}getSubdivision(){return this._subdiv}computeBoundingBox(){const t=aa.computeVertexEnvelope(this._initialVertices),e=aa.computeVertexEnvelope(this._segVertices),i=new L(t);i.expandToInclude(e);const n=.2*i.getWidth(),s=.2*i.getHeight(),r=Math.max(n,s);this._computeAreaEnv=new L(i),this._computeAreaEnv.expandBy(r)}}aa.MAX_SPLIT_ITER=99;class la{constructor(){la.constructor_.apply(this,arguments)}static constructor_(){this._siteCoords=null,this._tolerance=0,this._subdiv=null}static envelope(t){const e=new L;for(let i=t.iterator();i.hasNext();){const t=i.next();e.expandToInclude(t)}return e}static unique(t){const e=W.copyDeep(t);return ct.sort(e),new F(e,!1)}static extractUniqueCoordinates(t){if(null===t)return new F;const e=t.getCoordinates();return la.unique(e)}static toVertices(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next();e.add(new Yo(t))}return e}create(){if(null!==this._subdiv)return null;const t=la.envelope(this._siteCoords),e=la.toVertices(this._siteCoords);this._subdiv=new ea(t,this._tolerance),new Zo(this._subdiv).insertSites(e)}setTolerance(t){this._tolerance=t}setSites(){if(arguments[0]instanceof Y){const t=arguments[0];this._siteCoords=la.extractUniqueCoordinates(t)}else if(v(arguments[0],b)){const t=arguments[0];this._siteCoords=la.unique(W.toCoordinateArray(t))}}getEdges(t){return this.create(),this._subdiv.getEdges(t)}getSubdivision(){return this.create(),this._subdiv}getTriangles(t){return this.create(),this._subdiv.getTriangles(t)}}class Aa{constructor(){Aa.constructor_.apply(this,arguments)}static constructor_(){this._siteCoords=null,this._constraintLines=null,this._tolerance=0,this._subdiv=null,this._constraintVertexMap=new li}static createConstraintSegments(){if(1===arguments.length){const t=arguments[0],e=_e.getLines(t),i=new E;for(let t=e.iterator();t.hasNext();){const e=t.next();Aa.createConstraintSegments(e,i)}return i}if(2===arguments.length){const t=arguments[1],e=arguments[0].getCoordinates();for(let i=1;i<e.length;i++)t.add(new zo(e[i-1],e[i]))}}createSiteVertices(t){const e=new E;for(let i=t.iterator();i.hasNext();){const t=i.next();this._constraintVertexMap.containsKey(t)||e.add(new Xo(t))}return e}create(){if(null!==this._subdiv)return null;const t=la.envelope(this._siteCoords);let e=new E;null!==this._constraintLines&&(t.expandToInclude(this._constraintLines.getEnvelopeInternal()),this.createVertices(this._constraintLines),e=Aa.createConstraintSegments(this._constraintLines));const i=this.createSiteVertices(this._siteCoords),n=new aa(i,this._tolerance);n.setConstraints(e,new E(this._constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this._subdiv=n.getSubdivision()}setTolerance(t){this._tolerance=t}setConstraints(t){this._constraintLines=t}setSites(t){this._siteCoords=la.extractUniqueCoordinates(t)}getEdges(t){return this.create(),this._subdiv.getEdges(t)}getSubdivision(){return this.create(),this._subdiv}getTriangles(t){return this.create(),this._subdiv.getTriangles(t)}createVertices(t){const e=t.getCoordinates();for(let t=0;t<e.length;t++){const i=new Xo(e[t]);this._constraintVertexMap.put(e[t],i)}}}class ca{constructor(){ca.constructor_.apply(this,arguments)}static constructor_(){this._siteCoords=null,this._tolerance=0,this._subdiv=null,this._clipEnv=null,this._diagramEnv=null}static clipGeometryCollection(t,e){const i=t.getFactory().toGeometry(e),n=new E;for(let s=0;s<t.getNumGeometries();s++){const r=t.getGeometryN(s);let o=null;e.contains(r.getEnvelopeInternal())?o=r:e.intersects(r.getEnvelopeInternal())&&(o=os.intersection(i,r),o.setUserData(r.getUserData())),null===o||o.isEmpty()||n.add(o)}return t.getFactory().createGeometryCollection(Et.toGeometryArray(n))}create(){if(null!==this._subdiv)return null;const t=la.envelope(this._siteCoords);if(this._diagramEnv=this._clipEnv,null===this._diagramEnv){this._diagramEnv=t;const e=this._diagramEnv.getDiameter();this._diagramEnv.expandBy(e)}const e=la.toVertices(this._siteCoords);this._subdiv=new ea(t,this._tolerance),new Zo(this._subdiv).insertSites(e)}setSites(){if(arguments[0]instanceof Y){const t=arguments[0];this._siteCoords=la.extractUniqueCoordinates(t)}else if(v(arguments[0],b)){const t=arguments[0];this._siteCoords=la.unique(W.toCoordinateArray(t))}}setClipEnvelope(t){this._clipEnv=t}getSubdivision(){return this.create(),this._subdiv}getDiagram(t){this.create();const e=this._subdiv.getVoronoiDiagram(t);return ca.clipGeometryCollection(e,this._diagramEnv)}setTolerance(t){this._tolerance=t}}var ha=Object.freeze({__proto__:null,Vertex:Yo}),ua=Object.freeze({__proto__:null,ConformingDelaunayTriangulationBuilder:Aa,DelaunayTriangulationBuilder:la,VoronoiDiagramBuilder:ca,quadedge:ha});class da{constructor(){da.constructor_.apply(this,arguments)}static constructor_(){if(this._linearGeom=null,this._numLines=null,this._currentLine=null,this._componentIndex=0,this._vertexIndex=0,1===arguments.length){const t=arguments[0];da.constructor_.call(this,t,0,0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];da.constructor_.call(this,t,e.getComponentIndex(),da.segmentEndVertexIndex(e))}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];if(!v(t,q))throw new n("Lineal geometry is required");this._linearGeom=t,this._numLines=t.getNumGeometries(),this._componentIndex=e,this._vertexIndex=i,this.loadCurrentLine()}}static segmentEndVertexIndex(t){return t.getSegmentFraction()>0?t.getSegmentIndex()+1:t.getSegmentIndex()}getComponentIndex(){return this._componentIndex}getLine(){return this._currentLine}getVertexIndex(){return this._vertexIndex}getSegmentEnd(){return this._vertexIndex<this.getLine().getNumPoints()-1?this._currentLine.getCoordinateN(this._vertexIndex+1):null}next(){if(!this.hasNext())return null;this._vertexIndex++,this._vertexIndex>=this._currentLine.getNumPoints()&&(this._componentIndex++,this.loadCurrentLine(),this._vertexIndex=0)}loadCurrentLine(){if(this._componentIndex>=this._numLines)return this._currentLine=null,null;this._currentLine=this._linearGeom.getGeometryN(this._componentIndex)}getSegmentStart(){return this._currentLine.getCoordinateN(this._vertexIndex)}isEndOfLine(){return!(this._componentIndex>=this._numLines||this._vertexIndex<this._currentLine.getNumPoints()-1)}hasNext(){return!(this._componentIndex>=this._numLines||this._componentIndex===this._numLines-1&&this._vertexIndex>=this._currentLine.getNumPoints())}}class ga{constructor(){ga.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;const t=arguments[0];this._linearGeom=t}static indexOf(t,e){return new ga(t).indexOf(e)}static indexOfAfter(t,e,i){return new ga(t).indexOfAfter(e,i)}segmentNearestMeasure(t,e,i){const n=t.projectionFactor(e);return n<=0?i:n<=1?i+n*t.getLength():i+t.getLength()}indexOfFromStart(t,e){let i=r.MAX_VALUE,n=e,s=0;const o=new Xt,a=new da(this._linearGeom);for(;a.hasNext();){if(!a.isEndOfLine()){o.p0=a.getSegmentStart(),o.p1=a.getSegmentEnd();const r=o.distance(t),l=this.segmentNearestMeasure(o,t,s);r<i&&l>e&&(n=l,i=r),s+=o.getLength()}a.next()}return n}indexOf(t){return this.indexOfFromStart(t,-1)}indexOfAfter(t,e){if(e<0)return this.indexOf(t);const i=this._linearGeom.getLength();if(i<e)return i;const n=this.indexOfFromStart(t,e);return c.isTrue(n>=e,"computed index is before specified minimum index"),n}}class pa{constructor(){pa.constructor_.apply(this,arguments)}static constructor_(){this._geomFact=null,this._lines=new E,this._coordList=null,this._ignoreInvalidLines=!1,this._fixInvalidLines=!1,this._lastPt=null;const t=arguments[0];this._geomFact=t}getGeometry(){return this.endLine(),this._geomFact.buildGeometry(this._lines)}getLastCoordinate(){return this._lastPt}endLine(){if(null===this._coordList)return null;if(this._ignoreInvalidLines&&this._coordList.size()<2)return this._coordList=null,null;const t=this._coordList.toCoordinateArray();let e=t;this._fixInvalidLines&&(e=this.validCoordinateSequence(t)),this._coordList=null;let i=null;try{i=this._geomFact.createLineString(e)}catch(t){if(!(t instanceof n))throw t;if(!this._ignoreInvalidLines)throw t}null!==i&&this._lines.add(i)}setFixInvalidLines(t){this._fixInvalidLines=t}add(){if(1===arguments.length){const t=arguments[0];this.add(t,!0)}else if(2===arguments.length){const t=arguments[0],e=arguments[1];null===this._coordList&&(this._coordList=new F),this._coordList.add(t,e),this._lastPt=t}}setIgnoreInvalidLines(t){this._ignoreInvalidLines=t}validCoordinateSequence(t){return t.length>=2?t:[t[0],t[0]]}}class fa{constructor(){fa.constructor_.apply(this,arguments)}static constructor_(){this._line=null;const t=arguments[0];this._line=t}static extract(t,e,i){return new fa(t).extract(e,i)}extract(t,e){return e.compareTo(t)<0?this.reverse(this.computeLinear(e,t)):this.computeLinear(t,e)}computeLine(t,e){const i=this._line.getCoordinates(),n=new F;let s=t.getSegmentIndex();t.getSegmentFraction()>0&&(s+=1);let r=e.getSegmentIndex();1===e.getSegmentFraction()&&(r+=1),r>=i.length&&(r=i.length-1),t.isVertex()||n.add(t.getCoordinate(this._line));for(let t=s;t<=r;t++)n.add(i[t]);e.isVertex()||n.add(e.getCoordinate(this._line)),n.size()<=0&&n.add(t.getCoordinate(this._line));let o=n.toCoordinateArray();return o.length<=1&&(o=[o[0],o[0]]),this._line.getFactory().createLineString(o)}reverse(t){return v(t,q)?t.reverse():(c.shouldNeverReachHere("non-linear geometry encountered"),null)}computeLinear(t,e){const i=new pa(this._line.getFactory());i.setFixInvalidLines(!0),t.isVertex()||i.add(t.getCoordinate(this._line));for(let n=new da(this._line,t);n.hasNext()&&!(e.compareLocationValues(n.getComponentIndex(),n.getVertexIndex(),0)<0);n.next()){const t=n.getSegmentStart();i.add(t),n.isEndOfLine()&&i.endLine()}return e.isVertex()||i.add(e.getCoordinate(this._line)),i.getGeometry()}}class ma{constructor(){ma.constructor_.apply(this,arguments)}static constructor_(){if(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this._componentIndex=t._componentIndex,this._segmentIndex=t._segmentIndex,this._segmentFraction=t._segmentFraction}else if(2===arguments.length){const t=arguments[0],e=arguments[1];ma.constructor_.call(this,0,t,e)}else if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];this._componentIndex=t,this._segmentIndex=e,this._segmentFraction=i,this.normalize()}else if(4===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._componentIndex=t,this._segmentIndex=e,this._segmentFraction=i,n&&this.normalize()}}static numSegments(t){const e=t.getNumPoints();return e<=1?0:e-1}static compareLocationValues(t,e,i,n,s,r){return t<n?-1:t>n?1:e<s?-1:e>s?1:i<r?-1:i>r?1:0}static pointAlongSegmentByFraction(t,e,i){if(i<=0)return t;if(i>=1)return e;const n=(e.x-t.x)*i+t.x,s=(e.y-t.y)*i+t.y,r=(e.getZ()-t.getZ())*i+t.getZ();return new f(n,s,r)}static getEndLocation(t){const e=new ma;return e.setToEnd(t),e}getSegmentIndex(){return this._segmentIndex}getComponentIndex(){return this._componentIndex}getSegmentFraction(){return this._segmentFraction}setToEnd(t){this._componentIndex=t.getNumGeometries()-1;const e=t.getGeometryN(this._componentIndex);this._segmentIndex=ma.numSegments(e),this._segmentFraction=0}compareTo(t){const e=t;return this._componentIndex<e._componentIndex?-1:this._componentIndex>e._componentIndex?1:this._segmentIndex<e._segmentIndex?-1:this._segmentIndex>e._segmentIndex?1:this._segmentFraction<e._segmentFraction?-1:this._segmentFraction>e._segmentFraction?1:0}copy(){return new ma(this._componentIndex,this._segmentIndex,this._segmentFraction)}toString(){return"LinearLoc["+this._componentIndex+", "+this._segmentIndex+", "+this._segmentFraction+"]"}compareLocationValues(t,e,i){return this._componentIndex<t?-1:this._componentIndex>t?1:this._segmentIndex<e?-1:this._segmentIndex>e?1:this._segmentFraction<i?-1:this._segmentFraction>i?1:0}getSegmentLength(t){const e=t.getGeometryN(this._componentIndex);let i=this._segmentIndex;this._segmentIndex>=ma.numSegments(e)&&(i=e.getNumPoints()-2);const n=e.getCoordinateN(i),s=e.getCoordinateN(i+1);return n.distance(s)}isVertex(){return this._segmentFraction<=0||this._segmentFraction>=1}isEndpoint(t){const e=t.getGeometryN(this._componentIndex),i=ma.numSegments(e);return this._segmentIndex>=i||this._segmentIndex===i-1&&this._segmentFraction>=1}isValid(t){if(this._componentIndex<0||this._componentIndex>=t.getNumGeometries())return!1;const e=t.getGeometryN(this._componentIndex);return!(this._segmentIndex<0||this._segmentIndex>e.getNumPoints()||this._segmentIndex===e.getNumPoints()&&0!==this._segmentFraction||this._segmentFraction<0||this._segmentFraction>1)}normalize(){this._segmentFraction<0&&(this._segmentFraction=0),this._segmentFraction>1&&(this._segmentFraction=1),this._componentIndex<0&&(this._componentIndex=0,this._segmentIndex=0,this._segmentFraction=0),this._segmentIndex<0&&(this._segmentIndex=0,this._segmentFraction=0),1===this._segmentFraction&&(this._segmentFraction=0,this._segmentIndex+=1)}toLowest(t){const e=t.getGeometryN(this._componentIndex),i=ma.numSegments(e);return this._segmentIndex<i?this:new ma(this._componentIndex,i-1,1,!1)}getCoordinate(t){const e=t.getGeometryN(this._componentIndex),i=e.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=ma.numSegments(e))return i;const n=e.getCoordinateN(this._segmentIndex+1);return ma.pointAlongSegmentByFraction(i,n,this._segmentFraction)}getSegment(t){const e=t.getGeometryN(this._componentIndex),i=e.getCoordinateN(this._segmentIndex);if(this._segmentIndex>=ma.numSegments(e)){const t=e.getCoordinateN(e.getNumPoints()-2);return new Xt(t,i)}const n=e.getCoordinateN(this._segmentIndex+1);return new Xt(i,n)}clamp(t){if(this._componentIndex>=t.getNumGeometries())return this.setToEnd(t),null;if(this._segmentIndex>=t.getNumPoints()){const e=t.getGeometryN(this._componentIndex);this._segmentIndex=ma.numSegments(e),this._segmentFraction=1}}isOnSameSegment(t){return this._componentIndex===t._componentIndex&&(this._segmentIndex===t._segmentIndex||t._segmentIndex-this._segmentIndex==1&&0===t._segmentFraction||this._segmentIndex-t._segmentIndex==1&&0===this._segmentFraction)}snapToVertex(t,e){if(this._segmentFraction<=0||this._segmentFraction>=1)return null;const i=this.getSegmentLength(t),n=this._segmentFraction*i,s=i-n;n<=s&&n<e?this._segmentFraction=0:s<=n&&s<e&&(this._segmentFraction=1)}get interfaces_(){return[o]}}class _a{constructor(){_a.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;const t=arguments[0];this._linearGeom=t}static indexOf(t,e){return new _a(t).indexOf(e)}static indexOfAfter(t,e,i){return new _a(t).indexOfAfter(e,i)}indexOfFromStart(t,e){let i=r.MAX_VALUE,n=0,s=0,o=-1;const a=new Xt;for(let r=new da(this._linearGeom);r.hasNext();r.next())if(!r.isEndOfLine()){a.p0=r.getSegmentStart(),a.p1=r.getSegmentEnd();const l=a.distance(t),A=a.segmentFraction(t),c=r.getComponentIndex(),h=r.getVertexIndex();l<i&&(null===e||e.compareLocationValues(c,h,A)<0)&&(n=c,s=h,o=A,i=l)}return i===r.MAX_VALUE?new ma(e):new ma(n,s,o)}indexOf(t){return this.indexOfFromStart(t,null)}indexOfAfter(t,e){if(null===e)return this.indexOf(t);const i=ma.getEndLocation(this._linearGeom);if(i.compareTo(e)<=0)return i;const n=this.indexOfFromStart(t,e);return c.isTrue(n.compareTo(e)>=0,"computed location is before specified minimum location"),n}}class ya{constructor(){ya.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;const t=arguments[0];this._linearGeom=t}static indicesOf(t,e){return new ya(t).indicesOf(e)}indicesOf(t){const e=t.getGeometryN(0).getCoordinateN(0),i=t.getGeometryN(t.getNumGeometries()-1),n=i.getCoordinateN(i.getNumPoints()-1),s=new _a(this._linearGeom),r=new Array(2).fill(null);return r[0]=s.indexOf(e),0===t.getLength()?r[1]=r[0].copy():r[1]=s.indexOfAfter(n,r[0]),r}}class wa{constructor(){wa.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;const t=arguments[0];this._linearGeom=t}static getLocation(){if(2===arguments.length){const t=arguments[1];return new wa(arguments[0]).getLocation(t)}if(3===arguments.length){const t=arguments[1],e=arguments[2];return new wa(arguments[0]).getLocation(t,e)}}static getLength(t,e){return new wa(t).getLength(e)}getLocation(){if(1===arguments.length){const t=arguments[0];return this.getLocation(t,!0)}if(2===arguments.length){const t=arguments[0],e=arguments[1];let i=t;t<0&&(i=this._linearGeom.getLength()+t);const n=this.getLocationForward(i);return e?n:this.resolveHigher(n)}}getLocationForward(t){if(t<=0)return new ma;let e=0;const i=new da(this._linearGeom);for(;i.hasNext();){if(i.isEndOfLine()){if(e===t){const t=i.getComponentIndex(),e=i.getVertexIndex();return new ma(t,e,0)}}else{const n=i.getSegmentStart(),s=i.getSegmentEnd().distance(n);if(e+s>t){const n=(t-e)/s,r=i.getComponentIndex(),o=i.getVertexIndex();return new ma(r,o,n)}e+=s}i.next()}return ma.getEndLocation(this._linearGeom)}getLength(t){let e=0;const i=new da(this._linearGeom);for(;i.hasNext();){if(!i.isEndOfLine()){const n=i.getSegmentStart(),s=i.getSegmentEnd().distance(n);if(t.getComponentIndex()===i.getComponentIndex()&&t.getSegmentIndex()===i.getVertexIndex())return e+s*t.getSegmentFraction();e+=s}i.next()}return e}resolveHigher(t){if(!t.isEndpoint(this._linearGeom))return t;let e=t.getComponentIndex();if(e>=this._linearGeom.getNumGeometries()-1)return t;do{e++}while(e<this._linearGeom.getNumGeometries()-1&&0===this._linearGeom.getGeometryN(e).getLength());return new ma(e,0,0)}}class va{constructor(){va.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;const t=arguments[0];this._linearGeom=t}clampIndex(t){const e=this.positiveIndex(t),i=this.getStartIndex();if(e<i)return i;const n=this.getEndIndex();return e>n?n:e}locationOf(){if(1===arguments.length){const t=arguments[0];return wa.getLocation(this._linearGeom,t)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return wa.getLocation(this._linearGeom,t,e)}}project(t){return ga.indexOf(this._linearGeom,t)}positiveIndex(t){return t>=0?t:this._linearGeom.getLength()+t}extractPoint(){if(1===arguments.length){const t=arguments[0];return wa.getLocation(this._linearGeom,t).getCoordinate(this._linearGeom)}if(2===arguments.length){const t=arguments[0],e=arguments[1],i=wa.getLocation(this._linearGeom,t).toLowest(this._linearGeom);return i.getSegment(this._linearGeom).pointAlongOffset(i.getSegmentFraction(),e)}}getStartIndex(){return 0}indexOfAfter(t,e){return ga.indexOfAfter(this._linearGeom,t,e)}extractLine(t,e){const i=this.clampIndex(t),n=this.clampIndex(e),s=i===n,r=this.locationOf(i,s),o=this.locationOf(n);return fa.extract(this._linearGeom,r,o)}isValidIndex(t){return t>=this.getStartIndex()&&t<=this.getEndIndex()}getEndIndex(){return this._linearGeom.getLength()}indexOf(t){return ga.indexOf(this._linearGeom,t)}indicesOf(t){const e=ya.indicesOf(this._linearGeom,t);return[wa.getLength(this._linearGeom,e[0]),wa.getLength(this._linearGeom,e[1])]}}class ba{constructor(){ba.constructor_.apply(this,arguments)}static constructor_(){this._linearGeom=null;const t=arguments[0];this._linearGeom=t,this.checkGeometryType()}clampIndex(t){const e=t.copy();return e.clamp(this._linearGeom),e}project(t){return _a.indexOf(this._linearGeom,t)}checkGeometryType(){if(!(this._linearGeom instanceof tt||this._linearGeom instanceof wt))throw new n("Input geometry must be linear")}extractPoint(){if(1===arguments.length)return arguments[0].getCoordinate(this._linearGeom);if(2===arguments.length){const t=arguments[1],e=arguments[0].toLowest(this._linearGeom);return e.getSegment(this._linearGeom).pointAlongOffset(e.getSegmentFraction(),t)}}getStartIndex(){return new ma}indexOfAfter(t,e){return _a.indexOfAfter(this._linearGeom,t,e)}extractLine(t,e){return fa.extract(this._linearGeom,t,e)}isValidIndex(t){return t.isValid(this._linearGeom)}getEndIndex(){return ma.getEndLocation(this._linearGeom)}indexOf(t){return _a.indexOf(this._linearGeom,t)}indicesOf(t){return ya.indicesOf(this._linearGeom,t)}}var Ca=Object.freeze({__proto__:null,LengthIndexedLine:va,LengthLocationMap:wa,LinearGeometryBuilder:pa,LinearIterator:da,LinearLocation:ma,LocationIndexedLine:ba});class xa{static transform(t,e){const i=new E;for(let n=t.iterator();n.hasNext();)i.add(e.execute(n.next()));return i}static select(t,e){const i=new E;for(let n=t.iterator();n.hasNext();){const t=n.next();Boolean.TRUE.equals(e.execute(t))&&i.add(t)}return i}static apply(t,e){for(let i=t.iterator();i.hasNext();)e.execute(i.next())}}xa.Function=function(){};class Ba{constructor(){Ba.constructor_.apply(this,arguments)}static constructor_(){this.pts=null,this.n=0;const t=arguments[0];this.pts=new Array(t).fill(null)}filter(t){this.pts[this.n++]=t}getCoordinates(){return this.pts}get interfaces_(){return[X]}}class Ea{constructor(){Ea.constructor_.apply(this,arguments)}static constructor_(){this._n=0}filter(t){this._n++}getCount(){return this._n}get interfaces_(){return[X]}}class Sa{constructor(){Sa.constructor_.apply(this,arguments)}static constructor_(){this._counts=new mt}add(t){const e=this._counts.get(t);null===e?this._counts.put(t,new Fa(1)):e.increment()}count(t){const e=this._counts.get(t);return null===e?0:e.count()}}class Fa{constructor(){Fa.constructor_.apply(this,arguments)}static constructor_(){if(this.count=0,0===arguments.length);else if(1===arguments.length){const t=arguments[0];this.count=t}}count(){return this.count}increment(){this.count++}}Sa.Counter=Fa;class Ia{constructor(){Ia.constructor_.apply(this,arguments)}static constructor_(){this._size=null,this._items=null,this._size=0,this._items=new E,this._items.add(null)}poll(){if(this.isEmpty())return null;const t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}size(){return this._size}reorder(t){let e=null;const i=this._items.get(t);for(;2*t<=this._size&&(e=2*t,e!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)}clear(){this._size=0,this._items.clear()}peek(){return this.isEmpty()?null:this._items.get(1)}isEmpty(){return 0===this._size}add(t){this._items.add(null),this._size+=1;let e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}function La(){}function Ma(){}function Ta(){}function Ra(){}class ka extends i{}class Ua{static split(t,e){const i=e.length,n=new E;let s=""+t,r=s.indexOf(e);for(;r>=0;){const t=s.substring(0,r);n.add(t),s=s.substring(r+i),r=s.indexOf(e)}s.length>0&&n.add(s);const o=new Array(n.size()).fill(null);for(let t=0;t<o.length;t++)o[t]=n.get(t);return o}static getStackTrace(){if(1===arguments.length){const t=arguments[0],e=new Ra,i=new La;return t.printStackTrace(i),e.toString()}if(2===arguments.length){const t=arguments[0],e=arguments[1];let i="";new Ma(Ua.getStackTrace(t));const n=new Ta;for(let t=0;t<e;t++)try{i+=n.readLine()+Ua.NEWLINE}catch(t){if(!(t instanceof ka))throw t;c.shouldNeverReachHere()}return i}}static spaces(t){return Ua.chars(" ",t)}static chars(t,e){const i=new Array(e).fill(null);for(let n=0;n<e;n++)i[n]=t;return new String(i)}}Ua.NEWLINE=Q.getProperty("line.separator");var Da=Object.freeze({__proto__:null,CollectionUtil:xa,CoordinateArrayFilter:Ba,CoordinateCountFilter:Ea,GeometricShapeFactory:Ce,NumberUtil:e,ObjectCounter:Sa,PriorityQueue:Ia,StringUtil:Ua,UniqueCoordinateArrayFilter:ds});tt.prototype.getBoundary=function(){return sr.getBoundary(this)},wt.prototype.getBoundary=function(){return sr.getBoundary(this)},Y.prototype.equalsTopo=function(t){return no.equalsTopo(this,t)},Y.prototype.equals=function(t){return null!==t&&no.equalsTopo(this,t)},Y.prototype.union=function(){if(0===arguments.length)return Ao.union(this);if(1===arguments.length){const t=arguments[0];return As.union(this,t)}},Y.prototype.isValid=function(){return Hr.isValid(this)},Y.prototype.intersection=function(t){return os.intersection(this,t)},Y.prototype.covers=function(t){return no.covers(this,t)},Y.prototype.coveredBy=function(t){return no.covers(t,this)},Y.prototype.touches=function(t){return no.touches(this,t)},Y.prototype.intersects=function(t){return no.intersects(this,t)},Y.prototype.within=function(t){return no.contains(t,this)},Y.prototype.overlaps=function(t){return no.overlaps(this,t)},Y.prototype.disjoint=function(t){return no.disjoint(this,t)},Y.prototype.crosses=function(t){return no.crosses(this,t)},Y.prototype.buffer=function(){if(1===arguments.length){const t=arguments[0];return Rn.bufferOp(this,t)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return Rn.bufferOp(this,t,e)}if(3===arguments.length){const t=arguments[0],e=arguments[1],i=arguments[2];return Rn.bufferOp(this,t,e,i)}},Y.prototype.convexHull=function(){return new gs(this).getConvexHull()},Y.prototype.relate=function(){if(1===arguments.length){const t=arguments[0];return no.relate(this,t)}if(2===arguments.length){const t=arguments[0],e=arguments[1];return no.relate(this,t).matches(e)}},Y.prototype.getCentroid=function(){if(this.isEmpty())return this._factory.createPoint();const t=us.getCentroid(this);return this.createPointFromInternalCoord(t,this)},Y.prototype.getInteriorPoint=function(){if(this.isEmpty())return this._factory.createPoint();let t=null;const e=this.getDimension();t=0===e?new vs(this):1===e?new ws(this):new fs(this);const i=t.getInteriorPoint();return this.createPointFromInternalCoord(i,this)},Y.prototype.symDifference=function(t){return os.symDifference(this,t)},Y.prototype.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Y.prototype.toText=function(){return(new Wt).write(this)},Y.prototype.toString=function(){return this.toText()},Y.prototype.contains=function(t){return no.contains(this,t)},Y.prototype.difference=function(t){return os.difference(this,t)},Y.prototype.isSimple=function(){return new or(this).isSimple()},Y.prototype.isWithinDistance=function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&hr.isWithinDistance(this,t,e)},Y.prototype.distance=function(t){return hr.distance(this,t)},t.algorithm=xs,t.densify=Ss,t.dissolve=ks,t.geom=Se,t.geomgraph=Us,t.index=Xs,t.io=ir,t.linearref=Ca,t.noding=nr,t.operation=uo,t.precision=xo,t.simplify=Ho,t.triangulate=ua,t.util=Da,t.version="2.12.1"}(e)}(0,wB.exports)),wB.exports);const bB="modalExtensions.geometryDataModal",CB=Object.freeze({data:{}});class xB extends Xm{#re=[];constructor(t={}){super({filename:"geometry-data-modal.js",title:Mm.get(`${bB}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(CB),t),this.#oe()}getName(){return super.getName()}#oe(){const t=tp.createElement({element:"div",class:"oltb-modal__content"}),e=tp.createElement({element:"table",class:"oltb-table oltb-table--vertical"}),i=tp.createElement({element:"tbody"});tp.appendChildren(e,[i]);for(const[t,e]of Object.entries(this.options.data)){const n=tp.createElement({element:"tr"}),s=Mm.get(`${bB}.data`),r=tp.createElement({element:"th",text:s[t]}),o=tp.createElement({element:"td",html:e});tp.appendChildren(n,[r,o]),tp.appendChildren(i,[n])}tp.appendChildren(t,[e]),this.show(t)}}const BB="edit-tool.js",EB="oltb-tool-button",SB="oltb-toolbox-section",FB="oltb-edit",IB="tools.editTool",LB="tools.editTool",MB="commons",TB=Object.freeze({hitTolerance:5,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStyleChange:void 0,onCutFeatures:void 0,onCopyFeatures:void 0,onPasteFeatures:void 0,onShapeOperation:void 0,onSelectAdd:void 0,onSelectRemove:void 0,onModifyStart:void 0,onModifyEnd:void 0,onTranslateStart:void 0,onTranslateEnd:void 0,onRemovedFeatures:void 0,onError:void 0,onSnapped:void 0,onUnSnapped:void 0}),RB=rp.editTool,kB=Object.freeze({isActive:!1,isCollapsed:!1,strokeColor:"#0166A5FF",fillColor:"#D7E3FA80"}),UB=Object.freeze({width:20,height:20,fill:"#FFFFFFFF",stroke:"none",class:"oltb-btn__icon"});const DB="oltb-tool-button",OB="tools.infoTool",PB=Object.freeze({title:"Hey!",content:"This is the default content, try adding some content of your own.",onInitiated:void 0,onClicked:void 0});const NB="help-tool.js",QB="oltb-tool-button",HB="tools.helpTool",GB=Object.freeze({url:"https://github.com/qulle/oltb",target:"_blank",onInitiated:void 0,onClicked:void 0});const VB="oltb-tool-button",zB="tools.themeTool",KB=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onChanged:void 0}),jB=Object.freeze({light:{class:"light",icon:zm({path:Gm.moonStars.stroked,class:`${VB}__icon`})},dark:{class:"dark",icon:zm({path:Gm.sun.stroked,class:`${VB}__icon`})}}),WB=rp.themeTool,$B=Object.freeze({theme:jB.light.class});function YB(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function XB(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?YB(Object(i),!0).forEach((function(e){ZB(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):YB(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function qB(t){return qB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qB(t)}function ZB(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function JB(){return JB=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},JB.apply(this,arguments)}function tE(t,e){if(null==t)return{};var i,n,s=function(t,e){if(null==t)return{};var i,n,s={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function eE(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var iE=eE(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),nE=eE(/Edge/i),sE=eE(/firefox/i),rE=eE(/safari/i)&&!eE(/chrome/i)&&!eE(/android/i),oE=eE(/iP(ad|od|hone)/i),aE=eE(/chrome/i)&&eE(/android/i),lE={capture:!1,passive:!1};function AE(t,e,i){t.addEventListener(e,i,!iE&&lE)}function cE(t,e,i){t.removeEventListener(e,i,!iE&&lE)}function hE(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function uE(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function dE(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&hE(t,e):hE(t,e))||n&&t===i)return t;if(t===i)break}while(t=uE(t))}return null}var gE,pE=/\s+/g;function fE(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(pE," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(pE," ")}}function mE(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function _E(t,e){var i="";if("string"==typeof t)i=t;else do{var n=mE(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function yE(t,e,i){if(t){var n=t.getElementsByTagName(e),s=0,r=n.length;if(i)for(;s<r;s++)i(n[s],s);return n}return[]}function wE(){var t=document.scrollingElement;return t||document.documentElement}function vE(t,e,i,n,s){if(t.getBoundingClientRect||t===window){var r,o,a,l,A,c,h;if(t!==window&&t.parentNode&&t!==wE()?(o=(r=t.getBoundingClientRect()).top,a=r.left,l=r.bottom,A=r.right,c=r.height,h=r.width):(o=0,a=0,l=window.innerHeight,A=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!iE))do{if(s&&s.getBoundingClientRect&&("none"!==mE(s,"transform")||i&&"static"!==mE(s,"position"))){var u=s.getBoundingClientRect();o-=u.top+parseInt(mE(s,"border-top-width")),a-=u.left+parseInt(mE(s,"border-left-width")),l=o+r.height,A=a+r.width;break}}while(s=s.parentNode);if(n&&t!==window){var d=_E(s||t),g=d&&d.a,p=d&&d.d;d&&(l=(o/=p)+(c/=p),A=(a/=g)+(h/=g))}return{top:o,left:a,bottom:l,right:A,width:h,height:c}}}function bE(t,e,i){for(var n=SE(t,!0),s=vE(t)[e];n;){if(!(s>=vE(n)[i]))return n;if(n===wE())break;n=SE(n,!1)}return!1}function CE(t,e,i,n){for(var s=0,r=0,o=t.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==MS.ghost&&(n||o[r]!==MS.dragged)&&dE(o[r],i.draggable,t,!1)){if(s===e)return o[r];s++}r++}return null}function xE(t,e){for(var i=t.lastElementChild;i&&(i===MS.ghost||"none"===mE(i,"display")||e&&!hE(i,e));)i=i.previousElementSibling;return i||null}function BE(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===MS.clone||e&&!hE(t,e)||i++;return i}function EE(t){var e=0,i=0,n=wE();if(t)do{var s=_E(t),r=s.a,o=s.d;e+=t.scrollLeft*r,i+=t.scrollTop*o}while(t!==n&&(t=t.parentNode));return[e,i]}function SE(t,e){if(!t||!t.getBoundingClientRect)return wE();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=mE(i);if(i.clientWidth<i.scrollWidth&&("auto"==s.overflowX||"scroll"==s.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==s.overflowY||"scroll"==s.overflowY)){if(!i.getBoundingClientRect||i===document.body)return wE();if(n||e)return i;n=!0}}}while(i=i.parentNode);return wE()}function FE(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function IE(t,e){return function(){if(!gE){var i=arguments;1===i.length?t.call(this,i[0]):t.apply(this,i),gE=setTimeout((function(){gE=void 0}),e)}}}function LE(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function ME(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function TE(t,e,i){var n={};return Array.from(t.children).forEach((function(s){var r,o,a,l;if(dE(s,e.draggable,t,!1)&&!s.animated&&s!==i){var A=vE(s);n.left=Math.min(null!==(r=n.left)&&void 0!==r?r:1/0,A.left),n.top=Math.min(null!==(o=n.top)&&void 0!==o?o:1/0,A.top),n.right=Math.max(null!==(a=n.right)&&void 0!==a?a:-1/0,A.right),n.bottom=Math.max(null!==(l=n.bottom)&&void 0!==l?l:-1/0,A.bottom)}})),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var RE="Sortable"+(new Date).getTime();function kE(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==mE(t,"display")&&t!==MS.ghost){e.push({target:t,rect:vE(t)});var i=XB({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=_E(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof i&&i());var s=!1,r=0;e.forEach((function(t){var e=0,i=t.target,o=i.fromRect,a=vE(i),l=i.prevFromRect,A=i.prevToRect,c=t.rect,h=_E(i,!0);h&&(a.top-=h.f,a.left-=h.e),i.toRect=a,i.thisAnimationDuration&&FE(l,a)&&!FE(o,a)&&(c.top-a.top)/(c.left-a.left)==(o.top-a.top)/(o.left-a.left)&&(e=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(c,l,A,n.options)),FE(a,o)||(i.prevFromRect=o,i.prevToRect=a,e||(e=n.options.animation),n.animate(i,c,a,e)),e&&(s=!0,r=Math.max(r,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),s?t=setTimeout((function(){"function"==typeof i&&i()}),r):"function"==typeof i&&i(),e=[]},animate:function(t,e,i,n){if(n){mE(t,"transition",""),mE(t,"transform","");var s=_E(this.el),r=s&&s.a,o=s&&s.d,a=(e.left-i.left)/(r||1),l=(e.top-i.top)/(o||1);t.animatingX=!!a,t.animatingY=!!l,mE(t,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),mE(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),mE(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){mE(t,"transition",""),mE(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}var UE=[],DE={initializeByDefault:!0},OE={mount:function(t){for(var e in DE)DE.hasOwnProperty(e)&&!(e in t)&&(t[e]=DE[e]);UE.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),UE.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=t+"Global";UE.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][s]&&e[n.pluginName][s](XB({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](XB({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var s in UE.forEach((function(n){var s=n.pluginName;if(t.options[s]||n.initializeByDefault){var r=new n(t,e,t.options);r.sortable=t,r.options=t.options,t[s]=r,JB(i,r.defaults)}})),t.options)if(t.options.hasOwnProperty(s)){var r=this.modifyOption(t,s,t.options[s]);void 0!==r&&(t.options[s]=r)}},getEventProperties:function(t,e){var i={};return UE.forEach((function(n){"function"==typeof n.eventProperties&&JB(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return UE.forEach((function(s){t[s.pluginName]&&s.optionListeners&&"function"==typeof s.optionListeners[e]&&(n=s.optionListeners[e].call(t[s.pluginName],i))})),n}};var PE=["evt"],NE=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=tE(i,PE);OE.pluginEvent.bind(MS)(t,e,XB({dragEl:HE,parentEl:GE,ghostEl:VE,rootEl:zE,nextEl:KE,lastDownEl:jE,cloneEl:WE,cloneHidden:$E,dragStarted:aS,putSortable:tS,activeSortable:MS.active,originalEvent:n,oldIndex:YE,oldDraggableIndex:qE,newIndex:XE,newDraggableIndex:ZE,hideGhostForTarget:SS,unhideGhostForTarget:FS,cloneNowHidden:function(){$E=!0},cloneNowShown:function(){$E=!1},dispatchSortableEvent:function(t){QE({sortable:e,name:t,originalEvent:n})}},s))};function QE(t){!function(t){var e=t.sortable,i=t.rootEl,n=t.name,s=t.targetEl,r=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,A=t.newIndex,c=t.oldDraggableIndex,h=t.newDraggableIndex,u=t.originalEvent,d=t.putSortable,g=t.extraEventProperties;if(e=e||i&&i[RE]){var p,f=e.options,m="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||iE||nE?(p=document.createEvent("Event")).initEvent(n,!0,!0):p=new CustomEvent(n,{bubbles:!0,cancelable:!0}),p.to=o||i,p.from=a||i,p.item=s||i,p.clone=r,p.oldIndex=l,p.newIndex=A,p.oldDraggableIndex=c,p.newDraggableIndex=h,p.originalEvent=u,p.pullMode=d?d.lastPutMode:void 0;var _=XB(XB({},g),OE.getEventProperties(n,e));for(var y in _)p[y]=_[y];i&&i.dispatchEvent(p),f[m]&&f[m].call(e,p)}}(XB({putSortable:tS,cloneEl:WE,targetEl:HE,rootEl:zE,oldIndex:YE,oldDraggableIndex:qE,newIndex:XE,newDraggableIndex:ZE},t))}var HE,GE,VE,zE,KE,jE,WE,$E,YE,XE,qE,ZE,JE,tS,eS,iS,nS,sS,rS,oS,aS,lS,AS,cS,hS,uS=!1,dS=!1,gS=[],pS=!1,fS=!1,mS=[],_S=!1,yS=[],wS="undefined"!=typeof document,vS=oE,bS=nE||iE?"cssFloat":"float",CS=wS&&!aE&&!oE&&"draggable"in document.createElement("div"),xS=function(){if(wS){if(iE)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),BS=function(t,e){var i=mE(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=CE(t,0,e),r=CE(t,1,e),o=s&&mE(s),a=r&&mE(r),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+vE(s).width,A=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+vE(r).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&"none"!==o.float){var c="left"===o.float?"left":"right";return!r||"both"!==a.clear&&a.clear!==c?"horizontal":"vertical"}return s&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=n&&"none"===i[bS]||r&&"none"===i[bS]&&l+A>n)?"vertical":"horizontal"},ES=function(t){function e(t,i){return function(n,s,r,o){var a=n.options.group.name&&s.options.group.name&&n.options.group.name===s.options.group.name;if(null==t&&(i||a))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,s,r,o),i)(n,s,r,o);var l=(i?n:s).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==qB(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},SS=function(){!xS&&VE&&mE(VE,"display","none")},FS=function(){!xS&&VE&&mE(VE,"display","")};wS&&!aE&&document.addEventListener("click",(function(t){if(dS)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),dS=!1,!1}),!0);var IS=function(t){if(HE){t=t.touches?t.touches[0]:t;var e=(s=t.clientX,r=t.clientY,gS.some((function(t){var e=t[RE].options.emptyInsertThreshold;if(e&&!xE(t)){var i=vE(t),n=s>=i.left-e&&s<=i.right+e,a=r>=i.top-e&&r<=i.bottom+e;return n&&a?o=t:void 0}})),o);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[RE]._onDragOver(i)}}var s,r,o},LS=function(t){HE&&HE.parentNode[RE]._isOutsideThisEl(t.target)};function MS(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=JB({},e),t[RE]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return BS(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==MS.supportPointer&&"PointerEvent"in window&&(!rE||oE),emptyInsertThreshold:5};for(var n in OE.initializePlugins(this,t,i),i)!(n in e)&&(e[n]=i[n]);for(var s in ES(e),this)"_"===s.charAt(0)&&"function"==typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!e.forceFallback&&CS,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?AE(t,"pointerdown",this._onTapStart):(AE(t,"mousedown",this._onTapStart),AE(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(AE(t,"dragover",this),AE(t,"dragenter",this)),gS.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),JB(this,kE())}function TS(t,e,i,n,s,r,o,a){var l,A,c=t[RE],h=c.options.onMove;return!window.CustomEvent||iE||nE?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=s||e,l.relatedRect=r||vE(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),h&&(A=h.call(c,l,o)),A}function RS(t){t.draggable=!1}function kS(){_S=!1}function US(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function DS(t){return setTimeout(t,0)}function OS(t){return clearTimeout(t)}MS.prototype={constructor:MS,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(lS=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,HE):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,s=n.preventOnFilter,r=t.type,o=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,A=n.filter;if(function(t){yS.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&yS.push(n)}}(i),!HE&&!(/mousedown|pointerdown/.test(r)&&0!==t.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!rE||!a||"SELECT"!==a.tagName.toUpperCase())&&!((a=dE(a,n.draggable,i,!1))&&a.animated||jE===a)){if(YE=BE(a),qE=BE(a,n.draggable),"function"==typeof A){if(A.call(this,t,a,this))return QE({sortable:e,rootEl:l,name:"filter",targetEl:a,toEl:i,fromEl:i}),NE("filter",e,{evt:t}),void(s&&t.preventDefault())}else if(A&&(A=A.split(",").some((function(n){if(n=dE(l,n.trim(),i,!1))return QE({sortable:e,rootEl:n,name:"filter",targetEl:a,fromEl:i,toEl:i}),NE("filter",e,{evt:t}),!0}))))return void(s&&t.preventDefault());n.handle&&!dE(l,n.handle,i,!1)||this._prepareDragStart(t,o,a)}}},_prepareDragStart:function(t,e,i){var n,s=this,r=s.el,o=s.options,a=r.ownerDocument;if(i&&!HE&&i.parentNode===r){var l=vE(i);if(zE=r,GE=(HE=i).parentNode,KE=HE.nextSibling,jE=i,JE=o.group,MS.dragged=HE,eS={target:HE,clientX:(e||t).clientX,clientY:(e||t).clientY},rS=eS.clientX-l.left,oS=eS.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,HE.style["will-change"]="all",n=function(){NE("delayEnded",s,{evt:t}),MS.eventCanceled?s._onDrop():(s._disableDelayedDragEvents(),!sE&&s.nativeDraggable&&(HE.draggable=!0),s._triggerDragStart(t,e),QE({sortable:s,name:"choose",originalEvent:t}),fE(HE,o.chosenClass,!0))},o.ignore.split(",").forEach((function(t){yE(HE,t.trim(),RS)})),AE(a,"dragover",IS),AE(a,"mousemove",IS),AE(a,"touchmove",IS),o.supportPointer?(AE(a,"pointerup",s._onDrop),!this.nativeDraggable&&AE(a,"pointercancel",s._onDrop)):(AE(a,"mouseup",s._onDrop),AE(a,"touchend",s._onDrop),AE(a,"touchcancel",s._onDrop)),sE&&this.nativeDraggable&&(this.options.touchStartThreshold=4,HE.draggable=!0),NE("delayStart",this,{evt:t}),!o.delay||o.delayOnTouchOnly&&!e||this.nativeDraggable&&(nE||iE))n();else{if(MS.eventCanceled)return void this._onDrop();o.supportPointer?(AE(a,"pointerup",s._disableDelayedDrag),AE(a,"pointercancel",s._disableDelayedDrag)):(AE(a,"mouseup",s._disableDelayedDrag),AE(a,"touchend",s._disableDelayedDrag),AE(a,"touchcancel",s._disableDelayedDrag)),AE(a,"mousemove",s._delayedDragTouchMoveHandler),AE(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&AE(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(n,o.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){HE&&RS(HE),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;cE(t,"mouseup",this._disableDelayedDrag),cE(t,"touchend",this._disableDelayedDrag),cE(t,"touchcancel",this._disableDelayedDrag),cE(t,"pointerup",this._disableDelayedDrag),cE(t,"pointercancel",this._disableDelayedDrag),cE(t,"mousemove",this._delayedDragTouchMoveHandler),cE(t,"touchmove",this._delayedDragTouchMoveHandler),cE(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?AE(document,"pointermove",this._onTouchMove):AE(document,e?"touchmove":"mousemove",this._onTouchMove):(AE(HE,"dragend",this),AE(zE,"dragstart",this._onDragStart));try{document.selection?DS((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(uS=!1,zE&&HE){NE("dragStarted",this,{evt:e}),this.nativeDraggable&&AE(document,"dragover",LS);var i=this.options;!t&&fE(HE,i.dragClass,!1),fE(HE,i.ghostClass,!0),MS.active=this,t&&this._appendGhost(),QE({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(iS){this._lastX=iS.clientX,this._lastY=iS.clientY,SS();for(var t=document.elementFromPoint(iS.clientX,iS.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(iS.clientX,iS.clientY))!==e;)e=t;if(HE.parentNode[RE]._isOutsideThisEl(t),e)do{if(e[RE]){if(e[RE]._onDragOver({clientX:iS.clientX,clientY:iS.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=uE(e));FS()}},_onTouchMove:function(t){if(eS){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,s=t.touches?t.touches[0]:t,r=VE&&_E(VE,!0),o=VE&&r&&r.a,a=VE&&r&&r.d,l=vS&&hS&&EE(hS),A=(s.clientX-eS.clientX+n.x)/(o||1)+(l?l[0]-mS[0]:0)/(o||1),c=(s.clientY-eS.clientY+n.y)/(a||1)+(l?l[1]-mS[1]:0)/(a||1);if(!MS.active&&!uS){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(VE){r?(r.e+=A-(nS||0),r.f+=c-(sS||0)):r={a:1,b:0,c:0,d:1,e:A,f:c};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");mE(VE,"webkitTransform",h),mE(VE,"mozTransform",h),mE(VE,"msTransform",h),mE(VE,"transform",h),nS=A,sS=c,iS=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!VE){var t=this.options.fallbackOnBody?document.body:zE,e=vE(HE,!0,vS,!0,t),i=this.options;if(vS){for(hS=t;"static"===mE(hS,"position")&&"none"===mE(hS,"transform")&&hS!==document;)hS=hS.parentNode;hS!==document.body&&hS!==document.documentElement?(hS===document&&(hS=wE()),e.top+=hS.scrollTop,e.left+=hS.scrollLeft):hS=wE(),mS=EE(hS)}fE(VE=HE.cloneNode(!0),i.ghostClass,!1),fE(VE,i.fallbackClass,!0),fE(VE,i.dragClass,!0),mE(VE,"transition",""),mE(VE,"transform",""),mE(VE,"box-sizing","border-box"),mE(VE,"margin",0),mE(VE,"top",e.top),mE(VE,"left",e.left),mE(VE,"width",e.width),mE(VE,"height",e.height),mE(VE,"opacity","0.8"),mE(VE,"position",vS?"absolute":"fixed"),mE(VE,"zIndex","100000"),mE(VE,"pointerEvents","none"),MS.ghost=VE,t.appendChild(VE),mE(VE,"transform-origin",rS/parseInt(VE.style.width)*100+"% "+oS/parseInt(VE.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,s=i.options;NE("dragStart",this,{evt:t}),MS.eventCanceled?this._onDrop():(NE("setupClone",this),MS.eventCanceled||((WE=ME(HE)).removeAttribute("id"),WE.draggable=!1,WE.style["will-change"]="",this._hideClone(),fE(WE,this.options.chosenClass,!1),MS.clone=WE),i.cloneId=DS((function(){NE("clone",i),MS.eventCanceled||(i.options.removeCloneOnHide||zE.insertBefore(WE,HE),i._hideClone(),QE({sortable:i,name:"clone"}))})),!e&&fE(HE,s.dragClass,!0),e?(dS=!0,i._loopId=setInterval(i._emulateDragOver,50)):(cE(document,"mouseup",i._onDrop),cE(document,"touchend",i._onDrop),cE(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,HE)),AE(document,"drop",i),mE(HE,"transform","translateZ(0)")),uS=!0,i._dragStartId=DS(i._dragStarted.bind(i,e,t)),AE(document,"selectstart",i),aS=!0,window.getSelection().removeAllRanges(),rE&&mE(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,s,r=this.el,o=t.target,a=this.options,l=a.group,A=MS.active,c=JE===l,h=a.sort,u=tS||A,d=this,g=!1;if(!_S){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),o=dE(o,a.draggable,r,!0),I("dragOver"),MS.eventCanceled)return g;if(HE.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||d._ignoreWhileAnimating===o)return M(!1);if(dS=!1,A&&!a.disabled&&(c?h||(n=GE!==zE):tS===this||(this.lastPutMode=JE.checkPull(this,A,HE,t))&&l.checkPut(this,A,HE,t))){if(s="vertical"===this._getDirection(t,o),e=vE(HE),I("dragOverValid"),MS.eventCanceled)return g;if(n)return GE=zE,L(),this._hideClone(),I("revert"),MS.eventCanceled||(KE?zE.insertBefore(HE,KE):zE.appendChild(HE)),M(!0);var p=xE(r,a.draggable);if(!p||function(t,e,i){var n=vE(xE(i.el,i.options.draggable)),s=TE(i.el,i.options,VE),r=10;return e?t.clientX>s.right+r||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>s.bottom+r||t.clientX>n.right&&t.clientY>n.top}(t,s,this)&&!p.animated){if(p===HE)return M(!1);if(p&&r===t.target&&(o=p),o&&(i=vE(o)),!1!==TS(zE,r,HE,e,o,i,t,!!o))return L(),p&&p.nextSibling?r.insertBefore(HE,p.nextSibling):r.appendChild(HE),GE=r,T(),M(!0)}else if(p&&function(t,e,i){var n=vE(CE(i.el,0,i.options,!0)),s=TE(i.el,i.options,VE),r=10;return e?t.clientX<s.left-r||t.clientY<n.top&&t.clientX<n.right:t.clientY<s.top-r||t.clientY<n.bottom&&t.clientX<n.left}(t,s,this)){var f=CE(r,0,a,!0);if(f===HE)return M(!1);if(i=vE(o=f),!1!==TS(zE,r,HE,e,o,i,t,!1))return L(),r.insertBefore(HE,f),GE=r,T(),M(!0)}else if(o.parentNode===r){i=vE(o);var m,_,y,w=HE.parentNode!==r,v=!function(t,e,i){var n=i?t.left:t.top,s=i?t.right:t.bottom,r=i?t.width:t.height,o=i?e.left:e.top,a=i?e.right:e.bottom,l=i?e.width:e.height;return n===o||s===a||n+r/2===o+l/2}(HE.animated&&HE.toRect||e,o.animated&&o.toRect||i,s),b=s?"top":"left",C=bE(o,"top","top")||bE(HE,"top","top"),x=C?C.scrollTop:void 0;if(lS!==o&&(_=i[b],pS=!1,fS=!v&&a.invertSwap||w),m=function(t,e,i,n,s,r,o,a){var l=n?t.clientY:t.clientX,A=n?i.height:i.width,c=n?i.top:i.left,h=n?i.bottom:i.right,u=!1;if(!o)if(a&&cS<A*s){if(!pS&&(1===AS?l>c+A*r/2:l<h-A*r/2)&&(pS=!0),pS)u=!0;else if(1===AS?l<c+cS:l>h-cS)return-AS}else if(l>c+A*(1-s)/2&&l<h-A*(1-s)/2)return function(t){return BE(HE)<BE(t)?1:-1}(e);if((u=u||o)&&(l<c+A*r/2||l>h-A*r/2))return l>c+A/2?1:-1;return 0}(t,o,i,s,v?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,fS,lS===o),0!==m){var B=BE(HE);do{B-=m,y=GE.children[B]}while(y&&("none"===mE(y,"display")||y===VE))}if(0===m||y===o)return M(!1);lS=o,AS=m;var E=o.nextElementSibling,S=!1,F=TS(zE,r,HE,e,o,i,t,S=1===m);if(!1!==F)return 1!==F&&-1!==F||(S=1===F),_S=!0,setTimeout(kS,30),L(),S&&!E?r.appendChild(HE):o.parentNode.insertBefore(HE,S?E:o),C&&LE(C,0,x-C.scrollTop),GE=HE.parentNode,void 0===_||fS||(cS=Math.abs(_-vE(o)[b])),T(),M(!0)}if(r.contains(HE))return M(!1)}return!1}function I(a,l){NE(a,d,XB({evt:t,isOwner:c,axis:s?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:h,fromSortable:u,target:o,completed:M,onMove:function(i,n){return TS(zE,r,HE,e,i,vE(i),t,n)},changed:T},l))}function L(){I("dragOverAnimationCapture"),d.captureAnimationState(),d!==u&&u.captureAnimationState()}function M(e){return I("dragOverCompleted",{insertion:e}),e&&(c?A._hideClone():A._showClone(d),d!==u&&(fE(HE,tS?tS.options.ghostClass:A.options.ghostClass,!1),fE(HE,a.ghostClass,!0)),tS!==d&&d!==MS.active?tS=d:d===MS.active&&tS&&(tS=null),u===d&&(d._ignoreWhileAnimating=o),d.animateAll((function(){I("dragOverAnimationComplete"),d._ignoreWhileAnimating=null})),d!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(o===HE&&!HE.animated||o===r&&!o.animated)&&(lS=null),a.dragoverBubble||t.rootEl||o===document||(HE.parentNode[RE]._isOutsideThisEl(t.target),!e&&IS(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function T(){XE=BE(HE),ZE=BE(HE,a.draggable),QE({sortable:d,name:"change",toEl:r,newIndex:XE,newDraggableIndex:ZE,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){cE(document,"mousemove",this._onTouchMove),cE(document,"touchmove",this._onTouchMove),cE(document,"pointermove",this._onTouchMove),cE(document,"dragover",IS),cE(document,"mousemove",IS),cE(document,"touchmove",IS)},_offUpEvents:function(){var t=this.el.ownerDocument;cE(t,"mouseup",this._onDrop),cE(t,"touchend",this._onDrop),cE(t,"pointerup",this._onDrop),cE(t,"pointercancel",this._onDrop),cE(t,"touchcancel",this._onDrop),cE(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;XE=BE(HE),ZE=BE(HE,i.draggable),NE("drop",this,{evt:t}),GE=HE&&HE.parentNode,XE=BE(HE),ZE=BE(HE,i.draggable),MS.eventCanceled||(uS=!1,fS=!1,pS=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),OS(this.cloneId),OS(this._dragStartId),this.nativeDraggable&&(cE(document,"drop",this),cE(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),rE&&mE(document.body,"user-select",""),mE(HE,"transform",""),t&&(aS&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),VE&&VE.parentNode&&VE.parentNode.removeChild(VE),(zE===GE||tS&&"clone"!==tS.lastPutMode)&&WE&&WE.parentNode&&WE.parentNode.removeChild(WE),HE&&(this.nativeDraggable&&cE(HE,"dragend",this),RS(HE),HE.style["will-change"]="",aS&&!uS&&fE(HE,tS?tS.options.ghostClass:this.options.ghostClass,!1),fE(HE,this.options.chosenClass,!1),QE({sortable:this,name:"unchoose",toEl:GE,newIndex:null,newDraggableIndex:null,originalEvent:t}),zE!==GE?(XE>=0&&(QE({rootEl:GE,name:"add",toEl:GE,fromEl:zE,originalEvent:t}),QE({sortable:this,name:"remove",toEl:GE,originalEvent:t}),QE({rootEl:GE,name:"sort",toEl:GE,fromEl:zE,originalEvent:t}),QE({sortable:this,name:"sort",toEl:GE,originalEvent:t})),tS&&tS.save()):XE!==YE&&XE>=0&&(QE({sortable:this,name:"update",toEl:GE,originalEvent:t}),QE({sortable:this,name:"sort",toEl:GE,originalEvent:t})),MS.active&&(null!=XE&&-1!==XE||(XE=YE,ZE=qE),QE({sortable:this,name:"end",toEl:GE,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){NE("nulling",this),zE=HE=GE=VE=KE=WE=jE=$E=eS=iS=aS=XE=ZE=YE=qE=lS=AS=tS=JE=MS.dragged=MS.ghost=MS.clone=MS.active=null,yS.forEach((function(t){t.checked=!0})),yS.length=nS=sS=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":HE&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,s=i.length,r=this.options;n<s;n++)dE(t=i[n],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||US(t));return e},sort:function(t,e){var i={},n=this.el;this.toArray().forEach((function(t,e){var s=n.children[e];dE(s,this.options.draggable,n,!1)&&(i[t]=s)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(n.removeChild(i[t]),n.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return dE(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=OE.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&ES(i)},destroy:function(){NE("destroy",this);var t=this.el;t[RE]=null,cE(t,"mousedown",this._onTapStart),cE(t,"touchstart",this._onTapStart),cE(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(cE(t,"dragover",this),cE(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),gS.splice(gS.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!$E){if(NE("hideClone",this),MS.eventCanceled)return;mE(WE,"display","none"),this.options.removeCloneOnHide&&WE.parentNode&&WE.parentNode.removeChild(WE),$E=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if($E){if(NE("showClone",this),MS.eventCanceled)return;HE.parentNode!=zE||this.options.group.revertClone?KE?zE.insertBefore(WE,KE):zE.appendChild(WE):zE.insertBefore(WE,HE),this.options.group.revertClone&&this.animate(HE,WE),mE(WE,"display",""),$E=!1}}else this._hideClone()}},wS&&AE(document,"touchmove",(function(t){(MS.active||uS)&&t.cancelable&&t.preventDefault()})),MS.utils={on:AE,off:cE,css:mE,find:yE,is:function(t,e){return!!dE(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:IE,closest:dE,toggleClass:fE,clone:ME,index:BE,nextTick:DS,cancelNextTick:OS,detectDirection:BS,getChild:CE,expando:RE},MS.get=function(t){return t[RE]},MS.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(MS.utils=XB(XB({},MS.utils),t.utils)),OE.mount(t)}))},MS.create=function(t,e){return new MS(t,e)},MS.version="1.15.6";var PS,NS,QS,HS,GS,VS,zS=[],KS=!1;function jS(){zS.forEach((function(t){clearInterval(t.pid)})),zS=[]}function WS(){clearInterval(VS)}var $S=IE((function(t,e,i,n){if(e.scroll){var s,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,l=e.scrollSpeed,A=wE(),c=!1;NS!==i&&(NS=i,jS(),PS=e.scroll,s=e.scrollFn,!0===PS&&(PS=SE(i,!0)));var h=0,u=PS;do{var d=u,g=vE(d),p=g.top,f=g.bottom,m=g.left,_=g.right,y=g.width,w=g.height,v=void 0,b=void 0,C=d.scrollWidth,x=d.scrollHeight,B=mE(d),E=d.scrollLeft,S=d.scrollTop;d===A?(v=y<C&&("auto"===B.overflowX||"scroll"===B.overflowX||"visible"===B.overflowX),b=w<x&&("auto"===B.overflowY||"scroll"===B.overflowY||"visible"===B.overflowY)):(v=y<C&&("auto"===B.overflowX||"scroll"===B.overflowX),b=w<x&&("auto"===B.overflowY||"scroll"===B.overflowY));var F=v&&(Math.abs(_-r)<=a&&E+y<C)-(Math.abs(m-r)<=a&&!!E),I=b&&(Math.abs(f-o)<=a&&S+w<x)-(Math.abs(p-o)<=a&&!!S);if(!zS[h])for(var L=0;L<=h;L++)zS[L]||(zS[L]={});zS[h].vx==F&&zS[h].vy==I&&zS[h].el===d||(zS[h].el=d,zS[h].vx=F,zS[h].vy=I,clearInterval(zS[h].pid),0==F&&0==I||(c=!0,zS[h].pid=setInterval(function(){n&&0===this.layer&&MS.active._onTouchMove(GS);var e=zS[this.layer].vy?zS[this.layer].vy*l:0,i=zS[this.layer].vx?zS[this.layer].vx*l:0;"function"==typeof s&&"continue"!==s.call(MS.dragged.parentNode[RE],i,e,t,GS,zS[this.layer].el)||LE(zS[this.layer].el,i,e)}.bind({layer:h}),24))),h++}while(e.bubbleScroll&&u!==A&&(u=SE(u,!1)));KS=c}}),30),YS=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,s=t.activeSortable,r=t.dispatchSortableEvent,o=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=i||s;o();var A=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(A.clientX,A.clientY);a(),l&&!l.el.contains(c)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function XS(){}function qS(){}XS.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=CE(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:YS},JB(XS,{pluginName:"revertOnSpill"}),qS.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:YS},JB(qS,{pluginName:"removeOnSpill"}),MS.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?AE(document,"dragover",this._handleAutoScroll):this.options.supportPointer?AE(document,"pointermove",this._handleFallbackAutoScroll):e.touches?AE(document,"touchmove",this._handleFallbackAutoScroll):AE(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?cE(document,"dragover",this._handleAutoScroll):(cE(document,"pointermove",this._handleFallbackAutoScroll),cE(document,"touchmove",this._handleFallbackAutoScroll),cE(document,"mousemove",this._handleFallbackAutoScroll)),WS(),jS(),clearTimeout(gE),gE=void 0},nulling:function(){GS=NS=PS=KS=VS=QS=HS=null,zS.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,r=document.elementFromPoint(n,s);if(GS=t,e||this.options.forceAutoScrollFallback||nE||iE||rE){$S(t,this.options,r,e);var o=SE(r,!0);!KS||VS&&n===QS&&s===HS||(VS&&WS(),VS=setInterval((function(){var r=SE(document.elementFromPoint(n,s),!0);r!==o&&(o=r,jS()),$S(t,i.options,r,e)}),10),QS=n,HS=s)}else{if(!this.options.bubbleScroll||SE(r,!0)===wE())return void jS();$S(t,this.options,SE(r,!1),!1)}}},JB(t,{pluginName:"scroll",initializeByDefault:!0})}),MS.mount(qS,XS);const ZS=Object.freeze([{text:"Tile",value:"Tile"},{text:"Vector",value:"Vector"}]),JS=Object.freeze({Tile:Ny,Vector:WA}),tF=Object.freeze([{text:"TileWMS",value:"TileWMS"},{text:"XYZ",value:"XYZ"},{text:"OSM",value:"OSM"},{text:"Vector",value:"Vector"}]),eF=Object.freeze({TileWMS:class extends sw{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const s=_e(i),r=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(r));const a=Le(t,s,r),A=xy(r,s,t,e),c=o.getZForResolution(A,this.zDirection),h=o.getResolution(c),u=o.getTileCoordForCoordAndZ(a,c);if(o.getResolutions().length<=u[0])return;let d=o.getTileCoordExtent(u,this.tmpExtent_);const g=this.gutter_;0!==g&&(d=l(d,h*g,d));const p={QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,Aw(this.params_,"GetFeatureInfo"),n);const f=Math.floor((a[0]-d[0])/h),m=Math.floor((d[3]-a[1])/h);return p[this.v13_?"I":"X"]=f,p[this.v13_?"J":"Y"]=m,this.getRequestUrl_(u,d,1,r||s,p)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const i={SERVICE:"WMS",VERSION:aw,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*e/n}return Object.assign(i,e),Ky(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,s){const r=this.urls;if(!r)return;let o;if(1==r.length)o=r[0];else{o=r[$(Ly(t),r.length)]}return lw(e,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(t[0]),i,n,o,s,this.serverType_)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){const t=this.params_.VERSION||aw;this.v13_=it(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const s=n.getResolution(t[0]);let r=n.getTileCoordExtent(t,this.tmpExtent_);const o=this.gutter_;0!==o&&(r=l(r,s*o,r));const a=Object.assign({},Aw(this.params_,"GetMap"));return this.getRequestUrl_(t,r,e,i,a)}},XYZ:ow,OSM:cw,Vector:gc}),iF=function(t,e){return t in eF?new eF[t](e):null},nF="oltb-layer-modal",sF="modalExtensions.layerModal",rF=Object.freeze({name:"",onCreate:void 0,onCancel:void 0});class oF extends Xm{#re=[];constructor(t={}){super({filename:"layer-modal.js",title:Mm.get(`${sF}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(rF),t),this.#oe()}getName(){return super.getName()}#oe(){const t=Mm.get(`${sF}.form`),[e,i]=Mw({idPrefix:nF,idPostfix:"-name",text:t.name,value:this.options.name??"New map layer"}),[n,s]=Rw({idPrefix:nF,idPostfix:"-type",text:t.layer,options:Fh.cloneDeep(ZS)}),[r,o]=Rw({idPrefix:nF,idPostfix:"-source",text:t.source,options:Fh.cloneDeep(tF)}),a=[];Ox.getProjections().forEach((t=>{a.push({text:`${t.name} (${t.code})`,value:t.code})}));const[l,A]=Rw({idPrefix:nF,idPostfix:"-projection",text:t.projection,options:a,value:Jg.getConfig().projection.default}),[c,h]=Mw({idPrefix:nF,idPostfix:"-url",text:t.url}),[u,d]=Mw({idPrefix:nF,idPostfix:"-parameters",text:t.parameters,placeholder:'{"Layers": "HPD_TRP"}'}),[g,p]=Rw({idPrefix:nF,idPostfix:"-wrapx",text:t.wrapX,options:[{text:"False",value:"False"},{text:"True",value:"True"}]}),[f,m]=Rw({idPrefix:nF,idPostfix:"-cors",text:t.cors,options:[{text:"Anonymous",value:"anonymous"},{text:"Credentials",value:"use-credentials"},{text:"None",value:"undefined"}]}),[_,y]=Mw({idPrefix:nF,idPostfix:"-attributions",text:t.attributions}),w=tp.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),v=Jg.getConfig().projection.default,b=tp.createElement({element:"button",text:t.createLayer,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#ae({name:i.value.trim(),layer:s.value.trim(),source:o.value.trim(),projection:A.value.trim()||v,url:h.value.trim(),parameters:d.value.trim()||"{}",wrapX:p.value.trim(),crossOrigin:m.value.trim(),attributions:y.value.trim(),isDynamicallyAdded:!0})}}}),C=tp.createElement({element:"button",text:t.cancel,class:"oltb-dialog__btn oltb-btn "+(o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(w,[C,b]);const x=tp.createElement({element:"div",class:"oltb-modal__content"});tp.appendChildren(x,[e,n,r,l,c,u,g,f,_,w]),this.#re=[C,b],this.show(x)}#ae(t){this.close(),this.options.onCreate&&this.options.onCreate(t)}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#re}}const aF=function(t,e){rg.logDebug("download-file.js","downloadFile",t);const i=tp.createElement({element:"a",attributes:{download:t}}),n=function(t){return null!==t.split(".").pop().match(/jpg|jpeg|png|gif|svg/i)}(t)?e:`data:text/plain;charset=utf-8,${encodeURIComponent(e)}`;i.setAttribute("href",n),i.click()},lF="oltb-checkbox-wrapper",AF=Object.freeze({idPrefix:"",idPostfix:"",i18nKey:void 0,text:"",checked:!1,bottomMargin:!1,listeners:[]}),cF=function(t={}){t=Fh.merge(Fh.cloneDeep(AF),t);const e=tp.createElement({element:"div",class:`${lF} ${t.bottomMargin?`${lF}--margin`:""}`});t.i18nKey&&(t.text=Mm.get(t.i18nKey));const i=tp.createElement({element:"label",text:t.text,class:`${lF}__title oltb-label--inline oltb-m-0`,attributes:{for:`${t.idPrefix}${t.idPostfix}`,...t.i18nKey&&{"data-oltb-i18n":t.i18nKey}}}),n=tp.createElement({element:"input",id:`${t.idPrefix}${t.idPostfix}`,class:`${lF}__checkbox`,attributes:{type:"checkbox"}});t.checked&&n.setAttribute("checked","");for(const e in t.listeners){const i=t.listeners[e];Array.isArray(i)?i.forEach((t=>{n.addEventListener(e,t)})):n.addEventListener(e,i)}return tp.appendChildren(e,[n,i]),[e,n]};class hF{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=cs,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?_e(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=_e(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return gi()}readFeature(t,e){return gi()}readFeatures(t,e){return gi()}readGeometry(t,e){return gi()}readProjection(t){return gi()}writeFeature(t,e){return gi()}writeFeatures(t,e){return gi()}writeGeometry(t,e){return gi()}}function uF(t,e,i){const n=i?_e(i.featureProjection):null,s=i?_e(i.dataProjection):null;let r=t;if(n&&s&&!Ee(n,s)){e&&(r=t.clone());const i=e?n:s,o=e?s:n;"tile-pixels"===i.getUnits()?r.transform(i,o):r.applyTransform(Ie(i,o))}if(e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*e)/e;return t};r===t&&(r=t.clone()),r.applyTransform(n)}return r}const dF={Point:In,LineString:ys,Polygon:jn,MultiPoint:vs,MultiLineString:ws,MultiPolygon:Cs};function gF(t,e){const i=t.geometry;if(!i)return[];if(Array.isArray(i))return i.map((e=>gF({...t,geometry:e}))).flat();const n="MultiPolygon"===i.type?"Polygon":i.type;if("GeometryCollection"===n||"Circle"===n)throw new Error("Unsupported geometry type: "+n);const s=i.layout.length;return uF(new ic(n,"Polygon"===n?function(t,e,i){return Array.isArray(e[0])?(Vn(t,0,e,i)||Kn(t=t.slice(),0,e,i),t):(Gn(t,0,e,i)||zn(t=t.slice(),0,e,i),t)}(i.flatCoordinates,i.ends,s):i.flatCoordinates,i.ends?.flat(),s,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function pF(t,e){if(!t)return null;if(Array.isArray(t)){const i=t.map((t=>pF(t,e)));return new gs(i)}return uF(new(0,dF[t.type])(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class fF extends hF{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(mF(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(mF(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return gi()}readFeaturesFromObject(t,e){return gi()}readGeometry(t,e){return this.readGeometryFromObject(mF(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return gi()}readProjection(t){return this.readProjectionFromObject(mF(t))}readProjectionFromObject(t){return gi()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return gi()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return gi()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return gi()}}function mF(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}function _F(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:an(e.length)}}(t);break;case"LineString":i=function(t){const e=t.coordinates,i=e.flat();return{type:"LineString",flatCoordinates:i,ends:[i.length],layout:an(e[0]?.length||2)}}(t);break;case"Polygon":i=function(t){const e=t.coordinates,i=[],n=e[0]?.[0]?.length,s=_n(i,0,e,n);return{type:"Polygon",flatCoordinates:i,ends:s,layout:an(n)}}(t);break;case"MultiPoint":i=function(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:an(e[0]?.length||2)}}(t);break;case"MultiLineString":i=function(t){const e=t.coordinates,i=e[0]?.[0]?.length||2,n=[],s=_n(n,0,e,i);return{type:"MultiLineString",flatCoordinates:n,ends:s,layout:an(i)}}(t);break;case"MultiPolygon":i=function(t){const e=t.coordinates,i=[],n=e[0]?.[0]?.[0].length||2,s=yn(i,0,e,n);return{type:"MultiPolygon",flatCoordinates:i,ends:s,layout:an(n)}}(t);break;case"GeometryCollection":i=function(t){const e=t.geometries.map((function(t){return _F(t)}));return e}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return i}function yF(t,e){const i=(t=uF(t,!0,e)).getType();let n;switch(i){case"Point":n=function(t){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":n=function(t){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":n=function(t,e){let i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"MultiPoint":n=function(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":n=function(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":n=function(t,e){let i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"GeometryCollection":n=function(t,e){e=Object.assign({},e),delete e.featureProjection;const i=t.getGeometriesArray().map((function(t){return yF(t,e)}));return{type:"GeometryCollection",geometries:i}}(t,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const wF="http://www.w3.org/2001/XMLSchema-instance";function vF(t,e){return QF().createElementNS(t,e)}function bF(t,e){return CF(t,e,[]).join("")}function CF(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)i.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)CF(n,e,i)}return i}function xF(t){return"documentElement"in t}function BF(t){return(new DOMParser).parseFromString(t,"application/xml")}function EF(t,e){return function(i,n){const s=t.call(e??this,i,n);if(void 0!==s){ei(n[n.length-1],s)}}}function SF(t,e){return function(i,n){const s=t.call(e??this,i,n);if(void 0!==s){n[n.length-1].push(s)}}}function FF(t,e){return function(e,i){const n=t.call(this,e,i);void 0!==n&&(i[i.length-1]=n)}}function IF(t,e,i){return function(i,n){const s=t.call(this,i,n);if(void 0!==s){n[n.length-1][void 0!==e?e:i.localName]=s}}}function LF(t,e){return function(e,i,n){t.call(this,e,i,n);n[n.length-1].node.appendChild(e)}}function MF(t,e){return function(e,i,n){const s=i[i.length-1].node;let r=t;void 0===r&&(r=n);return vF(s.namespaceURI,r)}}const TF=MF();function RF(t,e){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=t[e[s]];return n}function kF(t,e,i){let n,s;for(i=void 0!==i?i:{},n=0,s=t.length;n<s;++n)i[t[n]]=e;return i}function UF(t,e,i,n){let s;for(s=e.firstElementChild;s;s=s.nextElementSibling){const e=t[s.namespaceURI];if(void 0!==e){const t=e[s.localName];void 0!==t&&t.call(n,s,i)}}}function DF(t,e,i,n,s){return n.push(t),UF(e,i,n,s),n.pop()}function OF(t,e,i,n,s,r,o){return s.push(t),function(t,e,i,n,s,r){const o=(void 0!==s?s:i).length;let a,l;for(let A=0;A<o;++A)a=i[A],void 0!==a&&(l=e.call(r,a,n,void 0!==s?s[A]:void 0),void 0!==l&&t[l.namespaceURI][l.localName].call(r,l,a,n))}(e,i,n,s,r,o),s.pop()}let PF,NF;function QF(){return void 0===NF&&"undefined"!=typeof document&&(NF=document.implementation.createDocument("","",null)),NF}class HF extends hF{constructor(){super(),this.xmlSerializer_=(void 0===PF&&"undefined"!=typeof XMLSerializer&&(PF=new XMLSerializer),PF)}getType(){return"xml"}readFeature(t,e){if(!t)return null;if("string"==typeof t){const i=BF(t);return this.readFeatureFromDocument(i,e)}return xF(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if("string"==typeof t){const i=BF(t);return this.readFeaturesFromDocument(i,e)}return xF(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&ei(i,this.readFeaturesFromNode(n,e));return i}readFeaturesFromNode(t,e){return gi()}readGeometry(t,e){if(!t)return null;if("string"==typeof t){const i=BF(t);return this.readGeometryFromDocument(i,e)}return xF(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if("string"==typeof t){const e=BF(t);return this.readProjectionFromDocument(e)}return xF(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(t,e){return null}}function GF(t){return function(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return void 0!==e[1]||!1;return}(bF(t,!1))}function VF(t){return function(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1]);return}(bF(t,!1))}function zF(t){return bF(t,!1).trim()}function KF(t,e){XF(t,e?"1":"0")}function jF(t,e){const i=e.toPrecision();t.appendChild(QF().createTextNode(i))}const WF=/^\s/,$F=/\s$/,YF=/(\n|\t|\r|<|&| {2})/;function XF(t,e){"string"==typeof e&&(WF.test(e)||$F.test(e)||YF.test(e))?e.split("]]>").forEach(((e,i,n)=>{i<n.length-1&&(e+="]]"),i>0&&(e=">"+e),function(t,e){t.appendChild(QF().createCDATASection(e))}(t,e)})):t.appendChild(QF().createTextNode(e))}const qF=["http://www.google.com/kml/ext/2.2"],ZF=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],JF={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},tI=kF(ZF,{ExtendedData:nL,Region:sL,MultiGeometry:IF($I,"geometry"),LineString:IF(KI,"geometry"),LinearRing:IF(jI,"geometry"),Point:IF(YI,"geometry"),Polygon:IF(qI,"geometry"),Style:IF(JI),StyleMap:function(t,e){const i=MI.call(this,t,e);if(!i)return;const n=e[e.length-1];if(Array.isArray(i))n.Style=i;else{if("string"!=typeof i)throw new Error("`styleMapValue` has an unknown type");n.styleUrl=i}},address:IF(zF),description:IF(zF),name:IF(zF),open:IF(GF),phoneNumber:IF(zF),styleUrl:IF(FI),visibility:IF(GF)},kF(qF,{MultiTrack:IF((function(t,e){const i=DF([],PI,t,e);if(!i)return;return new ws(i)}),"geometry"),Track:IF(QI,"geometry")})),eI=kF(ZF,{ExtendedData:nL,Region:sL,Link:function(t,e){UF(iI,t,e)},address:IF(zF),description:IF(zF),name:IF(zF),open:IF(GF),phoneNumber:IF(zF),visibility:IF(GF)}),iI=kF(ZF,{href:IF(SI)}),nI=kF(ZF,{Altitude:IF(VF),Longitude:IF(VF),Latitude:IF(VF),Tilt:IF(VF),AltitudeMode:IF(zF),Heading:IF(VF),Roll:IF(VF)}),sI=kF(ZF,{LatLonAltBox:function(t,e){const i=DF({},aL,t,e);if(!i)return;const n=e[e.length-1],s=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];n.extent=s,n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,e){const i=DF({},lL,t,e);if(!i)return;const n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),rI=kF(ZF,["Document","Placemark"]),oI=kF(ZF,{Document:LF((function(t,e,i){OF({node:t},dL,gL,e,i,void 0,this)})),Placemark:LF(PL)});let aI,lI,AI,cI,hI,uI,dI,gI,pI,fI=null,mI=null,_I=null,yI=null,wI=null,vI=null;function bI(t){return 32/Math.min(t[0],t[1])}function CI(t){return t}function xI(t,e,i){return Array.isArray(t)?t:"string"==typeof t?xI(i[t],e,i):e}function BI(t){const e=bF(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){const t=i[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function EI(t){let e=bF(t,!1);const i=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let s;for(;s=n.exec(e);){const t=parseFloat(s[1]),n=parseFloat(s[2]),r=s[3]?parseFloat(s[3]):0;i.push(t,n,r),e=e.substr(s[0].length)}if(""===e)return i}function SI(t){const e=bF(t,!1).trim();let i=t.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i){return new URL(e,i).href}return e}function FI(t){const e=bF(t,!1).trim().replace(/^(?!.*#)/,"#");let i=t.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i){return new URL(e,i).href}return e}function II(t){return VF(t)}const LI=kF(ZF,{Pair:function(t,e){const i=DF({},rL,t,e,this);if(!i)return;const n=i.key;if(n&&"normal"==n){const t=i.styleUrl;t&&(e[e.length-1]=t);const n=i.Style;n&&(e[e.length-1]=n)}}});function MI(t,e){return DF(void 0,LI,t,e,this)}const TI=kF(ZF,{Icon:IF((function(t,e){const i=DF({},HI,t,e);if(i)return i;return null})),color:IF(BI),heading:IF(VF),hotSpot:IF((function(t){const e=t.getAttribute("xunits"),i=t.getAttribute("yunits");let n;return n="insetPixels"!==e?"insetPixels"!==i?"bottom-left":"top-left":"insetPixels"!==i?"bottom-right":"top-right",{x:parseFloat(t.getAttribute("x")),xunits:JF[e],y:parseFloat(t.getAttribute("y")),yunits:JF[i],origin:n}})),scale:IF(II)});const RI=kF(ZF,{color:IF(BI),scale:IF(II)});const kI=kF(ZF,{color:IF(BI),width:IF(VF)});const UI=kF(ZF,{color:IF(BI),fill:IF(GF),outline:IF(GF)});const DI=kF(ZF,{coordinates:FF(EI)});function OI(t,e){return DF(null,DI,t,e)}const PI=kF(qF,{Track:SF(QI)});const NI=kF(ZF,{when:function(t,e){const i=e[e.length-1].whens,n=bF(t,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}},kF(qF,{coord:function(t,e){const i=e[e.length-1].coordinates,n=bF(t,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(s){const t=parseFloat(s[1]),e=parseFloat(s[2]),n=parseFloat(s[3]);i.push([t,e,n])}else i.push([])}}));function QI(t,e){const i=DF({coordinates:[],whens:[]},NI,t,e);if(!i)return;const n=[],s=i.coordinates,r=i.whens;for(let t=0,e=Math.min(s.length,r.length);t<e;++t)3==s[t].length&&n.push(s[t][0],s[t][1],s[t][2],r[t]);return new ys(n,"XYZM")}const HI=kF(ZF,{href:IF(SI)},kF(qF,{x:IF(VF),y:IF(VF),w:IF(VF),h:IF(VF)}));const GI=kF(ZF,{coordinates:FF(EI)});function VI(t,e){return DF(null,GI,t,e)}const zI=kF(ZF,{extrude:IF(GF),tessellate:IF(GF),altitudeMode:IF(zF)});function KI(t,e){const i=DF({},zI,t,e),n=VI(t,e);if(n){const t=new ys(n,"XYZ");return t.setProperties(i,!0),t}}function jI(t,e){const i=DF({},zI,t,e),n=VI(t,e);if(n){const t=new jn(n,"XYZ",[n.length]);return t.setProperties(i,!0),t}}const WI=kF(ZF,{LineString:SF(KI),LinearRing:SF(jI),MultiGeometry:SF($I),Point:SF(YI),Polygon:SF(qI)});function $I(t,e){const i=DF([],WI,t,e);if(!i)return null;if(0===i.length)return new gs(i);let n,s=!0;const r=i[0].getType();let o;for(let t=1,e=i.length;t<e;++t)if(o=i[t],o.getType()!=r){s=!1;break}if(s){let t,e;if("Point"==r){const s=i[0];t=s.getLayout(),e=s.getFlatCoordinates();for(let t=1,n=i.length;t<n;++t)o=i[t],ei(e,o.getFlatCoordinates());n=new vs(e,t),tL(n,i)}else if("LineString"==r)n=new ws(i),tL(n,i);else if("Polygon"==r)n=new Cs(i),tL(n,i);else{if("GeometryCollection"!=r&&!r.startsWith("Multi"))throw new Error("Unknown geometry type found");n=new gs(i)}}else n=new gs(i);return n}function YI(t,e){const i=DF({},zI,t,e),n=VI(t,e);if(n){const t=new In(n,"XYZ");return t.setProperties(i,!0),t}}const XI=kF(ZF,{innerBoundaryIs:function(t,e){const i=DF([],AL,t,e);if(i.length>0){e[e.length-1].push(...i)}},outerBoundaryIs:function(t,e){const i=DF(void 0,cL,t,e);if(i){e[e.length-1][0]=i}}});function qI(t,e){const i=DF({},zI,t,e),n=DF([null],XI,t,e);if(n&&n[0]){const t=n[0],e=[t.length];for(let i=1,s=n.length;i<s;++i)ei(t,n[i]),e.push(t.length);const s=new jn(t,"XYZ",e);return s.setProperties(i,!0),s}}const ZI=kF(ZF,{IconStyle:function(t,e){const i=DF({},TI,t,e);if(!i)return;const n=e[e.length-1],s="Icon"in i?i.Icon:{},r=!("Icon"in i)||Object.keys(s).length>0;let o;const a=s.href;let l,A,c;a?o=a:r&&(o=uI);let h="bottom-left";const u=i.hotSpot;let d;u?(l=[u.x,u.y],A=u.xunits,c=u.yunits,h=u.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=lI,A=AI,c=cI):o.includes("arrow-reverse")?(l=[54,42],A=AI,c=cI):o.includes("paddle")&&(l=[32,1],A=AI,c=cI));const g=s.x,p=s.y;let f;void 0!==g&&void 0!==p&&(d=[g,p]);const m=s.w,_=s.h;let y;void 0!==m&&void 0!==_&&(f=[m,_]);const w=i.heading;void 0!==w&&(y=W(w));const v=i.scale,b=i.color;if(r){o==uI&&(f=hI);const t=new Go({anchor:l,anchorOrigin:h,anchorXUnits:A,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:d,offsetOrigin:"bottom-left",rotation:y,scale:v,size:f,src:this.iconUrlFunction_(o),color:b}),e=t.getScaleArray()[0],i=t.getSize();if(null===i){const i=t.getImageState();if(i===Ns||i===Qs){const n=function(){const i=t.getImageState();if(i!==Ns&&i!==Qs){const i=t.getSize();if(i&&2==i.length){const n=bI(i);t.setScale(e*n)}t.unlistenImageChange(n)}};t.listenImageChange(n),i===Ns&&t.load()}}else if(2==i.length){const n=bI(i);t.setScale(e*n)}n.imageStyle=t}else n.imageStyle=dI},LabelStyle:function(t,e){const i=DF({},RI,t,e);if(!i)return;const n=e[e.length-1],s=new Yo({fill:new Qo({color:"color"in i?i.color:aI}),scale:i.scale});n.textStyle=s},LineStyle:function(t,e){const i=DF({},kI,t,e);if(!i)return;const n=e[e.length-1],s=new Vo({color:"color"in i?i.color:aI,width:"width"in i?i.width:1});n.strokeStyle=s},PolyStyle:function(t,e){const i=DF({},UI,t,e);if(!i)return;const n=e[e.length-1],s=new Qo({color:"color"in i?i.color:aI});n.fillStyle=s;const r=i.fill;void 0!==r&&(n.fill=r);const o=i.outline;void 0!==o&&(n.outline=o)}});function JI(t,e){const i=DF({},ZI,t,e,this);if(!i)return null;let n="fillStyle"in i?i.fillStyle:fI;const s=i.fill;let r;void 0===s||s||(n=null),"imageStyle"in i?i.imageStyle!=dI&&(r=i.imageStyle):r=mI;const o="textStyle"in i?i.textStyle:yI,a="strokeStyle"in i?i.strokeStyle:_I,l=i.outline;return void 0===l||l?[new zo({fill:n,image:r,stroke:a,text:o,zIndex:void 0})]:[new zo({geometry:function(t){const e=t.getGeometry(),i=e.getType();if("GeometryCollection"===i){return new gs(e.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"!==e&&"MultiPolygon"!==e})))}if("Polygon"!==i&&"MultiPolygon"!==i)return e},fill:n,image:r,stroke:a,text:o,zIndex:void 0}),new zo({geometry:function(t){const e=t.getGeometry(),i=e.getType();if("GeometryCollection"===i){return new gs(e.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})))}if("Polygon"===i||"MultiPolygon"===i)return e},fill:n,stroke:null,zIndex:void 0})]}function tL(t,e){const i=e.length,n=new Array(e.length),s=new Array(e.length),r=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let t=0;t<i;++t){const i=e[t];n[t]=i.get("extrude"),s[t]=i.get("tessellate"),r[t]=i.get("altitudeMode"),o=o||void 0!==n[t],a=a||void 0!==s[t],l=l||r[t]}o&&t.set("extrude",n),a&&t.set("tessellate",s),l&&t.set("altitudeMode",r)}const eL=kF(ZF,{displayName:IF(zF),value:IF(zF)});const iL=kF(ZF,{Data:function(t,e){const i=t.getAttribute("name");UF(eL,t,e);const n=e[e.length-1];i&&n.displayName?n[i]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){UF(oL,t,e)}});function nL(t,e){UF(iL,t,e)}function sL(t,e){UF(sI,t,e)}const rL=kF(ZF,{Style:IF(JI),key:IF(zF),styleUrl:IF(FI)});const oL=kF(ZF,{SimpleData:function(t,e){const i=t.getAttribute("name");if(null!==i){const n=zF(t);e[e.length-1][i]=n}}});const aL=kF(ZF,{altitudeMode:IF(zF),minAltitude:IF(VF),maxAltitude:IF(VF),north:IF(VF),south:IF(VF),east:IF(VF),west:IF(VF)});const lL=kF(ZF,{minLodPixels:IF(VF),maxLodPixels:IF(VF),minFadeExtent:IF(VF),maxFadeExtent:IF(VF)});const AL=kF(ZF,{LinearRing:SF(OI)});const cL=kF(ZF,{LinearRing:FF(OI)});function hL(t,e){const i=ar(e),n=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]];for(let t=0;t<4;++t){const e=Math.floor(n[t]).toString(16);n[t]=1==e.length?"0"+e:e}XF(t,n.join(""))}const uL=kF(ZF,{Data:LF((function(t,e,i){t.setAttribute("name",e.name);const n={node:t},s=e.value;"object"==typeof s?(null!==s&&s.displayName&&OF(n,uL,TF,[s.displayName],i,["displayName"]),null!==s&&s.value&&OF(n,uL,TF,[s.value],i,["value"])):OF(n,uL,TF,[s],i,["value"])})),value:LF((function(t,e){XF(t,e)})),displayName:LF((function(t,e){XF(t,e)}))});const dL=kF(ZF,{Placemark:LF(PL)}),gL=function(t,e,i){return vF(e[e.length-1].node.namespaceURI,"Placemark")};const pL=MF("Data");const fL=kF(ZF,["href"],kF(qF,["x","y","w","h"])),mL=kF(ZF,{href:LF(XF)},kF(qF,{x:LF(jF),y:LF(jF),w:LF(jF),h:LF(jF)})),_L=function(t,e,i){return vF(qF[0],"gx:"+i)};const yL=kF(ZF,["scale","heading","Icon","color","hotSpot"]),wL=kF(ZF,{Icon:LF((function(t,e,i){const n={node:t},s=i[i.length-1].node;let r=fL[s.namespaceURI],o=RF(e,r);OF(n,mL,TF,o,i,r),r=fL[qF[0]],o=RF(e,r),OF(n,mL,_L,o,i,r)})),color:LF(hL),heading:LF(jF),hotSpot:LF((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:LF($L)});const vL=kF(ZF,["color","scale"]),bL=kF(ZF,{color:LF(hL),scale:LF($L)});const CL=kF(ZF,["color","width"]),xL=kF(ZF,{color:LF(hL),width:LF(jF)});const BL={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},EL=function(t,e,i){if(t){return vF(e[e.length-1].node.namespaceURI,BL[t.getType()])}},SL=MF("Point"),FL=MF("LineString"),IL=MF("LinearRing"),LL=MF("Polygon"),ML=kF(ZF,{LineString:LF(HL),Point:LF(HL),Polygon:LF(jL),GeometryCollection:LF(TL)});function TL(t,e,i){const n={node:t},s=e.getType();let r,o=[];if("GeometryCollection"===s)e.getGeometriesArrayRecursive().forEach((function(t){const e=t.getType();if("MultiPoint"===e)o=o.concat(t.getPoints());else if("MultiLineString"===e)o=o.concat(t.getLineStrings());else if("MultiPolygon"===e)o=o.concat(t.getPolygons());else{if("Point"!==e&&"LineString"!==e&&"Polygon"!==e)throw new Error("Unknown geometry type");o.push(t)}})),r=EL;else if("MultiPoint"===s)o=e.getPoints(),r=SL;else if("MultiLineString"===s)o=e.getLineStrings(),r=FL;else{if("MultiPolygon"!==s)throw new Error("Unknown geometry type");o=e.getPolygons(),r=LL}OF(n,ML,r,o,i)}const RL=kF(ZF,{LinearRing:LF(HL)});function kL(t,e,i){OF({node:t},RL,IL,[e],i)}const UL=kF(ZF,{ExtendedData:LF((function(t,e,i){const n={node:t},s=e.names,r=e.values,o=s.length;for(let t=0;t<o;t++)OF(n,uL,pL,[{name:s[t],value:r[t]}],i)})),MultiGeometry:LF(TL),LineString:LF(HL),LinearRing:LF(HL),Point:LF(HL),Polygon:LF(jL),Style:LF((function(t,e,i){const n={node:t},s={};if(e.pointStyles.length){const t=e.pointStyles[0].getText();t&&(s.LabelStyle=t);const i=e.pointStyles[0].getImage();i&&"function"==typeof i.getSrc&&(s.IconStyle=i)}if(e.lineStyles.length){const t=e.lineStyles[0].getStroke();t&&(s.LineStyle=t)}if(e.polyStyles.length){const t=e.polyStyles[0].getStroke();t&&!s.LineStyle&&(s.LineStyle=t),s.PolyStyle=e.polyStyles[0]}const r=i[i.length-1].node,o=YL[r.namespaceURI],a=RF(s,o);OF(n,XL,TF,a,i,o)})),address:LF(XF),description:LF(XF),name:LF(XF),open:LF(KF),phoneNumber:LF(XF),styleUrl:LF(XF),visibility:LF(KF)}),DL=kF(ZF,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),OL=MF("ExtendedData");function PL(t,e,i){const n={node:t};e.getId()&&t.setAttribute("id",e.getId());const s=e.getProperties(),r={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};r[e.getGeometryName()]=1;const o=Object.keys(s||{}).sort().filter((function(t){return!r[t]})),a=e.getStyleFunction();if(a){const t=a(e,0);if(t){const i=Array.isArray(t)?t:[t];let n=i;if(e.getGeometry()&&(n=i.filter((function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})).length:"Point"===t||"MultiPoint"===t}}))),this.writeStyles_){let t=i,r=i;e.getGeometry()&&(t=i.filter((function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"LineString"===e||"MultiLineString"===e})).length:"LineString"===t||"MultiLineString"===t}})),r=i.filter((function(t){const i=t.getGeometryFunction()(e);if(i){const t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})).length:"Polygon"===t||"MultiPolygon"===t}}))),s.Style={pointStyles:n,lineStyles:t,polyStyles:r}}if(n.length&&void 0===s.name){const t=n[0].getText();t&&(s.name=t.getText())}}}const l=i[i.length-1].node,A=DL[l.namespaceURI],c=RF(s,A);if(OF(n,UL,TF,c,i,A),o.length>0){const t=RF(s,o);OF(n,UL,OL,[{names:o,values:t}],i)}const h=i[0];let u=e.getGeometry();u&&(u=uF(u,!0,h)),OF(n,UL,EL,[u],i)}const NL=kF(ZF,["extrude","tessellate","altitudeMode","coordinates"]),QL=kF(ZF,{extrude:LF(KF),tessellate:LF(KF),altitudeMode:LF(XF),coordinates:LF((function(t,e,i){const n=i[i.length-1],s=n.layout,r=n.stride;let o;if("XY"==s||"XYM"==s)o=2;else{if("XYZ"!=s&&"XYZM"!=s)throw new Error("Invalid geometry layout");o=3}const a=e.length;let l="";if(a>0){l+=e[0];for(let t=1;t<o;++t)l+=","+e[t];for(let t=r;t<a;t+=r){l+=" "+e[t];for(let i=1;i<o;++i)l+=","+e[t+i]}}XF(t,l)}))});function HL(t,e,i){const n=e.getFlatCoordinates(),s={node:t};s.layout=e.getLayout(),s.stride=e.getStride();const r=e.getProperties();r.coordinates=n;const o=i[i.length-1].node,a=NL[o.namespaceURI],l=RF(r,a);OF(s,QL,TF,l,i,a)}const GL=kF(ZF,["color","fill","outline"]),VL=kF(ZF,{outerBoundaryIs:LF(kL),innerBoundaryIs:LF(kL)}),zL=MF("innerBoundaryIs"),KL=MF("outerBoundaryIs");function jL(t,e,i){const n=e.getLinearRings(),s=n.shift(),r={node:t};OF(r,VL,zL,n,i),OF(r,VL,KL,[s],i)}const WL=kF(ZF,{color:LF(hL),fill:LF(KF),outline:LF(KF)});function $L(t,e){jF(t,Math.round(1e6*e)/1e6)}const YL=kF(ZF,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),XL=kF(ZF,{IconStyle:LF((function(t,e,i){const n={node:t},s={},r=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:r};if(o){l.w=o[0],l.h=o[1];const t=e.getAnchor(),i=e.getOrigin();if(i&&a&&0!==i[0]&&i[1]!==o[1]&&(l.x=i[0],l.y=a[1]-(i[1]+o[1])),t&&(t[0]!==o[0]/2||t[1]!==o[1]/2)){const e={x:t[0],xunits:"pixels",y:o[1]-t[1],yunits:"pixels"};s.hotSpot=e}}s.Icon=l;let A=e.getScaleArray()[0],c=o;if(null===c&&(c=hI),2==c.length){A/=bI(c)}1!==A&&(s.scale=A);const h=e.getRotation();0!==h&&(s.heading=h);const u=e.getColor();u&&(s.color=u);const d=i[i.length-1].node,g=yL[d.namespaceURI],p=RF(s,g);OF(n,wL,TF,p,i,g)})),LabelStyle:LF((function(t,e,i){const n={node:t},s={},r=e.getFill();r&&(s.color=r.getColor());const o=e.getScale();o&&1!==o&&(s.scale=o);const a=i[i.length-1].node,l=vL[a.namespaceURI],A=RF(s,l);OF(n,bL,TF,A,i,l)})),LineStyle:LF((function(t,e,i){const n={node:t},s={color:e.getColor(),width:Number(e.getWidth())||1},r=i[i.length-1].node,o=CL[r.namespaceURI],a=RF(s,o);OF(n,xL,TF,a,i,o)})),PolyStyle:LF((function(t,e,i){const n={node:t},s=e.getFill(),r=e.getStroke(),o={color:s?s.getColor():void 0,fill:!!s&&void 0,outline:!!r&&void 0},a=i[i.length-1].node,l=GL[a.namespaceURI],A=RF(o,l);OF(n,WL,TF,A,i,l)}))});const qL=Object.freeze([{text:"GeoJSON",value:"GeoJSON"},{text:"KML",value:"KML"}]),ZL=Object.freeze({GeoJSON:class extends fF{constructor(t){t=t||{},super(),this.dataProjection=_e(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=_e(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const n=_F(i.geometry);if(this.featureClass===ic)return gF({geometry:n,id:i.id,properties:i.properties},e);const s=new cs;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(pF(n,e)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){let i=null;if("FeatureCollection"===t.type){i=[];const n=t.features;for(let t=0,s=n.length;t<s;++t){const s=this.readFeatureFromObject(n[t],e);s&&i.push(s)}}else i=[this.readFeatureFromObject(t,e)];return i.flat()}readGeometryFromObject(t,e){return function(t,e){const i=_F(t);return pF(i,e)}(t,e)}readProjectionFromObject(t){const e=t.crs;let i;if(e)if("name"==e.type)i=_e(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");i=_e("EPSG:"+e.properties.code)}else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(i.id=n),!t.hasProperties())return i;const s=t.getProperties(),r=t.getGeometry();return r&&(i.geometry=yF(r,e),delete s[t.getGeometryName()]),Mt(s)||(i.properties=s),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,s=t.length;n<s;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return yF(t,this.adaptOptions(e))}},KML:class extends HF{constructor(t){super(),t=t||{},vI||(aI=[255,255,255,1],fI=new Qo({color:aI}),lI=[20,2],AI="pixels",cI="pixels",hI=[64,64],uI="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",mI=new Go({anchor:lI,anchorOrigin:"bottom-left",anchorXUnits:AI,anchorYUnits:cI,crossOrigin:"anonymous",rotation:0,scale:bI(hI),size:hI,src:uI}),dI="NO_IMAGE",_I=new Vo({color:aI,width:1}),gI=new Vo({color:[51,51,51,1],width:2}),yI=new Yo({font:"bold 16px Helvetica",fill:fI,stroke:gI,scale:.8}),wI=new zo({fill:fI,image:mI,text:yI,stroke:_I,zIndex:0}),vI=[wI]),this.dataProjection=_e("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:vI,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:CI,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const i=DF([],kF(ZF,{Document:EF(this.readDocumentOrFolder_,this),Folder:EF(this.readDocumentOrFolder_,this),Placemark:SF(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this);if(i)return i}readPlacemark_(t,e){const i=DF({geometry:null},tI,t,e,this);if(!i)return;const n=new cs,s=t.getAttribute("id");null!==s&&n.setId(s);const r=e[0],o=i.geometry;if(o&&uF(o,!1,r),n.setGeometry(o),delete i.geometry,this.extractStyles_){const t=function(t,e,i,n,s){return function(r,o){let a=s,l="",A=[];if(a){const t=r.getGeometry();if(t)if(t instanceof gs)A=t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})),a=A.length>0;else{const e=t.getType();a="Point"===e||"MultiPoint"===e}}a&&(l=r.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(pI||(pI=document.createElement("textarea")),pI.innerHTML=l,l=pI.value));let c=i;if(t?c=t:e&&(c=xI(e,i,n)),a){const t=function(t,e){const i=[0,0];let n="start";const s=t.getImage();if(s){const t=s.getSize();if(t&&2==t.length){const e=s.getScaleArray(),r=s.getAnchor();i[0]=e[0]*(t[0]-r[0]),i[1]=e[1]*(t[1]/2-r[1]),n="left"}}let r=t.getText();r?(r=r.clone(),r.setFont(r.getFont()||yI.getFont()),r.setScale(r.getScale()||yI.getScale()),r.setFill(r.getFill()||yI.getFill()),r.setStroke(r.getStroke()||gI)):r=yI.clone();r.setText(e),r.setOffsetX(i[0]),r.setOffsetY(i[1]),r.setTextAlign(n);const o=new zo({image:s,text:r});return o}(c[0],l);if(A.length>0){t.setGeometry(new gs(A));return[t,new zo({geometry:c[0].getGeometry(),image:null,fill:c[0].getFill(),stroke:c[0].getStroke(),text:null})].concat(c.slice(1))}return t}return c}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(t)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(t,e){const i=t.getAttribute("id");if(null!==i){const n=JI.call(this,t,e);if(n){let e,s=t.baseURI;if(s&&"about:blank"!=s||(s=window.location.href),s){e=new URL("#"+i,s).href}else e="#"+i;this.sharedStyles_[e]=n}}}readSharedStyleMap_(t,e){const i=t.getAttribute("id");if(null===i)return;const n=MI.call(this,t,e);if(!n)return;let s,r=t.baseURI;if(r&&"about:blank"!=r||(r=window.location.href),r){s=new URL("#"+i,r).href}else s="#"+i;this.sharedStyles_[s]=n}readFeatureFromNode(t,e){if(!ZF.includes(t.namespaceURI))return null;const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i||null}readFeaturesFromNode(t,e){if(!ZF.includes(t.namespaceURI))return[];let i;const n=t.localName;if("Document"==n||"Folder"==n)return i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),i||[];if("Placemark"==n){const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=this.readFeaturesFromNode(n,e);t&&ei(i,t)}return i}return[]}readName(t){if(t){if("string"==typeof t){const e=BF(t);return this.readNameFromDocument(e)}return xF(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const t=this.readNameFromNode(e);if(t)return t}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(ZF.includes(e.namespaceURI)&&"name"==e.localName)return zF(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const t=e.localName;if(ZF.includes(e.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){const t=this.readNameFromNode(e);if(t)return t}}}readNetworkLinks(t){const e=[];if("string"==typeof t){const i=BF(t);ei(e,this.readNetworkLinksFromDocument(i))}else xF(t)?ei(e,this.readNetworkLinksFromDocument(t)):ei(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&ei(e,this.readNetworkLinksFromNode(i));return e}readNetworkLinksFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(ZF.includes(i.namespaceURI)&&"NetworkLink"==i.localName){const t=DF({},eI,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!ZF.includes(i.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||ei(e,this.readNetworkLinksFromNode(i))}return e}readRegion(t){const e=[];if("string"==typeof t){const i=BF(t);ei(e,this.readRegionFromDocument(i))}else xF(t)?ei(e,this.readRegionFromDocument(t)):ei(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&ei(e,this.readRegionFromNode(i));return e}readRegionFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(ZF.includes(i.namespaceURI)&&"Region"==i.localName){const t=DF({},sI,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!ZF.includes(i.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||ei(e,this.readRegionFromNode(i))}return e}readCamera(t){const e=[];if("string"==typeof t){const i=BF(t);ei(e,this.readCameraFromDocument(i))}else xF(t)?ei(e,this.readCameraFromDocument(t)):ei(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&ei(e,this.readCameraFromNode(i));return e}readCameraFromNode(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(ZF.includes(i.namespaceURI)&&"Camera"===i.localName){const t=DF({},nI,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!ZF.includes(i.namespaceURI)||"Document"!==t&&"Folder"!==t&&"Placemark"!==t&&"kml"!==t||ei(e,this.readCameraFromNode(i))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const i=vF(ZF[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",qF[0]),i.setAttributeNS(n,"xmlns:xsi",wF),i.setAttributeNS(wF,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const s={node:i},r={};t.length>1?r.Document=t:1==t.length&&(r.Placemark=t[0]);const o=rI[i.namespaceURI],a=RF(r,o);return OF(s,oI,TF,a,[e],o,this),i}}}),JL=function(t,e){return t in ZL?new ZL[t](e):null},tM="modalExtensions.downloadLayerModal",eM=Object.freeze({onDownload:void 0,onCancel:void 0});class iM extends Xm{#re=[];constructor(t={}){super({filename:"download-layer-modal.js",title:Mm.get(`${tM}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(eM),t),this.#oe()}getName(){return super.getName()}#oe(){const t=Mm.get(`${tM}.form`),[e,i]=Rw({idPrefix:"oltb-download-layer-modal",idPostfix:"-format",text:t.layerFormat,options:Fh.cloneDeep(qL)}),n=tp.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),s=tp.createElement({element:"button",text:t.download,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#De({format:i.value.trim()})}}}),r=tp.createElement({element:"button",text:t.cancel,class:"oltb-dialog__btn oltb-btn "+(o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(n,[r,s]);const o=tp.createElement({element:"div",class:"oltb-modal__content"});tp.appendChildren(o,[e,n]),this.#re=[r,s],this.show(o)}#De(t){this.close(),this.options.onDownload&&this.options.onDownload(t)}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#re}}const nM="layer-tool.js",sM="oltb-tool-button",rM="oltb-toolbox-section",oM="oltb-toolbox-list",aM="oltb-func-btn",lM="oltb-layer",AM="tools.layerTool",cM="commons",hM=Object.freeze({disableMapCreateLayerButton:!1,disableMapLayerEditButton:!1,disableMapLayerDeleteButton:!1,disableFeatureCreateLayerButton:!1,disableFeatureLayerEditButton:!1,disableFeatureLayerDeleteButton:!1,disableFeatureLayerDownloadButton:!1,onClicked:void 0,onInitiated:void 0,onBrowserStateCleared:void 0,onMapLayerAdded:void 0,onMapLayerRemoved:void 0,onMapLayerRenamed:void 0,onMapLayerVisibilityChanged:void 0,onMapLayerDragged:void 0,onFeatureLayerAdded:void 0,onFeatureLayerRemoved:void 0,onFeatureLayerRenamed:void 0,onFeatureLayerVisibilityChanged:void 0,onFeatureLayerDownloaded:void 0,onFeatureLayerDragged:void 0}),uM=rp.layerTool,dM=Object.freeze({isActive:!1,mapLayers:[],featureLayers:[],"oltb-layer-map-toolbox-collapsed":!1,"oltb-layer-feature-toolbox-collapsed":!1});const gM="oltb-tool-button",pM="tools.zoomInTool",fM=Object.freeze({delta:1,onInitiated:void 0,onClicked:void 0,onZoomed:void 0});const mM="oltb-tool-button",_M="oltb-toolbox-section",yM="oltb-measure",wM="tools.measureTool",vM="tools.measureTool",bM="commons",CM=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onAbort:void 0,onError:void 0,onSnapped:void 0,onUnSnapped:void 0}),xM=rp.measureTool,BM=Object.freeze({isActive:!1,isCollapsed:!1,toolType:dy.LineString,strokeColor:"#3B4352FF",fillColor:"#D7E3FA80"});const EM="magnify-tool.js",SM="oltb-tool-button",FM="tools.magnifyTool",IM=Object.freeze({radius:75,min:25,max:150,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),LM=rp.magnifyTool,MM=Object.freeze({isActive:!1});const TM="oltb-tool-button",RM="tools.zoomOutTool",kM=Object.freeze({delta:-1,onInitiated:void 0,onClicked:void 0,onZoomed:void 0});const UM="oltb-tool-button",DM="tools.zoomboxTool",OM="tools.zoomboxTool",PM="out_",NM=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onDrag:void 0,onCancel:void 0,onError:void 0}),QM=rp.zoomboxTool,HM=Object.freeze({isActive:!1});const GM="oltb-tool-button",VM="oltb-toolbox-container--hidden",zM="tools.toolboxTool",KM=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onChanged:void 0}),jM=rp.toolboxTool,WM=Object.freeze({isActive:!1});const $M="oltb-tool-button",YM="tools.refreshTool",XM=Object.freeze({onInitiated:void 0,onClicked:void 0});const qM="modalExtensions.settingsModal",ZM=Object.freeze({onSave:void 0,onCancel:void 0});class JM extends Xm{#re=[];#Oe=new Map;constructor(t={}){super({filename:"settings-modal.js",title:Mm.get(`${qM}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(ZM),t),this.#oe()}getName(){return super.getName()}#oe(){const t=Mm.get(`${qM}.form`),e=window.document.createDocumentFragment();yw.getSettings().forEach(((t,i)=>{const[n,s]=cF({idPrefix:i,i18nKey:`${t.i18nBase}.${t.i18nKey}`,checked:t.state,bottomMargin:!0,listeners:{click:()=>{this.#Oe.set(i,s.checked)}}});this.#Oe.set(i,t.state),tp.appendChildren(e,[n])}));const i=tp.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),n=tp.createElement({element:"button",text:t.save,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:this.#Pe.bind(this)}}),s=tp.createElement({element:"button",text:t.cancel,class:"oltb-dialog__btn oltb-btn "+(o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(i,[s,n]);const r=tp.createElement({element:"div",class:"oltb-modal__content"});tp.appendChildren(r,[e,i]),this.#re=[s,n],this.show(r)}#Pe(){this.#Oe.forEach(((t,e)=>{yw.setSetting(e,t)})),this.#Oe.clear(),this.close(),this.options.onSave&&this.options.onSave()}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#re}}const tT="oltb-tool-button",eT="tools.settingsTool",iT=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0});const nT="oltb-tool-button",sT="oltb-toolbox-section",rT="oltb-overview",oT=`${rT}-target`,aT="tools.overviewTool",lT="commons",AT=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),cT=rp.overviewTool,hT=Object.freeze({isActive:!1,isCollapsed:!1});const uT="oltb-tool-button",dT="tools.scissorsTool",gT=Object.freeze({strokeWidth:"2.5",strokeColor:"#0166A5FF",fillColor:"#D7E3FA80",onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onStart:void 0,onEnd:void 0,onAbort:void 0,onError:void 0,onSnapped:void 0,onUnSnapped:void 0}),pT=rp.scissorsTool,fT=Object.freeze({isActive:!1});const mT="bookmark-tool.js",_T="oltb-tool-button",yT="oltb-toolbox-section",wT="oltb-toolbox-list",vT="oltb-func-btn",bT="oltb-bookmark",CT="oltb-info-window-marker",xT="tools.bookmarkTool",BT="commons",ET=Object.freeze({markerLayerVisibleOnLoad:!0,markerLabelUseEllipsisAfter:20,markerLabelUseUpperCase:!1,bookmarks:[],onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onAdded:void 0,onRemoved:void 0,onRenamed:void 0,onZoomedTo:void 0,onCleared:void 0,onDragged:void 0}),ST=rp.bookmarkTool,FT=Object.freeze({isActive:!1,isCollapsed:!1,bookmarks:[]});const IT="oltb-tool-button",LT="tools.directionTool",MT=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0,onChanged:void 0}),TT=Object.freeze({col:{class:"col",icon:zm({path:Gm.symmetryHorizontal.mixed,class:`${IT}__icon`})},row:{class:"row",icon:zm({path:Gm.symmetryVertical.mixed,class:`${IT}__icon`})}}),RT=rp.directionTool,kT=Object.freeze({direction:TT.col.class});var UT={chrome:"Google Chrome",brave:"Brave",crios:"Google Chrome",edge:"Microsoft Edge",edg:"Microsoft Edge",edgios:"Microsoft Edge",fennec:"Mozilla Firefox",jsdom:"JsDOM",mozilla:"Mozilla Firefox",fxios:"Mozilla Firefox",msie:"Microsoft Internet Explorer",opera:"Opera",opios:"Opera",opr:"Opera",opt:"Opera",rv:"Microsoft Internet Explorer",safari:"Safari",samsungbrowser:"Samsung Browser",electron:"Electron"},DT={android:"Android",androidTablet:"Android Tablet",cros:"Chrome OS",fennec:"Android Tablet",ipad:"IPad",ipod:"IPod",iphone:"IPhone",jsdom:"JsDOM",linux:"Linux",mac:"Macintosh",tablet:"Android Tablet",win:"Windows","windows phone":"Windows Phone",xbox:"Microsoft Xbox"},OT=(t,e=-1)=>{let i=new RegExp(`^-?\\d+(?:.\\d{0,${e}})?`),n=Number(t).toString().match(i);return n?n[0]:null},PT=()=>typeof window<"u"?window.navigator:null,NT=class{userAgent;constructor(t){this.userAgent=t||PT()?.userAgent||null}static get VERSION(){return"4.1.0"}parseUserAgent(t){let e={},i=t||this.userAgent||"",n=i.toLowerCase().replace(/\s\s+/g," "),s=/(edge)\/([\w.]+)/.exec(n)||/(edg)[/]([\w.]+)/.exec(n)||/(opr)[/]([\w.]+)/.exec(n)||/(opt)[/]([\w.]+)/.exec(n)||/(fxios)[/]([\w.]+)/.exec(n)||/(edgios)[/]([\w.]+)/.exec(n)||/(jsdom)[/]([\w.]+)/.exec(n)||/(samsungbrowser)[/]([\w.]+)/.exec(n)||/(electron)[/]([\w.]+)/.exec(n)||/(chrome)[/]([\w.]+)/.exec(n)||/(crios)[/]([\w.]+)/.exec(n)||/(opios)[/]([\w.]+)/.exec(n)||/(version)(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(n)||/(webkit)[/]([\w.]+).*(version)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(n)||/(applewebkit)[/]([\w.]+).*(safari)[/]([\w.]+)/.exec(n)||/(webkit)[/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||/(fennec)[/]([\w.]+)/.exec(n)||n.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],r=/(ipad)/.exec(n)||/(ipod)/.exec(n)||/(iphone)/.exec(n)||/(jsdom)/.exec(n)||/(windows phone)/.exec(n)||/(xbox)/.exec(n)||/(win)/.exec(n)||/(tablet)/.exec(n)||/(android)/.test(n)&&!1===/(mobile)/.test(n)&&["androidTablet"]||/(android)/.exec(n)||/(mac)/.exec(n)||/(linux)/.exec(n)||/(cros)/.exec(n)||[],o=s[5]||s[3]||s[1]||null,a=r[0]||null,l=s[4]||s[2]||null,A=PT();"chrome"===o&&"function"==typeof A?.brave?.isBrave&&(o="brave"),o&&(e[o]=!0),a&&(e[a]=!0);let c=!!(e.tablet||e.android||e.androidTablet),h=!!(e.ipad||e.tablet||e.androidTablet),u=!!(e.android||e.androidTablet||e.tablet||e.ipad||e.ipod||e.iphone||e["windows phone"]),d=!!(e.cros||e.mac||e.linux||e.win),g=!!(e.brave||e.chrome||e.crios||e.opr||e.safari||e.edg||e.electron),p=!(!e.msie&&!e.rv),f=!(!e.chrome&&!e.crios),m=!!(e.fxios||e.fennec||e.mozilla),_=!!e.safari,y=!!(e.opera||e.opios||e.opr||e.opt),w=!!(e.edg||e.edge||e.edgios);return{name:UT[o]??null,platform:DT[a]??null,userAgent:i,version:l,shortVersion:l?OT(parseFloat(l),2):null,isAndroid:c,isTablet:h,isMobile:u,isDesktop:d,isWebkit:g,isIE:p,isChrome:f,isFireFox:m,isSafari:_,isOpera:y,isEdge:w}}getBrowserInfo(){let t=this.parseUserAgent();return{name:t.name,platform:t.platform,userAgent:t.userAgent,version:t.version,shortVersion:t.shortVersion}}};const QT="debug-info-modal.js",HT="oltb-debug",GT="oltb-event-log",VT="modalExtensions.debugInfoModal",zT="commons",KT=Object.freeze({map:void 0});class jT extends Xm{#re=[];constructor(t={}){super({filename:QT,title:Mm.get(`${VT}.title`),pushWidth:!0,...t}),this.options=Fh.merge(Fh.cloneDeep(KT),t),this.#oe()}getName(){return super.getName()}#oe(){const t=rg.getSize(),e=iy.getSize();rg.logInformation(QT,"summary",{logManager:{size:t},styleManager:{size:e}});const i=this.#Ne();this.show(i),i.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#Qe.bind(this,t))}))}#He(){const t=Mm.get(`${VT}.form`),e=tp.createElement({element:"select",class:"oltb-select"}),i=tp.createElement({element:"option",text:t.defaultItem.title,attributes:{disabled:"disabled",selected:"selected"}});tp.appendChildren(e,[i]),[{name:t.miscGroup.title,items:[{name:t.miscGroup.items.logToBrowser,action:"log.map.to.console"},{name:t.miscGroup.items.generateUUID,action:"generate.uuid"},{name:t.miscGroup.items.clearStyleManager,action:"clear.style.manager"}]},{name:t.eventLogGroup.title,items:[{name:t.eventLogGroup.items.copyEventLog,action:"copy.event.log"},{name:t.eventLogGroup.items.clearEventLog,action:"clear.event.log"}]}].forEach((t=>{const i=tp.createElement({element:"optgroup",attributes:{label:t.name}});tp.appendChildren(e,[i]),t.items.forEach((t=>{const e=tp.createElement({element:"option",text:t.name,value:t.action});tp.appendChildren(i,[e])}))}));const n=tp.createElement({element:"button",text:t.doAction,class:"oltb-btn oltb-btn--blue-mid oltb-ml-05",attributes:{type:"button"},listeners:{click:this.#Ge.bind(this)}}),s=tp.createElement({element:"div",class:"oltb-debug__commands oltb-d-flex oltb-justify-content-between oltb-mt-15"});return tp.appendChildren(s,[e,n]),this.commandsCollection=e,s}#Ve(t,e){const i=Mm.get(`${zT}.titles`),n=tp.createElement({element:"div",class:"oltb-debug"}),s=tp.createElement({element:"div",class:"oltb-debug__header oltb-toggleable",attributes:{"data-oltb-toggleable-target":`${HT}-section-${e}`}}),r=tp.createElement({element:"h4",class:"oltb-debug__title",text:t.title}),o=tp.createElement({element:"button",html:zm({path:Gm.chevronExpand.stroked,fill:"none",stroke:"currentColor",strokeWidth:1,width:16,height:16}),title:i.toggleSection,class:"oltb-debug__toggle oltb-btn oltb-btn--blank oltb-tippy",attributes:{type:"button"}});tp.appendChildren(s,[r,o]);const a=tp.createElement({element:"div",id:`${HT}-section-${e}`,class:"oltb-debug__content",style:{display:`${t.display}`}});if(t.json){const e=this.#ze(t);tp.appendChildren(a,[e])}else{const e=this.#Ke(t);tp.appendChildren(a,[e])}return tp.appendChildren(n,[s,a]),n}#ze(t){const e=tp.createElement({element:"pre",class:`${t.class} oltb-thin-scrollbars`}),i=tp.createElement({element:"code",text:JSON.stringify(JSON.retrocycle(t.content),ny,4)});return tp.appendChildren(e,[i]),e}#Ke(t){const e=new Map,i=rg.getLogLevels();for(const[t,n]of Object.entries(i))e.set(n.name,{count:0,name:n.name,visible:n.visible,color:n.color,key:t,backgroundColor:n.backgroundColor,borderColor:n.borderColor});const n=tp.createElement({element:"div",id:GT,class:"oltb-log oltb-thin-scrollbars"});t.content.forEach(((t,i)=>{const s=e.get(t.level.name);if(e.set(t.level.name,{count:s.count+1,name:t.level.name,visible:t.level.visible,color:t.level.color,backgroundColor:t.level.backgroundColor,borderColor:t.level.borderColor}),"string"==typeof t.value){const e=this.#je(t);tp.appendChildren(n,[e])}else{const e=this.#We(t,i);tp.appendChildren(n,[e])}}));const s=tp.createElement({element:"div",class:"oltb-log__wrapper"}),r=tp.createElement({element:"div",class:"oltb-log__filter oltb-hide-scrollbars"});return tp.appendChildren(s,[r,n]),e.forEach(((t,e,i)=>{const s=tp.createElement({element:"span",class:"oltb-chip "+(t.visible?"":"oltb-chip--deactivated"),text:`${e} (${t.count})`,attributes:{"data-oltb-reset-value":`${e} (0)`},listeners:{click:()=>{this.doFilterEventLog(s,t.name,n)}},style:{"background-color":t.backgroundColor,color:t.color,border:`1px solid ${t.borderColor}`}});tp.appendChildren(r,[s])})),s}#je(t){const e=tp.createElement({element:"div",class:"oltb-log__header"}),i=tp.createElement({element:"div",class:"oltb-log__title",html:`\n                </span><span class="oltb-log__timestamp">${t.timestamp}</span> &rarr; ${t.origin} &rarr; ${t.method} &rarr; ${t.value}\n            `});tp.appendChildren(e,[i]);const n=tp.createElement({element:"div",class:"oltb-log__item "+(t.level.visible?"":"oltb-log__item--hidden"),attributes:{"data-oltb-log-name":t.level.name},style:{"background-color":t.level.backgroundColor,color:t.level.color,border:`1px solid ${t.level.borderColor}`}});return tp.appendChildren(n,[e]),n}#We(t,e){const i=Mm.get(`${zT}.titles`),n=tp.createElement({element:"div",class:"oltb-log__header oltb-log__header--toggleable oltb-toggleable",attributes:{"data-oltb-toggleable-target":`${HT}-log-item-${e}`}}),s=tp.createElement({element:"div",class:"oltb-log__title",html:`\n                </span><span class="oltb-log__timestamp">${t.timestamp}</span> &rarr; ${t.origin} &rarr; ${t.method}\n            `}),r=tp.createElement({element:"button",html:zm({path:Gm.chevronExpand.stroked,fill:"none",stroke:"currentColor",strokeWidth:1,width:16,height:16}),title:i.toggleSection,class:"oltb-log__toggle oltb-btn oltb-btn--blank oltb-tippy",attributes:{type:"button"}});tp.appendChildren(n,[s,r]);const o=tp.createElement({element:"div",id:`${HT}-log-item-${e}`,style:{display:"none"}}),a=this.#ze({content:t.value,class:"oltb-log__json"},!0);tp.appendChildren(o,[a]);const l=tp.createElement({element:"div",class:"oltb-log__item "+(t.level.visible?"":"oltb-log__item--hidden"),attributes:{"data-oltb-log-name":t.level.name},style:{"background-color":t.level.backgroundColor,color:t.level.color,border:`1px solid ${t.level.borderColor}`}});return tp.appendChildren(l,[n,o]),l}#Ne(){const t=this.#He(),e=Jg.getConfig(),i={oltb:{version:e.toolbar.version,url:"https://github.com/qulle/oltb"},ol:{version:e.openLayers.version,url:`https://openlayers.org/en/v${e.openLayers.version}/apidoc/`},defaultConfig:e},n=Mm.getLanguages(),s=[];n.forEach((t=>{const e={title:`${t.value}.json | ${t.text}`,content:t.translation,class:"oltb-debug__json",display:"none",json:!0};s.push(e)}));const r=this.options.map?.getView(),o=r?{zoom:r.getZoom(),location:Be(r.getCenter()),rotation:r.getRotation(),projection:r.getProjection(),proj4Defs:Ox.getProjections()}:{info:Mm.get(`${VT}.noMapFound`)},a={userAgent:new NT(window.navigator.userAgent).parseUserAgent(),device:{isSecureContext:window.isSecureContext,location:{protocol:window.location.protocol,domain:window.location.hostname,path:window.location.pathname,port:window.location.port},screen:{width:window.screen.width,height:window.screen.height},window:{width:window.innerWidth,height:window.innerHeight,pixelRatio:{scalar:window.devicePixelRatio,percentage:100*window.devicePixelRatio+"%"}}}},l={};Object.keys(window.localStorage).forEach((t=>{try{l[t]=JSON.parse(window.localStorage.getItem(t))||{}}catch(t){rg.logError(QT,"generateModalContent",{message:"Error parsing localstorage",error:t})}}));const A={};Object.keys(window.sessionStorage).forEach((t=>{try{A[t]=JSON.parse(window.sessionStorage.getItem(t))||{}}catch(t){rg.logError(QT,"generateModalContent",{message:"Error parsing sessionStorage",error:t})}}));const c=Object.fromEntries(window.document.cookie.split("; ").map((t=>t.split("=")))),h=rg.getLog().slice().reverse(),u=Mm.get(`${VT}.sections`),d=window.document.createDocumentFragment();[{title:u.appData,content:i,class:"oltb-debug__json",display:"none",json:!0},{title:u.mapData,content:o,class:"oltb-debug__json",display:"none",json:!0},{title:u.browserData,content:a,class:"oltb-debug__json",display:"none",json:!0},{title:u.localStorage,content:l,class:"oltb-debug__json",display:"none",json:!0},{title:u.sessionStorage,content:A,class:"oltb-debug__json",display:"none",json:!0},{title:u.cookies,content:c,class:"oltb-debug__json",display:"none",json:!0},...s,{title:u.eventLog,content:h,class:"oltb-debug__json",display:"block",json:!1}].forEach(((t,e)=>{const i=this.#Ve(t,e);tp.appendChildren(d,[i])}));const g=tp.createElement({element:"div",class:"oltb-modal__content"});return tp.appendChildren(g,[t,d]),g}#Qe(t){const e=t.dataset.oltbToggleableTarget,i=Jg.getConfig().animationDuration.fast;window.document.getElementById(e)?.slideToggle(i)}#Ge(){this.doActionByName(this.commandsCollection.value)}doActionByName(t){const e={"log.map.to.console":this.doActionLoggingMap.bind(this),"generate.uuid":this.doActionGenerateUUID.bind(this),"copy.event.log":this.doActionCopyEventLogAsync.bind(this),"clear.event.log":this.doActionClearEventLog.bind(this),"clear.style.manager":this.doActionClearStyleManager.bind(this)}[t];e?e.call():rg.logWarning(QT,"doActionByName",{info:"Missing action",name:t})}doFilterEventLog(t,e,i){t.classList.toggle("oltb-chip--deactivated");i.querySelectorAll(`[data-oltb-log-name="${e}"]`).forEach((t=>{t.classList.toggle("oltb-log__item--hidden")}));0===i.querySelectorAll(".oltb-log__item:not(.oltb-log__item--hidden)").length?i.classList.add("oltb-log--empty"):i.classList.remove("oltb-log--empty")}doActionLoggingMap(){window.console.dir(this.options.map),Nm.info({i18nKey:`${VT}.toasts.infos.logMapObject`,autoremove:!0})}doActionGenerateUUID(){const t=N_(),e=rg.logInformation(QT,"actionGenerateUUID",t),i=window.document.getElementById(GT),n=this.#je(e);tp.prependChildren(i,[n])}async doActionCopyEventLogAsync(){const t=rg.getLog().slice().reverse();try{const e=4,i=JSON.stringify(JSON.retrocycle(t),ny,e);await Xw(i),Nm.info({i18nKey:`${VT}.toasts.infos.copyEventLog`,autoremove:!0})}catch(t){rg.logError(QT,"doActionCopyEventLogAsync",{message:"Failed to copy Event Log",error:t}),Nm.error({i18nKey:`${VT}.toasts.errors.copyEventLog`})}}doActionClearEventLog(){rg.clearLog();const t=window.document.getElementById(GT);t&&tp.clearElement(t);const e="data-oltb-reset-value";window.document.querySelectorAll(`[${e}]`).forEach((t=>{t.innerHTML=t.getAttribute(e)})),Nm.info({i18nKey:`${VT}.toasts.infos.clearEventLog`,autoremove:!0})}doActionClearStyleManager(){const t=iy.getSize();iy.clearStyles();const e=iy.getSize();return rg.logInformation(QT,"doActionClearStyleManager",{info:"StyleManager cleared",beforeSize:t,afterSize:e}),Nm.info({i18nKey:`${VT}.toasts.infos.clearStyleManager`,autoremove:!0}),[t,e]}}const WT="oltb-tool-button",$T="tools.debugInfoTool",YT=Object.freeze({onlyWhenGetParameter:!1,onInitiated:void 0,onClicked:void 0});const XT="split-view-tool.js",qT="oltb-tool-button",ZT="oltb-toolbox-section",JT="oltb-slider",tR="oltb-split-view",eR="tools.splitViewTool",iR="commons",nR=Object.freeze({onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),sR=rp.splitViewTool,rR=Object.freeze({isActive:!1,isCollapsed:!1});var oR,aR={exports:{}};var lR=(oR||(oR=1,function(t){t.exports=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},i.apply(this,arguments)};function n(t,e,i,n){function s(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(e,i){function r(t){try{a(n.next(t))}catch(t){i(t)}}function o(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){t.done?e(t.value):s(t.value).then(r,o)}a((n=n.apply(t,[])).next())}))}function s(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(t){return function(e){return l([t,e])}}function l(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}}function r(t,e,i){if(2===arguments.length)for(var n,s=0,r=e.length;s<r;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||e)}for(var o=function(){function t(t,e,i,n){this.left=t,this.top=e,this.width=i,this.height=n}return t.prototype.add=function(e,i,n,s){return new t(this.left+e,this.top+i,this.width+n,this.height+s)},t.fromClientRect=function(e,i){return new t(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},t.fromDOMRectList=function(e,i){var n=Array.from(i).find((function(t){return 0!==t.width}));return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),a=function(t,e){return o.fromClientRect(t,e.getBoundingClientRect())},l=function(t){var e=t.body,i=t.documentElement;if(!e||!i)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),s=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new o(0,0,n,s)},A=function(t){for(var e=[],i=0,n=t.length;i<n;){var s=t.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&s)<<10)+(1023&r)+65536):(e.push(s),i--)}else e.push(s)}return e},c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],s=-1,r="";++s<i;){var o=t[s];o<=65535?n.push(o):(o-=65536,n.push(55296+(o>>10),o%1024+56320)),(s+1===i||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="undefined"==typeof Uint8Array?[]:new Uint8Array(256),d=0;d<h.length;d++)u[h.charCodeAt(d)]=d;for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"==typeof Uint8Array?[]:new Uint8Array(256),f=0;f<g.length;f++)p[g.charCodeAt(f)]=f;for(var m=function(t){var e,i,n,s,r,o=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),c=Array.isArray(A)?A:new Uint8Array(A);for(e=0;e<a;e+=4)i=p[t.charCodeAt(e)],n=p[t.charCodeAt(e+1)],s=p[t.charCodeAt(e+2)],r=p[t.charCodeAt(e+3)],c[l++]=i<<2|n>>4,c[l++]=(15&n)<<4|s>>2,c[l++]=(3&s)<<6|63&r;return A},_=function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i},y=function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i},w=5,v=11,b=2,C=65536>>w,x=(1<<w)-1,B=C+(1024>>w)+32,E=65536>>v,S=(1<<v-w)-1,F=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},I=function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))},L=function(t,e){var i=m(t),n=Array.isArray(i)?y(i):new Uint32Array(i),s=Array.isArray(i)?_(i):new Uint16Array(i),r=24,o=F(s,r/2,n[4]/2),a=2===n[5]?F(s,(r+n[4])/2):I(n,Math.ceil((r+n[4])/4));return new M(n[0],n[1],n[2],n[3],o,a)},M=function(){function t(t,e,i,n,s,r){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=r}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>w])<<b)+(t&x),this.data[e];if(t<=65535)return e=((e=this.index[C+(t-55296>>w)])<<b)+(t&x),this.data[e];if(t<this.highStart)return e=B-E+(t>>v),e=this.index[e],e+=t>>w&S,e=((e=this.index[e])<<b)+(t&x),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R="undefined"==typeof Uint8Array?[]:new Uint8Array(256),k=0;k<T.length;k++)R[T.charCodeAt(k)]=k;var U=50,D=1,O=2,P=3,N=4,Q=5,H=7,G=8,V=9,z=10,K=11,j=12,W=13,$=14,Y=15,X=16,q=17,Z=18,J=19,tt=20,et=21,it=22,nt=23,st=24,rt=25,ot=26,at=27,lt=28,At=29,ct=30,ht=31,ut=32,dt=33,gt=34,pt=35,ft=36,mt=37,_t=38,yt=39,wt=40,vt=41,bt=42,Ct=43,xt=[9001,65288],Bt="!",Et="×",St="÷",Ft=L("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),It=[ct,ft],Lt=[D,O,P,Q],Mt=[z,G],Tt=[at,ot],Rt=Lt.concat(Mt),kt=[_t,yt,wt,gt,pt],Ut=[Y,W],Dt=function(t,e){void 0===e&&(e="strict");var i=[],n=[],s=[];return t.forEach((function(t,r){var o=Ft.get(t);if(o>U?(s.push(!0),o-=U):s.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return n.push(r),i.push(X);if(o===N||o===K){if(0===r)return n.push(r),i.push(ct);var a=i[r-1];return-1===Rt.indexOf(a)?(n.push(n[r-1]),i.push(a)):(n.push(r),i.push(ct))}return n.push(r),o===ht?i.push("strict"===e?et:mt):o===bt||o===At?i.push(ct):o===Ct?t>=131072&&t<=196605||t>=196608&&t<=262141?i.push(mt):i.push(ct):void i.push(o)})),[n,i,s]},Ot=function(t,e,i,n){var s=n[i];if(Array.isArray(t)?-1!==t.indexOf(s):t===s)for(var r=i;r<=n.length;){if((l=n[++r])===e)return!0;if(l!==z)break}if(s===z)for(r=i;r>0;){var o=n[--r];if(Array.isArray(t)?-1!==t.indexOf(o):t===o)for(var a=i;a<=n.length;){var l;if((l=n[++a])===e)return!0;if(l!==z)break}if(o!==z)break}return!1},Pt=function(t,e){for(var i=t;i>=0;){var n=e[i];if(n!==z)return n;i--}return 0},Nt=function(t,e,i,n,s){if(0===i[n])return Et;var r=n-1;if(Array.isArray(s)&&!0===s[r])return Et;var o=r-1,a=r+1,l=e[r],A=o>=0?e[o]:0,c=e[a];if(l===O&&c===P)return Et;if(-1!==Lt.indexOf(l))return Bt;if(-1!==Lt.indexOf(c))return Et;if(-1!==Mt.indexOf(c))return Et;if(Pt(r,e)===G)return St;if(Ft.get(t[r])===K)return Et;if((l===ut||l===dt)&&Ft.get(t[a])===K)return Et;if(l===H||c===H)return Et;if(l===V)return Et;if(-1===[z,W,Y].indexOf(l)&&c===V)return Et;if(-1!==[q,Z,J,st,lt].indexOf(c))return Et;if(Pt(r,e)===it)return Et;if(Ot(nt,it,r,e))return Et;if(Ot([q,Z],et,r,e))return Et;if(Ot(j,j,r,e))return Et;if(l===z)return St;if(l===nt||c===nt)return Et;if(c===X||l===X)return St;if(-1!==[W,Y,et].indexOf(c)||l===$)return Et;if(A===ft&&-1!==Ut.indexOf(l))return Et;if(l===lt&&c===ft)return Et;if(c===tt)return Et;if(-1!==It.indexOf(c)&&l===rt||-1!==It.indexOf(l)&&c===rt)return Et;if(l===at&&-1!==[mt,ut,dt].indexOf(c)||-1!==[mt,ut,dt].indexOf(l)&&c===ot)return Et;if(-1!==It.indexOf(l)&&-1!==Tt.indexOf(c)||-1!==Tt.indexOf(l)&&-1!==It.indexOf(c))return Et;if(-1!==[at,ot].indexOf(l)&&(c===rt||-1!==[it,Y].indexOf(c)&&e[a+1]===rt)||-1!==[it,Y].indexOf(l)&&c===rt||l===rt&&-1!==[rt,lt,st].indexOf(c))return Et;if(-1!==[rt,lt,st,q,Z].indexOf(c))for(var h=r;h>=0;){if((u=e[h])===rt)return Et;if(-1===[lt,st].indexOf(u))break;h--}if(-1!==[at,ot].indexOf(c))for(h=-1!==[q,Z].indexOf(l)?o:r;h>=0;){var u;if((u=e[h])===rt)return Et;if(-1===[lt,st].indexOf(u))break;h--}if(_t===l&&-1!==[_t,yt,gt,pt].indexOf(c)||-1!==[yt,gt].indexOf(l)&&-1!==[yt,wt].indexOf(c)||-1!==[wt,pt].indexOf(l)&&c===wt)return Et;if(-1!==kt.indexOf(l)&&-1!==[tt,ot].indexOf(c)||-1!==kt.indexOf(c)&&l===at)return Et;if(-1!==It.indexOf(l)&&-1!==It.indexOf(c))return Et;if(l===st&&-1!==It.indexOf(c))return Et;if(-1!==It.concat(rt).indexOf(l)&&c===it&&-1===xt.indexOf(t[a])||-1!==It.concat(rt).indexOf(c)&&l===Z)return Et;if(l===vt&&c===vt){for(var d=i[r],g=1;d>0&&e[--d]===vt;)g++;if(g%2!=0)return Et}return l===ut&&c===dt?Et:St},Qt=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=Dt(t,e.lineBreak),n=i[0],s=i[1],r=i[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(s=s.map((function(t){return-1!==[rt,ct,bt].indexOf(t)?mt:t})));var o="keep-all"===e.wordBreak?r.map((function(e,i){return e&&t[i]>=19968&&t[i]<=40959})):void 0;return[n,s,o]},Ht=function(){function t(t,e,i,n){this.codePoints=t,this.required=e===Bt,this.start=i,this.end=n}return t.prototype.slice=function(){return c.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Gt=function(t,e){var i=A(t),n=Qt(i,e),s=n[0],r=n[1],o=n[2],a=i.length,l=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};for(var t=Et;c<a&&(t=Nt(i,r,s,++c,o))===Et;);if(t!==Et||c===a){var e=new Ht(i,t,l,c);return l=c,{value:e,done:!1}}return{done:!0,value:null}}}},Vt=1,zt=2,Kt=4,jt=8,Wt=10,$t=47,Yt=92,Xt=9,qt=32,Zt=34,Jt=61,te=35,ee=36,ie=37,ne=39,se=40,re=41,oe=95,ae=45,le=33,Ae=60,ce=62,he=64,ue=91,de=93,ge=61,pe=123,fe=63,me=125,_e=124,ye=126,we=128,ve=65533,be=42,Ce=43,xe=44,Be=58,Ee=59,Se=46,Fe=0,Ie=8,Le=11,Me=14,Te=31,Re=127,ke=-1,Ue=48,De=97,Oe=101,Pe=102,Ne=117,Qe=122,He=65,Ge=69,Ve=70,ze=85,Ke=90,je=function(t){return t>=Ue&&t<=57},We=function(t){return t>=55296&&t<=57343},$e=function(t){return je(t)||t>=He&&t<=Ve||t>=De&&t<=Pe},Ye=function(t){return t>=De&&t<=Qe},Xe=function(t){return t>=He&&t<=Ke},qe=function(t){return Ye(t)||Xe(t)},Ze=function(t){return t>=we},Je=function(t){return t===Wt||t===Xt||t===qt},ti=function(t){return qe(t)||Ze(t)||t===oe},ei=function(t){return ti(t)||je(t)||t===ae},ii=function(t){return t>=Fe&&t<=Ie||t===Le||t>=Me&&t<=Te||t===Re},ni=function(t,e){return t===Yt&&e!==Wt},si=function(t,e,i){return t===ae?ti(e)||ni(e,i):!!ti(t)||!(t!==Yt||!ni(t,e))},ri=function(t,e,i){return t===Ce||t===ae?!!je(e)||e===Se&&je(i):je(t===Se?e:t)},oi=function(t){var e=0,i=1;t[e]!==Ce&&t[e]!==ae||(t[e]===ae&&(i=-1),e++);for(var n=[];je(t[e]);)n.push(t[e++]);var s=n.length?parseInt(c.apply(void 0,n),10):0;t[e]===Se&&e++;for(var r=[];je(t[e]);)r.push(t[e++]);var o=r.length,a=o?parseInt(c.apply(void 0,r),10):0;t[e]!==Ge&&t[e]!==Oe||e++;var l=1;t[e]!==Ce&&t[e]!==ae||(t[e]===ae&&(l=-1),e++);for(var A=[];je(t[e]);)A.push(t[e++]);var h=A.length?parseInt(c.apply(void 0,A),10):0;return i*(s+a*Math.pow(10,-o))*Math.pow(10,l*h)},ai={type:2},li={type:3},Ai={type:4},ci={type:13},hi={type:8},ui={type:21},di={type:9},gi={type:10},pi={type:11},fi={type:12},mi={type:14},_i={type:23},yi={type:1},wi={type:25},vi={type:24},bi={type:26},Ci={type:27},xi={type:28},Bi={type:29},Ei={type:31},Si={type:32},Fi=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(A(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Si;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Zt:return this.consumeStringToken(Zt);case te:var e=this.peekCodePoint(0),i=this.peekCodePoint(1),n=this.peekCodePoint(2);if(ei(e)||ni(i,n)){var s=si(e,i,n)?zt:Vt;return{type:5,value:this.consumeName(),flags:s}}break;case ee:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),ci;break;case ne:return this.consumeStringToken(ne);case se:return ai;case re:return li;case be:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),mi;break;case Ce:if(ri(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case xe:return Ai;case ae:var r=t,o=this.peekCodePoint(0),a=this.peekCodePoint(1);if(ri(r,o,a))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(si(r,o,a))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(o===ae&&a===ce)return this.consumeCodePoint(),this.consumeCodePoint(),vi;break;case Se:if(ri(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case $t:if(this.peekCodePoint(0)===be)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===be&&(l=this.consumeCodePoint())===$t)return this.consumeToken();if(l===ke)return this.consumeToken()}break;case Be:return bi;case Ee:return Ci;case Ae:if(this.peekCodePoint(0)===le&&this.peekCodePoint(1)===ae&&this.peekCodePoint(2)===ae)return this.consumeCodePoint(),this.consumeCodePoint(),wi;break;case he:var A=this.peekCodePoint(0),h=this.peekCodePoint(1),u=this.peekCodePoint(2);if(si(A,h,u))return{type:7,value:this.consumeName()};break;case ue:return xi;case Yt:if(ni(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case de:return Bi;case ge:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),hi;break;case pe:return pi;case me:return fi;case Ne:case ze:var d=this.peekCodePoint(0),g=this.peekCodePoint(1);return d!==Ce||!$e(g)&&g!==fe||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case _e:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),di;if(this.peekCodePoint(0)===_e)return this.consumeCodePoint(),ui;break;case ye:if(this.peekCodePoint(0)===Jt)return this.consumeCodePoint(),gi;break;case ke:return Si}return Je(t)?(this.consumeWhiteSpace(),Ei):je(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):ti(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:c(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();$e(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var i=!1;e===fe&&t.length<6;)t.push(e),e=this.consumeCodePoint(),i=!0;if(i)return{type:30,start:parseInt(c.apply(void 0,t.map((function(t){return t===fe?Ue:t}))),16),end:parseInt(c.apply(void 0,t.map((function(t){return t===fe?Ve:t}))),16)};var n=parseInt(c.apply(void 0,t),16);if(this.peekCodePoint(0)===ae&&$e(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var s=[];$e(e)&&s.length<6;)s.push(e),e=this.consumeCodePoint();return{type:30,start:n,end:parseInt(c.apply(void 0,s),16)}}return{type:30,start:n,end:n}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&this.peekCodePoint(0)===se?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===se?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ke)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===ne||e===Zt){var i=this.consumeStringToken(this.consumeCodePoint());return 0===i.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ke||this.peekCodePoint(0)===re)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),_i)}for(;;){var n=this.consumeCodePoint();if(n===ke||n===re)return{type:22,value:c.apply(void 0,t)};if(Je(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ke||this.peekCodePoint(0)===re?(this.consumeCodePoint(),{type:22,value:c.apply(void 0,t)}):(this.consumeBadUrlRemnants(),_i);if(n===Zt||n===ne||n===se||ii(n))return this.consumeBadUrlRemnants(),_i;if(n===Yt){if(!ni(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),_i;t.push(this.consumeEscapedCodePoint())}else t.push(n)}},t.prototype.consumeWhiteSpace=function(){for(;Je(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===re||t===ke)return;ni(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e=5e4,i="";t>0;){var n=Math.min(e,t);i+=c.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),i},t.prototype.consumeStringToken=function(t){for(var e="",i=0;;){var n=this._value[i];if(n===ke||void 0===n||n===t)return{type:0,value:e+=this.consumeStringSlice(i)};if(n===Wt)return this._value.splice(0,i),yi;if(n===Yt){var s=this._value[i+1];s!==ke&&void 0!==s&&(s===Wt?(e+=this.consumeStringSlice(i),i=-1,this._value.shift()):ni(n,s)&&(e+=this.consumeStringSlice(i),e+=c(this.consumeEscapedCodePoint()),i=-1))}i++}},t.prototype.consumeNumber=function(){var t=[],e=Kt,i=this.peekCodePoint(0);for(i!==Ce&&i!==ae||t.push(this.consumeCodePoint());je(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(i===Se&&je(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=jt;je(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),n=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((i===Ge||i===Oe)&&((n===Ce||n===ae)&&je(s)||je(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=jt;je(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[oi(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],i=t[1],n=this.peekCodePoint(0),s=this.peekCodePoint(1),r=this.peekCodePoint(2);return si(n,s,r)?{type:15,number:e,flags:i,unit:this.consumeName()}:n===ie?(this.consumeCodePoint(),{type:16,number:e,flags:i}):{type:17,number:e,flags:i}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if($e(t)){for(var e=c(t);$e(this.peekCodePoint(0))&&e.length<6;)e+=c(this.consumeCodePoint());Je(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(e,16);return 0===i||We(i)||i>1114111?ve:i}return t===ke?ve:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(ei(e))t+=c(e);else{if(!ni(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=c(this.consumeEscapedCodePoint())}}},t}(),Ii=function(){function t(t){this._tokens=t}return t.create=function(e){var i=new Fi;return i.write(e),new t(i.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();31===t.type;)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},i=this.consumeToken();;){if(32===i.type||Pi(i,t))return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue()),i=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(32===i.type||3===i.type)return e;this.reconsumeToken(i),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?Si:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),Li=function(t){return 15===t.type},Mi=function(t){return 17===t.type},Ti=function(t){return 20===t.type},Ri=function(t){return 0===t.type},ki=function(t,e){return Ti(t)&&t.value===e},Ui=function(t){return 31!==t.type},Di=function(t){return 31!==t.type&&4!==t.type},Oi=function(t){var e=[],i=[];return t.forEach((function(t){if(4===t.type){if(0===i.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(i),void(i=[])}31!==t.type&&i.push(t)})),i.length&&e.push(i),e},Pi=function(t,e){return 11===e&&12===t.type||28===e&&29===t.type||2===e&&3===t.type},Ni=function(t){return 17===t.type||15===t.type},Qi=function(t){return 16===t.type||Ni(t)},Hi=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},Gi={type:17,number:0,flags:Kt},Vi={type:16,number:50,flags:Kt},zi={type:16,number:100,flags:Kt},Ki=function(t,e,i){var n=t[0],s=t[1];return[ji(n,e),ji(void 0!==s?s:n,i)]},ji=function(t,e){if(16===t.type)return t.number/100*e;if(Li(t))switch(t.unit){case"rem":case"em":return 16*t.number;default:return t.number}return t.number},Wi="deg",$i="grad",Yi="rad",Xi="turn",qi={name:"angle",parse:function(t,e){if(15===e.type)switch(e.unit){case Wi:return Math.PI*e.number/180;case $i:return Math.PI/200*e.number;case Yi:return e.number;case Xi:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")}},Zi=function(t){return 15===t.type&&(t.unit===Wi||t.unit===$i||t.unit===Yi||t.unit===Xi)},Ji=function(t){switch(t.filter(Ti).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Gi,Gi];case"to top":case"bottom":return tn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Gi,zi];case"to right":case"left":return tn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[zi,zi];case"to bottom":case"top":return tn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[zi,Gi];case"to left":case"right":return tn(270)}return 0},tn=function(t){return Math.PI*t/180},en={name:"color",parse:function(t,e){if(18===e.type){var i=cn[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(t,e.values)}if(5===e.type){if(3===e.value.length){var n=e.value.substring(0,1),s=e.value.substring(1,2),r=e.value.substring(2,3);return rn(parseInt(n+n,16),parseInt(s+s,16),parseInt(r+r,16),1)}if(4===e.value.length){n=e.value.substring(0,1),s=e.value.substring(1,2),r=e.value.substring(2,3);var o=e.value.substring(3,4);return rn(parseInt(n+n,16),parseInt(s+s,16),parseInt(r+r,16),parseInt(o+o,16)/255)}if(6===e.value.length)return n=e.value.substring(0,2),s=e.value.substring(2,4),r=e.value.substring(4,6),rn(parseInt(n,16),parseInt(s,16),parseInt(r,16),1);if(8===e.value.length)return n=e.value.substring(0,2),s=e.value.substring(2,4),r=e.value.substring(4,6),o=e.value.substring(6,8),rn(parseInt(n,16),parseInt(s,16),parseInt(r,16),parseInt(o,16)/255)}if(20===e.type){var a=un[e.value.toUpperCase()];if(void 0!==a)return a}return un.TRANSPARENT}},nn=function(t){return!(255&t)},sn=function(t){var e=255&t,i=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+i+","+e/255+")":"rgb("+s+","+n+","+i+")"},rn=function(t,e,i,n){return(t<<24|e<<16|i<<8|Math.round(255*n))>>>0},on=function(t,e){if(17===t.type)return t.number;if(16===t.type){var i=3===e?1:255;return 3===e?t.number/100*i:Math.round(t.number/100*i)}return 0},an=function(t,e){var i=e.filter(Di);if(3===i.length){var n=i.map(on),s=n[0],r=n[1],o=n[2];return rn(s,r,o,1)}if(4===i.length){var a=i.map(on),l=(s=a[0],r=a[1],o=a[2],a[3]);return rn(s,r,o,l)}return 0};function ln(t,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-t)*i*6+t:i<.5?e:i<2/3?6*(e-t)*(2/3-i)+t:t}var An=function(t,e){var i=e.filter(Di),n=i[0],s=i[1],r=i[2],o=i[3],a=(17===n.type?tn(n.number):qi.parse(t,n))/(2*Math.PI),l=Qi(s)?s.number/100:0,A=Qi(r)?r.number/100:0,c=void 0!==o&&Qi(o)?ji(o,1):1;if(0===l)return rn(255*A,255*A,255*A,1);var h=A<=.5?A*(l+1):A+l-A*l,u=2*A-h,d=ln(u,h,a+1/3),g=ln(u,h,a),p=ln(u,h,a-1/3);return rn(255*d,255*g,255*p,c)},cn={hsl:An,hsla:An,rgb:an,rgba:an},hn=function(t,e){return en.parse(t,Ii.create(e).parseComponentValue())},un={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},dn={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Ti(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},gn={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},pn=function(t,e){var i=en.parse(t,e[0]),n=e[1];return n&&Qi(n)?{color:i,stop:n}:{color:i,stop:null}},fn=function(t,e){var i=t[0],n=t[t.length-1];null===i.stop&&(i.stop=Gi),null===n.stop&&(n.stop=zi);for(var s=[],r=0,o=0;o<t.length;o++){var a=t[o].stop;if(null!==a){var l=ji(a,e);l>r?s.push(l):s.push(r),r=l}else s.push(null)}var A=null;for(o=0;o<s.length;o++){var c=s[o];if(null===c)null===A&&(A=o);else if(null!==A){for(var h=o-A,u=(c-s[A-1])/(h+1),d=1;d<=h;d++)s[A+d-1]=u*d;A=null}}return t.map((function(t,i){return{color:t.color,stop:Math.max(Math.min(1,s[i]/e),0)}}))},mn=function(t,e,i){var n=e/2,s=i/2,r=ji(t[0],e)-n,o=s-ji(t[1],i);return(Math.atan2(o,r)+2*Math.PI)%(2*Math.PI)},_n=function(t,e,i){var n="number"==typeof t?t:mn(t,e,i),s=Math.abs(e*Math.sin(n))+Math.abs(i*Math.cos(n)),r=e/2,o=i/2,a=s/2,l=Math.sin(n-Math.PI/2)*a,A=Math.cos(n-Math.PI/2)*a;return[s,r-A,r+A,o-l,o+l]},yn=function(t,e){return Math.sqrt(t*t+e*e)},wn=function(t,e,i,n,s){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var r=e[0],o=e[1],a=yn(i-r,n-o);return(s?a<t.optimumDistance:a>t.optimumDistance)?{optimumCorner:e,optimumDistance:a}:t}),{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},vn=function(t,e,i,n,s){var r=0,o=0;switch(t.size){case 0:0===t.shape?r=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-s)):1===t.shape&&(r=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(i),Math.abs(i-s)));break;case 2:if(0===t.shape)r=o=Math.min(yn(e,i),yn(e,i-s),yn(e-n,i),yn(e-n,i-s));else if(1===t.shape){var a=Math.min(Math.abs(i),Math.abs(i-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=wn(n,s,e,i,!0),A=l[0],c=l[1];o=a*(r=yn(A-e,(c-i)/a))}break;case 1:0===t.shape?r=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(i),Math.abs(i-s)):1===t.shape&&(r=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(i),Math.abs(i-s)));break;case 3:if(0===t.shape)r=o=Math.max(yn(e,i),yn(e,i-s),yn(e-n,i),yn(e-n,i-s));else if(1===t.shape){a=Math.max(Math.abs(i),Math.abs(i-s))/Math.max(Math.abs(e),Math.abs(e-n));var h=wn(n,s,e,i,!1);A=h[0],c=h[1],o=a*(r=yn(A-e,(c-i)/a))}}return Array.isArray(t.size)&&(r=ji(t.size[0],n),o=2===t.size.length?ji(t.size[1],s):r),[r,o]},bn=function(t,e){var i=tn(180),n=[];return Oi(e).forEach((function(e,s){if(0===s){var r=e[0];if(20===r.type&&-1!==["top","left","right","bottom"].indexOf(r.value))return void(i=Ji(e));if(Zi(r))return void(i=(qi.parse(t,r)+tn(270))%tn(360))}var o=pn(t,e);n.push(o)})),{angle:i,stops:n,type:1}},Cn="closest-side",xn="farthest-side",Bn="closest-corner",En="farthest-corner",Sn="circle",Fn="ellipse",In="cover",Ln="contain",Mn=function(t,e){var i=0,n=3,s=[],r=[];return Oi(e).forEach((function(e,o){var a=!0;if(0===o){var l=!1;a=e.reduce((function(t,e){if(l)if(Ti(e))switch(e.value){case"center":return r.push(Vi),t;case"top":case"left":return r.push(Gi),t;case"right":case"bottom":return r.push(zi),t}else(Qi(e)||Ni(e))&&r.push(e);else if(Ti(e))switch(e.value){case Sn:return i=0,!1;case Fn:return i=1,!1;case"at":return l=!0,!1;case Cn:return n=0,!1;case In:case xn:return n=1,!1;case Ln:case Bn:return n=2,!1;case En:return n=3,!1}else if(Ni(e)||Qi(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return t}),a)}if(a){var A=pn(t,e);s.push(A)}})),{size:n,shape:i,stops:s,position:r,type:2}},Tn=function(t,e){var i=0,n=3,s=[],r=[];return Oi(e).forEach((function(e,o){var a=!0;if(0===o?a=e.reduce((function(t,e){if(Ti(e))switch(e.value){case"center":return r.push(Vi),!1;case"top":case"left":return r.push(Gi),!1;case"right":case"bottom":return r.push(zi),!1}else if(Qi(e)||Ni(e))return r.push(e),!1;return t}),a):1===o&&(a=e.reduce((function(t,e){if(Ti(e))switch(e.value){case Sn:return i=0,!1;case Fn:return i=1,!1;case Ln:case Cn:return n=0,!1;case xn:return n=1,!1;case Bn:return n=2,!1;case In:case En:return n=3,!1}else if(Ni(e)||Qi(e))return Array.isArray(n)||(n=[]),n.push(e),!1;return t}),a)),a){var l=pn(t,e);s.push(l)}})),{size:n,shape:i,stops:s,position:r,type:2}},Rn=function(t){return 1===t.type},kn=function(t){return 2===t.type},Un={name:"image",parse:function(t,e){if(22===e.type){var i={url:e.value,type:0};return t.cache.addImage(e.value),i}if(18===e.type){var n=Pn[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Dn(t){return!(20===t.type&&"none"===t.value||18===t.type&&!Pn[t.name])}var On,Pn={"linear-gradient":function(t,e){var i=tn(180),n=[];return Oi(e).forEach((function(e,s){if(0===s){var r=e[0];if(20===r.type&&"to"===r.value)return void(i=Ji(e));if(Zi(r))return void(i=qi.parse(t,r))}var o=pn(t,e);n.push(o)})),{angle:i,stops:n,type:1}},"-moz-linear-gradient":bn,"-ms-linear-gradient":bn,"-o-linear-gradient":bn,"-webkit-linear-gradient":bn,"radial-gradient":Mn,"-moz-radial-gradient":Tn,"-ms-radial-gradient":Tn,"-o-radial-gradient":Tn,"-webkit-radial-gradient":Tn,"-webkit-gradient":function(t,e){var i=tn(180),n=[],s=1,r=0,o=3,a=[];return Oi(e).forEach((function(e,i){var r=e[0];if(0===i){if(Ti(r)&&"linear"===r.value)return void(s=1);if(Ti(r)&&"radial"===r.value)return void(s=2)}if(18===r.type)if("from"===r.name){var o=en.parse(t,r.values[0]);n.push({stop:Gi,color:o})}else if("to"===r.name)o=en.parse(t,r.values[0]),n.push({stop:zi,color:o});else if("color-stop"===r.name){var a=r.values.filter(Di);if(2===a.length){o=en.parse(t,a[1]);var l=a[0];Mi(l)&&n.push({stop:{type:16,number:100*l.number,flags:l.flags},color:o})}}})),1===s?{angle:(i+tn(180))%tn(360),stops:n,type:s}:{size:o,shape:r,stops:n,position:a,type:s}}},Nn={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var i=e[0];return 20===i.type&&"none"===i.value?[]:e.filter((function(t){return Di(t)&&Dn(t)})).map((function(e){return Un.parse(t,e)}))}},Qn={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(Ti(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Hn={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Oi(e).map((function(t){return t.filter(Qi)})).map(Hi)}},Gn={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Oi(e).map((function(t){return t.filter(Ti).map((function(t){return t.value})).join(" ")})).map(Vn)}},Vn=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(On||(On={}));var zn,Kn={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Oi(e).map((function(t){return t.filter(jn)}))}},jn=function(t){return Ti(t)||Qi(t)},Wn=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},$n=Wn("top"),Yn=Wn("right"),Xn=Wn("bottom"),qn=Wn("left"),Zn=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return Hi(e.filter(Qi))}}},Jn=Zn("top-left"),ts=Zn("top-right"),es=Zn("bottom-right"),is=Zn("bottom-left"),ns=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ss=ns("top"),rs=ns("right"),os=ns("bottom"),as=ns("left"),ls=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Li(e)?e.number:0}}},As=ls("top"),cs=ls("right"),hs=ls("bottom"),us=ls("left"),ds={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gs={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){return"rtl"===e?1:0}},ps={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(Ti).reduce((function(t,e){return t|fs(e.value)}),0)}},fs=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ms={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_s={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(zn||(zn={}));var ys,ws={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"strict"===e?zn.STRICT:zn.NORMAL}},vs={name:"line-height",initialValue:"normal",prefix:!1,type:4},bs=function(t,e){return Ti(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:Qi(t)?ji(t,e):e},Cs={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:Un.parse(t,e)}},xs={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){return"inside"===e?0:1}},Bs={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Es=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Ss=Es("top"),Fs=Es("right"),Is=Es("bottom"),Ls=Es("left"),Ms={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(Ti).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Ts={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){return"break-word"===e?"break-word":"normal"}},Rs=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ks=Rs("top"),Us=Rs("right"),Ds=Rs("bottom"),Os=Rs("left"),Ps={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Ns={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Qs={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&ki(e[0],"none")?[]:Oi(e).map((function(e){for(var i={color:un.TRANSPARENT,offsetX:Gi,offsetY:Gi,blur:Gi},n=0,s=0;s<e.length;s++){var r=e[s];Ni(r)?(0===n?i.offsetX=r:1===n?i.offsetY=r:i.blur=r,n++):i.color=en.parse(t,r)}return i}))}},Hs={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Gs={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var i=Ks[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},Vs=function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},zs=function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),i=e[0],n=e[1];e[2],e[3];var s=e[4],r=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],16===e.length?[i,n,s,r,o,a]:null},Ks={matrix:Vs,matrix3d:zs},js={type:16,number:50,flags:Kt},Ws=[js,js],$s={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var i=e.filter(Qi);return 2!==i.length?Ws:[i[0],i[1]]}},Ys={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(ys||(ys={}));for(var Xs={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ys.BREAK_ALL;case"keep-all":return ys.KEEP_ALL;default:return ys.NORMAL}}},qs={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(Mi(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Zs={name:"time",parse:function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Js={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return Mi(e)?e.number:1}},tr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},er={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(Ti).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},ir={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var i=[],n=[];return e.forEach((function(t){switch(t.type){case 20:case 0:i.push(t.value);break;case 17:i.push(t.number.toString());break;case 4:n.push(i.join(" ")),i.length=0}})),i.length&&n.push(i.join(" ")),n.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},nr={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},sr={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){return Mi(e)?e.number:Ti(e)&&"bold"===e.value?700:400}},rr={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(Ti).map((function(t){return t.value}))}},or={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ar=function(t,e){return!!(t&e)},lr={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var i=e[0];return 20===i.type&&"none"===i.value?[]:e}},Ar={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;for(var n=[],s=e.filter(Ui),r=0;r<s.length;r++){var o=s[r],a=s[r+1];if(20===o.type){var l=a&&Mi(a)?a.number:1;n.push({counter:o.value,increment:l})}}return n}},cr={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var i=[],n=e.filter(Ui),s=0;s<n.length;s++){var r=n[s],o=n[s+1];if(Ti(r)&&"none"!==r.value){var a=o&&Mi(o)?o.number:0;i.push({counter:r.value,reset:a})}}return i}},hr={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(Li).map((function(e){return Zs.parse(t,e)}))}},ur={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var i=e[0];if(20===i.type&&"none"===i.value)return null;var n=[],s=e.filter(Ri);if(s.length%2!=0)return null;for(var r=0;r<s.length;r+=2){var o=s[r].value,a=s[r+1].value;n.push({open:o,close:a})}return n}},dr=function(t,e,i){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?i?n.open:n.close:""},gr={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&ki(e[0],"none")?[]:Oi(e).map((function(e){for(var i={color:255,offsetX:Gi,offsetY:Gi,blur:Gi,spread:Gi,inset:!1},n=0,s=0;s<e.length;s++){var r=e[s];ki(r,"inset")?i.inset=!0:Ni(r)?(0===n?i.offsetX=r:1===n?i.offsetY=r:2===n?i.blur=r:i.spread=r,n++):i.color=en.parse(t,r)}return i}))}},pr={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var i=[0,1,2],n=[];return e.filter(Ti).forEach((function(t){switch(t.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}})),i.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n}},fr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},mr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return Li(e)?e.number:0}},_r=function(){function t(t,e){var i,n;this.animationDuration=vr(t,hr,e.animationDuration),this.backgroundClip=vr(t,dn,e.backgroundClip),this.backgroundColor=vr(t,gn,e.backgroundColor),this.backgroundImage=vr(t,Nn,e.backgroundImage),this.backgroundOrigin=vr(t,Qn,e.backgroundOrigin),this.backgroundPosition=vr(t,Hn,e.backgroundPosition),this.backgroundRepeat=vr(t,Gn,e.backgroundRepeat),this.backgroundSize=vr(t,Kn,e.backgroundSize),this.borderTopColor=vr(t,$n,e.borderTopColor),this.borderRightColor=vr(t,Yn,e.borderRightColor),this.borderBottomColor=vr(t,Xn,e.borderBottomColor),this.borderLeftColor=vr(t,qn,e.borderLeftColor),this.borderTopLeftRadius=vr(t,Jn,e.borderTopLeftRadius),this.borderTopRightRadius=vr(t,ts,e.borderTopRightRadius),this.borderBottomRightRadius=vr(t,es,e.borderBottomRightRadius),this.borderBottomLeftRadius=vr(t,is,e.borderBottomLeftRadius),this.borderTopStyle=vr(t,ss,e.borderTopStyle),this.borderRightStyle=vr(t,rs,e.borderRightStyle),this.borderBottomStyle=vr(t,os,e.borderBottomStyle),this.borderLeftStyle=vr(t,as,e.borderLeftStyle),this.borderTopWidth=vr(t,As,e.borderTopWidth),this.borderRightWidth=vr(t,cs,e.borderRightWidth),this.borderBottomWidth=vr(t,hs,e.borderBottomWidth),this.borderLeftWidth=vr(t,us,e.borderLeftWidth),this.boxShadow=vr(t,gr,e.boxShadow),this.color=vr(t,ds,e.color),this.direction=vr(t,gs,e.direction),this.display=vr(t,ps,e.display),this.float=vr(t,ms,e.cssFloat),this.fontFamily=vr(t,ir,e.fontFamily),this.fontSize=vr(t,nr,e.fontSize),this.fontStyle=vr(t,or,e.fontStyle),this.fontVariant=vr(t,rr,e.fontVariant),this.fontWeight=vr(t,sr,e.fontWeight),this.letterSpacing=vr(t,_s,e.letterSpacing),this.lineBreak=vr(t,ws,e.lineBreak),this.lineHeight=vr(t,vs,e.lineHeight),this.listStyleImage=vr(t,Cs,e.listStyleImage),this.listStylePosition=vr(t,xs,e.listStylePosition),this.listStyleType=vr(t,Bs,e.listStyleType),this.marginTop=vr(t,Ss,e.marginTop),this.marginRight=vr(t,Fs,e.marginRight),this.marginBottom=vr(t,Is,e.marginBottom),this.marginLeft=vr(t,Ls,e.marginLeft),this.opacity=vr(t,Js,e.opacity);var s=vr(t,Ms,e.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=vr(t,Ts,e.overflowWrap),this.paddingTop=vr(t,ks,e.paddingTop),this.paddingRight=vr(t,Us,e.paddingRight),this.paddingBottom=vr(t,Ds,e.paddingBottom),this.paddingLeft=vr(t,Os,e.paddingLeft),this.paintOrder=vr(t,pr,e.paintOrder),this.position=vr(t,Ns,e.position),this.textAlign=vr(t,Ps,e.textAlign),this.textDecorationColor=vr(t,tr,null!==(i=e.textDecorationColor)&&void 0!==i?i:e.color),this.textDecorationLine=vr(t,er,null!==(n=e.textDecorationLine)&&void 0!==n?n:e.textDecoration),this.textShadow=vr(t,Qs,e.textShadow),this.textTransform=vr(t,Hs,e.textTransform),this.transform=vr(t,Gs,e.transform),this.transformOrigin=vr(t,$s,e.transformOrigin),this.visibility=vr(t,Ys,e.visibility),this.webkitTextStrokeColor=vr(t,fr,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=vr(t,mr,e.webkitTextStrokeWidth),this.wordBreak=vr(t,Xs,e.wordBreak),this.zIndex=vr(t,qs,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return nn(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return ar(this.display,4)||ar(this.display,33554432)||ar(this.display,268435456)||ar(this.display,536870912)||ar(this.display,67108864)||ar(this.display,134217728)},t}(),yr=function(){function t(t,e){this.content=vr(t,lr,e.content),this.quotes=vr(t,ur,e.quotes)}return t}(),wr=function(){function t(t,e){this.counterIncrement=vr(t,Ar,e.counterIncrement),this.counterReset=vr(t,cr,e.counterReset)}return t}(),vr=function(t,e,i){var n=new Fi,s=null!=i?i.toString():e.initialValue;n.write(s);var r=new Ii(n.read());switch(e.type){case 2:var o=r.parseComponentValue();return e.parse(t,Ti(o)?o.value:e.initialValue);case 0:return e.parse(t,r.parseComponentValue());case 1:return e.parse(t,r.parseComponentValues());case 4:return r.parseComponentValue();case 3:switch(e.format){case"angle":return qi.parse(t,r.parseComponentValue());case"color":return en.parse(t,r.parseComponentValue());case"image":return Un.parse(t,r.parseComponentValue());case"length":var a=r.parseComponentValue();return Ni(a)?a:Gi;case"length-percentage":var l=r.parseComponentValue();return Qi(l)?l:Gi;case"time":return Zs.parse(t,r.parseComponentValue())}}},br="data-html2canvas-debug",Cr=function(t){switch(t.getAttribute(br)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},xr=function(t,e){var i=Cr(t);return 1===i||e===i},Br=function(){function t(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,xr(e,3),this.styles=new _r(t,window.getComputedStyle(e,null)),da(e)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=a(this.context,e),xr(e,4)&&(this.flags|=16)}return t}(),Er="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Ir=0;Ir<Sr.length;Ir++)Fr[Sr.charCodeAt(Ir)]=Ir;for(var Lr=function(t){var e,i,n,s,r,o=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),c=Array.isArray(A)?A:new Uint8Array(A);for(e=0;e<a;e+=4)i=Fr[t.charCodeAt(e)],n=Fr[t.charCodeAt(e+1)],s=Fr[t.charCodeAt(e+2)],r=Fr[t.charCodeAt(e+3)],c[l++]=i<<2|n>>4,c[l++]=(15&n)<<4|s>>2,c[l++]=(3&s)<<6|63&r;return A},Mr=function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i.push(t[n+1]<<8|t[n]);return i},Tr=function(t){for(var e=t.length,i=[],n=0;n<e;n+=4)i.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return i},Rr=5,kr=11,Ur=2,Dr=65536>>Rr,Or=(1<<Rr)-1,Pr=Dr+(1024>>Rr)+32,Nr=65536>>kr,Qr=(1<<kr-Rr)-1,Hr=function(t,e,i){return t.slice?t.slice(e,i):new Uint16Array(Array.prototype.slice.call(t,e,i))},Gr=function(t,e,i){return t.slice?t.slice(e,i):new Uint32Array(Array.prototype.slice.call(t,e,i))},Vr=function(t,e){var i=Lr(t),n=Array.isArray(i)?Tr(i):new Uint32Array(i),s=Array.isArray(i)?Mr(i):new Uint16Array(i),r=24,o=Hr(s,r/2,n[4]/2),a=2===n[5]?Hr(s,(r+n[4])/2):Gr(n,Math.ceil((r+n[4])/4));return new zr(n[0],n[1],n[2],n[3],o,a)},zr=function(){function t(t,e,i,n,s,r){this.initialValue=t,this.errorValue=e,this.highStart=i,this.highValueIndex=n,this.index=s,this.data=r}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=((e=this.index[t>>Rr])<<Ur)+(t&Or),this.data[e];if(t<=65535)return e=((e=this.index[Dr+(t-55296>>Rr)])<<Ur)+(t&Or),this.data[e];if(t<this.highStart)return e=Pr-Nr+(t>>kr),e=this.index[e],e+=t>>Rr&Qr,e=((e=this.index[e])<<Ur)+(t&Or),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Wr=0;Wr<Kr.length;Wr++)jr[Kr.charCodeAt(Wr)]=Wr;var $r,Yr=1,Xr=2,qr=3,Zr=4,Jr=5,to=7,eo=8,io=9,no=10,so=11,ro=12,oo=13,ao=14,lo=15,Ao=function(t){for(var e=[],i=0,n=t.length;i<n;){var s=t.charCodeAt(i++);if(s>=55296&&s<=56319&&i<n){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&s)<<10)+(1023&r)+65536):(e.push(s),i--)}else e.push(s)}return e},co=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var i=t.length;if(!i)return"";for(var n=[],s=-1,r="";++s<i;){var o=t[s];o<=65535?n.push(o):(o-=65536,n.push(55296+(o>>10),o%1024+56320)),(s+1===i||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},ho=Vr(Er),uo="×",go="÷",po=function(t){return ho.get(t)},fo=function(t,e,i){var n=i-2,s=e[n],r=e[i-1],o=e[i];if(r===Xr&&o===qr)return uo;if(r===Xr||r===qr||r===Zr)return go;if(o===Xr||o===qr||o===Zr)return go;if(r===eo&&-1!==[eo,io,so,ro].indexOf(o))return uo;if(!(r!==so&&r!==io||o!==io&&o!==no))return uo;if((r===ro||r===no)&&o===no)return uo;if(o===oo||o===Jr)return uo;if(o===to)return uo;if(r===Yr)return uo;if(r===oo&&o===ao){for(;s===Jr;)s=e[--n];if(s===ao)return uo}if(r===lo&&o===lo){for(var a=0;s===lo;)a++,s=e[--n];if(a%2==0)return uo}return go},mo=function(t){var e=Ao(t),i=e.length,n=0,s=0,r=e.map(po);return{next:function(){if(n>=i)return{done:!0,value:null};for(var t=uo;n<i&&(t=fo(e,r,++n))===uo;);if(t!==uo||n===i){var o=co.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},_o=function(t){for(var e,i=mo(t),n=[];!(e=i.next()).done;)e.value&&n.push(e.value.slice());return n},yo=function(t){var e=123;if(t.createRange){var i=t.createRange();if(i.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),i.selectNode(n);var s=i.getBoundingClientRect(),r=Math.round(s.height);if(t.body.removeChild(n),r===e)return!0}}return!1},wo=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var i=t.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=e.firstChild,s=A(n.data).map((function(t){return c(t)})),r=0,o={},a=s.every((function(t,e){i.setStart(n,r),i.setEnd(n,r+t.length);var s=i.getBoundingClientRect();r+=t.length;var a=s.x>o.x||s.y>o.y;return o=s,0===e||a}));return t.body.removeChild(e),a},vo=function(){return void 0!==(new Image).crossOrigin},bo=function(){return"string"==typeof(new XMLHttpRequest).responseType},Co=function(t){var e=new Image,i=t.createElement("canvas"),n=i.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),i.toDataURL()}catch(t){return!1}return!0},xo=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Bo=function(t){var e=t.createElement("canvas"),i=100;e.width=i,e.height=i;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,i,i);var s=new Image,r=e.toDataURL();s.src=r;var o=Eo(i,i,0,0,s);return n.fillStyle="red",n.fillRect(0,0,i,i),So(o).then((function(e){n.drawImage(e,0,0);var s=n.getImageData(0,0,i,i).data;n.fillStyle="red",n.fillRect(0,0,i,i);var o=t.createElement("div");return o.style.backgroundImage="url("+r+")",o.style.height=i+"px",xo(s)?So(Eo(i,i,0,0,o)):Promise.reject(!1)})).then((function(t){return n.drawImage(t,0,0),xo(n.getImageData(0,0,i,i).data)})).catch((function(){return!1}))},Eo=function(t,e,i,n,s){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",i.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(s),o},So=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},Fo={get SUPPORT_RANGE_BOUNDS(){var t=yo(document);return Object.defineProperty(Fo,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=Fo.SUPPORT_RANGE_BOUNDS&&wo(document);return Object.defineProperty(Fo,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Co(document);return Object.defineProperty(Fo,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?Bo(document):Promise.resolve(!1);return Object.defineProperty(Fo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=vo();return Object.defineProperty(Fo,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=bo();return Object.defineProperty(Fo,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Fo,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Fo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Io=function(){function t(t,e){this.text=t,this.bounds=e}return t}(),Lo=function(t,e,i,n){var s=Uo(e,i),r=[],a=0;return s.forEach((function(e){if(i.textDecorationLine.length||e.trim().length>0)if(Fo.SUPPORT_RANGE_BOUNDS){var s=To(n,a,e.length).getClientRects();if(s.length>1){var l=Ro(e),A=0;l.forEach((function(e){r.push(new Io(e,o.fromDOMRectList(t,To(n,A+a,e.length).getClientRects()))),A+=e.length}))}else r.push(new Io(e,o.fromDOMRectList(t,s)))}else{var c=n.splitText(e.length);r.push(new Io(e,Mo(t,n))),n=c}else Fo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(e.length));a+=e.length})),r},Mo=function(t,e){var i=e.ownerDocument;if(i){var n=i.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var r=a(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),r}}return o.EMPTY},To=function(t,e,i){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+i),s},Ro=function(t){if(Fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return _o(t)},ko=function(t,e){if(Fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(t)).map((function(t){return t.segment}))}return Oo(t,e)},Uo=function(t,e){return 0!==e.letterSpacing?Ro(t):ko(t,e)},Do=[32,160,4961,65792,65793,4153,4241],Oo=function(t,e){for(var i,n=Gt(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),s=[],r=function(){if(i.value){var t=i.value.slice(),e=A(t),n="";e.forEach((function(t){-1===Do.indexOf(t)?n+=c(t):(n.length&&s.push(n),s.push(c(t)),n="")})),n.length&&s.push(n)}};!(i=n.next()).done;)r();return s},Po=function(){function t(t,e,i){this.text=No(e.data,i.textTransform),this.textBounds=Lo(t,this.text,i,e)}return t}(),No=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Qo,Ho);case 2:return t.toUpperCase();default:return t}},Qo=/(^|\s|:|-|\(|\))([a-z])/g,Ho=function(t,e,i){return t.length>0?e+i.toUpperCase():t},Go=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.src=i.currentSrc||i.src,n.intrinsicWidth=i.naturalWidth,n.intrinsicHeight=i.naturalHeight,n.context.cache.addImage(n.src),n}return e(i,t),i}(Br),Vo=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.canvas=i,n.intrinsicWidth=i.width,n.intrinsicHeight=i.height,n}return e(i,t),i}(Br),zo=function(t){function i(e,i){var n=t.call(this,e,i)||this,s=new XMLSerializer,r=a(e,i);return i.setAttribute("width",r.width+"px"),i.setAttribute("height",r.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(i)),n.intrinsicWidth=i.width.baseVal.value,n.intrinsicHeight=i.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e(i,t),i}(Br),Ko=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.value=i.value,n}return e(i,t),i}(Br),jo=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.start=i.start,n.reversed="boolean"==typeof i.reversed&&!0===i.reversed,n}return e(i,t),i}(Br),Wo=[{type:15,flags:0,unit:"px",number:3}],$o=[{type:16,flags:0,number:50}],Yo=function(t){return t.width>t.height?new o(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new o(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},Xo=function(t){var e=t.type===Jo?new Array(t.value.length+1).join("•"):t.value;return 0===e.length?t.placeholder||"":e},qo="checkbox",Zo="radio",Jo="password",ta=707406591,ea=function(t){function i(e,i){var n=t.call(this,e,i)||this;switch(n.type=i.type.toLowerCase(),n.checked=i.checked,n.value=Xo(i),n.type!==qo&&n.type!==Zo||(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=Yo(n.bounds)),n.type){case qo:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=Wo;break;case Zo:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=$o}return n}return e(i,t),i}(Br),ia=function(t){function i(e,i){var n=t.call(this,e,i)||this,s=i.options[i.selectedIndex||0];return n.value=s&&s.text||"",n}return e(i,t),i}(Br),na=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.value=i.value,n}return e(i,t),i}(Br),sa=function(t){function i(e,i){var n=t.call(this,e,i)||this;n.src=i.src,n.width=parseInt(i.width,10)||0,n.height=parseInt(i.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){n.tree=la(e,i.contentWindow.document.documentElement);var s=i.contentWindow.document.documentElement?hn(e,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):un.TRANSPARENT,r=i.contentWindow.document.body?hn(e,getComputedStyle(i.contentWindow.document.body).backgroundColor):un.TRANSPARENT;n.backgroundColor=nn(s)?nn(r)?n.styles.backgroundColor:r:s}}catch(t){}return n}return e(i,t),i}(Br),ra=["OL","UL","MENU"],oa=function(t,e,i,n){for(var s=e.firstChild,r=void 0;s;s=r)if(r=s.nextSibling,ha(s)&&s.data.trim().length>0)i.textNodes.push(new Po(t,s,i.styles));else if(ua(s))if(Ia(s)&&s.assignedNodes)s.assignedNodes().forEach((function(e){return oa(t,e,i,n)}));else{var o=aa(t,s);o.styles.isVisible()&&(Aa(s,o,n)?o.flags|=4:ca(o.styles)&&(o.flags|=2),-1!==ra.indexOf(s.tagName)&&(o.flags|=8),i.elements.push(o),s.slot,s.shadowRoot?oa(t,s.shadowRoot,o,n):Sa(s)||ya(s)||Fa(s)||oa(t,s,o,n))}},aa=function(t,e){return Ca(e)?new Go(t,e):va(e)?new Vo(t,e):ya(e)?new zo(t,e):pa(e)?new Ko(t,e):fa(e)?new jo(t,e):ma(e)?new ea(t,e):Fa(e)?new ia(t,e):Sa(e)?new na(t,e):xa(e)?new sa(t,e):new Br(t,e)},la=function(t,e){var i=aa(t,e);return i.flags|=4,oa(t,e,i,i),i},Aa=function(t,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||wa(t)&&i.styles.isTransparent()},ca=function(t){return t.isPositioned()||t.isFloating()},ha=function(t){return t.nodeType===Node.TEXT_NODE},ua=function(t){return t.nodeType===Node.ELEMENT_NODE},da=function(t){return ua(t)&&void 0!==t.style&&!ga(t)},ga=function(t){return"object"==typeof t.className},pa=function(t){return"LI"===t.tagName},fa=function(t){return"OL"===t.tagName},ma=function(t){return"INPUT"===t.tagName},_a=function(t){return"HTML"===t.tagName},ya=function(t){return"svg"===t.tagName},wa=function(t){return"BODY"===t.tagName},va=function(t){return"CANVAS"===t.tagName},ba=function(t){return"VIDEO"===t.tagName},Ca=function(t){return"IMG"===t.tagName},xa=function(t){return"IFRAME"===t.tagName},Ba=function(t){return"STYLE"===t.tagName},Ea=function(t){return"SCRIPT"===t.tagName},Sa=function(t){return"TEXTAREA"===t.tagName},Fa=function(t){return"SELECT"===t.tagName},Ia=function(t){return"SLOT"===t.tagName},La=function(t){return t.tagName.indexOf("-")>0},Ma=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){var e=this.counters[t];return e||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,i=t.counterIncrement,n=t.counterReset,s=!0;null!==i&&i.forEach((function(t){var i=e.counters[t.counter];i&&0!==t.increment&&(s=!1,i.length||i.push(1),i[Math.max(0,i.length-1)]+=t.increment)}));var r=[];return s&&n.forEach((function(t){var i=e.counters[t.counter];r.push(t.counter),i||(i=e.counters[t.counter]=[]),i.push(t.reset)})),r},t}(),Ta={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Ra={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},ka={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Ua={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Da=function(t,e,i,n,s,r){return t<e||t>i?Ya(t,s,r.length>0):n.integers.reduce((function(e,i,s){for(;t>=i;)t-=i,e+=n.values[s];return e}),"")+r},Oa=function(t,e,i,n){var s="";do{i||t--,s=n(t)+s,t/=e}while(t*e>=e);return s},Pa=function(t,e,i,n,s){var r=i-e+1;return(t<0?"-":"")+(Oa(Math.abs(t),r,n,(function(t){return c(Math.floor(t%r)+e)}))+s)},Na=function(t,e,i){void 0===i&&(i=". ");var n=e.length;return Oa(Math.abs(t),n,!1,(function(t){return e[Math.floor(t%n)]}))+i},Qa=1,Ha=2,Ga=4,Va=8,za=function(t,e,i,n,s,r){if(t<-9999||t>9999)return Ya(t,4,s.length>0);var o=Math.abs(t),a=s;if(0===o)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var A=o%10;0===A&&ar(r,Qa)&&""!==a?a=e[A]+a:A>1||1===A&&0===l||1===A&&1===l&&ar(r,Ha)||1===A&&1===l&&ar(r,Ga)&&t>100||1===A&&l>1&&ar(r,Va)?a=e[A]+(l>0?i[l-1]:"")+a:1===A&&l>0&&(a=i[l-1]+a),o=Math.floor(o/10)}return(t<0?n:"")+a},Ka="十百千萬",ja="拾佰仟萬",Wa="マイナス",$a="마이너스",Ya=function(t,e,i){var n=i?". ":"",s=i?"、":"",r=i?", ":"",o=i?" ":"";switch(e){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var a=Pa(t,48,57,!0,n);return a.length<4?"0"+a:a;case 4:return Na(t,"〇一二三四五六七八九",s);case 6:return Da(t,1,3999,Ta,3,n).toLowerCase();case 7:return Da(t,1,3999,Ta,3,n);case 8:return Pa(t,945,969,!1,n);case 9:return Pa(t,97,122,!1,n);case 10:return Pa(t,65,90,!1,n);case 11:return Pa(t,1632,1641,!0,n);case 12:case 49:return Da(t,1,9999,Ra,3,n);case 35:return Da(t,1,9999,Ra,3,n).toLowerCase();case 13:return Pa(t,2534,2543,!0,n);case 14:case 30:return Pa(t,6112,6121,!0,n);case 15:return Na(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Na(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return za(t,"零一二三四五六七八九",Ka,"負",s,Ha|Ga|Va);case 47:return za(t,"零壹貳參肆伍陸柒捌玖",ja,"負",s,Qa|Ha|Ga|Va);case 42:return za(t,"零一二三四五六七八九",Ka,"负",s,Ha|Ga|Va);case 41:return za(t,"零壹贰叁肆伍陆柒捌玖",ja,"负",s,Qa|Ha|Ga|Va);case 26:return za(t,"〇一二三四五六七八九","十百千万",Wa,s,0);case 25:return za(t,"零壱弐参四伍六七八九","拾百千万",Wa,s,Qa|Ha|Ga);case 31:return za(t,"영일이삼사오육칠팔구","십백천만",$a,r,Qa|Ha|Ga);case 33:return za(t,"零一二三四五六七八九","十百千萬",$a,r,0);case 32:return za(t,"零壹貳參四五六七八九","拾百千",$a,r,Qa|Ha|Ga);case 18:return Pa(t,2406,2415,!0,n);case 20:return Da(t,1,19999,Ua,3,n);case 21:return Pa(t,2790,2799,!0,n);case 22:return Pa(t,2662,2671,!0,n);case 22:return Da(t,1,10999,ka,3,n);case 23:return Na(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Na(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Pa(t,3302,3311,!0,n);case 28:return Na(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Na(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return Pa(t,3792,3801,!0,n);case 37:return Pa(t,6160,6169,!0,n);case 38:return Pa(t,4160,4169,!0,n);case 39:return Pa(t,2918,2927,!0,n);case 40:return Pa(t,1776,1785,!0,n);case 43:return Pa(t,3046,3055,!0,n);case 44:return Pa(t,3174,3183,!0,n);case 45:return Pa(t,3664,3673,!0,n);case 46:return Pa(t,3872,3881,!0,n);default:return Pa(t,48,57,!0,n)}},Xa="data-html2canvas-ignore",qa=function(){function t(t,e,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=e,this.counters=new Ma,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,e){var i=this,r=Ja(t,e);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var o=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset,l=r.contentWindow,A=l.document,c=il(r).then((function(){return n(i,void 0,void 0,(function(){var t,i;return s(this,(function(n){switch(n.label){case 0:return this.scrolledElements.forEach(al),l&&(l.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===e.top&&l.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-e.left,l.scrollY-e.top,0,0))),t=this.options.onclone,void 0===(i=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,el(A)]:[3,4];case 3:n.sent(),n.label=4;case 4:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(A,i)})).then((function(){return r}))]:[2,r]}}))}))}));return A.open(),A.write(rl(document.doctype)+"<html></html>"),ol(this.referenceElement.ownerDocument,o,a),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),c},t.prototype.createElementClone=function(t){if(xr(t,2),va(t))return this.createCanvasClone(t);if(ba(t))return this.createVideoClone(t);if(Ba(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return Ca(e)&&(Ca(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),La(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return sl(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var i=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),n=t.cloneNode(!1);return n.textContent=i,n}}catch(t){if(this.context.logger.error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch(e){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var s=t.getContext("2d"),r=n.getContext("2d");if(r)if(!this.options.allowTaint&&s)r.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(o){var a=o.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}r.drawImage(t,0,0)}return n}catch(e){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var i=e.getContext("2d");try{return i&&(i.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||i.getImageData(0,0,e.width,e.height)),e}catch(e){this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},t.prototype.appendChildNode=function(t,e,i){ua(e)&&(Ea(e)||e.hasAttribute(Xa)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&ua(e)&&Ba(e)||t.appendChild(this.cloneNode(e,i))},t.prototype.cloneChildNodes=function(t,e,i){for(var n=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(ua(s)&&Ia(s)&&"function"==typeof s.assignedNodes){var r=s.assignedNodes();r.length&&r.forEach((function(t){return n.appendChildNode(e,t,i)}))}else this.appendChildNode(e,s,i)},t.prototype.cloneNode=function(t,e){if(ha(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&ua(t)&&(da(t)||ga(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var s=i.getComputedStyle(t),r=i.getComputedStyle(t,":before"),o=i.getComputedStyle(t,":after");this.referenceElement===t&&da(n)&&(this.clonedReferenceElement=n),wa(n)&&dl(n);var a=this.counters.parse(new wr(this.context,s)),l=this.resolvePseudoContent(t,n,r,$r.BEFORE);La(t)&&(e=!0),ba(t)||this.cloneChildNodes(t,n,e),l&&n.insertBefore(l,n.firstChild);var A=this.resolvePseudoContent(t,n,o,$r.AFTER);return A&&n.appendChild(A),this.counters.pop(a),(s&&(this.options.copyStyles||ga(t))&&!xa(t)||e)&&sl(s,n),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Sa(t)||Fa(t))&&(Sa(n)||Fa(n))&&(n.value=t.value),n}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,i,n){var s=this;if(i){var r=i.content,o=e.ownerDocument;if(o&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==i.display){this.counters.parse(new wr(this.context,i));var a=new yr(this.context,i),l=o.createElement("html2canvaspseudoelement");sl(i,l),a.content.forEach((function(e){if(0===e.type)l.appendChild(o.createTextNode(e.value));else if(22===e.type){var i=o.createElement("img");i.src=e.value,i.style.opacity="1",l.appendChild(i)}else if(18===e.type){if("attr"===e.name){var n=e.values.filter(Ti);n.length&&l.appendChild(o.createTextNode(t.getAttribute(n[0].value)||""))}else if("counter"===e.name){var r=e.values.filter(Di),A=r[0],c=r[1];if(A&&Ti(A)){var h=s.counters.getCounterValue(A.value),u=c&&Ti(c)?Bs.parse(s.context,c.value):3;l.appendChild(o.createTextNode(Ya(h,u,!1)))}}else if("counters"===e.name){var d=e.values.filter(Di),g=(A=d[0],d[1]);if(c=d[2],A&&Ti(A)){var p=s.counters.getCounterValues(A.value),f=c&&Ti(c)?Bs.parse(s.context,c.value):3,m=g&&0===g.type?g.value:"",_=p.map((function(t){return Ya(t,f,!1)})).join(m);l.appendChild(o.createTextNode(_))}}}else if(20===e.type)switch(e.value){case"open-quote":l.appendChild(o.createTextNode(dr(a.quotes,s.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(dr(a.quotes,--s.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(e.value))}})),l.className=cl+" "+hl;var A=n===$r.BEFORE?" "+cl:" "+hl;return ga(e)?e.className.baseValue+=A:e.className+=A,l}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}($r||($r={}));var Za,Ja=function(t,e){var i=t.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(Xa,"true"),t.body.appendChild(i),i},tl=function(t){return new Promise((function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()}))},el=function(t){return Promise.all([].slice.call(t.images,0).map(tl))},il=function(t){return new Promise((function(e,i){var n=t.contentWindow;if(!n)return i("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var i=setInterval((function(){s.body.childNodes.length>0&&"complete"===s.readyState&&(clearInterval(i),e(t))}),50)}}))},nl=["all","d","content"],sl=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t.item(i);-1===nl.indexOf(n)&&e.style.setProperty(n,t.getPropertyValue(n))}return e},rl=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},ol=function(t,e,i){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||i!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,i)},al=function(t){var e=t[0],i=t[1],n=t[2];e.scrollLeft=i,e.scrollTop=n},ll=":before",Al=":after",cl="___html2canvas___pseudoelement_before",hl="___html2canvas___pseudoelement_after",ul='{\n    content: "" !important;\n    display: none !important;\n}',dl=function(t){gl(t,"."+cl+ll+ul+"\n         ."+hl+Al+ul)},gl=function(t,e){var i=t.ownerDocument;if(i){var n=i.createElement("style");n.textContent=e,t.appendChild(n)}},pl=function(){function t(){}return t.getOrigin=function(e){var i=t._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),fl=function(){function t(t,e){this.context=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:Cl(t)||wl(t)?((this._cache[t]=this.loadImage(t)).catch((function(){})),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return n(this,void 0,void 0,(function(){var e,i,n,r,o=this;return s(this,(function(s){switch(s.label){case 0:return e=pl.isSameOrigin(t),i=!vl(t)&&!0===this._options.useCORS&&Fo.SUPPORT_CORS_IMAGES&&!e,n=!vl(t)&&!e&&!Cl(t)&&"string"==typeof this._options.proxy&&Fo.SUPPORT_CORS_XHR&&!i,e||!1!==this._options.allowTaint||vl(t)||Cl(t)||n||i?(r=t,n?[4,this.proxy(r)]:[3,2]):[2];case 1:r=s.sent(),s.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var n=new Image;n.onload=function(){return t(n)},n.onerror=e,(bl(r)||i)&&(n.crossOrigin="anonymous"),n.src=r,!0===n.complete&&setTimeout((function(){return t(n)}),500),o._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,s.sent()]}}))}))},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise((function(s,r){var o=Fo.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===o)s(a.response);else{var t=new FileReader;t.addEventListener("load",(function(){return s(t.result)}),!1),t.addEventListener("error",(function(t){return r(t)}),!1),t.readAsDataURL(a.response)}else r("Failed to proxy resource "+n+" with status code "+a.status)},a.onerror=r;var l=i.indexOf("?")>-1?"&":"?";if(a.open("GET",""+i+l+"url="+encodeURIComponent(t)+"&responseType="+o),"text"!==o&&a instanceof XMLHttpRequest&&(a.responseType=o),e._options.imageTimeout){var A=e._options.imageTimeout;a.timeout=A,a.ontimeout=function(){return r("Timed out ("+A+"ms) proxying "+n)}}a.send()}))},t}(),ml=/^data:image\/svg\+xml/i,_l=/^data:image\/.*;base64,/i,yl=/^data:image\/.*/i,wl=function(t){return Fo.SUPPORT_SVG_DRAWING||!xl(t)},vl=function(t){return yl.test(t)},bl=function(t){return _l.test(t)},Cl=function(t){return"blob"===t.substr(0,4)},xl=function(t){return"svg"===t.substr(-3).toLowerCase()||ml.test(t)},Bl=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,i){return new t(this.x+e,this.y+i)},t}(),El=function(t,e,i){return new Bl(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},Sl=function(){function t(t,e,i,n){this.type=1,this.start=t,this.startControl=e,this.endControl=i,this.end=n}return t.prototype.subdivide=function(e,i){var n=El(this.start,this.startControl,e),s=El(this.startControl,this.endControl,e),r=El(this.endControl,this.end,e),o=El(n,s,e),a=El(s,r,e),l=El(o,a,e);return i?new t(this.start,n,o,l):new t(l,a,r,this.end)},t.prototype.add=function(e,i){return new t(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Fl=function(t){return 1===t.type},Il=function(){function t(t){var e=t.styles,i=t.bounds,n=Ki(e.borderTopLeftRadius,i.width,i.height),s=n[0],r=n[1],o=Ki(e.borderTopRightRadius,i.width,i.height),a=o[0],l=o[1],A=Ki(e.borderBottomRightRadius,i.width,i.height),c=A[0],h=A[1],u=Ki(e.borderBottomLeftRadius,i.width,i.height),d=u[0],g=u[1],p=[];p.push((s+a)/i.width),p.push((d+c)/i.width),p.push((r+g)/i.height),p.push((l+h)/i.height);var f=Math.max.apply(Math,p);f>1&&(s/=f,r/=f,a/=f,l/=f,c/=f,h/=f,d/=f,g/=f);var m=i.width-a,_=i.height-h,y=i.width-c,w=i.height-g,v=e.borderTopWidth,b=e.borderRightWidth,C=e.borderBottomWidth,x=e.borderLeftWidth,B=ji(e.paddingTop,t.bounds.width),E=ji(e.paddingRight,t.bounds.width),S=ji(e.paddingBottom,t.bounds.width),F=ji(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||r>0?Ll(i.left+x/3,i.top+v/3,s-x/3,r-v/3,Za.TOP_LEFT):new Bl(i.left+x/3,i.top+v/3),this.topRightBorderDoubleOuterBox=s>0||r>0?Ll(i.left+m,i.top+v/3,a-b/3,l-v/3,Za.TOP_RIGHT):new Bl(i.left+i.width-b/3,i.top+v/3),this.bottomRightBorderDoubleOuterBox=c>0||h>0?Ll(i.left+y,i.top+_,c-b/3,h-C/3,Za.BOTTOM_RIGHT):new Bl(i.left+i.width-b/3,i.top+i.height-C/3),this.bottomLeftBorderDoubleOuterBox=d>0||g>0?Ll(i.left+x/3,i.top+w,d-x/3,g-C/3,Za.BOTTOM_LEFT):new Bl(i.left+x/3,i.top+i.height-C/3),this.topLeftBorderDoubleInnerBox=s>0||r>0?Ll(i.left+2*x/3,i.top+2*v/3,s-2*x/3,r-2*v/3,Za.TOP_LEFT):new Bl(i.left+2*x/3,i.top+2*v/3),this.topRightBorderDoubleInnerBox=s>0||r>0?Ll(i.left+m,i.top+2*v/3,a-2*b/3,l-2*v/3,Za.TOP_RIGHT):new Bl(i.left+i.width-2*b/3,i.top+2*v/3),this.bottomRightBorderDoubleInnerBox=c>0||h>0?Ll(i.left+y,i.top+_,c-2*b/3,h-2*C/3,Za.BOTTOM_RIGHT):new Bl(i.left+i.width-2*b/3,i.top+i.height-2*C/3),this.bottomLeftBorderDoubleInnerBox=d>0||g>0?Ll(i.left+2*x/3,i.top+w,d-2*x/3,g-2*C/3,Za.BOTTOM_LEFT):new Bl(i.left+2*x/3,i.top+i.height-2*C/3),this.topLeftBorderStroke=s>0||r>0?Ll(i.left+x/2,i.top+v/2,s-x/2,r-v/2,Za.TOP_LEFT):new Bl(i.left+x/2,i.top+v/2),this.topRightBorderStroke=s>0||r>0?Ll(i.left+m,i.top+v/2,a-b/2,l-v/2,Za.TOP_RIGHT):new Bl(i.left+i.width-b/2,i.top+v/2),this.bottomRightBorderStroke=c>0||h>0?Ll(i.left+y,i.top+_,c-b/2,h-C/2,Za.BOTTOM_RIGHT):new Bl(i.left+i.width-b/2,i.top+i.height-C/2),this.bottomLeftBorderStroke=d>0||g>0?Ll(i.left+x/2,i.top+w,d-x/2,g-C/2,Za.BOTTOM_LEFT):new Bl(i.left+x/2,i.top+i.height-C/2),this.topLeftBorderBox=s>0||r>0?Ll(i.left,i.top,s,r,Za.TOP_LEFT):new Bl(i.left,i.top),this.topRightBorderBox=a>0||l>0?Ll(i.left+m,i.top,a,l,Za.TOP_RIGHT):new Bl(i.left+i.width,i.top),this.bottomRightBorderBox=c>0||h>0?Ll(i.left+y,i.top+_,c,h,Za.BOTTOM_RIGHT):new Bl(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=d>0||g>0?Ll(i.left,i.top+w,d,g,Za.BOTTOM_LEFT):new Bl(i.left,i.top+i.height),this.topLeftPaddingBox=s>0||r>0?Ll(i.left+x,i.top+v,Math.max(0,s-x),Math.max(0,r-v),Za.TOP_LEFT):new Bl(i.left+x,i.top+v),this.topRightPaddingBox=a>0||l>0?Ll(i.left+Math.min(m,i.width-b),i.top+v,m>i.width+b?0:Math.max(0,a-b),Math.max(0,l-v),Za.TOP_RIGHT):new Bl(i.left+i.width-b,i.top+v),this.bottomRightPaddingBox=c>0||h>0?Ll(i.left+Math.min(y,i.width-x),i.top+Math.min(_,i.height-C),Math.max(0,c-b),Math.max(0,h-C),Za.BOTTOM_RIGHT):new Bl(i.left+i.width-b,i.top+i.height-C),this.bottomLeftPaddingBox=d>0||g>0?Ll(i.left+x,i.top+Math.min(w,i.height-C),Math.max(0,d-x),Math.max(0,g-C),Za.BOTTOM_LEFT):new Bl(i.left+x,i.top+i.height-C),this.topLeftContentBox=s>0||r>0?Ll(i.left+x+F,i.top+v+B,Math.max(0,s-(x+F)),Math.max(0,r-(v+B)),Za.TOP_LEFT):new Bl(i.left+x+F,i.top+v+B),this.topRightContentBox=a>0||l>0?Ll(i.left+Math.min(m,i.width+x+F),i.top+v+B,m>i.width+x+F?0:a-x+F,l-(v+B),Za.TOP_RIGHT):new Bl(i.left+i.width-(b+E),i.top+v+B),this.bottomRightContentBox=c>0||h>0?Ll(i.left+Math.min(y,i.width-(x+F)),i.top+Math.min(_,i.height+v+B),Math.max(0,c-(b+E)),h-(C+S),Za.BOTTOM_RIGHT):new Bl(i.left+i.width-(b+E),i.top+i.height-(C+S)),this.bottomLeftContentBox=d>0||g>0?Ll(i.left+x+F,i.top+w,Math.max(0,d-(x+F)),g-(C+S),Za.BOTTOM_LEFT):new Bl(i.left+x+F,i.top+i.height-(C+S))}return t}();!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Za||(Za={}));var Ll=function(t,e,i,n,s){var r=(Math.sqrt(2)-1)/3*4,o=i*r,a=n*r,l=t+i,A=e+n;switch(s){case Za.TOP_LEFT:return new Sl(new Bl(t,A),new Bl(t,A-a),new Bl(l-o,e),new Bl(l,e));case Za.TOP_RIGHT:return new Sl(new Bl(t,e),new Bl(t+o,e),new Bl(l,A-a),new Bl(l,A));case Za.BOTTOM_RIGHT:return new Sl(new Bl(l,e),new Bl(l,e+a),new Bl(t+o,A),new Bl(t,A));case Za.BOTTOM_LEFT:default:return new Sl(new Bl(l,A),new Bl(l-o,A),new Bl(t,e+a),new Bl(t,e))}},Ml=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Tl=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Rl=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},kl=function(){function t(t,e,i){this.offsetX=t,this.offsetY=e,this.matrix=i,this.type=0,this.target=6}return t}(),Ul=function(){function t(t,e){this.path=t,this.target=e,this.type=1}return t}(),Dl=function(){function t(t){this.opacity=t,this.type=2,this.target=6}return t}(),Ol=function(t){return 0===t.type},Pl=function(t){return 1===t.type},Nl=function(t){return 2===t.type},Ql=function(t,e){return t.length===e.length&&t.some((function(t,i){return t===e[i]}))},Hl=function(t,e,i,n,s){return t.map((function(t,r){switch(r){case 0:return t.add(e,i);case 1:return t.add(e+n,i);case 2:return t.add(e+n,i+s);case 3:return t.add(e,i+s)}return t}))},Gl=function(){function t(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Vl=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new Il(this.container),this.container.styles.opacity<1&&this.effects.push(new Dl(this.container.styles.opacity)),null!==this.container.styles.transform){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new kl(i,n,s))}if(0!==this.container.styles.overflowX){var r=Ml(this.curves),o=Rl(this.curves);Ql(r,o)?this.effects.push(new Ul(r,6)):(this.effects.push(new Ul(r,2)),this.effects.push(new Ul(o,4)))}}return t.prototype.getEffects=function(t){for(var e=-1===[2,3].indexOf(this.container.styles.position),i=this.parent,n=this.effects.slice(0);i;){var s=i.effects.filter((function(t){return!Pl(t)}));if(e||0!==i.container.styles.position||!i.parent){if(n.unshift.apply(n,s),e=-1===[2,3].indexOf(i.container.styles.position),0!==i.container.styles.overflowX){var r=Ml(i.curves),o=Rl(i.curves);Ql(r,o)||n.unshift(new Ul(o,6))}}else n.unshift.apply(n,s);i=i.parent}return n.filter((function(e){return ar(e.target,t)}))},t}(),zl=function(t,e,i,n){t.container.elements.forEach((function(s){var r=ar(s.flags,4),o=ar(s.flags,2),a=new Vl(s,t);ar(s.styles.display,2048)&&n.push(a);var l=ar(s.flags,8)?[]:n;if(r||o){var A=r||s.styles.isPositioned()?i:e,c=new Gl(a);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var u=0;A.negativeZIndex.some((function(t,e){return h>t.element.container.styles.zIndex.order?(u=e,!1):u>0})),A.negativeZIndex.splice(u,0,c)}else if(h>0){var d=0;A.positiveZIndex.some((function(t,e){return h>=t.element.container.styles.zIndex.order?(d=e+1,!1):d>0})),A.positiveZIndex.splice(d,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else s.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);zl(a,c,r?c:i,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),zl(a,e,i,l);ar(s.flags,8)&&Kl(s,l)}))},Kl=function(t,e){for(var i=t instanceof jo?t.start:1,n=t instanceof jo&&t.reversed,s=0;s<e.length;s++){var r=e[s];r.container instanceof Ko&&"number"==typeof r.container.value&&0!==r.container.value&&(i=r.container.value),r.listValue=Ya(i,r.container.styles.listStyleType,!0),i+=n?-1:1}},jl=function(t){var e=new Vl(t,null),i=new Gl(e),n=[];return zl(e,i,i,n),Kl(e.container,n),i},Wl=function(t,e){switch(e){case 0:return Zl(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Zl(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Zl(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);default:return Zl(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},$l=function(t,e){switch(e){case 0:return Zl(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Zl(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Zl(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);default:return Zl(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},Yl=function(t,e){switch(e){case 0:return Zl(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Zl(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Zl(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);default:return Zl(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},Xl=function(t,e){switch(e){case 0:return ql(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return ql(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return ql(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);default:return ql(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},ql=function(t,e){var i=[];return Fl(t)?i.push(t.subdivide(.5,!1)):i.push(t),Fl(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},Zl=function(t,e,i,n){var s=[];return Fl(t)?s.push(t.subdivide(.5,!1)):s.push(t),Fl(i)?s.push(i.subdivide(.5,!0)):s.push(i),Fl(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Fl(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},Jl=function(t){var e=t.bounds,i=t.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},tA=function(t){var e=t.styles,i=t.bounds,n=ji(e.paddingLeft,i.width),s=ji(e.paddingRight,i.width),r=ji(e.paddingTop,i.width),o=ji(e.paddingBottom,i.width);return i.add(n+e.borderLeftWidth,r+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+r+o))},eA=function(t,e){return 0===t?e.bounds:2===t?tA(e):Jl(e)},iA=function(t,e){return 0===t?e.bounds:2===t?tA(e):Jl(e)},nA=function(t,e,i){var n=eA(aA(t.styles.backgroundOrigin,e),t),s=iA(aA(t.styles.backgroundClip,e),t),r=oA(aA(t.styles.backgroundSize,e),i,n),o=r[0],a=r[1],l=Ki(aA(t.styles.backgroundPosition,e),n.width-o,n.height-a);return[lA(aA(t.styles.backgroundRepeat,e),l,r,n,s),Math.round(n.left+l[0]),Math.round(n.top+l[1]),o,a]},sA=function(t){return Ti(t)&&t.value===On.AUTO},rA=function(t){return"number"==typeof t},oA=function(t,e,i){var n=e[0],s=e[1],r=e[2],o=t[0],a=t[1];if(!o)return[0,0];if(Qi(o)&&a&&Qi(a))return[ji(o,i.width),ji(a,i.height)];var l=rA(r);if(Ti(o)&&(o.value===On.CONTAIN||o.value===On.COVER))return rA(r)?i.width/i.height<r!=(o.value===On.COVER)?[i.width,i.width/r]:[i.height*r,i.height]:[i.width,i.height];var A=rA(n),c=rA(s),h=A||c;if(sA(o)&&(!a||sA(a)))return A&&c?[n,s]:l||h?h&&l?[A?n:s*r,c?s:n/r]:[A?n:i.width,c?s:i.height]:[i.width,i.height];if(l){var u=0,d=0;return Qi(o)?u=ji(o,i.width):Qi(a)&&(d=ji(a,i.height)),sA(o)?u=d*r:a&&!sA(a)||(d=u/r),[u,d]}var g=null,p=null;if(Qi(o)?g=ji(o,i.width):a&&Qi(a)&&(p=ji(a,i.height)),null===g||a&&!sA(a)||(p=A&&c?g/n*s:i.height),null!==p&&sA(o)&&(g=A&&c?p/s*n:i.width),null!==g&&null!==p)return[g,p];throw new Error("Unable to calculate background-size for element")},aA=function(t,e){var i=t[e];return void 0===i?t[0]:i},lA=function(t,e,i,n,s){var r=e[0],o=e[1],a=i[0],l=i[1];switch(t){case 2:return[new Bl(Math.round(n.left),Math.round(n.top+o)),new Bl(Math.round(n.left+n.width),Math.round(n.top+o)),new Bl(Math.round(n.left+n.width),Math.round(l+n.top+o)),new Bl(Math.round(n.left),Math.round(l+n.top+o))];case 3:return[new Bl(Math.round(n.left+r),Math.round(n.top)),new Bl(Math.round(n.left+r+a),Math.round(n.top)),new Bl(Math.round(n.left+r+a),Math.round(n.height+n.top)),new Bl(Math.round(n.left+r),Math.round(n.height+n.top))];case 1:return[new Bl(Math.round(n.left+r),Math.round(n.top+o)),new Bl(Math.round(n.left+r+a),Math.round(n.top+o)),new Bl(Math.round(n.left+r+a),Math.round(n.top+o+l)),new Bl(Math.round(n.left+r),Math.round(n.top+o+l))];default:return[new Bl(Math.round(s.left),Math.round(s.top)),new Bl(Math.round(s.left+s.width),Math.round(s.top)),new Bl(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Bl(Math.round(s.left),Math.round(s.height+s.top))]}},AA="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",cA="Hidden Text",hA=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var i=this._document.createElement("div"),n=this._document.createElement("img"),s=this._document.createElement("span"),r=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",r.appendChild(i),n.src=AA,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(cA)),i.appendChild(s),i.appendChild(n);var o=n.offsetTop-s.offsetTop+2;i.removeChild(s),i.appendChild(this._document.createTextNode(cA)),i.style.lineHeight="normal",n.style.verticalAlign="super";var a=n.offsetTop-i.offsetTop+2;return r.removeChild(i),{baseline:o,middle:a}},t.prototype.getMetrics=function(t,e){var i=t+" "+e;return void 0===this._data[i]&&(this._data[i]=this.parseMetrics(t,e)),this._data[i]},t}(),uA=function(){function t(t,e){this.context=t,this.options=e}return t}(),dA=1e4,gA=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n._activeEffects=[],n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),i.canvas||(n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px"),n.fontMetrics=new hA(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),n}return e(i,t),i.prototype.applyEffects=function(t){for(var e=this;this._activeEffects.length;)this.popEffect();t.forEach((function(t){return e.applyEffect(t)}))},i.prototype.applyEffect=function(t){this.ctx.save(),Nl(t)&&(this.ctx.globalAlpha=t.opacity),Ol(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Pl(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},i.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},i.prototype.renderStack=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return t.element.container.styles.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},i.prototype.renderNode=function(t){return n(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return ar(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},i.prototype.renderTextWithLetterSpacing=function(t,e,i){var n=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+i):Ro(t.text).reduce((function(e,s){return n.ctx.fillText(s,e,t.bounds.top+i),e+n.ctx.measureText(s).width}),t.bounds.left)},i.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),i=yA(t.fontFamily).join(", "),n=Li(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,n,i].join(" "),i,n]},i.prototype.renderTextNode=function(t,e){return n(this,void 0,void 0,(function(){var i,n,r,o,a,l,A,c,h=this;return s(this,(function(s){return i=this.createFontStyle(e),n=i[0],r=i[1],o=i[2],this.ctx.font=n,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(r,o),l=a.baseline,A=a.middle,c=e.paintOrder,t.textBounds.forEach((function(t){c.forEach((function(i){switch(i){case 0:h.ctx.fillStyle=sn(e.color),h.renderTextWithLetterSpacing(t,e.letterSpacing,l);var n=e.textShadow;n.length&&t.text.trim().length&&(n.slice(0).reverse().forEach((function(i){h.ctx.shadowColor=sn(i.color),h.ctx.shadowOffsetX=i.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=i.offsetY.number*h.options.scale,h.ctx.shadowBlur=i.blur.number,h.renderTextWithLetterSpacing(t,e.letterSpacing,l)})),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),e.textDecorationLine.length&&(h.ctx.fillStyle=sn(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+l),t.bounds.width,1);break;case 2:h.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:h.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+A),t.bounds.width,1)}})));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(h.ctx.strokeStyle=sn(e.webkitTextStrokeColor),h.ctx.lineWidth=e.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+l)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter"}}))})),[2]}))}))},i.prototype.renderReplacedElement=function(t,e,i){if(i&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var n=tA(t),s=Rl(e);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,t.intrinsicWidth,t.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},i.prototype.renderNodeContent=function(t){return n(this,void 0,void 0,(function(){var e,n,r,a,l,A,c,h,u,d,g,p,f,m,_,y,w,v;return s(this,(function(s){switch(s.label){case 0:this.applyEffects(t.getEffects(4)),e=t.container,n=t.curves,r=e.styles,a=0,l=e.textNodes,s.label=1;case 1:return a<l.length?(A=l[a],[4,this.renderTextNode(A,r)]):[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:if(!(e instanceof Go))return[3,8];s.label=5;case 5:return s.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return _=s.sent(),this.renderReplacedElement(e,n,_),[3,8];case 7:return s.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof Vo&&this.renderReplacedElement(e,n,e.canvas),!(e instanceof zo))return[3,12];s.label=9;case 9:return s.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return _=s.sent(),this.renderReplacedElement(e,n,_),[3,12];case 11:return s.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof sa&&e.tree?[4,new i(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:c=s.sent(),e.width&&e.height&&this.ctx.drawImage(c,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),s.label=14;case 14:if(e instanceof ea&&(h=Math.min(e.bounds.width,e.bounds.height),e.type===qo?e.checked&&(this.ctx.save(),this.path([new Bl(e.bounds.left+.39363*h,e.bounds.top+.79*h),new Bl(e.bounds.left+.16*h,e.bounds.top+.5549*h),new Bl(e.bounds.left+.27347*h,e.bounds.top+.44071*h),new Bl(e.bounds.left+.39694*h,e.bounds.top+.5649*h),new Bl(e.bounds.left+.72983*h,e.bounds.top+.23*h),new Bl(e.bounds.left+.84*h,e.bounds.top+.34085*h),new Bl(e.bounds.left+.39363*h,e.bounds.top+.79*h)]),this.ctx.fillStyle=sn(ta),this.ctx.fill(),this.ctx.restore()):e.type===Zo&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+h/2,e.bounds.top+h/2,h/4,0,2*Math.PI,!0),this.ctx.fillStyle=sn(ta),this.ctx.fill(),this.ctx.restore())),pA(e)&&e.value.length){switch(u=this.createFontStyle(r),w=u[0],d=u[1],g=this.fontMetrics.getMetrics(w,d).baseline,this.ctx.font=w,this.ctx.fillStyle=sn(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=mA(e.styles.textAlign),v=tA(e),p=0,e.styles.textAlign){case 1:p+=v.width/2;break;case 2:p+=v.width}f=v.add(p,0,0,-v.height/2+1),this.ctx.save(),this.path([new Bl(v.left,v.top),new Bl(v.left+v.width,v.top),new Bl(v.left+v.width,v.top+v.height),new Bl(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Io(e.value,f),r.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ar(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(m=e.styles.listStyleImage).type)return[3,18];_=void 0,y=m.url,s.label=15;case 15:return s.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return _=s.sent(),this.ctx.drawImage(_,e.bounds.left-(_.width+10),e.bounds.top),[3,18];case 17:return s.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==e.styles.listStyleType&&(w=this.createFontStyle(r)[0],this.ctx.font=w,this.ctx.fillStyle=sn(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new o(e.bounds.left,e.bounds.top+ji(e.styles.paddingTop,e.bounds.width),e.bounds.width,bs(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Io(t.listValue,v),r.letterSpacing,bs(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),s.label=20;case 20:return[2]}}))}))},i.prototype.renderStackContent=function(t){return n(this,void 0,void 0,(function(){var e,i,n,r,o,a,l,A,c,h,u,d,g,p,f;return s(this,(function(s){switch(s.label){case 0:return ar(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:s.sent(),e=0,i=t.negativeZIndex,s.label=2;case 2:return e<i.length?(f=i[e],[4,this.renderStack(f)]):[3,5];case 3:s.sent(),s.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:s.sent(),n=0,r=t.nonInlineLevel,s.label=7;case 7:return n<r.length?(f=r[n],[4,this.renderNode(f)]):[3,10];case 8:s.sent(),s.label=9;case 9:return n++,[3,7];case 10:o=0,a=t.nonPositionedFloats,s.label=11;case 11:return o<a.length?(f=a[o],[4,this.renderStack(f)]):[3,14];case 12:s.sent(),s.label=13;case 13:return o++,[3,11];case 14:l=0,A=t.nonPositionedInlineLevel,s.label=15;case 15:return l<A.length?(f=A[l],[4,this.renderStack(f)]):[3,18];case 16:s.sent(),s.label=17;case 17:return l++,[3,15];case 18:c=0,h=t.inlineLevel,s.label=19;case 19:return c<h.length?(f=h[c],[4,this.renderNode(f)]):[3,22];case 20:s.sent(),s.label=21;case 21:return c++,[3,19];case 22:u=0,d=t.zeroOrAutoZIndexOrTransformedOrOpacity,s.label=23;case 23:return u<d.length?(f=d[u],[4,this.renderStack(f)]):[3,26];case 24:s.sent(),s.label=25;case 25:return u++,[3,23];case 26:g=0,p=t.positiveZIndex,s.label=27;case 27:return g<p.length?(f=p[g],[4,this.renderStack(f)]):[3,30];case 28:s.sent(),s.label=29;case 29:return g++,[3,27];case 30:return[2]}}))}))},i.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},i.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},i.prototype.formatPath=function(t){var e=this;t.forEach((function(t,i){var n=Fl(t)?t.start:t;0===i?e.ctx.moveTo(n.x,n.y):e.ctx.lineTo(n.x,n.y),Fl(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},i.prototype.renderRepeat=function(t,e,i,n){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(i,n),this.ctx.fill(),this.ctx.translate(-i,-n)},i.prototype.resizeImage=function(t,e,i){var n;if(t.width===e&&t.height===i)return t;var s=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return s.width=Math.max(1,e),s.height=Math.max(1,i),s.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,i),s},i.prototype.renderBackgroundImage=function(t){return n(this,void 0,void 0,(function(){var e,i,n,r,o,a;return s(this,(function(l){switch(l.label){case 0:e=t.styles.backgroundImage.length-1,i=function(i){var r,o,a,l,A,c,h,u,d,g,p,f,m,_,y,w,v,b,C,x,B,E,S,F,I,L,M,T,R,k,U;return s(this,(function(s){switch(s.label){case 0:if(0!==i.type)return[3,5];r=void 0,o=i.url,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.context.cache.match(o)];case 2:return r=s.sent(),[3,4];case 3:return s.sent(),n.context.logger.error("Error loading background-image "+o),[3,4];case 4:return r&&(a=nA(t,e,[r.width,r.height,r.width/r.height]),w=a[0],E=a[1],S=a[2],C=a[3],x=a[4],_=n.ctx.createPattern(n.resizeImage(r,C,x),"repeat"),n.renderRepeat(w,_,E,S)),[3,6];case 5:Rn(i)?(l=nA(t,e,[null,null,null]),w=l[0],E=l[1],S=l[2],C=l[3],x=l[4],A=_n(i.angle,C,x),c=A[0],h=A[1],u=A[2],d=A[3],g=A[4],(p=document.createElement("canvas")).width=C,p.height=x,f=p.getContext("2d"),m=f.createLinearGradient(h,d,u,g),fn(i.stops,c).forEach((function(t){return m.addColorStop(t.stop,sn(t.color))})),f.fillStyle=m,f.fillRect(0,0,C,x),C>0&&x>0&&(_=n.ctx.createPattern(p,"repeat"),n.renderRepeat(w,_,E,S))):kn(i)&&(y=nA(t,e,[null,null,null]),w=y[0],v=y[1],b=y[2],C=y[3],x=y[4],B=0===i.position.length?[Vi]:i.position,E=ji(B[0],C),S=ji(B[B.length-1],x),F=vn(i,E,S,C,x),I=F[0],L=F[1],I>0&&L>0&&(M=n.ctx.createRadialGradient(v+E,b+S,0,v+E,b+S,I),fn(i.stops,2*I).forEach((function(t){return M.addColorStop(t.stop,sn(t.color))})),n.path(w),n.ctx.fillStyle=M,I!==L?(T=t.bounds.left+.5*t.bounds.width,R=t.bounds.top+.5*t.bounds.height,U=1/(k=L/I),n.ctx.save(),n.ctx.translate(T,R),n.ctx.transform(1,0,0,k,0,0),n.ctx.translate(-T,-R),n.ctx.fillRect(v,U*(b-R)+R,C,x*U),n.ctx.restore()):n.ctx.fill())),s.label=6;case 6:return e--,[2]}}))},n=this,r=0,o=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return r<o.length?(a=o[r],[5,i(a)]):[3,4];case 2:l.sent(),l.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},i.prototype.renderSolidBorder=function(t,e,i){return n(this,void 0,void 0,(function(){return s(this,(function(n){return this.path(Wl(i,e)),this.ctx.fillStyle=sn(t),this.ctx.fill(),[2]}))}))},i.prototype.renderDoubleBorder=function(t,e,i,r){return n(this,void 0,void 0,(function(){var n,o;return s(this,(function(s){switch(s.label){case 0:return e<3?[4,this.renderSolidBorder(t,i,r)]:[3,2];case 1:return s.sent(),[2];case 2:return n=$l(r,i),this.path(n),this.ctx.fillStyle=sn(t),this.ctx.fill(),o=Yl(r,i),this.path(o),this.ctx.fill(),[2]}}))}))},i.prototype.renderNodeBackgroundAndBorders=function(t){return n(this,void 0,void 0,(function(){var e,i,n,r,o,a,l,A,c=this;return s(this,(function(s){switch(s.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,i=!nn(e.backgroundColor)||e.backgroundImage.length,n=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],r=fA(aA(e.backgroundClip,0),t.curves),i||e.boxShadow.length?(this.ctx.save(),this.path(r),this.ctx.clip(),nn(e.backgroundColor)||(this.ctx.fillStyle=sn(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:s.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){c.ctx.save();var i=Ml(t.curves),n=e.inset?0:dA,s=Hl(i,-n+(e.inset?1:-1)*e.spread.number,(e.inset?1:-1)*e.spread.number,e.spread.number*(e.inset?-2:2),e.spread.number*(e.inset?-2:2));e.inset?(c.path(i),c.ctx.clip(),c.mask(s)):(c.mask(i),c.ctx.clip(),c.path(s)),c.ctx.shadowOffsetX=e.offsetX.number+n,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=sn(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?sn(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()})),s.label=2;case 2:o=0,a=0,l=n,s.label=3;case 3:return a<l.length?0!==(A=l[a]).style&&!nn(A.color)&&A.width>0?2!==A.style?[3,5]:[4,this.renderDashedDottedBorder(A.color,A.width,o,t.curves,2)]:[3,11]:[3,13];case 4:return s.sent(),[3,11];case 5:return 3!==A.style?[3,7]:[4,this.renderDashedDottedBorder(A.color,A.width,o,t.curves,3)];case 6:return s.sent(),[3,11];case 7:return 4!==A.style?[3,9]:[4,this.renderDoubleBorder(A.color,A.width,o,t.curves)];case 8:return s.sent(),[3,11];case 9:return[4,this.renderSolidBorder(A.color,o,t.curves)];case 10:s.sent(),s.label=11;case 11:o++,s.label=12;case 12:return a++,[3,3];case 13:return[2]}}))}))},i.prototype.renderDashedDottedBorder=function(t,e,i,r,o){return n(this,void 0,void 0,(function(){var n,a,l,A,c,h,u,d,g,p,f,m,_,y,w,v;return s(this,(function(s){return this.ctx.save(),n=Xl(r,i),a=Wl(r,i),2===o&&(this.path(a),this.ctx.clip()),Fl(a[0])?(l=a[0].start.x,A=a[0].start.y):(l=a[0].x,A=a[0].y),Fl(a[1])?(c=a[1].end.x,h=a[1].end.y):(c=a[1].x,h=a[1].y),u=0===i||2===i?Math.abs(l-c):Math.abs(A-h),this.ctx.beginPath(),3===o?this.formatPath(n):this.formatPath(a.slice(0,2)),d=e<3?3*e:2*e,g=e<3?2*e:e,3===o&&(d=e,g=e),p=!0,u<=2*d?p=!1:u<=2*d+g?(d*=f=u/(2*d+g),g*=f):(m=Math.floor((u+g)/(d+g)),_=(u-m*d)/(m-1),g=(y=(u-(m+1)*d)/m)<=0||Math.abs(g-_)<Math.abs(g-y)?_:y),p&&(3===o?this.ctx.setLineDash([0,d+g]):this.ctx.setLineDash([d,g])),3===o?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=sn(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===o&&(Fl(a[0])&&(w=a[3],v=a[0],this.ctx.beginPath(),this.formatPath([new Bl(w.end.x,w.end.y),new Bl(v.start.x,v.start.y)]),this.ctx.stroke()),Fl(a[1])&&(w=a[1],v=a[2],this.ctx.beginPath(),this.formatPath([new Bl(w.end.x,w.end.y),new Bl(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},i.prototype.render=function(t){return n(this,void 0,void 0,(function(){var e;return s(this,(function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=sn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),e=jl(t),[4,this.renderStack(e)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},i}(uA),pA=function(t){return t instanceof na||t instanceof ia||t instanceof ea&&t.type!==Zo&&t.type!==qo},fA=function(t,e){switch(t){case 0:return Ml(e);case 2:return Tl(e);default:return Rl(e)}},mA=function(t){switch(t){case 1:return"center";case 2:return"right";default:return"left"}},_A=["-apple-system","system-ui"],yA=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===_A.indexOf(t)})):t},wA=function(t){function i(e,i){var n=t.call(this,e,i)||this;return n.canvas=i.canvas?i.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=i,n.canvas.width=Math.floor(i.width*i.scale),n.canvas.height=Math.floor(i.height*i.scale),n.canvas.style.width=i.width+"px",n.canvas.style.height=i.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-i.x,-i.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),n}return e(i,t),i.prototype.render=function(t){return n(this,void 0,void 0,(function(){var e,i;return s(this,(function(n){switch(n.label){case 0:return e=Eo(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,vA(e)];case 1:return i=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=sn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},i}(uA),vA=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){e(n)},n.onerror=i,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},bA=function(){function t(t){var e=t.id,i=t.enabled;this.id=e,this.enabled=i,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,r([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,r([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,r([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,r([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),CA=function(){function t(e,i){var n;this.windowBounds=i,this.instanceName="#"+t.instanceCount++,this.logger=new bA({id:this.instanceName,enabled:e.logging}),this.cache=null!==(n=e.cache)&&void 0!==n?n:new fl(this,e)}return t.instanceCount=1,t}(),xA=function(t,e){return void 0===e&&(e={}),BA(t,e)};"undefined"!=typeof window&&pl.setContext(window);var BA=function(t,e){return n(void 0,void 0,void 0,(function(){var n,r,A,c,h,u,d,g,p,f,m,_,y,w,v,b,C,x,B,E,S,F,I,L,M,T,R,k,U,D,O,P,N,Q,H,G,V,z;return s(this,(function(s){switch(s.label){case 0:if(!t||"object"!=typeof t)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(r=n.defaultView))throw new Error("Document is not attached to a Window");return A={allowTaint:null!==(F=e.allowTaint)&&void 0!==F&&F,imageTimeout:null!==(I=e.imageTimeout)&&void 0!==I?I:15e3,proxy:e.proxy,useCORS:null!==(L=e.useCORS)&&void 0!==L&&L},c=i({logging:null===(M=e.logging)||void 0===M||M,cache:e.cache},A),h={windowWidth:null!==(T=e.windowWidth)&&void 0!==T?T:r.innerWidth,windowHeight:null!==(R=e.windowHeight)&&void 0!==R?R:r.innerHeight,scrollX:null!==(k=e.scrollX)&&void 0!==k?k:r.pageXOffset,scrollY:null!==(U=e.scrollY)&&void 0!==U?U:r.pageYOffset},u=new o(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),d=new CA(c,u),g=null!==(D=e.foreignObjectRendering)&&void 0!==D&&D,p={allowTaint:null!==(O=e.allowTaint)&&void 0!==O&&O,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:g,copyStyles:g},d.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),f=new qa(d,t,p),(m=f.clonedReferenceElement)?[4,f.toIFrame(n,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return _=s.sent(),y=wa(m)||_a(m)?l(m.ownerDocument):a(d,m),w=y.width,v=y.height,b=y.left,C=y.top,x=EA(d,m,e.backgroundColor),B={canvas:e.canvas,backgroundColor:x,scale:null!==(N=null!==(P=e.scale)&&void 0!==P?P:r.devicePixelRatio)&&void 0!==N?N:1,x:(null!==(Q=e.x)&&void 0!==Q?Q:0)+b,y:(null!==(H=e.y)&&void 0!==H?H:0)+C,width:null!==(G=e.width)&&void 0!==G?G:Math.ceil(w),height:null!==(V=e.height)&&void 0!==V?V:Math.ceil(v)},g?(d.logger.debug("Document cloned, using foreign object rendering"),[4,new wA(d,B).render(m)]):[3,3];case 2:return E=s.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+b+","+C+" with size "+w+"x"+v+" using computed rendering"),d.logger.debug("Starting DOM parsing"),S=la(d,m),x===S.styles.backgroundColor&&(S.styles.backgroundColor=un.TRANSPARENT),d.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),[4,new gA(d,B).render(S)];case 4:E=s.sent(),s.label=5;case 5:return(null===(z=e.removeContainer)||void 0===z||z)&&(qa.destroy(_)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,E]}}))}))},EA=function(t,e,i){var n=e.ownerDocument,s=n.documentElement?hn(t,getComputedStyle(n.documentElement).backgroundColor):un.TRANSPARENT,r=n.body?hn(t,getComputedStyle(n.body).backgroundColor):un.TRANSPARENT,o="string"==typeof i?hn(t,i):null===i?un.TRANSPARENT:4294967295;return e===n.documentElement?nn(s)?nn(r)?o:r:s:o};return xA}()}(aR)),aR.exports),AR=bh(lR);const cR="export-png-tool.js",hR="oltb-tool-button",uR="tools.exportPngTool",dR=Object.freeze({filename:"map-image-export",appendTime:!1,onInitiated:void 0,onClicked:void 0,onExported:void 0,onError:void 0});const gR="oltb-tool-button",pR="tools.scaleLineTool",fR=Object.freeze({units:"metric",onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),mR=rp.scaleLineTool,_R=Object.freeze({isActive:!1});const yR="oltb-tool-button",wR="tools.graticuleTool",vR=[1,4],bR=[0,0],CR=Object.freeze({color:"#3B4352E6",dashed:!0,width:2,showLabels:!0,wrapX:!0,onInitiated:void 0,onClicked:void 0,onBrowserStateCleared:void 0}),xR=rp.graticuleTool,BR=Object.freeze({isActive:!1});const ER=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],SR=(()=>{if("undefined"==typeof document)return!1;const t=ER[0],e={};for(const i of ER){const n=i?.[1];if(n in document){for(const[n,s]of i.entries())e[t[n]]=s;return e}}return!1})(),FR={change:SR.fullscreenchange,error:SR.fullscreenerror};let IR={request:(t=document.documentElement,e)=>new Promise(((i,n)=>{const s=()=>{IR.off("change",s),i()};IR.on("change",s);const r=t[SR.requestFullscreen](e);r instanceof Promise&&r.then(s).catch(n)})),exit:()=>new Promise(((t,e)=>{if(!IR.isFullscreen)return void t();const i=()=>{IR.off("change",i),t()};IR.on("change",i);const n=document[SR.exitFullscreen]();n instanceof Promise&&n.then(i).catch(e)})),toggle:(t,e)=>IR.isFullscreen?IR.exit():IR.request(t,e),onchange(t){IR.on("change",t)},onerror(t){IR.on("error",t)},on(t,e){const i=FR[t];i&&document.addEventListener(i,e,!1)},off(t,e){const i=FR[t];i&&document.removeEventListener(i,e,!1)},raw:SR};Object.defineProperties(IR,{isFullscreen:{get:()=>Boolean(document[SR.fullscreenElement])},element:{enumerable:!0,get:()=>document[SR.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[SR.fullscreenEnabled])}}),SR||(IR={isEnabled:!1});var LR=IR;const MR="my-location-tool.js",TR="oltb-tool-button",RR="oltb-func-btn",kR="oltb-info-window-marker",UR="tools.myLocationTool",DR="commons",OR=Object.freeze({title:"My Location",description:"This is the location that the browser was able to find. It might not be your actual location.",enableHighAccuracy:!0,timeout:1e4,markerLabelUseEllipsisAfter:20,markerLabelUseUpperCase:!1,onInitiated:void 0,onClicked:void 0,onLocationFound:void 0,onError:void 0});const PR="reset-north-tool.js",NR="oltb-tool-button",QR="tools.resetNorthTool",HR=Object.freeze({onInitiated:void 0,onClicked:void 0,onReset:void 0});const GR="fullscreen-tool.js",VR="oltb-tool-button",zR="tools.fullscreenTool",KR=Object.freeze({onInitiated:void 0,onClicked:void 0,onEnter:void 0,onLeave:void 0});const jR="coordinates-tool.js",WR="oltb-tool-button",$R="oltb-toolbox-section",YR="oltb-coordinates",XR="tools.coordinatesTool",qR="tools.coordinatesTool",ZR="commons",JR=Object.freeze({onInitiated:void 0,onClicked:void 0,onMapClicked:void 0,onBrowserStateCleared:void 0}),tk=rp.coordinatesTool,ek=Object.freeze({isActive:!1,coordinatesFormat:"DD"});const ik="translation-tool.js",nk="oltb-tool-button",sk="tools.translationTool",rk=Object.freeze({onInitiated:void 0,onClicked:void 0});const ok="tools.hiddenAboutTool";const ak="oltb-func-btn",lk="oltb-info-window-marker",Ak="commons",ck=Object.freeze({onAdded:void 0,onRemoved:void 0,onEdited:void 0});const hk="oltb-import-layer-modal",uk="modalExtensions.importLayerModal",dk=Object.freeze({onImport:void 0,onCancel:void 0});class gk extends Xm{#re=[];constructor(t={}){super({filename:"import-layer-modal.js",title:Mm.get(`${uk}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(dk),t),this.#oe()}getName(){return super.getName()}#oe(){const t=Mm.get(`${uk}.form`),e=[],i=[];Ox.getProjections().forEach((t=>{e.push({text:`${t.name} (${t.code})`,value:t.code}),i.push({text:`${t.name} (${t.code})`,value:t.code})}));const n=Jg.getConfig().projection,[s,r]=Rw({idPrefix:hk,idPostfix:"-feature-projection",text:t.featureProjection,options:e,value:n.default}),[o,a]=Rw({idPrefix:hk,idPostfix:"-data-projection",text:t.dataProjection,options:i,value:n.wgs84}),l=tp.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),A=tp.createElement({element:"button",text:t.import,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#$e({featureProjection:r.value.trim(),dataProjection:a.value.trim()})}}}),c=tp.createElement({element:"button",text:t.cancel,class:"oltb-dialog__btn oltb-btn "+(o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(l,[c,A]);const h=tp.createElement({element:"div",class:"oltb-modal__content"});tp.appendChildren(h,[s,o,l]),this.#re=[c,A],this.show(h)}#$e(t){this.close(),this.options.onImport&&this.options.onImport(t)}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#re}}const pk="import-vector-layer-tool.js",fk="oltb-tool-button",mk="tools.importVectorLayerTool",_k=Object.freeze({onInitiated:void 0,onClicked:void 0,onImported:void 0,onError:void 0});const yk="oltb-coordinates-modal",wk="modalExtensions.coordinateModal",vk=Object.freeze({onNavigate:void 0,onCancel:void 0});class bk extends Xm{#re=[];constructor(t={}){super({filename:"coordinate-model.js",title:Mm.get(`${wk}.title`),...t}),this.options=Fh.merge(Fh.cloneDeep(vk),t),this.#oe()}getName(){return super.getName()}#oe(){const t=Mm.get(`${wk}.form`),[e,i]=Mw({idPrefix:yk,idPostfix:"-lat",text:t.latitude,placeholder:"51.5072"}),[n,s]=Mw({idPrefix:yk,idPostfix:"-lon",text:t.longitude,placeholder:"0.1276"}),r=tp.createElement({element:"div",class:"oltb-d-flex oltb-justify-content-between oltb-mt-15"}),o=tp.createElement({element:"button",text:t.navigateTo,class:"oltb-dialog__btn oltb-btn oltb-btn--green-mid",attributes:{type:"button"},listeners:{click:()=>{this.#Ye([s.value.trim(),i.value.trim()])}}}),a=tp.createElement({element:"button",text:t.cancel,class:"oltb-dialog__btn oltb-btn "+(o_()?"oltb-btn--gray-mid":"oltb-btn--gray-dark"),attributes:{type:"button"},listeners:{click:this.#st.bind(this)}});tp.appendChildren(r,[a,o]);const l=tp.createElement({element:"div",class:"oltb-modal__content"}),A=tp.createElement({element:"label",text:t.description,class:"oltb-label oltb-mt-1"});tp.appendChildren(l,[e,n,A,r]),this.#re=[a,o],this.show(l)}#Ye(t){this.close(),this.options.onNavigate&&this.options.onNavigate(t)}#st(){this.close(),this.options.onCancel&&this.options.onCancel()}getButtons(){return this.#re}}const Ck="hidden-map-navigation-tool.js",xk="oltb-func-btn",Bk="oltb-info-window-marker",Ek="tools.hiddenMapNavigationTool",Sk="commons",Fk=Object.freeze({focusZoom:2}),Ik=Jg.getConfig().location.default,Lk=rp.mapData,Mk=Object.freeze({lon:Ik.lon,lat:Ik.lat,zoom:Ik.zoom,rotation:Ik.rotation}),Tk=Jg.getConfig().projection,Rk=Object.freeze({lon:18.0685,lat:59.3293,title:"Marker",description:"",icon:"geoMarker.filled",iconFill:"#FFFFFFFF",iconStroke:"#FFFFFFFF",markerFill:"#0166A5FF",markerStroke:"#0166A566",layerName:"URL Marker",label:"Marker",labelFill:"#FFFFFFFF",labelStroke:"#3B4352CC",labelStrokeWidth:8,labelFont:"14px Calibri",labelUseEllipsisAfter:20,projection:Tk.wgs84,zoom:8});const kk=Object.freeze({HiddenMarkerTool:class extends $x{constructor(t={}){super({filename:"hidden-marker-tool.js"}),this.iconMarkerModal=void 0,this.options=Fh.merge(Fh.cloneDeep(ck),t),this.createIcon=zm({path:Gm.plusLarge.stroked}),this.#Xe(),this.attachGlobalListeners()}attachGlobalListeners(){this.onWindowFeatureEditedBind=this.#qe.bind(this),this.onWindowFeatureRemovedBind=this.#Ze.bind(this),window.addEventListener(ep.custom.featureEdited,this.onWindowFeatureEditedBind),window.addEventListener(ep.custom.featureRemoved,this.onWindowFeatureRemovedBind)}detachGlobalListeners(){window.removeEventListener(ep.custom.featureEdited,this.onWindowFeatureEditedBind),window.removeEventListener(ep.custom.featureRemoved,this.onWindowFeatureRemovedBind)}getName(){return super.getName()}#Xe(){iB.addItem({icon:this.createIcon,i18nKey:"tools.hiddenMarkerTool.contextItems.createMarker",fn:this.#Je.bind(this)}),iB.addItem({})}#Je(t,e,i){this.doShowIconMarkerModal(e)}#qe(t){this.options.onEdited&&this.options.onEdited(t.detail.before,t.detail.after)}#Ze(t){this.options.onRemoved&&this.options.onRemoved(t.detail.feature)}#ti(t){this.doAddIconMarker(t)}doShowIconMarkerModal(t){this.iconMarkerModal||(this.iconMarkerModal=new Qw({coordinates:t,onCreate:t=>{this.#ti(t)},onClose:()=>{this.iconMarkerModal=void 0}}))}doAddMarkerToMap(t){gw.getActiveFeatureLayer({fallback:"Markers"}).getLayer().getSource().addFeature(t)}doAddIconMarker(t){const e=[Number(t.longitude),Number(t.latitude)],i=Mm.get(`${Ak}.titles`),n=ct(e),s={title:t.title,content:`\n                <p>${t.description}</p>\n            `,footer:`\n                <span class="oltb-info-window__coordinates">${n}</span>\n                <div class="oltb-info-window__buttons-wrapper">\n                    <button class="${ak} ${ak}--delete oltb-tippy" data-oltb-i18n="${Ak}.titles.delete" title="${i.delete}" id="${lk}-remove"></button>\n                    <button class="${ak} ${ak}--crosshair oltb-tippy" data-oltb-i18n="${Ak}.titles.copyCoordinates" title="${i.copyCoordinates}" id="${lk}-copy-coordinates" data-oltb-coordinates="${n}"></button>\n                    <button class="${ak} ${ak}--copy oltb-tippy" data-oltb-i18n="${Ak}.titles.copyText" title="${i.copyText}" id="${lk}-copy-text" data-oltb-copy="${t.title}, ${t.description}"></button>\n                    <button class="${ak} ${ak}--edit oltb-tippy" data-oltb-i18n="${Ak}.titles.edit" title="${i.edit}" id="${lk}-edit"></button>\n                    <button class="${ak} ${ak}--layer oltb-tippy" data-oltb-i18n="${Ak}.titles.showLayer" title="${i.showLayer}" id="${lk}-show-layer"></button>\n                </div>\n            `},r=py.generateIconMarker({lon:e[0],lat:e[1],title:t.title,description:t.description,infoWindow:s,marker:{fill:t.markerFill,stroke:t.markerStroke},icon:{key:t.icon,fill:t.iconFill,stroke:t.iconStroke},label:{text:t.label,fill:t.labelFill,stroke:t.labelStroke,strokeWidth:t.labelStrokeWidth}});return this.doAddMarkerToMap(r),this.options.onAdded&&this.options.onAdded(r),r}},HiddenMapNavigationTool:class extends $x{constructor(t={}){super({filename:Ck}),this.options=Fh.merge(Fh.cloneDeep(Fk),t),this.coordinatesModal=void 0,this.localStorage=sp.getAndMergeStateObject(Lk,Mk),this.copyIcon=zm({path:Gm.copy.stroked}),this.coordinatesIcon=zm({path:Gm.crosshair.stroked}),this.moveCenterIcon=zm({path:Gm.arrowsMove.stroked}),this.focusHereIcon=zm({path:Gm.aspectRatio.stroked}),this.#Xe(),this.attachGlobalListeners()}attachGlobalListeners(){this.onOLTBReadyBind=this.#O.bind(this),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind)}detachGlobalListeners(){window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind)}getName(){return super.getName()}#Xe(){iB.addItem({icon:this.copyIcon,i18nKey:`${Ek}.contextItems.copyCoordinates`,fn:this.#ei.bind(this)}),iB.addItem({}),iB.addItem({icon:this.coordinatesIcon,i18nKey:`${Ek}.contextItems.navigateToCoordinates`,fn:this.#ii.bind(this)}),iB.addItem({icon:this.moveCenterIcon,i18nKey:`${Ek}.contextItems.centerMap`,fn:this.#ni.bind(this)}),iB.addItem({icon:this.focusHereIcon,i18nKey:`${Ek}.contextItems.focusMap`,fn:this.#si.bind(this)}),iB.addItem({})}#ei(t,e,i){this.doCopyCoordinatesAsync(e)}#ii(t,e,i){this.doShowCoordinatesModal(t)}#ni(t,e,i){qx({map:t,coordinates:e,zoom:t.getView().getZoom()})}#si(t,e,i){qx({map:t,coordinates:e,zoom:this.options.focusZoom})}#O(t){const e=this.getMap();e&&(e.on(ep.openLayers.moveEnd,this.#ne.bind(this)),this.doDetectUrlMarker())}#ri(t){return(t=t.toUpperCase()).startsWith("EPSG:")||(t=`EPSG:${t}`),t}#oi(t){return t.startsWith("#")?t:`#${t}`}#ai(t){const e=Ox.hasProjection(t);return e||(rg.logError(Ck,"hasProjection",{message:"Missing projection definition",projection:t}),Nm.error({i18nKey:`${Ek}.toasts.errors.missingProjection`})),e}#li(t){this.getMap()&&this.doParseUrlMarker(t)}#ne(t){const e=this.getMap();e&&this.setLastPosition(e)}setLastPosition(t){const e=t.getView(),i=Be(e.getCenter());this.localStorage.lon=i[0],this.localStorage.lat=i[1],this.localStorage.zoom=e.getZoom(),this.localStorage.rotation=e.getRotation(),sp.setStateObject(Lk,this.localStorage)}async doCopyCoordinatesAsync(t){const e=ct(t);try{await Xw(e),Nm.info({i18nKey:`${Ek}.toasts.infos.coordinatesCopied`,autoremove:!0})}catch(t){rg.logError(Ck,"doCopyCoordinatesAsync",{message:"Failed to copy coordinates",error:t}),Nm.error({i18nKey:`${Ek}.toasts.errors.coordinatesCopy`})}}doDetectUrlMarker(){const t=Jg.getConfig().urlParameter.marker,e=F_.getParameter(t,!1);e&&this.#li(e)}doParseUrlMarker(t){const e=this.getMap();if(e)try{const i=JSON.parse(t),n=Fh.merge(Fh.cloneDeep(Rk),i);rg.logDebug(Ck,"doParseUrlMarker",n);const s=[Number(n.lon),Number(n.lat)],r=this.doAddIconMarker(n,s);this.doFocusMarker(e,r,s,Jg.getConfig().marker.focusZoom)}catch(t){rg.logError(Ck,"doParseUrlMarker",{message:"Failed to parse URL Marker",error:t}),Nm.error({i18nKey:`${Ek}.toasts.errors.parseUrlMarker`})}}doFocusMarker(t,e,i,n){qx({map:t,coordinates:i,zoom:n,onDone:t=>{Av.tryPulseAnimation(e),Av.showOverlay(e,xe(i))}})}doAddMarkerToMap(t,e){gw.addFeatureLayer({name:e}).getLayer().getSource().addFeature(t)}doAddIconMarker(t,e){if(t.markerFill=this.#oi(t.markerFill),t.markerStroke=this.#oi(t.markerStroke),t.projection=this.#ri(t.projection),!this.#ai(t.projection))return;const i=Le(e,t.projection,Jg.getConfig().projection.wgs84),n=Mm.get(`${Sk}.titles`),s=ct(i),r={title:t.title,content:`\n                <p>${t.description}</p>\n            `,footer:`\n                <span class="oltb-info-window__coordinates">${s}</span>\n                <div class="oltb-info-window__buttons-wrapper">\n                    <button class="${xk} ${xk}--delete oltb-tippy" data-oltb-i18n="${Sk}.titles.delete" title="${n.delete}" id="${Bk}-remove"></button>\n                    <button class="${xk} ${xk}--crosshair oltb-tippy" data-oltb-i18n="${Sk}.titles.copyCoordinates" title="${n.copyCoordinates}" id="${Bk}-copy-coordinates" data-oltb-coordinates="${s}"></button>\n                    <button class="${xk} ${xk}--copy oltb-tippy" data-oltb-i18n="${Sk}.titles.copyText" title="${n.copyText}" id="${Bk}-copy-text" data-oltb-copy="${t.title}, ${t.description}"></button>\n                    <button class="${xk} ${xk}--layer oltb-tippy" data-oltb-i18n="${Sk}.titles.showLayer" title="${n.showLayer}" id="${Bk}-show-layer"></button>\n                </div>\n            `},o=py.generateIconMarker({lon:i[0],lat:i[1],title:t.title,description:t.description,infoWindow:r,marker:{fill:t.markerFill,stroke:t.markerStroke},icon:{key:t.icon,fill:t.iconFill,stroke:t.iconStroke},label:{text:t.label,font:t.labelFont,fill:t.labelFill,stroke:t.labelStroke,strokeWidth:t.labelStrokeWidth}});return this.doAddMarkerToMap(o,t.layerName),o}doShowCoordinatesModal(t){this.coordinatesModal||(this.coordinatesModal=new bk({onNavigate:e=>{qx({map:t,coordinates:e,zoom:t.getView().getZoom()})},onClose:()=>{this.coordinatesModal=void 0}}))}},HomeTool:class extends $x{constructor(t={}){super({filename:"home-tool.js"}),this.icon=zm({path:Gm.house.stroked,class:`${sB}__icon`});const e=Mm.get(rB),i=tp.createElement({element:"button",html:this.icon,class:sB,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.homeTool})`,"data-tippy-content-post":`(${Zx.homeTool})`,"data-oltb-i18n":`${rB}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[i]),this.button=i,this.options=Fh.merge(Fh.cloneDeep(aB),t),this.localStorage=sp.getAndMergeStateObject(lB,AB),this.#Xe(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#Xe(){iB.addItem({icon:this.icon,i18nKey:`${rB}.contextItems.setHome`,fn:this.#Ai.bind(this)})}momentaryActivation(){this.doNavigateHome()}#Z(t){nB(t,Zx.homeTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.doNavigateHome(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#Ai(t,e,i){this.doCreateNewHome(e)}getZoom(){return this.localStorage.zoom!==this.options.zoom?this.localStorage.zoom:this.options.zoom}getRotation(){return this.localStorage.rotation!==this.options.rotation?this.localStorage.rotation:this.options.rotation}getLocation(){return this.localStorage.lon!==this.options.lon||this.localStorage.lat!==this.options.lat?[this.localStorage.lon,this.localStorage.lat]:[this.options.lon,this.options.lat]}doClearState(){this.localStorage=Fh.cloneDeep(AB),sp.setStateObject(lB,AB)}doCreateNewHome(t){const e=this.getMap();if(!e)return;const i=e.getView(),n=i.getZoom(),s=i.getRotation();this.localStorage.zoom=n,this.localStorage.rotation=s,this.localStorage.lon=t[0],this.localStorage.lat=t[1],sp.setStateObject(lB,this.localStorage),Nm.success({i18nKey:`${rB}.toasts.infos.setHomeLocation`,autoremove:!0})}doNavigateHome(){const t=this.getMap();if(!t)return;const e=this.getZoom(),i=this.getRotation(),n=this.getLocation();qx({map:t,coordinates:n,zoom:e,rotation:i,onDone:t=>{this.options.onNavigatedHome&&this.options.onNavigatedHome(t)}})}},ZoomInTool:class extends $x{constructor(t={}){super({filename:"zoom-in-tool.js"});const e=zm({path:Gm.zoomIn.stroked,class:`${gM}__icon`}),i=Mm.get(pM),n=tp.createElement({element:"button",html:e,class:gM,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.zoomInTool})`,"data-tippy-content-post":`(${Zx.zoomInTool})`,"data-oltb-i18n":`${pM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.options=Fh.merge(Fh.cloneDeep(fM),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){const t=this.getMap();t&&this.doZoomIn(t)}#Z(t){nB(t,Zx.zoomInTool)&&this.onClickTool(t)}doZoomIn(t){const e=t.getView(),i=Be(e.getCenter()),n=e.getZoom(),s=e.getConstrainedZoom(n+this.options.delta);qx({map:t,coordinates:i,zoom:s,onDone:t=>{this.options.onZoomed&&this.options.onZoomed(t)}})}},ZoomOutTool:class extends $x{constructor(t={}){super({filename:"zoom-out-tool.js"});const e=zm({path:Gm.zoomOut.stroked,class:`${TM}__icon`}),i=Mm.get(RM),n=tp.createElement({element:"button",html:e,class:TM,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.zoomOutTool})`,"data-tippy-content-post":`(${Zx.zoomOutTool})`,"data-oltb-i18n":`${RM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.options=Fh.merge(Fh.cloneDeep(kM),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){const t=this.getMap();t&&this.doZoomOut(t)}#Z(t){nB(t,Zx.zoomOutTool)&&this.onClickTool(t)}doZoomOut(t){const e=t.getView(),i=Be(e.getCenter()),n=e.getZoom(),s=e.getConstrainedZoom(n+this.options.delta);qx({map:t,coordinates:i,zoom:s,onDone:t=>{this.options.onZoomed&&this.options.onZoomed(t)}})}},ZoomboxTool:class extends $x{constructor(t={}){super({filename:"zoombox-tool.js"});const e=zm({path:Gm.boundingBoxCircles.stroked,class:`${UM}__icon`}),i=Mm.get(OM),n=tp.createElement({element:"button",html:e,class:UM,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.zoomboxTool})`,"data-tippy-content-post":`(${Zx.zoomboxTool})`,"data-oltb-i18n":`${OM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.isSpaceKeyPressed=!1,this.tooltip=void 0,this.options=Fh.merge(Fh.cloneDeep(NM),t),this.localStorage=sp.getAndMergeStateObject(QM,HM),this.interactionDragZoom=this.#ci(),this.interactionDragZoom.on(ep.openLayers.boxStart,this.#hi.bind(this)),this.interactionDragZoom.on(ep.openLayers.boxEnd,this.#ui.bind(this)),this.interactionDragZoom.on(ep.openLayers.boxDrag,this.#di.bind(this)),this.interactionDragZoom.on(ep.openLayers.boxCancel,this.#gi.bind(this)),this.interactionDragZoom.on(ep.openLayers.error,this.#pi.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onWindowKeyDownBind=this.#fi.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.browser.keyDown,this.onWindowKeyDownBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.browser.keyDown,this.onWindowKeyDownBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.getMap()&&(k_.setActiveTool(this),this.doAddDragZoom(),this.doAddTooltip(),this.isActive=!0,this.button.classList.add(`${UM}--active`),this.localStorage.isActive=!0,sp.setStateObject(QM,this.localStorage))}deactivateTool(){this.getMap()&&(k_.removeActiveTool(),this.doRemoveDragZoom(),this.doRemoveTooltip(),this.isActive=!1,this.button.classList.remove(`${UM}--active`),this.localStorage.isActive=!1,sp.setStateObject(QM,this.localStorage))}deselectTool(){this.deactivateTool()}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){this.isSpaceKeyPressed=!1,this.interactionDragZoom[PM]=!1,nB(t,Zx.zoomboxTool)&&this.onClickTool(t)}#fi(t){t.key===Qm.valueSpace&&(this.isSpaceKeyPressed=!0),t.ctrlKey&&(this.interactionDragZoom[PM]=!0)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#hi(t){this.doBoxDragStart(t)}#ui(t){this.doBoxDragEnd(t)}#di(t){this.doBoxDragDrag(t)}#gi(t){this.doBoxDragCancel(t)}#pi(t){this.doBoxDragError(t)}#ci(){const t=Jg.getConfig().animationDuration.normal;return new As({duration:t,condition:t=>Pi&&!this.isSpaceKeyPressed,out:!1})}doClearState(){this.localStorage=Fh.cloneDeep(HM),sp.setStateObject(QM,HM)}doBoxDragStart(t){this.options.onStart&&this.options.onStart(t)}doBoxDragEnd(t){this.options.onEnd&&this.options.onEnd(t)}doBoxDragDrag(t){this.options.onDrag&&this.options.onDrag(t)}doBoxDragCancel(t){this.options.onCancel&&this.options.onCancel(t)}doBoxDragError(t){this.options.onError&&this.options.onError(t)}doAddDragZoom(){this.getMap().addInteraction(this.interactionDragZoom)}doRemoveDragZoom(){this.getMap().removeInteraction(this.interactionDragZoom)}doAddTooltip(){const t=Mm.get(`${OM}.tooltips`);this.tooltip=Sw.push(DM),this.tooltip.innerHTML=t.dragToZoom}doRemoveTooltip(){Sw.pop(DM),this.tooltip=void 0}},FullscreenTool:class extends $x{constructor(t={}){super({filename:GR}),this.enterFullscreenIcon=zm({path:Gm.fullscreen.stroked,class:`${VR}__icon`}),this.exitFullscreenIcon=zm({path:Gm.fullscreenExit.stroked,class:`${VR}__icon`});const e=Mm.get(zR),i=tp.createElement({element:"button",html:this.getToolIcon(),class:VR,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.fullscreenTool})`,"data-tippy-content-post":`(${Zx.fullscreenTool})`,"data-oltb-i18n":`${zR}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});tp.appendChildren(this.element,[i]),this.button=i,this.isActive=!1,this.listenerKeys=[],this.options=Fh.merge(Fh.cloneDeep(KR),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onFullScreenChangeBind=this.#mi.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.document.addEventListener(ep.browser.fullScreenChange,this.onFullScreenChangeBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.document.removeEventListener(ep.browser.fullScreenChange,this.onFullScreenChangeBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.isFullScreenSupportedByBrowser()&&(LR.isFullscreen?this.doRequestExitFullScreen():this.doRequestEnterFullScreen())}#Z(t){nB(t,Zx.fullscreenTool)&&this.onClickTool(t)}#mi(t){this.doFullScreenChange(t)}isFullScreenSupportedByBrowser(){return LR.isEnabled||(rg.logError(GR,"isFullScreenSupportedByBrowser",{title:"Error",error:"Fullscreen is not supported by this browser"}),Nm.error({i18nKey:`${zR}.toasts.errors.missingFullScreenSupport`})),LR.isEnabled}getToolIcon(){return LR.isFullscreen?this.exitFullscreenIcon:this.enterFullscreenIcon}doRequestExitFullScreen(){return LR.exit()}doRequestEnterFullScreen(){const t=this.getMap();if(!t)return;const e=t.getTargetElement();return LR.request(e)}doUpdateMapSize(){const t=this.getMap();t&&t.updateSize()}doFullScreenChange(t){window.document.fullscreenElement?(this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.exitFullscreenIcon),this.options.onEnter&&this.options.onEnter(t)):(this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",this.enterFullscreenIcon),this.options.onLeave&&this.options.onLeave(t)),this.isActive=!this.isActive,this.button.classList.toggle(`${VR}--active`)}},ExportPngTool:class extends $x{constructor(t={}){super({filename:cR});const e=zm({path:Gm.image.mixed,class:`${hR}__icon`}),i=Mm.get(uR),n=tp.createElement({element:"button",html:e,class:hR,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.exportPngTool})`,"data-tippy-content-post":`(${Zx.exportPngTool})`,"data-oltb-i18n":`${uR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.options=Fh.merge(Fh.cloneDeep(dR),t),this.#_i(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#_i(){const t=Jg.getConfig().urlParameter.debug;this.isDebug="true"===F_.getParameter(t)}momentaryActivation(){this.doRenderOnce()}#O(t){const e=lp.getMapElement().querySelector(".ol-attribution");e&&e.setAttribute("data-html2canvas-ignore","true")}#Z(t){nB(t,Zx.exportPngTool)&&this.onClickTool(t)}async#yi(){const t=this.getMap();t&&await this.doRenderCompleteAsync(t)}#wi(t,e){return tp.createElement({element:"canvas",attributes:{width:t,height:e}})}getCanvasMatrix(t){return t.style.transform.match(/^matrix\(([^(]*)\)$/)[1].split(",").map(Number)}async doRenderCompleteAsync(t){try{const e=lp.getMapElement(),i=t.getSize(),n=this.#wi(i[0],i[1]),s=n.getContext("2d"),r=1,o=e.querySelector(".ol-layer canvas:not(.ol-overviewmap-map canvas)"),a=o.parentNode.style.opacity;s.globalAlpha=""===a?r:Number(a);const l=this.getCanvasMatrix(o);CanvasRenderingContext2D.prototype.setTransform.apply(s,l),s.drawImage(o,0,0);const A=e.querySelector(".ol-overlaycontainer-stopevent:not(.ol-overviewmap-map .ol-overlaycontainer-stopevent)"),c=await AR(A,{scrollX:0,scrollY:0,backgroundColor:null,logging:this.isDebug});s.drawImage(c,0,0),this.doDownloadCanvas(n)}catch(t){this.options.onError&&this.options.onError(t),rg.logError(cR,"doRenderCompleteAsync",{message:"Failed to export canvas image",error:t}),Nm.error({i18nKey:`${uR}.toasts.errors.renderCanvas`})}}doRenderOnce(){const t=this.getMap();t&&(t.once(ep.openLayers.renderComplete,this.#yi.bind(this)),t.renderSync())}doDownloadCanvas(t){const e=Jg.getConfig().localization.active,i=this.options.appendTime?`-${(new Date).toLocaleString(e)}`:"",n=`${this.options.filename}${i}.png`,s=window.navigator.msSaveBlob?t.msToBlob():t.toDataURL();window.navigator.msSaveBlob?window.navigator.msSaveBlob(s,n):aF(n,s),this.options.onExported&&this.options.onExported(n,s)}},DrawTool:class extends $x{constructor(t={}){super({filename:"draw-tool.js"});const e=zm({path:Gm.vectorPen.mixed,class:`${hB}__icon`}),i=Mm.get(gB),n=tp.createElement({element:"button",html:e,class:hB,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.drawTool})`,"data-tippy-content-post":`(${Zx.drawTool})`,"data-oltb-i18n":`${gB}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.intersectedFeatures=[],this.options=Fh.merge(Fh.cloneDeep(fB),t),this.localStorage=sp.getAndMergeStateObject(mB,_B),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${dB}-toolbox`),this.#bi(),this.uiRefToolType=this.uiRefToolboxSection.querySelector(`#${dB}-type`),this.uiRefToolType.addEventListener(ep.browser.change,this.updateTool.bind(this)),this.uiRefIntersectionEnable=this.uiRefToolboxSection.querySelector(`#${dB}-intersection-enable`),this.uiRefIntersectionEnable.addEventListener(ep.browser.change,this.updateTool.bind(this)),this.uiRefFillColor=this.uiRefToolboxSection.querySelector(`#${dB}-fill-color`),this.uiRefFillColor.addEventListener(ep.custom.colorChange,this.updateTool.bind(this)),this.uiRefStrokeWidth=this.uiRefToolboxSection.querySelector(`#${dB}-stroke-width`),this.uiRefStrokeWidth.addEventListener(ep.browser.change,this.updateTool.bind(this)),this.uiRefStrokeColor=this.uiRefToolboxSection.querySelector(`#${dB}-stroke-color`),this.uiRefStrokeColor.addEventListener(ep.custom.colorChange,this.updateTool.bind(this)),this.#Ci(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${gB}.toolbox`),e=Mm.get(`${pB}.titles`),i=`\n            <div id="${dB}-toolbox" class="${uB}">\n                <div class="${uB}__header oltb-toggleable" data-oltb-toggleable-target="${dB}-toolbox-collapsed">\n                    <h4 class="${uB}__title" data-oltb-i18n="${gB}.toolbox.titles.draw">${t.titles.draw}</h4>\n                    <span class="${uB}__icon oltb-tippy" data-oltb-i18n="${pB}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${uB}__groups" id="${dB}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${uB}__group">\n                        <label class="oltb-label" for="${dB}-type" data-oltb-i18n="${gB}.toolbox.groups.shapes.title">${t.groups.shapes.title}</label>\n                        <select id="${dB}-type" class="oltb-select">\n                            <option value="Circle" data-oltb-i18n="${gB}.toolbox.groups.shapes.circle">${t.groups.shapes.circle}</option>\n                            <option value="Square" data-oltb-i18n="${gB}.toolbox.groups.shapes.square">${t.groups.shapes.square}</option>\n                            <option value="Rectangle" data-oltb-i18n="${gB}.toolbox.groups.shapes.rectangle">${t.groups.shapes.rectangle}</option>\n                            <option value="LineString" data-oltb-i18n="${gB}.toolbox.groups.shapes.lineString">${t.groups.shapes.lineString}</option>\n                            <option value="Point" data-oltb-i18n="${gB}.toolbox.groups.shapes.point">${t.groups.shapes.point}</option>\n                            <option value="Polygon" data-oltb-i18n="${gB}.toolbox.groups.shapes.polygon">${t.groups.shapes.polygon}</option>\n                        </select>\n                    </div>\n                    <div class="${uB}__group ${uB}__group--split-group">\n                        <div class="${uB}__group-part">\n                            <label class="oltb-label" for="${dB}-intersection-enable" data-oltb-i18n="${gB}.toolbox.groups.intersectable.title">${t.groups.intersectable.title}</label>\n                            <select id="${dB}-intersection-enable" class="oltb-select">\n                                <option value="false" data-oltb-i18n="${gB}.toolbox.groups.intersectable.false">${t.groups.intersectable.false}</option>\n                                <option value="true" data-oltb-i18n="${gB}.toolbox.groups.intersectable.true">${t.groups.intersectable.true}</option>\n                            </select>\n                        </div>\n                        <div class="${uB}__group-part">\n                            <label class="oltb-label" for="${dB}-stroke-width" data-oltb-i18n="${gB}.toolbox.groups.strokeWidth.title">${t.groups.strokeWidth.title}</label>\n                            <select id="${dB}-stroke-width" class="oltb-select">\n                                <option value="1">1</option>\n                                <option value="1.25">1.25</option>\n                                <option value="1.5">1.5</option>\n                                <option value="2">2</option>\n                                <option value="2.5">2.5</option>\n                                <option value="3">3</option>\n                                <option value="4">4</option>\n                                <option value="5">5</option>\n                                <option value="6">6</option>\n                                <option value="7">7</option>\n                                <option value="8">8</option>\n                                <option value="9">9</option>\n                                <option value="10">10</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class="${uB}__group ${uB}__group--split-group">\n                        <div class="${uB}__group-part">\n                            <label class="oltb-label" for="${dB}-stroke-color" data-oltb-i18n="${gB}.toolbox.groups.strokeColor.title">${t.groups.strokeColor.title}</label>\n                            <div id="${dB}-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${dB}-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">\n                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>\n                            </div>\n                        </div>\n                        <div class="${uB}__group-part">\n                            <label class="oltb-label" for="${dB}-fill-color" data-oltb-i18n="${gB}.toolbox.groups.fillColor.title">${t.groups.fillColor.title}</label>\n                            <div id="${dB}-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${dB}-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">\n                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#Ci(){this.uiRefToolType.value=this.localStorage.toolType,this.uiRefStrokeWidth.value=this.localStorage.strokeWidth,this.uiRefIntersectionEnable.value="false"}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${uB}--show`),this.button.classList.add(`${hB}--active`),k_.setActiveTool(this),this.shouldAlwaysCreateNewLayer()&&gw.addFeatureLayer({name:Mm.get(`${gB}.layers.defaultName`)}),wm.dispatchEvent([this.uiRefToolType],ep.browser.change),this.localStorage.isActive=!0,sp.setStateObject(mB,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.getMap()&&(this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${uB}--show`),this.button.classList.remove(`${hB}--active`),this.doRemoveDrawInteraction(),k_.removeActiveTool(),bw.removeSnap(),this.localStorage.isActive=!1,sp.setStateObject(mB,this.localStorage))}deselectTool(){this.deactivateTool()}updateTool(){this.localStorage.toolType=this.uiRefToolType.value,this.localStorage.strokeWidth=this.uiRefStrokeWidth.value,this.localStorage.fillColor=this.uiRefFillColor.getAttribute("data-oltb-color"),this.localStorage.strokeColor=this.uiRefStrokeColor.getAttribute("data-oltb-color"),sp.setStateObject(mB,this.localStorage),this.isIntersectionModeAvailable()?(this.uiRefIntersectionEnable.value="false",this.uiRefIntersectionEnable.disabled=!0):this.uiRefIntersectionEnable.disabled=!1,this.doUpdateTool(this.uiRefToolType.value,this.uiRefStrokeWidth.value,this.uiRefFillColor.getAttribute("data-oltb-color"),this.uiRefStrokeColor.getAttribute("data-oltb-color"))}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){const e=t.key;e===Qm.valueEscape?this.interactionDraw&&this.interactionDraw.abortDrawing():t.ctrlKey&&e===Qm.valueZ?this.interactionDraw&&this.interactionDraw.removeLastPoint():nB(t,Zx.drawTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.doClearColors(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#Bi(t){this.doDrawStart(t)}#Ei(t){this.doDrawEnd(t)}#Si(t){this.doDrawAbort(t)}#Fi(t){this.doDrawError(t)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}shouldAlwaysCreateNewLayer(){return yw.getSetting(E_.alwaysNewLayers)}isIntersectionModeAvailable(){return this.uiRefToolType.value===dy.LineString||this.uiRefToolType.value===dy.Point}isIntersectionEnabled(){return"true"===this.uiRefIntersectionEnable.value.toLowerCase()}#Ii(t,e){return new Fc({type:t,style:this.style,stopClick:!0,geometryFunction:e})}#Li(t,e,i){return new zo({image:new No({fill:new Qo({color:e}),stroke:new Vo({color:i,width:t}),radius:this.options.circleSize}),fill:new Qo({color:e}),stroke:new Vo({color:i,width:t})})}doClearState(){this.localStorage=Fh.cloneDeep(_B),sp.setStateObject(mB,_B)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(mB,this.localStorage)}))}doDrawStart(t){this.options.onStart&&this.options.onStart(t)}doDrawEnd(t){const e=gw.getActiveFeatureLayer({fallback:Mm.get(`${gB}.layers.defaultName`)});this.isIntersectionEnabled()?this.doDrawEndIntersection(t):this.doDrawEndNormal(e,t)}doDrawEndNormal(t,e){const i=e.feature;i&&(i.setStyle(this.style),i.setProperties({oltb:{type:$_.type.drawing}}),gw.addFeatureToLayer(i,t,`${gB}.toasts.infos.drawInHiddenLayer`)),this.options.onEnd&&this.options.onEnd(e)}doDrawEndIntersection(t){const e=t.feature.getGeometry(),i=Xg.toolbar.id;gw.getFeatureLayers().forEach((t=>{const n=t.getLayer();if(!n.getVisible())return;n.getSource().forEachFeatureIntersectingExtent(e.getExtent(),(t=>{const e=t.getProperties(i)?.type,n=t.getGeometry();cB(e,n)&&this.intersectedFeatures.push(t)}))})),this.intersectedFeatures.forEach((t=>{const i=t.getGeometry().getCoordinates(),n=new jn(i.slice(0,i.length)),s=new Fn(e.getCoordinates()[0]);n.appendLinearRing(s),t.setGeometry(n)})),0===this.intersectedFeatures.length&&Nm.info({i18nKey:`${gB}.toasts.infos.missingIntersections`,autoremove:!0}),this.options.onIntersected&&this.options.onIntersected(t,this.intersectedFeatures),this.intersectedFeatures=[]}doDrawAbort(t){this.options.onAbort&&this.options.onAbort(t)}doDrawError(t){this.options.onError&&this.options.onError(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doClearColors(){this.uiRefFillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.uiRefFillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.uiRefStrokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.uiRefStrokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}doUpdateTool(t,e,i,n){if(!this.getMap())return;this.interactionDraw&&(this.doRemoveDrawInteraction(),bw.removeSnap()),this.style=this.#Li(e,i,n);const[s,r]=function(t){if(!(t in dy))return["Polygon",void 0];if(!(t in uy))return[t,void 0];const e=uy[t];return[e.type,(0,e.callback)(e.parameters)]}(t);this.interactionDraw=this.#Ii(s,r),this.interactionDraw.on(ep.openLayers.drawStart,this.#Bi.bind(this)),this.interactionDraw.on(ep.openLayers.drawEnd,this.#Ei.bind(this)),this.interactionDraw.on(ep.openLayers.drawAbort,this.#Si.bind(this)),this.interactionDraw.on(ep.openLayers.error,this.#Fi.bind(this)),this.doAddDrawInteraction(),bw.addSnap(this)}doAddDrawInteraction(){this.getMap().addInteraction(this.interactionDraw)}doRemoveDrawInteraction(){this.getMap().removeInteraction(this.interactionDraw)}},MeasureTool:class extends $x{constructor(t={}){super({filename:"measure-tool.js"});const e=zm({path:Gm.rulers.mixed,class:`${mM}__icon`}),i=Mm.get(vM),n=tp.createElement({element:"button",html:e,class:mM,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.measureTool})`,"data-tippy-content-post":`(${Zx.measureTool})`,"data-oltb-i18n":`${vM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(CM),t),this.localStorage=sp.getAndMergeStateObject(xM,BM),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${yM}-toolbox`),this.#bi(),this.uiRefToolType=this.uiRefToolboxSection.querySelector(`#${yM}-type`),this.uiRefToolType.addEventListener(ep.browser.change,this.updateTool.bind(this)),this.uiRefFillColor=this.uiRefToolboxSection.querySelector(`#${yM}-fill-color`),this.uiRefFillColor.addEventListener(ep.custom.colorChange,this.updateTool.bind(this)),this.uiRefStrokeColor=this.uiRefToolboxSection.querySelector(`#${yM}-stroke-color`),this.uiRefStrokeColor.addEventListener(ep.custom.colorChange,this.updateTool.bind(this)),this.#Ci(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${vM}.toolbox`),e=Mm.get(`${bM}.titles`),i=`\n            <div id="${yM}-toolbox" class="${_M}">\n                <div class="${_M}__header oltb-toggleable" data-oltb-toggleable-target="${yM}-toolbox-collapsed">\n                    <h4 class="${_M}__title" data-oltb-i18n="${vM}.toolbox.titles.measure">${t.titles.measure}</h4>\n                    <span class="${_M}__icon oltb-tippy" data-oltb-i18n="${bM}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${_M}__groups" id="${yM}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${_M}__group">\n                        <label class="oltb-label" for="${yM}-type" data-oltb-i18n="${vM}.toolbox.groups.type.title">${t.groups.type.title}</label>\n                        <select id="${yM}-type" class="oltb-select">\n                            <option value="LineString" data-oltb-i18n="${vM}.toolbox.groups.type.lineString">${t.groups.type.lineString}</option>\n                            <option value="Polygon" data-oltb-i18n="${vM}.toolbox.groups.type.polygon">${t.groups.type.polygon}</option>\n                        </select>\n                    </div>\n                    <div class="${_M}__group ${_M}__group--split-group">\n                        <div class="${_M}__group-part">\n                            <label class="oltb-label" for="${yM}-stroke-color" data-oltb-i18n="${vM}.toolbox.groups.strokeColor.title">${t.groups.strokeColor.title}</label>\n                            <div id="${yM}-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${yM}-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">\n                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>\n                            </div>\n                        </div>\n                        <div class="${_M}__group-part">\n                            <label class="oltb-label" for="${yM}-fill-color" data-oltb-i18n="${vM}.toolbox.groups.fillColor.title">${t.groups.fillColor.title}</label>\n                            <div id="${yM}-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${yM}-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">\n                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#Ci(){this.uiRefToolType.value=this.localStorage.toolType}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${_M}--show`),this.button.classList.add(`${mM}--active`),k_.setActiveTool(this),this.shouldAlwaysCreateNewLayer()&&gw.addFeatureLayer({name:Mm.get(`${vM}.layers.defaultName`)}),wm.dispatchEvent([this.uiRefToolType],ep.browser.change),this.localStorage.isActive=!0,sp.setStateObject(xM,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.getMap()&&(this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${_M}--show`),this.button.classList.remove(`${mM}--active`),this.doRemoveDrawInteraction(),k_.removeActiveTool(),bw.removeSnap(),this.localStorage.isActive=!1,sp.setStateObject(xM,this.localStorage))}deselectTool(){this.deactivateTool()}updateTool(){this.localStorage.toolType=this.uiRefToolType.value,this.localStorage.fillColor=this.uiRefFillColor.getAttribute("data-oltb-color"),this.localStorage.strokeColor=this.uiRefStrokeColor.getAttribute("data-oltb-color"),sp.setStateObject(xM,this.localStorage),this.doUpdateTool(this.uiRefToolType.value,this.uiRefFillColor.getAttribute("data-oltb-color"),this.uiRefStrokeColor.getAttribute("data-oltb-color"))}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){const e=t.key;e===Qm.valueEscape?this.interactionDraw&&this.interactionDraw.abortDrawing():t.ctrlKey&&e===Qm.valueZ?this.interactionDraw&&this.interactionDraw.removeLastPoint():nB(t,Zx.measureTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.doClearColors(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#Bi(t){this.doDrawStart(t)}#Ei(t){this.doDrawEnd(t)}#Si(t){this.doDrawAbort(t)}#Fi(t){this.doDrawError(t)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}shouldAlwaysCreateNewLayer(){return yw.getSetting(E_.alwaysNewLayers)}#Ii(t){return new Fc({type:t,stopClick:!0,style:this.styles})}#Li(t,e){return new zo({image:new No({fill:new Qo({color:t}),stroke:new Vo({color:e,width:2}),radius:5}),fill:new Qo({color:t}),stroke:new Vo({color:e,lineDash:[2,5],width:2.5})})}doClearState(){this.localStorage=Fh.cloneDeep(BM),sp.setStateObject(xM,BM)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(xM,this.localStorage)}))}doDrawStart(t){const e=t.feature,i=Sw.push(wM);e&&(this.onChangeListener=e.getGeometry().on(ep.openLayers.change,(t=>{const e=ly(t.target);i.innerHTML=`${e.value} ${e.unit}`}))),this.options.onStart&&this.options.onStart(t)}doDrawEnd(t){di(this.onChangeListener);const e=t.feature;if(e){Sw.pop(wM),py.applyMeasurementProperties(e),e.setStyle(this.styles);const t=gw.getActiveFeatureLayer({fallback:Mm.get(`${vM}.layers.defaultName`)});gw.addFeatureToLayer(e,t,`${vM}.toasts.infos.drawInHiddenLayer`)}this.options.onEnd&&this.options.onEnd(t)}doDrawAbort(t){di(this.onChangeListener),Sw.pop(wM),this.options.onAbort&&this.options.onAbort(t)}doDrawError(t){this.options.onError&&this.options.onError(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doClearColors(){this.uiRefFillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.uiRefFillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.uiRefStrokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.uiRefStrokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}doUpdateTool(t,e,i){this.getMap()&&(this.interactionDraw&&(this.doRemoveDrawInteraction(),bw.removeSnap()),this.styles=this.#Li(e,i),this.interactionDraw=this.#Ii(t),this.interactionDraw.on(ep.openLayers.drawStart,this.#Bi.bind(this)),this.interactionDraw.on(ep.openLayers.drawEnd,this.#Ei.bind(this)),this.interactionDraw.on(ep.openLayers.drawAbort,this.#Si.bind(this)),this.interactionDraw.on(ep.openLayers.error,this.#Fi.bind(this)),this.doAddDrawInteraction(),bw.addSnap(this))}doAddDrawInteraction(){this.getMap().addInteraction(this.interactionDraw)}doRemoveDrawInteraction(){this.getMap().removeInteraction(this.interactionDraw)}},EditTool:class extends $x{constructor(t={}){super({filename:BB});const e=zm({path:Gm.cursor.stroked,class:`${EB}__icon`}),i=Mm.get(LB),n=tp.createElement({element:"button",html:e,class:EB,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.editTool})`,"data-tippy-content-post":`(${Zx.editTool})`,"data-oltb-i18n":`${LB}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.lastStyle=void 0,this.options=Fh.merge(Fh.cloneDeep(TB),t),this.localStorage=sp.getAndMergeStateObject(RB,kB),this.originalFeatureStyles={},this.featureClipboard=[],this.parser=new vB.io.OL3Parser,this.parser.inject(In,ys,Fn,jn,vs,ws,Cs,gs),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${FB}-toolbox`),this.#bi(),this.#Mi(),this.uiRefDeleteSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-delete-selected-button`),this.uiRefDeleteSelectedButton.addEventListener(ep.browser.click,this.#Ti.bind(this)),this.uiRefRotateSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-rotate-selected-button`),this.uiRefRotateSelectedButton.addEventListener(ep.browser.click,this.#Ri.bind(this)),this.uiRefInfoSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-info-button`),this.uiRefInfoSelectedButton.addEventListener(ep.browser.click,this.#ki.bind(this)),this.uiRefConvertSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-convert-button`),this.uiRefConvertSelectedButton.addEventListener(ep.browser.click,this.#Ui.bind(this)),this.uiRefCutSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-cut-selected-button`),this.uiRefCutSelectedButton.addEventListener(ep.browser.click,this.#Di.bind(this)),this.uiRefCopySelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-copy-selected-button`),this.uiRefCopySelectedButton.addEventListener(ep.browser.click,this.#Oi.bind(this)),this.uiRefPasteSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-paste-selected-button`),this.uiRefPasteSelectedButton.addEventListener(ep.browser.click,this.#Pi.bind(this)),this.uiRefUnionSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-union-selected-button`),this.uiRefUnionSelectedButton.addEventListener(ep.browser.click,this.#Ni.bind(this,this.unionFeatures,"union")),this.uiRefIntersectSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-intersect-selected-button`),this.uiRefIntersectSelectedButton.addEventListener(ep.browser.click,this.#Ni.bind(this,this.intersectFeatures,"intersect")),this.uiRefExcludeSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-exclude-selected-button`),this.uiRefExcludeSelectedButton.addEventListener(ep.browser.click,this.#Ni.bind(this,this.excludeFeatures,"exclude")),this.uiRefDifferenceSelectedButton=this.uiRefToolboxSection.querySelector(`#${FB}-difference-selected-button`),this.uiRefDifferenceSelectedButton.addEventListener(ep.browser.click,this.#Ni.bind(this,this.differenceFeatures,"difference")),this.uiRefFillColor=this.uiRefToolboxSection.querySelector(`#${FB}-fill-color`),this.uiRefFillColor.addEventListener(ep.custom.colorChange,this.#Qi.bind(this)),this.uiRefStrokeColor=this.uiRefToolboxSection.querySelector(`#${FB}-stroke-color`),this.uiRefStrokeColor.addEventListener(ep.custom.colorChange,this.#Qi.bind(this)),this.interactionSelect=this.#Hi(),this.interactionModify=this.#Gi(),this.interactionTranslate=this.#Vi(),this.interactionSelect.getFeatures().on(ep.openLayers.add,this.#zi.bind(this)),this.interactionSelect.getFeatures().on(ep.openLayers.remove,this.#Ki.bind(this)),this.interactionModify.addEventListener(ep.openLayers.modifyStart,this.#ji.bind(this)),this.interactionModify.addEventListener(ep.openLayers.modifyEnd,this.#Wi.bind(this)),this.interactionTranslate.addEventListener(ep.openLayers.translateStart,this.#$i.bind(this)),this.interactionTranslate.addEventListener(ep.openLayers.translateEnd,this.#Yi.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),this.onWindowFeatureLayerRemovedBind=this.#Xi.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind),window.addEventListener(ep.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind),window.removeEventListener(ep.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${LB}.toolbox`),e=Mm.get(`${MB}.titles`),i='class="oltb-btn oltb-btn--blue-mid oltb-tippy"',n=`\n            <div id="${FB}-toolbox" class="${SB}">\n                <div class="${SB}__header oltb-toggleable" data-oltb-toggleable-target="${FB}-toolbox-collapsed">\n                    <h4 class="${SB}__title" data-oltb-i18n="${LB}.toolbox.titles.edit">${t.titles.edit}</h4>\n                    <span class="${SB}__icon oltb-tippy" data-oltb-i18n="${MB}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${SB}__groups" id="${FB}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${SB}__group ${SB}__group--sub-toolbar">\n                        <label class="oltb-label" data-oltb-i18n="${LB}.toolbox.groups.misc.title">${t.groups.misc.title}</label>\n                        <button type="button" id="${FB}-delete-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.misc.delete" title="${t.groups.misc.delete}">\n                            ${zm({...UB,path:Gm.trash.stroked})}\n                        </button>\n                        <button type="button" id="${FB}-rotate-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.misc.rotate" title="${t.groups.misc.rotate}">\n                            ${zm({...UB,path:Gm.arrowRepeat.stroked})}\n                        </button>\n                        <button type="button" id="${FB}-info-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.misc.geometryData" title="${t.groups.misc.geometryData}">\n                            ${zm({...UB,path:Gm.infoCircle.stroked})}\n                        </button>\n                        <button type="button" id="${FB}-convert-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.misc.convertFeature" title="${t.groups.misc.convertFeature}">\n                            ${zm({...UB,path:Gm.shuffle.stroked})}\n                        </button>\n                    </div>\n                    <div class="${SB}__group ${SB}__group--sub-toolbar">\n                        <label class="oltb-label" data-oltb-i18n="${LB}.toolbox.groups.copying.title">${t.groups.copying.title}</label>\n                        <button type="button" id="${FB}-cut-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.copying.cut" title="${t.groups.copying.cut}">\n                            ${zm({...UB,path:Gm.scissors.filled})}\n                        </button>\n                        <button type="button" id="${FB}-copy-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.copying.copy" title="${t.groups.copying.copy}">\n                            ${zm({...UB,path:Gm.copy.stroked})}\n                        </button>\n                        <button type="button" id="${FB}-paste-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.copying.paste" title="${t.groups.copying.paste}">\n                            ${zm({...UB,path:Gm.clipboard.stroked})}\n                        </button>\n                    </div>\n                    <div class="${SB}__group ${SB}__group--sub-toolbar ${SB}__group--split-group">\n                        <label class="oltb-label" data-oltb-i18n="${LB}.toolbox.groups.shapes.title">${t.groups.shapes.title}</label>\n                        <button type="button" id="${FB}-union-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.shapes.union" title="${t.groups.shapes.union}">\n                            ${zm({...UB,path:Gm.union.mixed})}\n                        </button>\n                        <button type="button" id="${FB}-intersect-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.shapes.intersect" title="${t.groups.shapes.intersect}">\n                            ${zm({...UB,path:Gm.intersect.mixed})}\n                        </button>\n                        <button type="button" id="${FB}-exclude-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.shapes.exclude" title="${t.groups.shapes.exclude}">\n                            ${zm({...UB,path:Gm.exclude.mixed})}\n                        </button>\n                        <button type="button" id="${FB}-difference-selected-button" ${i} data-oltb-i18n="${LB}.toolbox.groups.shapes.difference" title="${t.groups.shapes.difference}">\n                            ${zm({...UB,path:Gm.subtract.mixed})}\n                        </button>\n                    </div>\n                    <div class="${SB}__group ${SB}__group--split-group">\n                        <div class="${SB}__group-part">\n                            <label class="oltb-label" for="${FB}-stroke-color" data-oltb-i18n="${LB}.toolbox.groups.strokeColor.title">${t.groups.strokeColor.title}</label>\n                            <div id="${FB}-stroke-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${FB}-stroke-color" data-oltb-color="${this.localStorage.strokeColor}" tabindex="0">\n                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.strokeColor};"></div>\n                            </div>\n                        </div>\n                        <div class="${SB}__group-part">\n                            <label class="oltb-label" for="${FB}-fill-color" data-oltb-i18n="${LB}.toolbox.groups.fillColor.title">${t.groups.fillColor.title}</label>\n                            <div id="${FB}-fill-color" class="oltb-color-input oltb-color-tippy" data-oltb-color-target="#${FB}-fill-color" data-oltb-color="${this.localStorage.fillColor}" tabindex="0">\n                                <div class="oltb-color-input__inner" style="background-color: ${this.localStorage.fillColor};"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",n)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#Mi(){yw.addSetting(E_.mouseOnlyToEditVectorShapes,{state:!0,i18nBase:`${LB}.settings`,i18nKey:"mouseOnlyToEditVectorShapes"})}#Hi(){return new sh({hitTolerance:this.options.hitTolerance,style:(t,e)=>iy.getSelectedStyle(t,e),filter:(t,e)=>{if(py.isIconMarkerType(t))return!1;if(py.isWindBarbType(t))return!1;if(gw.belongsToFeatureLayer(t))return!0;const i=yw.getSetting(E_.selectVectorMapShapes);return!(!gw.belongsToMapLayer(t)||!i)}})}#Gi(){return new Wc({features:this.interactionSelect.getFeatures(),condition:t=>zi(t)||this.useMouseOnlyToEditVectorShapes()})}#Vi(){return new _h({features:this.interactionSelect.getFeatures()})}activateTool(){const t=this.getMap();t&&([this.interactionSelect,this.interactionTranslate,this.interactionModify].forEach((e=>{t.addInteraction(e)})),k_.setActiveTool(this),bw.addSnap(this),this.isActive=!0,this.uiRefToolboxSection.classList.add(`${SB}--show`),this.button.classList.add(`${EB}--active`),this.localStorage.isActive=!0,sp.setStateObject(RB,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}deactivateTool(){[this.interactionSelect,this.interactionTranslate,this.interactionModify].forEach((t=>{this.getMap().removeInteraction(t)})),this.interactionSelect.getFeatures().clear(),k_.removeActiveTool(),bw.removeSnap(),this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${SB}--show`),this.button.classList.remove(`${EB}--active`),this.localStorage.isActive=!1,sp.setStateObject(RB,this.localStorage)}deselectTool(){this.deactivateTool()}#qi(t){const e=gw.getFeatureLayers();t.forEach((t=>{e.forEach((e=>{void 0!==e.getLayer().getSource().hasFeature&&e.getLayer().getSource().hasFeature(t)&&(gw.removeFeatureFromLayer(t,e),this.interactionSelect.getFeatures().remove(t))}))}))}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.editTool)?this.onClickTool(t):this.isActive&&t.key===Qm.valueDelete&&this.#Ti()}#b(){this.doClearState(),this.doClearColors(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#Xi(t){this.interactionSelect.getFeatures().clear()}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#zi(t){this.doSelectFeatureAdd(t)}#Ki(t){this.doSelectFeatureRemove(t)}#ji(t){this.doModifyStart(t)}#Wi(t){this.doModifyEnd(t)}#$i(t){this.doTranslateStart(t)}#Yi(t){this.doTranslateEnd(t)}#Ti(){const t=[...this.interactionSelect.getFeatures().getArray()];0!==t.length?this.askToDeleteFeatures(t):Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:true})}#Ri(){const t=[...this.interactionSelect.getFeatures().getArray()];0!==t.length?this.askToRotateSelectedFeatures(t):Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:true})}#ki(){const t=[...this.interactionSelect.getFeatures().getArray()];0!==t.length?t.length>=2?Nm.info({i18nKey:`${LB}.toasts.infos.strictOneFeature`,autoremove:!0}):this.doShowFeatureInfo(t[0]):Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:!0})}#Ui(){const t=[...this.interactionSelect.getFeatures().getArray()];0!==t.length?this.askToConvertSelectedFeatures(t):Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:!0})}#Di(t){const e=[...this.interactionSelect.getFeatures().getArray()];0!==e.length?this.doCutFeatures(e):Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:!0})}#Oi(t){const e=[...this.interactionSelect.getFeatures().getArray()];0!==e.length?this.doCopyFeatures(e):Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:!0})}#Pi(t){0!==this.featureClipboard.length?this.doPasteFeatures():Nm.info({i18nKey:`${LB}.toasts.infos.missingFeatures`,autoremove:!0})}#Qi(t){this.doFeatureColorChange(t)}#Zi(t){this.doFeatureChange(t)}#Ni(t,e){const i=[...this.interactionSelect.getFeatures().getArray()];this.isTwoAndOnlyTwoShapes(i)?this.doShapeOperation(i,t,e):Nm.info({i18nKey:`${LB}.toasts.infos.strictTwoFeatures`,autoremove:!0})}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}attachOnChange(t){const e=this.interactionSelect.getFeatures().getArray(),i=!Sw.isEmpty();i&&1===e.length&&(this.tooltipItem=Sw.push(IB));const n=Xg.toolbar.id,s=t.get(n),r=i&&1===e.length;s.onChangeListener=t.getGeometry().on(ep.openLayers.change,this.#Zi.bind(this,t)),s.tooltip.getElement().className="oltb-overlay-tooltip "+(r?"oltb-overlay-tooltip--hidden":"")}detachOnChange(t){const e=this.interactionSelect.getFeatures().getArray();!Sw.isEmpty()&&1===e.length&&Sw.pop(IB);const i=Xg.toolbar.id,n=t.get(i),s=t.getGeometry();di(n.onChangeListener);const r=n.tooltip,o=r.getElement(),a=Ay(s),l=ly(s);r.setPosition(a),o.className="oltb-overlay-tooltip",o.firstElementChild.innerHTML=`${l.value} ${l.unit}`}unionFeatures(t,e){return vB.operation.overlay.OverlayOp.union(t,e)}intersectFeatures(t,e){return vB.operation.overlay.OverlayOp.intersection(t,e)}excludeFeatures(t,e){return vB.operation.overlay.OverlayOp.symDifference(t,e)}differenceFeatures(t,e){return vB.operation.overlay.OverlayOp.difference(t,e)}useMouseOnlyToEditVectorShapes(){return yw.getSetting(E_.mouseOnlyToEditVectorShapes)}isTwoAndOnlyTwoShapes(t){return 2===t.length}getNumSelectedFeatures(){return this.interactionSelect.getFeatures().getLength()}askToDeleteFeatures(t){const e=Mm.get(`${LB}.dialogs.confirms.deleteFeatures`);return B_.confirm({title:e.title,message:`${e.message} ${t.length}st?`,confirmText:e.confirmText,cancelText:e.cancelText,onConfirm:()=>{this.doDeleteFeatures(t)}})}askToRotateSelectedFeatures(t,e="0"){const i=Mm.get(`${LB}.dialogs.prompts.rotateFeatures`);return B_.prompt({title:i.title,message:`${i.message}`,value:e,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:e=>{e.isDigitsOnly()?this.doRotateFeatures(t,e):(rg.logError(BB,"askToRotateSelectedFeatures",{message:"Only digits are allowed as input",result:e}),Nm.error({i18nKey:`${LB}.toasts.errors.invalidValue`}))}})}askToConvertSelectedFeatures(t){const e=Mm.get(`${LB}.dialogs.prompts.convertFeatures`),i=Mm.get(`${MB}.types.convertable`);return B_.select({title:e.title,message:e.message,value:$_.type.measurement,options:[{text:i.drawing,value:$_.type.drawing},{text:i.measurement,value:$_.type.measurement}],confirmText:e.confirmText,cancelText:e.cancelText,onConfirm:e=>{this.doConvertFeatures(t,e)}})}doPushFeatureStyle(t){const e=fi(t);this.originalFeatureStyles[e]=t.getStyle()}doPopFeatureStyle(t){const e=fi(t);t.setStyle(this.originalFeatureStyles[e]),delete this.originalFeatureStyles[e]}doClearState(){this.localStorage=Fh.cloneDeep(kB),sp.setStateObject(RB,kB)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(RB,this.localStorage)}))}doSelectFeatureAdd(t){const e=t.element;this.doPushFeatureStyle(e),this.options.onSelectAdd&&this.options.onSelectAdd(t)}doSelectFeatureRemove(t){const e=t.element;e&&window.setTimeout((()=>{if(this.colorHasChanged){if(e.setStyle(this.lastStyle),py.isMeasurementType(e)){const t=new zo({fill:new Qo({color:this.lastStyle.getFill().getColor()}),stroke:new Vo({color:this.lastStyle.getStroke().getColor(),width:this.lastStyle.getStroke().getWidth(),lineDash:[2,5]})});e.setStyle(t)}this.options.onStyleChange&&this.options.onStyleChange(t,this.lastStyle),0===t.index&&(this.colorHasChanged=!1)}})),this.options.onSelectRemove&&this.options.onSelectRemove(t)}doModifyStart(t){(t.features||[]).forEach((t=>{py.hasTooltip(t)&&this.attachOnChange(t)})),this.options.onModifyStart&&this.options.onModifyStart(t)}doModifyEnd(t){(t.features||[]).forEach((t=>{py.hasTooltip(t)&&this.detachOnChange(t)})),this.options.onModifyEnd&&this.options.onModifyEnd(t)}doTranslateStart(t){(t.features||[]).forEach((t=>{py.hasTooltip(t)&&this.attachOnChange(t)})),this.options.onTranslateStart&&this.options.onTranslateStart(t)}doTranslateEnd(t){(t.features||[]).forEach((t=>{py.hasTooltip(t)&&this.detachOnChange(t)})),this.options.onTranslateEnd&&this.options.onTranslateEnd(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doFeatureColorChange(t){this.colorHasChanged=!0;const e=this.uiRefFillColor.getAttribute("data-oltb-color"),i=this.uiRefStrokeColor.getAttribute("data-oltb-color"),n=[...this.interactionSelect.getFeatures().getArray()];this.lastStyle=new zo({fill:new Qo({color:e}),stroke:new Vo({color:i,width:2.5})}),n.forEach((t=>{t.setStyle(this.lastStyle)})),this.localStorage.fillColor=this.lastStyle.getFill().getColor(),this.localStorage.strokeColor=this.lastStyle.getStroke().getColor(),sp.setStateObject(RB,this.localStorage)}doFeatureChange(t){const e=this.interactionSelect.getFeatures().getArray(),i=!Sw.isEmpty(),n=t.getGeometry(),s=ly(n);if(i&&1===e.length)this.tooltipItem.innerHTML=`${s.value} ${s.unit}`;else{const e=py.getTooltip(t);e.setPosition(Ay(n));e.getElement().firstElementChild.innerHTML=`${s.value} ${s.unit}`}}doShapeOperation(t,e,i){try{const n=t[0],s=t[1],r=this.parser.read(n.getGeometry()),o=e(r,this.parser.read(s.getGeometry())),a=new cs({geometry:new jn(this.parser.write(o).getCoordinates())});py.isMeasurementType(n)||py.isMeasurementType(s)?(py.applyMeasurementProperties(a),a.setStyle(iy.getDefaultMeasurementStyle())):a.setStyle(iy.getDefaultDrawingStyle());const l=gw.getActiveFeatureLayer();gw.addFeatureToLayer(a,l),this.doDeleteFeatures(t),this.options.onShapeOperation&&this.options.onShapeOperation(i,n,s,a)}catch(t){rg.logError(BB,"onShapeOperator",{message:"Failed to perform shape operation",error:t}),Nm.error({i18nKey:`${LB}.toasts.operationFailed`}),this.options.onError&&this.options.onError(t)}}doClearColors(){this.uiRefFillColor.setAttribute("data-oltb-color",this.localStorage.fillColor),this.uiRefFillColor.firstElementChild.style.backgroundColor=this.localStorage.fillColor,this.uiRefStrokeColor.setAttribute("data-oltb-color",this.localStorage.strokeColor),this.uiRefStrokeColor.firstElementChild.style.backgroundColor=this.localStorage.strokeColor}doDeleteFeatures(t){this.#qi(t),this.options.onRemovedFeatures&&this.options.onRemovedFeatures(t)}doRotateFeatures(t,e){const i=K_.degreesToRadians(e);t.forEach((t=>{const e=t.getGeometry(),n=I(e.getExtent());e.rotate(i,n)}))}doCutFeatures(t){t.forEach((t=>{const e=py.deepCopyVectorFeatureWithStyle(t,this.originalFeatureStyles);this.featureClipboard.push(e)})),this.#qi(t),Nm.info({prefix:t.length,i18nKey:`${LB}.toasts.infos.cutFeatures`,autoremove:!0}),this.options.onCutFeatures&&this.options.onCutFeatures(t)}doCopyFeatures(t){t.forEach((t=>{const e=py.deepCopyVectorFeatureWithStyle(t,this.originalFeatureStyles);this.featureClipboard.push(e)})),Nm.info({prefix:t.length,i18nKey:`${LB}.toasts.infos.copiedFeatures`,autoremove:!0}),this.options.onCopyFeatures&&this.options.onCopyFeatures(t)}doPasteFeatures(){const t=[...this.featureClipboard];this.featureClipboard=[];const e=gw.getActiveFeatureLayer();t.forEach((t=>{gw.addFeatureToLayer(t,e)})),Nm.info({prefix:t.length,i18nKey:`${LB}.toasts.infos.pastedFeatures`,autoremove:!0}),this.options.onPasteFeatures&&this.options.onPasteFeatures(t,e)}doAddSelectedFeature(t){this.interactionSelect.getFeatures().push(t)}doRemoveSelectedFeature(t){this.interactionSelect.getFeatures().remove(t)}doClearSelectedFeatures(){this.interactionSelect.getFeatures().clear()}doConvertFeatures(t,e){this.doClearSelectedFeatures(),py.convertFeaturesTo(t,e.to)}doShowFeatureInfo(t){const e=fi(t),i=t.getGeometry(),n=ly(i),s=i.getCoordinates()[0],r=s.length,o=JSON.stringify(JSON.decycle(s),ny,4),a=Xg.toolbar.id,l=t.get(a),A=JSON.stringify(JSON.decycle(l),ny,4),c={data:{id:e,measurement:`${n.value} ${n.unit}`,oltbProperties:`<pre><code>${A}</code></pre>`,vertices:r,coordinates:`<pre><code>${o}</code></pre>`}};return new xB(c)}},ScissorsTool:class extends $x{constructor(t={}){super({filename:"scissors-tool.js"});const e=zm({path:Gm.scissors.filled,class:`${uT}__icon`}),i=Mm.get(dT),n=tp.createElement({element:"button",html:e,class:uT,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.scissorsTool})`,"data-tippy-content-post":`(${Zx.scissorsTool})`,"data-oltb-i18n":`${dT}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.intersectedFeatures=[],this.options=Fh.merge(Fh.cloneDeep(gT),t),this.localStorage=sp.getAndMergeStateObject(pT,fT),this.parser=new vB.io.OL3Parser,this.parser.inject(In,ys,Fn,jn,vs,ws,Cs,gs),this.interactionDraw=this.#Ii(),this.interactionDraw.on(ep.openLayers.drawStart,this.#Bi.bind(this)),this.interactionDraw.on(ep.openLayers.drawEnd,this.#Ei.bind(this)),this.interactionDraw.on(ep.openLayers.drawAbort,this.#Si.bind(this)),this.interactionDraw.on(ep.openLayers.error,this.#Fi.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.getMap()&&(this.doAddDrawInteraction(),k_.setActiveTool(this),bw.addSnap(this),this.isActive=!0,this.button.classList.add(`${uT}--active`),this.localStorage.isActive=!0,sp.setStateObject(pT,this.localStorage))}deactivateTool(){this.getMap()&&(this.doRemoveDrawInteraction(),k_.removeActiveTool(),bw.removeSnap(),this.isActive=!1,this.button.classList.remove(`${uT}--active`),this.localStorage.isActive=!1,sp.setStateObject(pT,this.localStorage))}deselectTool(){this.deactivateTool()}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){const e=t.key;e===Qm.valueEscape?this.interactionDraw&&this.interactionDraw.abortDrawing():t.ctrlKey&&e===Qm.valueZ?this.interactionDraw&&this.interactionDraw.removeLastPoint():nB(t,Zx.scissorsTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#Bi(t){this.doDrawStart(t)}#Ei(t){this.doDrawEnd(t)}#Si(t){this.doDrawAbort(t)}#Fi(t){this.doDrawError(t)}onSnap(t){this.doSnap(t)}onUnSnap(t){this.doUnSnap(t)}#Ii(){const t=this.#Li();return new Fc({type:dy.LineString,stopClick:!0,style:t})}#Li(){return new zo({image:new No({fill:new Qo({color:this.options.fillColor}),stroke:new Vo({color:this.options.strokeColor,width:this.options.strokeWidth}),radius:5}),fill:new Qo({color:this.options.fillColor}),stroke:new Vo({color:this.options.strokeColor,width:this.options.strokeWidth})})}#Ji(){return new vB.operation.polygonize.Polygonizer}doClearState(){this.localStorage=Fh.cloneDeep(fT),sp.setStateObject(pT,fT)}doDrawStart(t){this.options.onStart&&this.options.onStart(t)}doDrawEnd(t){const e=t.feature,i=e.getGeometry();gw.getFeatureLayers().forEach((t=>{const e=t.getLayer();if(!e.getVisible())return;e.getSource().forEachFeatureIntersectingExtent(i.getExtent(),(t=>{const e=py.getType(t),i=t.getGeometry();cB(e,i)&&this.intersectedFeatures.push(t)}))})),this.intersectedFeatures.forEach((t=>{t.getGeometry().getType()===dy.Polygon&&this.doSplitPolygon(t,e)})),0===this.intersectedFeatures.length&&Nm.info({i18nKey:`${dT}.toasts.infos.missingIntersections`,autoremove:!0}),this.options.onEnd&&this.options.onEnd(t),this.intersectedFeatures=[]}doDrawAbort(t){this.options.onAbort&&this.options.onAbort(t)}doDrawError(t){this.options.onError&&this.options.onError(t)}doSnap(t){this.options.onSnapped&&this.options.onSnapped(t)}doUnSnap(t){this.options.onUnSnapped&&this.options.onUnSnapped(t)}doAddDrawInteraction(){this.getMap().addInteraction(this.interactionDraw)}doRemoveDrawInteraction(){this.getMap().removeInteraction(this.interactionDraw)}doSplitPolygon(t,e){const i=py.getType(t)||$_.type.drawing,n=this.parser.read(t.getGeometry()),s=this.parser.read(e.getGeometry()),r=this.#Ji(),o=n.getExteriorRing().union(s);r.add(o);const a=r.getPolygons();if(2!==a.array.length)return;const l=n.getNumInteriorRing();a.array.forEach((t=>{for(let e=0;e<l;e++){let i=n.getInteriorRingN(e);const s=[];for(let t in i.getCoordinates())s.push([i.getCoordinates()[t].x,i.getCoordinates()[t].y]);i=this.parser.read(new jn([s])),t=t.difference(i)}const e=this.#Li(),s=this.parser.write(t).getCoordinates(),r=new cs({geometry:new jn(s),oltb:{type:i}});r.setStyle(e);const o=gw.getActiveFeatureLayer();gw.addFeatureToLayer(r,o)})),gw.removeFeatureFromFeatureLayers(t)}},BookmarkTool:class extends $x{constructor(t={}){super({filename:mT}),this.icon=zm({path:Gm.bookmarkStar.stroked,class:`${_T}__icon`}),this.clearBookmarksIcon=zm({path:Gm.bookmarkX.stroked});const e=Mm.get(xT),i=tp.createElement({element:"button",html:this.icon,class:_T,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.bookmarkTool})`,"data-tippy-content-post":`(${Zx.bookmarkTool})`,"data-oltb-i18n":`${xT}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[i]),this.button=i,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(ET),t),this.localStorage=sp.getAndMergeStateObject(ST,FT),this.layerWrapper=this.#tn(),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${bT}-toolbox`),this.#bi(),this.uiRefAddBookmarkText=this.uiRefToolboxSection.querySelector(`#${bT}-add-text`),this.uiRefAddBookmarkButton=this.uiRefToolboxSection.querySelector(`#${bT}-add-button`),this.uiRefAddBookmarkText.addEventListener(ep.browser.keyUp,this.#en.bind(this)),this.uiRefAddBookmarkButton.addEventListener(ep.browser.click,this.#in.bind(this)),this.uiRefBookmarkStack=this.uiRefToolboxSection.querySelector(`#${bT}-stack`),this.sortableBookmarkStack=this.#nn(this.uiRefBookmarkStack,{group:"sortableBookmarks",callback:this.options.onDragged,stack:this.localStorage.bookmarks}),this.#sn(),this.#Xe(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${xT}.toolbox`),e=Mm.get(`${BT}.titles`),i=`\n            <div id="${bT}-toolbox" class="${yT}">\n                <div class="${yT}__header oltb-toggleable" data-oltb-toggleable-target="${bT}-toolbox-collapsed">\n                    <h4 class="${yT}__title" data-oltb-i18n="${xT}.toolbox.titles.bookmarks">${t.titles.bookmarks}</h4>\n                    <span class="${yT}__icon oltb-tippy" data-oltb-i18n="${BT}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${yT}__groups" id="${bT}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${yT}__group">\n                        <div class="oltb-input-button-group">\n                            <input type="text" id="${bT}-add-text" class="oltb-input" data-oltb-i18n="${xT}.toolbox.groups.addBookmark.placeholder" placeholder="${t.groups.addBookmark.placeholder}">\n                            <button type="button" id="${bT}-add-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" data-oltb-i18n="${xT}.toolbox.groups.addBookmark.add" title="${t.groups.addBookmark.add}">\n                                ${zm({path:Gm.plus.stroked,width:20,height:20,fill:"none",stroke:"#FFFFFFFF",strokeWidth:1,class:"oltb-btn__icon"})}\n                            </button>\n                        </div>\n                    </div>\n                    <div class="${yT}__group">\n                        <ul id="${bT}-stack" class="${wT}"></ul>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#sn(){this.options.bookmarks.forEach((t=>{this.hasLocalStorageBookmarkById(t.id)||(t.sortIndex=0,t.isDynamicallyAdded=!1,this.localStorage.bookmarks.push(t))})),this.localStorage.bookmarks.forEach((t=>{this.#rn(t)})),sp.setStateObject(ST,this.localStorage)}#Xe(){iB.addItem({icon:this.icon,i18nKey:`${xT}.contextItems.addBookmark`,fn:this.#on.bind(this)}),iB.addItem({icon:this.clearBookmarksIcon,i18nKey:`${xT}.contextItems.clearBookmarks`,fn:this.#an.bind(this)})}#tn(){return gw.addFeatureLayer({id:"1fde0d79-46f9-4c92-8f9c-eb0e98f46772",name:Mm.get(`${xT}.layers.bookmarks`),isVisible:this.options.markerLayerVisibleOnLoad,isSilent:!0,disableFeatureLayerEditButton:!1,disableFeatureLayerDownloadButton:!0,disableFeatureLayerDeleteButton:!0})}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${yT}--show`),this.button.classList.add(`${_T}--active`),this.localStorage.isActive=!0,sp.setStateObject(ST,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${yT}--show`),this.button.classList.remove(`${_T}--active`),this.localStorage.isActive=!1,sp.setStateObject(ST,this.localStorage)}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.bookmarkTool)&&this.onClickTool(t)}#b(){this.doClearBookmarks(),this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#ln(t){this.doZoomToBookmark(t)}#An(t){this.doCopyBookmarkCoordinatesAsync(t)}#cn(t,e){this.askToDeleteBookmark(t,e)}#hn(t,e){this.askToEditBookmark(t,e)}#on(t,e,i){this.doAddBookmark("",e)}#an(t,e,i){this.askToClearBookmarks()}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#en(t){this.#un(t)&&this.onAddBookmarkByClick(t)}#in(t){const e=this.uiRefAddBookmarkText.value;this.uiRefAddBookmarkText.value="",this.doAddBookmark(e)}getLocalStorageBookmarkById(t){return this.localStorage.bookmarks.find((e=>e.id===t))}hasLocalStorageBookmarkById(t){return!!this.getLocalStorageBookmarkById(t)}addMarkerToMap(t){this.layerWrapper.getLayer().getSource().addFeature(t)}removeMarkerFromMap(t){this.layerWrapper.getLayer().getSource().removeFeature(t)}clearMarkersFromMap(){this.layerWrapper.getLayer().getSource().clear()}isLayerVisible(){return this.layerWrapper.getLayer().getVisible()}#nn(t,e){const i=Jg.getConfig().animationDuration.warp;return MS.create(t,{group:e.group,dataIdAttr:"data-oltb-sort-index",animation:i,forceFallback:!0,handle:`.${wT}__handle`,chosenClass:`${wT}__item--chosen`,dragClass:`${wT}__item--drag`,ghostClass:`${wT}__item--ghost`,onEnd:t=>this.#dn(t,e)})}#dn(t,e){const i=[],n={id:t.item.getAttribute("data-oltb-id"),oldIndex:t.newDraggableIndex,newIndex:t.oldDraggableIndex},s=t.to;s.childNodes.forEach(((t,e)=>{const n=s.childNodes.length-e-1;t.setAttribute("data-oltb-sort-index",n);const r=t.getAttribute("data-oltb-id"),o=this.getLocalStorageBookmarkById(r);o&&(o.sortIndex=n),i.push({id:r,index:n})})),sp.setStateObject(ST,this.localStorage),e.callback&&e.callback(n,i)}#gn(t,e=!1){const i=t.toArray().sort().reverse();t.sort(i,e)}#pn(t,e,i){const n=t.find((t=>t.id===i));return n&&void 0!==n.sortIndex?n.sortIndex:e.length}#It(t){return t=t.trim(),this.#it(t)||(t=T_.generate()),t}#it(t){return null!=t&&!!t.length}#un(t){return t.type===ep.browser.keyUp&&t.key===Qm.valueEnter}#fn(t){return hm(t,{content(t){const e=t.getAttribute("title");return t.removeAttribute("title"),e},placement:"top",theme:"oltb oltb-themed",delay:Jg.getConfig().tippy.delay})}#rn(t){rg.logDebug(mT,"createUIBookmark",t),this.#mn(t),this.doAddIconMarker(t),this.hasLocalStorageBookmarkById(t.id)||(this.localStorage.bookmarks.push(t),sp.setStateObject(ST,this.localStorage))}#mn(t){const e=this.#pn(this.localStorage.bookmarks,this.uiRefBookmarkStack.childNodes,t.id);t.sortIndex=e;const i=tp.createElement({element:"li",id:`${bT}-${t.id}`,class:`${wT}__item`,attributes:{"data-oltb-id":t.id,"data-oltb-sort-index":e}}),n=tp.createElement({element:"span",text:t.name.ellipsis(20),class:`${wT}__title`,title:t.name,prototypes:{getTippy:function(){return this._tippy}}});this.#fn(n);const s=tp.createElement({element:"div",class:`${wT}__wrapper`}),r=tp.createElement({element:"div",class:`${wT}__dot`});tp.appendChildren(s,[r]),tp.appendChildren(s,[n]),tp.appendChildren(i,[s]);const o=tp.createElement({element:"div",class:`${wT}__wrapper`}),a=Mm.get(BT),l=tp.createElement({element:"button",class:`${vT} ${vT}--geo-pin oltb-tippy`,title:a.titles.zoomToCoordinates,attributes:{type:"button"},listeners:{click:this.#ln.bind(this,t)}}),A=tp.createElement({element:"button",class:`${vT} ${vT}--crosshair oltb-tippy`,title:a.titles.copyCoordinates,attributes:{type:"button"},listeners:{click:this.#An.bind(this,t)}}),c=tp.createElement({element:"button",class:`${vT} ${vT}--edit oltb-tippy`,title:a.titles.rename,attributes:{type:"button"},listeners:{click:this.#hn.bind(this,t,n)}}),h=tp.createElement({element:"button",class:`${vT} ${vT}--delete oltb-tippy`,title:a.titles.delete,attributes:{type:"button"},listeners:{click:this.#cn.bind(this,t,i)}});tp.appendChildren(o,[l,A,c,h]);const u=tp.createElement({element:"div",class:`${wT}__handle oltb-tippy`,title:a.titles.dragToSort});tp.appendChildren(o,[u]),tp.appendChildren(i,[o]),this.uiRefBookmarkStack.append(i),this.#gn(this.sortableBookmarkStack)}askToClearBookmarks(){const t=Mm.get(`${xT}.dialogs.confirms.clearBookmarks`);return B_.confirm({title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:()=>{this.doClearBookmarks(),Nm.info({i18nKey:`${xT}.toasts.infos.clearBookmarks`,autoremove:!0})}})}askToDeleteBookmark(t,e){const i=Mm.get(`${xT}.dialogs.confirms.clearBookmarks`);return B_.confirm({title:i.title,message:`${i.message} <strong>${t.name}</strong>?`,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:()=>{Av.hideOverlay(),this.doRemoveBookmark(t,e)}})}askToEditBookmark(t,e){const i=Mm.get(`${xT}.dialogs.prompts.editBookmark`);return B_.prompt({title:i.title,message:`${i.message} <strong>${t.name}</strong>`,value:t.name,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:i=>{Av.hideOverlay(),this.#it(i)&&this.doEditBookmark(t,e,i)}})}doClearState(){this.localStorage=Fh.cloneDeep(FT),sp.setStateObject(ST,FT)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(ST,this.localStorage)}))}doAddIconMarker(t){const e=Mm.get(`${BT}.titles`),i=t.coordinates,n=ct(i),s={title:t.name,content:"",footer:`\n                <span class="oltb-info-window__coordinates">${n}</span>\n                <div class="oltb-info-window__buttons-wrapper">\n                    <button class="${vT} ${vT}--crosshair oltb-tippy" data-oltb-i18n="${BT}.titles.copyCoordinates" title="${e.copyCoordinates}" id="${CT}-copy-coordinates" data-oltb-coordinates="${n}"></button>\n                    <button class="${vT} ${vT}--copy oltb-tippy" data-oltb-i18n="${BT}.titles.copyText" title="${e.copyText}" id="${CT}-copy-text" data-oltb-copy="${t.name}"></button>\n                    <button class="${vT} ${vT}--layer oltb-tippy" data-oltb-i18n="${BT}.titles.showLayer" title="${e.showLayer}" id="${CT}-show-layer"></button>\n                </div>\n            `},r=py.generateIconMarker({lon:i[0],lat:i[1],title:t.name,infoWindow:s,marker:{fill:"#3B4352FF",stroke:"#3B435266"},icon:{key:"bookmarkStar.filled"},label:{text:t.name,useEllipsisAfter:this.options.markerLabelUseEllipsisAfter,useUpperCase:this.options.markerLabelUseUpperCase}});return t.marker=r,this.addMarkerToMap(r),r}createBookmarkObject(t,e,i){const n=t.getView(),s=n.getZoom(),r=i??Be(n.getCenter());return{id:N_(),name:e,zoom:s,coordinates:r,isDynamicallyAdded:!0,sortIndex:0}}doAddBookmark(t,e){const i=this.getMap();if(!i)return;t=this.#It(t);const n=this.createBookmarkObject(i,t,e);return this.#rn(n),this.isActive||Nm.success({i18nKey:`${xT}.toasts.infos.createBookmark`,autoremove:!0}),this.options.onAdded&&this.options.onAdded(n),n}doRemoveBookmark(t,e){tp.removeElement(e),this.removeMarkerFromMap(t.marker),this.localStorage.bookmarks=this.localStorage.bookmarks.filter((e=>e.id!==t.id)),this.localStorage.bookmarks.forEach((e=>{e.sortIndex>t.sortIndex&&(e.sortIndex-=1)})),this.uiRefBookmarkStack.childNodes.forEach((i=>{const n=Number(i.getAttribute("data-oltb-sort-index"));n>t.sortIndex&&e.setAttribute("data-oltb-sort-index",n-1)})),this.#gn(this.sortableBookmarkStack),sp.setStateObject(ST,this.localStorage),this.options.onRemoved&&this.options.onRemoved(t)}doEditBookmark(t,e,i){t.name=i,e.innerText=i.ellipsis(20),e.getTippy().setContent(i),this.removeMarkerFromMap(t.marker),this.doAddIconMarker(t),sp.setStateObject(ST,this.localStorage),this.options.onRenamed&&this.options.onRenamed(t)}doClearBookmarks(){rg.logDebug(mT,"doClearBookmarks","All bookmarks cleared"),tp.clearElement(this.uiRefBookmarkStack),this.clearMarkersFromMap(),this.localStorage.bookmarks=[],sp.setStateObject(ST,this.localStorage),this.options.onCleared&&this.options.onCleared()}doZoomToBookmark(t){const e=this.getMap();e&&(qx({map:e,coordinates:t.coordinates,zoom:t.zoom,onDone:e=>{this.isLayerVisible()&&(Av.tryPulseAnimation(t.marker),Av.showOverlay(t.marker,xe(t.coordinates)))}}),this.options.onZoomedTo&&this.options.onZoomedTo(t))}async doCopyBookmarkCoordinatesAsync(t){const e=ct(t.coordinates);try{await Xw(e),Nm.info({i18nKey:`${xT}.toasts.infos.copyCoordinates`,autoremove:!0})}catch(t){rg.logError(mT,"doCopyBookmarkCoordinatesAsync",{message:"Failed to copy coordinates",error:t}),Nm.error({i18nKey:`${xT}.toasts.errors.copyCoordinates`})}}},LayerTool:class extends $x{constructor(t={}){super({filename:nM}),this.icon=zm({path:Gm.layers.stroked,class:`${sM}__icon`});const e=Mm.get(AM),i=tp.createElement({element:"button",html:this.icon,class:sM,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.layerTool})`,"data-tippy-content-post":`(${Zx.layerTool})`,"data-oltb-i18n":`${AM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[i]),this.button=i,this.isActive=!1,this.layerModal=void 0,this.options=Fh.merge(Fh.cloneDeep(hM),t),this.localStorage=sp.getAndMergeStateObject(uM,dM),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${lM}-toolbox`),this.#bi(),this.uiRefMapLayerStack=this.uiRefToolboxSection.querySelector(`#${lM}-map-stack`),this.uiRefAddMapLayerButton=this.uiRefToolboxSection.querySelector(`#${lM}-map-stack-add-button`),this.uiRefAddMapLayerText=this.uiRefToolboxSection.querySelector(`#${lM}-map-stack-add-text`),this.sortableMapLayerStack=this.#nn(this.uiRefMapLayerStack,{group:"sortableMapLayers",callback:this.options.onMapLayerDragged,setZIndex:gw.setMapLayerZIndex.bind(gw),getLayerItemById:gw.getMapLayerById.bind(gw),getLocalStorageItemById:this.getLocalStorageMapLayerById.bind(this),stack:this.localStorage.mapLayers}),this.uiRefFeatureLayerStack=this.uiRefToolboxSection.querySelector(`#${lM}-feature-stack`),this.uiRefAddFeatureLayerButton=this.uiRefToolboxSection.querySelector(`#${lM}-feature-stack-add-button`),this.uiRefAddFeatureLayerText=this.uiRefToolboxSection.querySelector(`#${lM}-feature-stack-add-text`),this.sortableFeatureLayerStack=this.#nn(this.uiRefFeatureLayerStack,{group:"sortableFeatureLayers",callback:this.options.onFeatureLayerDragged,setZIndex:gw.setFeatureLayerZIndex.bind(gw),getLayerItemById:gw.getFeatureLayerById.bind(gw),getLocalStorageItemById:this.getLocalStorageFeatureLayerById.bind(this),stack:this.localStorage.featureLayers}),this.uiRefAddMapLayerButton&&this.uiRefAddMapLayerButton.addEventListener(ep.browser.click,this.#_n.bind(this)),this.uiRefAddFeatureLayerButton&&this.uiRefAddFeatureLayerButton.addEventListener(ep.browser.click,this.#yn.bind(this)),this.uiRefAddFeatureLayerText&&this.uiRefAddFeatureLayerText.addEventListener(ep.browser.keyUp,this.#wn.bind(this)),this.#Xe(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowMapLayerAddedBind=this.#vn.bind(this),this.onWindowMapLayerRemovedBind=this.#bn.bind(this),this.onWindowFeatureLayerAddedBind=this.#Cn.bind(this),this.onWindowFeatureLayerRemovedBind=this.#Xi.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.addEventListener(ep.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.addEventListener(ep.custom.featureLayerAdded,this.onWindowFeatureLayerAddedBind),window.addEventListener(ep.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.removeEventListener(ep.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.removeEventListener(ep.custom.featureLayerAdded,this.onWindowFeatureLayerAddedBind),window.removeEventListener(ep.custom.featureLayerRemoved,this.onWindowFeatureLayerRemovedBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${AM}.toolbox`),e=Mm.get(`${cM}.titles`),i=`\n            <div id="${lM}-toolbox" class="${rM}">\n                <div class="${rM}__header oltb-toggleable" data-oltb-toggleable-target="${lM}-map-toolbox-collapsed">\n                    <h4 class="${rM}__title" data-oltb-i18n="${AM}.toolbox.titles.mapLayers">${t.titles.mapLayers}</h4>\n                    <span class="${rM}__icon oltb-tippy" data-oltb-i18n="${cM}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${rM}__groups" id="${lM}-map-toolbox-collapsed" style="display: ${this.localStorage[`${lM}-map-toolbox-collapsed`]?"none":"block"}">\n                    ${this.options.disableMapCreateLayerButton?"":`\n                            <div class="${rM}__group">\n                                <div class="oltb-input-button-group">\n                                    <input type="text" id="${lM}-map-stack-add-text" class="oltb-input" data-oltb-i18n="${AM}.toolbox.groups.createMapLayer.placeholder" placeholder="${t.groups.createMapLayer.placeholder}">\n                                    <button type="button" id="${lM}-map-stack-add-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" data-oltb-i18n="${AM}.toolbox.groups.createMapLayer.create" title="${t.groups.createMapLayer.create}">\n                                        ${zm({path:Gm.plus.stroked,width:20,height:20,fill:"none",stroke:"#FFFFFFFF",strokeWidth:1,class:"oltb-btn__icon"})}\n                                    </button>\n                                </div>\n                            </div>\n                        `}\n                    <div class="${rM}__group ${this.options.disableMapCreateLayerButton?`${rM}__group--topmost`:""}">\n                        <ul id="${lM}-map-stack" class="${oM}"></ul>\n                    </div>\n                </div>\n                <div class="${rM}__header oltb-toggleable" data-oltb-toggleable-target="${lM}-feature-toolbox-collapsed">\n                    <h4 class="${rM}__title" data-oltb-i18n="${AM}.toolbox.titles.featureLayers">${t.titles.featureLayers}</h4>\n                    <span class="${rM}__icon oltb-tippy" data-oltb-i18n="${cM}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${rM}__groups" id="${lM}-feature-toolbox-collapsed" style="display: ${this.localStorage[`${lM}-feature-toolbox-collapsed`]?"none":"block"}">\n                    <div class="${rM}__group">\n                        ${this.options.disableFeatureCreateLayerButton?"":`\n                                <div class="oltb-input-button-group">\n                                    <input type="text" id="${lM}-feature-stack-add-text" class="oltb-input" data-oltb-i18n="${AM}.toolbox.groups.createFeatureLayer.placeholder" placeholder="${t.groups.createFeatureLayer.placeholder}">\n                                    <button type="button" id="${lM}-feature-stack-add-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" data-oltb-i18n="${AM}.toolbox.groups.createFeatureLayer.create" title="${t.groups.createFeatureLayer.create}">\n                                        ${zm({path:Gm.plus.stroked,width:20,height:20,fill:"none",stroke:"#FFFFFFFF",strokeWidth:1,class:"oltb-btn__icon"})}\n                                    </button>\n                                </div>\n                            `}\n                    </div>\n                    <div class="${rM}__group ${this.options.disableFeatureCreateLayerButton?`${rM}__group--topmost`:""}">\n                        <ul id="${lM}-feature-stack" class="${oM} ${oM}--selectable"></ul>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#Xe(){this.options.disableMapCreateLayerButton&&this.options.disableFeatureCreateLayerButton||iB.addItem({}),this.options.disableMapCreateLayerButton||iB.addItem({icon:this.icon,i18nKey:`${AM}.contextItems.addMapLayer`,fn:this.#xn.bind(this)}),this.options.disableFeatureCreateLayerButton||iB.addItem({icon:this.icon,i18nKey:`${AM}.contextItems.addFeatureLayer`,fn:this.#Bn.bind(this)})}activateTool(){this.isActive=!0,this.uiRefToolboxSection.classList.add(`${rM}--show`),this.button.classList.add(`${sM}--active`),this.localStorage.isActive=!0,sp.setStateObject(uM,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${rM}--show`),this.button.classList.remove(`${sM}--active`),this.localStorage.isActive=!1,sp.setStateObject(uM,this.localStorage)}#O(t){this.localStorage.isActive&&this.activateTool(),this.removeUnusedLayers()}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#Z(t){nB(t,Zx.layerTool)&&this.onClickTool(t)}#vn(t){this.doMapLayerAdded(t)}#bn(t){this.doMapLayerRemoved(t)}#Cn(t){this.doFeatureLayerAdded(t)}#Xi(t){this.doFeatureLayerRemoved(t)}removeUnusedLayers(){const t=[];this.localStorage.mapLayers.forEach((e=>{gw.hasMapLayerWithId(e.id)||t.push(e)})),t.forEach((t=>{this.localStorage.mapLayers=this.localStorage.mapLayers.filter((e=>t.id!==e.id))}));const e=[];this.localStorage.featureLayers.forEach((t=>{gw.hasFeatureLayerWithId(t.id)||e.push(t)})),e.forEach((t=>{this.localStorage.featureLayers=this.localStorage.featureLayers.filter((e=>t.id!==e.id))})),sp.setStateObject(uM,this.localStorage),rg.logDebug(nM,"removeUnusedLayers",{info:"Removing unused layers",mapLayers:t,featureLayers:e})}getLocalStorageFeatureLayerById(t){return this.localStorage.featureLayers.find((e=>e.id===t))}hasLocalStorageFeatureLayerById(t){return!!this.getLocalStorageFeatureLayerById(t)}getLocalStorageMapLayerById(t){return this.localStorage.mapLayers.find((e=>e.id===t))}hasLocalStorageMapLayerById(t){return!!this.getLocalStorageMapLayerById(t)}#xn(){this.doShowAddMapLayerModal()}#Bn(){this.doAddFeatureLayer({name:"",isDynamicallyAdded:!0}),this.isActive||Nm.success({i18nKey:`${AM}.toasts.infos.addFeatureLayer`,autoremove:!0})}#nn(t,e){const i=Jg.getConfig().animationDuration.warp;return MS.create(t,{group:e.group,dataIdAttr:"data-oltb-sort-index",animation:i,forceFallback:!0,handle:`.${oM}__handle`,chosenClass:`${oM}__item--chosen`,dragClass:`${oM}__item--drag`,ghostClass:`${oM}__item--ghost`,onEnd:t=>this.#dn(t,e)})}#dn(t,e){const i=[],n={id:t.item.getAttribute("data-oltb-id"),oldIndex:t.newDraggableIndex,newIndex:t.oldDraggableIndex},s=t.to;s.childNodes.forEach(((t,n)=>{const r=s.childNodes.length-n-1;t.setAttribute("data-oltb-sort-index",r);const o=t.getAttribute("data-oltb-id"),a=e.getLocalStorageItemById(o);a&&(a.sortIndex=r);const l=e.getLayerItemById(o);l&&(l.sortIndex=r),e.setZIndex(o,r),i.push({id:o,index:r})})),sp.setStateObject(uM,this.localStorage),rg.logDebug(nM,"onEndSortable",{currentItem:n,list:i}),e.callback&&e.callback(n,i)}#gn(t,e=!1){const i=t.toArray().sort().reverse();t.sort(i,e)}isValidEnter(t){return t.type===ep.browser.keyUp&&t.key===Qm.valueEnter}hasLayerFeatures(t){return t.getSource().getFeatures instanceof Function&&t.getSource().getFeatures().length>0}hasProjection(t){const e=Ox.hasProjection(t);return e||(rg.logError(nM,"hasProjection",{message:"Missing projection definition",projection:t}),Nm.error({i18nKey:`${AM}.toasts.errors.missingProjection`})),e}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#wn(t){this.isValidEnter(t)&&this.#yn(t)}#yn(t){const e=this.uiRefAddFeatureLayerText.value;this.uiRefAddFeatureLayerText.value="",this.doAddFeatureLayer({name:e,isDynamicallyAdded:!0})}#En(t){if(this.hasProjection(t.projection))try{this.doAddMapLayer(t)}catch(t){rg.logError(nM,"onCreateMapLayer",{message:"Failed to create new layer",error:t}),Nm.error({i18nKey:`${AM}.toasts.errors.addFeatureLayer`})}}#Sn(t,e,i,n){if("visible"!==n.key)return;e.classList.toggle(`${oM}__item--hidden`);const s=!e.classList.contains(`${oM}__item--hidden`),r=this.getLocalStorageMapLayerById(t);i.checked=s,r&&(r.isVisible=s,sp.setStateObject(uM,this.localStorage))}#Fn(t,e,i,n){if("visible"!==n.key)return;e.classList.toggle(`${oM}__item--hidden`);const s=!e.classList.contains(`${oM}__item--hidden`),r=this.getLocalStorageFeatureLayerById(t);i.checked=s,r&&(r.isVisible=s,sp.setStateObject(uM,this.localStorage))}#In(t,e){this.askToDeleteLayer(t,e)}#Ln(t,e,i){this.doChangeLayerVisibility(t,e)}#Mn(t,e,i){this.askToRenameLayer(t,e,i)}#Tn(t,e){this.askToDownloadLayer(t,e)}#_n(){this.doShowAddMapLayerModal()}attachUIButtonCallbacks(t,e,i,n){for(const s in t){const r=t[s],o=r.function.call(this,e,r.callback,n);tp.appendChildren(i,[o])}}#Rn(t){return hm(t,{content(t){const e=t.getAttribute("title");return t.removeAttribute("title"),e},placement:"top",theme:"oltb oltb-themed",delay:Jg.getConfig().tippy.delay})}#kn(t,e){const i=t.getLayer(),n=t.getId(),s={sortIndex:this.uiRefMapLayerStack.childNodes.length,isVisible:i.getVisible()},r=this.getLocalStorageMapLayerById(n);r?(s.sortIndex=r.sortIndex,s.isVisible=r.isVisible,t.sortIndex=s.sortIndex,i.setVisible(s.isVisible)):this.localStorage.mapLayers.push({id:n,sortIndex:s.sortIndex,isVisible:s.isVisible}),gw.setMapLayerZIndex(n,s.sortIndex);const o=tp.createElement({element:"li",id:`${lM}-map-${n}`,class:`\n                ${oM}__item\n                ${s.isVisible?"":`${oM}__item--hidden`}\n            `,attributes:{"data-oltb-id":n,"data-oltb-sort-index":s.sortIndex}}),a=tp.createElement({element:"span",text:t.getName().ellipsis(20),class:`${oM}__title`,title:t.getName(),prototypes:{getTippy:function(){return this._tippy}}});this.#Rn(a);const l=tp.createElement({element:"div",class:`${oM}__wrapper`}),[A,c]=cF({checked:s.isVisible,listeners:{click:this.#Ln.bind(this,t,this.options.onMapLayerVisibilityChanged,a)}});i.on(ep.openLayers.propertyChange,this.#Sn.bind(this,n,o,c));const h=tp.createElement({element:"div",class:`${oM}__dot`});tp.appendChildren(l,[h,A]),tp.appendChildren(l,[a]),tp.appendChildren(o,[l]);const u=tp.createElement({element:"div",class:`${oM}__wrapper`});this.attachUIButtonCallbacks(e,t,u,a);const d=Mm.get(`${cM}.titles`),g=tp.createElement({element:"div",class:`${oM}__handle oltb-tippy`,title:d.dragToSort});tp.appendChildren(u,[g]),tp.appendChildren(o,[u]),this.uiRefMapLayerStack.append(o),this.#gn(this.sortableMapLayerStack)}#Un(t,e){const i=t.getLayer(),n=t.getId(),s={sortIndex:this.uiRefFeatureLayerStack.childNodes.length,isVisible:i.getVisible()},r=this.getLocalStorageFeatureLayerById(n);r?(s.sortIndex=r.sortIndex,s.isVisible=r.isVisible,t.sortIndex=s.sortIndex,i.setVisible(s.isVisible)):this.localStorage.featureLayers.push({id:n,sortIndex:s.sortIndex,isVisible:s.isVisible}),gw.setFeatureLayerZIndex(n,s.sortIndex);const o=tp.createElement({element:"li",id:`${lM}-feature-${n}`,class:`\n                ${oM}__item \n                ${oM}__item--active\n                ${s.isVisible?"":`${oM}__item--hidden`}\n            `,attributes:{"data-oltb-id":n,"data-oltb-sort-index":s.sortIndex}}),a=tp.createElement({element:"span",text:t.getName().ellipsis(20),class:`${oM}__title`,title:t.getName(),prototypes:{getTippy:function(){return this._tippy}},listeners:{click:this.doSetFeatureLayerAsActive.bind(this,t,o)}});this.#Rn(a);const l=tp.createElement({element:"div",class:`${oM}__wrapper`}),[A,c]=cF({checked:s.isVisible,listeners:{click:this.#Ln.bind(this,t,this.options.onFeatureLayerVisibilityChanged,a)}});i.on(ep.openLayers.propertyChange,this.#Fn.bind(this,n,o,c));const h=tp.createElement({element:"div",class:`${oM}__dot`,listeners:{click:this.doSetFeatureLayerAsActive.bind(this,t,o)}});tp.appendChildren(l,[h,A]),tp.appendChildren(l,[a]),tp.appendChildren(o,[l]);const u=tp.createElement({element:"div",class:`${oM}__wrapper`});this.attachUIButtonCallbacks(e,t,u,a);const d=Mm.get(`${cM}.titles`),g=tp.createElement({element:"div",class:`${oM}__handle oltb-tippy`,title:d.dragToSort,attributes:{"data-oltb-i18n":`${cM}.titles.dragToSort`}});tp.appendChildren(u,[g]),tp.appendChildren(o,[u]),this.uiRefFeatureLayerStack.append(o),this.#gn(this.sortableFeatureLayerStack)}#Dn(t,e){const i=`${cM}.titles.delete`;return tp.createElement({element:"button",class:`${aM} ${aM}--delete oltb-tippy`,title:Mm.get(i),attributes:{type:"button","data-oltb-i18n":i},listeners:{click:this.#In.bind(this,t,e)}})}#On(t,e){const i=`${cM}.titles.download`;return tp.createElement({element:"button",class:`${aM} ${aM}--download oltb-tippy`,title:Mm.get(i),attributes:{type:"button","data-oltb-i18n":i},listeners:{click:this.#Tn.bind(this,t,e)}})}#Pn(t,e,i){const n=`${cM}.titles.rename`;return tp.createElement({element:"button",class:`${aM} ${aM}--edit oltb-tippy`,title:Mm.get(n),attributes:{type:"button","data-oltb-i18n":n},listeners:{click:this.#Mn.bind(this,t,e,i)}})}askToDownloadLayer(t,e){return new iM({onDownload:i=>{const n=JL(i.format);if(!n)return rg.logError(nM,"onLayerDownload",{title:"Error",message:`The layer format is not supported (${n})`}),void Nm.error({i18nKey:`${AM}.toasts.errors.unsupportedFormat`});rg.logDebug(nM,"onLayerDownload",{layerName:t.getName(),formatName:i.format,format:n}),this.doDownloadLayer(t,n,i,e)}})}askToRenameLayer(t,e,i){const n=Mm.get(`${AM}.dialogs.prompts.renameLayer`);return B_.prompt({title:n.title,message:`${n.message} <strong>${t.getName()}</strong>`,value:t.getName(),confirmText:n.confirmText,cancelText:n.cancelText,onConfirm:n=>{null!==n&&n.length&&(t.setName(n),i.innerText=n.ellipsis(20),i.getTippy().setContent(n),e&&e(t))}})}askToDeleteLayer(t,e){const i=Mm.get(`${AM}.dialogs.confirms.deleteLayer`);return B_.confirm({title:i.title,message:`${i.message} <strong>${t.getName()}</strong>?`,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:()=>{e(t)}})}doClearState(){this.localStorage=Fh.cloneDeep(dM),sp.setStateObject(uM,dM)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(e=>{this.localStorage[t]=e,sp.setStateObject(uM,this.localStorage)}))}doMapLayerAdded(t){const e=t.detail.isSilent,i=t.detail.layerWrapper,n=t.detail.disableMapLayerEditButton||this.options.disableMapLayerEditButton||!1,s=t.detail.disableMapLayerDeleteButton||this.options.disableMapLayerDeleteButton||!1;this.#kn(i,{...!n&&{editButton:{function:this.#Pn.bind(this),callback:this.options.onMapLayerRenamed.bind(this)}},...!s&&{deleteButton:{function:this.#Dn.bind(this),callback:gw.removeMapLayer.bind(gw)}}}),!e&&this.options.onMapLayerAdded&&this.options.onMapLayerAdded(i)}doRemoveUILayerItem(t,e){const i=t.querySelector(e);i&&tp.removeElement(i)}doMapLayerRemoved(t){Av.hideOverlay();const e=t.detail.isSilent,i=t.detail.layerWrapper,n=i.getId();this.doRemoveUILayerItem(this.uiRefMapLayerStack,`#${lM}-map-${n}`),!e&&this.options.onMapLayerRemoved&&this.options.onMapLayerRemoved(i)}doFeatureLayerAdded(t){const e=t.detail.isSilent,i=t.detail.layerWrapper,n=t.detail.disableFeatureLayerEditButton||this.options.disableFeatureLayerEditButton||!1,s=t.detail.disableFeatureLayerDownloadButton||this.options.disableFeatureLayerDownloadButton||!1,r=t.detail.disableFeatureLayerDeleteButton||this.options.disableFeatureLayerDeleteButton||!1;this.doRemoveActiveFeatureLayerClass(),this.#Un(i,{...!n&&{editButton:{function:this.#Pn.bind(this),callback:this.options.onFeatureLayerRenamed}},...!s&&{downloadButton:{function:this.#On.bind(this),callback:this.options.onFeatureLayerDownloaded}},...!r&&{deleteButton:{function:this.#Dn.bind(this),callback:gw.removeFeatureLayer.bind(gw)}}}),!e&&this.options.onFeatureLayerAdded&&this.options.onFeatureLayerAdded(i)}doSetActiveLayerAsSelected(t){const e=gw.getActiveFeatureLayer();e&&t.querySelectorAll("li").forEach((t=>{e.getId()===t.getAttribute("data-oltb-id")&&t.classList.add(`${oM}__item--active`)}))}doFeatureLayerRemoved(t){Av.hideOverlay();const e=t.detail.isSilent,i=t.detail.layerWrapper,n=i.getId();this.doRemoveUILayerItem(this.uiRefFeatureLayerStack,`#${lM}-feature-${n}`),this.doRemoveActiveFeatureLayerClass(),this.doSetActiveLayerAsSelected(this.uiRefFeatureLayerStack),!e&&this.options.onFeatureLayerRemoved&&this.options.onFeatureLayerRemoved(i)}doSetFeatureLayerAsActive(t,e){this.doRemoveActiveFeatureLayerClass(),gw.setActiveFeatureLayer(t),e.classList.add(`${oM}__item--active`)}doRemoveActiveFeatureLayerClass(){this.uiRefFeatureLayerStack.querySelectorAll("li").forEach((t=>{t.classList.remove(`${oM}__item--active`)}))}doToggleLayerVisibility(t){const e=t.getLayer(),i=!e.getVisible();return e.setVisible(i),i}doSetLayerFeaturesVisibility(t,e,i=!1){const n=t.getLayer();this.hasLayerFeatures(n)&&n.getSource().getFeatures().forEach((t=>{py.hasTooltip(t)&&py.getTooltip(t).setMap(i?e:null)}))}doChangeLayerVisibility(t,e){const i=this.getMap();if(!i)return;Av.hideOverlay();const n=this.doToggleLayerVisibility(t);this.doSetLayerFeaturesVisibility(t,i,n),e&&e(t)}doDownloadLayer(t,e,i,n){const s=t.getLayer().getSource().getFeatures(),r=e.writeFeatures(s,{featureProjection:Jg.getConfig().projection.default}),o=`${t.getName()}.${i.format.toLowerCase()}`;aF(o,r),n&&n(t,o,r)}doAddMapLayer(t){const e=function(t,e){return t in JS?new JS[t](e):null}(t.layer,{projection:t.projection||Jg.getConfig().projection.default,source:iF(t.source,{url:t.url,params:JSON.parse(t.parameters),wrapX:t.wrapX,attributions:t.attributions,..."undefined"!==t.crossOrigin&&{crossOrigin:t.crossOrigin},format:JL(t.source)})});return gw.addMapLayer({name:t.name,sortIndex:0,isDynamicallyAdded:t.isDynamicallyAdded,layer:e})}doAddFeatureLayer(t){return gw.addFeatureLayer({name:t.name,sortIndex:0,isDynamicallyAdded:t.isDynamicallyAdded})}doShowAddMapLayerModal(){if(this.layerModal)return;const t=this.uiRefAddMapLayerText.value;this.layerModal=new oF({name:t,onCreate:t=>{this.#En(t)},onClose:()=>{this.layerModal=void 0}})}},SplitViewTool:class extends $x{constructor(t={}){super({filename:XT});const e=zm({path:Gm.arrowsExpandVertical.stroked,class:`${qT}__icon`}),i=Mm.get(eR),n=tp.createElement({element:"button",html:e,class:qT,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.splitViewTool})`,"data-tippy-content-post":`(${Zx.splitViewTool})`,"data-oltb-i18n":`${eR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(nR),t),this.localStorage=sp.getAndMergeStateObject(sR,rR),this.#vi(),this.#Nn(),this.uiRefToolboxSection=window.document.querySelector(`#${tR}-toolbox`),this.#bi(),this.uiRefLeftSource=this.uiRefToolboxSection.querySelector(`#${tR}-left-source`),this.uiRefLeftSource.addEventListener(ep.browser.change,this.updateTool.bind(this)),this.uiRefRightSource=this.uiRefToolboxSection.querySelector(`#${tR}-right-source`),this.uiRefRightSource.addEventListener(ep.browser.change,this.updateTool.bind(this));this.uiRefToolboxSection.querySelector(`#${tR}-swap-button`).addEventListener(ep.browser.click,(t=>{this.#Qn()})),this.uiRefSplitViewSlider=lp.getMapElement().querySelector(`#${tR}-slider`),this.uiRefSplitViewSlider.addEventListener(ep.browser.input,this.#Hn.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowMapLayerAddedBind=this.#vn.bind(this),this.onWindowMapLayerRemovedBind=this.#bn.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.addEventListener(ep.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.mapLayerAdded,this.onWindowMapLayerAddedBind),window.removeEventListener(ep.custom.mapLayerRemoved,this.onWindowMapLayerRemovedBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),gw.getMapLayerSize()<2?Nm.info({i18nKey:`${eR}.toasts.infos.strictOneLayer`}):(this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked())}#vi(){const t=Mm.get(`${eR}.toolbox`),e=Mm.get(`${iR}.titles`),i=`\n            <div id="${tR}-toolbox" class="${ZT}">\n                <div class="${ZT}__header oltb-toggleable" data-oltb-toggleable-target="${tR}-toolbox-collapsed">\n                    <h4 class="${ZT}__title" data-oltb-i18n="${eR}.toolbox.titles.splitView">${t.titles.splitView}</h4>\n                    <span class="${ZT}__icon oltb-tippy" data-oltb-i18n="${iR}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${ZT}__groups" id="${tR}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${ZT}__group ${ZT}__group--split-group">\n                        <div class="${ZT}__group-part">\n                            <label class="oltb-label" for="${tR}-left-source" data-oltb-i18n="${eR}.toolbox.groups.leftSide.title">${t.groups.leftSide.title}</label>\n                            <select id="${tR}-left-source" class="oltb-select"></select>\n                        </div>\n                        <div class="${ZT}__group-part" style="flex: none;">\n                            <button type="button" id="${tR}-swap-button" class="oltb-btn oltb-btn--green-mid oltb-tippy" title="${t.groups.swapSides.swap}">\n                                ${zm({path:Gm.arrowLeftRight.stroked,width:20,height:20,class:"oltb-btn__icon"})}\n                            </button>\n                        </div>\n                        <div class="${ZT}__group-part">\n                            <label class="oltb-label" for="${tR}-source" data-oltb-i18n="${eR}.toolbox.groups.rightSide.title">${t.groups.rightSide.title}</label>\n                            <select id="${tR}-right-source" class="oltb-select"></select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#Nn(){lp.getMapElement().insertAdjacentHTML("beforeend",`\n            <input type="range" min="0" max="100" value="50" class="oltb-slider" id="${tR}-slider">\n        `)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}activateTool(){this.isActive=!0,this.setDefaultSelectedIndexes().doDispatchChangeEvent(),this.layerLoadingError?this.isActive=!1:(this.uiRefToolboxSection.classList.add(`${ZT}--show`),this.uiRefSplitViewSlider.classList.add(`${JT}--show`),this.button.classList.add(`${qT}--active`),this.localStorage.isActive=!0,sp.setStateObject(sR,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}deactivateTool(){const t=this.getMap();t&&(di(this.onPreRenderListener),di(this.onPostRenderListener),gw.getMapLayers().forEach((e=>{t.removeLayer(e.getLayer())})),gw.getMapLayers().forEach((e=>{t.addLayer(e.getLayer())})),gw.setTopMapLayerAsOnlyVisible(),this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${ZT}--show`),this.uiRefSplitViewSlider.classList.remove(`${JT}--show`),this.button.classList.remove(`${qT}--active`),this.localStorage.isActive=!1,sp.setStateObject(sR,this.localStorage))}updateTool(){this.doUpdateTool(this.uiRefLeftSource.value,this.uiRefRightSource.value)}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.splitViewTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#vn(t){this.doMapLayerAdded(t)}#bn(t){this.doMapLayerRemoved(t),this.doDispatchChangeEvent()}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#Qn(){this.doSwapLayerSides(),this.doDispatchChangeEvent()}#Hn(t){const e=this.getMap();e&&e.render()}#Gn(t){const e=this.getMap();e&&this.doPreRender(t,e)}#Vn(t){t.context.restore()}setDefaultSelectedIndexes(){return this.uiRefLeftSource.selectedIndex=String(1),this.uiRefRightSource.selectedIndex=String(0),this}setLoadingError(){this.layerLoadingError=!0,rg.logError(XT,"setLoadingError",{message:"One or both of the layers could not be loaded"}),Nm.error({i18nKey:`${eR}.toasts.errors.layerFailedToLoad`})}doClearState(){this.localStorage=Fh.cloneDeep(rR),sp.setStateObject(sR,rR)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(sR,this.localStorage)}))}doMapLayerRemoved(t){const e=t.detail.layerWrapper;this.uiRefLeftSource.childNodes.forEach((t=>{t.value===e.getId()&&tp.removeElement(t)})),this.uiRefRightSource.childNodes.forEach((t=>{t.value===e.getId()&&tp.removeElement(t)}))}doMapLayerAdded(t){const e=t.detail.layerWrapper,i=tp.createElement({element:"option",text:e.getName(),value:e.getId().toString()}),n=tp.createElement({element:"option",text:e.getName(),value:e.getId().toString()});tp.appendChildren(this.uiRefLeftSource,[i]),tp.appendChildren(this.uiRefRightSource,[n])}doPreRender(t,e){const i=t.context,n=e.getSize(),s=Jg.getConfig().browser.rem,r=this.uiRefSplitViewSlider.offsetWidth,o=r/2,a=(this.uiRefSplitViewSlider.value/(this.uiRefSplitViewSlider.max-this.uiRefSplitViewSlider.min)*r-o)/o*s,l=n[0],A=n[1],c=l*(this.uiRefSplitViewSlider.value/this.uiRefSplitViewSlider.max)-a,h=lg(t,[c,0]),u=lg(t,[l,0]),d=lg(t,[c,A]),g=lg(t,[l,A]);i.save(),i.beginPath(),i.moveTo(h[0],h[1]),i.lineTo(d[0],d[1]),i.lineTo(g[0],g[1]),i.lineTo(u[0],u[1]),i.closePath(),i.clip()}doSwapLayerSides(){const t=this.uiRefRightSource.value;this.uiRefRightSource.value=this.uiRefLeftSource.value,this.uiRefLeftSource.value=t}doDispatchChangeEvent(){wm.dispatchEvent([this.uiRefLeftSource,this.uiRefRightSource],ep.browser.change)}doAddMapLayer(t){t.setVisible(!0),this.getMap().addLayer(t)}doRemoveMapLayer(t){t.setVisible(!1),this.getMap().removeLayer(t)}doUpdateTool(t,e){if(!this.isActive)return;const i=this.getMap();if(!i)return;di(this.onPreRenderListener),di(this.onPostRenderListener),gw.getMapLayers().forEach((t=>{this.doRemoveMapLayer(t.getLayer())}));const n=gw.getMapLayerById(t),s=gw.getMapLayerById(e);if(!n||!s)return void this.setLoadingError();const r=n.getLayer(),o=s.getLayer();this.doAddMapLayer(r),t!==e&&(this.doAddMapLayer(o),this.onPreRenderListener=o.on(ep.openLayers.preRender,this.#Gn.bind(this)),this.onPostRenderListener=o.on(ep.openLayers.postRender,this.#Vn.bind(this))),i.render()}},OverviewTool:class extends $x{constructor(t={}){super({filename:"overview-tool.js"});const e=zm({path:Gm.pip.stroked,class:`${nT}__icon`}),i=Mm.get(aT),n=tp.createElement({element:"button",html:e,class:nT,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.overviewTool})`,"data-tippy-content-post":`(${Zx.overviewTool})`,"data-oltb-i18n":`${aT}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(AT),t),this.localStorage=sp.getAndMergeStateObject(cT,hT),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${rT}-toolbox`),this.#bi(),this.overviewMap=this.#zn(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${aT}.toolbox`),e=Mm.get(`${lT}.titles`),i=`\n            <div id="${rT}-toolbox" class="${sT}">\n                <div class="${sT}__header oltb-toggleable" data-oltb-toggleable-target="${rT}-toolbox-collapsed">\n                <h4 class="${sT}__title" data-oltb-i18n="${aT}.toolbox.titles.overview">${t.titles.overview}</h4>\n                    <span class="${sT}__icon oltb-tippy" data-oltb-i18n="${lT}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${sT}__groups" id="${rT}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${sT}__group" id="${oT}"></div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#zn(){return new Vx({target:oT,isCollapsed:!1,collapsible:!1,layers:[new Ny({source:new cw})]})}activateTool(){const t=this.getMap();t&&(this.uiRefToolboxSection.classList.add(`${sT}--show`),this.doAddOverview(t),this.isActive=!0,this.button.classList.add(`${nT}--active`),this.localStorage.isActive=!0,sp.setStateObject(cT,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}))}deactivateTool(){this.doRemoveOverview(),this.isActive=!1,this.button.classList.remove(`${nT}--active`),this.uiRefToolboxSection.classList.remove(`${sT}--show`),this.localStorage.isActive=!1,sp.setStateObject(cT,this.localStorage)}#xi(t){if(!this.getMap())return;const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.overviewTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=Fh.cloneDeep(hT),sp.setStateObject(cT,hT)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(cT,this.localStorage);const e=this.getMap();this.overviewMap.setMap(null),this.overviewMap.setMap(e)}))}doAddOverview(t){this.overviewMap.setMap(t)}doRemoveOverview(){this.overviewMap.setMap(null)}},GraticuleTool:class extends $x{constructor(t={}){super({filename:"graticule-tool.js"});const e=zm({path:Gm.globe.stroked,class:`${yR}__icon`}),i=Mm.get(wR),n=tp.createElement({element:"button",html:e,class:yR,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.graticuleTool})`,"data-tippy-content-post":`(${Zx.graticuleTool})`,"data-oltb-i18n":`${wR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(CR),t),this.localStorage=sp.getAndMergeStateObject(xR,BR),this.graticule=this.#Kn(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#Kn(){return new hg({strokeStyle:new Vo({color:this.options.color,width:this.options.width,lineDash:this.options.dashed?vR:bR}),showLabels:this.options.showLabels,isVisible:!0,wrapX:this.options.wrapX})}activateTool(){const t=this.getMap();t&&(this.doAddGraticuleLines(t),this.isActive=!0,this.button.classList.add(`${yR}--active`),this.localStorage.isActive=!0,sp.setStateObject(xR,this.localStorage))}deactivateTool(){this.doRemoveGraticuleLines(),this.isActive=!1,this.button.classList.remove(`${yR}--active`),this.localStorage.isActive=!1,sp.setStateObject(xR,this.localStorage)}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.graticuleTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=Fh.cloneDeep(BR),sp.setStateObject(xR,BR)}doAddGraticuleLines(t){this.graticule.setMap(t)}doRemoveGraticuleLines(){this.graticule.setMap(null)}},MagnifyTool:class extends $x{constructor(t={}){super({filename:EM});const e=zm({path:Gm.search.stroked,class:`${SM}__icon`}),i=Mm.get(FM),n=tp.createElement({element:"button",html:e,class:SM,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.magnifyTool})`,"data-tippy-content-post":`(${Zx.magnifyTool})`,"data-oltb-i18n":`${FM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.options=Fh.merge(Fh.cloneDeep(IM),t),this.localStorage=sp.getAndMergeStateObject(LM,MM),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.attachMapListeners(),this.isActive=!0,this.button.classList.add(`${SM}--active`),this.localStorage.isActive=!0,sp.setStateObject(LM,this.localStorage)}deactivateTool(){this.detachMapListeners(),this.isActive=!1,this.button.classList.remove(`${SM}--active`),this.localStorage.isActive=!1,sp.setStateObject(LM,this.localStorage)}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.magnifyTool)&&this.onClickTool(t)}#jn(t){t.preventDefault();const e=t.key,i=this.getMap();i&&(this.doChangeMagnifyerSize(e),i.render())}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#Wn(t){const e=this.getMap();e&&(this.mousePosition=e.getEventPixel(t),e.render())}#$n(t){const e=this.getMap();e&&(this.mousePosition=void 0,e.render())}#Yn(t){this.mousePosition&&this.doPostRender(t)}attachMapListeners(){const t=this.getMap();if(!t)return;const e=t.getTarget();this.onMousemoveListenert=this.#Wn.bind(this),this.onMouseoutListenert=this.#$n.bind(this),this.onKeydownListener=this.#jn.bind(this),e.addEventListener(ep.browser.mouseMove,this.onMousemoveListenert),e.addEventListener(ep.browser.mouseOut,this.onMouseoutListenert),window.document.addEventListener(ep.browser.keyDown,this.onKeydownListener),this.onPostrenderListeners=[],t.getLayers().getArray().forEach((t=>{this.onPostrenderListeners.push(t.on(ep.openLayers.postRender,this.#Yn.bind(this)))}))}detachMapListeners(){const t=this.getMap();if(!t)return;const e=t.getTarget();e.removeEventListener(ep.browser.mouseMove,this.onMousemoveListenert),e.removeEventListener(ep.browser.mouseOut,this.onMouseoutListenert),window.document.removeEventListener(ep.browser.keyDown,this.onKeydownListener),this.onPostrenderListeners.forEach((t=>{di(t)})),t.render()}doChangeMagnifyerSize(t){t===Qm.valueAdd?this.options.radius=Math.min(this.options.radius+5,this.options.max):t===Qm.valueSubtract&&(this.options.radius=Math.max(this.options.radius-5,this.options.min))}doClearState(){this.localStorage=Fh.cloneDeep(MM),sp.setStateObject(LM,MM)}doPostRender(t){const e=this.mousePosition,i=this.options.radius,n=lg(t,e),s=lg(t,[e[0]+i,e[1]]),r=Math.sqrt(Math.pow(s[0]-n[0],2)+Math.pow(s[1]-n[1],2)),o=t.context,a=n[0],l=n[1],A=a-r,c=l-r,h=Math.round(2*r+1);try{const t=o.getImageData(A,c,h,h).data,e=o.createImageData(h,h),n=e.data;for(let e=0;e<h;++e)for(let i=0;i<h;++i){const s=i-r,o=e-r,a=Math.sqrt(s*s+o*o);let l=i,A=e;a<r&&(l=Math.round(r+s/2),A=Math.round(r+o/2));const c=4*(e*h+i),u=4*(A*h+l);n[c]=t[u],n[c+1]=t[u+1],n[c+2]=t[u+2],n[c+3]=t[u+3]}o.beginPath(),o.arc(a,l,r,0,2*Math.PI),o.lineWidth=3*r/i,o.strokeStyle="#3b4352FF",o.putImageData(e,A,c),o.stroke(),o.restore()}catch(t){this.deactivateTool(),rg.logError(EM,"onPostrender",{message:"Unexpected error using magnifyer",error:t}),Nm.error({i18nKey:`${FM}.toasts.errors.renderCanvas`})}}},ResetNorthTool:class extends $x{constructor(t={}){super({filename:PR}),this.icon=zm({path:Gm.compass.stroked,class:`${NR}__icon`}),this.resetRotationIcon=zm({path:Gm.arrowRepeat.stroked,class:`${NR}__icon`});const e=Mm.get(QR),i=tp.createElement({element:"button",html:this.icon,class:NR,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.resetNorthTool})`,"data-tippy-content-post":`(${Zx.resetNorthTool})`,"data-oltb-i18n":`${QR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[i]),this.button=i,this.options=Fh.merge(Fh.cloneDeep(HR),t),this.#Xe(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#Xe(){iB.addItem({icon:this.resetRotationIcon,i18nKey:`${QR}.contextItems.rotate`,fn:this.#Xn.bind(this)})}momentaryActivation(){const t=this.getMap();if(!t)return;const e=t.getView(),i=e.getZoom(),n=Be(e.getCenter());qx({map:t,coordinates:n,zoom:i,rotation:0,onDone:t=>{this.options.onReset&&this.options.onReset(t)}})}#Z(t){nB(t,Zx.resetNorthTool)&&this.onClickTool(t)}#Xn(t,e,i){this.askToSetRotation(t)}askToSetRotation(t){const e=t.getView(),i=e.getZoom(),n=K_.radiansToDegrees(e.getRotation()),s=n<0?n+360:n,r=Be(e.getCenter()),o=Mm.get(`${QR}.dialogs.prompts.rotateMap`);return B_.prompt({title:o.title,message:o.message,value:Math.round(s),confirmText:o.confirmText,cancelText:o.cancelText,onConfirm:e=>{e.isDigitsOnly()?this.doRotation(t,r,i,e):(rg.logError(PR,"askToSetRotation",{message:"Only digits are allowed as input",result:e}),Nm.error({i18nKey:`${QR}.toasts.errors.invalidValue`}))}})}doRotation(t,e,i,n){const s=K_.degreesToRadians(n);rg.logDebug(PR,"doRotation",{degrees:n,radians:s}),qx({map:t,coordinates:e,zoome:i,rotation:s})}},CoordinatesTool:class extends $x{constructor(t={}){super({filename:jR});const e=zm({path:Gm.crosshair.stroked,class:`${WR}__icon`}),i=Mm.get(qR),n=tp.createElement({element:"button",html:e,class:WR,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.coordinatesTool})`,"data-tippy-content-post":`(${Zx.coordinatesTool})`,"data-oltb-i18n":`${qR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.tooltipItem=void 0,this.projections=new Map,this.options=Fh.merge(Fh.cloneDeep(JR),t),this.localStorage=sp.getAndMergeStateObject(tk,ek),this.#vi(),this.uiRefToolboxSection=window.document.querySelector(`#${YR}-toolbox`),this.#bi(),this.#Mi(),this.uiRefCoordinatesTable=this.uiRefToolboxSection.querySelector(`#${YR}-table`),this.uiRefCoordinatesFormat=this.uiRefToolboxSection.querySelector(`#${YR}-format`),this.uiRefCoordinatesFormat.value=this.localStorage.coordinatesFormat,this.uiRefCoordinatesFormat.addEventListener(ep.browser.change,this.#qn.bind(this)),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyDownBind=this.#fi.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyDown,this.onWindowKeyDownBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyDown,this.onWindowKeyDownBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}#vi(){const t=Mm.get(`${qR}.toolbox`),e=Mm.get(`${ZR}.titles`),i=`\n            <div id="${YR}-toolbox" class="${$R}">\n                <div class="${$R}__header oltb-toggleable" data-oltb-toggleable-target="${YR}-toolbox-collapsed">\n                    <h4 class="${$R}__title" data-oltb-i18n="${qR}.toolbox.titles.coordinates">${t.titles.coordinates}</h4>\n                    <span class="${$R}__icon oltb-tippy" data-oltb-i18n="${ZR}.titles.toggleSection" title="${e.toggleSection}"></span>\n                </div>\n                <div class="${$R}__groups" id="${YR}-toolbox-collapsed" style="display: ${this.localStorage.isCollapsed?"none":"block"}">\n                    <div class="${$R}__group">\n                        <label class="oltb-label" for="${YR}-format" data-oltb-i18n="${qR}.toolbox.groups.formats.title">${t.groups.formats.title}</label>\n                        <select id="${YR}-format" class="oltb-select">\n                            <option value="DD" data-oltb-i18n="${qR}.toolbox.groups.formats.dd">${t.groups.formats.dd}</option>\n                            <option value="DMS" data-oltb-i18n="${qR}.toolbox.groups.formats.dms">${t.groups.formats.dms}</option>\n                        </select>\n                    </div>\n                    <div class="${$R}__group">\n                        <label class="oltb-label" data-oltb-i18n="${qR}.toolbox.groups.coordinates.title">${t.groups.coordinates.title} <em>(Lat, Lon)</em></label>\n                        <table class="oltb-table oltb-table--horizontal oltb-table--no-background oltb-table--tight-bottom-and-top oltb-mt-05" id="${YR}-table"></table>\n                    </div>\n                </div>\n            </div>\n        `;lp.getToolboxElement().insertAdjacentHTML("beforeend",i)}#bi(){this.uiRefToolboxSection.querySelectorAll(".oltb-toggleable").forEach((t=>{t.addEventListener(ep.browser.click,this.#xi.bind(this,t))}))}#Mi(){yw.addSetting(E_.copyCoordinatesOnClick,{state:!0,i18nBase:`${qR}.settings`,i18nKey:"copyOnClick"}),yw.addSetting(E_.updateToolboxCoordinatesOnHover,{state:!0,i18nBase:`${qR}.settings`,i18nKey:"updateToolboxOnHover"})}activateTool(){this.#Zn(),this.isActive=!0,this.uiRefToolboxSection.classList.add(`${$R}--show`),this.button.classList.add(`${WR}--active`),this.localStorage.isActive=!0,sp.setStateObject(tk,this.localStorage),this.uiRefToolboxSection.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}deactivateTool(){this.#Jn(),this.isActive=!1,this.uiRefToolboxSection.classList.remove(`${$R}--show`),this.button.classList.remove(`${WR}--active`),this.localStorage.isActive=!1,sp.setStateObject(tk,this.localStorage)}#O(t){this.localStorage.isActive&&this.activateTool()}#fi(t){nB(t,Zx.coordinatesTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}#xi(t){const e=t.dataset.oltbToggleableTarget;this.doToggleToolboxSection(e)}#qn(){this.localStorage.coordinatesFormat=this.uiRefCoordinatesFormat.value,sp.setStateObject(tk,this.localStorage)}#jt(t){this.doCreateTooltipCoordinates(t),this.shouldUpdateToolboxCoordinatesOnHover()&&this.doCreateToolboxCoordinates(t)}#Te(t){this.doCopyCoordinatesAsync(t),this.shouldCopyCoordinatesOnClick()||this.toolboxCoordinates(t);const e=this.doCreateToolCoordinatesList(t.coordinate);this.options.onMapClicked&&this.options.onMapClicked(e)}shouldCopyCoordinatesOnClick(){return yw.getSetting(E_.copyCoordinatesOnClick)}shouldUpdateToolboxCoordinatesOnHover(){return yw.getSetting(E_.updateToolboxCoordinatesOnHover)}toDecimalDegrees(t,e){t.innerHTML=`\n            ${parseFloat(e[1]).toFixed(4)}, \n            ${parseFloat(e[0]).toFixed(4)}\n        `}toDegreeMinutesSeconds(t,e){const i=ct(e);t.innerHTML=i}#Zn(){const t=this.getMap();if(!t)return;Ox.getProjections().forEach((t=>{const e=tp.createElement({element:"tr"}),i=tp.createElement({element:"th",text:t.name,title:t.code,class:"oltb-tippy"});tp.appendChildren(e,[i]);const n=tp.createElement({element:"tr"}),s=tp.createElement({element:"td",text:"-"});tp.appendChildren(n,[s]),tp.appendChildren(this.uiRefCoordinatesTable,[e,n]),this.projections.set(t.code,s)})),this.tooltipItem=Sw.push(XR),this.onPointerMoveListener=t.on(ep.openLayers.pointerMove,this.#jt.bind(this)),this.onMapClickListener=t.on(ep.browser.click,this.#Te.bind(this))}#Jn(){tp.clearElement(this.uiRefCoordinatesTable),Sw.pop(XR),di(this.onPointerMoveListener),di(this.onMapClickListener)}doClearState(){this.localStorage=Fh.cloneDeep(ek),sp.setStateObject(tk,ek)}doToggleToolboxSection(t){const e=window.document.getElementById(t),i=Jg.getConfig().animationDuration.fast;e?.slideToggle(i,(t=>{this.localStorage.isCollapsed=t,sp.setStateObject(tk,this.localStorage)}))}doCreateToolCoordinatesList(t){const e=Ox.getProjections(),i=[];return e.forEach((e=>{const n=Le(t,Jg.getConfig().projection.default,e.code),s=ct(n);i.push({code:e.code,name:e.name,coordinates:n,prettyCoordinates:s})})),i}doCreateTooltipCoordinates(t){const e=Jg.getConfig().projection,i=ct(Le(t.coordinate,e.default,e.wgs84));this.tooltipItem.innerHTML=i}doCreateToolboxCoordinates(t){Ox.getProjections().forEach((e=>{const i=Le(t.coordinate,Jg.getConfig().projection.default,e.code),n=this.uiRefCoordinatesFormat.value,s=this.projections.get(e.code);"DMS"===n?this.toDegreeMinutesSeconds(s,i):this.toDecimalDegrees(s,i)}))}async doCopyCoordinatesAsync(t){if(!this.shouldCopyCoordinatesOnClick()||k_.hasActiveTool())return;const e=Jg.getConfig().projection,i=ct(Le(t.coordinate,e.default,e.wgs84));try{await Xw(i),Nm.info({i18nKey:`${qR}.toasts.infos.copyCoordinates`,autoremove:!0})}catch(t){rg.logError(jR,"doCopyCoordinatesAsync",{message:"Failed to copy coordinates",error:t}),Nm.error({i18nKey:`${qR}.toasts.errors.copyCoordinates`})}}},MyLocationTool:class extends $x{constructor(t={}){super({filename:MR});const e=zm({path:Gm.geoMarker.stroked,class:`${TR}__icon`}),i=Mm.get(UR),n=tp.createElement({element:"button",html:e,class:TR,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.myLocationTool})`,"data-tippy-content-post":`(${Zx.myLocationTool})`,"data-oltb-i18n":`${UR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.options=Fh.merge(Fh.cloneDeep(OR),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){LR.isFullscreen?this.askToExitFullscreen():this.doGeoLocationSearch()}#Z(t){nB(t,Zx.myLocationTool)&&this.onClickTool(t)}#ts(t){this.doLocationFound(t)}#Zt(t){this.doLocationError(t)}askToExitFullscreen(){const t=Mm.get(`${UR}.dialogs.confirms.exitFullscreen`);return B_.confirm({title:t.title,message:t.message,confirmClass:B_.Success,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:async()=>LR.exit().then((()=>{this.doGeoLocationSearch()})).catch((t=>{rg.logError(MR,"askToExitFullscreen",{message:"Failed to exit fullscreen",error:t}),Nm.error({i18nKey:`${UR}.toasts.errors.exitFullscreen`})}))})}doLocationFound(t){const e=this.getMap();if(!e)return;tp.removeElement(this.loadingToast);const i=[t.coords.longitude,t.coords.latitude],n=this.doAddIconMarker(i);this.doFocusMarker(e,n,i,Jg.getConfig().marker.focusZoom),this.options.onLocationFound&&this.options.onLocationFound(t)}doLocationError(t){rg.logError(MR,"doLocationError",{message:t.message,error:t}),Nm.error({i18nKey:`${UR}.toasts.errors.locationNotFound`}),this.options.onError&&this.options.onError(t),this.loadingToast&&tp.removeElement(this.loadingToast)}doFocusMarker(t,e,i,n){qx({map:t,coordinates:i,zoom:n,onDone:t=>{Av.tryPulseAnimation(e),Av.showOverlay(e,xe(i))}})}doAddMarkerToMap(t){gw.addFeatureLayer({name:this.options.title}).getLayer().getSource().addFeature(t)}doAddIconMarker(t){const e=Mm.get(`${DR}.titles`),i=ct(t),n={title:this.options.title,content:`\n                <p>${this.options.description}</p>\n            `,footer:`\n                <span class="oltb-info-window__coordinates">${i}</span>\n                <div class="oltb-info-window__buttons-wrapper">\n                    <button class="${RR} ${RR}--delete oltb-tippy" data-oltb-i18n="${DR}.titles.delete" title="${e.delete}" id="${kR}-remove"></button>\n                    <button class="${RR} ${RR}--crosshair oltb-tippy" data-oltb-i18n="${DR}.titles.copyCoordinates" title="${e.copyCoordinates}" id="${kR}-copy-coordinates" data-oltb-coordinates="${i}"></button>\n                    <button class="${RR} ${RR}--copy oltb-tippy" data-oltb-i18n="${DR}.titles.copyText" title="${e.copyText}" id="${kR}-copy-text" data-oltb-copy="${this.options.description}"></button>\n                    <button class="${RR} ${RR}--layer oltb-tippy" data-oltb-i18n="${DR}.titles.showLayer" title="${e.showLayer}" id="${kR}-show-layer"></button>\n                </div>\n            `},s=py.generateIconMarker({lon:t[0],lat:t[1],title:this.options.title,description:this.options.description,infoWindow:n,icon:{key:"person.filled"},label:{text:this.options.title,useEllipsisAfter:this.options.markerLabelUseEllipsisAfter,useUpperCase:this.options.markerLabelUseUpperCase}});return this.doAddMarkerToMap(s),s}doGeoLocationSearch(){this.loadingToast||(window.navigator&&window.navigator.geolocation?(this.loadingToast=Nm.info({i18nKey:`${UR}.toasts.infos.fetchLocation`,clickToRemove:!1,spinner:!0,onRemove:()=>{this.loadingToast=void 0}}),window.navigator.geolocation.getCurrentPosition(this.#ts.bind(this),this.#Zt.bind(this),{enableHighAccuracy:this.options.enableHighAccuracy,timeout:this.options.timeout})):this.#Zt({message:"Geolocation is not supported"}))}},ImportVectorLayerTool:class extends $x{constructor(t={}){super({filename:pk});const e=zm({path:Gm.folderOpen.stroked,class:`${fk}__icon`}),i=Mm.get(mk),n=tp.createElement({element:"button",html:e,class:fk,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.importVectorLayerTool})`,"data-tippy-content-post":`(${Zx.importVectorLayerTool})`,"data-oltb-i18n":`${mk}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.fileReader=void 0,this.importLayerModal=void 0,this.options=Fh.merge(Fh.cloneDeep(_k),t),this.inputDialog=this.#es(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.importLayerModal||this.inputDialog.click()}#Z(t){nB(t,Zx.importVectorLayerTool)&&this.onClickTool(t)}#es(){return tp.createElement({element:"input",attributes:{type:"file",accept:".geojson, .kml"},listeners:{change:this.#is.bind(this)}})}#is(t){const e=t.target;this.fileReader=new FileReader,this.fileReader.addEventListener(ep.browser.load,this.#ns.bind(this,e)),this.fileReader.readAsText(e.files[0])}#ns(t){if(this.importLayerModal)return;const e=t.files[0].name;this.askToImportLayer(e)}#ss(t,e){this.doImportLayer(t,e)}askToImportLayer(t){this.importLayerModal||(this.importLayerModal=new gk({onImport:e=>{this.#ss(t,e)},onClose:()=>{this.importLayerModal=void 0}}))}doAddFeaturesToMap(t,e){gw.addFeatureLayer({name:e}).getLayer().getSource().addFeatures(t)}doImportLayer(t,e){rg.logDebug(pk,"doImportLayer",{file:t,featureProjection:e.featureProjection,dataProjection:e.dataProjection});try{const i=t.split(".")[0],n=t.split(".").pop().toLowerCase(),s=Object.keys(ZL).find((t=>t.toLowerCase()===n));if(!s)return rg.logError(pk,"doImportLayer",{title:"Error",message:`The layer format is not supported (${s})`}),void Nm.error({i18nKey:`${mk}.toasts.errors.unsupportedFormat`});const r=JL(s).readFeatures(this.fileReader.result,{featureProjection:e.featureProjection,dataProjection:e.dataProjection});this.doAddFeaturesToMap(r,i),this.options.onImported&&this.options.onImported(r)}catch(e){rg.logError(pk,"doImportLayer",{message:"Failed to import vector layer",error:e}),Nm.error({i18nKey:`${mk}.toasts.errors.importFailed`}),this.options.onError&&this.options.onError(t,e)}}},ScaleLineTool:class extends $x{constructor(t={}){super({filename:"scale-line-tool.js"});const e=zm({path:Gm.scaleLine.stroked,class:`${gR}__icon`}),i=Mm.get(pR),n=tp.createElement({element:"button",html:e,class:gR,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.scaleLineTool})`,"data-tippy-content-post":`(${Zx.scaleLineTool})`,"data-oltb-i18n":`${pR}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(fR),t),this.localStorage=sp.getAndMergeStateObject(mR,_R),this.scaleLine=this.#rs(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){const t=this.getMap();t&&(this.doAddScaleLine(t),this.isActive=!0,this.button.classList.add(`${gR}--active`),this.localStorage.isActive=!0,sp.setStateObject(mR,this.localStorage))}deactivateTool(){this.doRemoveScaleLine(),this.isActive=!1,this.button.classList.remove(`${gR}--active`),this.localStorage.isActive=!1,sp.setStateObject(mR,this.localStorage)}#rs(){return new Wx({units:this.options.units})}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.scaleLineTool)&&this.onClickTool(t)}#b(){this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=Fh.cloneDeep(_R),sp.setStateObject(mR,_R)}doAddScaleLine(t){this.scaleLine.setMap(t)}doRemoveScaleLine(){this.scaleLine.setMap(null)}},RefreshTool:class extends $x{constructor(t={}){super({filename:"refresh-tool.js"});const e=zm({path:Gm.arrowClockwise.stroked,class:`${$M}__icon`}),i=Mm.get(YM),n=tp.createElement({element:"button",html:e,class:$M,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.refreshPageTool})`,"data-tippy-content-post":`(${Zx.refreshPageTool})`,"data-oltb-i18n":`${YM}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.options=Fh.merge(Fh.cloneDeep(XM),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doWindowReload()}#Z(t){nB(t,Zx.refreshPageTool)&&this.onClickTool(t)}doWindowReload(){window.location.reload()}},ThemeTool:class extends $x{constructor(t={}){super({filename:"theme-tool.js"});const e=Mm.get(zB),i=tp.createElement({element:"button",html:this.getToolIcon(),class:VB,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.themeTool})`,"data-tippy-content-post":`(${Zx.themeTool})`,"data-oltb-i18n":`${zB}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});tp.appendChildren(this.element,[i]),this.button=i,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(KB),t),this.localStorage=sp.getAndMergeStateObject(WB,$B),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doToggleTheme()}#Z(t){nB(t,Zx.themeTool)&&this.onClickTool(t)}#b(){const t=this.getActiveTheme();this.doSwitchThemeFromTo(t,jB.light),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}getToolIcon(){return o_()?jB.dark.icon:jB.light.icon}getInActiveThem(){return o_()?jB.light:jB.dark}getActiveTheme(){return o_()?jB.dark:jB.light}doToggleTheme(){const t=this.getActiveTheme(),e=this.getInActiveThem();this.doSwitchThemeFromTo(t,e),this.options.onChanged&&this.options.onChanged(e.class)}doSwitchThemeFromTo(t,e){this.localStorage.theme=e.class,sp.setStateObject(WB,this.localStorage);const i="oltb",n=lp.getToolbarElement();n.classList.remove(t.class),window.document.body.classList.remove(`${i}-${t.class}`),n.classList.add(e.class),window.document.body.classList.add(`${i}-${e.class}`),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",e.icon)}},DirectionTool:class extends $x{constructor(t={}){super({filename:"direction-tool.js"});const e=Mm.get(LT),i=tp.createElement({element:"button",html:this.getToolIcon(),class:IT,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.directionTool})`,"data-tippy-content-post":`(${Zx.directionTool})`,"data-oltb-i18n":`${LT}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});tp.appendChildren(this.element,[i]),this.button=i,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(MT),t),this.localStorage=sp.getAndMergeStateObject(RT,kT),this.shouldToolButtonBeHidden(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onWindowSizeCheckBind=this.#os.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.browser.resize,this.onWindowSizeCheckBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onWindowSizeCheckBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doToggleDirection();const t=this.getActiveDirection();wm.dispatchCustomEvent([window],ep.custom.toolbarDirectionChange,{detail:{direction:t.class}})}#Z(t){nB(t,Zx.directionTool)&&this.onClickTool(t)}#os(t){this.shouldToolButtonBeHidden()}#b(){const t=this.getActiveDirection();this.doSwitchDirectionFromTo(t,TT.col),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}shouldToolButtonBeHidden(){window.innerWidth<=Jg.getConfig().deviceWidth.sm?this.button.classList.add(`${IT}--hidden`):this.button.classList.remove(`${IT}--hidden`)}getToolIcon(){return pm()?TT.row.icon:TT.col.icon}getInActiveDirection(){return pm()?TT.col:TT.row}getActiveDirection(){return pm()?TT.row:TT.col}doToggleDirection(){const t=this.getActiveDirection(),e=this.getInActiveDirection();this.doSwitchDirectionFromTo(t,e),this.options.onChanged&&this.options.onChanged(e.class)}doSwitchDirectionFromTo(t,e){this.localStorage.direction=e.class,sp.setStateObject(RT,this.localStorage);const i="oltb",n=lp.getToolbarElement();n.classList.remove(t.class),window.document.body.classList.remove(`${i}-${t.class}`),n.classList.add(e.class),window.document.body.classList.add(`${i}-${e.class}`),this.button.removeChild(this.button.firstElementChild),this.button.insertAdjacentHTML("afterbegin",e.icon)}},ToolboxTool:class extends $x{constructor(t={}){super({filename:"toolbox-tool.js"});const e=zm({path:Gm.layoutSsidebarInsetReverse.mixed,class:`${GM}__icon`}),i=Mm.get(zM),n=tp.createElement({element:"button",html:e,class:GM,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.toolboxTool})`,"data-tippy-content-post":`(${Zx.toolboxTool})`,"data-oltb-i18n":`${zM}.title`},listeners:{click:this.onClickTool.bind(this)},prototypes:{getTippy:function(){return this._tippy}}});tp.appendChildren(this.element,[n]),this.button=n,this.isActive=!1,this.options=Fh.merge(Fh.cloneDeep(KM),t),this.localStorage=sp.getAndMergeStateObject(jM,WM),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),this.onOLTBReadyBind=this.#O.bind(this),this.onWindowBrowserStateClearedBind=this.#b.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.addEventListener(ep.custom.ready,this.onOLTBReadyBind),window.addEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind),window.removeEventListener(ep.custom.ready,this.onOLTBReadyBind),window.removeEventListener(ep.custom.browserStateCleared,this.onWindowBrowserStateClearedBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.isActive?this.deactivateTool():this.activateTool(),this.options.onClicked&&this.options.onClicked()}activateTool(){this.doHideToolbox(),this.isActive=!0,this.button.classList.add(`${GM}--active`),this.localStorage.isActive=!0,sp.setStateObject(jM,this.localStorage)}deactivateTool(){this.doShowToolbox(),this.isActive=!1,this.button.classList.remove(`${GM}--active`),this.localStorage.isActive=!1,sp.setStateObject(jM,this.localStorage)}#O(t){this.localStorage.isActive&&this.activateTool()}#Z(t){nB(t,Zx.toolboxTool)&&this.onClickTool(t)}#b(){this.doShowToolbox(),this.doClearState(),this.isActive&&this.deactivateTool(),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}doClearState(){this.localStorage=Fh.cloneDeep(WM),sp.setStateObject(jM,WM)}doShowToolbox(){lp.getToolboxElement().classList.remove(VM),this.options.onChanged&&this.options.onChanged("visible")}doHideToolbox(){lp.getToolboxElement().classList.add(VM),this.options.onChanged&&this.options.onChanged("hidden")}},InfoTool:class extends $x{constructor(t={}){super({filename:"info-tool.js"});const e=zm({path:Gm.infoCircle.stroked,class:`${DB}__icon`}),i=Mm.get(OB),n=tp.createElement({element:"button",html:e,class:DB,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.infoTool})`,"data-tippy-content-post":`(${Zx.infoTool})`,"data-oltb-i18n":`${OB}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.infoModal=void 0,this.options=Fh.merge(Fh.cloneDeep(PB),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.doShowInfoModal()}#Z(t){nB(t,Zx.infoTool)&&this.onClickTool(t)}doShowInfoModal(){this.infoModal||(this.infoModal=qm.create({title:this.options.title,content:this.options.content,onClose:()=>{this.infoModal=void 0}}))}},TranslationTool:class extends $x{constructor(t={}){super({filename:ik});const e=zm({path:Gm.translate.mixed,class:`${nk}__icon`}),i=Mm.get(sk),n=tp.createElement({element:"button",html:e,class:nk,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.translationTool})`,"data-tippy-content-post":`(${Zx.translationTool})`,"data-oltb-i18n":`${sk}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.languageDialog=void 0,this.options=Fh.merge(Fh.cloneDeep(rk),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.askToChangeLanguage()}#Z(t){nB(t,Zx.translationTool)&&this.onClickTool(t)}askToChangeLanguage(){if(this.languageDialog)return;const t=Mm.getLanguages(),e=Mm.getActiveLanguage(),i=Mm.get(`${sk}.dialogs.selects.changeLanguage`);this.languageDialog=B_.select({title:i.title,message:`${i.message} <strong>${e.text}</strong>`,value:e.value,options:t,confirmText:i.confirmText,cancelText:i.cancelText,onConfirm:t=>{this.doChangeLanguage(t),this.languageDialog=void 0},onCancel:()=>{this.languageDialog=void 0}})}doChangeLanguage(t){rg.logInformation(ik,"doChangeLanguage",{from:t.from,to:t.to}),Mm.setActiveLanguage(t.to)}},HelpTool:class extends $x{constructor(t={}){super({filename:NB});const e=zm({path:Gm.questionCircle.stroked,class:`${QB}__icon`}),i=Mm.get(HB),n=tp.createElement({element:"button",html:e,class:QB,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.helpTool})`,"data-tippy-content-post":`(${Zx.helpTool})`,"data-oltb-i18n":`${HB}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.helpDialog=void 0,this.options=Fh.merge(Fh.cloneDeep(GB),t),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}momentaryActivation(){this.askToOpenTabOrWindow()}#Z(t){nB(t,Zx.helpTool)&&this.onClickTool()}askToOpenTabOrWindow(){if(this.helpDialog)return;const t=Mm.get(`${HB}.dialogs.confirms.openHelp`);this.helpDialog=B_.confirm({title:t.title,message:t.message,confirmClass:B_.Success,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:()=>{this.doOpenTabOrWindow(),this.helpDialog=void 0},onCancel:()=>{this.helpDialog=void 0}})}doOpenTabOrWindow(){try{window.open(this.options.url,this.options.target).focus()}catch(t){rg.logError(NB,"doOpenTabOrWindow",{message:"Action was restricted by browser settings",error:t}),Nm.error({i18nKey:`${HB}.toasts.errors.blockedByBrowser`})}}},SettingsTool:class extends $x{constructor(t={}){super({filename:"settings-tool.js"}),this.icon=zm({path:Gm.gear.stroked,class:`${tT}__icon`});const e=Mm.get(eT),i=tp.createElement({element:"button",html:this.icon,class:tT,attributes:{type:"button","data-tippy-content":`${e.title} (${Zx.settingsTool})`,"data-tippy-content-post":`(${Zx.settingsTool})`,"data-oltb-i18n":`${eT}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[i]),this.button=i,this.settingsModal=void 0,this.options=Fh.merge(Fh.cloneDeep(iT),t),this.#Xe(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#Xe(){iB.addItem({}),iB.addItem({icon:this.icon,i18nKey:`${eT}.contextItems.clearBrowserState`,fn:this.#as.bind(this)})}momentaryActivation(){this.doShowSettingsModal()}#Z(t){nB(t,Zx.settingsTool)&&this.onClickTool(t)}#as(t,e,i){this.askToClearBrowserState()}askToClearBrowserState(){const t=Mm.get(`${eT}.dialogs.confirms.clearBrowserState`);return B_.confirm({title:t.title,message:t.message,confirmText:t.confirmText,cancelText:t.cancelText,onConfirm:()=>{this.doClearBrowserState()}})}doClearBrowserState(){this.doDispatchBrowserStateCleared(),Nm.info({i18nKey:`${eT}.toasts.infos.clearBrowserState`,autoremove:!0})}doShowSettingsModal(){this.settingsModal||(this.settingsModal=new JM({onSave:()=>{Nm.success({i18nKey:`${eT}.toasts.successes.savedSettings`,autoremove:!0})},onClose:()=>{this.settingsModal=void 0}}))}doDispatchBrowserStateCleared(){wm.dispatchCustomEvent([window],ep.custom.browserStateCleared),[yw,sp].forEach((t=>{t.clear()})),this.options.onBrowserStateCleared&&this.options.onBrowserStateCleared()}},DebugInfoTool:class extends $x{constructor(t={}){super({filename:"debug-info-tool.js"});const e=zm({path:Gm.bug.stroked,class:`${WT}__icon`}),i=Mm.get($T),n=tp.createElement({element:"button",html:e,class:WT,attributes:{type:"button","data-tippy-content":`${i.title} (${Zx.debugInfoTool})`,"data-tippy-content-post":`(${Zx.debugInfoTool})`,"data-oltb-i18n":`${$T}.title`},listeners:{click:this.onClickTool.bind(this)}});tp.appendChildren(this.element,[n]),this.button=n,this.debugInfoModal=void 0,this.options=Fh.merge(Fh.cloneDeep(YT),t),this.#_i(),this.attachGlobalListeners(),this.options.onInitiated&&this.options.onInitiated()}attachGlobalListeners(){this.onWindowKeyUpBind=this.#Z.bind(this),window.addEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}detachGlobalListeners(){window.removeEventListener(ep.browser.keyUp,this.onWindowKeyUpBind)}getName(){return super.getName()}onClickTool(t){super.onClickTool(t),this.momentaryActivation(),this.options.onClicked&&this.options.onClicked()}#_i(){const t=Jg.getConfig().urlParameter.debug;!("true"===F_.getParameter(t))&&this.options.onlyWhenGetParameter&&this.button.classList.add(`${WT}--hidden`)}momentaryActivation(){this.doShowDebugInfoModal()}#Z(t){nB(t,Zx.debugInfoTool)&&this.onClickTool(t)}doShowDebugInfoModal(){if(this.debugInfoModal)return;const t=this.getMap();t&&(this.debugInfoModal=new jT({map:t,onClose:()=>{this.debugInfoModal=void 0}}))}},HiddenAboutTool:class extends $x{constructor(){super({filename:"hidden-about-tool.js"}),this.icon=zm({path:Gm.gitHub.mixed}),this.aboutInfoModal=void 0,this.#Xe()}getName(){return super.getName()}#Xe(){iB.addItem({}),iB.addItem({icon:this.icon,i18nKey:`${ok}.contextItems.about`,fn:this.#ls.bind(this)})}#ls(t,e,i){this.doShowAboutModal()}doShowAboutModal(){if(this.aboutInfoModal)return;const t=Jg.getConfig(),e=Mm.get(`${ok}.modals.about`),i=`\n            <p>${e.version} ${t.toolbar.version}</p>\n            <p>${e.developedBy} <a href="//github.com/qulle/oltb" target="_blank" class="oltb-link">github.com/qulle/oltb</a></p>\n            <p>${e.usingOpenLayers} <a href="//openlayers.org/en/v${t.openLayers.version}/apidoc/" target="_blank" class="oltb-link">${t.openLayers.version}</a></p>\n        `;this.aboutInfoModal=qm.create({title:e.title,content:i,onClose:()=>{this.aboutInfoModal=void 0}})}},ContextMenuTool:iB});return class{static LogManager=rg;static StyleManager=iy;static ErrorManager=xw;static FeatureManager=py;static StateManager=sp;static ElementManager=lp;static ConfigManager=Jg;static TranslationManager=Mm;static ProjectionManager=Ox;static LayerManager=gw;static TippyManager=xm;static TooltipManager=Sw;static UrlManager=F_;static ToolManager=k_;static SnapManager=bw;static SettingsManager=yw;static InfoWindowManager=Av;static ColorPickerManager=bm;static AccessibilityManager=Qx;static ConversionManager=K_;static NameManager=T_;static Toast=Nm;static Modal=qm;static Dialog=B_;createUITooltip=ry;#As={};#V={};#cs(t){return t.tools&&Object.keys(t.tools).length}#hs(t){return this.#cs(t)?t.tools:kk}#us(t){return t instanceof Function?{}:t}#ds(t){const e=this.#hs(t);Object.entries(e).forEach((t=>{const[e,i]=t,n=e,s=this.#us(i);Object.prototype.hasOwnProperty.call(kk,n)&&(this.#As[n]=new kk[n](s))})),this.#As.ContextMenuTool=new kk.ContextMenuTool({})}#gs(){const t=Jg.getConfig().location.default,e=rp.mapData,i=Object.freeze({lon:t.lon,lat:t.lat,zoom:t.zoom,rotation:t.rotation});this.#V=sp.getAndMergeStateObject(e,i)}constructor(t={}){Iw.initAsync([{manager:rg},{manager:wm},{manager:iy},{manager:xw},{manager:py},{manager:sp,options:{ignoredKeys:[]}},{manager:lp},{manager:Jg},{manager:Mm},{manager:Ox},{manager:gw},{manager:bm},{manager:xm},{manager:Sw},{manager:F_},{manager:k_},{manager:yw},{manager:bw},{manager:Av},{manager:Qx}]).then((()=>{this.#gs(),this.#ds(t),t.map&&this.setMap(t.map)}))}setMap(t){Object.values(this.#As).forEach((e=>{e.setMap(t)})),t.setTarget(lp.getMapElement()),t.getInteractions().extend([new Zc({condition:function(t){return Vi(t)||yw.getSetting(E_.mouseWheelZoom)}}),new ls({condition:function(t){return Ui(t)&&yw.getSetting(E_.altShiftDragRotate)}}),new rs({condition:function(t){return(Vi(t)||yw.getSetting(E_.dragPan))&&!Ui(t)&&!zi(t)}}),new Dc({condition:function(t){return yw.getSetting(E_.keyboardZoom)&&Ki(t)}}),new Uc({condition:function(t){return yw.getSetting(E_.keyboardPan)&&Ki(t)}})]);const e=t.getView(),i=xe([Number(this.#V.lon),Number(this.#V.lat)],Jg.getConfig().projection.default);e.setCenter(i),e.setZoom(this.#V.zoom),e.setRotation(this.#V.rotation),Iw.setMap(t),Iw.ready()}}}();
